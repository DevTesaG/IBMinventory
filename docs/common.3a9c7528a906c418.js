"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[592],{6423:(v,l,d)=>{d.d(l,{z:()=>c});class c{}},3602:(v,l,d)=>{d.d(l,{N:()=>c});class c{}},9898:(v,l,d)=>{d.d(l,{L:()=>a});var c=d(5861),_=d(5698),P=d(4004),n=d(8179),m=d(4650),r=d(33);let a=(()=>{class o{constructor(e){this.db=e,this.dbPath="/FPreport",this.invFinishedProductsRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?i=>i.orderBy("timestamp","desc").startAfter(t.timestamp).limit(e):i=>i.orderBy("timestamp","desc").limit(e))}getStock(e){var t=this;return(0,c.Z)(function*(){return e?(console.log(e),new Promise(function(){var s=(0,c.Z)(function*(u){t.invFinishedProductsRef.doc(e).get().pipe((0,_.q)(1),(0,P.U)(f=>({id:f.id,prod:f.data()}))).subscribe(f=>{!f||u({id:f.id,available:f.prod.available,waiting:f.prod.waiting,commited:f.prod.commited})})});return function(u){return s.apply(this,arguments)}}())):{}})()}getAll(){return this.invFinishedProductsRef}create(e){return this.invFinishedProductsRef.add({...e})}update(e,t){return this.invFinishedProductsRef.doc(e).update({timestamp:n.EK.fromDate(new Date),...t})}delete(e){return this.invFinishedProductsRef.doc(e).delete()}filterByNameBatch(e,t,i){return this.db.collection(this.dbPath,i?s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(i.name).limit(t):s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(e,t,i){return this.db.collection(this.dbPath,i?s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").startAfter(i.code).limit(t):s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").limit(t))}}return o.\u0275fac=function(e){return new(e||o)(m.LFG(r.ST))},o.\u0275prov=m.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},490:(v,l,d)=>{d.d(l,{y:()=>a});var c=d(9646),_=d(5698),P=d(4004),n=d(8179),m=d(4650),r=d(33);let a=(()=>{class o{constructor(e){this.db=e,this.dbPath="/RMreport",this.InvRawMaterialsRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?i=>i.orderBy("materialId","desc").startAfter(t.materialId).limit(e):i=>i.orderBy("materialId","desc").limit(e))}getAll(){return this.InvRawMaterialsRef}create(e,t){return t?this.InvRawMaterialsRef.doc(t).set(e):this.InvRawMaterialsRef.add({...e})}update(e,t){return console.log("Update",e,t),this.InvRawMaterialsRef.doc(e).update({timestamp:n.EK.fromDate(new Date),...t})}delete(e){return this.InvRawMaterialsRef.doc(e).delete()}getStock(e){return e?this.InvRawMaterialsRef.doc(e).get().pipe((0,_.q)(1),(0,P.U)(i=>({id:i.id,available:i.data()?i.data()?.available:0,waiting:i.data()?i.data()?.waiting:0,waitingCommited:i.data()?i.data()?.waitingCommited:0,commited:i.data()?i.data()?.commited:0}))):(0,c.of)({})}filterByDateBatch(e,t,i,s,u){return console.log(i),this.db.collection(this.dbPath,f=>f.where("timestamp",">=",e).where("timestamp","<=",t).orderBy("timestamp","desc").limit(s))}filterByNameBatch(e,t,i){return this.db.collection(this.dbPath,i?s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(i.name).limit(t):s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(e,t,i){return this.db.collection(this.dbPath,i?s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").startAfter(i.code).limit(t):s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").limit(t))}}return o.\u0275fac=function(e){return new(e||o)(m.LFG(r.ST))},o.\u0275prov=m.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},8132:(v,l,d)=>{d.d(l,{p:()=>P});var c=d(4650),_=d(33);let P=(()=>{class n{constructor(r){this.db=r,this.dbPath="/orders",this.ordersRef=r.collection(this.dbPath)}getNextBatch(r,a){return this.db.collection(this.dbPath,a?o=>o.orderBy("timestamp","desc").startAfter(a).limit(r):o=>o.orderBy("timestamp","desc").limit(r))}getPrevBatch(r,a,o){return this.db.collection(this.dbPath,h=>h.orderBy("timestamp","desc").startAt(a).endBefore(o).limit(r))}getBatch(r){return this.db.collection(this.dbPath,a=>a.limit(r).orderBy("timestamp","desc"))}getAll(){return this.ordersRef}getById(r){return this.db.collection(this.dbPath,a=>a.where("product_id","==",r))}create(r){return console.log(r),this.ordersRef.add({...r})}update(r,a){return this.ordersRef.doc(r).update(a)}delete(r){return this.ordersRef.doc(r).delete()}filterByName(r){return this.db.collection(this.dbPath,a=>a.where("name",">=",r).where("name","<=",r+"\uf8ff"))}filterByCode(r){return this.db.collection(this.dbPath,a=>a.where("code",">=",r).where("code","<=",r+"\uf8ff"))}}return n.\u0275fac=function(r){return new(r||n)(c.LFG(_.ST))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},5872:(v,l,d)=>{d.d(l,{H:()=>a});var c=d(5861),_=d(4004),P=d(7886),n=d(5577),m=d(4650),r=d(33);let a=(()=>{class o{constructor(e){this.db=e,this.dbPath="/providers",this.ProvidersRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?i=>i.orderBy("materialId","desc").startAfter(t.materialId).limit(e):i=>i.orderBy("materialId","desc").limit(e))}getAll(){return this.ProvidersRef}getById(e){return this.ProvidersRef.doc(e).valueChanges({idField:"id"})}create(e){return this.ProvidersRef.add({...e})}update(e,t){return console.log("Update",e,t),this.ProvidersRef.doc(e).update(t)}delete(e){return this.db.collection(this.dbPath,t=>t.where("materialId","==",e)).get().pipe((0,_.U)(t=>t.docs),(0,P.u)(),(0,n.z)(t=>t.ref.delete()))}getProvidersByMaterial(e){var t=this;return(0,c.Z)(function*(){return e?new Promise(function(){var i=(0,c.Z)(function*(s){t.db.collection(t.dbPath,u=>u.where("materialId","==",e)).snapshotChanges().pipe((0,_.U)(u=>u.map(f=>({id:f.payload.doc.id,...f.payload.doc.data()})))).subscribe(u=>{s(u)})});return function(s){return i.apply(this,arguments)}}()):[]})()}filterByNameBatch(e,t,i){return this.db.collection(this.dbPath,i?s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(i.name).limit(t):s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}}return o.\u0275fac=function(e){return new(e||o)(m.LFG(r.ST))},o.\u0275prov=m.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5561:(v,l,d)=>{d.d(l,{l:()=>P});var c=d(4650),_=d(33);let P=(()=>{class n{constructor(r){this.db=r,this.dbPath="/shopOrder",this.InvRawMaterialsRef=r.collection(this.dbPath)}getNextBatch(r,a){return this.db.collection(this.dbPath,a?o=>o.orderBy("emissionDate","asc").startAfter(a).limit(r):o=>o.orderBy("emissionDate","asc").limit(r))}create(r,a,o,h,e,t,i,s){var u={materialId:r,price:t,name:a,requiredMaterial:o,requestedAmount:h,orderDeadline:e,emissionDate:new Date,timestamp:new Date};return i&&(u.orderId=i),s&&(u.orderCode=s),this.InvRawMaterialsRef.add(u)}update(r,a){return this.InvRawMaterialsRef.doc(r).update(a)}delete(r){return this.InvRawMaterialsRef.doc(r).delete()}filterUrgentatch(r,a,o){return this.db.collection(this.dbPath,o?h=>h.where("orderDeadline","<=",r).orderBy("orderDeadline","asc").startAfter(o.name).limit(a):h=>h.where("orderDeadline","<=",r).orderBy("orderDeadline","asc").limit(a))}}return n.\u0275fac=function(r){return new(r||n)(c.LFG(_.ST))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);