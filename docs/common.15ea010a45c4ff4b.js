"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[592],{3602:(v,m,o)=>{o.d(m,{N:()=>l});class l{}},9898:(v,m,o)=>{o.d(m,{L:()=>d});var l=o(5861),u=o(5698),P=o(4004),f=o(8179),n=o(4650),s=o(33);let d=(()=>{class i{constructor(e){this.db=e,this.dbPath="/FPreport",this.invFinishedProductsRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?r=>r.orderBy("timestamp","desc").startAfter(t.timestamp).limit(e):r=>r.orderBy("timestamp","desc").limit(e))}getStock(e){var t=this;return(0,l.Z)(function*(){return e?new Promise(function(){var a=(0,l.Z)(function*(_){t.invFinishedProductsRef.doc(e).get().pipe((0,u.q)(1),(0,P.U)(h=>({id:h.id,prod:h.data()}))).subscribe(h=>{!h||_({id:h.id,available:h.prod.available,wating:h.prod.wating,commited:h.prod.commited})})});return function(_){return a.apply(this,arguments)}}()):{}})()}getAll(){return this.invFinishedProductsRef}create(e){return this.invFinishedProductsRef.add({...e})}update(e,t){return this.invFinishedProductsRef.doc(e).update({timestamp:f.EK.fromDate(new Date),...t})}delete(e){return this.invFinishedProductsRef.doc(e).delete()}filterByNameBatch(e,t,r){return this.db.collection(this.dbPath,r?a=>a.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(r.name).limit(t):a=>a.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(e,t,r){return this.db.collection(this.dbPath,r?a=>a.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").startAfter(r.code).limit(t):a=>a.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").limit(t))}}return i.\u0275fac=function(e){return new(e||i)(n.LFG(s.ST))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},490:(v,m,o)=>{o.d(m,{y:()=>d});var l=o(9646),u=o(5698),P=o(4004),f=o(8179),n=o(4650),s=o(33);let d=(()=>{class i{constructor(e){this.db=e,this.dbPath="/RMreport",this.InvRawMaterialsRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?r=>r.orderBy("materialId","desc").startAfter(t.materialId).limit(e):r=>r.orderBy("materialId","desc").limit(e))}getAll(){return this.InvRawMaterialsRef}create(e,t){return t?this.InvRawMaterialsRef.doc(t).set(e):this.InvRawMaterialsRef.add({...e})}update(e,t){return console.log("Update",e,t),this.InvRawMaterialsRef.doc(e).update({timestamp:f.EK.fromDate(new Date),...t})}delete(e){return this.InvRawMaterialsRef.doc(e).delete()}getStock(e){return e?this.InvRawMaterialsRef.doc(e).get().pipe((0,u.q)(1),(0,P.U)(r=>({id:r.id,available:r.data()?r.data()?.available:0,wating:r.data()?r.data()?.wating:0,watingCommited:r.data()?r.data()?.watingCommited:0,commited:r.data()?r.data()?.commited:0}))):(0,l.of)({})}filterByDateBatch(e,t,r,a,_){return console.log(r),this.db.collection(this.dbPath,h=>h.where("timestamp",">=",e).where("timestamp","<=",t).orderBy("timestamp","desc").limit(a))}filterByNameBatch(e,t,r){return this.db.collection(this.dbPath,r?a=>a.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(r.name).limit(t):a=>a.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(e,t,r){return this.db.collection(this.dbPath,r?a=>a.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").startAfter(r.code).limit(t):a=>a.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").limit(t))}}return i.\u0275fac=function(e){return new(e||i)(n.LFG(s.ST))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},8132:(v,m,o)=>{o.d(m,{p:()=>f});var l=o(8996),u=o(4650),P=o(33);let f=(()=>{class n{constructor(d){this.db=d,this.dbPath="/orders",this.ordersRef=d.collection(this.dbPath)}getNextBatch(d,i){return this.db.collection(this.dbPath,i?c=>c.orderBy("timestamp","desc").startAfter(i).limit(d):c=>c.orderBy("timestamp","desc").limit(d))}getPrevBatch(d,i,c){return this.db.collection(this.dbPath,e=>e.orderBy("timestamp","desc").startAt(i).endBefore(c).limit(d))}getBatch(d){return this.db.collection(this.dbPath,i=>i.limit(d).orderBy("timestamp","desc"))}getAll(){return this.ordersRef}getById(d){return this.db.collection(this.dbPath,i=>i.where("product_id","==",d))}create(d){return(0,l.D)(this.ordersRef.add({...d}))}update(d,i){return this.ordersRef.doc(d).update(i)}delete(d){return this.ordersRef.doc(d).delete()}filterByName(d){return this.db.collection(this.dbPath,i=>i.where("name",">=",d).where("name","<=",d+"\uf8ff"))}filterByCode(d){return this.db.collection(this.dbPath,i=>i.where("code",">=",d).where("code","<=",d+"\uf8ff"))}}return n.\u0275fac=function(d){return new(d||n)(u.LFG(P.ST))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},5872:(v,m,o)=>{o.d(m,{H:()=>d});var l=o(5861),u=o(4004),P=o(7886),f=o(5577),n=o(4650),s=o(33);let d=(()=>{class i{constructor(e){this.db=e,this.dbPath="/providers",this.ProvidersRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?r=>r.orderBy("materialId","desc").startAfter(t.materialId).limit(e):r=>r.orderBy("materialId","desc").limit(e))}getAll(){return this.ProvidersRef}getById(e){return this.ProvidersRef.doc(e).valueChanges({idField:"id"})}create(e){return this.ProvidersRef.add({...e})}update(e,t){return console.log("Update",e,t),this.ProvidersRef.doc(e).update(t)}delete(e){return this.db.collection(this.dbPath,t=>t.where("materialId","==",e)).get().pipe((0,u.U)(t=>t.docs),(0,P.u)(),(0,f.z)(t=>t.ref.delete()))}getProvidersByMaterial(e){var t=this;return(0,l.Z)(function*(){return e?new Promise(function(){var r=(0,l.Z)(function*(a){t.db.collection(t.dbPath,_=>_.where("materialId","==",e)).snapshotChanges().pipe((0,u.U)(_=>_.map(h=>({id:h.payload.doc.id,...h.payload.doc.data()})))).subscribe(_=>{a(_)})});return function(a){return r.apply(this,arguments)}}()):[]})()}filterByNameBatch(e,t,r){return this.db.collection(this.dbPath,r?a=>a.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(r.name).limit(t):a=>a.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}}return i.\u0275fac=function(e){return new(e||i)(n.LFG(s.ST))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5561:(v,m,o)=>{o.d(m,{l:()=>P});var l=o(4650),u=o(33);let P=(()=>{class f{constructor(s){this.db=s,this.dbPath="/shopOrder",this.InvRawMaterialsRef=s.collection(this.dbPath)}getNextBatch(s,d){return this.db.collection(this.dbPath,d?i=>i.orderBy("emissionDate","asc").startAfter(d).limit(s):i=>i.orderBy("emissionDate","asc").limit(s))}create(s,d,i,c,e,t,r,a,_){var h={materialId:s,price:r,name:d,stockId:t,requiredMaterial:i,requestedAmount:c,orderDeadline:e,emissionDate:new Date,timestamp:new Date};return a&&(h.orderId=a),_&&(h.orderCode=_),this.InvRawMaterialsRef.add(h)}update(s,d){return this.InvRawMaterialsRef.doc(s).update(d)}delete(s){return this.InvRawMaterialsRef.doc(s).delete()}filterUrgentatch(s,d,i){return this.db.collection(this.dbPath,i?c=>c.where("orderDeadline","<=",s).orderBy("orderDeadline","asc").startAfter(i.name).limit(d):c=>c.where("orderDeadline","<=",s).orderBy("orderDeadline","asc").limit(d))}}return f.\u0275fac=function(s){return new(s||f)(l.LFG(u.ST))},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);