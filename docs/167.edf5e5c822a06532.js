"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[167],{7915:(A,C,r)=>{r.d(C,{U:()=>Z});var e=r(4650),x=r(4985),E=r(8179),f=r(4006),_=r(6895),h=r(2121);function g(o,u){if(1&o&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&o){const t=u.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t," ")}}const d=function(o){return{"is-invalid":o}};function m(o,u){if(1&o&&(e.TgZ(0,"select",11)(1,"option",12),e._uU(2,"Seleccione una opcion"),e.qZA(),e.YNc(3,g,2,2,"option",13),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("id",t.label)("name",t.label)("ngClass",e.VKq(6,d,(n.f[t.label].touched||n.submitted)&&n.f[t.label].errors))("formControlName",t.label),e.xp6(1),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",t.value)}}function P(o,u){if(1&o&&e._UZ(0,"input",15),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.Tol("form-control"+t.classlist),e.Q6J("formControlName",t.label)("id",t.label)("name",t.label)("type",t.type)("placeholder",t.placeholder)("value",t.valueCallback?t.getValue():t.value)("ngClass",e.VKq(10,d,(n.f[t.label].touched||n.submitted)&&n.f[t.label].errors))("readonly",n.mode||t.readonly)}}function s(o,u){1&o&&(e.TgZ(0,"div"),e._uU(1,"El Email es invalido"),e.qZA())}function a(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.placeholder," es requerido ")}}function c(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.placeholder," debe estar seleccionado ")}}function v(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.placeholder," no tiene el patron requerido ")}}function O(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," debe tener almenos ",n.f[t.label].errors.minlength.requiredLength," caracteres ")}}function M(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," debe tener menos de ",n.f[t.label].errors.maxlength.requiredLength," caracteres ")}}function l(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," debe tener menos de ",n.f[t.label].errors.maxlength.requiredLength," caracteres ")}}function T(o,u){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," ",n.f[t.label].errors.custom,"")}}function i(o,u){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,s,2,0,"div",17),e.YNc(2,a,2,1,"div",17),e.YNc(3,c,2,1,"div",17),e.YNc(4,v,2,1,"div",17),e.YNc(5,O,2,2,"div",17),e.YNc(6,M,2,2,"div",17),e.YNc(7,l,2,2,"div",17),e.YNc(8,T,2,2,"div",17),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.email),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.required),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.requiredTrue),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.pattern),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.minlength),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.maxlength),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.maxlength),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors.custom)}}function p(o,u){1&o&&e._UZ(0,"div",18)}function D(o,u){if(1&o&&(e.TgZ(0,"div",5),e.YNc(1,m,4,8,"select",6),e.YNc(2,P,1,12,"input",7),e.TgZ(3,"label",8),e._uU(4),e.qZA(),e.YNc(5,i,9,8,"div",9),e.YNc(6,p,1,0,"div",10),e.qZA()),2&o){const t=u.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf","select"==t.type),e.xp6(1),e.Q6J("ngIf","select"!=t.type),e.xp6(1),e.Q6J("for",t.label),e.xp6(1),e.hij("",t.placeholder," "),e.xp6(1),e.Q6J("ngIf",n.f[t.label].errors),e.xp6(1),e.Q6J("ngIf","radio"==t.type)}}function I(o,u){if(1&o&&(e.TgZ(0,"div",3),e.YNc(1,D,7,6,"div",4),e.qZA()),2&o){const t=u.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function w(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"app-warn-modal",20),e.NdJ("continue",function(b){e.CHM(t);const y=e.oxw();return e.KtG(y.onSubmit(b))})("modalMessage",function(){e.CHM(t);const b=e.oxw();return e.KtG(b.modalMessage)}),e.qZA(),e.TgZ(2,"button",21),e.NdJ("click",function(){e.CHM(t);const b=e.oxw();return e.KtG(b.onReset())}),e._uU(3," Resetear "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("btnMessage",t.btnMes)}}let Z=(()=>{class o{constructor(t,n){this.cdref=t,this.fb=n,this.formModel=new e.vpe,this.reject=new e.vpe,this.mode=!1,this.showBtns=!0,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new x.O("Nombre Completo","fullname","text"),new x.O("Nombre de Usuario","username","text")],[new x.O("Correo Electronico","email","text")],[new x.O("Password","password","password"),new x.O("Confirmar Password","Confirm Password","password")],[new x.O("Aceptar los Terminos","Accept Terms","radio",[],"form-check-input",!1)]],this.continue=!1,this.submitted=!1,this.firstCall=!0}ngOnInit(){var t={};t=this.formObj.flat().reduce((n,b)=>{if(this.placeHolder){var y=this.placeHolder[b.getLabel()];y instanceof E.EK&&(y=this.formatDateString(y.toDate().toLocaleDateString())),b.control?.patchValue(y)}return this.mode&&b.control?.clearValidators(),n[b.label]=b.control,n},t),this._form=this.fb.group(t)}get f(){return this._form.controls}onContinue(t){this.continue=t}initPlaceHolder(){this.placeHolder&&this.formObj.forEach(t=>t.forEach(n=>{if(this.placeHolder){var b=this.placeHolder[n.getLabel()];b instanceof E.EK&&(b=this.formatDateString(b.toDate().toLocaleDateString())),this.f[n.getLabel()].patchValue(b)}}))}ngOnChanges(){this.firstCall||this.initPlaceHolder(),this.firstCall=!1}formatDateString(t){return t.split("/").reverse().join("/").replace(/\//g,"-")}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(t){this.submitted=!0,!this._form.invalid&&this.formModel.emit(this._form.getRawValue())}onReset(){this._form.reset(),this.continue=!1,this.submitted=!1}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(f.j3))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form"]],inputs:{placeHolder:"placeHolder",mode:"mode",showBtns:"showBtns",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel",reject:"reject"},features:[e.TTD],decls:3,vars:3,consts:[["name","form",3,"formGroup","ngSubmit"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["class","form-select",3,"id","name","ngClass","formControlName",4,"ngIf"],["oninput","this.value = this.value.toLowerCase()","min","1","step","1",3,"formControlName","class","id","name","type","placeholder","value","ngClass","readonly",4,"ngIf"],[1,"",3,"for"],["class","invalid-feedback",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"form-select",3,"id","name","ngClass","formControlName"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["oninput","this.value = this.value.toLowerCase()","min","1","step","1",3,"formControlName","id","name","type","placeholder","value","ngClass","readonly"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["id","1","name","btn1","type","submit",1,"mt-2","ms-2",3,"btnMessage","continue","modalMessage"],["type","button",1,"ms-2","mt-2","btn","btn-outline-primary","rounded-pill",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onContinue(!0)}),e.YNc(1,I,2,1,"div",1),e.YNc(2,w,4,1,"div",2),e.qZA()),2&t&&(e.Q6J("formGroup",n._form),e.xp6(1),e.Q6J("ngForOf",n.formObj),e.xp6(1),e.Q6J("ngIf",!n.mode&&n.showBtns))},dependencies:[_.mk,_.sg,_.O5,f._Y,f.YN,f.Kr,f.Fj,f.EJ,f.JJ,f.JL,f.sg,f.u,h.u]}),o})()},2121:(A,C,r)=>{r.d(C,{u:()=>f});var e=r(4650),x=r(6895);const E=function(){return["btn-outline-success","rounded-pill"]};let f=(()=>{class _{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.btnType=!1,this.continue=new e.vpe}ngOnInit(){}modalContinue(g){this.continue.emit(g)}}return _.\u0275fac=function(g){return new(g||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage",classlist:"classlist",btnType:"btnType"},outputs:{continue:"continue"},decls:17,vars:4,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn",3,"ngClass"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","submit","data-bs-dismiss","modal",1,"ms-5","pb-2","btn","btn-success","rounded-pill",3,"click"]],template:function(g,d){1&g&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),e._uU(8,"PRECAUCION"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return d.modalContinue(!1)}),e.qZA()(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return d.modalContinue(!1)}),e._uU(14,"Abortar"),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return d.modalContinue(!0)}),e._uU(16,"Continuar"),e.qZA()()()()()()),2&g&&(e.xp6(1),e.Q6J("ngClass",d.classlist?d.classlist:e.DdM(3,E)),e.xp6(1),e.hij(" ",d.btnMessage," "),e.xp6(9),e.hij(" ",d.modalMessage," "))},dependencies:[x.mk]}),_})()},4985:(A,C,r)=>{r.d(C,{O:()=>E});var e=r(4006),x=r(8505);class E{constructor(_,h,g,d=[e.kI.required],m,P,s,a,c=!1){this.value=m,this.label=h,this.type=g,this.placeholder=_,this.classlist=P||" ",this.ref=a||void 0,this.valueCallback=s,this.readonly=c,d.push(e.kI.required),this.control=new e.NI({value:null,disabled:c},d),this.respondTo$=this.control.valueChanges.pipe((0,x.b)({next:s,error:v=>console.log(v),complete:()=>console.log("Completed")}))}setReadOnly(_){return this.readonly=_,this}setValue(_){return this.value=_,this}getValue(){this.value=this.ref?this.valueCallback(...this.ref.map(_=>_.value)):this.valueCallback()}getLabel(){return this.label}}},798:(A,C,r)=>{r.d(C,{C:()=>d});var e=r(8179),x=r(4004),E=r(7886),f=r(1402),_=r(5577),h=r(4650),g=r(33);let d=(()=>{class m{constructor(s){this.db=s,this.dbPath="/audit",this.objectsRef=s.collection(this.dbPath)}getNextBatch(s,a){return this.db.collection(this.dbPath,a?c=>c.orderBy("timestamp","desc").startAfter(a.timestamp).limit(s):c=>c.orderBy("timestamp","desc").limit(s))}create(s,a,c,v,O,M){var l={name:s,process:a,posterior:v,timestamp:e.EK.fromDate(new Date),user:c};return O&&(l.prior=O),M&&(l.itemId=M),this.objectsRef.add({...l})}update(s,a){return this.objectsRef.doc(s).update(a)}delete(s){return this.objectsRef.doc(s).delete()}deleteAll(){return this.objectsRef.get().pipe((0,x.U)(s=>s.docs),(0,E.u)(),(0,f.j)(500),(0,_.z)(s=>{var a=this.db.firestore.batch();return s.map(c=>a.delete(c.ref)),a.commit()}))}filterByDateBatch(s,a,c,v,O){return console.log(c),this.db.collection(this.dbPath,M=>M.where("timestamp",">=",s).where("timestamp","<=",a).where("name","==",c).orderBy("timestamp","desc").limit(v))}filterByNameBatch(s,a,c){return this.db.collection(this.dbPath,c?v=>v.where("name",">=",s).where("name","<=",s+"\uf8ff").orderBy("name","desc").startAfter(c.name).limit(a):v=>v.where("name",">=",s).where("name","<=",s+"\uf8ff").orderBy("name","desc").limit(a))}filterByCodeBatch(s,a,c){return this.db.collection(this.dbPath,c?v=>v.where("code",">=",s).where("code","<=",s+"\uf8ff").orderBy("code","desc").startAfter(c.code).limit(a):v=>v.where("code",">=",s).where("code","<=",s+"\uf8ff").orderBy("code","desc").limit(a))}}return m.\u0275fac=function(s){return new(s||m)(h.LFG(g.ST))},m.\u0275prov=h.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5748:(A,C,r)=>{r.d(C,{Q:()=>M});var e=r(4650),x=r(1135),E=r(9646),f=r(3900),_=r(8505),h=r(2622),g=r(6535),d=r(6895);function m(l,T){if(1&l&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&l){const i=e.oxw().$implicit,p=e.oxw(2).$implicit,D=e.oxw(2);e.xp6(1),e.hij(" ",p[i].toDate().toLocaleDateString("es-MX",D.dateOptions)," ")}}function P(l,T){if(1&l&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&l){const i=e.oxw().$implicit,p=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",p[i]," ")}}function s(l,T){if(1&l&&(e.TgZ(0,"div"),e.YNc(1,m,2,1,"div",8),e.YNc(2,P,2,1,"div",3),e.qZA()),2&l){const i=T.$implicit;e.xp6(1),e.Q6J("ngIf","orderDeadline"==i),e.xp6(1),e.Q6J("ngIf","orderDeadline"!=i)}}function a(l,T){if(1&l&&(e.TgZ(0,"span",6),e.YNc(1,s,3,2,"div",7),e.qZA()),2&l){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.showParams)}}function c(l,T){if(1&l){const i=e.EpF();e.TgZ(0,"li",4),e.NdJ("click",function(){const D=e.CHM(i),I=D.$implicit,w=D.index,Z=e.oxw(2);return e.KtG(Z.setActiveProduct(I,w))}),e.YNc(1,a,2,1,"span",5),e.qZA()}if(2&l){const i=T.index,p=e.oxw(2);e.ekj("active",i==p.currentIndex),e.xp6(1),e.Q6J("ngIf",p.isFetched)}}function v(l,T){1&l&&(e.TgZ(0,"li")(1,"span"),e._uU(2,"No se encontraron resultados..."),e.qZA()())}function O(l,T){if(1&l&&(e.TgZ(0,"ul",1),e.YNc(1,c,2,3,"li",2),e.ALo(2,"async"),e.YNc(3,v,3,0,"li",3),e.qZA()),2&l){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,i.fetchedData$)),e.xp6(2),e.Q6J("ngIf",!i.isFetched)}}let M=(()=>{class l{constructor(i,p){this.fos=i,this.cache=p,this.selectedElement=new e.vpe,this.fetchedArray=new e.vpe,this.showParams=["name"],this.mode=!1,this.key="name",this.fetchedDataSub$=new x.X((0,E.of)([{}])),this.fetchedData$=(0,E.of)([]),this.dateOptions={weekday:"long",year:"numeric",month:"long",day:"numeric"},this.currentIndex=-1,this.isFetched=!1,this.firstCall=!0,this.disableNext=!1,this.disablePrev=!0,this.queryChange=void 0,this.filterKey="name",this.exact=!1,this.elementPerCall=10}ngOnInit(){this.path||(this.path="/products"),this.fos.pathSetter(this.path),this.filterKey=this.key,this.firstCall=!1,this.fetchedDataSub$=this.cache.getCollection(this.path,this.key,this.queryChange),this.fetchedData$=this.fetchedDataSub$.asObservable().pipe((0,f.w)(i=>i),(0,_.b)({next:i=>{i.length&&i.length>0&&(this.isFetched=!0,this.mode&&this.fetchedArray.emit(i))},error:()=>alert("Error al cargar bases de datos, favor de recargar"),complete:()=>console.log("Complete")}))}setActiveProduct(i,p){this.currentIndex=p,this.selectedElement.emit({element:i,index:p})}nextPage(){var i=this.fos.filterByKeyBatch(this.key,this.queryChange,this.exact).pipe((0,_.b)({next:p=>{p.length&&p.length>0&&(this.isFetched=!0,this.mode&&this.fetchedArray.emit(p))},error:()=>alert("Error al cargar bases de datos, favor de recargar"),complete:()=>console.log("Complete")}));this.fetchedDataSub$.next(i)}resetPagination(){this.disableNext=!1,this.disablePrev=!0,this.currentIndex=-1,this.currentElement=void 0}ngOnChanges(i){this.firstCall||(this.isFetched=!1,i.path&&this.fos.pathSetter(i.path.currentValue),i.query&&(i.query.currentValue instanceof Object?(this.queryChange=i.query.currentValue.value,this.key=i.query.currentValue.key?i.query.currentValue.key:this.filterKey,this.exact=!!i.query.currentValue.exact):(this.queryChange=i.query.currentValue,this.key=this.filterKey,this.exact=!1),console.log(this.key,this.queryChange)),this.filterProducts())}filterProducts(){this.resetPagination(),this.nextPage()}}return l.\u0275fac=function(i){return new(i||l)(e.Y36(g.U),e.Y36(h.Q))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-pagination"]],inputs:{query:"query",path:"path",showParams:"showParams",mode:"mode",key:"key"},outputs:{selectedElement:"selectedElement",fetchedArray:"fetchedArray"},features:[e._Bn([g.U,{provide:"path",useValue:"/RMreport"},h.Q]),e.TTD],decls:1,vars:1,consts:[["class","list-group overflow-auto mt-3 mb-1","style","max-height:70vh;",4,"ngIf"],[1,"list-group","overflow-auto","mt-3","mb-1",2,"max-height","70vh"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-group-item",3,"click"],["class","d-flex",4,"ngIf"],[1,"d-flex"],[4,"ngFor","ngForOf"],["class","ms-2",4,"ngIf"],[1,"ms-2"]],template:function(i,p){1&i&&e.YNc(0,O,4,4,"ul",0),2&i&&e.Q6J("ngIf",!p.mode)},dependencies:[d.sg,d.O5,d.Ov]}),l})()},1402:(A,C,r)=>{r.d(C,{j:()=>f});var e=r(4482),x=r(5403),E=r(8737);function f(_,h=null){return h=h??_,(0,e.e)((g,d)=>{let m=[],P=0;g.subscribe((0,x.x)(d,s=>{let a=null;P++%h==0&&m.push([]);for(const c of m)c.push(s),_<=c.length&&(a=a??[],a.push(c));if(a)for(const c of a)(0,E.P)(m,c),d.next(c)},()=>{for(const s of m)d.next(s);d.complete()},void 0,()=>{m=null}))})}},8179:(A,C,r)=>{r.d(C,{EK:()=>e.EK});var e=r(2810)}}]);