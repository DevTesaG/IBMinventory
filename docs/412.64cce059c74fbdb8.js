"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[412],{8783:(F,h,o)=>{o.r(h),o.d(h,{MaterialModule:()=>k});var c=o(6895),p=o(9051);class g{}var _=o(8179),m=o(6535),d=o(4985);class v{}var e=o(4650),C=o(798),M=o(490),x=o(4245);function Z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",4)(2,"div",5)(3,"app-form",6),e.NdJ("formModel",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.submit(a))}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formObj",t.formObj)}}function b(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"h4"),e._uU(2,"El material a sido registrado Satisfactoriamente!"),e.qZA(),e.TgZ(3,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.newMaterial())}),e._uU(4,"A\xf1adir Otro"),e.qZA()()}}let T=(()=>{class i{constructor(t,n,a){this.fos=t,this.auditService=n,this.invRMService=a,this.material=new g,this.invMaterial=new v,this.submitted=!1,this.Deps=["Corte y Ensamble","Carpinteria","Detallado y Pintura","Piel","Consumible","Almacen General","Empaque"],this.formObj=[[new d.O("Nombre","name","text"),new d.O("Lote Minimo","minBatch","number")],[new d.O("Descripcion","description","text")],[new d.O("Precio","price","number")],[new d.O("Cantidad en Inventario","available","number")],[new d.O("Tiempo de Entrega","deliveryTime","number")],[new d.O("Area","area","text"),new d.O("Zona","zone","text"),new d.O("Posicion","position","text")]]}submit(t){this.material=t,this.invMaterial={name:t.name,available:+t.available,commited:0,watingCommited:0,wating:0},this.saveMaterial()}saveMaterial(){this.material.timestamp=_.EK.fromDate(new Date),this.fos.create(this.material).then(t=>{this.invRMService.create({materialId:t.id,...this.invMaterial}),console.log("Created new material successfully!"),this.submitted=!0})}newMaterial(){this.submitted=!1,this.material=new g}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.U),e.Y36(C.C),e.Y36(M.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-material"]],features:[e._Bn([m.U,{provide:"path",useValue:"/materials"}])],decls:6,vars:2,consts:[[1,"container","vh-100"],[1,"text-muted","mt-5"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"card","mt-4","bg-light","shadow-lg","border-0"],[1,"card-body"],["btnMes","Crear Material","modalMessage","\xbfDesea continuar con la creacion del material?",3,"formObj","formModel"],[1,"mt-3"],[1,"btn","btn-outline-success","mt-2",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2," Registro del Material"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,Z,4,1,"div",2),e.YNc(5,b,5,0,"div",3),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",!n.submitted),e.xp6(1),e.Q6J("ngIf",n.submitted))},dependencies:[c.O5,x.U]}),i})();var w=o(4004),f=o(3985),s=o(433);function y(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"h4"),e._uU(2,"Material"),e.qZA(),e.TgZ(3,"form")(4,"div",3)(5,"input",4),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentMaterial.name=a)}),e.qZA(),e.TgZ(6,"label",5),e._uU(7,"Nombre"),e.qZA()(),e.TgZ(8,"div",6)(9,"div",3)(10,"input",7),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentMaterial.available=a)}),e.qZA(),e.TgZ(11,"label",8),e._uU(12,"Unidades Disponibles"),e.qZA()(),e.TgZ(13,"div",3)(14,"input",9),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentMaterial.commited=a)}),e.qZA(),e.TgZ(15,"label",10),e._uU(16,"Unidades Comprometidas"),e.qZA()()(),e.TgZ(17,"div",6)(18,"div",3)(19,"input",11),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentMaterial.watingCommited=a)}),e.qZA(),e.TgZ(20,"label",12),e._uU(21,"Unidades Esperando Comprometidas"),e.qZA()(),e.TgZ(22,"div",3)(23,"input",13),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentMaterial.wating=a)}),e.qZA(),e.TgZ(24,"label",14),e._uU(25,"Unidades Esperando"),e.qZA()()(),e.TgZ(26,"div",3)(27,"input",15),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentMaterial.description=a)}),e.qZA(),e.TgZ(28,"label",16),e._uU(29,"Descripcion"),e.qZA()(),e.TgZ(30,"div",17)(31,"input",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.material.deliveryTime=a)}),e.qZA(),e.TgZ(32,"span",19),e._uU(33,"Unidades"),e.qZA(),e.TgZ(34,"label",20),e._uU(35,"Tiempo de Entrega en Dias"),e.qZA()()(),e.TgZ(36,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteMaterial())}),e._uU(37," Eliminar "),e.qZA(),e.TgZ(38,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateMaterial())}),e._uU(39," Editar "),e.qZA(),e.TgZ(40,"p"),e._uU(41),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.currentMaterial.name),e.xp6(5),e.Q6J("ngModel",t.currentMaterial.available),e.xp6(4),e.Q6J("ngModel",t.currentMaterial.commited),e.xp6(5),e.Q6J("ngModel",t.currentMaterial.watingCommited),e.xp6(4),e.Q6J("ngModel",t.currentMaterial.wating),e.xp6(4),e.Q6J("ngModel",t.currentMaterial.description),e.xp6(4),e.Q6J("ngModel",t.material.deliveryTime),e.xp6(10),e.Oqu(t.message)}}function A(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"p"),e._uU(3,"No fue posible acceder a este material..."),e.qZA()())}let U=(()=>{class i{constructor(t,n){this.materialService=t,this.reportService=n,this.material=new g,this.refreshList=new e.vpe,this.currentMaterial={},this.income=0,this.outflow=0,this.message=""}ngOnInit(){this.currentMaterial=this.material,this.message=""}ngOnChanges(){this.message="",this.currentMaterial={...this.material}}updateMaterial(){this.currentMaterial.id&&this.materialService.update(this.currentMaterial.id,{name:this.currentMaterial.name,description:this.currentMaterial.description})?.then(()=>this.message="The Material was updated successfully!").catch(n=>console.log(n))}deleteMaterial(){this.currentMaterial.id&&this.materialService.delete(this.currentMaterial.id).then(()=>{this.refreshList.emit(),this.message="The Material was updated successfully!"}).catch(t=>console.log(t))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.U),e.Y36(M.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-material-details"]],inputs:{material:"material"},outputs:{refreshList:"refreshList"},features:[e.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-floating","mb-2"],["type","text","id","name","placeholder","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],[1,"input-group"],["readonly","","type","number","id","available","placeholder","available","name","available",1,"form-control",3,"ngModel","ngModelChange"],["for","available"],["readonly","","type","number","id","commited","placeholder","commited","name","commited",1,"form-control",3,"ngModel","ngModelChange"],["for","commited"],["readonly","","type","number","id","watingCommited","placeholder","watingCommited","name","watingCommited",1,"form-control",3,"ngModel","ngModelChange"],["for","watingCommited"],["readonly","","type","number","id","wating","placeholder","wating","name","wating",1,"form-control",3,"ngModel","ngModelChange"],["for","wating"],["type","text","id","description","placeholder","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],[1,"form-floating","input-group","mb-2"],["readonly","","type","text","id","deliveryTime","placeholder","deliveryTime","name","deliveryTime","readonly","readonly",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text"],["for","deliveryTime"],[1,"btn","btn-danger","rounded-pill","mx-2","mt-2",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","mt-2",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,y,42,8,"div",0),e.YNc(1,A,4,0,"div",1)),2&t&&(e.Q6J("ngIf",n.material),e.xp6(1),e.Q6J("ngIf",!n.material))},dependencies:[c.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.On,s.F]}),i})();function J(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"li",24),e.NdJ("click",function(){const a=e.CHM(t),r=a.$implicit,u=a.index,D=e.oxw();return e.KtG(D.setActiveMaterial(r,u))}),e._uU(1),e.qZA()}if(2&i){const t=l.$implicit,n=l.index,a=e.oxw();e.ekj("active",n==a.currentIndex),e.xp6(1),e.hij(" ",t.name," ")}}function q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"app-material-details",25),e.NdJ("refreshList",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.refreshList())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("material",t.currentMaterial)}}function N(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"p"),e._uU(3,"Seleccione un material..."),e.qZA()())}const I=[{path:"",component:(()=>{class i{constructor(t,n){this.fos=t,this.mats=n,this.Materials=[],this.currentIndex=-1,this.title="",this.query="",this.productsPerCall=2,this.lastInResponses=[],this.disableNext=!1,this.disablePrev=!0}ngOnInit(){this.nextPage(!0)}nextPage(t){var a,n=void 0;if(t){if(this.disableNext)return;n=this.Materials.at(-1),this.lastInResponses.push(n)}else{if(this.disablePrev)return;this.lastInResponses?.pop(),n=this.lastInResponses?.at(-1)}console.log(n),a=this.queryChange?this.fos.filterByKeyBatch("name",this.queryChange,this.productsPerCall,n):this.fos.getNextBatch(this.productsPerCall,n),console.log("Last in response: ",this.lastInResponses,"Anchor",n),a.snapshotChanges().pipe((0,w.U)(r=>r.map(u=>({id:u.payload.doc.id,...u.payload.doc.data()})))).subscribe(r=>{if(!r.length)return this.disableNext=!0,void this.lastInResponses?.pop();this.Materials=r,this.disableNext=r.length<this.productsPerCall,this.disablePrev=!n})}refreshList(){this.currentMaterial=void 0,this.currentIndex=-1}filterMaterials(){this.Materials=[],this.lastInResponses=[],this.disableNext=!1,this.disablePrev=!0,this.queryChange=""==this.query?void 0:this.query,console.log("Last in response: ",this.lastInResponses),this.nextPage(!0)}setActiveMaterial(t,n){this.currentMaterial=t,this.currentIndex=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.U),e.Y36(f.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-material-list"]],features:[e._Bn([m.U,{provide:"path",useValue:"/materials"}])],decls:36,vars:4,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],["type","search","name","query","placeholder","Busqueda por Nombre","aria-label","Search",1,"form-control","ms-5","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"position-fixed","bottom-0","end-0",2,"margin","6rem","z-index","1070"],["routerLink","add",1,"btn","btn-success","btn-lg","rounded-pill"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","4vh","height","4vh","viewBox","0 0 47 47",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141 c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27 c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435 c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],["aria-label","Page navigation",1,"mt-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],[1,"list-group-item",3,"click"],[3,"material","refreshList"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),e._uU(3,"Lista de Materiales"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(r){return n.query=r}),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.filterMaterials()}),e._uU(6,"Buscar"),e.qZA()(),e._UZ(7,"hr"),e.TgZ(8,"div",5)(9,"button",6),e.O4$(),e.TgZ(10,"svg",7),e._UZ(11,"g",8)(12,"g",9),e.TgZ(13,"g",10)(14,"g"),e._UZ(15,"path",11),e.qZA()()()()(),e.kcU(),e.TgZ(16,"div",12)(17,"div",13)(18,"ul",14),e.YNc(19,J,2,3,"li",15),e.qZA()(),e.TgZ(20,"div",13),e.YNc(21,q,2,1,"div",16),e.YNc(22,N,4,0,"div",16),e.qZA()(),e.TgZ(23,"nav",17)(24,"ul",18)(25,"li",19)(26,"button",20),e.NdJ("click",function(){return n.nextPage(!1)}),e.TgZ(27,"span",21),e._uU(28,"\xab"),e.qZA()()(),e.TgZ(29,"li",19)(30,"span",22),e._uU(31," Anterior/Siguiente Registro"),e.qZA()(),e.TgZ(32,"li",19)(33,"button",23),e.NdJ("click",function(){return n.nextPage(!0)}),e.TgZ(34,"span",21),e._uU(35,"\xbb"),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.query),e.xp6(15),e.Q6J("ngForOf",n.Materials),e.xp6(2),e.Q6J("ngIf",n.currentMaterial),e.xp6(1),e.Q6J("ngIf",!n.currentMaterial))},dependencies:[c.sg,c.O5,p.rH,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,U]}),i})()},{path:"add",component:T}];let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(I),p.Bz]}),i})();var O=o(4466);let k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,L,O.m]}),i})()}}]);