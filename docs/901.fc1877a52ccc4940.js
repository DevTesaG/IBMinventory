"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[901],{2121:(b,m,l)=>{l.d(m,{u:()=>u});var e=l(4650),f=l(6895);const _=function(){return["btn-outline-success","rounded-pill"]};let u=(()=>{class h{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.btnType=!1,this.continue=new e.vpe}ngOnInit(){}modalContinue(r){this.continue.emit(r)}}return h.\u0275fac=function(r){return new(r||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage",classlist:"classlist",btnType:"btnType"},outputs:{continue:"continue"},decls:17,vars:4,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn",3,"ngClass"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","submit","data-bs-dismiss","modal",1,"ms-5","pb-2","btn","btn-success","rounded-pill",3,"click"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),e._uU(8,"PRECAUCION"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.modalContinue(!1)}),e.qZA()(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return o.modalContinue(!1)}),e._uU(14,"Abortar"),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return o.modalContinue(!0)}),e._uU(16,"Continuar"),e.qZA()()()()()()),2&r&&(e.xp6(1),e.Q6J("ngClass",o.classlist?o.classlist:e.DdM(3,_)),e.xp6(1),e.hij(" ",o.btnMessage," "),e.xp6(9),e.hij(" ",o.modalMessage," "))},dependencies:[f.mk]}),h})()},798:(b,m,l)=>{l.d(m,{C:()=>o});var e=l(8179),f=l(4004),_=l(7886),u=l(1402),h=l(5577),n=l(4650),r=l(33);let o=(()=>{class c{constructor(t){this.db=t,this.dbPath="/audit",this.objectsRef=t.collection(this.dbPath)}getNextBatch(t,s){return this.db.collection(this.dbPath,s?i=>i.orderBy("timestamp","desc").startAfter(s.timestamp).limit(t):i=>i.orderBy("timestamp","desc").limit(t))}create(t,s,i,a,d,p){var P={name:t,process:s,posterior:a,timestamp:e.EK.fromDate(new Date),user:i};return d&&(P.prior=d),p&&(P.itemId=p),this.objectsRef.add({...P})}update(t,s){return this.objectsRef.doc(t).update(s)}delete(t){return this.objectsRef.doc(t).delete()}deleteAll(){return this.objectsRef.get().pipe((0,f.U)(t=>t.docs),(0,_.u)(),(0,u.j)(500),(0,h.z)(t=>{var s=this.db.firestore.batch();return t.map(i=>s.delete(i.ref)),s.commit()}))}filterByDateBatch(t,s,i,a,d){return console.log(i),this.db.collection(this.dbPath,p=>p.where("timestamp",">=",t).where("timestamp","<=",s).where("name","==",i).orderBy("timestamp","desc").limit(a))}filterByNameBatch(t,s,i){return this.db.collection(this.dbPath,i?a=>a.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").startAfter(i.name).limit(s):a=>a.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").limit(s))}filterByCodeBatch(t,s,i){return this.db.collection(this.dbPath,i?a=>a.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").startAfter(i.code).limit(s):a=>a.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").limit(s))}}return c.\u0275fac=function(t){return new(t||c)(n.LFG(r.ST))},c.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6535:(b,m,l)=>{l.d(m,{U:()=>_});var e=l(4650),f=l(33);let _=(()=>{class u{constructor(n,r){this.db=n,this.path=r,this.objectRef=n.collection(this.path)}pathSetter(n){this.path=n,this.objectRef=this.db.collection(this.path)}pathGetter(){return this.path}getNextBatch(n,r){return this.db.collection(this.path,r?o=>o.orderBy("timestamp","desc").startAfter(r.timestamp).limit(n):o=>o.orderBy("timestamp","desc").limit(n))}getAll(){return this.objectRef}getByKey(n,r){return this.db.collection(this.path,o=>o.where(n,"==",r))}create(n,r){return r?this.objectRef.doc(r).set(n):this.objectRef.add({...n})}update(n,r){return this.objectRef.doc(n).update(r)}delete(n){return this.objectRef.doc(n).delete()}filterByNameBatch(n,r,o){return this.db.collection(this.path,o?c=>c.where("name",">=",n).where("name","<=",n+"\uf8ff").orderBy("name","desc").startAfter(o.name).limit(r):c=>c.where("name",">=",n).where("name","<=",n+"\uf8ff").orderBy("name","desc").limit(r))}filterUrgent(n,r,o){return this.db.collection(this.path,o?c=>c.where("orderDeadline","<=",n).orderBy("orderDeadline","asc").startAfter(o.name).limit(r):c=>c.where("orderDeadline","<=",n).orderBy("orderDeadline","asc").limit(r))}filterByKeyBatch(n,r,o,c,g){return"orderDeadline"==n?this.filterUrgent(r,o,c):this.db.collection(this.path,c?g?t=>t.where(n,"==",r).orderBy("timestamp","desc").startAfter(c.timestamp).limit(o):t=>t.where(n,">=",r).where(n,"<=",r+"\uf8ff").orderBy(n,"desc").startAfter(c[n]).limit(o):g?t=>t.where(n,"==",r).orderBy("timestamp","desc").limit(o):t=>t.where(n,">=",r).where(n,"<=",r+"\uf8ff").orderBy(n,"desc").limit(o))}}return u.\u0275fac=function(n){return new(n||u)(e.LFG(f.ST),e.LFG("path"))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},5748:(b,m,l)=>{l.d(m,{Q:()=>g});var e=l(4650),f=l(4004),_=l(6535),u=l(6895);function h(t,s){if(1&t&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,a=e.oxw().$implicit,d=e.oxw(2);e.xp6(1),e.hij(" ",a[i].toDate().toLocaleDateString("es-MX",d.dateOptions)," ")}}function n(t,s){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,a=e.oxw().$implicit;e.xp6(1),e.hij(" ",a[i]," ")}}function r(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,h,2,1,"div",13),e.YNc(2,n,2,1,"div",14),e.qZA()),2&t){const i=s.$implicit;e.xp6(1),e.Q6J("ngIf","orderDeadline"==i),e.xp6(1),e.Q6J("ngIf","orderDeadline"!=i)}}function o(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){const d=e.CHM(i),p=d.$implicit,P=d.index,y=e.oxw(2);return e.KtG(y.setActiveProduct(p,P))}),e.TgZ(1,"span",11),e.YNc(2,r,3,2,"div",12),e.qZA()()}if(2&t){const i=s.index,a=e.oxw(2);e.ekj("active",i==a.currentIndex),e.xp6(2),e.Q6J("ngForOf",a.showParams)}}function c(t,s){if(1&t&&(e.TgZ(0,"ul",8),e.YNc(1,o,3,3,"li",9),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.elementArray)}}let g=(()=>{class t{constructor(i){this.fos=i,this.selectedElement=new e.vpe,this.fetchedArray=new e.vpe,this.showParams=["name"],this.mode=!1,this.key="name",this.dateOptions={weekday:"long",year:"numeric",month:"long",day:"numeric"},this.currentIndex=-1,this.isFetched=!1,this.firstCall=!0,this.disableNext=!1,this.disablePrev=!0,this.updateProducts=!1,this.elementArray=[],this.lastInResponses=[],this.cached=[],this.queryChange=void 0,this.filterKey="name",this.exact=!1,this.elementPerCall=10}ngOnInit(){this.path||(this.path="/products"),this.fos.pathSetter(this.path),this.nextPage(!0),this.filterKey=this.key,this.firstCall=!1}setActiveProduct(i,a){this.currentIndex=a,this.selectedElement.emit({element:i,index:a})}nextPage(i){var a;if(i){if(this.disableNext)return;a=this.elementArray.at(-1),this.lastInResponses.push(a)}else{if(this.disablePrev)return;this.lastInResponses?.pop(),a=this.lastInResponses?.at(-1)}this.req=this.queryChange?this.fos.filterByKeyBatch(this.key,this.queryChange,this.elementPerCall,a,this.exact):this.fos.getNextBatch(this.elementPerCall,a),this.req.get().pipe((0,f.U)(d=>d.docs.map(p=>({id:p.id,...p.data()})))).subscribe({next:d=>{if(!d.length)return this.disableNext=!0,void this.lastInResponses?.pop();this.elementArray=d,this.disableNext=d.length<this.elementPerCall,this.disablePrev=!a,this.isFetched=!0,this.mode&&this.fetchedArray.emit(this.elementArray)},error:d=>alert(d),complete:()=>console.log("SI completo")})}resetPagination(){this.disableNext=!1,this.disablePrev=!0,this.currentIndex=-1,this.currentElement=void 0,this.elementArray=[],this.lastInResponses=[]}ngOnChanges(i){this.firstCall||(this.isFetched=!1,i.path&&this.fos.pathSetter(i.path.currentValue),i.key&&console.log("Key Changed"),i.query&&(i.query.currentValue instanceof Object?(this.queryChange=i.query.currentValue.value,this.key=i.query.currentValue.key?i.query.currentValue.key:this.filterKey,this.exact=!!i.query.currentValue.exact):(this.queryChange=i.query.currentValue,this.key=this.filterKey,this.exact=!1),console.log(this.key,this.queryChange)),this.filterProducts())}filterProducts(){this.resetPagination(),this.nextPage(!0)}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(_.U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-pagination"]],inputs:{query:"query",path:"path",showParams:"showParams",mode:"mode",key:"key"},outputs:{selectedElement:"selectedElement",fetchedArray:"fetchedArray"},features:[e._Bn([_.U,{provide:"path",useValue:"/RMreport"}]),e.TTD],decls:14,vars:1,consts:[["aria-label","Page navigation",1,"my-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],["class","list-group mt-3 mb-3",4,"ngIf"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"d-flex"],[4,"ngFor","ngForOf"],["class","ms-2",4,"ngIf"],[4,"ngIf"],[1,"ms-2"]],template:function(i,a){1&i&&(e.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"button",3),e.NdJ("click",function(){return a.nextPage(!1)}),e.TgZ(4,"span",4),e._uU(5,"\xab"),e.qZA()()(),e.TgZ(6,"li",2)(7,"span",5),e._uU(8," Anterior/Siguiente Registro"),e.qZA()(),e.TgZ(9,"li",2)(10,"button",6),e.NdJ("click",function(){return a.nextPage(!0)}),e.TgZ(11,"span",4),e._uU(12,"\xbb"),e.qZA()()()()(),e.YNc(13,c,2,1,"ul",7)),2&i&&(e.xp6(13),e.Q6J("ngIf",!a.mode&&a.isFetched))},dependencies:[u.sg,u.O5]}),t})()},1402:(b,m,l)=>{l.d(m,{j:()=>u});var e=l(4482),f=l(5403),_=l(8737);function u(h,n=null){return n=n??h,(0,e.e)((r,o)=>{let c=[],g=0;r.subscribe((0,f.x)(o,t=>{let s=null;g++%n==0&&c.push([]);for(const i of c)i.push(t),h<=i.length&&(s=s??[],s.push(i));if(s)for(const i of s)(0,_.P)(c,i),o.next(i)},()=>{for(const t of c)o.next(t);o.complete()},void 0,()=>{c=null}))})}},8179:(b,m,l)=>{l.d(m,{EK:()=>e.EK});var e=l(2810)}}]);