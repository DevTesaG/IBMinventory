"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[179],{6217:(Bt,ze,k)=>{k.d(ze,{nm:()=>gi});var h=k(4976);k(4650),k(259);var he=k(5861),rt=k(6881),Xe=k(4859),Ne=k(2090),ot=k(1877);const ve=new Map,wt={activated:!1,tokenObservers:[]},jt={initialized:!1,enabled:!1};function yt(Te){return ve.get(Te)||Object.assign({},wt)}function Rt(){return jt}class at{constructor(Ie,ke,lt,At,Tn){if(this.operation=Ie,this.retryPolicy=ke,this.getWaitDuration=lt,this.lowerBound=At,this.upperBound=Tn,this.pending=null,this.nextErrorWaitInterval=At,At>Tn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var ke=this;return(0,he.Z)(function*(){ke.stop();try{ke.pending=new Ne.BH,yield function dt(Te){return new Promise(Ie=>{setTimeout(Ie,Te)})}(ke.getNextRun(Ie)),ke.pending.resolve(),yield ke.pending.promise,ke.pending=new Ne.BH,yield ke.operation(),ke.pending.resolve(),yield ke.pending.promise,ke.process(!0).catch(()=>{})}catch(lt){ke.retryPolicy(lt)?ke.process(!1).catch(()=>{}):ke.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ke=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ke}}}const Vt=new Ne.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Zt(Te){if(!yt(Te).activated)throw Vt.create("use-before-activation",{appName:Te.name})}function zn(Te,Ie){return tr.apply(this,arguments)}function tr(){return(tr=(0,he.Z)(function*({url:Te,body:Ie},ke){const lt={"Content-Type":"application/json"},At=ke.getImmediate({optional:!0});if(At){const kr=yield At.getHeartbeatsHeader();kr&&(lt["X-Firebase-Client"]=kr)}const Tn={method:"POST",body:JSON.stringify(Ie),headers:lt};let qn,Zn;try{qn=yield fetch(Te,Tn)}catch(kr){throw Vt.create("fetch-network-error",{originalErrorMessage:kr?.message})}if(200!==qn.status)throw Vt.create("fetch-status-error",{httpStatus:qn.status});try{Zn=yield qn.json()}catch(kr){throw Vt.create("fetch-parse-error",{originalErrorMessage:kr?.message})}const Nn=Zn.ttl.match(/^([\d.]+)(s)$/);if(!Nn||!Nn[2]||isNaN(Number(Nn[1])))throw Vt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Zn.ttl}`});const $i=1e3*Number(Nn[1]),Pi=Date.now();return{token:Zn.token,expireTimeMillis:Pi+$i,issuedAtTimeMillis:Pi}})).apply(this,arguments)}function Gt(Te,Ie){const{projectId:ke,appId:lt,apiKey:At}=Te.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ke}/apps/${lt}:exchangeDebugToken?key=${At}`,body:{debug_token:Ie}}}const cr="firebase-app-check-store";let An=null;function hn(){return An||(An=new Promise((Te,Ie)=>{try{const ke=indexedDB.open("firebase-app-check-database",1);ke.onsuccess=lt=>{Te(lt.target.result)},ke.onerror=lt=>{var At;Ie(Vt.create("storage-open",{originalErrorMessage:null===(At=lt.target.error)||void 0===At?void 0:At.message}))},ke.onupgradeneeded=lt=>{0===lt.oldVersion&&lt.target.result.createObjectStore(cr,{keyPath:"compositeKey"})}}catch(ke){Ie(Vt.create("storage-open",{originalErrorMessage:ke?.message}))}}),An)}function an(){return(an=(0,he.Z)(function*(Te,Ie){const lt=(yield hn()).transaction(cr,"readwrite"),Tn=lt.objectStore(cr).put({compositeKey:Te,value:Ie});return new Promise((qn,Zn)=>{Tn.onsuccess=Nn=>{qn()},lt.onerror=Nn=>{var $i;Zn(Vt.create("storage-set",{originalErrorMessage:null===($i=Nn.target.error)||void 0===$i?void 0:$i.message}))}})})).apply(this,arguments)}const hr=new ot.Yd("@firebase/app-check");function un(Te,Ie){return(0,Ne.hl)()?function jr(Te,Ie){return function _n(Te,Ie){return an.apply(this,arguments)}(function Rn(Te){return`${Te.options.appId}-${Te.name}`}(Te),Ie)}(Te,Ie).catch(ke=>{hr.warn(`Failed to write token to IndexedDB. Error: ${ke}`)}):Promise.resolve()}function zr(){return Rt().enabled}function Sn(){return bn.apply(this,arguments)}function bn(){return(bn=(0,he.Z)(function*(){const Te=Rt();if(Te.enabled&&Te.token)return Te.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const rr={error:"UNKNOWN_ERROR"};function sr(Te){return Ne.US.encodeString(JSON.stringify(Te),!1)}function tt(Te){return K.apply(this,arguments)}function K(){return(K=(0,he.Z)(function*(Te,Ie=!1){const ke=Te.app;Zt(ke);const lt=yt(ke);let Tn,At=lt.token;if(At&&!H(At)&&(lt.token=void 0,At=void 0),!At){const Nn=yield lt.cachedTokenPromise;Nn&&(H(Nn)?At=Nn:yield un(ke,void 0))}if(!Ie&&At&&H(At))return{token:At.token};let Zn,qn=!1;if(zr()){lt.exchangeTokenPromise||(lt.exchangeTokenPromise=zn(Gt(ke,yield Sn()),Te.heartbeatServiceProvider).finally(()=>{lt.exchangeTokenPromise=void 0}),qn=!0);const Nn=yield lt.exchangeTokenPromise;return yield un(ke,Nn),lt.token=Nn,{token:Nn.token}}try{lt.exchangeTokenPromise||(lt.exchangeTokenPromise=lt.provider.getToken().finally(()=>{lt.exchangeTokenPromise=void 0}),qn=!0),At=yield yt(ke).exchangeTokenPromise}catch(Nn){"appCheck/throttled"===Nn.code?hr.warn(Nn.message):hr.error(Nn),Tn=Nn}return At?Tn?Zn=H(At)?{token:At.token,internalError:Tn}:De(Tn):(Zn={token:At.token},lt.token=At,yield un(ke,At)):Zn=De(Tn),qn&&q(ke,Zn),Zn})).apply(this,arguments)}function Ve(){return(Ve=(0,he.Z)(function*(Te){const Ie=Te.app;Zt(Ie);const{provider:ke}=yt(Ie);if(zr()){const lt=yield Sn(),{token:At}=yield zn(Gt(Ie,lt),Te.heartbeatServiceProvider);return{token:At}}{const{token:lt}=yield ke.getToken();return{token:lt}}})).apply(this,arguments)}function oe(Te,Ie){const ke=yt(Te),lt=ke.tokenObservers.filter(At=>At.next!==Ie);0===lt.length&&ke.tokenRefresher&&ke.tokenRefresher.isRunning()&&ke.tokenRefresher.stop(),ke.tokenObservers=lt}function ue(Te){const{app:Ie}=Te,ke=yt(Ie);let lt=ke.tokenRefresher;lt||(lt=function Y(Te){const{app:Ie}=Te;return new at((0,he.Z)(function*(){let lt;if(lt=yt(Ie).token?yield tt(Te,!0):yield tt(Te),lt.error)throw lt.error;if(lt.internalError)throw lt.internalError}),()=>!0,()=>{const ke=yt(Ie);if(ke.token){let lt=ke.token.issuedAtTimeMillis+.5*(ke.token.expireTimeMillis-ke.token.issuedAtTimeMillis)+3e5;return lt=Math.min(lt,ke.token.expireTimeMillis-3e5),Math.max(0,lt-Date.now())}return 0},3e4,96e4)}(Te),ke.tokenRefresher=lt),!lt.isRunning()&&ke.isTokenAutoRefreshEnabled&&lt.start()}function q(Te,Ie){const ke=yt(Te).tokenObservers;for(const lt of ke)try{"EXTERNAL"===lt.type&&null!=Ie.error?lt.error(Ie.error):lt.next(Ie)}catch{}}function H(Te){return Te.expireTimeMillis-Date.now()>0}function De(Te){return{token:sr(rr),error:Te}}class st{constructor(Ie,ke){this.app=Ie,this.heartbeatServiceProvider=ke}_delete(){const{tokenObservers:Ie}=yt(this.app);for(const ke of Ie)oe(this.app,ke.next);return Promise.resolve()}}const Bi="app-check-internal";!function Di(){(0,rt._registerComponent)(new Xe.wA("app-check",Te=>function Mt(Te,Ie){return new st(Te,Ie)}(Te.getProvider("app").getImmediate(),Te.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Te,Ie,ke)=>{Te.getProvider(Bi).initialize()})),(0,rt._registerComponent)(new Xe.wA(Bi,Te=>function Yt(Te){return{getToken:Ie=>tt(Te,Ie),getLimitedUseToken:()=>function ce(Te){return Ve.apply(this,arguments)}(Te),addTokenListener:Ie=>function It(Te,Ie,ke,lt){const{app:At}=Te,Tn=yt(At);if(Tn.tokenObservers=[...Tn.tokenObservers,{next:ke,error:lt,type:Ie}],Tn.token&&H(Tn.token)){const Zn=Tn.token;Promise.resolve().then(()=>{ke({token:Zn.token}),ue(Te)}).catch(()=>{})}Tn.cachedTokenPromise.then(()=>ue(Te))}(Te,"INTERNAL",Ie),removeTokenListener:Ie=>oe(Te.app,Ie)}}(Te.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rt.registerVersion)("@firebase/app-check","0.8.0")}();class gi{constructor(){return(0,h.vb)("app-check")}}typeof window<"u"&&window},1205:(Bt,ze,k)=>{k.d(ze,{zQ:()=>Dr,rT:()=>jt,f7:()=>xt,L6:()=>ve,_Q:()=>wt,lh:()=>yt,Qv:()=>ot,nw:()=>Rt});var h=k(4650),L=k(7579),j=k(9646),ge=k(9751),de=k(8996),me=k(6451),we=k(5363),se=k(3900),xe=k(4004),ee=k(6063);class ne extends L.x{constructor(Fe=1/0,$e=1/0,Ke=ee.l){super(),this._bufferSize=Fe,this._windowTime=$e,this._timestampProvider=Ke,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=$e===1/0,this._bufferSize=Math.max(1,Fe),this._windowTime=Math.max(1,$e)}next(Fe){const{isStopped:$e,_buffer:Ke,_infiniteTimeWindow:at,_timestampProvider:dt,_windowTime:Et}=this;$e||(Ke.push(Fe),!at&&Ke.push(dt.now()+Et)),this._trimBuffer(),super.next(Fe)}_subscribe(Fe){this._throwIfClosed(),this._trimBuffer();const $e=this._innerSubscribe(Fe),{_infiniteTimeWindow:Ke,_buffer:at}=this,dt=at.slice();for(let Et=0;Et<dt.length&&!Fe.closed;Et+=Ke?1:2)Fe.next(dt[Et]);return this._checkFinalizedStatuses(Fe),$e}_trimBuffer(){const{_bufferSize:Fe,_timestampProvider:$e,_buffer:Ke,_infiniteTimeWindow:at}=this,dt=(at?1:2)*Fe;if(Fe<1/0&&dt<Ke.length&&Ke.splice(0,Ke.length-dt),!at){const Et=$e.now();let Vt=0;for(let St=1;St<Ke.length&&Ke[St]<=Et;St+=2)Vt=St;Vt&&Ke.splice(0,Vt+1)}}}var Ee=k(3099);function Ze(Pe,Fe,$e){let Ke,at=!1;return Pe&&"object"==typeof Pe?({bufferSize:Ke=1/0,windowTime:Fe=1/0,refCount:at=!1,scheduler:$e}=Pe):Ke=Pe??1/0,(0,Ee.B)({connector:()=>new ne(Ke,Fe,$e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:at})}var je=k(590),Le=k(576);function Dt(Pe,Fe){return(0,Le.m)(Fe)?(0,se.w)(()=>Pe,Fe):(0,se.w)(()=>Pe)}var We=k(9468),Oe=k(9300),Tt=k(4976),_t=k(2011),he=k(6895),rt=k(6217);k(9260);const ot=new h.OlP("angularfire2.auth.use-emulator"),ve=new h.OlP("angularfire2.auth.settings"),wt=new h.OlP("angularfire2.auth.tenant-id"),jt=new h.OlP("angularfire2.auth.langugage-code"),yt=new h.OlP("angularfire2.auth.use-device-language"),xt=new h.OlP("angularfire.auth.persistence"),Rt=(Pe,Fe,$e,Ke,at,dt,Et,Vt)=>(0,_t.cc)(`${Pe.name}.auth`,"AngularFireAuth",Pe.name,()=>{const St=Fe.runOutsideAngular(()=>Pe.auth());if($e&&St.useEmulator(...$e),Ke&&(St.tenantId=Ke),St.languageCode=at,dt&&St.useDeviceLanguage(),Et)for(const[Zt,ln]of Object.entries(Et))St.settings[Zt]=ln;return Vt&&St.setPersistence(Vt),St},[$e,Ke,at,dt,Et,Vt]);let Dr=(()=>{class Pe{constructor($e,Ke,at,dt,Et,Vt,St,Zt,ln,yn,zn,tr){const jn=new L.x,Bn=(0,j.of)(void 0).pipe((0,we.Q)(Et.outsideAngular),(0,se.w)(()=>dt.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9568)))),(0,xe.U)(()=>(0,_t.on)($e,dt,Ke)),(0,xe.U)(Gt=>Rt(Gt,dt,Vt,Zt,ln,yn,St,zn)),Ze({bufferSize:1,refCount:!1}));if((0,he.PM)(at))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,j.of)(null);else{Bn.pipe((0,je.P)()).subscribe();const Wn=Bn.pipe((0,se.w)(bt=>bt.getRedirectResult().then(An=>An,()=>null)),Tt.iC,Ze({bufferSize:1,refCount:!1})),Cr=Bn.pipe((0,se.w)(bt=>new ge.y(An=>({unsubscribe:dt.runOutsideAngular(()=>bt.onAuthStateChanged(hn=>An.next(hn),hn=>An.error(hn),()=>An.complete()))})))),cr=Bn.pipe((0,se.w)(bt=>new ge.y(An=>({unsubscribe:dt.runOutsideAngular(()=>bt.onIdTokenChanged(hn=>An.next(hn),hn=>An.error(hn),()=>An.complete()))}))));this.authState=Wn.pipe(Dt(Cr),(0,We.R)(Et.outsideAngular),(0,we.Q)(Et.insideAngular)),this.user=Wn.pipe(Dt(cr),(0,We.R)(Et.outsideAngular),(0,we.Q)(Et.insideAngular)),this.idToken=this.user.pipe((0,se.w)(bt=>bt?(0,de.D)(bt.getIdToken()):(0,j.of)(null))),this.idTokenResult=this.user.pipe((0,se.w)(bt=>bt?(0,de.D)(bt.getIdTokenResult()):(0,j.of)(null))),this.credential=(0,me.T)(Wn,jn,this.authState.pipe((0,Oe.h)(bt=>!bt))).pipe((0,xe.U)(bt=>bt?.user?bt:null),(0,We.R)(Et.outsideAngular),(0,we.Q)(Et.insideAngular))}return(0,_t.pX)(this,Bn,dt,{spy:{apply:(Gt,Wn,Cr)=>{(Gt.startsWith("signIn")||Gt.startsWith("createUser"))&&Cr.then(cr=>jn.next(cr))}}})}}return Pe.\u0275fac=function($e){return new($e||Pe)(h.LFG(_t.Dh),h.LFG(_t.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tt.HU),h.LFG(ot,8),h.LFG(ve,8),h.LFG(wt,8),h.LFG(jt,8),h.LFG(yt,8),h.LFG(xt,8),h.LFG(rt.nm,8))},Pe.\u0275prov=h.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"any"}),Pe})()},33:(Bt,ze,k)=>{k.d(ze,{ST:()=>rr,yb:()=>sr});var h=k(4650),L=k(4986),j=k(9751),ge=k(8996),de=k(9646),me=k(4976),we=k(8675),se=k(4482),xe=k(5403);function ee(){return(0,se.e)((tt,K)=>{let ce,Ve=!1;tt.subscribe((0,xe.x)(K,It=>{const oe=ce;ce=It,Ve&&K.next([oe,It]),Ve=!0}))})}var ne=k(4004),Ee=k(5026),Ze=k(4671);function Le(tt,K){return tt===K}var Dt=k(9300),We=k(2011),Oe=k(6895),_t=(k(9568),k(3942)),he=k(2810),rt=k(2090),Xe=k(4859);function ve(tt,K){if(void 0===K)return{merge:!1};if(void 0!==K.mergeFields&&void 0!==K.merge)throw new he.WA("invalid-argument",`Invalid options passed to function ${tt}(): You cannot specify both "merge" and "mergeFields".`);return K}function wt(){if(typeof Uint8Array>"u")throw new he.WA("unimplemented","Uint8Arrays are not available in this environment.")}function jt(){if(!(0,he.Me)())throw new he.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class yt{constructor(K){this._delegate=K}static fromBase64String(K){return jt(),new yt(he.Jj.fromBase64String(K))}static fromUint8Array(K){return wt(),new yt(he.Jj.fromUint8Array(K))}toBase64(){return jt(),this._delegate.toBase64()}toUint8Array(){return wt(),this._delegate.toUint8Array()}isEqual(K){return this._delegate.isEqual(K._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xt(tt){return function Rt(tt,K){if("object"!=typeof tt||null===tt)return!1;const ce=tt;for(const Ve of K)if(Ve in ce&&"function"==typeof ce[Ve])return!0;return!1}(tt,["next","error","complete"])}class Dr{enableIndexedDbPersistence(K,ce){return(0,he.ST)(K._delegate,{forceOwnership:ce})}enableMultiTabIndexedDbPersistence(K){return(0,he.fH)(K._delegate)}clearIndexedDbPersistence(K){return(0,he.Fc)(K._delegate)}}class Ye{constructor(K,ce,Ve){this._delegate=ce,this._persistenceProvider=Ve,this.INTERNAL={delete:()=>this.terminate()},K instanceof he.l7||(this._appCompat=K)}get _databaseId(){return this._delegate._databaseId}settings(K){const ce=this._delegate._getSettings();!K.merge&&ce.host!==K.host&&(0,he.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),K.merge&&delete(K=Object.assign(Object.assign({},ce),K)).merge,this._delegate._setSettings(K)}useEmulator(K,ce,Ve={}){(0,he.at)(this._delegate,K,ce,Ve)}enableNetwork(){return(0,he.Ix)(this._delegate)}disableNetwork(){return(0,he.TF)(this._delegate)}enablePersistence(K){let ce=!1,Ve=!1;return K&&(ce=!!K.synchronizeTabs,Ve=!!K.experimentalForceOwningTab,(0,he.Wi)("synchronizeTabs",ce,"experimentalForceOwningTab",Ve)),ce?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Ve)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,he.Mx)(this._delegate)}onSnapshotsInSync(K){return(0,he.sc)(this._delegate,K)}get app(){if(!this._appCompat)throw new he.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(K){try{return new jn(this,(0,he.hJ)(this._delegate,K))}catch(ce){throw Et(ce,"collection()","Firestore.collection()")}}doc(K){try{return new dt(this,(0,he.JU)(this._delegate,K))}catch(ce){throw Et(ce,"doc()","Firestore.doc()")}}collectionGroup(K){try{return new yn(this,(0,he.B$)(this._delegate,K))}catch(ce){throw Et(ce,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(K){return(0,he.i3)(this._delegate,ce=>K(new $e(this,ce)))}batch(){return(0,he.qY)(this._delegate),new Ke(new he.PU(this._delegate,K=>(0,he.GL)(this._delegate,K)))}loadBundle(K){return(0,he.Pb)(this._delegate,K)}namedQuery(K){return(0,he.L$)(this._delegate,K).then(ce=>ce?new yn(this,ce):null)}}class Pe extends he.u7{constructor(K){super(),this.firestore=K}convertBytes(K){return new yt(new he.Jj(K))}convertReference(K){const ce=this.convertDocumentKey(K,this.firestore._databaseId);return dt.forKey(ce,this.firestore,null)}}class $e{constructor(K,ce){this._firestore=K,this._delegate=ce,this._userDataWriter=new Pe(K)}get(K){const ce=Bn(K);return this._delegate.get(ce).then(Ve=>new Zt(this._firestore,new he.xU(this._firestore._delegate,this._userDataWriter,Ve._key,Ve._document,Ve.metadata,ce.converter)))}set(K,ce,Ve){const It=Bn(K);return Ve?(ve("Transaction.set",Ve),this._delegate.set(It,ce,Ve)):this._delegate.set(It,ce),this}update(K,ce,Ve,...It){const oe=Bn(K);return 2===arguments.length?this._delegate.update(oe,ce):this._delegate.update(oe,ce,Ve,...It),this}delete(K){const ce=Bn(K);return this._delegate.delete(ce),this}}class Ke{constructor(K){this._delegate=K}set(K,ce,Ve){const It=Bn(K);return Ve?(ve("WriteBatch.set",Ve),this._delegate.set(It,ce,Ve)):this._delegate.set(It,ce),this}update(K,ce,Ve,...It){const oe=Bn(K);return 2===arguments.length?this._delegate.update(oe,ce):this._delegate.update(oe,ce,Ve,...It),this}delete(K){const ce=Bn(K);return this._delegate.delete(ce),this}commit(){return this._delegate.commit()}}class at{constructor(K,ce,Ve){this._firestore=K,this._userDataWriter=ce,this._delegate=Ve}fromFirestore(K,ce){const Ve=new he.$q(this._firestore._delegate,this._userDataWriter,K._key,K._document,K.metadata,null);return this._delegate.fromFirestore(new ln(this._firestore,Ve),ce??{})}toFirestore(K,ce){return ce?this._delegate.toFirestore(K,ce):this._delegate.toFirestore(K)}static getInstance(K,ce){const Ve=at.INSTANCES;let It=Ve.get(K);It||(It=new WeakMap,Ve.set(K,It));let oe=It.get(ce);return oe||(oe=new at(K,new Pe(K),ce),It.set(ce,oe)),oe}}at.INSTANCES=new WeakMap;class dt{constructor(K,ce){this.firestore=K,this._delegate=ce,this._userDataWriter=new Pe(K)}static forPath(K,ce,Ve){if(K.length%2!=0)throw new he.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${K.canonicalString()} has ${K.length}`);return new dt(ce,new he.my(ce._delegate,Ve,new he.Ky(K)))}static forKey(K,ce,Ve){return new dt(ce,new he.my(ce._delegate,Ve,K))}get id(){return this._delegate.id}get parent(){return new jn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(K){try{return new jn(this.firestore,(0,he.hJ)(this._delegate,K))}catch(ce){throw Et(ce,"collection()","DocumentReference.collection()")}}isEqual(K){return(K=(0,rt.m9)(K))instanceof he.my&&(0,he.Eo)(this._delegate,K)}set(K,ce){ce=ve("DocumentReference.set",ce);try{return ce?(0,he.pl)(this._delegate,K,ce):(0,he.pl)(this._delegate,K)}catch(Ve){throw Et(Ve,"setDoc()","DocumentReference.set()")}}update(K,ce,...Ve){try{return 1===arguments.length?(0,he.r7)(this._delegate,K):(0,he.r7)(this._delegate,K,ce,...Ve)}catch(It){throw Et(It,"updateDoc()","DocumentReference.update()")}}delete(){return(0,he.oe)(this._delegate)}onSnapshot(...K){const ce=Vt(K),Ve=St(K,It=>new Zt(this.firestore,new he.xU(this.firestore._delegate,this._userDataWriter,It._key,It._document,It.metadata,this._delegate.converter)));return(0,he.cf)(this._delegate,ce,Ve)}get(K){let ce;return ce="cache"===K?.source?(0,he.kl)(this._delegate):"server"===K?.source?(0,he.Xk)(this._delegate):(0,he.QT)(this._delegate),ce.then(Ve=>new Zt(this.firestore,new he.xU(this.firestore._delegate,this._userDataWriter,Ve._key,Ve._document,Ve.metadata,this._delegate.converter)))}withConverter(K){return new dt(this.firestore,this._delegate.withConverter(K?at.getInstance(this.firestore,K):null))}}function Et(tt,K,ce){return tt.message=tt.message.replace(K,ce),tt}function Vt(tt){for(const K of tt)if("object"==typeof K&&!xt(K))return K;return{}}function St(tt,K){var ce,Ve;let It;return It=xt(tt[0])?tt[0]:xt(tt[1])?tt[1]:"function"==typeof tt[0]?{next:tt[0],error:tt[1],complete:tt[2]}:{next:tt[1],error:tt[2],complete:tt[3]},{next:oe=>{It.next&&It.next(K(oe))},error:null===(ce=It.error)||void 0===ce?void 0:ce.bind(It),complete:null===(Ve=It.complete)||void 0===Ve?void 0:Ve.bind(It)}}class Zt{constructor(K,ce){this._firestore=K,this._delegate=ce}get ref(){return new dt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(K){return this._delegate.data(K)}get(K,ce){return this._delegate.get(K,ce)}isEqual(K){return(0,he.qK)(this._delegate,K._delegate)}}class ln extends Zt{data(K){const ce=this._delegate.data(K);return(0,he.K9)(void 0!==ce,"Document in a QueryDocumentSnapshot should exist"),ce}}class yn{constructor(K,ce){this.firestore=K,this._delegate=ce,this._userDataWriter=new Pe(K)}where(K,ce,Ve){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.ar)(K,ce,Ve)))}catch(It){throw Et(It,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(K,ce){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.Xo)(K,ce)))}catch(Ve){throw Et(Ve,/(orderBy|where)\(\)/,"Query.$1()")}}limit(K){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.b9)(K)))}catch(ce){throw Et(ce,"limit()","Query.limit()")}}limitToLast(K){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.vh)(K)))}catch(ce){throw Et(ce,"limitToLast()","Query.limitToLast()")}}startAt(...K){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.e0)(...K)))}catch(ce){throw Et(ce,"startAt()","Query.startAt()")}}startAfter(...K){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.TQ)(...K)))}catch(ce){throw Et(ce,"startAfter()","Query.startAfter()")}}endBefore(...K){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.Lx)(...K)))}catch(ce){throw Et(ce,"endBefore()","Query.endBefore()")}}endAt(...K){try{return new yn(this.firestore,(0,he.IO)(this._delegate,(0,he.Wu)(...K)))}catch(ce){throw Et(ce,"endAt()","Query.endAt()")}}isEqual(K){return(0,he.iE)(this._delegate,K._delegate)}get(K){let ce;return ce="cache"===K?.source?(0,he.UQ)(this._delegate):"server"===K?.source?(0,he.zN)(this._delegate):(0,he.PL)(this._delegate),ce.then(Ve=>new tr(this.firestore,new he.W(this.firestore._delegate,this._userDataWriter,this._delegate,Ve._snapshot)))}onSnapshot(...K){const ce=Vt(K),Ve=St(K,It=>new tr(this.firestore,new he.W(this.firestore._delegate,this._userDataWriter,this._delegate,It._snapshot)));return(0,he.cf)(this._delegate,ce,Ve)}withConverter(K){return new yn(this.firestore,this._delegate.withConverter(K?at.getInstance(this.firestore,K):null))}}class zn{constructor(K,ce){this._firestore=K,this._delegate=ce}get type(){return this._delegate.type}get doc(){return new ln(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tr{constructor(K,ce){this._firestore=K,this._delegate=ce}get query(){return new yn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(K=>new ln(this._firestore,K))}docChanges(K){return this._delegate.docChanges(K).map(ce=>new zn(this._firestore,ce))}forEach(K,ce){this._delegate.forEach(Ve=>{K.call(ce,new ln(this._firestore,Ve))})}isEqual(K){return(0,he.qK)(this._delegate,K._delegate)}}class jn extends yn{constructor(K,ce){super(K,ce),this.firestore=K,this._delegate=ce}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const K=this._delegate.parent;return K?new dt(this.firestore,K):null}doc(K){try{return new dt(this.firestore,void 0===K?(0,he.JU)(this._delegate):(0,he.JU)(this._delegate,K))}catch(ce){throw Et(ce,"doc()","CollectionReference.doc()")}}add(K){return(0,he.ET)(this._delegate,K).then(ce=>new dt(this.firestore,ce))}isEqual(K){return(0,he.Eo)(this._delegate,K._delegate)}withConverter(K){return new jn(this.firestore,this._delegate.withConverter(K?at.getInstance(this.firestore,K):null))}}function Bn(tt){return(0,he.Cf)(tt,he.my)}class Gt{constructor(...K){this._delegate=new he.Lz(...K)}static documentId(){return new Gt(he.Xb.keyField().canonicalString())}isEqual(K){return(K=(0,rt.m9)(K))instanceof he.Lz&&this._delegate._internalPath.isEqual(K._internalPath)}}class Wn{constructor(K){this._delegate=K}static serverTimestamp(){const K=(0,he.Bt)();return K._methodName="FieldValue.serverTimestamp",new Wn(K)}static delete(){const K=(0,he.AK)();return K._methodName="FieldValue.delete",new Wn(K)}static arrayUnion(...K){const ce=(0,he.vr)(...K);return ce._methodName="FieldValue.arrayUnion",new Wn(ce)}static arrayRemove(...K){const ce=(0,he.Ab)(...K);return ce._methodName="FieldValue.arrayRemove",new Wn(ce)}static increment(K){const ce=(0,he.nP)(K);return ce._methodName="FieldValue.increment",new Wn(ce)}isEqual(K){return this._delegate.isEqual(K._delegate)}}const Cr={Firestore:Ye,GeoPoint:he.F8,Timestamp:he.EK,Blob:yt,Transaction:$e,WriteBatch:Ke,DocumentReference:dt,DocumentSnapshot:Zt,Query:yn,QueryDocumentSnapshot:ln,QuerySnapshot:tr,CollectionReference:jn,FieldPath:Gt,FieldValue:Wn,setLogLevel:function Fe(tt){(0,he.Ub)(tt)},CACHE_SIZE_UNLIMITED:he.IX};!function bt(tt){(function cr(tt,K){tt.INTERNAL.registerComponent(new Xe.wA("firestore-compat",ce=>{const Ve=ce.getProvider("app-compat").getImmediate(),It=ce.getProvider("firestore").getImmediate();return K(Ve,It)},"PUBLIC").setServiceProps(Object.assign({},Cr)))})(tt,(K,ce)=>new Ye(K,ce,new Dr)),tt.registerVersion("@firebase/firestore-compat","0.3.12")}(_t.Z);var An=k(1205),hn=k(6217),Jn=k(9260);function $r(tt,K){return function jr(tt,K=L.z){return new j.y(ce=>{let Ve;return null!=K?K.schedule(()=>{Ve=tt.onSnapshot({includeMetadataChanges:!0},ce)}):Ve=tt.onSnapshot({includeMetadataChanges:!0},ce),()=>{Ve?.()}})}(tt,K)}function _n(tt,K){return $r(tt,K).pipe((0,ne.U)(ce=>({payload:ce,type:"query"})))}function an(tt,K){return _n(tt,K).pipe((0,we.O)(void 0),ee(),(0,ne.U)(([ce,Ve])=>{const It=Ve.payload.docChanges(),oe=It.map(ue=>({type:ue.type,payload:ue}));return ce&&JSON.stringify(ce.payload.metadata)!==JSON.stringify(Ve.payload.metadata)&&Ve.payload.docs.forEach((ue,Y)=>{const q=It.find(De=>De.doc.ref.isEqual(ue.ref)),H=ce?.payload.docs.find(De=>De.ref.isEqual(ue.ref));q&&JSON.stringify(q.doc.metadata)===JSON.stringify(ue.metadata)||!q&&H&&JSON.stringify(H.metadata)===JSON.stringify(ue.metadata)||oe.push({type:"modified",payload:{oldIndex:Y,newIndex:Y,type:"modified",doc:ue}})}),oe}))}function zt(tt,K,ce){return an(tt,ce).pipe((0,Ee.R)((Ve,It)=>function Jt(tt,K,ce){return K.forEach(Ve=>{ce.indexOf(Ve.type)>-1&&(tt=function hr(tt,K){switch(K.type){case"added":if(!tt[K.newIndex]||!tt[K.newIndex].doc.ref.isEqual(K.doc.ref))return Rn(tt,K.newIndex,0,K);break;case"modified":if(null==tt[K.oldIndex]||tt[K.oldIndex].doc.ref.isEqual(K.doc.ref)){if(K.oldIndex!==K.newIndex){const ce=tt.slice();return ce.splice(K.oldIndex,1),ce.splice(K.newIndex,0,K),ce}return Rn(tt,K.newIndex,1,K)}break;case"removed":if(tt[K.oldIndex]&&tt[K.oldIndex].doc.ref.isEqual(K.doc.ref))return Rn(tt,K.oldIndex,1)}return tt}(tt,Ve))}),tt}(Ve,It.map(oe=>oe.payload),K),[]),function je(tt,K=Ze.y){return tt=tt??Le,(0,se.e)((ce,Ve)=>{let It,oe=!0;ce.subscribe((0,xe.x)(Ve,ue=>{const Y=K(ue);(oe||!tt(It,Y))&&(oe=!1,It=Y,Ve.next(ue))}))})}(),(0,ne.U)(Ve=>Ve.map(It=>({type:It.type,payload:It}))))}function Rn(tt,K,ce,...Ve){const It=tt.slice();return It.splice(K,ce,...Ve),It}function nr(tt){return(!tt||0===tt.length)&&(tt=["added","removed","modified"]),tt}class fr{constructor(K,ce,Ve){this.ref=K,this.query=ce,this.afs=Ve}stateChanges(K){let ce=an(this.query,this.afs.schedulers.outsideAngular);return K&&K.length>0&&(ce=ce.pipe((0,ne.U)(Ve=>Ve.filter(It=>K.indexOf(It.type)>-1)))),ce.pipe((0,we.O)(void 0),ee(),(0,Dt.h)(([Ve,It])=>It.length>0||!Ve),(0,ne.U)(([Ve,It])=>It),me.iC)}auditTrail(K){return this.stateChanges(K).pipe((0,Ee.R)((ce,Ve)=>[...ce,...Ve],[]))}snapshotChanges(K){const ce=nr(K);return zt(this.query,ce,this.afs.schedulers.outsideAngular).pipe(me.iC)}valueChanges(K={}){return _n(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(ce=>ce.payload.docs.map(Ve=>K.idField?Object.assign(Object.assign({},Ve.data()),{[K.idField]:Ve.id}):Ve.data())),me.iC)}get(K){return(0,ge.D)(this.query.get(K)).pipe(me.iC)}add(K){return this.ref.add(K)}doc(K){return new un(this.ref.doc(K),this.afs)}}class un{constructor(K,ce){this.ref=K,this.afs=ce}set(K,ce){return this.ref.set(K,ce)}update(K){return this.ref.update(K)}delete(){return this.ref.delete()}collection(K,ce){const Ve=this.ref.collection(K),{ref:It,query:oe}=Nt(Ve,ce);return new fr(It,oe,this.afs)}snapshotChanges(){return function dr(tt,K){return $r(tt,K).pipe((0,we.O)(void 0),ee(),(0,ne.U)(([ce,Ve])=>Ve.exists?ce?.exists?{payload:Ve,type:"modified"}:{payload:Ve,type:"added"}:{payload:Ve,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(me.iC)}valueChanges(K={}){return this.snapshotChanges().pipe((0,ne.U)(({payload:ce})=>K.idField?Object.assign(Object.assign({},ce.data()),{[K.idField]:ce.id}):ce.data()))}get(K){return(0,ge.D)(this.ref.get(K)).pipe(me.iC)}}class gr{constructor(K,ce){this.query=K,this.afs=ce}stateChanges(K){return K&&0!==K.length?an(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(ce=>ce.filter(Ve=>K.indexOf(Ve.type)>-1)),(0,Dt.h)(ce=>ce.length>0),me.iC):an(this.query,this.afs.schedulers.outsideAngular).pipe(me.iC)}auditTrail(K){return this.stateChanges(K).pipe((0,Ee.R)((ce,Ve)=>[...ce,...Ve],[]))}snapshotChanges(K){const ce=nr(K);return zt(this.query,ce,this.afs.schedulers.outsideAngular).pipe(me.iC)}valueChanges(K={}){return _n(this.query,this.afs.schedulers.outsideAngular).pipe((0,ne.U)(Ve=>Ve.payload.docs.map(It=>K.idField?Object.assign({[K.idField]:It.id},It.data()):It.data())),me.iC)}get(K){return(0,ge.D)(this.query.get(K)).pipe(me.iC)}}const wn=new h.OlP("angularfire2.enableFirestorePersistence"),zr=new h.OlP("angularfire2.firestore.persistenceSettings"),Sn=new h.OlP("angularfire2.firestore.settings"),bn=new h.OlP("angularfire2.firestore.use-emulator");function Nt(tt,K=(ce=>ce)){return{query:K(tt),ref:tt}}let rr=(()=>{class tt{constructor(ce,Ve,It,oe,ue,Y,q,H,De,st,Mt,Yt,re,ae,X,Ae,He){this.schedulers=q;const Pt=(0,We.on)(ce,Y,Ve),tn=De;st&&(0,An.nw)(Pt,Y,Mt,re,ae,X,Yt,Ae),[this.firestore,this.persistenceEnabled$]=(0,We.cc)(`${Pt.name}.firestore`,"AngularFirestore",Pt.name,()=>{const Me=Y.runOutsideAngular(()=>Pt.firestore());if(oe&&Me.settings(oe),tn&&Me.useEmulator(...tn),It&&!(0,Oe.PM)(ue)){const Re=()=>{try{return(0,ge.D)(Me.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(ht){return typeof console<"u"&&console.warn(ht),(0,de.of)(!1)}};return[Me,Y.runOutsideAngular(Re)]}return[Me,(0,de.of)(!1)]},[oe,tn,It])}collection(ce,Ve){let It;It="string"==typeof ce?this.firestore.collection(ce):ce;const{ref:oe,query:ue}=Nt(It,Ve),Y=this.schedulers.ngZone.run(()=>oe);return new fr(Y,ue,this)}collectionGroup(ce,Ve){const It=Ve||(ue=>ue),oe=this.firestore.collectionGroup(ce);return new gr(It(oe),this)}doc(ce){let Ve;Ve="string"==typeof ce?this.firestore.doc(ce):ce;const It=this.schedulers.ngZone.run(()=>Ve);return new un(It,this)}createId(){return this.firestore.collection("_").doc().id}}return tt.\u0275fac=function(ce){return new(ce||tt)(h.LFG(We.Dh),h.LFG(We.xv,8),h.LFG(wn,8),h.LFG(Sn,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(me.HU),h.LFG(zr,8),h.LFG(bn,8),h.LFG(An.zQ,8),h.LFG(An.Qv,8),h.LFG(An.L6,8),h.LFG(An._Q,8),h.LFG(An.rT,8),h.LFG(An.lh,8),h.LFG(An.f7,8),h.LFG(hn.nm,8))},tt.\u0275prov=h.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"any"}),tt})(),sr=(()=>{class tt{constructor(){Jn.Z.registerVersion("angularfire",me.q4.full,"fst-compat")}static enablePersistence(ce){return{ngModule:tt,providers:[{provide:wn,useValue:!0},{provide:zr,useValue:ce}]}}}return tt.\u0275fac=function(ce){return new(ce||tt)},tt.\u0275mod=h.oAB({type:tt}),tt.\u0275inj=h.cJS({providers:[rr]}),tt})()},2011:(Bt,ze,k)=>{k.d(ze,{Dh:()=>se,GT:()=>me,cc:()=>je,hO:()=>Ze,on:()=>ee,pX:()=>de,xv:()=>xe});var h=k(4650),L=k(9260),j=k(4976);Bt=k.hmd(Bt);const ge=["ngOnDestroy"],de=(Oe,Tt,_t,he={})=>new Proxy(Oe,{get:(rt,Xe)=>_t.runOutsideAngular(()=>{var Ne;if(Oe[Xe])return!(null===(Ne=he?.spy)||void 0===Ne)&&Ne.get&&he.spy.get(Xe,Oe[Xe]),Oe[Xe];if(ge.indexOf(Xe)>-1)return()=>{};const ot=Tt.toPromise().then(ve=>{const wt=ve&&ve[Xe];return"function"==typeof wt?wt.bind(ve):wt&&wt.then?wt.then(jt=>_t.run(()=>jt)):_t.run(()=>wt)});return new Proxy(()=>{},{get:(ve,wt)=>ot[wt],apply:(ve,wt,jt)=>ot.then(yt=>{var xt;const Rt=yt&&yt(...jt);return!(null===(xt=he?.spy)||void 0===xt)&&xt.apply&&he.spy.apply(Xe,jt,Rt),Rt})})})}),me=(Oe,Tt)=>{Tt.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(he=>{Object.defineProperty(Oe.prototype,he,Object.getOwnPropertyDescriptor(_t.prototype||_t,he))})})};class we{constructor(Tt){return Tt}}const se=new h.OlP("angularfire2.app.options"),xe=new h.OlP("angularfire2.app.name");function ee(Oe,Tt,_t){const rt="object"==typeof _t&&_t||{};rt.name=rt.name||"string"==typeof _t&&_t||"[DEFAULT]";const Ne=L.Z.apps.filter(ot=>ot&&ot.name===rt.name)[0]||Tt.runOutsideAngular(()=>L.Z.initializeApp(Oe,rt));try{JSON.stringify(Oe)!==JSON.stringify(Ne.options)&&ne("error",`${Ne.name} Firebase App already initialized with different options${Bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(Ne)}const ne=(Oe,...Tt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Oe](...Tt)},Ee={provide:we,useFactory:ee,deps:[se,h.R0b,[new h.FiY,xe]]};let Ze=(()=>{class Oe{constructor(_t){L.Z.registerVersion("angularfire",j.q4.full,"core"),L.Z.registerVersion("angularfire",j.q4.full,"app-compat"),L.Z.registerVersion("angular",h.q4F.full,_t.toString())}static initializeApp(_t,he){return{ngModule:Oe,providers:[{provide:se,useValue:_t},{provide:xe,useValue:he}]}}}return Oe.\u0275fac=function(_t){return new(_t||Oe)(h.LFG(h.Lbi))},Oe.\u0275mod=h.oAB({type:Oe}),Oe.\u0275inj=h.cJS({providers:[Ee]}),Oe})();function je(Oe,Tt,_t,he,rt){const[,Xe,Ne]=globalThis.\u0275AngularfireInstanceCache.find(ot=>ot[0]===Oe)||[];if(Xe)return function Le(Oe,Tt){try{return Oe.toString()===Tt.toString()}catch{return Oe===Tt}}(rt,Ne)||(We("error",`${Tt} was already initialized on the ${_t} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:rt,was:Ne})),Xe;{const ot=he();return globalThis.\u0275AngularfireInstanceCache.push([Oe,ot,rt]),ot}}const Dt=!!Bt.hot,We=(Oe,...Tt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Oe](...Tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Bt,ze,k)=>{k.d(ze,{q4:()=>ka,iC:()=>ll,HU:()=>td,vb:()=>pu,JM:()=>al});var h=k(4650),L=k(259),j=k(5861),ge=k(6881),de=k(2090),me=k(4859),we=k(1877);let xe,ee;const Ze=new WeakMap,je=new WeakMap,Le=new WeakMap,Dt=new WeakMap,We=new WeakMap;let _t={get(w,A,B){if(w instanceof IDBTransaction){if("done"===A)return je.get(w);if("objectStoreNames"===A)return w.objectStoreNames||Le.get(w);if("store"===A)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Ne(w[A])},set:(w,A,B)=>(w[A]=B,!0),has:(w,A)=>w instanceof IDBTransaction&&("done"===A||"store"===A)||A in w};function Xe(w){return"function"==typeof w?function rt(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...A){return w.apply(ot(this),A),Ne(Ze.get(this))}:function(...A){return Ne(w.apply(ot(this),A))}:function(A,...B){const te=w.call(ot(this),A,...B);return Le.set(te,A.sort?A.sort():[A]),Ne(te)}}(w):(w instanceof IDBTransaction&&function Tt(w){if(je.has(w))return;const A=new Promise((B,te)=>{const pe=()=>{w.removeEventListener("complete",be),w.removeEventListener("error",it),w.removeEventListener("abort",it)},be=()=>{B(),pe()},it=()=>{te(w.error||new DOMException("AbortError","AbortError")),pe()};w.addEventListener("complete",be),w.addEventListener("error",it),w.addEventListener("abort",it)});je.set(w,A)}(w),((w,A)=>A.some(B=>w instanceof B))(w,function ne(){return xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,_t):w)}function Ne(w){if(w instanceof IDBRequest)return function Oe(w){const A=new Promise((B,te)=>{const pe=()=>{w.removeEventListener("success",be),w.removeEventListener("error",it)},be=()=>{B(Ne(w.result)),pe()},it=()=>{te(w.error),pe()};w.addEventListener("success",be),w.addEventListener("error",it)});return A.then(B=>{B instanceof IDBCursor&&Ze.set(B,w)}).catch(()=>{}),We.set(A,w),A}(w);if(Dt.has(w))return Dt.get(w);const A=Xe(w);return A!==w&&(Dt.set(w,A),We.set(A,w)),A}const ot=w=>We.get(w),jt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],xt=new Map;function Rt(w,A){if(!(w instanceof IDBDatabase)||A in w||"string"!=typeof A)return;if(xt.get(A))return xt.get(A);const B=A.replace(/FromIndex$/,""),te=A!==B,pe=yt.includes(B);if(!(B in(te?IDBIndex:IDBObjectStore).prototype)||!pe&&!jt.includes(B))return;const be=function(){var it=(0,j.Z)(function*(Wt,...Ut){const fn=this.transaction(Wt,pe?"readwrite":"readonly");let mn=fn.store;return te&&(mn=mn.index(Ut.shift())),(yield Promise.all([mn[B](...Ut),pe&&fn.done]))[0]});return function(Ut){return it.apply(this,arguments)}}();return xt.set(A,be),be}!function he(w){_t=w(_t)}(w=>({...w,get:(A,B,te)=>Rt(A,B)||w.get(A,B,te),has:(A,B)=>!!Rt(A,B)||w.has(A,B)}));const Dr="@firebase/installations",Fe="w:0.6.4",$e="FIS_v2",St=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Zt(w){return w instanceof de.ZR&&w.code.includes("request-failed")}function ln({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function yn(w){return{token:w.token,requestStatus:2,expiresIn:Cr(w.expiresIn),creationTime:Date.now()}}function zn(w,A){return tr.apply(this,arguments)}function tr(){return(tr=(0,j.Z)(function*(w,A){const te=(yield A.json()).error;return St.create("request-failed",{requestName:w,serverCode:te.code,serverMessage:te.message,serverStatus:te.status})})).apply(this,arguments)}function jn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Bn(w,{refreshToken:A}){const B=jn(w);return B.append("Authorization",function cr(w){return`${$e} ${w}`}(A)),B}function Gt(w){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,j.Z)(function*(w){const A=yield w();return A.status>=500&&A.status<600?w():A})).apply(this,arguments)}function Cr(w){return Number(w.replace("s","000"))}function bt(w,A){return An.apply(this,arguments)}function An(){return(An=(0,j.Z)(function*({appConfig:w,heartbeatServiceProvider:A},{fid:B}){const te=ln(w),pe=jn(w),be=A.getImmediate({optional:!0});if(be){const fn=yield be.getHeartbeatsHeader();fn&&pe.append("x-firebase-client",fn)}const Wt={method:"POST",headers:pe,body:JSON.stringify({fid:B,authVersion:$e,appId:w.appId,sdkVersion:Fe})},Ut=yield Gt(()=>fetch(te,Wt));if(Ut.ok){const fn=yield Ut.json();return{fid:fn.fid||B,registrationStatus:2,refreshToken:fn.refreshToken,authToken:yn(fn.authToken)}}throw yield zn("Create Installation",Ut)})).apply(this,arguments)}function hn(w){return new Promise(A=>{setTimeout(A,w)})}const jr=/^[cdef][\w-]{21}$/;function dr(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const B=function _n(w){return function Jn(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return jr.test(B)?B:""}catch{return""}}function an(w){return`${w.appName}!${w.appId}`}const zt=new Map;function Jt(w,A){const B=an(w);nr(B,A),function fr(w,A){const B=function gr(){return!un&&"BroadcastChannel"in self&&(un=new BroadcastChannel("[Firebase] FID Change"),un.onmessage=w=>{nr(w.data.key,w.data.fid)}),un}();B&&B.postMessage({key:w,fid:A}),function wn(){0===zt.size&&un&&(un.close(),un=null)}()}(B,A)}function nr(w,A){const B=zt.get(w);if(B)for(const te of B)te(A)}let un=null;const bn="firebase-installations-store";let Nt=null;function rr(){return Nt||(Nt=function ve(w,A,{blocked:B,upgrade:te,blocking:pe,terminated:be}={}){const it=indexedDB.open(w,A),Wt=Ne(it);return te&&it.addEventListener("upgradeneeded",Ut=>{te(Ne(it.result),Ut.oldVersion,Ut.newVersion,Ne(it.transaction))}),B&&it.addEventListener("blocked",()=>B()),Wt.then(Ut=>{be&&Ut.addEventListener("close",()=>be()),pe&&Ut.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Wt}("firebase-installations-database",1,{upgrade:(w,A)=>{0===A&&w.createObjectStore(bn)}})),Nt}function sr(w,A){return tt.apply(this,arguments)}function tt(){return(tt=(0,j.Z)(function*(w,A){const B=an(w),pe=(yield rr()).transaction(bn,"readwrite"),be=pe.objectStore(bn),it=yield be.get(B);return yield be.put(A,B),yield pe.done,(!it||it.fid!==A.fid)&&Jt(w,A.fid),A})).apply(this,arguments)}function K(w){return ce.apply(this,arguments)}function ce(){return(ce=(0,j.Z)(function*(w){const A=an(w),te=(yield rr()).transaction(bn,"readwrite");yield te.objectStore(bn).delete(A),yield te.done})).apply(this,arguments)}function Ve(w,A){return It.apply(this,arguments)}function It(){return(It=(0,j.Z)(function*(w,A){const B=an(w),pe=(yield rr()).transaction(bn,"readwrite"),be=pe.objectStore(bn),it=yield be.get(B),Wt=A(it);return void 0===Wt?yield be.delete(B):yield be.put(Wt,B),yield pe.done,Wt&&(!it||it.fid!==Wt.fid)&&Jt(w,Wt.fid),Wt})).apply(this,arguments)}function oe(w){return ue.apply(this,arguments)}function ue(){return(ue=(0,j.Z)(function*(w){let A;const B=yield Ve(w.appConfig,te=>{const pe=Y(te),be=q(w,pe);return A=be.registrationPromise,be.installationEntry});return""===B.fid?{installationEntry:yield A}:{installationEntry:B,registrationPromise:A}})).apply(this,arguments)}function Y(w){return re(w||{fid:dr(),registrationStatus:0})}function q(w,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(St.create("app-offline"))};const B={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},te=function H(w,A){return De.apply(this,arguments)}(w,B);return{installationEntry:B,registrationPromise:te}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:st(w)}:{installationEntry:A}}function De(){return(De=(0,j.Z)(function*(w,A){try{const B=yield bt(w,A);return sr(w.appConfig,B)}catch(B){throw Zt(B)&&409===B.customData.serverCode?yield K(w.appConfig):yield sr(w.appConfig,{fid:A.fid,registrationStatus:0}),B}})).apply(this,arguments)}function st(w){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,j.Z)(function*(w){let A=yield Yt(w.appConfig);for(;1===A.registrationStatus;)yield hn(100),A=yield Yt(w.appConfig);if(0===A.registrationStatus){const{installationEntry:B,registrationPromise:te}=yield oe(w);return te||B}return A})).apply(this,arguments)}function Yt(w){return Ve(w,A=>{if(!A)throw St.create("installation-not-found");return re(A)})}function re(w){return function ae(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function X(w,A){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,j.Z)(function*({appConfig:w,heartbeatServiceProvider:A},B){const te=He(w,B),pe=Bn(w,B),be=A.getImmediate({optional:!0});if(be){const fn=yield be.getHeartbeatsHeader();fn&&pe.append("x-firebase-client",fn)}const Wt={method:"POST",headers:pe,body:JSON.stringify({installation:{sdkVersion:Fe,appId:w.appId}})},Ut=yield Gt(()=>fetch(te,Wt));if(Ut.ok)return yn(yield Ut.json());throw yield zn("Generate Auth Token",Ut)})).apply(this,arguments)}function He(w,{fid:A}){return`${ln(w)}/${A}/authTokens:generate`}function Pt(w){return tn.apply(this,arguments)}function tn(){return(tn=(0,j.Z)(function*(w,A=!1){let B;const te=yield Ve(w.appConfig,be=>{if(!vn(be))throw St.create("not-registered");const it=be.authToken;if(!A&&Pn(it))return be;if(1===it.requestStatus)return B=Me(w,A),be;{if(!navigator.onLine)throw St.create("app-offline");const Wt=xn(be);return B=ft(w,Wt),Wt}});return B?yield B:te.authToken})).apply(this,arguments)}function Me(w,A){return Re.apply(this,arguments)}function Re(){return(Re=(0,j.Z)(function*(w,A){let B=yield ht(w.appConfig);for(;1===B.authToken.requestStatus;)yield hn(100),B=yield ht(w.appConfig);const te=B.authToken;return 0===te.requestStatus?Pt(w,A):te})).apply(this,arguments)}function ht(w){return Ve(w,A=>{if(!vn(A))throw St.create("not-registered");return function Zr(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function ft(w,A){return pn.apply(this,arguments)}function pn(){return(pn=(0,j.Z)(function*(w,A){try{const B=yield X(w,A),te=Object.assign(Object.assign({},A),{authToken:B});return yield sr(w.appConfig,te),B}catch(B){if(!Zt(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const te=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield sr(w.appConfig,te)}else yield K(w.appConfig);throw B}})).apply(this,arguments)}function vn(w){return void 0!==w&&2===w.registrationStatus}function Pn(w){return 2===w.requestStatus&&!function Pr(w){const A=Date.now();return A<w.creationTime||w.creationTime+w.expiresIn<A+36e5}(w)}function xn(w){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:A})}function Qr(){return(Qr=(0,j.Z)(function*(w){const A=w,{installationEntry:B,registrationPromise:te}=yield oe(A);return te?te.catch(console.error):Pt(A).catch(console.error),B.fid})).apply(this,arguments)}function Vi(){return(Vi=(0,j.Z)(function*(w,A=!1){const B=w;return yield Vn(B),(yield Pt(B,A)).token})).apply(this,arguments)}function Vn(w){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,j.Z)(function*(w){const{registrationPromise:A}=yield oe(w);A&&(yield A)})).apply(this,arguments)}function Lr(w){return St.create("missing-app-config-values",{valueName:w})}const Tr="installations",Ri=w=>{const A=w.getProvider("app").getImmediate(),B=function gi(w){if(!w||!w.options)throw Lr("App Configuration");if(!w.name)throw Lr("App Name");const A=["projectId","apiKey","appId"];for(const B of A)if(!w.options[B])throw Lr(B);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(A);return{app:A,appConfig:B,heartbeatServiceProvider:(0,ge._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Ns=w=>{const A=w.getProvider("app").getImmediate(),B=(0,ge._getProvider)(A,Tr).getImmediate();return{getId:()=>function Yr(w){return Qr.apply(this,arguments)}(B),getToken:pe=>function Fr(w){return Vi.apply(this,arguments)}(B,pe)}};(function Or(){(0,ge._registerComponent)(new me.wA(Tr,Ri,"PUBLIC")),(0,ge._registerComponent)(new me.wA("installations-internal",Ns,"PRIVATE"))})(),(0,ge.registerVersion)(Dr,"0.6.4"),(0,ge.registerVersion)(Dr,"0.6.4","esm2017");const ji="@firebase/remote-config",ar=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Es{constructor(A,B,te,pe){this.client=A,this.storage=B,this.storageCache=te,this.logger=pe}isCachedDataFresh(A,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const te=Date.now()-B,pe=te<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${te}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${pe}.`),pe}fetch(A){var B=this;return(0,j.Z)(function*(){const[te,pe]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(pe&&B.isCachedDataFresh(A.cacheMaxAgeMillis,te))return pe;A.eTag=pe&&pe.eTag;const be=yield B.client.fetch(A),it=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&it.push(B.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(it),be})()}}function Os(w=navigator){return w.languages&&w.languages[0]||w.language}class sa{constructor(A,B,te,pe,be,it){this.firebaseInstallations=A,this.sdkVersion=B,this.namespace=te,this.projectId=pe,this.apiKey=be,this.appId=it}fetch(A){var B=this;return(0,j.Z)(function*(){const[te,pe]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),it=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,Wt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Ut={sdk_version:B.sdkVersion,app_instance_id:te,app_instance_id_token:pe,app_id:B.appId,language_code:Os()},fn={method:"POST",headers:Wt,body:JSON.stringify(Ut)},mn=fetch(it,fn),kn=new Promise((co,La)=>{A.signal.addEventListener(()=>{const yu=new Error("The operation was aborted.");yu.name="AbortError",La(yu)})});let vs;try{yield Promise.race([mn,kn]),vs=yield mn}catch(co){let La="fetch-client-network";throw"AbortError"===co?.name&&(La="fetch-timeout"),ar.create(La,{originalErrorMessage:co?.message})}let fi=vs.status;const Li=vs.headers.get("ETag")||void 0;let ba,mu;if(200===vs.status){let co;try{co=yield vs.json()}catch(La){throw ar.create("fetch-client-parse",{originalErrorMessage:La?.message})}ba=co.entries,mu=co.state}if("INSTANCE_STATE_UNSPECIFIED"===mu?fi=500:"NO_CHANGE"===mu?fi=304:("NO_TEMPLATE"===mu||"EMPTY_CONFIG"===mu)&&(ba={}),304!==fi&&200!==fi)throw ar.create("fetch-status",{httpStatus:fi});return{status:fi,eTag:Li,config:ba}})()}}class Ro{constructor(A,B){this.client=A,this.storage=B}fetch(A){var B=this;return(0,j.Z)(function*(){const te=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(A,te)})()}attemptFetch(A,{throttleEndTimeMillis:B,backoffCount:te}){var pe=this;return(0,j.Z)(function*(){yield function ds(w,A){return new Promise((B,te)=>{const pe=Math.max(A-Date.now(),0),be=setTimeout(B,pe);w.addEventListener(()=>{clearTimeout(be),te(ar.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,B);try{const be=yield pe.client.fetch(A);return yield pe.storage.deleteThrottleMetadata(),be}catch(be){if(!function zo(w){if(!(w instanceof de.ZR&&w.customData))return!1;const A=Number(w.customData.httpStatus);return 429===A||500===A||503===A||504===A}(be))throw be;const it={throttleEndTimeMillis:Date.now()+(0,de.$s)(te),backoffCount:te+1};return yield pe.storage.setThrottleMetadata(it),pe.attemptFetch(A,it)}})()}}class Js{constructor(A,B,te,pe,be){this.app=A,this._client=B,this._storageCache=te,this._storage=pe,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hr(w,A){const B=w.target.error||void 0;return ar.create(A,{originalErrorMessage:B&&B?.message})}const oi="app_namespace_store";class oa{constructor(A,B,te,pe=function Ma(){return new Promise((w,A)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=te=>{A(Hr(te,"storage-open"))},B.onsuccess=te=>{w(te.target.result)},B.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(oi,{keyPath:"compositeKey"})}}catch(B){A(ar.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=A,this.appName=B,this.namespace=te,this.openDbPromise=pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var B=this;return(0,j.Z)(function*(){const te=yield B.openDbPromise;return new Promise((pe,be)=>{const Wt=te.transaction([oi],"readonly").objectStore(oi),Ut=B.createCompositeKey(A);try{const fn=Wt.get(Ut);fn.onerror=mn=>{be(Hr(mn,"storage-get"))},fn.onsuccess=mn=>{const kn=mn.target.result;pe(kn?kn.value:void 0)}}catch(fn){be(ar.create("storage-get",{originalErrorMessage:fn?.message}))}})})()}set(A,B){var te=this;return(0,j.Z)(function*(){const pe=yield te.openDbPromise;return new Promise((be,it)=>{const Ut=pe.transaction([oi],"readwrite").objectStore(oi),fn=te.createCompositeKey(A);try{const mn=Ut.put({compositeKey:fn,value:B});mn.onerror=kn=>{it(Hr(kn,"storage-set"))},mn.onsuccess=()=>{be()}}catch(mn){it(ar.create("storage-set",{originalErrorMessage:mn?.message}))}})})()}delete(A){var B=this;return(0,j.Z)(function*(){const te=yield B.openDbPromise;return new Promise((pe,be)=>{const Wt=te.transaction([oi],"readwrite").objectStore(oi),Ut=B.createCompositeKey(A);try{const fn=Wt.delete(Ut);fn.onerror=mn=>{be(Hr(mn,"storage-delete"))},fn.onsuccess=()=>{pe()}}catch(fn){be(ar.create("storage-delete",{originalErrorMessage:fn?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Er{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,j.Z)(function*(){const B=A.storage.getLastFetchStatus(),te=A.storage.getLastSuccessfulFetchTimestampMillis(),pe=A.storage.getActiveConfig(),be=yield B;be&&(A.lastFetchStatus=be);const it=yield te;it&&(A.lastSuccessfulFetchTimestampMillis=it);const Wt=yield pe;Wt&&(A.activeConfig=Wt)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Wr(){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,j.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}let zi,di;!function hs(){(0,ge._registerComponent)(new me.wA("remote-config",function w(A,{instanceIdentifier:B}){const te=A.getProvider("app").getImmediate(),pe=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ar.create("registration-window");if(!(0,de.hl)())throw ar.create("indexed-db-unavailable");const{projectId:be,apiKey:it,appId:Wt}=te.options;if(!be)throw ar.create("registration-project-id");if(!it)throw ar.create("registration-api-key");if(!Wt)throw ar.create("registration-app-id");const Ut=new oa(Wt,te.name,B=B||"firebase"),fn=new Er(Ut),mn=new we.Yd(ji);mn.logLevel=we.in.ERROR;const kn=new sa(pe,ge.SDK_VERSION,B,be,it,Wt),vs=new Ro(kn,Ut),fi=new Es(vs,Ut,fn,mn),Li=new Js(te,fi,fn,Ut,mn);return function qn(w){const A=(0,de.m9)(w);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Li),Li},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(ji,"0.4.4"),(0,ge.registerVersion)(ji,"0.4.4","esm2017")}();const eo=new WeakMap,Xr=new WeakMap,Kr=new WeakMap,to=new WeakMap,En=new WeakMap;let aa={get(w,A,B){if(w instanceof IDBTransaction){if("done"===A)return Xr.get(w);if("objectStoreNames"===A)return w.objectStoreNames||Kr.get(w);if("store"===A)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Ci(w[A])},set:(w,A,B)=>(w[A]=B,!0),has:(w,A)=>w instanceof IDBTransaction&&("done"===A||"store"===A)||A in w};function _o(w){return"function"==typeof w?function Oi(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Po(){return di||(di=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...A){return w.apply(ua(this),A),Ci(eo.get(this))}:function(...A){return Ci(w.apply(ua(this),A))}:function(A,...B){const te=w.call(ua(this),A,...B);return Kr.set(te,A.sort?A.sort():[A]),Ci(te)}}(w):(w instanceof IDBTransaction&&function Fs(w){if(Xr.has(w))return;const A=new Promise((B,te)=>{const pe=()=>{w.removeEventListener("complete",be),w.removeEventListener("error",it),w.removeEventListener("abort",it)},be=()=>{B(),pe()},it=()=>{te(w.error||new DOMException("AbortError","AbortError")),pe()};w.addEventListener("complete",be),w.addEventListener("error",it),w.addEventListener("abort",it)});Xr.set(w,A)}(w),((w,A)=>A.some(B=>w instanceof B))(w,function vo(){return zi||(zi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,aa):w)}function Ci(w){if(w instanceof IDBRequest)return function ks(w){const A=new Promise((B,te)=>{const pe=()=>{w.removeEventListener("success",be),w.removeEventListener("error",it)},be=()=>{B(Ci(w.result)),pe()},it=()=>{te(w.error),pe()};w.addEventListener("success",be),w.addEventListener("error",it)});return A.then(B=>{B instanceof IDBCursor&&eo.set(B,w)}).catch(()=>{}),En.set(A,w),A}(w);if(to.has(w))return to.get(w);const A=_o(w);return A!==w&&(to.set(w,A),En.set(A,w)),A}const ua=w=>En.get(w);function gt(w,A,{blocked:B,upgrade:te,blocking:pe,terminated:be}={}){const it=indexedDB.open(w,A),Wt=Ci(it);return te&&it.addEventListener("upgradeneeded",Ut=>{te(Ci(it.result),Ut.oldVersion,Ut.newVersion,Ci(it.transaction))}),B&&it.addEventListener("blocked",()=>B()),Wt.then(Ut=>{be&&Ut.addEventListener("close",()=>be()),pe&&Ut.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Wt}function Un(w,{blocked:A}={}){const B=indexedDB.deleteDatabase(w);return A&&B.addEventListener("blocked",()=>A()),Ci(B).then(()=>{})}const no=["get","getKey","getAll","getAllKeys","count"],ro=["put","add","delete","clear"],Gr=new Map;function ei(w,A){if(!(w instanceof IDBDatabase)||A in w||"string"!=typeof A)return;if(Gr.get(A))return Gr.get(A);const B=A.replace(/FromIndex$/,""),te=A!==B,pe=ro.includes(B);if(!(B in(te?IDBIndex:IDBObjectStore).prototype)||!pe&&!no.includes(B))return;const be=function(){var it=(0,j.Z)(function*(Wt,...Ut){const fn=this.transaction(Wt,pe?"readwrite":"readonly");let mn=fn.store;return te&&(mn=mn.index(Ut.shift())),(yield Promise.all([mn[B](...Ut),pe&&fn.done]))[0]});return function(Ut){return it.apply(this,arguments)}}();return Gr.set(A,be),be}!function Ar(w){aa=w(aa)}(w=>({...w,get:(A,B,te)=>ei(A,B)||w.get(A,B,te),has:(A,B)=>!!ei(A,B)||w.has(A,B)}));const Wi="/firebase-messaging-sw.js",es="/firebase-cloud-messaging-push-scope",No="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Is="google.c.a.c_id",Br="google.c.a.c_l",O="google.c.a.ts",R="google.c.a.e";var Z=(()=>{return(w=Z||(Z={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",Z;var w})();function Qe(w){const A=new Uint8Array(w);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function en(w){const B=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),te=atob(B),pe=new Uint8Array(te.length);for(let be=0;be<te.length;++be)pe[be]=te.charCodeAt(be);return pe}const $n="fcm_token_details_db",Ki="fcm_token_object_Store";function bi(w){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,j.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes($n))return null;let A=null;return(yield gt($n,5,{upgrade:(te=(0,j.Z)(function*(pe,be,it,Wt){var Ut;if(be<2||!pe.objectStoreNames.contains(Ki))return;const fn=Wt.objectStore(Ki),mn=yield fn.index("fcmSenderId").get(w);if(yield fn.clear(),mn)if(2===be){const kn=mn;if(!kn.auth||!kn.p256dh||!kn.endpoint)return;A={token:kn.fcmToken,createTime:null!==(Ut=kn.createTime)&&void 0!==Ut?Ut:Date.now(),subscriptionOptions:{auth:kn.auth,p256dh:kn.p256dh,endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:"string"==typeof kn.vapidKey?kn.vapidKey:Qe(kn.vapidKey)}}}else if(3===be){const kn=mn;A={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Qe(kn.auth),p256dh:Qe(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Qe(kn.vapidKey)}}}else if(4===be){const kn=mn;A={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Qe(kn.auth),p256dh:Qe(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Qe(kn.vapidKey)}}}}),function(be,it,Wt,Ut){return te.apply(this,arguments)})})).close(),yield Un($n),yield Un("fcm_vapid_details_db"),yield Un("undefined"),Ls(A)?A:null;var te}),Ds.apply(this,arguments)}function Ls(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:A}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ki="firebase-messaging-store";let Vs=null;function xa(){return Vs||(Vs=gt("firebase-messaging-database",1,{upgrade:(w,A)=>{0===A&&w.createObjectStore(ki)}})),Vs}function wo(w){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,j.Z)(function*(w){const A=la(w),te=yield(yield xa()).transaction(ki).objectStore(ki).get(A);if(te)return te;{const pe=yield bi(w.appConfig.senderId);if(pe)return yield ko(w,pe),pe}})).apply(this,arguments)}function ko(w,A){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,j.Z)(function*(w,A){const B=la(w),pe=(yield xa()).transaction(ki,"readwrite");return yield pe.objectStore(ki).put(A,B),yield pe.done,A})).apply(this,arguments)}function Ti(w){return Us.apply(this,arguments)}function Us(){return(Us=(0,j.Z)(function*(w){const A=la(w),te=(yield xa()).transaction(ki,"readwrite");yield te.objectStore(ki).delete(A),yield te.done})).apply(this,arguments)}function la({appConfig:w}){return w.appId}const ur=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function mi(w,A){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,j.Z)(function*(w,A){const B=yield Bs(w),te=ts(A),pe={method:"POST",headers:B,body:JSON.stringify(te)};let be;try{be=yield(yield fetch(qo(w.appConfig),pe)).json()}catch(it){throw ur.create("token-subscribe-failed",{errorInfo:it?.toString()})}if(be.error)throw ur.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw ur.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function wr(w,A){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,j.Z)(function*(w,A){const B=yield Bs(w),te=ts(A.subscriptionOptions),pe={method:"PATCH",headers:B,body:JSON.stringify(te)};let be;try{be=yield(yield fetch(`${qo(w.appConfig)}/${A.token}`,pe)).json()}catch(it){throw ur.create("token-update-failed",{errorInfo:it?.toString()})}if(be.error)throw ur.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw ur.create("token-update-no-token");return be.token})).apply(this,arguments)}function ca(w,A){return qi.apply(this,arguments)}function qi(){return(qi=(0,j.Z)(function*(w,A){const te={method:"DELETE",headers:yield Bs(w)};try{const be=yield(yield fetch(`${qo(w.appConfig)}/${A}`,te)).json();if(be.error)throw ur.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(pe){throw ur.create("token-unsubscribe-failed",{errorInfo:pe?.toString()})}})).apply(this,arguments)}function qo({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function Bs(w){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,j.Z)(function*({appConfig:w,installations:A}){const B=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function ts({p256dh:w,auth:A,endpoint:B,vapidKey:te}){const pe={web:{endpoint:B,auth:A,p256dh:w}};return te!==No&&(pe.web.applicationPubKey=te),pe}const Zo=6048e5;function ps(w){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,j.Z)(function*(w){const A=yield Lo(w.swRegistration,w.vapidKey),B={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:A.endpoint,auth:Qe(A.getKey("auth")),p256dh:Qe(A.getKey("p256dh"))},te=yield wo(w.firebaseDependencies);if(te){if(b(te.subscriptionOptions,B))return Date.now()>=te.createTime+Zo?io(w,{token:te.token,createTime:Date.now(),subscriptionOptions:B}):te.token;try{yield ca(w.firebaseDependencies,te.token)}catch(pe){console.warn(pe)}return oo(w.firebaseDependencies,B)}return oo(w.firebaseDependencies,B)})).apply(this,arguments)}function yi(w){return ns.apply(this,arguments)}function ns(){return(ns=(0,j.Z)(function*(w){const A=yield wo(w.firebaseDependencies);A&&(yield ca(w.firebaseDependencies,A.token),yield Ti(w.firebaseDependencies));const B=yield w.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()})).apply(this,arguments)}function io(w,A){return so.apply(this,arguments)}function so(){return(so=(0,j.Z)(function*(w,A){try{const B=yield wr(w.firebaseDependencies,A),te=Object.assign(Object.assign({},A),{token:B,createTime:Date.now()});return yield ko(w.firebaseDependencies,te),B}catch(B){throw yield yi(w),B}})).apply(this,arguments)}function oo(w,A){return Do.apply(this,arguments)}function Do(){return(Do=(0,j.Z)(function*(w,A){const te={token:yield mi(w,A),createTime:Date.now(),subscriptionOptions:A};return yield ko(w,te),te.token})).apply(this,arguments)}function Lo(w,A){return ou.apply(this,arguments)}function ou(){return(ou=(0,j.Z)(function*(w,A){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:en(A)})})).apply(this,arguments)}function b(w,A){return A.vapidKey===w.vapidKey&&A.endpoint===w.endpoint&&A.auth===w.auth&&A.p256dh===w.p256dh}function V(w){const A={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function M(w,A){if(!A.notification)return;w.notification={};const B=A.notification.title;B&&(w.notification.title=B);const te=A.notification.body;te&&(w.notification.body=te);const pe=A.notification.image;pe&&(w.notification.image=pe);const be=A.notification.icon;be&&(w.notification.icon=be)}(A,w),function z(w,A){!A.data||(w.data=A.data)}(A,w),function _e(w,A){var B,te,pe,be,it;if(!(A.fcmOptions||null!==(B=A.notification)&&void 0!==B&&B.click_action))return;w.fcmOptions={};const Wt=null!==(pe=null===(te=A.fcmOptions)||void 0===te?void 0:te.link)&&void 0!==pe?pe:null===(be=A.notification)||void 0===be?void 0:be.click_action;Wt&&(w.fcmOptions.link=Wt);const Ut=null===(it=A.fcmOptions)||void 0===it?void 0:it.analytics_label;Ut&&(w.fcmOptions.analyticsLabel=Ut)}(A,w),A}function Je(w){return"object"==typeof w&&!!w&&Is in w}function ct(w,A){const B=[];for(let te=0;te<w.length;te++)B.push(w.charAt(te)),te<A.length&&B.push(A.charAt(te));return B.join("")}function or(w){return ur.create("missing-app-config-values",{valueName:w})}ct("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ct("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hn{constructor(A,B,te){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pe=function cn(w){if(!w||!w.options)throw or("App Configuration Object");if(!w.name)throw or("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:B}=w;for(const te of A)if(!B[te])throw or(te);return{appName:w.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:pe,installations:B,analyticsProvider:te}}_delete(){return Promise.resolve()}}function mr(w){return gn.apply(this,arguments)}function gn(){return(gn=(0,j.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Wi,{scope:es}),w.swRegistration.update().catch(()=>{})}catch(A){throw ur.create("failed-service-worker-registration",{browserErrorMessage:A?.message})}})).apply(this,arguments)}function Mr(w,A){return On.apply(this,arguments)}function On(){return(On=(0,j.Z)(function*(w,A){if(!A&&!w.swRegistration&&(yield mr(w)),A||!w.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");w.swRegistration=A}})).apply(this,arguments)}function ni(w,A){return js.apply(this,arguments)}function js(){return(js=(0,j.Z)(function*(w,A){A?w.vapidKey=A:w.vapidKey||(w.vapidKey=No)})).apply(this,arguments)}function pr(){return(pr=(0,j.Z)(function*(w,A){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield ni(w,A?.vapidKey),yield Mr(w,A?.serviceWorkerRegistration),ps(w)})).apply(this,arguments)}function xr(w,A,B){return ao.apply(this,arguments)}function ao(){return(ao=(0,j.Z)(function*(w,A,B){const te=Kt(A);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(te,{message_id:B[Is],message_name:B[Br],message_time:B[O],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Kt(w){switch(w){case Z.NOTIFICATION_CLICKED:return"notification_open";case Z.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function da(){return(da=(0,j.Z)(function*(w,A){const B=A.data;if(!B.isFirebaseMessaging)return;w.onMessageHandler&&B.messageType===Z.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(V(B)):w.onMessageHandler.next(V(B)));const te=B.data;Je(te)&&"1"===te[R]&&(yield xr(w,B.messageType,te))})).apply(this,arguments)}const $t="@firebase/messaging",vt=w=>{const A=new Hn(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function nn(w,A){return da.apply(this,arguments)}(A,B)),A},ai=w=>{const A=w.getProvider("messaging").getImmediate();return{getToken:te=>function mt(w,A){return pr.apply(this,arguments)}(A,te)}};function za(){return xu.apply(this,arguments)}function xu(){return(xu=(0,j.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ga(){(0,ge._registerComponent)(new me.wA("messaging",vt,"PUBLIC")),(0,ge._registerComponent)(new me.wA("messaging-internal",ai,"PRIVATE")),(0,ge.registerVersion)($t,"0.12.4"),(0,ge.registerVersion)($t,"0.12.4","esm2017")}();const rn="analytics",Co="firebase_id",dn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$s="https://www.googletagmanager.com/gtag/js",In=new we.Yd("@firebase/analytics"),Xn=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ht(w){if(!w.startsWith($s)){const A=Xn.create("invalid-gtag-resource",{gtagURL:w});return In.warn(A.message),""}return w}function gs(w){return Promise.all(w.map(A=>A.catch(B=>B)))}function Qo(w,A){const B=function ga(w,A){let B;return window.trustedTypes&&(B=window.trustedTypes.createPolicy(w,A)),B}("firebase-js-sdk-policy",{createScriptURL:Ht}),te=document.createElement("script"),pe=`${$s}?l=${w}&id=${A}`;te.src=B?B?.createScriptURL(pe):pe,te.async=!0,document.head.appendChild(te)}function Pu(w,A,B,te,pe,be){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,j.Z)(function*(w,A,B,te,pe,be){const it=te[pe];try{if(it)yield A[it];else{const Ut=(yield gs(B)).find(fn=>fn.measurementId===pe);Ut&&(yield A[Ut.appId])}}catch(Wt){In.error(Wt)}w("config",pe,be)})).apply(this,arguments)}function Vo(w,A,B,te,pe){return ma.apply(this,arguments)}function ma(){return(ma=(0,j.Z)(function*(w,A,B,te,pe){try{let be=[];if(pe&&pe.send_to){let it=pe.send_to;Array.isArray(it)||(it=[it]);const Wt=yield gs(B);for(const Ut of it){const fn=Wt.find(kn=>kn.measurementId===Ut),mn=fn&&A[fn.appId];if(!mn){be=[];break}be.push(mn)}}0===be.length&&(be=Object.values(A)),yield Promise.all(be),w("event",te,pe||{})}catch(be){In.error(be)}})).apply(this,arguments)}function Nu(w){const A=window.document.getElementsByTagName("script");for(const B of Object.values(A))if(B.src&&B.src.includes($s)&&B.src.includes(w))return B;return null}const ri=new class va{constructor(A={},B=1e3){this.throttleMetadata=A,this.intervalMillis=B}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,B){this.throttleMetadata[A]=B}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Ue(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function Jo(w){return uo.apply(this,arguments)}function uo(){return(uo=(0,j.Z)(function*(w){var A;const{appId:B,apiKey:te}=w,pe={method:"GET",headers:Ue(te)},be=dn.replace("{app-id}",B),it=yield fetch(be,pe);if(200!==it.status&&304!==it.status){let Wt="";try{const Ut=yield it.json();null!==(A=Ut.error)&&void 0!==A&&A.message&&(Wt=Ut.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:it.status,responseMessage:Wt})}return it.json()})).apply(this,arguments)}function _a(w){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,j.Z)(function*(w,A=ri,B){const{appId:te,apiKey:pe,measurementId:be}=w.options;if(!te)throw Xn.create("no-app-id");if(!pe){if(be)return{measurementId:be,appId:te};throw Xn.create("no-api-key")}const it=A.getThrottleMetadata(te)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Wt=new uu;return setTimeout((0,j.Z)(function*(){Wt.abort()}),void 0!==B?B:6e4),Si({appId:te,apiKey:pe,measurementId:be},it,Wt,A)})).apply(this,arguments)}function Si(w,A,B){return au.apply(this,arguments)}function au(){return(au=(0,j.Z)(function*(w,{throttleEndTimeMillis:A,backoffCount:B},te,pe=ri){var be;const{appId:it,measurementId:Wt}=w;try{yield Hs(te,A)}catch(Ut){if(Wt)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Wt} provided in the "measurementId" field in the local Firebase config. [${Ut?.message}]`),{appId:it,measurementId:Wt};throw Ut}try{const Ut=yield Jo(w);return pe.deleteThrottleMetadata(it),Ut}catch(Ut){const fn=Ut;if(!Ra(fn)){if(pe.deleteThrottleMetadata(it),Wt)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Wt} provided in the "measurementId" field in the local Firebase config. [${fn?.message}]`),{appId:it,measurementId:Wt};throw Ut}const mn=503===Number(null===(be=fn?.customData)||void 0===be?void 0:be.httpStatus)?(0,de.$s)(B,pe.intervalMillis,30):(0,de.$s)(B,pe.intervalMillis),kn={throttleEndTimeMillis:Date.now()+mn,backoffCount:B+1};return pe.setThrottleMetadata(it,kn),In.debug(`Calling attemptFetch again in ${mn} millis`),Si(w,kn,te,pe)}})).apply(this,arguments)}function Hs(w,A){return new Promise((B,te)=>{const pe=Math.max(A-Date.now(),0),be=setTimeout(B,pe);w.addEventListener(()=>{clearTimeout(be),te(Xn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Ra(w){if(!(w instanceof de.ZR&&w.customData))return!1;const A=Number(w.customData.httpStatus);return 429===A||500===A||503===A||504===A}class uu{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let Ou,le;function ms(){return(ms=(0,j.Z)(function*(w,A,B,te,pe){if(pe&&pe.global)w("event",B,te);else{const be=yield A;w("event",B,Object.assign(Object.assign({},te),{send_to:be}))}})).apply(this,arguments)}function fe(w){le=w}function nt(w){Ou=w}function Lt(){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,j.Z)(function*(){if(!(0,de.hl)())return In.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(w){return In.warn(Xn.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function Kn(){return(Kn=(0,j.Z)(function*(w,A,B,te,pe,be,it){var Wt;const Ut=_a(w);Ut.then(fi=>{B[fi.measurementId]=fi.appId,w.options.measurementId&&fi.measurementId!==w.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${fi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fi=>In.error(fi)),A.push(Ut);const fn=Lt().then(fi=>{if(fi)return te.getId()}),[mn,kn]=yield Promise.all([Ut,fn]);Nu(be)||Qo(be,mn.measurementId),le&&(pe("consent","default",le),fe(void 0)),pe("js",new Date);const vs=null!==(Wt=it?.config)&&void 0!==Wt?Wt:{};return vs.origin="firebase",vs.update=!0,null!=kn&&(vs[Co]=kn),pe("config",mn.measurementId,vs),Ou&&(pe("set",Ou),nt(void 0)),mn.measurementId})).apply(this,arguments)}class Mi{constructor(A){this.app=A}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},Xo=[];const Gs={};let Pa,Ts,Ea="dataLayer",lu=!1;function Fl(w,A,B){!function ku(){const w=[];if((0,de.ru)()&&w.push("This is a browser extension environment."),(0,de.zI)()||w.push("Cookies are not available."),w.length>0){const A=w.map((te,pe)=>`(${pe+1}) ${te}`).join(" "),B=Xn.create("invalid-analytics-context",{errorInfo:A});In.warn(B.message)}}();const te=w.options.appId;if(!te)throw Xn.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Xn.create("no-api-key");In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[te])throw Xn.create("already-exists",{id:te});if(!lu){!function yr(w){let A=[];Array.isArray(window[w])?A=window[w]:window[w]=A}(Ea);const{wrappedGtag:be,gtagCore:it}=function bs(w,A,B,te,pe){let be=function(...it){window[te].push(arguments)};return window[pe]&&"function"==typeof window[pe]&&(be=window[pe]),window[pe]=function Ol(w,A,B,te){function be(){return(be=(0,j.Z)(function*(it,...Wt){try{if("event"===it){const[Ut,fn]=Wt;yield Vo(w,A,B,Ut,fn)}else if("config"===it){const[Ut,fn]=Wt;yield Pu(w,A,B,te,Ut,fn)}else if("consent"===it){const[Ut]=Wt;w("consent","update",Ut)}else if("get"===it){const[Ut,fn,mn]=Wt;w("get",Ut,fn,mn)}else if("set"===it){const[Ut]=Wt;w("set",Ut)}else w(it,...Wt)}catch(Ut){In.error(Ut)}})).apply(this,arguments)}return function pe(it){return be.apply(this,arguments)}}(be,w,A,B),{gtagCore:be,wrappedGtag:window[pe]}}(li,Xo,Gs,Ea,"gtag");Ts=be,Pa=it,lu=!0}return li[te]=function sn(w,A,B,te,pe,be,it){return Kn.apply(this,arguments)}(w,Xo,Gs,A,Pa,Ea,B),new Mi(w)}function Yi(){return Na.apply(this,arguments)}function Na(){return(Na=(0,j.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const sl="@firebase/analytics";!function _i(){(0,ge._registerComponent)(new me.wA(rn,(A,{options:B})=>Fl(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,ge._registerComponent)(new me.wA("analytics-internal",function w(A){try{const B=A.getProvider(rn).getImmediate();return{logEvent:(te,pe,be)=>function Bo(w,A,B,te){w=(0,de.m9)(w),function kl(w,A,B,te,pe){return ms.apply(this,arguments)}(Ts,li[w.app.options.appId],A,B,te).catch(pe=>In.error(pe))}(B,te,pe,be)}}catch(B){throw Xn.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,ge.registerVersion)(sl,"0.10.0"),(0,ge.registerVersion)(sl,"0.10.0","esm2017")}();var du=k(4408),si=k(7565);const Fu=new class Oa extends si.v{}(class bo extends du.o{constructor(A,B){super(A,B),this.scheduler=A,this.work=B}schedule(A,B=0){return B>0?super.schedule(A,B):(this.delay=B,this.state=A,this.scheduler.flush(this),this)}execute(A,B){return B>0||this.closed?super.execute(A,B):this._execute(A,B)}requestAsyncId(A,B,te=0){return null!=te&&te>0||null==te&&this.delay>0?super.requestAsyncId(A,B,te):(A.flush(this),0)}});var ol=k(4986),Ul=k(8505),ta=k(9468),na=k(5363);const ka=new h.GfV("7.6.1"),lo="__angularfire_symbol__analyticsIsSupportedValue",To="__angularfire_symbol__analyticsIsSupported",Ia="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",hu="__angularfire_symbol__messagingIsSupportedValue",Ya="__angularfire_symbol__messagingIsSupported";function al(w,A,B){if(A){if(1===A.length)return A[0];const be=A.filter(it=>it.app===B);if(1===be.length)return be[0]}return B.container.getProvider(w).getImmediate({optional:!0})}globalThis[To]||(globalThis[To]=Yi().then(w=>globalThis[lo]=w).catch(()=>globalThis[lo]=!1)),globalThis[Ya]||(globalThis[Ya]=za().then(w=>globalThis[hu]=w).catch(()=>globalThis[hu]=!1)),globalThis[ra]||(globalThis[ra]=Wr().then(w=>globalThis[Ia]=w).catch(()=>globalThis[Ia]=!1));const pu=(w,A)=>{const B=A?[A]:(0,L.C6)(),te=[];return B.forEach(pe=>{pe.container.getProvider(w).instances.forEach(it=>{te.includes(it)||te.push(it)})}),te};function gu(){}class ul{constructor(A,B=Fu){this.zone=A,this.delegate=B}now(){return this.delegate.now()}schedule(A,B,te){const pe=this.zone;return this.delegate.schedule(function(it){pe.runGuarded(()=>{A.apply(this,[it])})},B,te)}}class Uu{constructor(A){this.zone=A,this.task=null}call(A,B){const te=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gu,{},gu,gu)),B.pipe((0,Ul.b)({next:te,complete:te,error:te})).subscribe(A).add(te)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let td=(()=>{class w{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new ul(Zone.current)),this.insideAngular=B.run(()=>new ul(Zone.current,ol.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(B){return new(B||w)(h.LFG(h.R0b))},w.\u0275prov=h.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Da(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function ll(w){return Da(),function qr(w){return function(B){return(B=B.lift(new Uu(w.ngZone))).pipe((0,ta.R)(w.outsideAngular),(0,na.Q)(w.insideAngular))}}(Da())(w)}},1389:(Bt,ze,k)=>{k.d(ze,{$:()=>Wi,A:()=>ne,D:()=>je,I:()=>Nr,J:()=>Ri,L:()=>ci,N:()=>Ve,P:()=>sn,Q:()=>oa,R:()=>ys,U:()=>fs,V:()=>Wr,W:()=>Gi,X:()=>mo,Y:()=>vo,Z:()=>Po,_:()=>En,a:()=>ha,a0:()=>No,a1:()=>Is,a2:()=>x,a3:()=>Ki,a4:()=>Ds,a5:()=>Eo,a6:()=>ki,a7:()=>xa,a8:()=>Wo,a9:()=>Ko,aA:()=>ve,aB:()=>Ia,aC:()=>K,aD:()=>It,aE:()=>ta,aF:()=>Vl,aG:()=>ii,aH:()=>br,aL:()=>fa,aO:()=>zi,aa:()=>Ti,ab:()=>la,ac:()=>Io,ad:()=>wr,ae:()=>ca,af:()=>qo,ai:()=>Zo,aj:()=>Zi,ak:()=>yi,an:()=>Oi,ao:()=>M,aq:()=>js,ar:()=>$t,as:()=>jt,at:()=>re,au:()=>st,av:()=>he,aw:()=>vs,ax:()=>fu,ay:()=>ae,az:()=>rt,b:()=>nl,c:()=>Ts,d:()=>Fl,e:()=>Fi,f:()=>sl,g:()=>Oa,h:()=>du,i:()=>rl,j:()=>ol,k:()=>co,l:()=>T,m:()=>Rf,p:()=>se,r:()=>G,s:()=>E,u:()=>Lt});var h=k(5861),L=k(2090),j=k(6881),ge=k(7582),de=k(1877),me=k(4859);const se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ne={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function Ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Le=function Ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Dt=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new de.Yd("@firebase/auth");function _t(_,...d){Oe.logLevel<=de.in.ERROR&&Oe.error(`Auth (${j.SDK_VERSION}): ${_}`,...d)}function he(_,...d){throw ot(_,...d)}function rt(_,...d){return ot(_,...d)}function Xe(_,d,g){const I=Object.assign(Object.assign({},Le()),{[d]:g});return new L.LL("auth","Firebase",I).create(d,{appName:_.name})}function Ne(_,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&he(_,"argument-error"),Xe(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(_,...d){if("string"!=typeof _){const g=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=_.name),_._errorFactory.create(g,...I)}return Dt.create(_,...d)}function ve(_,d,...g){if(!_)throw ot(d,...g)}function wt(_){const d="INTERNAL ASSERTION FAILED: "+_;throw _t(d),new Error(d)}function jt(_,d){_||wt(d)}function yt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function xt(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Pe{constructor(d,g){this.shortDelay=d,this.longDelay=g,jt(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Dr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fe(_,d){jt(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class $e{static initialize(d,g,I){this.fetchImpl=d,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},at=new Pe(3e4,6e4);function dt(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function Et(_,d,g,I){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(_,d,g,I,$={}){return St(_,$,(0,h.Z)(function*(){let J={},Se={};I&&("GET"===d?Se=I:J={body:JSON.stringify(I)});const et=(0,L.xO)(Object.assign({key:_.config.apiKey},Se)).slice(1),kt=yield _._getAdditionalHeaders();return kt["Content-Type"]="application/json",_.languageCode&&(kt["X-Firebase-Locale"]=_.languageCode),$e.fetch()(zn(_,_.config.apiHost,g,et),Object.assign({method:d,headers:kt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function St(_,d,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(_,d,g){_._canInitEmulator=!1;const I=Object.assign(Object.assign({},Ke),d);try{const $=new tr(_),J=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const Se=yield J.json();if("needConfirmation"in Se)throw jn(_,"account-exists-with-different-credential",Se);if(J.ok&&!("errorMessage"in Se))return Se;{const et=J.ok?Se.errorMessage:Se.error.message,[kt,qt]=et.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===kt)throw jn(_,"credential-already-in-use",Se);if("EMAIL_EXISTS"===kt)throw jn(_,"email-already-in-use",Se);if("USER_DISABLED"===kt)throw jn(_,"user-disabled",Se);const Dn=I[kt]||kt.toLowerCase().replace(/[_\s]+/g,"-");if(qt)throw Xe(_,Dn,qt);he(_,Dn)}}catch($){if($ instanceof L.ZR)throw $;he(_,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function ln(_,d,g,I){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(_,d,g,I,$={}){const J=yield Et(_,d,g,I,$);return"mfaPendingCredential"in J&&he(_,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function zn(_,d,g,I){const $=`${d}${g}?${I}`;return _.config.emulator?Fe(_.config,$):`${_.config.apiScheme}://${$}`}class tr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(rt(this.auth,"network-request-failed")),at.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(_,d,g){const I={appName:_.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const $=rt(_,d,I);return $.customData._tokenResponse=g,$}function Gt(){return(Gt=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Wn(_,d){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function cr(_,d){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function An(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function jr(){return(jr=(0,h.Z)(function*(_,d=!1){const g=(0,L.m9)(_),I=yield g.getIdToken(d),$=dr(I);ve($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const J="object"==typeof $.firebase?$.firebase:void 0,Se=J?.sign_in_provider;return{claims:$,token:I,authTime:An($r($.auth_time)),issuedAtTime:An($r($.iat)),expirationTime:An($r($.exp)),signInProvider:Se||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function $r(_){return 1e3*Number(_)}function dr(_){const[d,g,I]=_.split(".");if(void 0===d||void 0===g||void 0===I)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,L.tV)(g);return $?JSON.parse($):(_t("Failed to decode base64 JWT payload"),null)}catch($){return _t("Caught error parsing JWT payload as JSON",$?.toString()),null}}function an(_,d){return zt.apply(this,arguments)}function zt(){return(zt=(0,h.Z)(function*(_,d,g=!1){if(g)return d;try{return yield d}catch(I){throw I instanceof L.ZR&&Jt(I)&&_.auth.currentUser===_&&(yield _.auth.signOut()),I}})).apply(this,arguments)}function Jt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Rn{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),I)}iteration(){var d=this;return(0,h.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&d.schedule(!0))}d.schedule()})()}}class hr{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nr(_){return fr.apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(_){var d;const g=_.auth,I=yield _.getIdToken(),$=yield an(_,cr(g,{idToken:I}));ve($?.users.length,g,"internal-error");const J=$.users[0];_._notifyReloadListener(J);const Se=null!==(d=J.providerUserInfo)&&void 0!==d&&d.length?zr(J.providerUserInfo):[],et=wn(_.providerData,Se),Dn=!!_.isAnonymous&&!(_.email&&J.passwordHash||et?.length),lr={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:et,metadata:new hr(J.createdAt,J.lastLoginAt),isAnonymous:Dn};Object.assign(_,lr)})).apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(_){const d=(0,L.m9)(_);yield nr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function wn(_,d){return[..._.filter(I=>!d.some($=>$.providerId===I.providerId)),...d]}function zr(_){return _.map(d=>{var{providerId:g}=d,I=(0,ge._T)(d,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function bn(){return(bn=(0,h.Z)(function*(_,d){const g=yield St(_,{},(0,h.Z)(function*(){const I=(0,L.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:$,apiKey:J}=_.config,Se=zn(_,$,"/v1/token",`key=${J}`),et=yield _._getAdditionalHeaders();return et["Content-Type"]="application/x-www-form-urlencoded",$e.fetch()(Se,{method:"POST",headers:et,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ve(d.idToken,"internal-error"),ve(typeof d.idToken<"u","internal-error"),ve(typeof d.refreshToken<"u","internal-error");const g="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function _n(_){const d=dr(_);return ve(d,"internal-error"),ve(typeof d.exp<"u","internal-error"),ve(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var I=this;return(0,h.Z)(function*(){return ve(!I.accessToken||I.refreshToken,d,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var I=this;return(0,h.Z)(function*(){const{accessToken:$,refreshToken:J,expiresIn:Se}=yield function Sn(_,d){return bn.apply(this,arguments)}(d,g);I.updateTokensAndExpiration($,J,Number(Se))})()}updateTokensAndExpiration(d,g,I){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,g){const{refreshToken:I,accessToken:$,expirationTime:J}=g,Se=new Nt;return I&&(ve("string"==typeof I,"internal-error",{appName:d}),Se.refreshToken=I),$&&(ve("string"==typeof $,"internal-error",{appName:d}),Se.accessToken=$),J&&(ve("number"==typeof J,"internal-error",{appName:d}),Se.expirationTime=J),Se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return wt("not implemented")}}function rr(_,d){ve("string"==typeof _||typeof _>"u","internal-error",{appName:d})}class sr{constructor(d){var{uid:g,auth:I,stsTokenManager:$}=d,J=(0,ge._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new hr(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,h.Z)(function*(){const I=yield an(g,g.stsTokenManager.getToken(g.auth,d));return ve(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(d){return function Jn(_){return jr.apply(this,arguments)}(this,d)}reload(){return function un(_){return gr.apply(this,arguments)}(this)}_assign(d){this!==d&&(ve(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const g=new sr(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(d){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var I=this;return(0,h.Z)(function*(){let $=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),$=!0),g&&(yield nr(I)),yield I.auth._persistUserIfCurrent(I),$&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,h.Z)(function*(){const g=yield d.getIdToken();return yield an(d,function Bn(_,d){return Gt.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var I,$,J,Se,et,kt,qt,Dn;const lr=null!==(I=g.displayName)&&void 0!==I?I:void 0,Ao=null!==($=g.email)&&void 0!==$?$:void 0,zs=null!==(J=g.phoneNumber)&&void 0!==J?J:void 0,$l=null!==(Se=g.photoURL)&&void 0!==Se?Se:void 0,As=null!==(et=g.tenantId)&&void 0!==et?et:void 0,Hl=null!==(kt=g._redirectEventId)&&void 0!==kt?kt:void 0,vu=null!==(qt=g.createdAt)&&void 0!==qt?qt:void 0,od=null!==(Dn=g.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:ia,emailVerified:Sc,isAnonymous:$u,providerData:Ja,stsTokenManager:ad}=g;ve(ia&&ad,d,"internal-error");const er=Nt.fromJSON(this.name,ad);ve("string"==typeof ia,d,"internal-error"),rr(lr,d.name),rr(Ao,d.name),ve("boolean"==typeof Sc,d,"internal-error"),ve("boolean"==typeof $u,d,"internal-error"),rr(zs,d.name),rr($l,d.name),rr(As,d.name),rr(Hl,d.name),rr(vu,d.name),rr(od,d.name);const ud=new sr({uid:ia,auth:d,email:Ao,emailVerified:Sc,displayName:lr,isAnonymous:$u,photoURL:$l,phoneNumber:zs,tenantId:As,stsTokenManager:er,createdAt:vu,lastLoginAt:od});return Ja&&Array.isArray(Ja)&&(ud.providerData=Ja.map(dh=>Object.assign({},dh))),Hl&&(ud._redirectEventId=Hl),ud}static _fromIdTokenResponse(d,g,I=!1){return(0,h.Z)(function*(){const $=new Nt;$.updateFromServerResponse(g);const J=new sr({uid:g.localId,auth:d,stsTokenManager:$,isAnonymous:I});return yield nr(J),J})()}}const tt=new Map;function K(_){jt(_ instanceof Function,"Expected a class definition");let d=tt.get(_);return d?(jt(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,tt.set(_,d),d)}const Ve=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,I){var $=this;return(0,h.Z)(function*(){$.storage[g]=I})()}_get(g){var I=this;return(0,h.Z)(function*(){const $=I.storage[g];return void 0===$?null:$})()}_remove(g){var I=this;return(0,h.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return _.type="NONE",_})();function It(_,d,g){return`firebase:${_}:${d}:${g}`}class oe{constructor(d,g,I){this.persistence=d,this.auth=g,this.userKey=I;const{config:$,name:J}=this.auth;this.fullUserKey=It(this.userKey,$.apiKey,J),this.fullPersistenceKey=It("persistence",$.apiKey,J),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,h.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?sr._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,h.Z)(function*(){if(g.persistence===d)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,I="authUser"){return(0,h.Z)(function*(){if(!g.length)return new oe(K(Ve),d,I);const $=(yield Promise.all(g.map(function(){var qt=(0,h.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return qt.apply(this,arguments)}}()))).filter(qt=>qt);let J=$[0]||K(Ve);const Se=It(I,d.config.apiKey,d.name);let et=null;for(const qt of g)try{const Dn=yield qt._get(Se);if(Dn){const lr=sr._fromJSON(d,Dn);qt!==J&&(et=lr),J=qt;break}}catch{}const kt=$.filter(qt=>qt._shouldAllowMigration);return J._shouldAllowMigration&&kt.length?(J=kt[0],et&&(yield J._set(Se,et.toJSON())),yield Promise.all(g.map(function(){var qt=(0,h.Z)(function*(Dn){if(Dn!==J)try{yield Dn._remove(Se)}catch{}});return function(Dn){return qt.apply(this,arguments)}}())),new oe(J,d,I)):new oe(J,d,I)})()}}function ue(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(De(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Y(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Mt(d))return"Blackberry";if(Yt(d))return"Webos";if(q(d))return"Safari";if((d.includes("chrome/")||H(d))&&!d.includes("edge/"))return"Chrome";if(st(d))return"Android";{const I=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Y(_=(0,L.z$)()){return/firefox\//i.test(_)}function q(_=(0,L.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function H(_=(0,L.z$)()){return/crios\//i.test(_)}function De(_=(0,L.z$)()){return/iemobile/i.test(_)}function st(_=(0,L.z$)()){return/android/i.test(_)}function Mt(_=(0,L.z$)()){return/blackberry/i.test(_)}function Yt(_=(0,L.z$)()){return/webos/i.test(_)}function re(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function ae(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function He(_=(0,L.z$)()){return re(_)||st(_)||Yt(_)||Mt(_)||/windows phone/i.test(_)||De(_)}function tn(_,d=[]){let g;switch(_){case"Browser":g=ue((0,L.z$)());break;case"Worker":g=`${ue((0,L.z$)())}-${_}`;break;default:g=_}const I=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${j.SDK_VERSION}/${I}`}function Re(){return(Re=(0,h.Z)(function*(_){return(yield Et(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(_,d){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(_,d){return Et(_,"GET","/v2/recaptchaConfig",dt(_,d))})).apply(this,arguments)}function pn(_){return void 0!==_&&void 0!==_.getResponse}function vn(_){return void 0!==_&&void 0!==_.enterprise}class Pn{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function xn(_){return new Promise((d,g)=>{const I=document.createElement("script");I.setAttribute("src",_),I.onload=d,I.onerror=$=>{const J=rt("internal-error");J.customData=$,g(J)},I.type="text/javascript",I.charset="UTF-8",function Pr(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(I)})}function Zr(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Vi{constructor(d){this.type="recaptcha-enterprise",this.auth=br(d)}verify(d="verify",g=!1){var I=this;return(0,h.Z)(function*(){function J(){return J=(0,h.Z)(function*(et){if(!g){if(null==et.tenantId&&null!=et._agentRecaptchaConfig)return et._agentRecaptchaConfig.siteKey;if(null!=et.tenantId&&void 0!==et._tenantRecaptchaConfigs[et.tenantId])return et._tenantRecaptchaConfigs[et.tenantId].siteKey}return new Promise(function(){var kt=(0,h.Z)(function*(qt,Dn){ht(et,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(lr=>{if(void 0!==lr.recaptchaKey){const Ao=new Pn(lr);return null==et.tenantId?et._agentRecaptchaConfig=Ao:et._tenantRecaptchaConfigs[et.tenantId]=Ao,qt(Ao.siteKey)}Dn(new Error("recaptcha Enterprise site key undefined"))}).catch(lr=>{Dn(lr)})});return function(qt,Dn){return kt.apply(this,arguments)}}())}),J.apply(this,arguments)}function Se(et,kt,qt){const Dn=window.grecaptcha;vn(Dn)?Dn.enterprise.ready(()=>{Dn.enterprise.execute(et,{action:d}).then(lr=>{kt(lr)}).catch(()=>{kt("NO_RECAPTCHA")})}):qt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((et,kt)=>{(function $(et){return J.apply(this,arguments)})(I.auth).then(qt=>{if(!g&&vn(window.grecaptcha))Se(qt,et,kt);else{if(typeof window>"u")return void kt(new Error("RecaptchaVerifier is only supported in browser"));xn("https://www.google.com/recaptcha/enterprise.js?render="+qt).then(()=>{Se(qt,et,kt)}).catch(Dn=>{kt(Dn)})}}).catch(qt=>{kt(qt)})})})()}}function Vn(_,d,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(_,d,g,I=!1){const $=new Vi(_);let J;try{J=yield $.verify(g)}catch{J=yield $.verify(g,!0)}const Se=Object.assign({},d);return Object.assign(Se,I?{captchaResp:J}:{captchaResponse:J}),Object.assign(Se,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Se,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Se})).apply(this,arguments)}class Zs{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const I=J=>new Promise((Se,et)=>{try{Se(d(J))}catch(kt){et(kt)}});I.onAbort=g,this.queue.push(I);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===d)return;const I=[];try{for(const $ of g.queue)yield $(d),$.onAbort&&I.push($.onAbort)}catch($){I.reverse();for(const J of I)try{J()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class pi{constructor(d,g,I,$){this.app=d,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bi(this),this.idTokenSubscription=new Bi(this),this.beforeStateQueue=new Zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(d,g){var I=this;return g&&(this._popupRedirectResolver=K(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var $,J;if(!I._deleted&&(I.persistenceManager=yield oe.create(I,d),!I._deleted)){if(null!==($=I._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(J=I.currentUser)||void 0===J?void 0:J.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,h.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,h.Z)(function*(){var I;const $=yield g.assertedPersistence.getCurrentUser();let J=$,Se=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const et=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,kt=J?._redirectEventId,qt=yield g.tryRedirectSignIn(d);(!et||et===kt)&&qt?.user&&(J=qt.user,Se=!0)}if(!J)return g.directlySetCurrentUser(null);if(!J._redirectEventId){if(Se)try{yield g.beforeStateQueue.runMiddleware(J)}catch(et){J=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(et))}return J?g.reloadAndSetCurrentUserOrClear(J):g.directlySetCurrentUser(null)}return ve(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===J._redirectEventId?g.directlySetCurrentUser(J):g.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(d){var g=this;return(0,h.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,h.Z)(function*(){try{yield nr(d)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ye(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,h.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,h.Z)(function*(){const I=d?(0,L.m9)(d):null;return I&&ve(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(d,g=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return d&&ve(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,h.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(K(d))}))}initializeRecaptchaConfig(){var d=this;return(0,h.Z)(function*(){const g=yield ht(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Pn(g);null==d.tenantId?d._agentRecaptchaConfig=I:d._tenantRecaptchaConfigs[d.tenantId]=I,I.emailPasswordEnabled&&new Vi(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new L.LL("auth","Firebase",d())}onAuthStateChanged(d,g,I){return this.registerStateListener(this.authStateSubscription,d,g,I)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,I){return this.registerStateListener(this.idTokenSubscription,d,g,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var I=this;return(0,h.Z)(function*(){const $=yield I.getOrInitRedirectPersistenceManager(g);return null===d?$.removeCurrentUser():$.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const I=d&&K(d)||g._popupRedirectResolver;ve(I,g,"argument-error"),g.redirectPersistenceManager=yield oe.create(g,[K(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,h.Z)(function*(){var I,$;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===d?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,h.Z)(function*(){if(d===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,I,$){if(this._deleted)return()=>{};const J="function"==typeof g?g:g.next.bind(g),Se=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(Se,this,"internal-error"),Se.then(()=>J(this.currentUser)),"function"==typeof g?d.addObserver(g,I,$):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==d&&g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh(),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=tn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,h.Z)(function*(){var g;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const $=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();$&&(I["X-Firebase-Client"]=$);const J=yield d._getAppCheckToken();return J&&(I["X-Firebase-AppCheck"]=J),I})()}_getAppCheckToken(){var d=this;return(0,h.Z)(function*(){var g;const I=yield null===(g=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function Tt(_,...d){Oe.logLevel<=de.in.WARN&&Oe.warn(`Auth (${j.SDK_VERSION}): ${_}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function br(_){return(0,L.m9)(_)}class Bi{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nr(_,d,g){const I=br(_);ve(I._canInitEmulator,I,"emulator-config-failed"),ve(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const $=!!g?.disableWarnings,J=gi(d),{host:Se,port:et}=function Lr(_){const d=gi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(I);if($){const J=$[1];return{host:J,port:Tr(I.substr(J.length+1))}}{const[J,Se]=I.split(":");return{host:J,port:Tr(Se)}}}(d);I.config.emulator={url:`${J}//${Se}${null===et?"":`:${et}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Se,port:et,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Ps(){function _(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function gi(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function Tr(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class Ri{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return wt("not implemented")}_getIdTokenResponse(d){return wt("not implemented")}_linkToIdToken(d,g){return wt("not implemented")}_getReauthenticationResolver(d){return wt("not implemented")}}function Ns(_,d){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:resetPassword",dt(_,d))})).apply(this,arguments)}function ji(_,d){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function xo(_,d){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:update",dt(_,d))})).apply(this,arguments)}function Ha(_,d){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithPassword",dt(_,d))})).apply(this,arguments)}function ho(_,d){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:sendOobCode",dt(_,d))})).apply(this,arguments)}function po(_,d){return Te.apply(this,arguments)}function Te(){return(Te=(0,h.Z)(function*(_,d){return ho(_,d)})).apply(this,arguments)}function Ie(_,d){return ke.apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(_,d){return ho(_,d)})).apply(this,arguments)}function lt(_,d){return At.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(_,d){return ho(_,d)})).apply(this,arguments)}function Tn(_,d){return qn.apply(this,arguments)}function qn(){return(qn=(0,h.Z)(function*(_,d){return ho(_,d)})).apply(this,arguments)}function Nn(){return(Nn=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithEmailLink",dt(_,d))})).apply(this,arguments)}function Pi(){return(Pi=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithEmailLink",dt(_,d))})).apply(this,arguments)}class kr extends Ri{constructor(d,g,I,$=null){super("password",I),this._email=d,this._password=g,this._tenantId=$}static _fromEmailAndPassword(d,g){return new kr(d,g,"password")}static _fromEmailAndCode(d,g,I=null){return new kr(d,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,h.Z)(function*(){var I;switch(g.signInMethod){case"password":const $={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=d._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const J=yield Vn(d,$,"signInWithPassword");return Ha(d,J)}return Ha(d,$).catch(function(){var J=(0,h.Z)(function*(Se){if("auth/missing-recaptcha-token"===Se.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const et=yield Vn(d,$,"signInWithPassword");return Ha(d,et)}return Promise.reject(Se)});return function(Se){return J.apply(this,arguments)}}());case"emailLink":return function Zn(_,d){return Nn.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:he(d,"internal-error")}})()}_linkToIdToken(d,g){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return ji(d,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function $i(_,d){return Pi.apply(this,arguments)}(d,{idToken:g,email:I._email,oobCode:I._password});default:he(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Yn(_,d){return cs.apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithIdp",dt(_,d))})).apply(this,arguments)}class ci extends Ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new ci(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):he("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$}=g,J=(0,ge._T)(g,["providerId","signInMethod"]);if(!I||!$)return null;const Se=new ci(I,$);return Se.idToken=J.idToken||void 0,Se.accessToken=J.accessToken||void 0,Se.secret=J.secret,Se.nonce=J.nonce,Se.pendingToken=J.pendingToken||null,Se}_getIdTokenResponse(d){return Yn(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,Yn(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Yn(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,L.xO)(g)}return d}}function Es(_,d){return Os.apply(this,arguments)}function Os(){return(Os=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:sendVerificationCode",dt(_,d))})).apply(this,arguments)}function ds(){return(ds=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithPhoneNumber",dt(_,d))})).apply(this,arguments)}function Ro(){return(Ro=(0,h.Z)(function*(_,d){const g=yield ln(_,"POST","/v1/accounts:signInWithPhoneNumber",dt(_,d));if(g.temporaryProof)throw jn(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Qs={USER_NOT_FOUND:"user-not-found"};function Js(){return(Js=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithPhoneNumber",dt(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Qs)})).apply(this,arguments)}class Hr extends Ri{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new Hr({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new Hr({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function sa(_,d){return ds.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function zo(_,d){return Ro.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Ni(_,d){return Js.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:I,verificationCode:$}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:I,code:$}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}=d;return I||g||$||J?new Hr({verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}):null}}class Xs{constructor(d){var g,I,$,J,Se,et;const kt=(0,L.zd)((0,L.pd)(d)),qt=null!==(g=kt.apiKey)&&void 0!==g?g:null,Dn=null!==(I=kt.oobCode)&&void 0!==I?I:null,lr=function oi(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=kt.mode)&&void 0!==$?$:null);ve(qt&&Dn&&lr,"argument-error"),this.apiKey=qt,this.operation=lr,this.code=Dn,this.continueUrl=null!==(J=kt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(Se=kt.languageCode)&&void 0!==Se?Se:null,this.tenantId=null!==(et=kt.tenantId)&&void 0!==et?et:null}static parseLink(d){const g=function go(_){const d=(0,L.zd)((0,L.pd)(_)).link,g=d?(0,L.zd)((0,L.pd)(d)).deep_link_id:null,I=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(I?(0,L.zd)((0,L.pd)(I)).link:null)||I||g||d||_}(d);try{return new Xs(g)}catch{return null}}}let oa=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,I){return kr._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const $=Xs.parseLink(I);return ve($,"argument-error"),kr._fromEmailAndCode(g,$.code,$.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Er{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class hs extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class mo extends hs{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return ve("providerId"in g&&"signInMethod"in g,"argument-error"),ci._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ve(d.idToken||d.accessToken,"argument-error"),ci._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return mo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return mo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:$,pendingToken:J,nonce:Se,providerId:et}=d;if(!I&&!$&&!g&&!J||!et)return null;try{return new mo(et)._credential({idToken:g,accessToken:I,nonce:Se,pendingToken:J})}catch{return null}}}let fs=(()=>{class _ extends hs{constructor(){super("facebook.com")}static credential(g){return ci._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Wr=(()=>{class _ extends hs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return ci._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:$}=g;if(!I&&!$)return null;try{return _.credential(I,$)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Gi=(()=>{class _ extends hs{constructor(){super("github.com")}static credential(g){return ci._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class zi extends Ri{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return Yn(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,Yn(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Yn(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$,pendingToken:J}=g;return I&&$&&J&&I===$?new zi(I,J):null}static _create(d,g){return new zi(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vo extends Er{constructor(d){ve(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return vo.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return vo.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=zi.fromJSON(d);return ve(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:I}=d;if(!g||!I)return null;try{return zi._create(I,g)}catch{return null}}}let Po=(()=>{class _ extends hs{constructor(){super("twitter.com")}static credential(g,I){return ci._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:$}=g;if(!I||!$)return null;try{return _.credential(I,$)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function eo(_,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signUp",dt(_,d))})).apply(this,arguments)}class Kr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,I,$=!1){return(0,h.Z)(function*(){const J=yield sr._fromIdTokenResponse(d,I,$),Se=to(I);return new Kr({user:J,providerId:Se,_tokenResponse:I,operationType:g})})()}static _forOperation(d,g,I){return(0,h.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const $=to(I);return new Kr({user:d,providerId:$,_tokenResponse:I,operationType:g})})()}}function to(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function En(_){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(_){var d;const g=br(_);if(yield g._initializationPromise,null!==(d=g.currentUser)&&void 0!==d&&d.isAnonymous)return new Kr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield eo(g,{returnSecureToken:!0}),$=yield Kr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Fs extends L.ZR{constructor(d,g,I,$){var J;super(g.code,g.message),this.operationType=I,this.user=$,Object.setPrototypeOf(this,Fs.prototype),this.customData={appName:d.name,tenantId:null!==(J=d.tenantId)&&void 0!==J?J:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,g,I,$){return new Fs(d,g,I,$)}}function aa(_,d,g,I){return("reauthenticate"===d?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?Fs._fromErrorAndOperation(_,J,d,I):J})}function Ar(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function Oi(_,d){return _o.apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(_,d){const g=(0,L.m9)(_);yield gt(!0,g,d);const{providerUserInfo:I}=yield Wn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),$=Ar(I||[]);return g.providerData=g.providerData.filter(J=>$.has(J.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ci(_,d){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(_,d,g=!1){const I=yield an(_,d._linkToIdToken(_.auth,yield _.getIdToken()),g);return Kr._forOperation(_,"link",I)})).apply(this,arguments)}function gt(_,d,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(_,d,g){yield nr(d);const $=!1===_?"provider-already-linked":"no-such-provider";ve(Ar(d.providerData).has(g)===_,d.auth,$)})).apply(this,arguments)}function no(_,d){return ro.apply(this,arguments)}function ro(){return(ro=(0,h.Z)(function*(_,d,g=!1){const{auth:I}=_,$="reauthenticate";try{const J=yield an(_,aa(I,$,d,_),g);ve(J.idToken,I,"internal-error");const Se=dr(J.idToken);ve(Se,I,"internal-error");const{sub:et}=Se;return ve(_.uid===et,I,"user-mismatch"),Kr._forOperation(_,$,J)}catch(J){throw"auth/user-not-found"===J?.code&&he(I,"user-mismatch"),J}})).apply(this,arguments)}function Gr(_,d){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(_,d,g=!1){const I="signIn",$=yield aa(_,I,d),J=yield Kr._fromIdTokenResponse(_,I,$);return g||(yield _._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Wi(_,d){return es.apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(_,d){return Gr(br(_),d)})).apply(this,arguments)}function No(_,d){return ws.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(_,d){const g=(0,L.m9)(_);return yield gt(!1,g,d.providerId),Ci(g,d)})).apply(this,arguments)}function Is(_,d){return Br.apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(_,d){return no((0,L.m9)(_),d)})).apply(this,arguments)}function O(_,d){return R.apply(this,arguments)}function R(){return(R=(0,h.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithCustomToken",dt(_,d))})).apply(this,arguments)}function x(_,d){return Z.apply(this,arguments)}function Z(){return(Z=(0,h.Z)(function*(_,d){const g=br(_),I=yield O(g,{token:d,returnSecureToken:!0}),$=yield Kr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Qe{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?en._fromServerResponse(d,g):"totpInfo"in g?$n._fromServerResponse(d,g):he(d,"internal-error")}}class en extends Qe{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new en(g)}}class $n extends Qe{constructor(d){super("totp",d)}static _fromServerResponse(d,g){return new $n(g)}}function ti(_,d,g){var I;ve((null===(I=g.url)||void 0===I?void 0:I.length)>0,_,"invalid-continue-uri"),ve(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ve(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(ve(g.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function Ki(_,d,g){return bi.apply(this,arguments)}function bi(){return bi=(0,h.Z)(function*(_,d,g){var I;const $=br(_),J={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Se=yield Vn($,J,"getOobCode",!0);g&&ti($,Se,g),yield Ie($,Se)}else g&&ti($,J,g),yield Ie($,J).catch(function(){var Se=(0,h.Z)(function*(et){if("auth/missing-recaptcha-token"!==et.code)return Promise.reject(et);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const kt=yield Vn($,J,"getOobCode",!0);g&&ti($,kt,g),yield Ie($,kt)}});return function(et){return Se.apply(this,arguments)}}())}),bi.apply(this,arguments)}function Ds(_,d,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(_,d,g){yield Ns((0,L.m9)(_),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Eo(_,d){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(_,d){yield xo((0,L.m9)(_),{oobCode:d})})).apply(this,arguments)}function ki(_,d){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(_,d){const g=(0,L.m9)(_),I=yield Ns(g,{oobCode:d}),$=I.requestType;switch(ve($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(I.mfaInfo,g,"internal-error");default:ve(I.email,g,"internal-error")}let J=null;return I.mfaInfo&&(J=Qe._fromServerResponse(br(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:J},operation:$}})).apply(this,arguments)}function xa(_,d){return wo.apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(_,d){const{data:g}=yield ki((0,L.m9)(_),d);return g.email})).apply(this,arguments)}function Wo(_,d,g){return ko.apply(this,arguments)}function ko(){return ko=(0,h.Z)(function*(_,d,g){var I;const $=br(_),J={returnSecureToken:!0,email:d,password:g,clientType:"CLIENT_TYPE_WEB"};let Se;if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const qt=yield Vn($,J,"signUpPassword");Se=eo($,qt)}else Se=eo($,J).catch(function(){var qt=(0,h.Z)(function*(Dn){if("auth/missing-recaptcha-token"===Dn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const lr=yield Vn($,J,"signUpPassword");return eo($,lr)}return Promise.reject(Dn)});return function(Dn){return qt.apply(this,arguments)}}());const et=yield Se.catch(qt=>Promise.reject(qt)),kt=yield Kr._fromIdTokenResponse($,"signIn",et);return yield $._updateCurrentUser(kt.user),kt}),ko.apply(this,arguments)}function Ko(_,d,g){return Wi((0,L.m9)(_),oa.credential(d,g))}function Ti(_,d,g){return Us.apply(this,arguments)}function Us(){return Us=(0,h.Z)(function*(_,d,g){var I;const $=br(_),J={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function Se(et,kt){ve(kt.handleCodeInApp,$,"argument-error"),kt&&ti($,et,kt)}if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const et=yield Vn($,J,"getOobCode",!0);Se(et,g),yield lt($,et)}else Se(J,g),yield lt($,J).catch(function(){var et=(0,h.Z)(function*(kt){if("auth/missing-recaptcha-token"!==kt.code)return Promise.reject(kt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const qt=yield Vn($,J,"getOobCode",!0);Se(qt,g),yield lt($,qt)}});return function(kt){return et.apply(this,arguments)}}())}),Us.apply(this,arguments)}function la(_,d){return"EMAIL_SIGNIN"===Xs.parseLink(d)?.operation}function Io(_,d,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_),$=oa.credentialWithLink(d,g||yt());return ve($._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Wi(I,$)})).apply(this,arguments)}function mi(_,d){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:createAuthUri",dt(_,d))})).apply(this,arguments)}function wr(_,d){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(_,d){const I={identifier:d,continueUri:xt()?yt():"http://localhost"},{signinMethods:$}=yield mi((0,L.m9)(_),I);return $||[]})).apply(this,arguments)}function ca(_,d){return qi.apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(_,d){const g=(0,L.m9)(_),$={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&ti(g.auth,$,d);const{email:J}=yield po(g.auth,$);J!==_.email&&(yield _.reload())})).apply(this,arguments)}function qo(_,d,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};g&&ti(I.auth,J,g);const{email:Se}=yield Tn(I.auth,J);Se!==_.email&&(yield _.reload())})).apply(this,arguments)}function Cs(_,d){return ts.apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(_,d){return Et(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Zo(_,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(_,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const I=(0,L.m9)(_),J={idToken:yield I.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},Se=yield an(I,Cs(I.auth,J));I.displayName=Se.displayName||null,I.photoURL=Se.photoUrl||null;const et=I.providerData.find(({providerId:kt})=>"password"===kt);et&&(et.displayName=I.displayName,et.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Se)})).apply(this,arguments)}function Zi(_,d){return ns((0,L.m9)(_),d,null)}function yi(_,d){return ns((0,L.m9)(_),null,d)}function ns(_,d,g){return io.apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(_,d,g){const{auth:I}=_,J={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(J.email=d),g&&(J.password=g);const Se=yield an(_,ji(I,J));yield _._updateTokensIfNecessary(Se,!0)})).apply(this,arguments)}class oo{constructor(d,g,I={}){this.isNewUser=d,this.providerId=g,this.profile=I}}class Do extends oo{constructor(d,g,I,$){super(d,g,I),this.username=$}}class Lo extends oo{constructor(d,g){super(d,"facebook.com",g)}}class ou extends Do{constructor(d,g){super(d,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class b extends oo{constructor(d,g){super(d,"google.com",g)}}class V extends Do{constructor(d,g,I){super(d,"twitter.com",g,I)}}function M(_){const{user:d,_tokenResponse:g}=_;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function so(_){var d,g;if(!_)return null;const{providerId:I}=_,$=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},J=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!I&&_?.idToken){const Se=null===(g=null===(d=dr(_.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(Se)return new oo(J,"anonymous"!==Se&&"custom"!==Se?Se:null)}if(!I)return null;switch(I){case"facebook.com":return new Lo(J,$);case"github.com":return new ou(J,$);case"google.com":return new b(J,$);case"twitter.com":return new V(J,$,_.screenName||null);case"custom":case"anonymous":return new oo(J,null);default:return new oo(J,I,$)}}(g)}class On{constructor(d,g,I){this.type=d,this.credential=g,this.auth=I}static _fromIdtoken(d,g){return new On("enroll",d,g)}static _fromMfaPendingCredential(d){return new On("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,I;if(d?.multiFactorSession){if(null!==(g=d.multiFactorSession)&&void 0!==g&&g.pendingCredential)return On._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return On._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ni{constructor(d,g,I){this.session=d,this.hints=g,this.signInResolver=I}static _fromError(d,g){const I=br(d),$=g.customData._serverResponse,J=($.mfaInfo||[]).map(et=>Qe._fromServerResponse(I,et));ve($.mfaPendingCredential,I,"internal-error");const Se=On._fromMfaPendingCredential($.mfaPendingCredential);return new ni(Se,J,function(){var et=(0,h.Z)(function*(kt){const qt=yield kt._process(I,Se);delete $.mfaInfo,delete $.mfaPendingCredential;const Dn=Object.assign(Object.assign({},$),{idToken:qt.idToken,refreshToken:qt.refreshToken});switch(g.operationType){case"signIn":const lr=yield Kr._fromIdTokenResponse(I,g.operationType,Dn);return yield I._updateCurrentUser(lr.user),lr;case"reauthenticate":return ve(g.user,I,"internal-error"),Kr._forOperation(g.user,g.operationType,Dn);default:he(I,"internal-error")}});return function(kt){return et.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,h.Z)(function*(){return g.signInResolver(d)})()}}function js(_,d){var g;const I=(0,L.m9)(_),$=d;return ve(d.customData.operationType,I,"argument-error"),ve(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),ni._fromError(I,$)}function mt(_,d){return Et(_,"POST","/v2/accounts/mfaEnrollment:start",dt(_,d))}class nn{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>Qe._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new nn(d)}getSession(){var d=this;return(0,h.Z)(function*(){return On._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,g){var I=this;return(0,h.Z)(function*(){const $=d,J=yield I.getSession(),Se=yield an(I.user,$._process(I.user.auth,J,g));return yield I.user._updateTokensIfNecessary(Se),I.user.reload()})()}unenroll(d){var g=this;return(0,h.Z)(function*(){const I="string"==typeof d?d:d.uid,$=yield g.user.getIdToken();try{const J=yield an(g.user,function Kt(_,d){return Et(_,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(_,d))}(g.user.auth,{idToken:$,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Se})=>Se!==I),yield g.user._updateTokensIfNecessary(J),yield g.user.reload()}catch(J){throw J}})()}}const da=new WeakMap;function $t(_){const d=(0,L.m9)(_);return da.has(d)||da.set(d,nn._fromUser(d)),da.get(d)}const qe="__sak";class vt{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(qe,"1"),this.storage.removeItem(qe),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const nl=(()=>{class _ extends vt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ai(){const _=(0,L.z$)();return q(_)||re(_)}()&&function Pt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=He(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const $=this.storage.getItem(I),J=this.localCache[I];$!==J&&g(I,J,$)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((et,kt,qt)=>{this.notifyListeners(et,qt)});const $=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const et=this.storage.getItem($);if(g.newValue!==et)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!I)return}const J=()=>{const et=this.storage.getItem($);!I&&this.localCache[$]===et||this.notifyListeners($,et)},Se=this.storage.getItem($);!function Ae(){return(0,L.w1)()&&10===document.documentMode}()||Se===g.newValue||g.newValue===g.oldValue?J():setTimeout(J,10)}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var $=()=>super._set,J=this;return(0,h.Z)(function*(){yield $().call(J,g,I),J.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,$=this;return(0,h.Z)(function*(){const J=yield I().call($,g);return $.localCache[g]=JSON.stringify(J),J})()}_remove(g){var I=()=>super._remove,$=this;return(0,h.Z)(function*(){yield I().call($,g),delete $.localCache[g]})()}}return _.type="LOCAL",_})(),ha=(()=>{class _ extends vt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return _.type="SESSION",_})();let Nl=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(J=>J.isListeningto(g));if(I)return I;const $=new _(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,h.Z)(function*(){const $=g,{eventId:J,eventType:Se,data:et}=$.data,kt=I.handlersMap[Se];if(!kt?.size)return;$.ports[0].postMessage({status:"ack",eventId:J,eventType:Se});const qt=Array.from(kt).map(function(){var lr=(0,h.Z)(function*(Ao){return Ao($.origin,et)});return function(Ao){return lr.apply(this,arguments)}}()),Dn=yield function Pl(_){return Promise.all(_.map(function(){var d=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return d.apply(this,arguments)}}()))}(qt);$.ports[0].postMessage({status:"done",eventId:J,eventType:Se,response:Dn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function fa(_="",d=10){let g="";for(let I=0;I<d;I++)g+=Math.floor(10*Math.random());return _+g}class Wa{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,I=50){var $=this;return(0,h.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let Se,et;return new Promise((kt,qt)=>{const Dn=fa("",20);J.port1.start();const lr=setTimeout(()=>{qt(new Error("unsupported_event"))},I);et={messageChannel:J,onMessage(Ao){const zs=Ao;if(zs.data.eventId===Dn)switch(zs.data.status){case"ack":clearTimeout(lr),Se=setTimeout(()=>{qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Se),kt(zs.data.response);break;default:clearTimeout(lr),clearTimeout(Se),qt(new Error("invalid_response"))}}},$.handlers.add(et),J.port1.addEventListener("message",et.onMessage),$.target.postMessage({eventType:d,eventId:Dn,data:g},[J.port2])}).finally(()=>{et&&$.removeMessageHandler(et)})})()}}function ui(){return window}function Co(){return typeof ui().WorkerGlobalScope<"u"&&"function"==typeof ui().importScripts}function Rr(){return(Rr=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const In="firebaseLocalStorageDb",Xn="firebaseLocalStorage",Ht="fbase_key";class gs{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ga(_,d){return _.transaction([Xn],d?"readwrite":"readonly").objectStore(Xn)}function yr(){const _=indexedDB.open(In,1);return new Promise((d,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const I=_.result;try{I.createObjectStore(Xn,{keyPath:Ht})}catch($){g($)}}),_.addEventListener("success",(0,h.Z)(function*(){const I=_.result;I.objectStoreNames.contains(Xn)?d(I):(I.close(),yield function Qo(){const _=indexedDB.deleteDatabase(In);return new gs(_).toPromise()}(),d(yield yr()))}))})}function Pu(_,d,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(_,d,g){const I=ga(_,!0).put({[Ht]:d,value:g});return new gs(I).toPromise()})).apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(_,d){const g=ga(_,!1).get(d),I=yield new gs(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ol(_,d){const g=ga(_,!0).delete(d);return new gs(g).toPromise()}const rl=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield yr()),g.db})()}_withRetries(g){var I=this;return(0,h.Z)(function*(){let $=0;for(;;)try{const J=yield I._openDb();return yield g(J)}catch(J){if($++>3)throw J;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Co()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=Nl._getInstance(function $s(){return Co()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*($,J){return{keyProcessed:(yield g._poll()).includes(J.key)}});return function($,J){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*($,J){return["keyChanged"]});return function($,J){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var I,$;if(g.activeServiceWorker=yield function Ru(){return Rr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Wa(g.activeServiceWorker);const J=yield g.sender._send("ping",{},800);!J||(null===(I=J[0])||void 0===I?void 0:I.fulfilled)&&(null===($=J[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function dn(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield yr();return yield Pu(g,qe,"1"),yield Ol(g,qe),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var $=this;return(0,h.Z)(function*(){return $._withPendingWrite((0,h.Z)(function*(){return yield $._withRetries(J=>Pu(J,g,I)),$.localCache[g]=I,$.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,h.Z)(function*(){const $=yield I._withRetries(J=>function Vo(_,d){return ma.apply(this,arguments)}(J,g));return I.localCache[g]=$,$})()}_remove(g){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries($=>Ol($,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const I=yield g._withRetries(Se=>{const et=ga(Se,!1).getAll();return new gs(et).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const $=[],J=new Set;for(const{fbase_key:Se,value:et}of I)J.add(Se),JSON.stringify(g.localCache[Se])!==JSON.stringify(et)&&(g.notifyListeners(Se,et),$.push(Se));for(const Se of Object.keys(g.localCache))g.localCache[Se]&&!J.has(Se)&&(g.notifyListeners(Se,null),$.push(Se));return $})()}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function va(_,d){return Et(_,"POST","/v2/accounts/mfaSignIn:start",dt(_,d))}const _a=1e12;class Ai{constructor(d){this.auth=d,this.counter=_a,this._widgets=new Map}render(d,g){const I=this.counter;return this._widgets.set(I,new Si(d,this.auth.name,g||{})),this.counter++,I}reset(d){var g;const I=d||_a;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(d){var g;return(null===(g=this._widgets.get(d||_a))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,h.Z)(function*(){var I;return null===(I=g._widgets.get(d||_a))||void 0===I||I.execute(),""})()}}class Si{constructor(d,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof d?document.getElementById(d):d;ve($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function au(_){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<_;I++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hs=Zr("rcb"),Ra=new Pe(3e4,6e4);class Ou{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=ui().grecaptcha)||void 0===d||!d.render)}load(d,g=""){return ve(function kl(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),d,"argument-error"),this.shouldResolveImmediately(g)&&pn(ui().grecaptcha)?Promise.resolve(ui().grecaptcha):new Promise((I,$)=>{const J=ui().setTimeout(()=>{$(rt(d,"network-request-failed"))},Ra.get());ui()[Hs]=()=>{ui().clearTimeout(J),delete ui()[Hs];const et=ui().grecaptcha;if(!et||!pn(et))return void $(rt(d,"internal-error"));const kt=et.render;et.render=(qt,Dn)=>{const lr=kt(qt,Dn);return this.counter++,lr},this.hostLanguage=g,I(et)},xn(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Hs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(J),$(rt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var g;return!(null===(g=ui().grecaptcha)||void 0===g||!g.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ms{load(d){return(0,h.Z)(function*(){return new Ai(d)})()}clearedOneInstance(){}}const qa="recaptcha",Uo={theme:"light",type:"image"};class ys{constructor(d,g=Object.assign({},Uo),I){this.parameters=g,this.type=qa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=br(I),this.isInvisible="invisible"===this.parameters.size,ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof d?document.getElementById(d):d;ve($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ms:new Ou,this.validateStartingState()}verify(){var d=this;return(0,h.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(g)||new Promise(J=>{const Se=et=>{!et||(d.tokenChangeListeners.delete(Se),J(et))};d.tokenChangeListeners.add(Se),d.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof d)d(g);else if("string"==typeof d){const I=ui()[d];"function"==typeof I&&I(g)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,h.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,h.Z)(function*(){ve(xt()&&!Co(),d.auth,"internal-error"),yield function vi(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function Me(_){return Re.apply(this,arguments)}(d.auth);ve(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class v{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=Hr._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function E(_,d,g){return y.apply(this,arguments)}function y(){return(y=(0,h.Z)(function*(_,d,g){const I=br(_),$=yield fe(I,d,(0,L.m9)(g));return new v($,J=>Wi(I,J))})).apply(this,arguments)}function T(_,d,g){return P.apply(this,arguments)}function P(){return(P=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_);yield gt(!1,I,"phone");const $=yield fe(I.auth,d,(0,L.m9)(g));return new v($,J=>No(I,J))})).apply(this,arguments)}function G(_,d,g){return le.apply(this,arguments)}function le(){return(le=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_),$=yield fe(I.auth,d,(0,L.m9)(g));return new v($,J=>Is(I,J))})).apply(this,arguments)}function fe(_,d,g){return nt.apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(_,d,g){var I;const $=yield g.verify();try{let J;if(ve("string"==typeof $,_,"argument-error"),ve(g.type===qa,_,"argument-error"),J="string"==typeof d?{phoneNumber:d}:d,"session"in J){const Se=J.session;if("phoneNumber"in J)return ve("enroll"===Se.type,_,"internal-error"),(yield mt(_,{idToken:Se.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{ve("signin"===Se.type,_,"internal-error");const et=(null===(I=J.multiFactorHint)||void 0===I?void 0:I.uid)||J.multiFactorUid;return ve(et,_,"missing-multi-factor-info"),(yield va(_,{mfaPendingCredential:Se.credential,mfaEnrollmentId:et,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Se}=yield Es(_,{phoneNumber:J.phoneNumber,recaptchaToken:$});return Se}}finally{g._reset()}})).apply(this,arguments)}function Lt(_,d){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(_,d){yield Ci((0,L.m9)(_),d)})).apply(this,arguments)}let sn=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=br(g)}verifyPhoneNumber(g,I){return fe(this.auth,g,(0,L.m9)(I))}static credential(g,I){return Hr._fromVerification(g,I)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:$}=g;return I&&$?Hr._fromTokenResponse(I,$):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Kn(_,d){return d?K(d):(ve(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Mi extends Ri{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Yn(d,this._buildIdpRequest())}_linkToIdToken(d,g){return Yn(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return Yn(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function li(_){return Gr(_.auth,new Mi(_),_.bypassAuthState)}function Xo(_){const{auth:d,user:g}=_;return ve(g,d,"internal-error"),no(g,new Mi(_),_.bypassAuthState)}function Gs(_){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,h.Z)(function*(_){const{auth:d,user:g}=_;return ve(g,d,"internal-error"),Ci(g,new Mi(_),_.bypassAuthState)})).apply(this,arguments)}class ea{constructor(d,g,I,$,J=!1){this.auth=d,this.resolver=I,this.user=$,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,h.Z)(function*(I,$){d.pendingPromise={resolve:I,reject:$};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(J){d.reject(J)}});return function(I,$){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:$,postBody:J,tenantId:Se,error:et,type:kt}=d;if(et)return void g.reject(et);const qt={auth:g.auth,requestUri:I,sessionId:$,tenantId:Se||void 0,postBody:J||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(kt)(qt))}catch(Dn){g.reject(Dn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return li;case"linkViaPopup":case"linkViaRedirect":return Gs;case"reauthViaPopup":case"reauthViaRedirect":return Xo;default:he(this.auth,"internal-error")}}resolve(d){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pa=new Pe(2e3,1e4);function Ts(_,d,g){return lu.apply(this,arguments)}function lu(){return(lu=(0,h.Z)(function*(_,d,g){const I=br(_);Ne(_,d,Er);const $=Kn(I,g);return new wa(I,"signInViaPopup",d,$).executeNotNull()})).apply(this,arguments)}function Fi(_,d,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_);Ne(I.auth,d,Er);const $=Kn(I.auth,g);return new wa(I.auth,"reauthViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}function Fl(_,d,g){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_);Ne(I.auth,d,Er);const $=Kn(I.auth,g);return new wa(I.auth,"linkViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}let wa=(()=>{class _ extends ea{constructor(g,I,$,J,Se){super(g,I,J,Se),this.provider=$,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const I=yield g.execute();return ve(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,h.Z)(function*(){jt(1===g.filter.length,"Popup operations only handle one event");const I=fa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(rt(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,$;this.pollId=null!==($=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Pa.get())};g()}}return _.currentPopupAction=null,_})();const Na=new Map;class Za extends ea{constructor(d,g,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,h.Z)(function*(){let I=Na.get(g.auth._key());if(!I){try{const J=(yield function Ll(_,d){return vr.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;I=()=>Promise.resolve(J)}catch($){I=()=>Promise.reject($)}Na.set(g.auth._key(),I)}return g.bypassAuthState||Na.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(I,d);if("unknown"!==d.type){if(d.eventId){const $=yield I.auth._redirectUserForId(d.eventId);if($)return I.user=$,g().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function vr(){return(vr=(0,h.Z)(function*(_,d){const g=rs(d),I=Bo(_);if(!(yield I._isAvailable()))return!1;const $="true"===(yield I._get(g));return yield I._remove(g),$})).apply(this,arguments)}function cu(_,d){return hi.apply(this,arguments)}function hi(){return(hi=(0,h.Z)(function*(_,d){return Bo(_)._set(rs(d),"true")})).apply(this,arguments)}function ii(){Na.clear()}function Vl(_,d){Na.set(_._key(),d)}function Bo(_){return K(_._redirectPersistence)}function rs(_){return It("pendingRedirect",_.config.apiKey,_.name)}function sl(_,d,g){return function Tc(_,d,g){return _i.apply(this,arguments)}(_,d,g)}function _i(){return(_i=(0,h.Z)(function*(_,d,g){const I=br(_);Ne(_,d,Er),yield I._initializationPromise;const $=Kn(I,g);return yield cu($,I),$._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function du(_,d,g){return function bo(_,d,g){return si.apply(this,arguments)}(_,d,g)}function si(){return(si=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_);Ne(I.auth,d,Er),yield I.auth._initializationPromise;const $=Kn(I.auth,g);yield cu($,I.auth);const J=yield ka(I);return $._openRedirect(I.auth,d,"reauthViaRedirect",J)})).apply(this,arguments)}function Oa(_,d,g){return function Fu(_,d,g){return Lu.apply(this,arguments)}(_,d,g)}function Lu(){return(Lu=(0,h.Z)(function*(_,d,g){const I=(0,L.m9)(_);Ne(I.auth,d,Er),yield I.auth._initializationPromise;const $=Kn(I.auth,g);yield gt(!1,I,d.providerId),yield cu($,I.auth);const J=yield ka(I);return $._openRedirect(I.auth,d,"linkViaRedirect",J)})).apply(this,arguments)}function ol(_,d){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,h.Z)(function*(_,d){return yield br(_)._initializationPromise,ta(_,d,!1)})).apply(this,arguments)}function ta(_,d){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(_,d,g=!1){const I=br(_),$=Kn(I,d),Se=yield new Za(I,$,g).execute();return Se&&!g&&(delete Se.user._redirectEventId,yield I._persistUserIfCurrent(Se.user),yield I._setRedirectUser(null,d)),Se})).apply(this,arguments)}function ka(_){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(_){const d=fa(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Ia{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(g=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ya(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hu(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var I;if(d.error&&!hu(d)){const $=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(rt(this.auth,$))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const I=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ra(d))}saveEventToCache(d){this.cachedEventUids.add(ra(d)),this.lastProcessedEventTime=Date.now()}}function ra(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function hu({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===d?.code}function fu(_){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,h.Z)(function*(_,d={}){return Et(_,"GET","/v1/projects",d)})).apply(this,arguments)}const Fa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function pu(){return(pu=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield fu(_);for(const g of d)try{if(gu(g))return}catch{}he(_,"unauthorized-domain")})).apply(this,arguments)}function gu(_){const d=yt(),{protocol:g,hostname:I}=new URL(d);if(_.startsWith("chrome-extension://")){const Se=new URL(_);return""===Se.hostname&&""===I?"chrome-extension:"===g&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&Se.hostname===I}if(!ed.test(g))return!1;if(Fa.test(_))return I===_;const $=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(I)}const ul=new Pe(3e4,6e4);function Uu(){const _=ui().___jsl;if(_?.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Da=null;function nd(_){return Da=Da||function td(_){return new Promise((d,g)=>{var I,$,J;function Se(){Uu(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Uu(),g(rt(_,"network-request-failed"))},timeout:ul.get()})}if(null!==($=null===(I=ui().gapi)||void 0===I?void 0:I.iframes)&&void 0!==$&&$.Iframe)d(gapi.iframes.getContext());else{if(null===(J=ui().gapi)||void 0===J||!J.load){const et=Zr("iframefcb");return ui()[et]=()=>{gapi.load?Se():g(rt(_,"network-request-failed"))},xn(`https://apis.google.com/js/api.js?onload=${et}`).catch(kt=>g(kt))}Se()}}).catch(d=>{throw Da=null,d})}(_),Da}const Ca=new Pe(5e3,15e3),ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ss(_){const d=_.config;ve(d.authDomain,_,"auth-domain-config-required");const g=d.emulator?Fe(d,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:_.name,v:j.SDK_VERSION},$=qr.get(_.config.apiHost);$&&(I.eid=$);const J=_._getFrameworks();return J.length&&(I.fw=J.join(",")),`${g}?${(0,L.xO)(I).slice(1)}`}function w(){return w=(0,h.Z)(function*(_){const d=yield nd(_),g=ui().gapi;return ve(g,_,"internal-error"),d.open({where:document.body,url:ss(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ll,dontclear:!0},I=>new Promise(function(){var $=(0,h.Z)(function*(J,Se){yield I.restyle({setHideOnLeave:!1});const et=rt(_,"network-request-failed"),kt=ui().setTimeout(()=>{Se(et)},Ca.get());function qt(){ui().clearTimeout(kt),J(I)}I.ping(qt).then(qt,()=>{Se(et)})});return function(J,Se){return $.apply(this,arguments)}}()))}),w.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class it{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kn=encodeURIComponent("fac");function vs(_,d,g,I,$,J){return fi.apply(this,arguments)}function fi(){return(fi=(0,h.Z)(function*(_,d,g,I,$,J){ve(_.config.authDomain,_,"auth-domain-config-required"),ve(_.config.apiKey,_,"invalid-api-key");const Se={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:I,v:j.SDK_VERSION,eventId:$};if(d instanceof Er){d.setDefaultLanguage(_.languageCode),Se.providerId=d.providerId||"",(0,L.xb)(d.getCustomParameters())||(Se.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Dn,lr]of Object.entries(J||{}))Se[Dn]=lr}if(d instanceof hs){const Dn=d.getScopes().filter(lr=>""!==lr);Dn.length>0&&(Se.scopes=Dn.join(","))}_.tenantId&&(Se.tid=_.tenantId);const et=Se;for(const Dn of Object.keys(et))void 0===et[Dn]&&delete et[Dn];const kt=yield _._getAppCheckToken(),qt=kt?`#${kn}=${encodeURIComponent(kt)}`:"";return`${Li(_)}?${(0,L.xO)(et).slice(1)}${qt}`})).apply(this,arguments)}function Li({config:_}){return _.emulator?Fe(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}const ba="webStorageSupport",co=class mu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ha,this._completeRedirectFn=ta,this._overrideRedirectResult=Vl}_openPopup(d,g,I,$){var J=this;return(0,h.Z)(function*(){var Se;jt(null===(Se=J.eventManagers[d._key()])||void 0===Se?void 0:Se.manager,"_initialize() not called before _openPopup()");const et=yield vs(d,g,I,yt(),$);return function Wt(_,d,g,I=500,$=600){const J=Math.max((window.screen.availHeight-$)/2,0).toString(),Se=Math.max((window.screen.availWidth-I)/2,0).toString();let et="";const kt=Object.assign(Object.assign({},A),{width:I.toString(),height:$.toString(),top:J,left:Se}),qt=(0,L.z$)().toLowerCase();g&&(et=H(qt)?"_blank":g),Y(qt)&&(d=d||"http://localhost",kt.scrollbars="yes");const Dn=Object.entries(kt).reduce((Ao,[zs,$l])=>`${Ao}${zs}=${$l},`,"");if(function X(_=(0,L.z$)()){var d;return re(_)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(qt)&&"_self"!==et)return function Ut(_,d){const g=document.createElement("a");g.href=_,g.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(d||"",et),new it(null);const lr=window.open(d||"",et,Dn);ve(lr,_,"popup-blocked");try{lr.focus()}catch{}return new it(lr)}(d,et,fa())})()}_openRedirect(d,g,I,$){var J=this;return(0,h.Z)(function*(){return yield J._originValidation(d),function rn(_){ui().location.href=_}(yield vs(d,g,I,yt(),$)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:$,promise:J}=this.eventManagers[g];return $?Promise.resolve($):(jt(J,"If manager is not set, promise should be"),J)}const I=this.initAndGetManager(d);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(d){var g=this;return(0,h.Z)(function*(){const I=yield function rd(_){return w.apply(this,arguments)}(d),$=new Ia(d);return I.register("authEvent",J=>(ve(J?.authEvent,d,"invalid-auth-event"),{status:$.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:$},g.iframes[d._key()]=I,$})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(ba,{type:ba},$=>{var J;const Se=null===(J=$?.[0])||void 0===J?void 0:J[ba];void 0!==Se&&g(!!Se),he(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function al(_){return pu.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return He()||q()||re()}};class yu extends class La{constructor(d){this.factorId=d}_process(d,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,I);case"signin":return this._finalizeSignIn(d,g.credential);default:return wt("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new yu(d)}_finalizeEnroll(d,g,I){return function pr(_,d){return Et(_,"POST","/v2/accounts/mfaEnrollment:finalize",dt(_,d))}(d,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function ri(_,d){return Et(_,"POST","/v2/accounts/mfaSignIn:finalize",dt(_,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rf=(()=>{class _{constructor(){}static assertion(g){return yu._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var cl="@firebase/auth";class dl{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);!g||(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,L.Pz)("authIdTokenMaxAge"),function sd(_){(0,j._registerComponent)(new me.wA("auth",(d,{options:g})=>{const I=d.getProvider("app").getImmediate(),$=d.getProvider("heartbeat"),J=d.getProvider("app-check-internal"),{apiKey:Se,authDomain:et}=I.options;ve(Se&&!Se.includes(":"),"invalid-api-key",{appName:I.name});const kt={apiKey:Se,authDomain:et,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tn(_)},qt=new pi(I,$,J,kt);return function us(_,d){const g=d?.persistence||[],I=(Array.isArray(g)?g:[g]).map(K);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(I,d?.popupRedirectResolver)}(qt,g),qt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,I)=>{d.getProvider("auth-internal").initialize()})),(0,j._registerComponent)(new me.wA("auth-internal",d=>{const g=br(d.getProvider("auth").getImmediate());return new dl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,j.registerVersion)(cl,"0.23.2",function lh(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,j.registerVersion)(cl,"0.23.2","esm2017")}("Browser")},2810:(Bt,ze,k)=>{k.d(ze,{u7:()=>sg,Jj:()=>vc,IX:()=>Cm,my:()=>wi,xU:()=>Ic,Lz:()=>Sl,WA:()=>vt,F8:()=>yf,$q:()=>sh,W:()=>Dc,EK:()=>Rr,PU:()=>og,l7:()=>ta,Ky:()=>Ht,Xb:()=>Xn,Cf:()=>Ir,K9:()=>da,Me:()=>Tc,yq:()=>xr,Wi:()=>Em,ET:()=>Cc,Ab:()=>Jv,vr:()=>my,Fc:()=>Tm,hJ:()=>Kp,B$:()=>qp,at:()=>qd,oe:()=>uy,AK:()=>py,TF:()=>Sm,JU:()=>Zp,ST:()=>Uv,fH:()=>Bv,Ix:()=>Am,Wu:()=>Km,Lx:()=>Wm,qY:()=>Ji,GL:()=>su,QT:()=>ey,kl:()=>ty,Xk:()=>ny,PL:()=>ry,UQ:()=>iy,zN:()=>sy,nP:()=>Xv,b9:()=>Df,vh:()=>rg,Pb:()=>Mm,L$:()=>xm,cf:()=>qv,sc:()=>Zv,Xo:()=>Hm,IO:()=>jm,iE:()=>Zd,Eo:()=>Im,i3:()=>fy,Bt:()=>gy,pl:()=>oy,Ub:()=>js,qK:()=>Xm,TQ:()=>zm,e0:()=>Gm,r7:()=>ay,Mx:()=>Jp,ar:()=>$m});var se,h=k(5861),L=k(6881),j=k(4859),ge=k(1877),de=k(2090),me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},we={},xe=xe||{},ee=me||self;function ne(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ee(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var je="closure_uid_"+(1e9*Math.random()>>>0),Le=0;function Dt(i,e,t){return i.call.apply(i.bind,arguments)}function We(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function Oe(i,e,t){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dt:We).apply(null,arguments)}function Tt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function _t(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(s,a,c){for(var p=Array(arguments.length-2),D=2;D<arguments.length;D++)p[D-2]=arguments[D];return e.prototype[a].apply(s,p)}}function he(){this.s=this.s,this.o=this.o}he.prototype.s=!1,he.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ze(i){Object.prototype.hasOwnProperty.call(i,je)&&i[je]||(i[je]=++Le)}(this)},he.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xe=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Ne(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function ot(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ne(s)){const a=i.length||0,c=s.length||0;i.length=a+c;for(let p=0;p<c;p++)i[a+p]=s[p]}else i.push(s)}}function ve(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var wt=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ee.addEventListener("test",()=>{},e),ee.removeEventListener("test",()=>{},e)}catch{}return i}();function jt(i){return/^[\s\xa0]*$/.test(i)}function yt(){var i=ee.navigator;return i&&(i=i.userAgent)?i:""}function xt(i){return-1!=yt().indexOf(i)}function Rt(i){return Rt[" "](i),i}Rt[" "]=function(){};var Et,i,Ye=xt("Opera"),Pe=xt("Trident")||xt("MSIE"),Fe=xt("Edge"),$e=Fe||Pe,Ke=xt("Gecko")&&!(-1!=yt().toLowerCase().indexOf("webkit")&&!xt("Edge"))&&!(xt("Trident")||xt("MSIE"))&&!xt("Edge"),at=-1!=yt().toLowerCase().indexOf("webkit")&&!xt("Edge");function dt(){var i=ee.document;return i?i.documentMode:void 0}e:{var Vt="",St=(i=yt(),Ke?/rv:([^\);]+)(\)|;)/.exec(i):Fe?/Edge\/([\d\.]+)/.exec(i):Pe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):at?/WebKit\/(\S+)/.exec(i):Ye?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(St&&(Vt=St?St[1]:""),Pe){var Zt=dt();if(null!=Zt&&Zt>parseFloat(Vt)){Et=String(Zt);break e}}Et=Vt}var zn=ee.document&&Pe&&(dt()||parseInt(Et,10))||void 0;function tr(i,e){if(ve.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ke){e:{try{Rt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:jn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&tr.$.h.call(this)}}_t(tr,ve);var jn={2:"touch",3:"pen",4:"mouse"};tr.prototype.h=function(){tr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Bn="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function Wn(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Gt,this.fa=this.ia=!1}function Cr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function cr(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function An(i){const e={};for(const t in i)e[t]=i[t];return e}const hn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jn(i,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)i[t]=s[t];for(let c=0;c<hn.length;c++)t=hn[c],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function jr(i){this.src=i,this.g={},this.h=0}function $r(i,e){var t=e.type;if(t in i.g){var c,s=i.g[t],a=Xe(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(Cr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function dr(i,e,t,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}jr.prototype.add=function(i,e,t,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var p=dr(i,e,s,a);return-1<p?(e=i[p],t||(e.ia=!1)):((e=new Wn(e,this.src,c,!!s,a)).ia=t,i.push(e)),e};var _n="closure_lm_"+(1e6*Math.random()|0),an={};function zt(i,e,t,s,a){if(s&&s.once)return hr(i,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)zt(i,e[c],t,s,a);return null}return t=Sn(t),i&&i[Bn]?i.O(e,t,Ee(s)?!!s.capture:!!s,a):Jt(i,e,t,!1,s,a)}function Jt(i,e,t,s,a,c){if(!e)throw Error("Invalid event type");var p=Ee(a)?!!a.capture:!!a,D=wn(i);if(D||(i[_n]=D=new jr(i)),(t=D.add(e,t,s,p,c)).proxy)return t;if(s=function Rn(){const e=gr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)wt||(a=p),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(un(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function hr(i,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)hr(i,e[c],t,s,a);return null}return t=Sn(t),i&&i[Bn]?i.P(e,t,Ee(s)?!!s.capture:!!s,a):Jt(i,e,t,!0,s,a)}function nr(i,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)nr(i,e[c],t,s,a);else s=Ee(s)?!!s.capture:!!s,t=Sn(t),i&&i[Bn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=dr(c=i.g[e],t,s,a))&&(Cr(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=wn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=dr(e,t,s,a)),(t=-1<i?e[i]:null)&&fr(t))}function fr(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Bn])$r(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(un(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=wn(e))?($r(t,i),0==t.h&&(t.src=null,e[_n]=null)):Cr(i)}}}function un(i){return i in an?an[i]:an[i]="on"+i}function gr(i,e){if(i.fa)i=!0;else{e=new tr(e,this);var t=i.listener,s=i.la||i.src;i.ia&&fr(i),i=t.call(s,e)}return i}function wn(i){return(i=i[_n])instanceof jr?i:null}var zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sn(i){return"function"==typeof i?i:(i[zr]||(i[zr]=function(e){return i.handleEvent(e)}),i[zr])}function bn(){he.call(this),this.i=new jr(this),this.S=this,this.J=null}function Nt(i,e){var t,s=i.J;if(s)for(t=[];s;s=s.J)t.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new ve(e,i);else if(e instanceof ve)e.target=e.target||i;else{var a=e;Jn(e=new ve(s,i),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=rr(p,s,!0,e)&&a}if(a=rr(p=e.g=i,s,!0,e)&&a,a=rr(p,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=rr(p=e.g=t[c],s,!1,e)&&a}function rr(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.fa&&p.capture==t){var D=p.listener,N=p.la||p.src;p.ia&&$r(i.i,p),a=!1!==D.call(N,s)&&a}}return a&&!s.defaultPrevented}_t(bn,he),bn.prototype[Bn]=!0,bn.prototype.removeEventListener=function(i,e,t,s){nr(this,i,e,t,s)},bn.prototype.N=function(){if(bn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Cr(t[s]);delete i.g[e],i.h--}}this.J=null},bn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},bn.prototype.P=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var sr=ee.JSON.stringify;function K(){var i=H;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ve=new class tt{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new It,i=>i.reset());class It{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oe(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function ue(i){ee.setTimeout(()=>{throw i},0)}let Y,q=!1,H=new class ce{constructor(){this.h=this.g=null}add(e,t){const s=Ve.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},De=()=>{const i=ee.Promise.resolve(void 0);Y=()=>{i.then(st)}};var st=()=>{for(var i;i=K();){try{i.h.call(i.g)}catch(t){ue(t)}var e=Ve;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}q=!1};function Mt(i,e){bn.call(this),this.h=i||1,this.g=e||ee,this.j=Oe(this.qb,this),this.l=Date.now()}function Yt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function re(i,e,t){if("function"==typeof i)t&&(i=Oe(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Oe(i.handleEvent,i)}return 2147483647<Number(e)?-1:ee.setTimeout(i,e||0)}function ae(i){i.g=re(()=>{i.g=null,i.i&&(i.i=!1,ae(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}_t(Mt,bn),(se=Mt.prototype).ga=!1,se.T=null,se.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nt(this,"tick"),this.ga&&(Yt(this),this.start()))}},se.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},se.N=function(){Mt.$.N.call(this),Yt(this),delete this.g};class X extends he{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ae(i){he.call(this),this.h=i,this.g={}}_t(Ae,he);var He=[];function Pt(i,e,t,s){Array.isArray(t)||(t&&(He[0]=t.toString()),t=He);for(var a=0;a<t.length;a++){var c=zt(e,t[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function tn(i){cr(i.g,function(e,t){this.g.hasOwnProperty(t)&&fr(e)},i),i.g={}}function Me(){this.g=!0}function ft(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vn(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return sr(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Ae.prototype.N=function(){Ae.$.N.call(this),tn(this)},Ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Me.prototype.Ea=function(){this.g=!1},Me.prototype.info=function(){};var Pn={},Pr=null;function xn(){return Pr=Pr||new bn}function Zr(i){ve.call(this,Pn.Ta,i)}function Yr(i){const e=xn();Nt(e,new Zr(e))}function Qr(i,e){ve.call(this,Pn.STAT_EVENT,i),this.stat=e}function Fr(i){const e=xn();Nt(e,new Qr(e,i))}function Vi(i,e){ve.call(this,Pn.Ua,i),this.size=e}function Vn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){i()},e)}Pn.Ta="serverreachability",_t(Zr,ve),Pn.STAT_EVENT="statevent",_t(Qr,ve),Pn.Ua="timingevent",_t(Vi,ve);var Ui={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pi(){}function Bi(){}pi.prototype.h=null;var gi,Di={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function us(){ve.call(this,"d")}function Nr(){ve.call(this,"c")}function Lr(){}function Tr(i,e,t,s){this.l=i,this.j=e,this.m=t,this.W=s||1,this.U=new Ae(this),this.P=Ri,this.V=new Mt(i=$e?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ps}function Ps(){this.i=null,this.g="",this.h=!1}_t(us,ve),_t(Nr,ve),_t(Lr,pi),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},gi=new Lr;var Ri=45e3,Ns={},Or={};function ji(i,e,t){i.L=1,i.v=cs(Nn(e)),i.s=t,i.S=!0,ls(i,null)}function ls(i,e){i.G=Date.now(),ar(i),i.A=Nn(i.v);var t=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),oi(t.i,"t",s),i.C=0,t=i.l.J,i.h=new Ps,i.g=Wo(i.l,t?e:null,!i.s),0<i.O&&(i.M=new X(Oe(i.Pa,i,i.g),i.O)),Pt(i.U,i.g,"readystatechange",i.nb),e=i.I?An(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Yr(),function Re(i,e,t,s,a,c){i.info(function(){if(i.g)if(c)for(var p="",D=c.split("&"),N=0;N<D.length;N++){var U=D[N].split("=");if(1<U.length){var Q=U[0];U=U[1];var ye=Q.split("_");p=2<=ye.length&&"type"==ye[1]?p+(Q+"=")+U+"&":p+(Q+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(i.j,i.u,i.A,i.m,i.W,i.s)}function xo(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ys(i,e,t){let a,s=!0;for(;!i.J&&i.C<t.length;){if(a=Ha(i,t),a==Or){4==e&&(i.o=4,Fr(14),s=!1),ft(i.j,i.m,null,"[Incomplete Response]");break}if(a==Ns){i.o=4,Fr(15),ft(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}ft(i.j,i.m,a,null),Ie(i,a)}xo(i)&&a!=Or&&a!=Ns&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Fr(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ds(e),e.M=!0,Fr(11))):(ft(i.j,i.m,t,"[Invalid Chunked Response]"),Te(i),po(i))}function Ha(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Or:(t=Number(e.substring(t,s)),isNaN(t)?Ns:(s+=1)+t>e.length?Or:(e=e.slice(s,s+t),i.C=s+t,e))}function ar(i){i.Y=Date.now()+i.P,ho(i,i.P)}function ho(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Vn(Oe(i.lb,i),e)}function fo(i){i.B&&(ee.clearTimeout(i.B),i.B=null)}function po(i){0==i.l.H||i.J||Oo(i.l,i)}function Te(i){fo(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Yt(i.V),tn(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ie(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||fs(t.i,i)))if(!i.K&&fs(t.i,i)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;Eo(t),R(t)}bi(t),Fr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Vn(Oe(t.ib,t),6e3));if(1>=mo(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Vs(t,11)}else if((i.K||t.g==i)&&Eo(t),!jt(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let U=a[e];if(t.V=U[0],U=U[1],2==t.H)if("c"==U[0]){t.K=U[1],t.pa=U[2];const Q=U[3];null!=Q&&(t.ra=Q,t.l.info("VER="+t.ra));const ye=U[4];null!=ye&&(t.Ga=ye,t.l.info("SVER="+t.Ga));const Be=U[5];null!=Be&&"number"==typeof Be&&0<Be&&(t.L=s=1.5*Be,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const ut=i.g;if(ut){const Ot=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ot){var c=s.i;c.g||-1==Ot.indexOf("spdy")&&-1==Ot.indexOf("quic")&&-1==Ot.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Wr(c,c.h),c.h=null))}if(s.F){const Xt=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Xt&&(s.Da=Xt,Yn(s.I,s.F,Xt))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var p=i;if((s=t).wa=wo(s,s.J?s.pa:null,s.Y),p.K){Gi(s.i,p);var D=p,N=s.L;N&&D.setTimeout(N),D.B&&(fo(D),ar(D)),s.g=p}else Ki(s);0<t.j.length&&Z(t)}else"stop"!=U[0]&&"close"!=U[0]||Vs(t,7);else 3==t.H&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?Vs(t,7):O(t):"noop"!=U[0]&&t.h&&t.h.Aa(U),t.A=0)}Yr()}catch{}}function At(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ne(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function lt(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ne(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function ke(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ne(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],i)}(se=Tr.prototype).setTimeout=function(i){this.P=i},se.nb=function(i){i=i.target;const e=this.M;e&&3==ei(i)?e.l():this.Pa(i)},se.Pa=function(i){try{if(i==this.g)e:{const Q=ei(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Q)&&(3!=Q||$e||this.g&&(this.h.h||this.g.ja()||Wi(this.g)))){this.J||4!=Q||7==e||Yr(),fo(this);var t=this.g.da();this.ca=t;t:if(xo(this)){var s=Wi(this.g);i="";var a=s.length,c=4==ei(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Te(this),po(this);var p="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=i,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==t,function ht(i,e,t,s,a,c,p){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.W,Q,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jt(D)){var U=D;break t}}U=null}if(!(t=U)){this.i=!1,this.o=3,Fr(12),Te(this),po(this);break e}ft(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ie(this,t)}this.S?(Ys(this,Q,p),$e&&this.i&&3==Q&&(Pt(this.U,this.V,"tick",this.mb),this.V.start())):(ft(this.j,this.m,p,null),Ie(this,p)),4==Q&&Te(this),this.i&&!this.J&&(4==Q?Oo(this.l,this):(this.i=!1,ar(this)))}else(function es(i){const e={};i=(i.g&&2<=ei(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(jt(i[s]))continue;var t=oe(i[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function bt(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),Te(this),po(this)}}}catch{}},se.mb=function(){if(this.g){var i=ei(this.g),e=this.g.ja();this.C<e.length&&(fo(this),Ys(this,i,e),this.i&&4!=i&&ar(this))}},se.cancel=function(){this.J=!0,Te(this)},se.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function pn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Yr(),Fr(17)),Te(this),this.o=2,po(this)):ho(this,this.Y-i)};var Tn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Zn){this.h=i.h,$i(this,i.j),this.s=i.s,this.g=i.g,Pi(this,i.m),this.l=i.l;var e=i.i,t=new Qs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),kr(this,t),this.o=i.o}else i&&(e=String(i).match(Tn))?(this.h=!1,$i(this,e[1]||"",!0),this.s=Hi(e[2]||""),this.g=Hi(e[3]||"",!0),Pi(this,e[4]),this.l=Hi(e[5]||"",!0),kr(this,e[6]||"",!0),this.o=Hi(e[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}function Nn(i){return new Zn(i)}function $i(i,e,t){i.j=t?Hi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Pi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function kr(i,e,t){e instanceof Qs?(i.i=e,function Xs(i,e){e&&!i.j&&(Ni(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Js(this,s),oi(this,a,t))},i)),i.j=e}(i.i,i.h)):(t||(e=ci(e,zo)),i.i=new Qs(e,i.h))}function Yn(i,e,t){i.i.set(e,t)}function cs(i){return Yn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Hi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ci(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Es),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Es(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Zn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ci(e,Os,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ci(e,Os,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(ci(t,"/"==t.charAt(0)?ds:sa,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ci(t,Ro)),i.join("")};var Os=/[#\/\?@]/g,sa=/[#\?:]/g,ds=/[#\?]/g,zo=/[#\?@]/g,Ro=/#/g;function Qs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ni(i){i.g||(i.g=new Map,i.h=0,i.i&&function qn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var c=i[t].substring(0,s);a=i[t].substring(s+1)}else c=i[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Js(i,e){Ni(i),e=go(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Hr(i,e){return Ni(i),e=go(i,e),i.g.has(e)}function oi(i,e,t){Js(i,e),0<t.length&&(i.i=null,i.g.set(go(i,e),Ne(t)),i.h+=t.length)}function go(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function oa(i){this.l=i||Er,i=ee.PerformanceNavigationTiming?0<(i=ee.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(se=Qs.prototype).add=function(i,e){Ni(this),this.i=null,i=go(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},se.forEach=function(i,e){Ni(this),this.g.forEach(function(t,s){t.forEach(function(a){i.call(e,a,s,this)},this)},this)},se.ta=function(){Ni(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=i[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},se.Z=function(i){Ni(this);let e=[];if("string"==typeof i)Hr(this,i)&&(e=e.concat(this.g.get(go(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},se.set=function(i,e){return Ni(this),this.i=null,Hr(this,i=go(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},se.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},se.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var a=c;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),i.push(a)}}return this.i=i.join("&")};var Er=10;function hs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function mo(i){return i.h?1:i.g?i.g.size:0}function fs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Wr(i,e){i.g?i.g.add(e):i.h=e}function Gi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function yo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return Ne(i.i)}function di(){this.g=new class{stringify(i){return ee.JSON.stringify(i,void 0)}parse(i){return ee.JSON.parse(i,void 0)}}}function vo(i,e,t){const s=t||"";try{At(i,function(a,c){let p=a;Ee(a)&&(p=sr(a)),e.push(s+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function eo(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Xr(i){this.l=i.fc||null,this.j=i.ob||!1}function Kr(i,e){bn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=to,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oa.prototype.cancel=function(){if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},_t(Xr,pi),Xr.prototype.g=function(){return new Kr(this.l,this.j)},Xr.prototype.i=function(i){return function(){return i}}({}),_t(Kr,bn);var to=0;function En(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function ks(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Fs(i)}function Fs(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(se=Kr.prototype).open=function(i,e){if(this.readyState!=to)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Fs(this)},se.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ks(this)),this.readyState=to},se.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;En(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},se.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ks(this):Fs(this),3==this.readyState&&En(this)}},se.Za=function(i){this.g&&(this.response=this.responseText=i,ks(this))},se.Ya=function(i){this.g&&(this.response=i,ks(this))},se.ka=function(){this.g&&ks(this)},se.setRequestHeader=function(i,e){this.v.append(i,e)},se.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},se.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var aa=ee.JSON.parse;function Ar(i){bn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Oi,this.L=this.M=!1}_t(Ar,bn);var Oi="",_o=/^https?$/i,Ci=["POST","PUT"];function gt(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Un(i),ro(i)}function Un(i){i.F||(i.F=!0,Nt(i,"complete"),Nt(i,"error"))}function no(i){if(i.h&&typeof xe<"u"&&(!i.C[1]||4!=ei(i)||2!=i.da()))if(i.v&&4==ei(i))re(i.La,0,i);else if(Nt(i,"readystatechange"),4==ei(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===p){var a=String(i.I).match(Tn)[1]||null;!a&&ee.self&&ee.self.location&&(a=ee.self.location.protocol.slice(0,-1)),s=!_o.test(a?a.toLowerCase():"")}t=s}if(t)Nt(i,"complete"),Nt(i,"success");else{i.m=6;try{var c=2<ei(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Un(i)}}finally{ro(i)}}}function ro(i,e){if(i.g){Gr(i);const t=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Nt(i,"ready");try{t.onreadystatechange=s}catch{}}}function Gr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(ee.clearTimeout(i.A),i.A=null)}function ei(i){return i.g?i.g.readyState:0}function Wi(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Oi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function No(i){let e="";return cr(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function ws(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=No(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Yn(i,e,t))}function Is(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Br(i){this.Ga=0,this.j=[],this.l=new Me,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Is("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Is("baseRetryDelayMs",5e3,i),this.hb=Is("retryDelaySeedMs",1e4,i),this.eb=Is("forwardChannelMaxRetries",2,i),this.xa=Is("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new oa(i&&i.concurrentRequestLimit),this.Ja=new di,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function O(i){if(x(i),3==i.H){var e=i.W++,t=Nn(i.I);if(Yn(t,"SID",i.K),Yn(t,"RID",e),Yn(t,"TYPE","terminate"),$n(i,t),(e=new Tr(i,i.l,e)).L=2,e.v=cs(Nn(t)),t=!1,ee.navigator&&ee.navigator.sendBeacon)try{t=ee.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&ee.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ar(e)}xa(i)}function R(i){i.g&&(Ds(i),i.g.cancel(),i.g=null)}function x(i){R(i),i.u&&(ee.clearTimeout(i.u),i.u=null),Eo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ee.clearTimeout(i.m),i.m=null)}function Z(i){if(!hs(i.i)&&!i.m){i.m=!0;var e=i.Na;Y||De(),q||(Y(),q=!0),H.add(e,i),i.C=0}}function en(i,e){var t;t=e?e.m:i.W++;const s=Nn(i.I);Yn(s,"SID",i.K),Yn(s,"RID",t),Yn(s,"AID",i.V),$n(i,s),i.o&&i.s&&ws(s,i.o,i.s),t=new Tr(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=ti(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Wr(i.i,t),ji(t,s,e)}function $n(i,e){i.na&&cr(i.na,function(t,s){Yn(e,s,t)}),i.h&&At({},function(t,s){Yn(e,s,t)})}function ti(i,e,t){t=Math.min(i.j.length,t);var s=i.h?Oe(i.h.Va,i.h,i):null;e:{var a=i.j;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].g,p.push("ofs="+c)):c=0:p.push("ofs="+c);let D=!0;for(let N=0;N<t;N++){let U=a[N].g;const Q=a[N].map;if(U-=c,0>U)c=Math.max(0,a[N].g-100),D=!1;else try{vo(Q,p,"req"+U+"_")}catch{s&&s(Q)}}if(D){s=p.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,s}function Ki(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Y||De(),q||(Y(),q=!0),H.add(e,i),i.A=0}}function bi(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Vn(Oe(i.Ma,i),ki(i,i.A)),i.A++,0))}function Ds(i){null!=i.B&&(ee.clearTimeout(i.B),i.B=null)}function Ls(i){i.g=new Tr(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Nn(i.wa);Yn(e,"RID","rpc"),Yn(e,"SID",i.K),Yn(e,"AID",i.V),Yn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Yn(e,"TO",i.qa),Yn(e,"TYPE","xmlhttp"),$n(i,e),i.o&&i.s&&ws(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=cs(Nn(e)),t.s=null,t.S=!0,ls(t,i)}function Eo(i){null!=i.v&&(ee.clearTimeout(i.v),i.v=null)}function Oo(i,e){var t=null;if(i.g==e){Eo(i),Ds(i),i.g=null;var s=2}else{if(!fs(i.i,e))return;t=e.F,Gi(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=i.C;Nt(s=xn(),new Vi(s,t)),Z(i)}else Ki(i);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function Qe(i,e){return!(mo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Vn(Oe(i.Na,i,e),ki(i,i.C)),i.C++,0)))}(i,e)||2==s&&bi(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:Vs(i,5);break;case 4:Vs(i,10);break;case 3:Vs(i,6);break;default:Vs(i,2)}}function ki(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function Vs(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var s=Oe(i.pb,i);t||(t=new Zn("//www.google.com/images/cleardot.gif"),ee.location&&"http"==ee.location.protocol||$i(t,"https"),cs(t)),function Po(i,e){const t=new Me;if(ee.Image){const s=new Image;s.onload=Tt(eo,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Tt(eo,t,s,"TestLoadImage: error",!1,e),s.onabort=Tt(eo,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Tt(eo,t,s,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Fr(2);i.H=0,i.h&&i.h.za(e),xa(i),x(i)}function xa(i){if(i.H=0,i.ma=[],i.h){const e=yo(i.i);(0!=e.length||0!=i.j.length)&&(ot(i.ma,e),ot(i.ma,i.j),i.i.i.length=0,Ne(i.j),i.j.length=0),i.h.ya()}}function wo(i,e,t){var s=t instanceof Zn?Nn(t):new Zn(t);if(""!=s.g)e&&(s.g=e+"."+s.g),Pi(s,s.m);else{var a=ee.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Zn(null);s&&$i(c,s),e&&(c.g=e),a&&Pi(c,a),t&&(c.l=t),s=c}return e=i.Da,(t=i.F)&&e&&Yn(s,t,e),Yn(s,"VER",i.ra),$n(i,s),s}function Wo(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&i.Ha&&!i.va?new Xr({ob:!0}):i.va)).Oa(i.J),e}function ko(){}function Ko(){if(Pe&&!(10<=Number(zn)))throw Error("Environmental error: no available transport.")}function Ti(i,e){bn.call(this),this.g=new Br(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!jt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Io(this)}function Us(i){us.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function la(){Nr.call(this),this.status=1}function Io(i){this.g=i}function mi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sr(i,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=i.g[3],p=(e=i.g[0])+(c^(t=i.g[1])&((a=i.g[2])^c))+s[0]+3614090360&4294967295;p=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(p<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((c=(e=t+((p=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((a=c+((p=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+c&4294967295}function wr(i,e){this.h=e;for(var t=[],s=!0,a=i.length-1;0<=a;a--){var c=0|i[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(se=Ar.prototype).Oa=function(i){this.M=i},se.ha=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gi.g(),this.C=function br(i){return i.h||(i.h=i.i())}(this.u?this.u:gi),this.g.onreadystatechange=Oe(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void gt(this,c)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=ee.FormData&&i instanceof ee.FormData,!(0<=Xe(Ci,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gr(this),0<this.B&&((this.L=function ua(i){return Pe&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oe(this.ua,this)):this.A=re(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){gt(this,c)}},se.ua=function(){typeof xe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))},se.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Nt(this,"complete"),Nt(this,"abort"),ro(this))},se.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ro(this,!0)),Ar.$.N.call(this)},se.La=function(){this.s||(this.G||this.v||this.l?no(this):this.kb())},se.kb=function(){no(this)},se.isActive=function(){return!!this.g},se.da=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},se.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},se.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),aa(e)}},se.Ia=function(){return this.m},se.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(se=Br.prototype).ra=8,se.H=1,se.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new Tr(this,this.l,i);let c=this.s;if(this.U&&(c?(c=An(c),Jn(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ti(this,a,e),Yn(t=Nn(this.I),"RID",i),Yn(t,"CVER",22),this.F&&Yn(t,"X-HTTP-Session-Id",this.F),$n(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(No(c)))+"&"+e:this.o&&ws(t,this.o,c)),Wr(this.i,a),this.bb&&Yn(t,"TYPE","init"),this.P?(Yn(t,"$req",e),Yn(t,"SID","null"),a.aa=!0,ji(a,t,null)):ji(a,t,e),this.H=2}}else 3==this.H&&(i?en(this,i):0==this.j.length||hs(this.i)||en(this))},se.Ma=function(){if(this.u=null,Ls(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Vn(Oe(this.jb,this),i)}},se.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fr(10),R(this),Ls(this))},se.ib=function(){null!=this.v&&(this.v=null,R(this),bi(this),Fr(19))},se.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Fr(2)):(this.l.info("Failed to ping google.com"),Fr(1))},se.isActive=function(){return!!this.h&&this.h.isActive(this)},(se=ko.prototype).Ba=function(){},se.Aa=function(){},se.za=function(){},se.ya=function(){},se.isActive=function(){return!0},se.Va=function(){},Ko.prototype.g=function(i,e){return new Ti(i,e)},_t(Ti,bn),Ti.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Fr(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=wo(i,null,i.Y),Z(i)},Ti.prototype.close=function(){O(this.g)},Ti.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=sr(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&Z(e)},Ti.prototype.N=function(){this.g.h=null,delete this.j,O(this.g),delete this.g,Ti.$.N.call(this)},_t(Us,us),_t(la,Nr),_t(Io,ko),Io.prototype.Ba=function(){Nt(this.g,"a")},Io.prototype.Aa=function(i){Nt(this.g,new Us(i))},Io.prototype.za=function(i){Nt(this.g,new la)},Io.prototype.ya=function(){Nt(this.g,"b")},_t(mi,function ur(){this.blockSize=-1}),mi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)Sr(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(s[a++]=i.charCodeAt(c++),a==this.blockSize){Sr(this,s),a=0;break}}else for(;c<e;)if(s[a++]=i[c++],a==this.blockSize){Sr(this,s),a=0;break}}this.h=a,this.i+=e},mi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)i[t++]=this.g[e]>>>s&255;return i};var Fo={};function ca(i){return-128<=i&&128>i?function Dr(i,e){var t=Fo;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new wr([0|e],0>e?-1:0)}):new wr([0|i],0>i?-1:0)}function qi(i){if(isNaN(i)||!isFinite(i))return Cs;if(0>i)return yi(qi(-i));for(var e=[],t=1,s=0;i>=t;s++)e[s]=i/t|0,t*=Bs;return new wr(e,0)}var Bs=4294967296,Cs=ca(0),ts=ca(1),Zo=ca(16777216);function ps(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Zi(i){return-1==i.h}function yi(i){for(var e=i.g.length,t=[],s=0;s<e;s++)t[s]=~i.g[s];return new wr(t,~i.h).add(ts)}function ns(i,e){return i.add(yi(e))}function io(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function so(i,e){this.g=i,this.h=e}function oo(i,e){if(ps(e))throw Error("division by zero");if(ps(i))return new so(Cs,Cs);if(Zi(i))return e=oo(yi(i),e),new so(yi(e.g),yi(e.h));if(Zi(e))return e=oo(i,yi(e)),new so(yi(e.g),e.h);if(30<i.g.length){if(Zi(i)||Zi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ts,s=e;0>=s.X(i);)t=Do(t),s=Do(s);var a=Lo(t,1),c=Lo(s,1);for(s=Lo(s,2),t=Lo(t,2);!ps(s);){var p=c.add(s);0>=p.X(i)&&(a=a.add(t),c=p),s=Lo(s,1),t=Lo(t,1)}return e=ns(i,a.R(e)),new so(a,e)}for(a=Cs;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),p=(c=qi(t)).R(e);Zi(p)||0<p.X(i);)p=(c=qi(t-=s)).R(e);ps(c)&&(c=ts),a=a.add(c),i=ns(i,p)}return new so(a,i)}function Do(i){for(var e=i.g.length+1,t=[],s=0;s<e;s++)t[s]=i.D(s)<<1|i.D(s-1)>>>31;return new wr(t,i.h)}function Lo(i,e){var t=e>>5;e%=32;for(var s=i.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?i.D(c+t)>>>e|i.D(c+t+1)<<32-e:i.D(c+t);return new wr(a,i.h)}(se=wr.prototype).ea=function(){if(Zi(this))return-yi(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);i+=(0<=s?s:Bs+s)*e,e*=Bs}return i},se.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(ps(this))return"0";if(Zi(this))return"-"+yi(this).toString(i);for(var e=qi(Math.pow(i,6)),t=this,s="";;){var a=oo(t,e).g,c=((0<(t=ns(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(ps(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},se.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},se.X=function(i){return Zi(i=ns(this,i))?-1:ps(i)?0:1},se.abs=function(){return Zi(this)?yi(this):this},se.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&i.D(a)),p=(c>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=p>>>16,t[a]=(p&=65535)<<16|(c&=65535)}return new wr(t,-2147483648&t[t.length-1]?-1:0)},se.R=function(i){if(ps(this)||ps(i))return Cs;if(Zi(this))return Zi(i)?yi(this).R(yi(i)):yi(yi(this).R(i));if(Zi(i))return yi(this.R(yi(i)));if(0>this.X(Zo)&&0>i.X(Zo))return qi(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var c=this.D(s)>>>16,p=65535&this.D(s),D=i.D(a)>>>16,N=65535&i.D(a);t[2*s+2*a]+=p*N,io(t,2*s+2*a),t[2*s+2*a+1]+=c*N,io(t,2*s+2*a+1),t[2*s+2*a+1]+=p*D,io(t,2*s+2*a+1),t[2*s+2*a+2]+=c*D,io(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new wr(t,0)},se.gb=function(i){return oo(this,i).h},se.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&i.D(s);return new wr(t,this.h&i.h)},se.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|i.D(s);return new wr(t,this.h|i.h)},se.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^i.D(s);return new wr(t,this.h^i.h)},Ko.prototype.createWebChannel=Ko.prototype.g,Ti.prototype.send=Ti.prototype.u,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,Zs.COMPLETE="complete",Bi.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",bn.prototype.listen=bn.prototype.O,Ar.prototype.listenOnce=Ar.prototype.P,Ar.prototype.getLastError=Ar.prototype.Sa,Ar.prototype.getLastErrorCode=Ar.prototype.Ia,Ar.prototype.getStatus=Ar.prototype.da,Ar.prototype.getResponseJson=Ar.prototype.Wa,Ar.prototype.getResponseText=Ar.prototype.ja,Ar.prototype.send=Ar.prototype.ha,Ar.prototype.setWithCredentials=Ar.prototype.Oa,mi.prototype.digest=mi.prototype.l,mi.prototype.reset=mi.prototype.reset,mi.prototype.update=mi.prototype.j,wr.prototype.add=wr.prototype.add,wr.prototype.multiply=wr.prototype.R,wr.prototype.modulo=wr.prototype.gb,wr.prototype.compare=wr.prototype.X,wr.prototype.toNumber=wr.prototype.ea,wr.prototype.toString=wr.prototype.toString,wr.prototype.getBits=wr.prototype.D,wr.fromNumber=qi,wr.fromString=function qo(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return yi(qo(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=qi(Math.pow(e,8)),s=Cs,a=0;a<i.length;a+=8){var c=Math.min(8,i.length-a),p=parseInt(i.substring(a,a+c),e);8>c?(c=qi(Math.pow(e,c)),s=s.R(c).add(qi(p))):s=(s=s.R(t)).add(qi(p))}return s};var ou=we.createWebChannelTransport=function(){return new Ko},b=we.getStatEventTarget=function(){return xn()},V=we.ErrorCode=Ui,M=we.EventType=Zs,z=we.Event=Pn,_e=we.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Je=we.FetchXmlHttpFactory=Xr,ct=we.WebChannel=Bi,cn=we.XhrIo=Ar,or=we.Md5=mi,Hn=we.Integer=wr;const mr="@firebase/firestore";class gn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");let Mr="9.23.0";const On=new ge.Yd("@firebase/firestore");function ni(){return On.logLevel}function js(i){On.setLogLevel(i)}function mt(i,...e){if(On.logLevel<=ge.in.DEBUG){const t=e.map(ao);On.debug(`Firestore (${Mr}): ${i}`,...t)}}function pr(i,...e){if(On.logLevel<=ge.in.ERROR){const t=e.map(ao);On.error(`Firestore (${Mr}): ${i}`,...t)}}function xr(i,...e){if(On.logLevel<=ge.in.WARN){const t=e.map(ao);On.warn(`Firestore (${Mr}): ${i}`,...t)}}function ao(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Kt(i="Unexpected state"){const e=`FIRESTORE (${Mr}) INTERNAL ASSERTION FAILED: `+i;throw pr(e),new Error(e)}function nn(i,e){i||Kt()}function da(i,e){i||Kt()}function $t(i,e){return i}const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends de.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ga{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class za{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gn.UNAUTHENTICATED))}shutdown(){}}class xu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nl{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=U=>this.i!==a?(a=this.i,t(U)):Promise.resolve();let p=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new ai,e.enqueueRetryable(()=>c(this.currentUser))};const D=()=>{const U=p;e.enqueueRetryable((0,h.Z)(function*(){yield U.promise,yield c(s.currentUser)}))},N=U=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(U=>N(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?N(U):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new ai)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nn("string"==typeof s.accessToken),new Ga(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nn(null===e||"string"==typeof e),new gn(e)}}class Yo{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ha{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Yo(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=c=>{null!=c.error&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.T;return this.T=c.token,mt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn("string"==typeof t.token),this.T=t.token,new Pl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Wa(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class ui{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Wa(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function rn(i,e){return i<e?-1:i>e?1:0}function Co(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}function Ru(i){return i+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vt(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vt(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vt(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Rr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dn(e)}static min(){return new dn(new Rr(0,0))}static max(){return new dn(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $s{constructor(e,t,s){void 0===t?t=0:t>e.length&&Kt(),void 0===s?s=e.length-t:s>e.length-t&&Kt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===$s.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $s?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends $s{construct(e,t,s){return new In(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new vt(qe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new In(t)}static emptyPath(){return new In([])}}const pa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends $s{construct(e,t,s){return new Xn(e,t,s)}static isValidIdentifier(e){return pa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xn(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new vt(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new vt(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[a+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new vt(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=N,a+=2}else"`"===D?(p=!p,a++):"."!==D||p?(s+=D,a++):(c(),a++)}if(c(),p)throw new vt(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(t)}static emptyPath(){return new Xn([])}}class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(In.fromString(e))}static fromName(e){return new Ht(In.fromString(e).popFirst(5))}static empty(){return new Ht(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new In(e.slice()))}}class gs{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ga(i){return i.fields.find(e=>2===e.kind)}function Qo(i){return i.fields.filter(e=>2!==e.kind)}gs.UNKNOWN_ID=-1;class Pu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vo(0,bs.min())}}function ma(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=dn.fromTimestamp(1e9===s?new Rr(t+1,0):new Rr(t,s));return new bs(a,Ht.empty(),e)}function Ol(i){return new bs(i.readTime,i.key,-1)}class bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bs(dn.min(),Ht.empty(),-1)}static max(){return new bs(dn.max(),Ht.empty(),-1)}}function Nu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ht.comparator(i.documentKey,e.documentKey),0!==t?t:rn(i.largestBatchId,e.largestBatchId))}const ya="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function va(i){return ri.apply(this,arguments)}function ri(){return ri=(0,h.Z)(function*(i){if(i.code!==qe.FAILED_PRECONDITION||i.message!==ya)throw i;mt("LocalStore","Unexpectedly lost primary lease")}),ri.apply(this,arguments)}class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ue((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ue?t:Ue.resolve(t)}catch(t){return Ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.reject(t)}static resolve(e){return new Ue((t,s)=>{t(e)})}static reject(e){return new Ue((t,s)=>{s(e)})}static waitFor(e){return new Ue((t,s)=>{let a=0,c=0,p=!1;e.forEach(D=>{++a,D.next(()=>{++c,p&&c===a&&t()},N=>s(N))}),p=!0,c===a&&t()})}static or(e){let t=Ue.resolve(!1);for(const s of e)t=t.next(a=>a?Ue.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new Ue((s,a)=>{const c=e.length,p=new Array(c);let D=0;for(let N=0;N<c;N++){const U=N;t(e[U]).next(Q=>{p[U]=Q,++D,D===c&&s(p)},Q=>a(Q))}})}static doWhile(e,t){return new Ue((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class Jo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ai,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ai(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=uu(s.target.error);this.v.reject(new Ai(e,a))}}static open(e,t,s,a){try{return new Jo(t,e.transaction(a,s))}catch(c){throw new Ai(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(mt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new au(t)}}class uo{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===uo.S((0,de.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return mt("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,de.hl)())return!1;if(uo.C())return!0;const e=(0,de.z$)(),t=uo.S(e),s=0<t&&t<10,a=uo.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,h.Z)(function*(){return t.db||(mt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{s(p.target.result)},c.onblocked=()=>{a(new Ai(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const D=p.target.error;a("VersionError"===D.name?new vt(qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new vt(qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ai(e,D))},c.onupgradeneeded=p=>{mt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.O(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{mt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,h.Z)(function*(){const p="readonly"===t;let D=0;for(;;){++D;try{c.db=yield c.$(e);const N=Jo.open(c.db,e,p?"readonly":"readwrite",s),U=a(N).next(Q=>(N.P(),Q)).catch(Q=>(N.abort(Q),Ue.reject(Q))).toPromise();return U.catch(()=>{}),yield N.R,U}catch(N){const U=N,Q="FirebaseError"!==U.name&&D<3;if(mt("SimpleDb","Transaction failed with error:",U.message,"Retrying:",Q),c.close(),!Q)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _a{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Hs(this.L.delete())}}class Ai extends vt{constructor(e,t){super(qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Si(i){return"IndexedDbTransactionError"===i.name}class au{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(mt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(mt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Hs(s)}add(e){return mt("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(t=>(void 0===t&&(t=null),mt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return mt("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return mt("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.W(a,(p,D)=>{c.push(D)}).next(()=>c)}{const a=this.store.getAll(s.range);return new Ue((c,p)=>{a.onerror=D=>{p(D.target.error)},a.onsuccess=D=>{c(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Ue((a,c)=>{s.onerror=p=>{c(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){mt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(c,p,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new Ue((s,a)=>{t.onerror=c=>{const p=uu(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(D=>{D?p.continue():s()}):s()}})}W(e,t){const s=[];return new Ue((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const D=p.target.result;if(!D)return void a();const N=new _a(D),U=t(D.primaryKey,D.value,N);if(U instanceof Ue){const Q=U.catch(ye=>(N.done(),Ue.reject(ye)));s.push(Q)}N.isDone?a():null===N.K?D.continue():D.continue(N.K)}}).next(()=>Ue.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hs(i){return new Ue((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const a=uu(s.target.error);t(a)}})}let Ra=!1;function uu(i){const e=uo.S((0,de.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ra||(Ra=!0,setTimeout(()=>{throw s},0)),s}}return i}class Ou{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;mt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,h.Z)(function*(){t.task=null;try{mt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Si(s)?mt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield va(s)}yield t.et(6e4)}))}}class kl{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,h.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,c=!0;return Ue.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return mt("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(D=>{a-=D,s.add(p)});c=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,c)).next(D=>(mt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,c)=>{const p=Ol(c);Nu(p,s)>0&&(s=p)}),new bs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ms=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function qa(i){return null==i}function Uo(i){return 0===i&&1/i==-1/0}function ys(i){return"number"==typeof i&&Number.isInteger(i)&&!Uo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function vi(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=E(e)),e=v(i.get(t),e);return E(e)}function v(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function E(i){return i+"\x01\x01"}function y(i){const e=i.length;if(nn(e>=2),2===e)return nn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),In.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const p=i.indexOf("\x01",c);switch((p<0||p>t)&&Kt(),i.charAt(p+1)){case"\x01":const D=i.substring(c,p);let N;0===a.length?N=D:(a+=D,N=a,a=""),s.push(N);break;case"\x10":a+=i.substring(c,p),a+="\0";break;case"\x11":a+=i.substring(c,p+1);break;default:Kt()}c=p+2}return new In(s)}const T=["userId","batchId"];function P(i,e){return[i,vi(e)]}function G(i,e,t){return[i,vi(e),t]}const le={},fe=["prefixPath","collectionGroup","readTime","documentId"],nt=["prefixPath","collectionGroup","documentId"],Lt=["collectionGroup","readTime","prefixPath","documentId"],Mn=["canonicalId","targetId"],sn=["targetId","path"],Kn=["path","targetId"],Mi=["collectionId","parent"],li=["indexId","uid"],Xo=["uid","sequenceNumber"],Gs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ea=["indexId","uid","orderedDocumentKey"],ea=["userId","collectionPath","documentId"],Pa=["userId","collectionPath","largestBatchId"],Ts=["userId","collectionGroup","largestBatchId"],lu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fi=[...lu,"documentOverlays"],ku=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=ku,il=[...Fl,"indexConfiguration","indexState","indexEntries"];class wa extends rl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Yi(i,e){const t=$t(i);return uo.M(t.ht,e)}function Na(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Za(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ll(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class vr{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??hi.RED,this.left=a??hi.EMPTY,this.right=c??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new hi(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return hi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kt();const e=this.left.check();if(e!==this.right.check())throw Kt();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1,hi.EMPTY=new class{constructor(){this.size=0}get key(){throw Kt()}get value(){throw Kt()}get color(){throw Kt()}get left(){throw Kt()}get right(){throw Kt()}copy(i,e,t,s,a){return this}insert(i,e,t){return new hi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ii{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(e){return new Vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ii(this.comparator);return t.data=e,t}}class Vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bo(i){return i.hasNext()?i.getNext():void 0}class rs{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new rs([])}unionWith(e){let t=new ii(Xn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class sl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tc(){return typeof atob<"u"}class _i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sl("Invalid base64 string: "+a):a}}(e);return new _i(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new _i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const du=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(i){if(nn(!!i),"string"==typeof i){let e=0;const t=du.exec(i);if(nn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:si(i.seconds),nanos:si(i.nanos)}}function si(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Oa(i){return"string"==typeof i?_i.fromBase64String(i):_i.fromUint8Array(i)}function Fu(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lu(i){const e=i.mapValue.fields.__previous_value__;return Fu(e)?Lu(e):e}function ol(i){const e=bo(i.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class Ul{constructor(e,t,s,a,c,p,D,N,U){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=D,this.longPollingOptions=N,this.useFetchStreams=U}}class ta{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}const na={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ka={nullValue:"NULL_VALUE"};function lo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fu(i)?4:td(i)?9007199254740991:10:Kt()}function To(i,e){if(i===e)return!0;const t=lo(i);if(t!==lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ol(i).isEqual(ol(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=bo(s.timestampValue),p=bo(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,Oa(i.bytesValue).isEqual(Oa(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return si(s.geoPointValue.latitude)===si(a.geoPointValue.latitude)&&si(s.geoPointValue.longitude)===si(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return si(s.integerValue)===si(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=si(s.doubleValue),p=si(a.doubleValue);return c===p?Uo(c)===Uo(p):isNaN(c)&&isNaN(p)}return!1}(i,e);case 9:return Co(i.arrayValue.values||[],e.arrayValue.values||[],To);case 10:return function(s,a){const c=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Na(c)!==Na(p))return!1;for(const D in c)if(c.hasOwnProperty(D)&&(void 0===p[D]||!To(c[D],p[D])))return!1;return!0}(i,e);default:return Kt()}var a}function Ia(i,e){return void 0!==(i.values||[]).find(t=>To(t,e))}function ra(i,e){if(i===e)return 0;const t=lo(i),s=lo(e);if(t!==s)return rn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return rn(i.booleanValue,e.booleanValue);case 2:return function(a,c){const p=si(a.integerValue||a.doubleValue),D=si(c.integerValue||c.doubleValue);return p<D?-1:p>D?1:p===D?0:isNaN(p)?isNaN(D)?0:-1:1}(i,e);case 3:return hu(i.timestampValue,e.timestampValue);case 4:return hu(ol(i),ol(e));case 5:return rn(i.stringValue,e.stringValue);case 6:return function(a,c){const p=Oa(a),D=Oa(c);return p.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),D=c.split("/");for(let N=0;N<p.length&&N<D.length;N++){const U=rn(p[N],D[N]);if(0!==U)return U}return rn(p.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const p=rn(si(a.latitude),si(c.latitude));return 0!==p?p:rn(si(a.longitude),si(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],D=c.values||[];for(let N=0;N<p.length&&N<D.length;++N){const U=ra(p[N],D[N]);if(U)return U}return rn(p.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===na.mapValue&&c===na.mapValue)return 0;if(a===na.mapValue)return 1;if(c===na.mapValue)return-1;const p=a.fields||{},D=Object.keys(p),N=c.fields||{},U=Object.keys(N);D.sort(),U.sort();for(let Q=0;Q<D.length&&Q<U.length;++Q){const ye=rn(D[Q],U[Q]);if(0!==ye)return ye;const Be=ra(p[D[Q]],N[U[Q]]);if(0!==Be)return Be}return rn(D.length,U.length)}(i.mapValue,e.mapValue);default:throw Kt()}}function hu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return rn(i,e);const t=bo(i),s=bo(e),a=rn(t.seconds,s.seconds);return 0!==a?a:rn(t.nanos,s.nanos)}function Ya(i){return fu(i)}function fu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=bo(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Oa(i.bytesValue).toBase64():"referenceValue"in i?Ht.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let a="[",c=!0;for(const p of s.values||[])c?c=!1:a+=",",a+=fu(p);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",p=!0;for(const D of a)p?p=!1:c+=",",c+=`${D}:${fu(s.fields[D])}`;return c+"}"}(i.mapValue):Kt();var e}function Fa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ed(i){return!!i&&"integerValue"in i}function al(i){return!!i&&"arrayValue"in i}function pu(i){return!!i&&"nullValue"in i}function gu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ul(i){return!!i&&"mapValue"in i}function Uu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Za(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Uu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Da(i){return"nullValue"in i?ka:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Fa(ta.empty(),Ht.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Kt()}function nd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Fa(ta.empty(),Ht.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?na:Kt()}function Ca(i,e){const t=ra(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bl(i,e){const t=ra(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ul(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=Xn.emptyPath(),s={},a=[];e.forEach((p,D)=>{if(!t.isImmediateParentOf(D)){const N=this.getFieldsMap(t);this.applyChanges(N,s,a),s={},a=[],t=D.popLast()}p?s[D.lastSegment()]=Uu(p):a.push(D.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ul(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ul(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Za(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new is(Uu(this.value))}}function ll(i){const e=[];return Za(i.fields,(t,s)=>{const a=new Xn([t]);if(ul(s)){const c=ll(s.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new rs(e)}class qr{constructor(e,t,s,a,c,p,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=p,this.documentState=D}static newInvalidDocument(e){return new qr(e,0,dn.min(),dn.min(),dn.min(),is.empty(),0)}static newFoundDocument(e,t,s,a){return new qr(e,1,t,dn.min(),s,a,0)}static newNoDocument(e,t){return new qr(e,2,t,dn.min(),dn.min(),is.empty(),0)}static newUnknownDocument(e,t){return new qr(e,3,t,dn.min(),dn.min(),is.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ss{constructor(e,t){this.position=e,this.inclusive=t}}function rd(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],p=i.position[a];if(s=c.field.isKeyField()?Ht.comparator(Ht.fromName(p.referenceValue),t.key):ra(p,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function w(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!To(i.position[t],e.position[t]))return!1;return!0}class A{constructor(e,t="asc"){this.field=e,this.dir=t}}function B(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class te{}class pe extends te{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Li(e,t,s):"array-contains"===t?new La(e,s):"in"===t?new yu(e,s):"not-in"===t?new Rf(e,s):"array-contains-any"===t?new Pf(e,s):new pe(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ba(e,s):new mu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ra(t,this.value)):null!==t&&lo(this.value)===lo(t)&&this.matchesComparison(ra(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class be extends te{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new be(e,t)}matches(e){return it(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function it(i){return"and"===i.op}function Wt(i){return"or"===i.op}function Ut(i){return fn(i)&&it(i)}function fn(i){for(const e of i.filters)if(e instanceof be)return!1;return!0}function mn(i){if(i instanceof pe)return i.field.canonicalString()+i.op.toString()+Ya(i.value);if(Ut(i))return i.filters.map(e=>mn(e)).join(",");{const e=i.filters.map(t=>mn(t)).join(",");return`${i.op}(${e})`}}function kn(i,e){return i instanceof pe?(t=i,(s=e)instanceof pe&&t.op===s.op&&t.field.isEqual(s.field)&&To(t.value,s.value)):i instanceof be?function(t,s){return s instanceof be&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,c,p)=>a&&kn(c,s.filters[p]),!0)}(i,e):void Kt();var t,s}function vs(i,e){const t=i.filters.concat(e);return be.create(t,i.op)}function fi(i){return i instanceof pe?`${(e=i).field.canonicalString()} ${e.op} ${Ya(e.value)}`:i instanceof be?function(e){return e.op.toString()+" {"+e.getFilters().map(fi).join(" ,")+"}"}(i):"Filter";var e}class Li extends pe{constructor(e,t,s){super(e,t,s),this.key=Ht.fromName(s.referenceValue)}matches(e){const t=Ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class ba extends pe{constructor(e,t){super(e,"in",t),this.keys=co(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mu extends pe{constructor(e,t){super(e,"not-in",t),this.keys=co(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function co(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ht.fromName(s.referenceValue))}class La extends pe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return al(t)&&Ia(t.arrayValue,this.value)}}class yu extends pe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ia(this.value.arrayValue,t)}}class Rf extends pe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ia(this.value.arrayValue,t)}}class Pf extends pe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ia(this.value.arrayValue,s))}}class id{constructor(e,t=null,s=[],a=[],c=null,p=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=p,this.endAt=D,this.dt=null}}function jl(i,e=null,t=[],s=[],a=null,c=null,p=null){return new id(i,e,t,s,a,c,p)}function Va(i){const e=$t(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>mn(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),qa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ya(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ya(s)).join(",")),e.dt=t}return e.dt}function cl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!B(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!kn(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!w(i.startAt,e.startAt)&&w(i.endAt,e.endAt)}function Bu(i){return Ht.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function dl(i,e){return i.filters.filter(t=>t instanceof pe&&t.field.isEqual(e))}function lh(i,e,t){let s=ka,a=!0;for(const c of dl(i,e)){let p=ka,D=!0;switch(c.op){case"<":case"<=":p=Da(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,D=!1;break;case"!=":case"not-in":p=ka}Ca({value:s,inclusive:a},{value:p,inclusive:D})<0&&(s=p,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=t.position[c];Ca({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function sd(i,e,t){let s=na,a=!0;for(const c of dl(i,e)){let p=na,D=!0;switch(c.op){case">=":case">":p=nd(c.value),D=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,D=!1;break;case"!=":case"not-in":p=na}Bl({value:s,inclusive:a},{value:p,inclusive:D})>0&&(s=p,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=t.position[c];Bl({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Qa{constructor(e,t=null,s=[],a=[],c=null,p="F",D=null,N=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=p,this.startAt=D,this.endAt=N,this.wt=null,this._t=null}}function hl(i,e,t,s,a,c,p,D){return new Qa(i,e,t,s,a,c,p,D)}function ju(i){return new Qa(i)}function ch(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ac(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function _(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function d(i){return null!==i.collectionGroup}function g(i){const e=$t(i);if(null===e.wt){e.wt=[];const t=_(e),s=Ac(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new A(t)),e.wt.push(new A(Xn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new A(Xn.keyField(),c))}}}return e.wt}function I(i){const e=$t(i);if(!e._t)if("F"===e.limitType)e._t=jl(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of g(e))t.push(new A(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new ss(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ss(e.startAt.position,e.startAt.inclusive):null;e._t=jl(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function $(i,e){e.getFirstInequalityField(),_(i);const t=i.filters.concat([e]);return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function J(i,e,t){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Se(i,e){return cl(I(i),I(e))&&i.limitType===e.limitType}function et(i){return`${Va(I(i))}|lt:${i.limitType}`}function kt(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>fi(s)).join(", ")}]`),qa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ya(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ya(s)).join(",")),`Target(${t})`}(I(i))}; limitType=${i.limitType})`}function qt(i,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ht.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(i,e)&&function(t,s){for(const a of g(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(a,c,p){const D=rd(a,c,p);return a.inclusive?D<=0:D<0}(t.startAt,g(t),s)||t.endAt&&!function(a,c,p){const D=rd(a,c,p);return a.inclusive?D>=0:D>0}(t.endAt,g(t),s)));var t,s}function Dn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lr(i){return(e,t)=>{let s=!1;for(const a of g(i)){const c=Ao(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function Ao(i,e,t){const s=i.field.isKeyField()?Ht.comparator(e.key,t.key):function(a,c,p){const D=c.data.field(a),N=p.data.field(a);return null!==D&&null!==N?ra(D,N):Kt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Kt()}}class zs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const $l=new vr(Ht.comparator);function As(){return $l}const Hl=new vr(Ht.comparator);function vu(...i){let e=Hl;for(const t of i)e=e.insert(t.key,t);return e}function od(i){let e=Hl;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ia(){return $u()}function Sc(){return $u()}function $u(){return new zs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Ja=new vr(Ht.comparator),ad=new ii(Ht.comparator);function er(...i){let e=ad;for(const t of i)e=e.add(t);return e}const ud=new ii(rn);function dh(){return ud}function ld(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uo(e)?"-0":e}}function fg(i){return{integerValue:""+i}}function Nf(i,e){return ys(e)?fg(e):ld(i,e)}class cd{constructor(){this._=void 0}}function pg(i,e,t){return i instanceof Hu?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fu(a)&&(a=Lu(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):i instanceof _u?Ff(i,e):i instanceof Gu?hh(i,e):function(s,a){const c=kf(s,a),p=Mc(c)+Mc(s.gt);return ed(c)&&ed(s.gt)?fg(p):ld(s.serializer,p)}(i,e)}function Of(i,e,t){return i instanceof _u?Ff(i,e):i instanceof Gu?hh(i,e):t}function kf(i,e){return i instanceof fl?ed(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Hu extends cd{}class _u extends cd{constructor(e){super(),this.elements=e}}function Ff(i,e){const t=gg(e);for(const s of i.elements)t.some(a=>To(a,s))||t.push(s);return{arrayValue:{values:t}}}class Gu extends cd{constructor(e){super(),this.elements=e}}function hh(i,e){let t=gg(e);for(const s of i.elements)t=t.filter(a=>!To(a,s));return{arrayValue:{values:t}}}class fl extends cd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Mc(i){return si(i.integerValue||i.doubleValue)}function gg(i){return al(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xc{constructor(e,t){this.field=e,this.transform=t}}class xy{constructor(e,t){this.version=e,this.transformResults=t}}class Ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Gl{}function fh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new pl(i.key,Ei.none()):new Pc(i.key,i.data,Ei.none());{const t=i.data,s=is.empty();let a=new ii(Xn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?s.delete(c):s.set(c,p),a=a.add(c)}return new Xa(i.key,s,new rs(a.toArray()),Ei.none())}}function zl(i,e,t){i instanceof Pc?function(s,a,c){const p=s.value.clone(),D=Lf(s.fieldTransforms,a,c.transformResults);p.setAll(D),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):i instanceof Xa?function(s,a,c){if(!Rc(s.precondition,a))return void a.convertToUnknownDocument(c.version);const p=Lf(s.fieldTransforms,a,c.transformResults),D=a.data;D.setAll(mg(s)),D.setAll(p),a.convertToFoundDocument(c.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dd(i,e,t,s){return i instanceof Pc?function(a,c,p,D){if(!Rc(a.precondition,c))return p;const N=a.value.clone(),U=hd(a.fieldTransforms,D,c);return N.setAll(U),c.convertToFoundDocument(c.version,N).setHasLocalMutations(),null}(i,e,t,s):i instanceof Xa?function(a,c,p,D){if(!Rc(a.precondition,c))return p;const N=hd(a.fieldTransforms,D,c),U=c.data;return U.setAll(mg(a)),U.setAll(N),c.convertToFoundDocument(c.version,U).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(Q=>Q.field))}(i,e,t,s):(p=t,Rc(i.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function Ry(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=kf(s.transform,a||null);null!=c&&(null===t&&(t=is.empty()),t.set(s.field,c))}return t||null}function Py(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&Co(t,s,(a,c)=>function My(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof _u&&s instanceof _u||t instanceof Gu&&s instanceof Gu?Co(t.elements,s.elements,To):t instanceof fl&&s instanceof fl?To(t.gt,s.gt):t instanceof Hu&&s instanceof Hu);var t,s}(a,c))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Pc extends Gl{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Xa extends Gl{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function mg(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Lf(i,e,t){const s=new Map;nn(i.length===t.length);for(let a=0;a<t.length;a++){const c=i[a],p=c.transform,D=e.data.field(c.field);s.set(c.field,Of(p,D,t[a]))}return s}function hd(i,e,t){const s=new Map;for(const a of i){const c=a.transform,p=t.data.field(a.field);s.set(a.field,pg(c,p,e))}return s}class pl extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ph extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&zl(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Sc();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let D=this.applyToLocalView(p,c.mutatedFields);D=t.has(a.key)?null:D;const N=fh(p,D);null!==N&&s.set(a.key,N),p.isValidDocument()||p.convertToNoDocument(dn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),er())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(t,s)=>Py(t,s))&&Co(this.baseMutations,e.baseMutations,(t,s)=>Py(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){nn(e.mutations.length===s.length);let a=Ja;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,s[p].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Oy{constructor(e,t){this.count=e,this.unchangedNames=t}}var _s,Vr;function yg(i){switch(i){default:return Kt();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function zu(i){if(void 0===i)return pr("GRPC error has no .code"),qe.UNKNOWN;switch(i){case _s.OK:return qe.OK;case _s.CANCELLED:return qe.CANCELLED;case _s.UNKNOWN:return qe.UNKNOWN;case _s.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case _s.INTERNAL:return qe.INTERNAL;case _s.UNAVAILABLE:return qe.UNAVAILABLE;case _s.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case _s.NOT_FOUND:return qe.NOT_FOUND;case _s.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case _s.ABORTED:return qe.ABORTED;case _s.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case _s.DATA_LOSS:return qe.DATA_LOSS;default:return Kt()}}(Vr=_s||(_s={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class Wl{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vh}static getOrCreateInstance(){return null===vh&&(vh=new Wl),vh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vh=null;function ky(){return new TextEncoder}const H_=new Hn([4294967295,4294967295],0);function Fy(i){const e=ky().encode(i),t=new or;return t.update(e),new Uint8Array(t.digest())}function Ly(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Hn([t,s],0),new Hn([a,c],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Nc(`Invalid padding: ${t}`);if(s<0)throw new Nc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Nc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Nc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Hn.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(Hn.fromNumber(s)));return 1===a.compare(H_)&&(a=new Hn([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const p=this.Et(s,a,c);if(!this.At(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new vg(c,a,t);return s.forEach(D=>p.insert(D)),p}insert(e){if(0===this.It)return;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const p=this.Et(s,a,c);this.Rt(p)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fd(dn.min(),a,new vr(rn),As(),er())}}class pd{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pd(s,t,er(),er(),er())}}class _h{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _g{constructor(e,t){this.targetId=e,this.Vt=t}}class Eh{constructor(e,t,s=_i.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Eu{constructor(){this.St=0,this.Dt=Uf(),this.Ct=_i.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=er(),t=er(),s=er();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Kt()}}),new pd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Uf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=As(),this.zt=Vf(),this.Wt=new vr(rn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Kt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,c=this.se(s);if(c){const p=c.target;if(Bu(p))if(0===a){const D=new Ht(p.path);this.Yt(s,D,qr.newNoDocument(D,dn.min()))}else nn(1===a);else{const D=this.ie(s);if(D!==a){const N=this.re(e,D);0!==N&&(this.ee(s),this.Wt=this.Wt.insert(s,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(U,Q,ye){var Be,ut,Ot,Xt,on,ir;const Ur={localCacheCount:Q,existenceFilterCount:ye.count},_r=ye.unchangedNames;return _r&&(Ur.bloomFilter={applied:0===U,hashCount:null!==(Be=_r?.hashCount)&&void 0!==Be?Be:0,bitmapLength:null!==(Xt=null===(Ot=null===(ut=_r?.bits)||void 0===ut?void 0:ut.bitmap)||void 0===Ot?void 0:Ot.length)&&void 0!==Xt?Xt:0,padding:null!==(ir=null===(on=_r?.bits)||void 0===on?void 0:on.padding)&&void 0!==ir?ir:0}),Ur}(N,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:c="",padding:p=0},hashCount:D=0}=s;let N,U;try{N=Oa(c).toUint8Array()}catch(Q){if(Q instanceof sl)return xr("Decoding the base64 bloom filter in existence filter failed ("+Q.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Q}try{U=new vg(N,p,D)}catch(Q){return xr(Q instanceof Nc?"BloomFilter error: ":"Applying bloom filter failed: ",Q),1}return 0===U.It?1:a!==t-this.oe(e.targetId,U)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(c=>{const p=this.Gt.ue(),D=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;t.vt(D)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,p)=>{const D=this.se(p);if(D){if(c.current&&Bu(D.target)){const N=new Ht(D.target.path);null!==this.jt.get(N)||this.ae(p,N)||this.Yt(p,N,qr.newNoDocument(N,e))}c.Mt&&(t.set(p,c.Ot()),c.Ft())}});let s=er();this.zt.forEach((c,p)=>{let D=!0;p.forEachWhile(N=>{const U=this.se(N);return!U||"TargetPurposeLimboResolution"===U.purpose||(D=!1,!1)}),D&&(s=s.add(c))}),this.jt.forEach((c,p)=>p.setReadTime(e));const a=new fd(e,t,this.Wt,this.jt,s);return this.jt=As(),this.zt=Vf(),this.Wt=new vr(rn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Eu,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ii(rn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||mt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Eu),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new vr(Ht.comparator)}function Uf(){return new vr(Ht.comparator)}const Eg={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z_={and:"AND",or:"OR"};class W_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(i,e){return i.useProto3Json||qa(e)?e:{value:e}}function gl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function K_(i,e){return gl(i,e.toTimestamp())}function Qi(i){return nn(!!i),dn.fromTimestamp(function(e){const t=bo(e);return new Rr(t.seconds,t.nanos)}(i))}function Bf(i,e){return(t=i,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wg(i){const e=In.fromString(i);return nn(Gf(e)),e}function yd(i,e){return Bf(i.databaseId,e.path)}function wu(i,e){const t=wg(e);if(t.get(1)!==i.databaseId.projectId)throw new vt(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new vt(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ht(Ih(t))}function wh(i,e){return Bf(i.databaseId,e)}function vd(i){const e=wg(i);return 4===e.length?In.emptyPath():Ih(e)}function _d(i){return new In(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ih(i){return nn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ig(i,e,t){return{name:yd(i,e),fields:t.value.mapValue.fields}}function os(i,e,t){const s=wu(i,e.name),a=Qi(e.updateTime),c=e.createTime?Qi(e.createTime):dn.min(),p=new is({mapValue:{fields:e.fields}}),D=qr.newFoundDocument(s,a,c,p);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function Kl(i,e){let t;if(e instanceof Pc)t={update:Ig(i,e.key,e.value)};else if(e instanceof pl)t={delete:yd(i,e.key)};else if(e instanceof Xa)t={update:Ig(i,e.key,e.data),updateMask:Gy(e.fieldMask)};else{if(!(e instanceof ph))return Kt();t={verify:yd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const p=c.transform;if(p instanceof Hu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof _u)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fl)return{fieldPath:c.field.canonicalString(),increment:p.gt};throw Kt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:K_(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Kt()),t;var a}function Dh(i,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ei.updateTime(Qi(a.updateTime)):void 0!==a.exists?Ei.exists(a.exists):Ei.none():Ei.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let D=null;"setToServerValue"in p?(nn("REQUEST_TIME"===p.setToServerValue),D=new Hu):"appendMissingElements"in p?D=new _u(p.appendMissingElements.values||[]):"removeAllFromArray"in p?D=new Gu(p.removeAllFromArray.values||[]):"increment"in p?D=new fl(c,p.increment):Kt();const N=Xn.fromServerFormat(p.fieldPath);return new xc(N,D)}(i,a)):[];var a;if(e.update){const a=wu(i,e.update.name),c=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new rs((e.updateMask.fieldPaths||[]).map(U=>Xn.fromServerFormat(U)));return new Xa(a,c,p,t,s)}return new Pc(a,c,t,s)}if(e.delete){const a=wu(i,e.delete);return new pl(a,t)}if(e.verify){const a=wu(i,e.verify);return new ph(a,t)}return Kt()}function Dg(i,e){return{documents:[wh(i,e.path)]}}function jf(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wh(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wh(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(N){if(0!==N.length)return Hf(be.create(N,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(N){if(0!==N.length)return N.map(U=>{return{field:Wu((Q=U).field),direction:q_(Q.dir)};var Q})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=md(i,e.limit);var D,N;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(N=e.endAt).inclusive,values:N.position}),t}function Cg(i){let e=vd(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){nn(1===s);const Q=t.from[0];Q.allDescendants?a=Q.collectionId:e=e.child(Q.collectionId)}let c=[];t.where&&(c=function(Q){const ye=Hy(Q);return ye instanceof be&&Ut(ye)?ye.getFilters():[ye]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(Q=>{return new A(ql((ye=Q).field),function(Be){switch(Be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ye.direction));var ye}));let D=null;t.limit&&(D=function(Q){let ye;return ye="object"==typeof Q?Q.value:Q,qa(ye)?null:ye}(t.limit));let N=null;var Q;t.startAt&&(N=new ss((Q=t.startAt).values||[],!!Q.before));let U=null;return t.endAt&&(U=function(Q){return new ss(Q.values||[],!Q.before)}(t.endAt)),hl(e,a,p,c,D,"F",N,U)}function Hy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ql(e.unaryFilter.field);return pe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ql(e.unaryFilter.field);return pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ql(e.unaryFilter.field);return pe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ql(e.unaryFilter.field);return pe.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Kt()}}(i):void 0!==i.fieldFilter?pe.create(ql((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return be.create(e.compositeFilter.filters.map(t=>Hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Kt()}}(e.compositeFilter.op))}(i):Kt();var e}function q_(i){return Eg[i]}function Ed(i){return G_[i]}function $f(i){return z_[i]}function Wu(i){return{fieldPath:i.canonicalString()}}function ql(i){return Xn.fromServerFormat(i.fieldPath)}function Hf(i){return i instanceof pe?function(e){if("=="===e.op){if(gu(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NAN"}};if(pu(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gu(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NOT_NAN"}};if(pu(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(e.field),op:Ed(e.op),value:e.value}}}(i):i instanceof be?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:$f(e.op),filters:t}}}(i):Kt()}function Gy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Iu{constructor(e,t,s,a,c=dn.min(),p=dn.min(),D=_i.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=D,this.expectedCount=N}withSequenceNumber(e){return new Iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ch{constructor(e){this.fe=e}}function bg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Oc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yd(a=i.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:gl(a,c.version.toTimestamp()),createTime:gl(a,c.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:ml(e.version)};else{if(!e.isUnknownDocument())return Kt();s.unknownDocument={path:t.path.toArray(),version:ml(e.version)}}var a,c;return s}function Oc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ml(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yl(i){const e=new Rr(i.seconds,i.nanoseconds);return dn.fromTimestamp(e)}function Ta(i,e){const t=(e.baseMutations||[]).map(c=>Dh(i.fe,c));for(let c=0;c<e.mutations.length-1;++c){const p=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(p.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const s=e.mutations.map(c=>Dh(i.fe,c)),a=Rr.fromMillis(e.localWriteTimeMs);return new gh(e.batchId,a,t,s)}function wd(i){const e=yl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?yl(i.lastLimboFreeSnapshotVersion):dn.min();let s;var a;return void 0!==i.query.documents?(nn(1===(a=i.query).documents.length),s=I(ju(vd(a.documents[0])))):s=I(Cg(i.query)),new Iu(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,_i.fromBase64String(i.resumeToken))}function bh(i,e){const t=ml(e.snapshotVersion),s=ml(e.lastLimboFreeSnapshotVersion);let a;a=Bu(e.target)?Dg(i.fe,e.target):jf(i.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Va(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function kc(i){const e=Cg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?J(e,e.limit,"L"):e}function zf(i,e){return new yh(e.largestBatchId,Dh(i.fe,e.overlayMutation))}function Th(i,e){const t=e.path.lastSegment();return[i,vi(e.path.popLast()),t]}function Id(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:ml(s.readTime),documentKey:vi(s.documentKey.path),largestBatchId:s.largestBatchId}}class Zl{getBundleMetadata(e,t){return Wf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:yl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(s=t).id,createTime:ml(Qi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ah(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:kc(a.bundledQuery),readTime:yl(a.readTime)};var a})}saveNamedQuery(e,t){return Ah(e).put({name:(s=t).name,readTime:ml(Qi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Wf(i){return Yi(i,"bundles")}function Ah(i){return Yi(i,"namedQueries")}class Sh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sh(e,t.uid||"")}getOverlay(e,t){return Dd(e).get(Th(this.userId,t)).next(s=>s?zf(this.serializer,s):null)}getOverlays(e,t){const s=ia();return Ue.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,p)=>{const D=new yh(t,p);a.push(this.we(e,D))}),Ue.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(vi(p.getCollectionPath())));const c=[];return a.forEach(p=>{const D=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);c.push(Dd(e).J("collectionPathOverlayIndex",D))}),Ue.waitFor(c)}getOverlaysForCollection(e,t,s){const a=ia(),c=vi(t),p=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Dd(e).j("collectionPathOverlayIndex",p).next(D=>{for(const N of D){const U=zf(this.serializer,N);a.set(U.getKey(),U)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=ia();let p;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dd(e).X({index:"collectionGroupOverlayIndex",range:D},(N,U,Q)=>{const ye=zf(this.serializer,U);c.size()<a||ye.largestBatchId===p?(c.set(ye.getKey(),ye),p=ye.largestBatchId):Q.done()}).next(()=>c)}we(e,t){return Dd(e).put(function(s,a,c){const[p,D,N]=Th(a,c.mutation.key);return{userId:a,collectionPath:D,documentId:N,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kl(s.fe,c.mutation)}}(this.serializer,this.userId,t))}}function Dd(i){return Yi(i,"documentOverlays")}class vl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(si(e.integerValue));else if("doubleValue"in e){const s=si(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Uo(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Oa(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Kt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Ht.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Fc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tg(i){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=Fc(255&t[a]);if(s+=c,8!==c)break}return s}(i);return Math.ceil(e/8)}vl.Ve=new vl;class zy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Wy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ky{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yl{constructor(){this.je=new zy,this.ze=new Wy(this.je),this.We=new Ky(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ql{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ql(this.indexId,this.documentKey,this.arrayValue,s)}}function Ku(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ag(i.arrayValue,e.arrayValue),0!==t?t:(t=Ag(i.directionalValue,e.directionalValue),0!==t?t:Ht.comparator(i.documentKey,e.documentKey)))}function Ag(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Sg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){nn(e.collectionGroup===this.collectionId);const t=ga(e);if(void 0!==t&&!this.en(t))return!1;const s=Qo(e);let a=new Set,c=0,p=0;for(;c<s.length&&this.en(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const D=s[c];if(!this.nn(this.Ze,D)||!this.sn(this.Ye[p++],D))return!1}++c}for(;c<s.length;++c){const D=s[c];if(p>=this.Ye.length||!this.sn(this.Ye[p++],D))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qy(i){var e,t;if(nn(i instanceof pe||i instanceof be),i instanceof pe){if(i instanceof yu){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>pe.create(i.field,"==",c)))||[];return be.create(a,"or")}return i}const s=i.filters.map(a=>qy(a));return be.create(s,i.op)}function Zy(i){if(0===i.getFilters().length)return[];const e=ec(qy(i));return nn(Xl(e)),Jl(e)||Kf(e)?[e]:e.getFilters()}function Jl(i){return i instanceof pe}function Kf(i){return i instanceof be&&Ut(i)}function Xl(i){return Jl(i)||Kf(i)||function(e){if(e instanceof be&&Wt(e)){for(const t of e.getFilters())if(!Jl(t)&&!Kf(t))return!1;return!0}return!1}(i)}function ec(i){if(nn(i instanceof pe||i instanceof be),i instanceof pe)return i;if(1===i.filters.length)return ec(i.filters[0]);const e=i.filters.map(s=>ec(s));let t=be.create(e,i.op);return t=Cd(t),Xl(t)?t:(nn(t instanceof be),nn(it(t)),nn(t.filters.length>1),t.filters.reduce((s,a)=>qf(s,a)))}function qf(i,e){let t;return nn(i instanceof pe||i instanceof be),nn(e instanceof pe||e instanceof be),t=i instanceof pe?e instanceof pe?be.create([i,e],"and"):Yy(i,e):e instanceof pe?Yy(e,i):function(s,a){if(nn(s.filters.length>0&&a.filters.length>0),it(s)&&it(a))return vs(s,a.getFilters());const c=Wt(s)?s:a,p=Wt(s)?a:s,D=c.filters.map(N=>qf(N,p));return be.create(D,"or")}(i,e),Cd(t)}function Yy(i,e){if(it(e))return vs(e,i.getFilters());{const t=e.filters.map(s=>qf(i,s));return be.create(t,"or")}}function Cd(i){if(nn(i instanceof pe||i instanceof be),i instanceof pe)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(fn(i))return i;const t=e.map(a=>Cd(a)),s=[];return t.forEach(a=>{a instanceof pe?s.push(a):a instanceof be&&(a.op===i.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:be.create(s,i.op)}class Qy{constructor(){this.rn=new Zf}addToCollectionParentIndex(e,t){return this.rn.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ue.resolve()}deleteFieldIndex(e,t){return Ue.resolve()}getDocumentsMatchingTarget(e,t){return Ue.resolve(null)}getIndexType(e,t){return Ue.resolve(0)}getFieldIndexes(e,t){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,t){return Ue.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return Ue.resolve(bs.min())}updateCollectionGroup(e,t,s){return Ue.resolve()}updateIndexEntries(e,t){return Ue.resolve()}}class Zf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new ii(In.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new ii(In.comparator)).toArray()}}const Mh=new Uint8Array(0);class Mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Zf,this.un=new zs(s=>Va(s),(s,a)=>cl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:s,parent:vi(a)};return Yf(e).put(c)}return Ue.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Ru(t),""],!1,!0);return Yf(e).j(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;s.push(y(p.parent))}return s})}addFieldIndex(e,t){const s=Lc(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var p;delete a.indexId;const c=s.add(a);if(t.indexState){const p=bd(e);return c.next(D=>{p.put(Id(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Lc(e),a=bd(e),c=tc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=tc(e);let a=!0;const c=new Map;return Ue.forEach(this.cn(t),p=>this.an(e,p).next(D=>{a&&(a=!!D),c.set(p,D)})).next(()=>{if(a){let p=er();const D=[];return Ue.forEach(c,(N,U)=>{var Q;mt("IndexedDbIndexManager",`Using index ${Q=N,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(_r=>`${_r.fieldPath}:${_r.kind}`).join(",")}`} to execute ${Va(t)}`);const ye=function(_r,qs){const Rs=ga(qs);if(void 0===Rs)return null;for(const xi of dl(_r,Rs.fieldPath))switch(xi.op){case"array-contains-any":return xi.value.arrayValue.values||[];case"array-contains":return[xi.value]}return null}(U,N),Be=function(_r,qs){const Rs=new Map;for(const xi of Qo(qs))for(const Go of dl(_r,xi.fieldPath))switch(Go.op){case"==":case"in":Rs.set(xi.fieldPath.canonicalString(),Go.value);break;case"not-in":case"!=":return Rs.set(xi.fieldPath.canonicalString(),Go.value),Array.from(Rs.values())}return null}(U,N),ut=function(_r,qs){const Rs=[];let xi=!0;for(const Go of Qo(qs)){const Su=0===Go.kind?lh(_r,Go.fieldPath,_r.startAt):sd(_r,Go.fieldPath,_r.startAt);Rs.push(Su.value),xi&&(xi=Su.inclusive)}return new ss(Rs,xi)}(U,N),Ot=function(_r,qs){const Rs=[];let xi=!0;for(const Go of Qo(qs)){const Su=0===Go.kind?sd(_r,Go.fieldPath,_r.endAt):lh(_r,Go.fieldPath,_r.endAt);Rs.push(Su.value),xi&&(xi=Su.inclusive)}return new ss(Rs,xi)}(U,N),Xt=this.hn(N,U,ut),on=this.hn(N,U,Ot),ir=this.ln(N,U,Be),Ur=this.fn(N.indexId,ye,Xt,ut.inclusive,on,Ot.inclusive,ir);return Ue.forEach(Ur,_r=>s.H(_r,t.limit).next(qs=>{qs.forEach(Rs=>{const xi=Ht.fromSegments(Rs.documentKey);p.has(xi)||(p=p.add(xi),D.push(xi))})}))}).next(()=>D)}return Ue.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Zy(be.create(e.filters,"and")).map(s=>jl(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,c,p,D){const N=(null!=t?t.length:1)*Math.max(s.length,c.length),U=N/(null!=t?t.length:1),Q=[];for(let ye=0;ye<N;++ye){const Be=t?this.dn(t[ye/U]):Mh,ut=this.wn(e,Be,s[ye%U],a),Ot=this._n(e,Be,c[ye%U],p),Xt=D.map(on=>this.wn(e,Be,on,!0));Q.push(...this.createRange(ut,Ot,Xt))}return Q}wn(e,t,s,a){const c=new Ql(e,Ht.empty(),t,s);return a?c:c.Je()}_n(e,t,s,a){const c=new Ql(e,Ht.empty(),t,s);return a?c.Je():c}an(e,t){const s=new Sg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const D of c)s.tn(D)&&(!p||D.fields.length>p.fields.length)&&(p=D);return p})}getIndexType(e,t){let s=2;const a=this.cn(t);return Ue.forEach(a,c=>this.an(e,c).next(p=>{p?0!==s&&p.fields.length<function(D){let N=new ii(Xn.comparator),U=!1;for(const Q of D.filters)for(const ye of Q.getFlattenedFilters())ye.field.isKeyField()||("array-contains"===ye.op||"array-contains-any"===ye.op?U=!0:N=N.add(ye.field));for(const Q of D.orderBy)Q.field.isKeyField()||(N=N.add(Q.field));return N.size+(U?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Yl;for(const a of Qo(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=s.He(a.kind);vl.Ve._e(c,p)}return s.Qe()}dn(e){const t=new Yl;return vl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Yl;return vl.Ve._e(Fa(this.databaseId,t),s.He(function(a){const c=Qo(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Yl);let c=0;for(const p of Qo(e)){const D=s[c++];for(const N of a)if(this.yn(t,p.fieldPath)&&al(D))a=this.pn(a,p,D);else{const U=N.He(p.kind);vl.Ve._e(D,U)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],c=[];for(const p of s.arrayValue.values||[])for(const D of a){const N=new Yl;N.seed(D.Qe()),vl.Ve._e(p,N.He(t.kind)),c.push(N)}return c}yn(e,t){return!!e.filters.find(s=>s instanceof pe&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Lc(e),a=bd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(c=>{const p=[];return Ue.forEach(c,D=>a.get([D.indexId,this.uid]).next(N=>{p.push(function(U,Q){const ye=Q?new Vo(Q.sequenceNumber,new bs(yl(Q.readTime),new Ht(y(Q.documentKey)),Q.largestBatchId)):Vo.empty(),Be=U.fields.map(([ut,Ot])=>new Pu(Xn.fromServerFormat(ut),Ot));return new gs(U.indexId,U.collectionGroup,Be,ye)}(D,N))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:rn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Lc(e),c=bd(e);return this.Tn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>Ue.forEach(D,N=>c.put(Id(N.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return Ue.forEach(t,(a,c)=>{const p=s.get(a.collectionGroup);return(p?Ue.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),Ue.forEach(D,N=>this.En(e,a,N).next(U=>{const Q=this.An(c,N);return U.isEqual(Q)?Ue.resolve():this.vn(e,c,N,U,Q)}))))})}Rn(e,t,s,a){return tc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return tc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=tc(e);let c=new ii(Ku);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(p,D)=>{c=c.add(new Ql(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>c)}An(e,t){let s=new ii(Ku);const a=this.mn(t,e);if(null==a)return s;const c=ga(t);if(null!=c){const p=e.data.field(c.fieldPath);if(al(p))for(const D of p.arrayValue.values||[])s=s.add(new Ql(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Ql(t.indexId,e.key,Mh,a));return s}vn(e,t,s,a,c){mt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(D,N,U,Q,ye){const Be=D.getIterator(),ut=N.getIterator();let Ot=Bo(Be),Xt=Bo(ut);for(;Ot||Xt;){let on=!1,ir=!1;if(Ot&&Xt){const Ur=U(Ot,Xt);Ur<0?ir=!0:Ur>0&&(on=!0)}else null!=Ot?ir=!0:on=!0;on?(Q(Xt),Xt=Bo(ut)):ir?(ye(Ot),Ot=Bo(Be)):(Ot=Bo(Be),Xt=Bo(ut))}}(a,c,Ku,D=>{p.push(this.Rn(e,t,s,D))},D=>{p.push(this.Pn(e,t,s,D))}),Ue.waitFor(p)}Tn(e){let t=1;return bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,D)=>Ku(p,D)).filter((p,D,N)=>!D||0!==Ku(p,N[D-1]));const a=[];a.push(e);for(const p of s){const D=Ku(p,e),N=Ku(p,t);if(0===D)a[0]=e.Je();else if(D>0&&N<0)a.push(p),a.push(p.Je());else if(N>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2){if(this.bn(a[p],a[p+1]))return[];c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Mh,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Mh,[]]))}return c}bn(e,t){return Ku(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return Ue.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Kt())).next(xh)}}function Yf(i){return Yi(i,"collectionParents")}function tc(i){return Yi(i,"indexEntries")}function Lc(i){return Yi(i,"indexConfiguration")}function bd(i){return Yi(i,"indexState")}function xh(i){nn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const a=i[s].indexState.offset;Nu(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}const Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class So{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new So(e,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),a=i.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let D=0;const N=s.X({range:p},(Q,ye,Be)=>(D++,Be.delete()));c.push(N.next(()=>{nn(1===D)}));const U=[];for(const Q of t.mutations){const ye=G(e,Q.key.path,t.batchId);c.push(a.delete(ye)),U.push(Q.key)}return Ue.waitFor(c).next(()=>U)}function Rh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Kt();e=i.noDocument}return JSON.stringify(e).length}So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(41943040,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);class Ph{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){nn(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Ph(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).X({index:"userMutationsIndex",range:s},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Uc(e),p=_l(e);return p.add({}).next(D=>{nn("number"==typeof D);const N=new gh(D,t,s,a),U=function(Be,ut,Ot){const Xt=Ot.baseMutations.map(ir=>Kl(Be.fe,ir)),on=Ot.mutations.map(ir=>Kl(Be.fe,ir));return{userId:ut,batchId:Ot.batchId,localWriteTimeMs:Ot.localWriteTime.toMillis(),baseMutations:Xt,mutations:on}}(this.serializer,this.userId,N),Q=[];let ye=new ii((Be,ut)=>rn(Be.canonicalString(),ut.canonicalString()));for(const Be of a){const ut=G(this.userId,Be.key.path,D);ye=ye.add(Be.key.path.popLast()),Q.push(p.put(U)),Q.push(c.put(ut,le))}return ye.forEach(Be=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Be))}),e.addOnCommittedListener(()=>{this.Vn[D]=N.keys()}),Ue.waitFor(Q).next(()=>N)})}lookupMutationBatch(e,t){return _l(e).get(t).next(s=>s?(nn(s.userId===this.userId),Ta(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?Ue.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return _l(e).X({index:"userMutationsIndex",range:a},(p,D,N)=>{D.userId===this.userId&&(nn(D.batchId>=s),c=Ta(this.serializer,D)),N.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return _l(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{s=c.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).j("userMutationsIndex",t).next(s=>s.map(a=>Ta(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=P(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Uc(e).X({range:a},(p,D,N)=>{const[U,Q,ye]=p,Be=y(Q);if(U===this.userId&&t.path.isEqual(Be))return _l(e).get(ye).next(ut=>{if(!ut)throw Kt();nn(ut.userId===this.userId),c.push(Ta(this.serializer,ut))});N.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ii(rn);const a=[];return t.forEach(c=>{const p=P(this.userId,c.path),D=IDBKeyRange.lowerBound(p),N=Uc(e).X({range:D},(U,Q,ye)=>{const[Be,ut,Ot]=U,Xt=y(ut);Be===this.userId&&c.path.isEqual(Xt)?s=s.add(Ot):ye.done()});a.push(N)}),Ue.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=P(this.userId,s),p=IDBKeyRange.lowerBound(c);let D=new ii(rn);return Uc(e).X({range:p},(N,U,Q)=>{const[ye,Be,ut]=N,Ot=y(Be);ye===this.userId&&s.isPrefixOf(Ot)?Ot.length===a&&(D=D.add(ut)):Q.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(_l(e).get(c).next(p=>{if(null===p)throw Kt();nn(p.userId===this.userId),s.push(Ta(this.serializer,p))}))}),Ue.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return xg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ue.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ue.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Uc(e).X({range:s},(c,p,D)=>{if(c[0]===this.userId){const N=y(c[1]);a.push(N)}else D.done()}).next(()=>{nn(0===a.length)})})}containsKey(e,t){return Rg(e,this.userId,t)}xn(e){return nc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rg(i,e,t){const s=P(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let p=!1;return Uc(i).X({range:c,Y:!0},(D,N,U)=>{const[Q,ye,Be]=D;Q===e&&ye===a&&(p=!0),U.done()}).next(()=>p)}function _l(i){return Yi(i,"mutations")}function Uc(i){return Yi(i,"documentMutations")}function nc(i){return Yi(i,"mutationQueues")}class jo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new jo(0)}static Mn(){return new jo(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new jo(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>dn.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(nn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Bc(e).X((p,D)=>{const N=wd(D);N.sequenceNumber<=t&&null===s.get(N.targetId)&&(a++,c.push(this.removeTargetData(e,N)))}).next(()=>Ue.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Bc(e).X((s,a)=>{const c=wd(a);t(c)})}$n(e){return Xy(e).get("targetGlobalKey").next(t=>(nn(null!==t),t))}On(e,t){return Xy(e).put("targetGlobalKey",t)}Fn(e,t){return Bc(e).put(bh(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Va(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Bc(e).X({range:a,index:"queryTargetsIndex"},(p,D,N)=>{const U=wd(D);cl(t,U.target)&&(c=U,N.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=rc(e);return t.forEach(p=>{const D=vi(p.path);a.push(c.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,p))}),Ue.waitFor(a)}removeMatchingKeys(e,t,s){const a=rc(e);return Ue.forEach(t,c=>{const p=vi(c.path);return Ue.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=rc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=rc(e);let c=er();return a.X({range:s,Y:!0},(p,D,N)=>{const U=y(p[1]),Q=new Ht(U);c=c.add(Q)}).next(()=>c)}containsKey(e,t){const s=vi(t.path),a=IDBKeyRange.bound([s],[Ru(s)],!1,!0);let c=0;return rc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([p,D],N,U)=>{0!==p&&(c++,U.done())}).next(()=>c>0)}le(e,t){return Bc(e).get(t).next(s=>s?wd(s):null)}}function Bc(i){return Yi(i,"targets")}function Xy(i){return Yi(i,"targetGlobal")}function rc(i){return Yi(i,"targetDocuments")}function Qf([i,e],[t,s]){const a=rn(i,t);return 0===a?rn(e,s):a}class Y_{constructor(e){this.Ln=e,this.buffer=new ii(Qf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jf{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;mt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,h.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Si(s)?mt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield va(s)}yield t.Qn(3e5)}))}}class Q_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ue.resolve(ms.ct);const s=new Y_(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(Vc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vc):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,c,p,D,N,U;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ye=>(ye>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ye}`),a=this.params.maximumSequenceNumbersToCollect):a=ye,p=Date.now(),this.nthSequenceNumber(e,a))).next(ye=>(s=ye,D=Date.now(),this.removeTargets(e,s,t))).next(ye=>(c=ye,N=Date.now(),this.removeOrphanedDocuments(e,s))).next(ye=>(U=Date.now(),ni()<=ge.in.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-Q}ms\n\tDetermined least recently used ${a} in `+(D-p)+`ms\n\tRemoved ${c} targets in `+(N-D)+`ms\n\tRemoved ${ye} documents in `+(U-N)+`ms\nTotal Duration: ${U-Q}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:ye})))}}class ev{constructor(e,t){this.db=e,this.garbageCollector=function Xf(i,e){return new Q_(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Td(e,s)}removeReference(e,t,s){return Td(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Td(e,t)}Xn(e,t){return function(s,a){let c=!1;return nc(s).Z(p=>Rg(s,p,a).next(D=>(D&&(c=!0),Ue.resolve(!D)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(p,D)=>{if(D<=t){const N=this.Xn(e,p).next(U=>{if(!U)return c++,s.getEntry(e,p).next(()=>(s.removeEntry(p,dn.min()),rc(e).delete([0,vi(p.path)])))});a.push(N)}}).next(()=>Ue.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Td(e,t)}Yn(e,t){const s=rc(e);let a,c=ms.ct;return s.X({index:"documentTargetsIndex"},([p,D],{path:N,sequenceNumber:U})=>{0===p?(c!==ms.ct&&t(new Ht(y(a)),c),c=U,a=N):c=ms.ct}).next(()=>{c!==ms.ct&&t(new Ht(y(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return rc(i).put((s=i.currentSequenceNumber,{targetId:0,path:vi(e.path),sequenceNumber:s}));var s}class Pg{constructor(){this.changes=new zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ic(e).put(s)}removeEntry(e,t,s){return ic(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Oc(c),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=qr.newInvalidDocument(t);return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s=this.ts(t,c)}).next(()=>s)}es(e,t){let s={size:0,document:qr.newInvalidDocument(t)};return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s={document:this.ts(t,c),size:Rh(c)}}).next(()=>s)}getEntries(e,t){let s=As();return this.ns(e,t,(a,c)=>{const p=this.ts(a,c);s=s.insert(a,p)}).next(()=>s)}ss(e,t){let s=As(),a=new vr(Ht.comparator);return this.ns(e,t,(c,p)=>{const D=this.ts(c,p);s=s.insert(c,D),a=a.insert(c,Rh(p))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return Ue.resolve();let a=new ii(Og);t.forEach(N=>a=a.add(N));const c=IDBKeyRange.bound(Ad(a.first()),Ad(a.last())),p=a.getIterator();let D=p.getNext();return ic(e).X({index:"documentKeyIndex",range:c},(N,U,Q)=>{const ye=Ht.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;D&&Og(D,ye)<0;)s(D,null),D=p.getNext();D&&D.isEqual(ye)&&(s(D,U),D=p.hasNext()?p.getNext():null),D?Q.G(Ad(D)):Q.done()}).next(()=>{for(;D;)s(D,null),D=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const c=t.path,p=[c.popLast().toArray(),c.lastSegment(),Oc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ic(e).j(IDBKeyRange.bound(p,D,!0)).next(N=>{let U=As();for(const Q of N){const ye=this.ts(Ht.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);ye.isFoundDocument()&&(qt(t,ye)||a.has(ye.key))&&(U=U.insert(ye.key,ye))}return U})}getAllFromCollectionGroup(e,t,s,a){let c=As();const p=Ng(t,s),D=Ng(t,bs.max());return ic(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,D,!0)},(N,U,Q)=>{const ye=this.ts(Ht.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);c=c.insert(ye.key,ye),c.size===a&&Q.done()}).next(()=>c)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(nn(!!t),t))}Zn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function Z_(i,e){let t;if(e.document)t=os(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ht.fromSegments(e.noDocument.path),a=yl(e.noDocument.readTime);t=qr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Kt();{const s=Ht.fromSegments(e.unknownDocument.path),a=yl(e.unknownDocument.version);t=qr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Rr(s[0],s[1]);return dn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(dn.min()))return s}return qr.newInvalidDocument(e)}}function Ua(i){return new tv(i)}class nv extends Pg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new zs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new ii((c,p)=>rn(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const D=this.us.get(c);if(t.push(this.os.removeEntry(e,c,D.readTime)),p.isValidDocument()){const N=bg(this.os.serializer,p);a=a.add(c.path.popLast()),s+=Rh(N)-D.size,t.push(this.os.addEntry(e,c,N))}else if(s-=D.size,this.trackRemovals){const N=bg(this.os.serializer,p.convertToNoDocument(dn.min()));t.push(this.os.addEntry(e,c,N))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,s)),Ue.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((c,p)=>{this.us.set(c,{size:p,readTime:s.get(c).readTime})}),s))}}function ep(i){return Yi(i,"remoteDocumentGlobal")}function ic(i){return Yi(i,"remoteDocumentsV14")}function Ad(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ng(i,e){const t=e.documentKey.path.toArray();return[i,Oc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Og(i,e){const t=i.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=rn(t[c],s[c]),a)return a;return a=rn(t.length,s.length),a||(a=rn(t[t.length-2],s[s.length-2]),a||rn(t[t.length-1],s[s.length-1]))}class kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&dd(s.mutation,a,rs.empty(),Rr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,er()).next(()=>s))}getLocalViewOfDocuments(e,t,s=er()){const a=ia();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let p=vu();return c.forEach((D,N)=>{p=p.insert(D,N.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,er()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,D)=>{t.set(p,D)})})}computeViews(e,t,s,a){let c=As();const p=$u(),D=$u();return t.forEach((N,U)=>{const Q=s.get(U.key);a.has(U.key)&&(void 0===Q||Q.mutation instanceof Xa)?c=c.insert(U.key,U):void 0!==Q?(p.set(U.key,Q.mutation.getFieldMask()),dd(Q.mutation,U,Q.mutation.getFieldMask(),Rr.now())):p.set(U.key,rs.empty())}),this.recalculateAndSaveOverlays(e,c).next(N=>(N.forEach((U,Q)=>p.set(U,Q)),t.forEach((U,Q)=>{var ye;return D.set(U,new kg(Q,null!==(ye=p.get(U))&&void 0!==ye?ye:null))}),D))}recalculateAndSaveOverlays(e,t){const s=$u();let a=new vr((p,D)=>p-D),c=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const D of p)D.keys().forEach(N=>{const U=t.get(N);if(null===U)return;let Q=s.get(N)||rs.empty();Q=D.applyToLocalView(U,Q),s.set(N,Q);const ye=(a.get(D.batchId)||er()).add(N);a=a.insert(D.batchId,ye)})}).next(()=>{const p=[],D=a.getReverseIterator();for(;D.hasNext();){const N=D.getNext(),U=N.key,Q=N.value,ye=Sc();Q.forEach(Be=>{if(!c.has(Be)){const ut=fh(t.get(Be),s.get(Be));null!==ut&&ye.set(Be,ut),c=c.add(Be)}}),p.push(this.documentOverlayCache.saveOverlays(e,U,ye))}return Ue.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Ht.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):Ue.resolve(ia());let D=-1,N=c;return p.next(U=>Ue.forEach(U,(Q,ye)=>(D<ye.largestBatchId&&(D=ye.largestBatchId),c.get(Q)?Ue.resolve():this.remoteDocumentCache.getEntry(e,Q).next(Be=>{N=N.insert(Q,Be)}))).next(()=>this.populateOverlays(e,U,c)).next(()=>this.computeViews(e,N,U,er())).next(Q=>({batchId:D,changes:od(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ht(t)).next(s=>{let a=vu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let c=vu();return this.indexManager.getCollectionParents(e,a).next(p=>Ue.forEach(p,D=>{const N=(U=t,Q=D.child(a),new Qa(Q,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,Q;return this.getDocumentsMatchingCollectionQuery(e,N,s).next(U=>{U.forEach((Q,ye)=>{c=c.insert(Q,ye)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(c=>{a.forEach((D,N)=>{const U=N.getKey();null===c.get(U)&&(c=c.insert(U,qr.newInvalidDocument(U)))});let p=vu();return c.forEach((D,N)=>{const U=a.get(D);void 0!==U&&dd(U.mutation,N,rs.empty(),Rr.now()),qt(t,N)&&(p=p.insert(D,N))}),p})}}class rv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ue.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Qi(s.createTime)}),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:kc(s.bundledQuery),readTime:Qi(s.readTime)}),Ue.resolve();var s}}class iv{constructor(){this.overlays=new vr(Ht.comparator),this.ls=new Map}getOverlay(e,t){return Ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ia();return Ue.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.we(e,t,c)}),Ue.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(s)),Ue.resolve()}getOverlaysForCollection(e,t,s){const a=ia(),c=t.length+1,p=new Ht(t.child("")),D=this.overlays.getIteratorFrom(p);for(;D.hasNext();){const N=D.getNext().value,U=N.getKey();if(!t.isPrefixOf(U.path))break;U.path.length===c&&N.largestBatchId>s&&a.set(N.getKey(),N)}return Ue.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new vr((U,Q)=>U-Q);const p=this.overlays.getIterator();for(;p.hasNext();){const U=p.getNext().value;if(U.getKey().getCollectionGroup()===t&&U.largestBatchId>s){let Q=c.get(U.largestBatchId);null===Q&&(Q=ia(),c=c.insert(U.largestBatchId,Q)),Q.set(U.getKey(),U)}}const D=ia(),N=c.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((U,Q)=>D.set(U,Q)),!(D.size()>=a)););return Ue.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let c=this.ls.get(t);void 0===c&&(c=er(),this.ls.set(t,c)),this.ls.set(t,c.add(s.key))}}class Qn{constructor(){this.fs=new ii(Ss.ds),this.ws=new ii(Ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Ss(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Ss(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Ht(new In([])),s=new Ss(t,e),a=new Ss(t,e+1),c=[];return this.ws.forEachInRange([s,a],p=>{this.ys(p),c.push(p.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ht(new In([])),s=new Ss(t,e),a=new Ss(t,e+1);let c=er();return this.ws.forEachInRange([s,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new Ss(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ss{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ht.comparator(e.key,t.key)||rn(e.As,t.As)}static _s(e,t){return rn(e.As,t.As)||Ht.comparator(e.key,t.key)}}class Lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ii(Ss.ds)}checkEmpty(e){return Ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.vs;this.vs++;const p=new gh(c,t,s,a);this.mutationQueue.push(p);for(const D of a)this.Rs=this.Rs.add(new Ss(D.key,c)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Ue.resolve(p)}lookupMutationBatch(e,t){return Ue.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return Ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ss(t,0),a=new Ss(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([s,a],p=>{const D=this.Ps(p.As);c.push(D)}),Ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ii(rn);return t.forEach(a=>{const c=new Ss(a,0),p=new Ss(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,p],D=>{s=s.add(D.As)})}),Ue.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Ht.isDocumentKey(c)||(c=c.child(""));const p=new Ss(new Ht(c),0);let D=new ii(rn);return this.Rs.forEachWhile(N=>{const U=N.key.path;return!!s.isPrefixOf(U)&&(U.length===a&&(D=D.add(N.As)),!0)},p),Ue.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){nn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Ue.forEach(t.mutations,a=>{const c=new Ss(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Ss(t,0),a=this.Rs.firstAfterOrEqual(s);return Ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Ue.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vg{constructor(e){this.Ds=e,this.docs=new vr(Ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,p=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ue.resolve(s?s.document.mutableCopy():qr.newInvalidDocument(t))}getEntries(e,t){let s=As();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():qr.newInvalidDocument(a))}),Ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=As();const p=t.path,D=new Ht(p.child("")),N=this.docs.getIteratorFrom(D);for(;N.hasNext();){const{key:U,value:{document:Q}}=N.getNext();if(!p.isPrefixOf(U.path))break;U.path.length>p.length+1||Nu(Ol(Q),s)<=0||(a.has(Q.key)||qt(t,Q))&&(c=c.insert(Q.key,Q.mutableCopy()))}return Ue.resolve(c)}getAllFromCollectionGroup(e,t,s,a){Kt()}Cs(e,t){return Ue.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new sv(this)}getSize(e){return Ue.resolve(this.size)}}class sv extends Pg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),Ue.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ov{constructor(e){this.persistence=e,this.xs=new zs(t=>Va(t),cl),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Qn,this.targetCount=0,this.Ms=jo.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),Ue.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.Fn(t),Ue.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.xs.forEach((p,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),Ue.waitFor(c).next(()=>a)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return Ue.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),Ue.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),Ue.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return Ue.resolve(s)}containsKey(e,t){return Ue.resolve(this.ks.containsKey(t))}}class Nh{constructor(e,t){this.$s={},this.overlays={},this.Os=new ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ov(this),this.indexManager=new Qy,this.remoteDocumentCache=new Vg(s=>this.referenceDelegate.Ls(s)),this.serializer=new Ch(t),this.qs=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Lg(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){mt("MemoryPersistence","Starting transaction:",e);const a=new av(this.Os.next());return this.referenceDelegate.Us(),s(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return Ue.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class av extends rl{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Qs=new Qn,this.js=null}static zs(e){return new Sd(e)}get Ws(){if(this.js)return this.js;throw Kt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),Ue.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Ws,s=>{const a=Ht.fromPath(s);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,dn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ue.or([()=>Ue.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uv{constructor(e){this.serializer=e}O(e,t,s,a){const c=new Jo("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T,{unique:!0}),D.createObjectStore("documentMutations"),lv(e),function(D){D.createObjectStore("remoteDocuments")}(e));let p=Ue.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),lv(e)),p=p.next(()=>function(D){const N=D.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dn.min().toTimestamp(),targetCount:0};return N.put("targetGlobalKey",U)}(c))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(D,N){return N.store("mutations").j().next(U=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T,{unique:!0});const Q=N.store("mutations"),ye=U.map(Be=>Q.put(Be));return Ue.waitFor(ye)})}(e,c))),p=p.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ys(c))),s<6&&a>=6&&(p=p.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),s<7&&a>=7&&(p=p.next(()=>this.Zs(c))),s<8&&a>=8&&(p=p.next(()=>this.ti(e,c))),s<9&&a>=9&&(p=p.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.ei(c))),s<11&&a>=11&&(p=p.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(D){const N=D.createObjectStore("documentOverlays",{keyPath:ea});N.createIndex("collectionPathOverlayIndex",Pa,{unique:!1}),N.createIndex("collectionGroupOverlayIndex",Ts,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(D){const N=D.createObjectStore("remoteDocumentsV14",{keyPath:fe});N.createIndex("documentKeyIndex",nt),N.createIndex("collectionGroupIndex",Lt)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.si(e,c))),s<15&&a>=15&&(p=p.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:li}).createIndex("sequenceNumberIndex",Xo,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Gs}).createIndex("documentKeyIndex",Ea,{unique:!1})}(e))),p}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Rh(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>Ue.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(D=>Ue.forEach(D,N=>{nn(N.userId===c.userId);const U=Ta(this.serializer,N);return xg(e,c.userId,U).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.X((p,D)=>{const N=new In(p),U=[0,vi(N)];c.push(t.get(U).next(Q=>Q?Ue.resolve():t.put({targetId:0,path:vi(N),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Ue.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Mi});const s=t.store("collectionParents"),a=new Zf,c=p=>{if(a.add(p)){const D=p.lastSegment(),N=p.popLast();return s.put({collectionId:D,parent:vi(N)})}};return t.store("remoteDocuments").X({Y:!0},(p,D)=>{const N=new In(p);return c(N.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([p,D,N],U)=>{const Q=y(D);return c(Q.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const c=wd(a),p=bh(this.serializer,c);return t.put(p)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((c,p)=>{const D=t.store("remoteDocumentsV14"),N=(U=p,U.document?new Ht(In.fromString(U.document.name).popFirst(5)):U.noDocument?Ht.fromSegments(U.noDocument.path):U.unknownDocument?Ht.fromSegments(U.unknownDocument.path):Kt()).path.toArray();var U;const Q={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(D.put(Q))}).next(()=>Ue.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Ua(this.serializer),c=new Nh(Sd.zs,this.serializer.fe);return s.j().next(p=>{const D=new Map;return p.forEach(N=>{var U;let Q=null!==(U=D.get(N.userId))&&void 0!==U?U:er();Ta(this.serializer,N).keys().forEach(ye=>Q=Q.add(ye)),D.set(N.userId,Q)}),Ue.forEach(D,(N,U)=>{const Q=new gn(U),ye=Sh.de(this.serializer,Q),Be=c.getIndexManager(Q),ut=Ph.de(Q,this.serializer,Be,c.referenceDelegate);return new Fg(a,ut,ye,Be).recalculateAndSaveOverlaysForDocumentKeys(new wa(t,ms.ct),N).next()})})}}function lv(i){i.createObjectStore("targetDocuments",{keyPath:sn}).createIndex("documentTargetsIndex",Kn,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mn,{unique:!0}),i.createObjectStore("targetGlobal")}const kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,t,s,a,c,p,D,N,U,Q,ye=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=c,this.window=p,this.document=D,this.ri=U,this.oi=Q,this.ui=ye,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Be=>Promise.resolve(),!Fh.D())throw new vt(qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,a),this.di=t+"main",this.serializer=new Ch(N),this.wi=new uo(this.di,this.ui,new uv(this.serializer)),this.Bs=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ua(this.serializer),this.qs=new Zl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Q&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(qe.FAILED_PRECONDITION,kh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,h.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,h.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,h.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Si(e))return mt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return mt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return eu(e).get("owner").next(t=>Ue.resolve(this.Ri(t)))}Pi(e){return Lh(e).delete(this.clientId)}bi(){var e=this;return(0,h.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Yi(s,"clientMetadata");return a.j().next(c=>{const p=e.Si(c,18e5),D=c.filter(N=>-1===p.indexOf(N));return Ue.forEach(D,N=>a.delete(N.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ue.resolve(!0):eu(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new vt(qe.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&mt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,h.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new wa(t,ms.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Ph.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){mt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.ui)?il:14===p?Fl:13===p?ku:12===p?Fi:11===p?lu:void Kt();var p;let D;return this.wi.runTransaction(e,a,c,N=>(D=new wa(N,this.Os?this.Os.next():ms.ct),"readwrite-primary"===t?this.Ti(D).next(U=>!!U||this.Ei(D)).next(U=>{if(!U)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new vt(qe.FAILED_PRECONDITION,ya);return s(D)}).next(U=>this.vi(D).next(()=>U)):this.Oi(D).next(()=>s(D)))).then(N=>(D.raiseOnCommittedEvent(),N))}Oi(e){return eu(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new vt(qe.FAILED_PRECONDITION,kh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eu(e).put("owner",t)}static D(){return uo.D()}Ai(e){const t=eu(e);return t.get("owner").next(s=>this.Ri(s)?(mt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ue.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(pr(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,de.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return mt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return pr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eu(i){return Yi(i,"owner")}function Lh(i){return Yi(i,"clientMetadata")}function Md(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class xd{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=er(),a=er();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xd(e,t.fromCache,s,a)}}class Ug{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,s)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(ch(t))return Ue.resolve(null);let s=I(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=J(t,null,"F"),s=I(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const p=er(...c);return this.Ui.getDocuments(e,p).next(D=>this.indexManager.getMinOffset(e,s).next(N=>{const U=this.ji(t,D);return this.zi(t,U,p,N.readTime)?this.Ki(e,J(t,null,"F")):this.Wi(e,U,t,N)}))})))}Gi(e,t,s,a){return ch(t)||a.isEqual(dn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(c=>{const p=this.ji(t,c);return this.zi(t,p,s,a)?this.Qi(e,t):(ni()<=ge.in.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),kt(t)),this.Wi(e,p,t,ma(a,-1)))})}ji(e,t){let s=new ii(lr(e));return t.forEach((a,c)=>{qt(e,c)&&(s=s.add(c))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return ni()<=ge.in.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",kt(t)),this.Ui.getDocumentsMatchingQuery(e,t,bs.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class J_{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new vr(rn),this.Yi=new zs(c=>Va(c),cl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function cv(i,e,t,s){return new J_(i,e,t,s)}function dv(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,h.Z)(function*(i,e){const t=$t(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const p=[],D=[];let N=er();for(const U of a){p.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}for(const U of c){D.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}return t.localDocuments.getDocuments(s,N).next(U=>({er:U,removedBatchIds:p,addedBatchIds:D}))})})}),tp.apply(this,arguments)}function Bg(i,e){const t=$t(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(p,D,N,U){const Q=N.batch,ye=Q.keys();let Be=Ue.resolve();return ye.forEach(ut=>{Be=Be.next(()=>U.getEntry(D,ut)).next(Ot=>{const Xt=N.docVersions.get(ut);nn(null!==Xt),Ot.version.compareTo(Xt)<0&&(Q.applyToRemoteDocument(Ot,N),Ot.isValidDocument()&&(Ot.setReadTime(N.commitVersion),U.addEntry(Ot)))})}),Be.next(()=>p.mutationQueue.removeMutationBatch(D,Q))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let D=er();for(let N=0;N<p.mutationResults.length;++N)p.mutationResults[N].transformResults.length>0&&(D=D.add(p.batch.mutations[N].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hv(i){const e=$t(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fv(i,e){const t=$t(i),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((Q,ye)=>{const Be=a.get(ye);if(!Be)return;D.push(t.Bs.removeMatchingKeys(c,Q.removedDocuments,ye).next(()=>t.Bs.addMatchingKeys(c,Q.addedDocuments,ye)));let ut=Be.withSequenceNumber(c.currentSequenceNumber);var Ot,Xt,on;null!==e.targetMismatches.get(ye)?ut=ut.withResumeToken(_i.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):Q.resumeToken.approximateByteSize()>0&&(ut=ut.withResumeToken(Q.resumeToken,s)),a=a.insert(ye,ut),Xt=ut,on=Q,(0===(Ot=Be).resumeToken.approximateByteSize()||Xt.snapshotVersion.toMicroseconds()-Ot.snapshotVersion.toMicroseconds()>=3e8||on.addedDocuments.size+on.modifiedDocuments.size+on.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(c,ut))});let N=As(),U=er();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(c,Q))}),D.push(sc(c,p,e.documentUpdates).next(Q=>{N=Q.nr,U=Q.sr})),!s.isEqual(dn.min())){const Q=t.Bs.getLastRemoteSnapshotVersion(c).next(ye=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,s));D.push(Q)}return Ue.waitFor(D).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,N,U)).next(()=>N)}).then(c=>(t.Ji=a,c))}function sc(i,e,t){let s=er(),a=er();return t.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let p=As();return t.forEach((D,N)=>{const U=c.get(D);N.isFoundDocument()!==U.isFoundDocument()&&(a=a.add(D)),N.isNoDocument()&&N.version.isEqual(dn.min())?(e.removeEntry(D,N.readTime),p=p.insert(D,N)):!U.isValidDocument()||N.version.compareTo(U.version)>0||0===N.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(N),p=p.insert(D,N)):mt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",U.version," Watch version:",N.version)}),{nr:p,sr:a}})}function pv(i,e){const t=$t(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oc(i,e){const t=$t(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(c=>c?(a=c,Ue.resolve(a)):t.Bs.allocateTargetId(s).next(p=>(a=new Iu(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function qu(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,h.Z)(function*(i,e,t){const s=$t(i),a=s.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Si(p))throw p;mt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),np.apply(this,arguments)}function Rd(i,e,t){const s=$t(i);let a=dn.min(),c=er();return s.persistence.runTransaction("Execute query","readonly",p=>function(D,N,U){const Q=$t(D),ye=Q.Yi.get(U);return void 0!==ye?Ue.resolve(Q.Ji.get(ye)):Q.Bs.getTargetData(N,U)}(s,p,I(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,D.targetId).next(N=>{c=N})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,t?a:dn.min(),t?c:er())).next(D=>(Hg(s,Dn(e),D),{documents:D,ir:c})))}function jg(i,e){const t=$t(i),s=$t(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.le(c,e).next(p=>p?p.target:null))}function $g(i,e){const t=$t(i),s=t.Xi.get(e)||dn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,ma(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hg(t,e,a),a))}function Hg(i,e,t){let s=i.Xi.get(e)||dn.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Xi.set(e,s)}function rp(){return rp=(0,h.Z)(function*(i,e,t,s){const a=$t(i);let c=er(),p=As();for(const U of t){const Q=e.rr(U.metadata.name);U.document&&(c=c.add(Q));const ye=e.ur(U);ye.setReadTime(e.cr(U.metadata.readTime)),p=p.insert(Q,ye)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),N=yield oc(a,(U=s,I(ju(In.fromString(`__bundle__/docs/${U}`)))));var U;return a.persistence.runTransaction("Apply bundle documents","readwrite",U=>sc(U,D,p).next(Q=>(D.apply(U),Q)).next(Q=>a.Bs.removeMatchingKeysForTargetId(U,N.targetId).next(()=>a.Bs.addMatchingKeys(U,c,N.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(U,Q.nr,Q.sr)).next(()=>Q.nr)))}),rp.apply(this,arguments)}function Gg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,h.Z)(function*(i,e,t=er()){const s=yield oc(i,I(kc(e.bundledQuery))),a=$t(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=Qi(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.qs.saveNamedQuery(c,e);const D=s.withResumeToken(_i.EMPTY_BYTE_STRING,p);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(c,D).next(()=>a.Bs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,s.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),ip.apply(this,arguments)}function sp(i,e){return`firestore_clients_${i}_${e}`}function op(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pd(i,e){return`firestore_targets_${i}_${e}`}class ap{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new vt(a.error.code,a.error.message))),p?new ap(e,t,a.state,c):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new vt(s.error.code,s.error.message))),c?new ac(e,s.state,a):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=dh();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=ys(s.activeTargetIds[p]),c=c.add(s.activeTargetIds[p]);return a?new Vh(e,c):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zg(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class El{constructor(){this.activeTargetIds=dh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,s,a,c){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new vr(rn),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=sp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new El),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,h.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(sp(e.persistenceKey,a));if(c){const p=Vh.ar(a,c);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pd(this.persistenceKey,e));if(s){const a=ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return mt("SharedClientState","READ",e,t),t}setItem(e,t){mt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){mt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(mt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,h.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(c){let p=ms.ct;if(null!=c)try{const D=JSON.parse(c);nn("number"==typeof D),p=D}catch(D){pr("SharedClientState","Failed to read sequence number from WebStorage",D)}return p}(s.newValue);a!==ms.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ap(this.currentUser,e,t,s),c=op(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Pd(this.persistenceKey,e),c=new ac(e,t,s);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Vh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ap.ar(new gn(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return ac.ar(a,t)}br(e){return zg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,h.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);mt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(s),p=[],D=[];return c.forEach(N=>{a.has(N)||p.push(N)}),a.forEach(N=>{c.has(N)||D.push(N)}),this.syncEngine.Wr(p,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class up{constructor(){this.Hr=new El,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new El,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bh{Yr(e){}shutdown(){}}class Ba{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nd=null;function lp(){return null===Nd?Nd=268435456+Math.round(2147483648*Math.random()):Nd++,"0x"+Nd.toString(16)}const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ws="WebChannelConnection";class Wg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,c){const p=lp(),D=this.To(e,t);mt("RestConnection",`Sending RPC '${e}' ${p}:`,D,s);const N={};return this.Eo(N,a,c),this.Ao(e,D,N,s).then(U=>(mt("RestConnection",`Received RPC '${e}' ${p}: `,U),U),U=>{throw xr("RestConnection",`RPC '${e}' ${p} failed with error: `,U,"url: ",D,"request:",s),U})}vo(e,t,s,a,c,p){return this.Io(e,t,s,a,c)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${cp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const c=lp();return new Promise((p,D)=>{const N=new cn;N.setWithCredentials(!0),N.listenOnce(M.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case V.NO_ERROR:const Q=N.getResponseJson();mt(Ws,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(Q)),p(Q);break;case V.TIMEOUT:mt(Ws,`RPC '${e}' ${c} timed out`),D(new vt(qe.DEADLINE_EXCEEDED,"Request time out"));break;case V.HTTP_ERROR:const ye=N.getStatus();if(mt(Ws,`RPC '${e}' ${c} failed with status:`,ye,"response text:",N.getResponseText()),ye>0){let Be=N.getResponseJson();Array.isArray(Be)&&(Be=Be[0]);const ut=Be?.error;if(ut&&ut.status&&ut.message){const Ot=function(Xt){const on=Xt.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(on)>=0?on:qe.UNKNOWN}(ut.status);D(new vt(Ot,ut.message))}else D(new vt(qe.UNKNOWN,"Server responded with status "+N.getStatus()))}else D(new vt(qe.UNAVAILABLE,"Connection failed."));break;default:Kt()}}finally{mt(Ws,`RPC '${e}' ${c} completed.`)}});const U=JSON.stringify(a);mt(Ws,`RPC '${e}' ${c} sending request:`,a),N.send(t,"POST",U,s,15)})}Ro(e,t,s){const a=lp(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=ou(),D=b(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;void 0!==U&&(N.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(N.xmlHttpFactory=new Je({})),this.Eo(N.initMessageHeaders,t,s),N.encodeInitMessageHeaders=!0;const Q=c.join("");mt(Ws,`Creating RPC '${e}' stream ${a}: ${Q}`,N);const ye=p.createWebChannel(Q,N);let Be=!1,ut=!1;const Ot=new Zu({ro:on=>{ut?mt(Ws,`Not sending because RPC '${e}' stream ${a} is closed:`,on):(Be||(mt(Ws,`Opening RPC '${e}' stream ${a} transport.`),ye.open(),Be=!0),mt(Ws,`RPC '${e}' stream ${a} sending:`,on),ye.send(on))},oo:()=>ye.close()}),Xt=(on,ir,Ur)=>{on.listen(ir,_r=>{try{Ur(_r)}catch(qs){setTimeout(()=>{throw qs},0)}})};return Xt(ye,ct.EventType.OPEN,()=>{ut||mt(Ws,`RPC '${e}' stream ${a} transport opened.`)}),Xt(ye,ct.EventType.CLOSE,()=>{ut||(ut=!0,mt(Ws,`RPC '${e}' stream ${a} transport closed`),Ot.wo())}),Xt(ye,ct.EventType.ERROR,on=>{ut||(ut=!0,xr(Ws,`RPC '${e}' stream ${a} transport errored:`,on),Ot.wo(new vt(qe.UNAVAILABLE,"The operation could not be completed")))}),Xt(ye,ct.EventType.MESSAGE,on=>{var ir;if(!ut){const Ur=on.data[0];nn(!!Ur);const _r=Ur,qs=_r.error||(null===(ir=_r[0])||void 0===ir?void 0:ir.error);if(qs){mt(Ws,`RPC '${e}' stream ${a} received error:`,qs);const Rs=qs.status;let xi=function(Su){const vy=_s[Su];if(void 0!==vy)return zu(vy)}(Rs),Go=qs.message;void 0===xi&&(xi=qe.INTERNAL,Go="Unknown error status: "+Rs+" with message "+qs.message),ut=!0,Ot.wo(new vt(xi,Go)),ye.close()}else mt(Ws,`RPC '${e}' stream ${a} received:`,Ur),Ot._o(Ur)}}),Xt(D,z.STAT_EVENT,on=>{on.stat===_e.PROXY?mt(Ws,`RPC '${e}' stream ${a} detected buffering proxy`):on.stat===_e.NOPROXY&&mt(Ws,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Ot.fo()},0),Ot}}function jh(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function jc(i){return new W_(i,!0)}class Kg{constructor(e,t,s=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&mt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Od{constructor(e,t,s,a,c,p,D,N){this.ii=e,this.$o=s,this.Oo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=D,this.listener=N,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Kg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,h.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,h.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,h.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===qe.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===qe.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new vt(qe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,h.Z)(function*(){e.state=0,e.start()}))}tu(e){return mt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Od{constructor(e,t,s,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function By(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(N=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===N?1:"REMOVE"===N?2:"CURRENT"===N?3:"RESET"===N?4:Kt(),a=e.targetChange.targetIds||[],c=function(N,U){return N.useProto3Json?(nn(void 0===U||"string"==typeof U),_i.fromBase64String(U||"")):(nn(void 0===U||U instanceof Uint8Array),_i.fromUint8Array(U||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,D=p&&function(N){const U=void 0===N.code?qe.UNKNOWN:zu(N.code);return new vt(U,N.message||"")}(p);t=new Eh(s,a,c,D||null)}else if("documentChange"in e){const s=e.documentChange,a=wu(i,s.document.name),c=Qi(s.document.updateTime),p=s.document.createTime?Qi(s.document.createTime):dn.min(),D=new is({mapValue:{fields:s.document.fields}}),N=qr.newFoundDocument(a,c,p,D);t=new _h(s.targetIds||[],s.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const s=e.documentDelete,a=wu(i,s.document),c=s.readTime?Qi(s.readTime):dn.min(),p=qr.newNoDocument(a,c);t=new _h([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=wu(i,s.document);t=new _h([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Kt();{const s=e.filter,{count:a=0,unchangedNames:c}=s,p=new Oy(a,c);t=new _g(s.targetId,p)}}var N;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return dn.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?dn.min():c.readTime?Qi(c.readTime):dn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(a,c){let p;const D=c.target;if(p=Bu(D)?{documents:Dg(a,D)}:{query:jf(a,D)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=Vy(a,c.resumeToken);const N=md(a,c.expectedCount);null!==N&&(p.expectedCount=N)}else if(c.snapshotVersion.compareTo(dn.min())>0){p.readTime=gl(a,c.snapshotVersion.toTimestamp());const N=md(a,c.expectedCount);null!==N&&(p.expectedCount=N)}return p}(this.serializer,e);const s=function $y(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class hp extends Od{constructor(e,t,s,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(nn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jy(i,e){return i&&i.length>0?(nn(void 0!==e),i.map(t=>function(s,a){let c=Qi(s.updateTime?s.updateTime:a);return c.isEqual(dn.min())&&(c=Qi(a)),new xy(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Qi(e.commitTime);return this.listener.cu(s,t)}return nn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Kl(this.serializer,s))};this.Wo(t)}}class fp extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new vt(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new vt(qe.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.vo(e,t,s,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new vt(qe.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class mv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(pr(t),this.mu=!1):mt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yv{constructor(e,t,s,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(D=>{s.enqueueAndForget((0,h.Z)(function*(){var N;lc(p)&&(mt("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,h.Z)(function*(U){const Q=$t(U);Q.vu.add(4),yield uc(Q),Q.bu.set("Unknown"),Q.vu.delete(4),yield kd(Q)}),function(U){return N.apply(this,arguments)})(p))}))}),this.bu=new mv(s,a)}}function kd(i){return gp.apply(this,arguments)}function gp(){return gp=(0,h.Z)(function*(i){if(lc(i))for(const e of i.Ru)yield e(!0)}),gp.apply(this,arguments)}function uc(i){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,h.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Zg.apply(this,arguments)}function Hh(i,e){const t=$t(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Fd(t)?yp(t):Cl(t).Ko()&&zh(t,e))}function Gh(i,e){const t=$t(i),s=Cl(t);t.Au.delete(e),s.Ko()&&mp(t,e),0===t.Au.size&&(s.Ko()?s.jo():lc(t)&&t.bu.set("Unknown"))}function zh(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cl(i).su(e)}function mp(i,e){i.Vu.qt(e),Cl(i).iu(e)}function yp(i){i.Vu=new gd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),Cl(i).start(),i.bu.gu()}function Fd(i){return lc(i)&&!Cl(i).Uo()&&i.Au.size>0}function lc(i){return 0===$t(i).vu.size}function vv(i){i.Vu=void 0}function X_(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,h.Z)(function*(i){i.Au.forEach((e,t)=>{zh(i,e)})}),Yg.apply(this,arguments)}function e0(i,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,h.Z)(function*(i,e){vv(i),Fd(i)?(i.bu.Iu(e),yp(i)):i.bu.set("Unknown")}),Qg.apply(this,arguments)}function t0(i,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,h.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Eh&&2===e.state&&e.cause)try{yield(s=(0,h.Z)(function*(a,c){const p=c.cause;for(const D of c.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,p),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,c){return s.apply(this,arguments)})(i,e)}catch(s){mt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vp(i,s)}else if(e instanceof _h?i.Vu.Ht(e):e instanceof _g?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(dn.min()))try{const s=yield hv(i.localStore);t.compareTo(s)>=0&&(yield function(a,c){const p=a.Vu.ce(c);return p.targetChanges.forEach((D,N)=>{if(D.resumeToken.approximateByteSize()>0){const U=a.Au.get(N);U&&a.Au.set(N,U.withResumeToken(D.resumeToken,c))}}),p.targetMismatches.forEach((D,N)=>{const U=a.Au.get(D);if(!U)return;a.Au.set(D,U.withResumeToken(_i.EMPTY_BYTE_STRING,U.snapshotVersion)),mp(a,D);const Q=new Iu(U.target,D,N,U.sequenceNumber);zh(a,Q)}),a.remoteSyncer.applyRemoteEvent(p)}(i,t))}catch(s){mt("RemoteStore","Failed to raise snapshot:",s),yield vp(i,s)}var s}),Jg.apply(this,arguments)}function vp(i,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,h.Z)(function*(i,e,t){if(!Si(e))throw e;i.vu.add(1),yield uc(i),i.bu.set("Offline"),t||(t=()=>hv(i.localStore)),i.asyncQueue.enqueueRetryable((0,h.Z)(function*(){mt("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield kd(i)}))}),Xg.apply(this,arguments)}function Yu(i,e){return e().catch(t=>vp(i,t,e))}function wl(i){return _p.apply(this,arguments)}function _p(){return _p=(0,h.Z)(function*(i){const e=$t(i),t=tu(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;em(e);)try{const a=yield pv(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Ep(e,a)}catch(a){yield vp(e,a)}wp(e)&&Wh(e)}),_p.apply(this,arguments)}function em(i){return lc(i)&&i.Eu.length<10}function Ep(i,e){i.Eu.push(e);const t=tu(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function wp(i){return lc(i)&&!tu(i).Uo()&&i.Eu.length>0}function Wh(i){tu(i).start()}function _v(i){return Du.apply(this,arguments)}function Du(){return Du=(0,h.Z)(function*(i){tu(i).hu()}),Du.apply(this,arguments)}function tm(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,h.Z)(function*(i){const e=tu(i);for(const t of i.Eu)e.uu(t.mutations)}),Ip.apply(this,arguments)}function Ev(i,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,h.Z)(function*(i,e,t){const s=i.Eu.shift(),a=mh.from(s,e,t);yield Yu(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield wl(i)}),Kh.apply(this,arguments)}function wv(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,h.Z)(function*(i,e){var t;e&&tu(i).ou&&(yield(t=(0,h.Z)(function*(s,a){if(yg(c=a.code)&&c!==qe.ABORTED){const p=s.Eu.shift();tu(s).Qo(),yield Yu(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield wl(s)}var c}),function(s,a){return t.apply(this,arguments)})(i,e)),wp(i)&&Wh(i)}),Dp.apply(this,arguments)}function Ld(i,e){return Il.apply(this,arguments)}function Il(){return Il=(0,h.Z)(function*(i,e){const t=$t(i);t.asyncQueue.verifyOperationInProgress(),mt("RemoteStore","RemoteStore received new credentials");const s=lc(t);t.vu.add(3),yield uc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kd(t)}),Il.apply(this,arguments)}function Vd(i,e){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,h.Z)(function*(i,e){const t=$t(i);e?(t.vu.delete(2),yield kd(t)):e||(t.vu.add(2),yield uc(t),t.bu.set("Unknown"))}),Dl.apply(this,arguments)}function Cl(i){return i.Su||(i.Su=function(e,t,s){const a=$t(e);return a.fu(),new $h(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:X_.bind(null,i),ao:e0.bind(null,i),nu:t0.bind(null,i)}),i.Ru.push(function(){var e=(0,h.Z)(function*(t){t?(i.Su.Qo(),Fd(i)?yp(i):i.bu.set("Unknown")):(yield i.Su.stop(),vv(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function tu(i){return i.Du||(i.Du=function(e,t,s){const a=$t(e);return a.fu(),new hp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:_v.bind(null,i),ao:wv.bind(null,i),au:tm.bind(null,i),cu:Ev.bind(null,i)}),i.Ru.push(function(){var e=(0,h.Z)(function*(t){t?(i.Du.Qo(),yield wl(i)):(yield i.Du.stop(),i.Eu.length>0&&(mt("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class qh{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,c){const p=Date.now()+s,D=new qh(e,t,p,a,c);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(i,e){if(pr("AsyncQueue",`${e}: ${i}`),Si(i))return new vt(qe.UNAVAILABLE,`${e}: ${i}`);throw i}class bl{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ht.comparator(t.key,s.key):(t,s)=>Ht.comparator(t.key,s.key),this.keyedMap=vu(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new bl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new bl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Zh{constructor(){this.Cu=new vr(Ht.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Kt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class dc{constructor(e,t,s,a,c,p,D,N,U){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=D,this.excludesMetadataChanges=N,this.hasCachedResults=U}static fromInitialDocuments(e,t,s,a,c){const p=[];return t.forEach(D=>{p.push({type:0,doc:D})}),new dc(e,t,bl.emptySet(t),p,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Se(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Cp{constructor(){this.Nu=void 0,this.listeners=[]}}class Iv{constructor(){this.queries=new zs(e=>et(e),Se),this.onlineState="Unknown",this.ku=new Set}}function nm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,h.Z)(function*(i,e){const t=$t(i),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Cp),a)try{c.Nu=yield t.onListen(s)}catch(p){const D=cc(p,`Initialization of query '${kt(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&Ap(t)}),bp.apply(this,arguments)}function Yh(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,h.Z)(function*(i,e){const t=$t(i),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Tp.apply(this,arguments)}function rm(i,e){const t=$t(i);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const D of p.listeners)D.$u(a)&&(s=!0);p.Nu=a}}s&&Ap(t)}function im(i,e,t){const s=$t(i),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function Ap(i){i.ku.forEach(e=>{e.next()})}class $o{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class om{constructor(e){this.serializer=e}rr(e){return wu(this.serializer,e)}ur(e){return e.metadata.exists?os(this.serializer,e.document,!1):qr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Qi(e)}}class n0{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=am(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=In.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new om(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.rr(a.metadata.name);for(const p of a.metadata.queries){const D=(t.get(p)||er()).add(c);t.set(p,D)}}return t}complete(){var e=this;return(0,h.Z)(function*(){const t=yield function gv(i,e,t,s){return rp.apply(this,arguments)}(e.localStore,new om(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Gg(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function am(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Qh{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=er(),this.mutatedKeys=er(),this.tc=lr(e),this.ec=new bl(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Zh,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,D=!1;const N="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,U="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((Q,ye)=>{const Be=a.get(Q),ut=qt(this.query,ye)?ye:null,Ot=!!Be&&this.mutatedKeys.has(Be.key),Xt=!!ut&&(ut.hasLocalMutations||this.mutatedKeys.has(ut.key)&&ut.hasCommittedMutations);let on=!1;Be&&ut?Be.data.isEqual(ut.data)?Ot!==Xt&&(s.track({type:3,doc:ut}),on=!0):this.rc(Be,ut)||(s.track({type:2,doc:ut}),on=!0,(N&&this.tc(ut,N)>0||U&&this.tc(ut,U)<0)&&(D=!0)):!Be&&ut?(s.track({type:0,doc:ut}),on=!0):Be&&!ut&&(s.track({type:1,doc:Be}),on=!0,(N||U)&&(D=!0)),on&&(ut?(p=p.add(ut),c=Xt?c.add(Q):c.delete(Q)):(p=p.delete(Q),c=c.delete(Q)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const Q="F"===this.query.limitType?p.last():p.first();p=p.delete(Q.key),c=c.delete(Q.key),s.track({type:1,doc:Q})}return{ec:p,ic:s,zi:D,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((U,Q)=>function(ye,Be){const ut=Ot=>{switch(Ot){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kt()}};return ut(ye)-ut(Be)}(U.type,Q.type)||this.tc(U.doc,Q.doc)),this.oc(s);const p=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,N=D!==this.Xu;return this.Xu=D,0!==c.length||N?{snapshot:new dc(this.query,e.ec,a,c,e.mutatedKeys,0===D,N,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Zh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=er(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Sp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Qh(s))}),t}hc(e){this.Yu=e.ir,this.Zu=er();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Dv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Cv{constructor(e){this.key=e,this.fc=!1}}class lm{constructor(e,t,s,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new zs(D=>et(D),Se),this._c=new Map,this.mc=new Set,this.gc=new vr(Ht.comparator),this.yc=new Map,this.Ic=new Qn,this.Tc={},this.Ec=new Map,this.Ac=jo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function bv(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,h.Z)(function*(i,e){const t=uf(i);let s,a;const c=t.wc.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.lc();else{const p=yield oc(t.localStore,I(e)),D=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Mp(t,e,s,"current"===D,p.resumeToken),t.isPrimaryClient&&Hh(t.remoteStore,p)}return a}),Jh.apply(this,arguments)}function Mp(i,e,t,s,a){return xp.apply(this,arguments)}function xp(){return xp=(0,h.Z)(function*(i,e,t,s,a){i.Rc=(ye,Be,ut)=>{return(Ot=(0,h.Z)(function*(Xt,on,ir,Ur){let _r=on.view.sc(ir);_r.zi&&(_r=yield Rd(Xt.localStore,on.query,!1).then(({documents:xi})=>on.view.sc(xi,_r)));const qs=Ur&&Ur.targetChanges.get(on.targetId),Rs=on.view.applyChanges(_r,Xt.isPrimaryClient,qs);return jd(Xt,on.targetId,Rs.cc),Rs.snapshot}),function(Xt,on,ir,Ur){return Ot.apply(this,arguments)})(i,ye,Be,ut);var Ot};const c=yield Rd(i.localStore,e,!0),p=new um(e,c.ir),D=p.sc(c.documents),N=pd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,a),U=p.applyChanges(D,i.isPrimaryClient,N);jd(i,t,U.cc);const Q=new Dv(e,t,p);return i.wc.set(e,Q),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),U.snapshot}),xp.apply(this,arguments)}function cm(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,h.Z)(function*(i,e){const t=$t(i),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(c=>!Se(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield qu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Gh(t.remoteStore,s.targetId),Qu(t,s.targetId)}).catch(va))):(Qu(t,s.targetId),yield qu(t.localStore,s.targetId,!0))}),Xh.apply(this,arguments)}function ja(){return ja=(0,h.Z)(function*(i,e,t){const s=Gd(i);try{const a=yield function(c,p){const D=$t(c),N=Rr.now(),U=p.reduce((Be,ut)=>Be.add(ut.key),er());let Q,ye;return D.persistence.runTransaction("Locally write mutations","readwrite",Be=>{let ut=As(),Ot=er();return D.Zi.getEntries(Be,U).next(Xt=>{ut=Xt,ut.forEach((on,ir)=>{ir.isValidDocument()||(Ot=Ot.add(on))})}).next(()=>D.localDocuments.getOverlayedDocuments(Be,ut)).next(Xt=>{Q=Xt;const on=[];for(const ir of p){const Ur=Ry(ir,Q.get(ir.key).overlayedDocument);null!=Ur&&on.push(new Xa(ir.key,Ur,ll(Ur.value.mapValue),Ei.exists(!0)))}return D.mutationQueue.addMutationBatch(Be,N,on,p)}).next(Xt=>{ye=Xt;const on=Xt.applyToLocalDocumentSet(Q,Ot);return D.documentOverlayCache.saveOverlays(Be,Xt.batchId,on)})}).then(()=>({batchId:ye.batchId,changes:od(Q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,p,D){let N=c.Tc[c.currentUser.toKey()];N||(N=new vr(rn)),N=N.insert(p,D),c.Tc[c.currentUser.toKey()]=N}(s,a.batchId,t),yield Cu(s,a.changes),yield wl(s.remoteStore)}catch(a){const c=cc(a,"Failed to persist write");t.reject(c)}}),ja.apply(this,arguments)}function ef(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,h.Z)(function*(i,e){const t=$t(i);try{const s=yield fv(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.yc.get(c);p&&(nn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.fc=!0:a.modifiedDocuments.size>0?nn(p.fc):a.removedDocuments.size>0&&(nn(p.fc),p.fc=!1))}),yield Cu(t,s,e)}catch(s){yield va(s)}}),Rp.apply(this,arguments)}function dm(i,e,t){const s=$t(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((c,p)=>{const D=p.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(c,p){const D=$t(c);D.onlineState=p;let N=!1;D.queries.forEach((U,Q)=>{for(const ye of Q.listeners)ye.Mu(p)&&(N=!0)}),N&&Ap(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function r0(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,h.Z)(function*(i,e,t){const s=$t(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),c=a&&a.key;if(c){let p=new vr(Ht.comparator);p=p.insert(c,qr.newNoDocument(c,dn.min()));const D=er().add(c),N=new fd(dn.min(),new Map,new vr(rn),p,D);yield ef(s,N),s.gc=s.gc.remove(c),s.yc.delete(e),nf(s)}else yield qu(s.localStore,e,!1).then(()=>Qu(s,e,t)).catch(va)}),tf.apply(this,arguments)}function Av(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,h.Z)(function*(i,e){const t=$t(i),s=e.batch.batchId;try{const a=yield Bg(t.localStore,e);Bd(t,s,null),$c(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Cu(t,a)}catch(a){yield va(a)}}),Pp.apply(this,arguments)}function Sv(i,e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,h.Z)(function*(i,e,t){const s=$t(i);try{const a=yield function(c,p){const D=$t(c);return D.persistence.runTransaction("Reject batch","readwrite-primary",N=>{let U;return D.mutationQueue.lookupMutationBatch(N,p).next(Q=>(nn(null!==Q),U=Q.keys(),D.mutationQueue.removeMutationBatch(N,Q))).next(()=>D.mutationQueue.performConsistencyCheck(N)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(N,U,p)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(N,U)).next(()=>D.localDocuments.getDocuments(N,U))})}(s.localStore,e);Bd(s,e,t),$c(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Cu(s,a)}catch(a){yield va(a)}}),Ud.apply(this,arguments)}function Np(){return Np=(0,h.Z)(function*(i,e){const t=$t(i);lc(t.remoteStore)||mt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const p=$t(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>p.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=cc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Np.apply(this,arguments)}function $c(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Bd(i,e,t){const s=$t(i);let a=s.Tc[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Qu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),t&&i.dc.Pc(s,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||xv(i,s)})}function xv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Gh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),nf(i))}function jd(i,e,t){for(const s of t)s instanceof Qh?(i.Ic.addReference(s.key,e),s0(i,s)):s instanceof Sp?(mt("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||xv(i,s.key)):Kt()}function s0(i,e){const t=e.key,s=t.path.canonicalString();i.gc.get(t)||i.mc.has(s)||(mt("SyncEngine","New document in limbo: "+t),i.mc.add(s),nf(i))}function nf(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new Ht(In.fromString(e)),s=i.Ac.next();i.yc.set(s,new Cv(t)),i.gc=i.gc.insert(t,s),Hh(i.remoteStore,new Iu(I(ju(t.path)),s,"TargetPurposeLimboResolution",ms.ct))}}function Cu(i,e,t){return rf.apply(this,arguments)}function rf(){return rf=(0,h.Z)(function*(i,e,t){const s=$t(i),a=[],c=[],p=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,N)=>{p.push(s.Rc(N,e,t).then(U=>{if((U||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(N.targetId,U?.fromCache?"not-current":"current"),U){a.push(U);const Q=xd.Li(N.targetId,U);c.push(Q)}}))}),yield Promise.all(p),s.dc.nu(a),yield(D=(0,h.Z)(function*(N,U){const Q=$t(N);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ye=>Ue.forEach(U,Be=>Ue.forEach(Be.Fi,ut=>Q.persistence.referenceDelegate.addReference(ye,Be.targetId,ut)).next(()=>Ue.forEach(Be.Bi,ut=>Q.persistence.referenceDelegate.removeReference(ye,Be.targetId,ut)))))}catch(ye){if(!Si(ye))throw ye;mt("LocalStore","Failed to update sequence numbers: "+ye)}for(const ye of U){const Be=ye.targetId;if(!ye.fromCache){const ut=Q.Ji.get(Be),Xt=ut.withLastLimboFreeSnapshotVersion(ut.snapshotVersion);Q.Ji=Q.Ji.insert(Be,Xt)}}}),function(N,U){return D.apply(this,arguments)})(s.localStore,c))}),rf.apply(this,arguments)}function hm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,h.Z)(function*(i,e){const t=$t(i);if(!t.currentUser.isEqual(e)){mt("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(p=>{p.forEach(D=>{D.reject(new vt(qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Cu(t,s.er)}var a}),$d.apply(this,arguments)}function Ju(i,e){const t=$t(i),s=t.yc.get(e);if(s&&s.fc)return er().add(s.key);{let a=er();const c=t._c.get(e);if(!c)return a;for(const p of c){const D=t.wc.get(p);a=a.unionWith(D.view.nc)}return a}}function sf(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,h.Z)(function*(i,e){const t=$t(i),s=yield Rd(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&jd(t,e.targetId,a.cc),a}),Hc.apply(this,arguments)}function Hd(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,h.Z)(function*(i,e){const t=$t(i);return $g(t.localStore,e).then(s=>Cu(t,s))}),Op.apply(this,arguments)}function kp(i,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,h.Z)(function*(i,e,t,s){const a=$t(i),c=yield function(p,D){const N=$t(p),U=$t(N.mutationQueue);return N.persistence.runTransaction("Lookup mutation documents","readonly",Q=>U.Sn(Q,D).next(ye=>ye?N.localDocuments.getDocuments(Q,ye):Ue.resolve(null)))}(a.localStore,e);var D;null!==c?("pending"===t?yield wl(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),$c(a,e),D=e,$t($t(a.localStore).mutationQueue).Cn(D)):Kt(),yield Cu(a,c)):mt("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function Fp(){return Fp=(0,h.Z)(function*(i,e){const t=$t(i);if(uf(t),Gd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Gc(t,s.toArray());t.vc=!0,yield Vd(t.remoteStore,!0);for(const c of a)Hh(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Qu(t,p),qu(t.localStore,p,!0))),Gh(t.remoteStore,p)}),yield a,yield Gc(t,s),function(c){const p=$t(c);p.yc.forEach((D,N)=>{Gh(p.remoteStore,N)}),p.Ic.Ts(),p.yc=new Map,p.gc=new vr(Ht.comparator)}(t),t.vc=!1,yield Vd(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function Gc(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,h.Z)(function*(i,e,t){const s=$t(i),a=[],c=[];for(const p of e){let D;const N=s._c.get(p);if(N&&0!==N.length){D=yield oc(s.localStore,I(N[0]));for(const U of N){const Q=s.wc.get(U),ye=yield sf(s,Q);ye.snapshot&&c.push(ye.snapshot)}}else{const U=yield jg(s.localStore,p);D=yield oc(s.localStore,U),yield Mp(s,Pv(U),p,!1,D.resumeToken)}a.push(D)}return s.dc.nu(c),a}),Lp.apply(this,arguments)}function Pv(i){return hl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Nv(i){const e=$t(i);return $t($t(e.localStore).persistence).$i()}function o0(i,e,t,s){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,h.Z)(function*(i,e,t,s){const a=$t(i);if(a.vc)return void mt("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield $g(a.localStore,Dn(c[0])),D=fd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_i.EMPTY_BYTE_STRING);yield Cu(a,p,D);break}case"rejected":yield qu(a.localStore,e,!0),Qu(a,e,s);break;default:Kt()}}),Vp.apply(this,arguments)}function Ov(i,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,h.Z)(function*(i,e,t){const s=uf(i);if(s.vc){for(const a of e){if(s._c.has(a)){mt("SyncEngine","Adding an already active target "+a);continue}const c=yield jg(s.localStore,a),p=yield oc(s.localStore,c);yield Mp(s,Pv(c),p.targetId,!1,p.resumeToken),Hh(s.remoteStore,p)}for(const a of t)s._c.has(a)&&(yield qu(s.localStore,a,!1).then(()=>{Gh(s.remoteStore,a),Qu(s,a)}).catch(va))}}),Up.apply(this,arguments)}function uf(i){const e=$t(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ju.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r0.bind(null,e),e.dc.nu=rm.bind(null,e.eventManager),e.dc.Pc=im.bind(null,e.eventManager),e}function Gd(i){const e=$t(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sv.bind(null,e),e}class hc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,h.Z)(function*(){t.serializer=jc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new Nh(Sd.zs,this.serializer)}createSharedClientState(e){return new up}terminate(){var e=this;return(0,h.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends hc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,h.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gd(s.Vc.syncEngine),yield wl(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Jf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new kl(t,this.persistence);return new Ou(e.asyncQueue,s)}createPersistence(e){const t=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new Fh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jh(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new up}}class fm extends Bp{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,h.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Uh&&(s.sharedClientState.syncEngine={jr:kp.bind(null,a),zr:o0.bind(null,a),Wr:Ov.bind(null,a),$i:Nv.bind(null,a),Qr:Hd.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var c=(0,h.Z)(function*(p){yield function Rv(i,e){return Fp.apply(this,arguments)}(s.Vc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jh();if(!Uh.D(t))throw new vt(qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class zc{initialize(e,t){var s=this;return(0,h.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>dm(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=hm.bind(null,s.syncEngine),yield Vd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iv}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=new Wg(e.databaseInfo);return new fp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=D=>dm(this.syncEngine,D,0),p=Ba.D()?new Ba:new Bh,new yv(t,s,a,c,p);var t,s,a,c,p}createSyncEngine(e,t){return function(s,a,c,p,D,N,U){const Q=new lm(s,a,c,p,D,N);return U&&(Q.vc=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,h.Z)(function*(t){const s=$t(t);mt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield uc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pm(i,e=10240){let t=0;return{read:()=>(0,h.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,h.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ai,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,h.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,h.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,h.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const c=yield e.$c(a);return new sm(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,h.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,h.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,h.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,h.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new vt(qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,h.Z)(function*(c,p){const D=$t(c),N=_d(D.serializer)+"/documents",U={documents:p.map(ut=>yd(D.serializer,ut))},Q=yield D.vo("BatchGetDocuments",N,U,p.length),ye=new Map;Q.forEach(ut=>{const Ot=function Uy(i,e){return"found"in e?function(t,s){nn(!!s.found);const a=wu(t,s.found.name),c=Qi(s.found.updateTime),p=s.found.createTime?Qi(s.found.createTime):dn.min(),D=new is({mapValue:{fields:s.found.fields}});return qr.newFoundDocument(a,c,p,D)}(i,e):"missing"in e?function(t,s){nn(!!s.missing),nn(!!s.readTime);const a=wu(t,s.missing),c=Qi(s.readTime);return qr.newNoDocument(a,c)}(i,e):Kt()}(D.serializer,ut);ye.set(Ot.key.toString(),Ot)});const Be=[];return p.forEach(ut=>{const Ot=ye.get(ut.toString());nn(!!Ot),Be.push(Ot)}),Be}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new pl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,h.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=Ht.fromPath(a);e.mutations.push(new ph(c,e.precondition(c)))}),yield(s=(0,h.Z)(function*(a,c){const p=$t(a),D=_d(p.serializer)+"/documents",N={writes:c.map(U=>Kl(p.serializer,U))};yield p.Io("Commit",D,N)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kt();t=dn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new vt(qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dn.min())?Ei.exists(!1):Ei.updateTime(t):Ei.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dn.min()))throw new vt(qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ei.updateTime(t)}return Ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a0{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.Bc=s.maxAttempts,this.qo=new Kg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,h.Z)(function*(){const t=new fc(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!qa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yg(t)}return!1}}class zd{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=gn.UNAUTHENTICATED,this.clientId=ui.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,h.Z)(function*(D){mt("FirestoreClient","Received user=",D.uid),yield c.authCredentialListener(D),c.user=D});return function(D){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(mt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,h.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=cc(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),mt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,h.Z)(function*(c){s.isEqual(c)||(yield dv(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jp.apply(this,arguments)}function Wd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield pc(i);mt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(a=>Ld(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>Ld(e.remoteStore,c)),i._onlineComponents=e}),$p.apply(this,arguments)}function nu(i){return"FirebaseError"===i.name?i.code===qe.FAILED_PRECONDITION||i.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function pc(i){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,h.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){mt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!nu(t))throw t;xr("Error using user provided cache. Falling back to memory cache: "+t),yield df(i,new hc)}}else mt("FirestoreClient","Using default OfflineComponentProvider"),yield df(i,new hc);return i._offlineComponents}),Ks.apply(this,arguments)}function bu(i){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,h.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(mt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wd(i,i._uninitializedComponentsProvider._online)):(mt("FirestoreClient","Using default OnlineComponentProvider"),yield Wd(i,new zc))),i._onlineComponents}),Wc.apply(this,arguments)}function Aa(i){return pc(i).then(e=>e.persistence)}function Kc(i){return pc(i).then(e=>e.localStore)}function gc(i){return bu(i).then(e=>e.remoteStore)}function Tl(i){return bu(i).then(e=>e.syncEngine)}function ru(i){return Al.apply(this,arguments)}function Al(){return Al=(0,h.Z)(function*(i){const e=yield bu(i),t=e.eventManager;return t.onListen=bv.bind(null,e.syncEngine),t.onUnlisten=cm.bind(null,e.syncEngine),t}),Al.apply(this,arguments)}function yc(i,e,t={}){const s=new ai;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(a,c,p,D,N){const U=new lf({next:ye=>{c.enqueueAndForget(()=>Yh(a,Q));const Be=ye.docs.has(p);!Be&&ye.fromCache?N.reject(new vt(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):Be&&ye.fromCache&&D&&"server"===D.source?N.reject(new vt(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):N.resolve(ye)},error:ye=>N.reject(ye)}),Q=new $o(ju(p.path),U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield ru(i),i.asyncQueue,e,t,s)})),s.promise}function Hp(i,e,t={}){const s=new ai;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(a,c,p,D,N){const U=new lf({next:ye=>{c.enqueueAndForget(()=>Yh(a,Q)),ye.fromCache&&"server"===D.source?N.reject(new vt(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):N.resolve(ye)},error:ye=>N.reject(ye)}),Q=new $o(p,U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield ru(i),i.asyncQueue,e,t,s)})),s.promise}function Gp(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const zp=new Map;function hf(i,e,t){if(!t)throw new vt(qe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Em(i,e,t,s){if(!0===e&&!0===s)throw new vt(qe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wm(i){if(!Ht.isDocumentKey(i))throw new vt(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wp(i){if(Ht.isDocumentKey(i))throw new vt(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Kt()}function Ir(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new vt(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new vt(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pf(i,e){if(e<=0)throw new vt(qe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class gf{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new vt(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vt(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Em("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gp(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new vt(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new vt(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new vt(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vt(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new za;switch(t.type){case"firstParty":return new ha(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new vt(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zp.get(e);t&&(mt("ComponentProvider","Removing Datastore"),zp.delete(e),t.terminate())}(this),Promise.resolve()}}function qd(i,e,t,s={}){var a;const c=(i=Ir(i,Kd))._getSettings(),p=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==p&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:p,ssl:!1})),s.mockUserToken){let D,N;if("string"==typeof s.mockUserToken)D=s.mockUserToken,N=gn.MOCK_USER;else{D=(0,de.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new vt(qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new gn(U)}i._authCredentials=new xu(new Ga(D,N))}}class wi{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wi(this.firestore,e,this._key)}}class Ms{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class Tu extends Ms{constructor(e,t,s){super(e,t,ju(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wi(this.firestore,null,new Ht(e))}withConverter(e){return new Tu(this.firestore,e,this._path)}}function Kp(i,e,...t){if(i=(0,de.m9)(i),hf("collection","path",e),i instanceof Kd){const s=In.fromString(e,...t);return Wp(s),new Tu(i,null,s)}{if(!(i instanceof wi||i instanceof Tu))throw new vt(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(In.fromString(e,...t));return Wp(s),new Tu(i.firestore,null,s)}}function qp(i,e){if(i=Ir(i,Kd),hf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ms(i,null,(t=e,new Qa(In.emptyPath(),t)));var t}function Zp(i,e,...t){if(i=(0,de.m9)(i),1===arguments.length&&(e=ui.A()),hf("doc","path",e),i instanceof Kd){const s=In.fromString(e,...t);return wm(s),new wi(i,null,new Ht(s))}{if(!(i instanceof wi||i instanceof Tu))throw new vt(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(In.fromString(e,...t));return wm(s),new wi(i.firestore,i instanceof Tu?i.converter:null,new Ht(s))}}function Im(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),(i instanceof wi||i instanceof Tu)&&(e instanceof wi||e instanceof Tu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Zd(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),i instanceof Ms&&e instanceof Ms&&i.firestore===e.firestore&&Se(i._query,e._query)&&i.converter===e.converter}class Dm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Kg(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&mt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ai;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,h.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Si(t))throw t;mt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=qh.createAndSchedule(this,e,t,s,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&Kt()}verifyOperationInProgress(){}sa(){var e=this;return(0,h.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class Yp{constructor(){this._progressObserver={},this._taskCompletionResolver=new ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Cm=-1;class Ii extends Kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Dm,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qp(this),this._firestoreClient.terminate()}}function Ji(i){return i._firestoreClient||Qp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qp(i){var e,t,s;const a=i._freezeSettings(),c=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ul(i._databaseId,D,i._persistenceKey,(U=a).host,U.ssl,U.experimentalForceLongPolling,U.experimentalAutoDetectLongPolling,Gp(U.experimentalLongPollingOptions),U.useFetchStreams));var D,U;i._firestoreClient=new zd(i._authCredentials,i._appCheckCredentials,i._queue,c),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Uv(i,e){Xp(i=Ir(i,Ii));const t=Ji(i);if(t._uninitializedComponentsProvider)throw new vt(qe.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),a=new zc;return bm(t,a,new Bp(a,s.cacheSizeBytes,e?.forceOwnership))}function Bv(i){Xp(i=Ir(i,Ii));const e=Ji(i);if(e._uninitializedComponentsProvider)throw new vt(qe.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new zc;return bm(e,s,new fm(s,t.cacheSizeBytes))}function bm(i,e,t){const s=new ai;return i.asyncQueue.enqueue((0,h.Z)(function*(){try{yield df(i,t),yield Wd(i,e),s.resolve()}catch(a){const c=a;if(!nu(c))throw c;xr("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Tm(i){if(i._initialized&&!i._terminated)throw new vt(qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ai;return i._queue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{yield(t=(0,h.Z)(function*(s){if(!uo.D())return Promise.resolve();const a=s+"main";yield uo.delete(a)}),function(s){return t.apply(this,arguments)})(Md(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Jp(i){return function(e){const t=new ai;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function Mv(i,e){return Np.apply(this,arguments)}(yield Tl(e),t)})),t.promise}(Ji(i=Ir(i,Ii)))}function Am(i){return function qc(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield Aa(i),t=yield gc(i);return e.setNetworkEnabled(!0),function(s){const a=$t(s);return a.vu.delete(0),kd(a)}(t)}))}(Ji(i=Ir(i,Ii)))}function Sm(i){return function Zc(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield Aa(i),t=yield gc(i);return e.setNetworkEnabled(!1),(s=(0,h.Z)(function*(a){const c=$t(a);c.vu.add(0),yield uc(c),c.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Ji(i=Ir(i,Ii)))}function Mm(i,e){const t=Ji(i=Ir(i,Ii)),s=new Yp;return function ym(i,e,t,s){const a=function(c,p){let D;return D="string"==typeof c?ky().encode(c):c,N=function(N,U){if(N instanceof Uint8Array)return pm(N,U);if(N instanceof ArrayBuffer)return pm(new Uint8Array(N),U);if(N instanceof ReadableStream)return N.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new cf(N,p);var N}(t,jc(e));i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){!function kv(i,e,t){const s=$t(i);var a;(a=(0,h.Z)(function*(c,p,D){try{const N=yield p.getMetadata();if(yield function(Be,ut){const Ot=$t(Be),Xt=Qi(ut.createTime);return Ot.persistence.runTransaction("hasNewerBundle","readonly",on=>Ot.qs.getBundleMetadata(on,ut.id)).then(on=>!!on&&on.createTime.compareTo(Xt)>=0)}(c.localStore,N))return yield p.close(),D._completeWith({taskState:"Success",documentsLoaded:(Be=N).totalDocuments,bytesLoaded:Be.totalBytes,totalDocuments:Be.totalDocuments,totalBytes:Be.totalBytes}),Promise.resolve(new Set);D._updateProgress(am(N));const U=new n0(N,c.localStore,p.serializer);let Q=yield p.bc();for(;Q;){const Be=yield U.zu(Q);Be&&D._updateProgress(Be),Q=yield p.bc()}const ye=yield U.complete();return yield Cu(c,ye.Ju,void 0),yield function(Be,ut){const Ot=$t(Be);return Ot.persistence.runTransaction("Save bundle","readwrite",Xt=>Ot.qs.saveBundleMetadata(Xt,ut))}(c.localStore,N),D._completeWith(ye.progress),Promise.resolve(ye.Hu)}catch(N){return xr("SyncEngine",`Loading bundle failed with ${N}`),D._failWith(N),Promise.resolve(new Set)}var Be}),function(c,p,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Tl(i),a,s)}))}(t,i._databaseId,e,s),s}function xm(i,e){return function vm(i,e){return i.asyncQueue.enqueue((0,h.Z)(function*(){return function(t,s){const a=$t(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,s))}(yield Kc(i),e)}))}(Ji(i=Ir(i,Ii)),e).then(t=>t?new Ms(i,null,t.query):null)}function Xp(i){if(i._initialized||i._terminated)throw new vt(qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(_i.fromBase64String(e))}catch(t){throw new vt(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new vt(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ml{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vt(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vt(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}const xs=/^__.*__$/;class Pm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class Nm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Om(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kt()}}class Yd{constructor(e,t,s,a,c,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Om(this.ca)&&xs.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $v{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}ya(e,t,s,a=!1){return new Yd({ca:e,methodName:t,ga:s,path:Xn.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(i){const e=i._freezeSettings(),t=jc(i._databaseId);return new $v(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Qd(i,e,t,s,a,c={}){const p=i.ya(c.merge||c.mergeFields?2:0,e,t,a);$a("Data must be an object, but it was:",p,s);const D=Um(s,p);let N,U;if(c.merge)N=new rs(p.fieldMask),U=p.fieldTransforms;else if(c.mergeFields){const Q=[];for(const ye of c.mergeFields){const Be=Ho(e,ye,t);if(!p.contains(Be))throw new vt(qe.INVALID_ARGUMENT,`Field '${Be}' is specified in your field mask but missing from your input data.`);Bm(Q,Be)||Q.push(Be)}N=new rs(Q),U=p.fieldTransforms.filter(ye=>N.covers(ye.field))}else N=null,U=p.fieldTransforms;return new Pm(new is(D),N,U)}class Au extends Ml{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Au}}function km(i,e,t){return new Yd({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends Ml{_toFieldTransform(e){return new xc(e.path,new Hu)}isEqual(e){return e instanceof eg}}class Fm extends Ml{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Mo(c,t)),a=new _u(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Hv extends Ml{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Mo(c,t)),a=new Gu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Lm extends Ml{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fl(e.serializer,Nf(e.serializer,this.Ia));return new xc(e.path,t)}isEqual(e){return this===e}}function Vm(i,e,t,s){const a=i.ya(1,e,t);$a("Data must be an object, but it was:",a,s);const c=[],p=is.empty();Za(s,(N,U)=>{const Q=Jd(e,N,t);U=(0,de.m9)(U);const ye=a.da(Q);if(U instanceof Au)c.push(Q);else{const Be=Mo(U,ye);null!=Be&&(c.push(Q),p.set(Q,Be))}});const D=new rs(c);return new Nm(p,D,a.fieldTransforms)}function vf(i,e,t,s,a,c){const p=i.ya(1,e,t),D=[Ho(e,s,t)],N=[a];if(c.length%2!=0)throw new vt(qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Be=0;Be<c.length;Be+=2)D.push(Ho(e,c[Be])),N.push(c[Be+1]);const U=[],Q=is.empty();for(let Be=D.length-1;Be>=0;--Be)if(!Bm(U,D[Be])){const ut=D[Be];let Ot=N[Be];Ot=(0,de.m9)(Ot);const Xt=p.da(ut);if(Ot instanceof Au)U.push(ut);else{const on=Mo(Ot,Xt);null!=on&&(U.push(ut),Q.set(ut,on))}}const ye=new rs(U);return new Nm(Q,ye,p.fieldTransforms)}function _f(i,e,t,s=!1){return Mo(t,i.ya(s?4:3,e))}function Mo(i,e){if(tg(i=(0,de.m9)(i)))return $a("Unsupported field value:",e,i),Um(i,e);if(i instanceof Ml)return function(t,s){if(!Om(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const p of t){let D=Mo(p,s.wa(c));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),c++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,de.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Nf(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Rr.fromDate(t);return{timestampValue:gl(s.serializer,a)}}if(t instanceof Rr){const a=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gl(s.serializer,a)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:Vy(s.serializer,t._byteString)};if(t instanceof wi){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ff(t)}`)}(i,e)}function Um(i,e){const t={};return Ll(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(i,(s,a)=>{const c=Mo(a,e.ha(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Rr||i instanceof yf||i instanceof vc||i instanceof wi||i instanceof Ml)}function $a(i,e,t){if(!tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ff(t);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function Ho(i,e,t){if((e=(0,de.m9)(e))instanceof Sl)return e._internalPath;if("string"==typeof e)return Jd(i,e);throw Xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const iu=new RegExp("[~\\*/\\[\\]]");function Jd(i,e,t){if(e.search(iu)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xd(i,e,t,s,a){const c=s&&!s.isEmpty(),p=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let N="";return(c||p)&&(N+=" (found",c&&(N+=` in field ${s}`),p&&(N+=` in document ${a}`),N+=")"),new vt(qe.INVALID_ARGUMENT,D+i+N)}function Bm(i,e){return i.some(t=>t.isEqual(e))}class eh{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends eh{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Jd(i,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function wf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new vt(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _c{}class th extends _c{}function jm(i,e,...t){let s=[];e instanceof _c&&s.push(e),s=s.concat(t),function(a){const c=a.filter(D=>D instanceof Ec).length,p=a.filter(D=>D instanceof nh).length;if(c>1||c>0&&p>0)throw new vt(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class nh extends th{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Ms(e.firestore,e.converter,$(e._query,t))}_parse(e){const t=xl(e.firestore);return function(a,c,p,D,N,U,Q){let ye;if(N.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new vt(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){Zm(Q,U);const Be=[];for(const ut of Q)Be.push(qm(D,a,ut));ye={arrayValue:{values:Be}}}else ye=qm(D,a,Q)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||Zm(Q,U),ye=_f(p,"where",Q,"in"===U||"not-in"===U);return pe.create(N,U,ye)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $m(i,e,t){const s=e,a=Ef("where",i);return nh._create(a,s,t)}class Ec extends _c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ec(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:be.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let c=s;const p=a.getFlattenedFilters();for(const D of p)Ym(c,D),c=$(c,D)}(e._query,t),new Ms(e.firestore,e.converter,$(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new If(e,t)}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new vt(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new vt(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new A(a,c);return function(D,N){if(null===Ac(D)){const U=_(D);null!==U&&Qm(0,U,N.field)}}(s,p),p}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Qa(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Hm(i,e="asc"){const t=e,s=Ef("orderBy",i);return If._create(s,t)}class Jc extends th{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jc(e,t,s)}_apply(e){return new Ms(e.firestore,e.converter,J(e._query,this._limit,this._limitType))}}function Df(i){return pf("limit",i),Jc._create("limit",i,"F")}function rg(i){return pf("limitToLast",i),Jc._create("limitToLast",i,"L")}class rh extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Ms(e.firestore,e.converter,(a=t,new Qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Gm(...i){return rh._create("startAt",i,!0)}function zm(...i){return rh._create("startAfter",i,!1)}class ih extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Ms(e.firestore,e.converter,(a=t,new Qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Wm(...i){return ih._create("endBefore",i,!1)}function Km(...i){return ih._create("endAt",i,!0)}function ig(i,e,t,s){if(t[0]=(0,de.m9)(t[0]),t[0]instanceof eh)return function(a,c,p,D,N){if(!D)throw new vt(qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const U=[];for(const Q of g(a))if(Q.field.isKeyField())U.push(Fa(c,D.key));else{const ye=D.data.field(Q.field);if(Fu(ye))throw new vt(qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ye){const Be=Q.field.canonicalString();throw new vt(qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Be}' (used as the orderBy) does not exist.`)}U.push(ye)}return new ss(U,N)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const a=xl(i.firestore);return function(c,p,D,N,U,Q){const ye=c.explicitOrderBy;if(U.length>ye.length)throw new vt(qe.INVALID_ARGUMENT,`Too many arguments provided to ${N}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Be=[];for(let ut=0;ut<U.length;ut++){const Ot=U[ut];if(ye[ut].field.isKeyField()){if("string"!=typeof Ot)throw new vt(qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${N}(), but got a ${typeof Ot}`);if(!d(c)&&-1!==Ot.indexOf("/"))throw new vt(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${N}() must be a plain document ID, but '${Ot}' contains a slash.`);const Xt=c.path.child(In.fromString(Ot));if(!Ht.isDocumentKey(Xt))throw new vt(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${N}() must result in a valid document path, but '${Xt}' is not because it contains an odd number of segments.`);const on=new Ht(Xt);Be.push(Fa(p,on))}else{const Xt=_f(D,N,Ot);Be.push(Xt)}}return new ss(Be,Q)}(i._query,i.firestore._databaseId,a,e,t,s)}}function qm(i,e,t){if("string"==typeof(t=(0,de.m9)(t))){if(""===t)throw new vt(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d(e)&&-1!==t.indexOf("/"))throw new vt(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(In.fromString(t));if(!Ht.isDocumentKey(s))throw new vt(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fa(i,new Ht(s))}if(t instanceof wi)return Fa(i,t._key);throw new vt(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function Zm(i,e){if(!Array.isArray(i)||0===i.length)throw new vt(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ym(i,e){if(e.isInequality()){const s=_(i),a=e.field;if(null!==s&&!s.isEqual(a))throw new vt(qe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const c=Ac(i);null!==c&&Qm(0,a,c)}const t=function(s,a){for(const c of s)for(const p of c.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new vt(qe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qm(i,e,t){if(!t.isEqual(e))throw new vt(qe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sg{convertValue(e,t="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Za(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new yf(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Lu(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=bo(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=In.fromString(e);nn(Gf(s));const a=new ta(s.get(1),s.get(3)),c=new Ht(s.popFirst(5));return a.isEqual(t)||pr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Cf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class zv extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,t)}}class wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends eh{constructor(e,t,s,a,c,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class sh extends Ic{data(e={}){return super.data(e)}}class Dc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new wc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new vt(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new sh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new wc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const D=new sh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new wc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let N=-1,U=-1;return 0!==p.type&&(N=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),U=c.indexOf(p.doc.key)),{type:Kv(p.type),doc:D,oldIndex:N,newIndex:U}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt()}}function Xm(i,e){return i instanceof Ic&&e instanceof Ic?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Dc&&e instanceof Dc&&i._firestore===e._firestore&&Zd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ey(i){i=Ir(i,wi);const e=Ir(i.firestore,Ii);return yc(Ji(e),i._key).then(t=>ly(e,i,t))}class Xu extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,t)}}function ty(i){i=Ir(i,wi);const e=Ir(i.firestore,Ii),t=Ji(e),s=new Xu(e);return function Yc(i,e){const t=new ai;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(s=(0,h.Z)(function*(a,c,p){try{const D=yield function(N,U){const Q=$t(N);return Q.persistence.runTransaction("read document","readonly",ye=>Q.localDocuments.getDocument(ye,U))}(a,c);D.isFoundDocument()?p.resolve(D):D.isNoDocument()?p.resolve(null):p.reject(new vt(qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const N=cc(D,`Failed to get document '${c} from cache`);p.reject(N)}}),function(a,c,p){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._key).then(a=>new Ic(e,s,i._key,a,new wc(null!==a&&a.hasLocalMutations,!0),i.converter))}function ny(i){i=Ir(i,wi);const e=Ir(i.firestore,Ii);return yc(Ji(e),i._key,{source:"server"}).then(t=>ly(e,i,t))}function ry(i){i=Ir(i,Ms);const e=Ir(i.firestore,Ii),t=Ji(e),s=new Xu(e);return wf(i._query),Hp(t,i._query).then(a=>new Dc(e,s,i,a))}function iy(i){i=Ir(i,Ms);const e=Ir(i.firestore,Ii),t=Ji(e),s=new Xu(e);return function gm(i,e){const t=new ai;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(s=(0,h.Z)(function*(a,c,p){try{const D=yield Rd(a,c,!0),N=new um(c,D.ir),U=N.sc(D.documents),Q=N.applyChanges(U,!1);p.resolve(Q.snapshot)}catch(D){const N=cc(D,`Failed to execute query '${c} against cache`);p.reject(N)}}),function(a,c,p){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._query).then(a=>new Dc(e,s,i,a))}function sy(i){i=Ir(i,Ms);const e=Ir(i.firestore,Ii),t=Ji(e),s=new Xu(e);return Hp(t,i._query,{source:"server"}).then(a=>new Dc(e,s,i,a))}function oy(i,e,t){i=Ir(i,wi);const s=Ir(i.firestore,Ii),a=Cf(i.converter,e,t);return su(s,[Qd(xl(s),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,Ei.none())])}function ay(i,e,t,...s){i=Ir(i,wi);const a=Ir(i.firestore,Ii),c=xl(a);let p;return p="string"==typeof(e=(0,de.m9)(e))||e instanceof Sl?vf(c,"updateDoc",i._key,e,t,s):Vm(c,"updateDoc",i._key,e),su(a,[p.toMutation(i._key,Ei.exists(!0))])}function uy(i){return su(Ir(i.firestore,Ii),[new pl(i._key,Ei.none())])}function Cc(i,e){const t=Ir(i.firestore,Ii),s=Zp(i),a=Cf(i.converter,e);return su(t,[Qd(xl(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,Ei.exists(!1))]).then(()=>s)}function qv(i,...e){var t,s,a;i=(0,de.m9)(i);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||mf(e[p])||(c=e[p],p++);const D={includeMetadataChanges:c.includeMetadataChanges};if(mf(e[p])){const ye=e[p];e[p]=null===(t=ye.next)||void 0===t?void 0:t.bind(ye),e[p+1]=null===(s=ye.error)||void 0===s?void 0:s.bind(ye),e[p+2]=null===(a=ye.complete)||void 0===a?void 0:a.bind(ye)}let N,U,Q;if(i instanceof wi)U=Ir(i.firestore,Ii),Q=ju(i._key.path),N={next:ye=>{e[p]&&e[p](ly(U,i,ye))},error:e[p+1],complete:e[p+2]};else{const ye=Ir(i,Ms);U=Ir(ye.firestore,Ii),Q=ye._query;const Be=new Xu(U);N={next:ut=>{e[p]&&e[p](new Dc(U,Be,ye,ut))},error:e[p+1],complete:e[p+2]},wf(i._query)}return function(ye,Be,ut,Ot){const Xt=new lf(Ot),on=new $o(Be,Xt,ut);return ye.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return nm(yield ru(ye),on)})),()=>{Xt.Dc(),ye.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return Yh(yield ru(ye),on)}))}}(Ji(U),Q,D,N)}function Zv(i,e){return function mm(i,e){const t=new lf(e);return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return s=yield ru(i),a=t,$t(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return s=yield ru(i),a=t,void $t(s).ku.delete(a);var s,a}))}}(Ji(i=Ir(i,Ii)),mf(e)?e:{next:e})}function su(i,e){return function(t,s){const a=new ai;return t.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function Tv(i,e,t){return ja.apply(this,arguments)}(yield Tl(t),s,a)})),a.promise}(Ji(i),e)}function ly(i,e,t){const s=t.docs.get(e._key),a=new Xu(i);return new Ic(i,a,e._key,s,new wc(t.hasPendingWrites,t.fromCache),e.converter)}const _0={maxAttempts:5};class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,t,s){this._verifyNotCommitted();const a=el(e,this._firestore),c=Cf(a.converter,t,s),p=Qd(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Ei.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=el(e,this._firestore);let p;return p="string"==typeof(t=(0,de.m9)(t))||t instanceof Sl?vf(this._dataReader,"WriteBatch.update",c._key,t,s,a):Vm(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,Ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=el(e,this._firestore);return this._mutations=this._mutations.concat(new pl(t._key,Ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function el(i,e){if((i=(0,de.m9)(i)).firestore!==e)throw new vt(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xl(e)}get(e){const t=el(e,this._firestore),s=new zv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Kt();const c=a[0];if(c.isFoundDocument())return new eh(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new eh(this._firestore,s,t._key,null,t.converter);throw Kt()})}set(e,t,s){const a=el(e,this._firestore),c=Cf(a.converter,t,s),p=Qd(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const c=el(e,this._firestore);let p;return p="string"==typeof(t=(0,de.m9)(t))||t instanceof Sl?vf(this._dataReader,"Transaction.update",c._key,t,s,a):Vm(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=el(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=el(e,this._firestore),s=new Xu(this._firestore);return super.get(e).then(a=>new Ic(this._firestore,s,t._key,a._document,new wc(!1,!1),t.converter))}}function fy(i,e,t){i=Ir(i,Ii);const s=Object.assign(Object.assign({},_0),t);return function(a){if(a.maxAttempts<1)throw new vt(qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,c,p){const D=new ai;return a.asyncQueue.enqueueAndForget((0,h.Z)(function*(){const N=yield function mc(i){return bu(i).then(e=>e.datastore)}(a);new a0(a.asyncQueue,N,p,c,D).run()})),D.promise}(Ji(i),a=>e(new Qv(i,a)),s)}function py(){return new Au("deleteField")}function gy(){return new eg("serverTimestamp")}function my(...i){return new Fm("arrayUnion",i)}function Jv(...i){return new Hv("arrayRemove",i)}function Xv(i){return new Lm("increment",i)}!function(i,e=!0){Mr=L.SDK_VERSION,(0,L._registerComponent)(new j.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new Ii(new nl(t.getProvider("auth-internal")),new Nl(t.getProvider("app-check-internal")),function(D,N){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new vt(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(D.options.projectId,N)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,L.registerVersion)(mr,"3.13.0",i),(0,L.registerVersion)(mr,"3.13.0","esm2017")}()},2090:(Bt,ze,k)=>{k.d(ze,{$s:()=>K,BH:()=>Xe,G6:()=>Fe,L:()=>xe,LL:()=>Vt,Pz:()=>rt,Sg:()=>Ne,UG:()=>wt,US:()=>me,ZB:()=>Ee,ZR:()=>Et,aH:()=>he,b$:()=>xt,eu:()=>Ke,hl:()=>$e,jU:()=>jt,m9:()=>It,ne:()=>an,pd:()=>dr,r3:()=>Wn,ru:()=>yt,tV:()=>ee,uI:()=>ve,vZ:()=>An,w1:()=>Dr,xO:()=>jr,xb:()=>cr,z$:()=>ot,zI:()=>at,zd:()=>$r});const ge=function(oe){const ue=[];let Y=0;for(let q=0;q<oe.length;q++){let H=oe.charCodeAt(q);H<128?ue[Y++]=H:H<2048?(ue[Y++]=H>>6|192,ue[Y++]=63&H|128):55296==(64512&H)&&q+1<oe.length&&56320==(64512&oe.charCodeAt(q+1))?(H=65536+((1023&H)<<10)+(1023&oe.charCodeAt(++q)),ue[Y++]=H>>18|240,ue[Y++]=H>>12&63|128,ue[Y++]=H>>6&63|128,ue[Y++]=63&H|128):(ue[Y++]=H>>12|224,ue[Y++]=H>>6&63|128,ue[Y++]=63&H|128)}return ue},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(oe,ue){if(!Array.isArray(oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=ue?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let H=0;H<oe.length;H+=3){const De=oe[H],st=H+1<oe.length,Mt=st?oe[H+1]:0,Yt=H+2<oe.length,re=Yt?oe[H+2]:0;let Ae=(15&Mt)<<2|re>>6,He=63&re;Yt||(He=64,st||(Ae=64)),q.push(Y[De>>2],Y[(3&De)<<4|Mt>>4],Y[Ae],Y[He])}return q.join("")},encodeString(oe,ue){return this.HAS_NATIVE_SUPPORT&&!ue?btoa(oe):this.encodeByteArray(ge(oe),ue)},decodeString(oe,ue){return this.HAS_NATIVE_SUPPORT&&!ue?atob(oe):function(oe){const ue=[];let Y=0,q=0;for(;Y<oe.length;){const H=oe[Y++];if(H<128)ue[q++]=String.fromCharCode(H);else if(H>191&&H<224){const De=oe[Y++];ue[q++]=String.fromCharCode((31&H)<<6|63&De)}else if(H>239&&H<365){const Yt=((7&H)<<18|(63&oe[Y++])<<12|(63&oe[Y++])<<6|63&oe[Y++])-65536;ue[q++]=String.fromCharCode(55296+(Yt>>10)),ue[q++]=String.fromCharCode(56320+(1023&Yt))}else{const De=oe[Y++],st=oe[Y++];ue[q++]=String.fromCharCode((15&H)<<12|(63&De)<<6|63&st)}}return ue.join("")}(this.decodeStringToByteArray(oe,ue))},decodeStringToByteArray(oe,ue){this.init_();const Y=ue?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let H=0;H<oe.length;){const De=Y[oe.charAt(H++)],Mt=H<oe.length?Y[oe.charAt(H)]:0;++H;const re=H<oe.length?Y[oe.charAt(H)]:64;++H;const X=H<oe.length?Y[oe.charAt(H)]:64;if(++H,null==De||null==Mt||null==re||null==X)throw new we;q.push(De<<2|Mt>>4),64!==re&&(q.push(Mt<<4&240|re>>2),64!==X&&q.push(re<<6&192|X))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let oe=0;oe<this.ENCODED_VALS.length;oe++)this.byteToCharMap_[oe]=this.ENCODED_VALS.charAt(oe),this.charToByteMap_[this.byteToCharMap_[oe]]=oe,this.byteToCharMapWebSafe_[oe]=this.ENCODED_VALS_WEBSAFE.charAt(oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[oe]]=oe,oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(oe)]=oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(oe)]=oe)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(oe){return function(oe){const ue=ge(oe);return me.encodeByteArray(ue,!0)}(oe).replace(/\./g,"")},ee=function(oe){try{return me.decodeString(oe,!0)}catch(ue){console.error("base64Decode failed: ",ue)}return null};function Ee(oe,ue){if(!(ue instanceof Object))return ue;switch(ue.constructor){case Date:return new Date(ue.getTime());case Object:void 0===oe&&(oe={});break;case Array:oe=[];break;default:return ue}for(const Y in ue)!ue.hasOwnProperty(Y)||!Ze(Y)||(oe[Y]=Ee(oe[Y],ue[Y]));return oe}function Ze(oe){return"__proto__"!==oe}const Oe=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const oe=process.env.__FIREBASE_DEFAULTS__;return oe?JSON.parse(oe):void 0})()||(()=>{if(typeof document>"u")return;let oe;try{oe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ue=oe&&ee(oe[1]);return ue&&JSON.parse(ue)})()}catch(oe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${oe}`)}},he=()=>{var oe;return null===(oe=Oe())||void 0===oe?void 0:oe.config},rt=oe=>{var ue;return null===(ue=Oe())||void 0===ue?void 0:ue[`_${oe}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ue,Y)=>{this.resolve=ue,this.reject=Y})}wrapCallback(ue){return(Y,q)=>{Y?this.reject(Y):this.resolve(q),"function"==typeof ue&&(this.promise.catch(()=>{}),1===ue.length?ue(Y):ue(Y,q))}}}function Ne(oe,ue){if(oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=ue||"demo-project",H=oe.iat||0,De=oe.sub||oe.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:H,exp:H+3600,auth_time:H,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},oe);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(st)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function wt(){var oe;const ue=null===(oe=Oe())||void 0===oe?void 0:oe.forceEnvironment;if("node"===ue)return!0;if("browser"===ue)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function jt(){return"object"==typeof self&&self.self===self}function yt(){const oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof oe&&void 0!==oe.id}function xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dr(){const oe=ot();return oe.indexOf("MSIE ")>=0||oe.indexOf("Trident/")>=0}function Fe(){return!wt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){try{return"object"==typeof indexedDB}catch{return!1}}function Ke(){return new Promise((oe,ue)=>{try{let Y=!0;const q="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(q);H.onsuccess=()=>{H.result.close(),Y||self.indexedDB.deleteDatabase(q),oe(!0)},H.onupgradeneeded=()=>{Y=!1},H.onerror=()=>{var De;ue((null===(De=H.error)||void 0===De?void 0:De.message)||"")}}catch(Y){ue(Y)}})}function at(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Et extends Error{constructor(ue,Y,q){super(Y),this.code=ue,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(ue,Y,q){this.service=ue,this.serviceName=Y,this.errors=q}create(ue,...Y){const q=Y[0]||{},H=`${this.service}/${ue}`,De=this.errors[ue],st=De?function St(oe,ue){return oe.replace(Zt,(Y,q)=>{const H=ue[q];return null!=H?String(H):`<${q}?>`})}(De,q):"Error";return new Et(H,`${this.serviceName}: ${st} (${H}).`,q)}}const Zt=/\{\$([^}]+)}/g;function Wn(oe,ue){return Object.prototype.hasOwnProperty.call(oe,ue)}function cr(oe){for(const ue in oe)if(Object.prototype.hasOwnProperty.call(oe,ue))return!1;return!0}function An(oe,ue){if(oe===ue)return!0;const Y=Object.keys(oe),q=Object.keys(ue);for(const H of Y){if(!q.includes(H))return!1;const De=oe[H],st=ue[H];if(hn(De)&&hn(st)){if(!An(De,st))return!1}else if(De!==st)return!1}for(const H of q)if(!Y.includes(H))return!1;return!0}function hn(oe){return null!==oe&&"object"==typeof oe}function jr(oe){const ue=[];for(const[Y,q]of Object.entries(oe))Array.isArray(q)?q.forEach(H=>{ue.push(encodeURIComponent(Y)+"="+encodeURIComponent(H))}):ue.push(encodeURIComponent(Y)+"="+encodeURIComponent(q));return ue.length?"&"+ue.join("&"):""}function $r(oe){const ue={};return oe.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[H,De]=q.split("=");ue[decodeURIComponent(H)]=decodeURIComponent(De)}}),ue}function dr(oe){const ue=oe.indexOf("?");if(!ue)return"";const Y=oe.indexOf("#",ue);return oe.substring(ue,Y>0?Y:void 0)}function an(oe,ue){const Y=new zt(oe,ue);return Y.subscribe.bind(Y)}class zt{constructor(ue,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{ue(this)}).catch(q=>{this.error(q)})}next(ue){this.forEachObserver(Y=>{Y.next(ue)})}error(ue){this.forEachObserver(Y=>{Y.error(ue)}),this.close(ue)}complete(){this.forEachObserver(ue=>{ue.complete()}),this.close()}subscribe(ue,Y,q){let H;if(void 0===ue&&void 0===Y&&void 0===q)throw new Error("Missing Observer.");H=function Rn(oe,ue){if("object"!=typeof oe||null===oe)return!1;for(const Y of ue)if(Y in oe&&"function"==typeof oe[Y])return!0;return!1}(ue,["next","error","complete"])?ue:{next:ue,error:Y,complete:q},void 0===H.next&&(H.next=hr),void 0===H.error&&(H.error=hr),void 0===H.complete&&(H.complete=hr);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),De}unsubscribeOne(ue){void 0===this.observers||void 0===this.observers[ue]||(delete this.observers[ue],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ue){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,ue)}sendOne(ue,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ue])try{Y(this.observers[ue])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(ue){this.finalized||(this.finalized=!0,void 0!==ue&&(this.finalError=ue),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}function K(oe,ue=1e3,Y=2){const q=ue*Math.pow(Y,oe),H=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+H)}function It(oe){return oe&&oe._delegate?oe._delegate:oe}},4985:(Bt,ze,k)=>{k.d(ze,{O:()=>h});class h{constructor(j,ge,de,me,we,se,xe,ee){this.value=xe,this.label=ge,this.type=de,this.placeholder=j,this.classlist=me||" ",this.ref=se||void 0,this.valueCallback=we,this.readonly=ee}constructor2(j){Object.assign(this,j)}setReadOnly(j){return this.readonly=j,this}setValue(j){return this.value=j,this}getValue(){this.value=this.ref?this.valueCallback(...this.ref.map(j=>j.value)):this.valueCallback()}getLabel(){return this.label}}},3651:(Bt,ze,k)=>{k.d(ze,{e:()=>Dt});var h=k(5861),L=k(1389),we=(k(2090),k(6881),k(1877),k(4859),k(3900)),se=k(9646),xe=k(5698),ee=k(4004),ne=k(8505),Ee=k(4650),Ze=k(1205),je=k(33),Le=k(9051);let Dt=(()=>{class We{constructor(Tt,_t,he,rt){this.afAuth=Tt,this.afs=_t,this.router=he,this.ngZone=rt,this.user$=this.afAuth.authState.pipe((0,we.w)(Xe=>Xe?this.afs.doc(`users/${Xe.uid}`).valueChanges():(0,se.of)(null)))}isLoggedIn(){var Tt=!1;return this.user$.pipe((0,xe.q)(1),(0,ee.U)(_t=>!!_t),(0,ne.b)(_t=>{_t&&(Tt=!0)})),Tt}googleSignin(){var Tt=this;return(0,h.Z)(function*(){const _t=yield Tt.afAuth.signInWithPopup(new L.V);return _t.user&&Tt.router.navigate(["/home"]),Tt.updateUserData(_t.user)})()}GoogleAuth(){return this.AuthLogin(new L.V)}AuthLogin(Tt){var _t=this;return(0,h.Z)(function*(){return _t.afAuth.signInWithPopup(Tt).then(he=>{console.log("You have been successfully logged in!")}).catch(he=>{console.log(he)})})()}updateUserData(Tt){return this.afs.doc(`users/${Tt.uid}`).set({uid:Tt.uid,email:Tt.email,displayName:Tt.displayName},{merge:!0})}signOut(){var Tt=this;return(0,h.Z)(function*(){yield Tt.afAuth.signOut(),Tt.router.navigate(["/login"])})()}}return We.\u0275fac=function(Tt){return new(Tt||We)(Ee.LFG(Ze.zQ),Ee.LFG(je.ST),Ee.LFG(Le.F0),Ee.LFG(Ee.R0b))},We.\u0275prov=Ee.Yz7({token:We,factory:We.\u0275fac,providedIn:"root"}),We})()},6535:(Bt,ze,k)=>{k.d(ze,{U:()=>j});var h=k(4650),L=k(33);let j=(()=>{class ge{constructor(me,we){this.db=me,this.path=we,this.objectRef=me.collection(this.path)}pathSetter(me){this.path=me,this.objectRef=this.db.collection(this.path)}pathGetter(){return this.path}getNextBatch(me,we){return this.db.collection(this.path,we?se=>se.orderBy("timestamp","desc").startAfter(we.timestamp).limit(me):se=>se.orderBy("timestamp","desc").limit(me))}getAll(){return this.objectRef}getByKey(me,we){return this.db.collection(this.path,se=>se.where(me,"==",we))}create(me){return this.objectRef.add({...me})}update(me,we){return this.objectRef.doc(me).update(we)}delete(me){return this.objectRef.doc(me).delete()}filterByNameBatch(me,we,se){return this.db.collection(this.path,se?xe=>xe.where("name",">=",me).where("name","<=",me+"\uf8ff").orderBy("name","desc").startAfter(se.name).limit(we):xe=>xe.where("name",">=",me).where("name","<=",me+"\uf8ff").orderBy("name","desc").limit(we))}filterUrgent(me,we,se){return this.db.collection(this.path,se?xe=>xe.where("orderDeadline","<=",me).orderBy("orderDeadline","asc").startAfter(se.name).limit(we):xe=>xe.where("orderDeadline","<=",me).orderBy("orderDeadline","asc").limit(we))}filterByKeyBatch(me,we,se,xe,ee){return"orderDeadline"==me?this.filterUrgent(we,se,xe):this.db.collection(this.path,xe?ee?ne=>ne.where(me,"==",we).orderBy("timestamp","desc").startAfter(xe.timestamp).limit(se):ne=>ne.where(me,">=",we).where(me,"<=",we+"\uf8ff").orderBy(me,"desc").startAfter(xe[me]).limit(se):ee?ne=>ne.where(me,"==",we).orderBy("timestamp","desc").limit(se):ne=>ne.where(me,">=",we).where(me,"<=",we+"\uf8ff").orderBy(me,"desc").limit(se))}}return ge.\u0275fac=function(me){return new(me||ge)(h.LFG(L.ST),h.LFG("path"))},ge.\u0275prov=h.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})()},5748:(Bt,ze,k)=>{k.d(ze,{Q:()=>ee});var h=k(4650),L=k(4004),j=k(6535),ge=k(6895);function de(ne,Ee){if(1&ne&&(h.TgZ(0,"div",15),h._uU(1),h.qZA()),2&ne){const Ze=h.oxw().$implicit,je=h.oxw().$implicit,Le=h.oxw(2);h.xp6(1),h.hij(" ",je[Ze].toDate().toLocaleDateString("es-MX",Le.dateOptions)," ")}}function me(ne,Ee){if(1&ne&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&ne){const Ze=h.oxw().$implicit,je=h.oxw().$implicit;h.xp6(1),h.hij(" ",je[Ze]," ")}}function we(ne,Ee){if(1&ne&&(h.TgZ(0,"div"),h.YNc(1,de,2,1,"div",13),h.YNc(2,me,2,1,"div",14),h.qZA()),2&ne){const Ze=Ee.$implicit;h.xp6(1),h.Q6J("ngIf","orderDeadline"==Ze),h.xp6(1),h.Q6J("ngIf","orderDeadline"!=Ze)}}function se(ne,Ee){if(1&ne){const Ze=h.EpF();h.TgZ(0,"li",10),h.NdJ("click",function(){const Le=h.CHM(Ze),Dt=Le.$implicit,We=Le.index,Oe=h.oxw(2);return h.KtG(Oe.setActiveProduct(Dt,We))}),h.TgZ(1,"span",11),h.YNc(2,we,3,2,"div",12),h.qZA()()}if(2&ne){const Ze=Ee.index,je=h.oxw(2);h.ekj("active",Ze==je.currentIndex),h.xp6(2),h.Q6J("ngForOf",je.showParams)}}function xe(ne,Ee){if(1&ne&&(h.TgZ(0,"ul",8),h.YNc(1,se,3,3,"li",9),h.qZA()),2&ne){const Ze=h.oxw();h.xp6(1),h.Q6J("ngForOf",Ze.elementArray)}}let ee=(()=>{class ne{constructor(Ze){this.fos=Ze,this.selectedElement=new h.vpe,this.fetchedArray=new h.vpe,this.showParams=["name"],this.mode=!1,this.key="name",this.dateOptions={weekday:"long",year:"numeric",month:"long",day:"numeric"},this.currentIndex=-1,this.isFetched=!1,this.firstCall=!0,this.disableNext=!1,this.disablePrev=!0,this.updateProducts=!1,this.elementArray=[],this.lastInResponses=[],this.queryChange=void 0,this.filterKey="name",this.exact=!1,this.elementPerCall=2}ngOnInit(){this.path||(this.path="/products"),this.fos.pathSetter(this.path),this.nextPage(!0),this.filterKey=this.key,this.firstCall=!1}setActiveProduct(Ze,je){this.currentIndex=je,this.selectedElement.emit({element:Ze,index:je})}nextPage(Ze){var je,Le;if(Ze){if(this.disableNext)return;je=this.elementArray.at(-1),this.lastInResponses.push(je)}else{if(this.disablePrev)return;this.lastInResponses?.pop(),je=this.lastInResponses?.at(-1)}Le=this.queryChange?this.fos.filterByKeyBatch(this.key,this.queryChange,this.elementPerCall,je,this.exact):this.fos.getNextBatch(this.elementPerCall,je),console.log(this.key,this.queryChange,this.path),Le.get().pipe((0,L.U)(Dt=>Dt.docs.map(We=>({id:We.id,...We.data()})))).subscribe(Dt=>{if(console.log(Dt),!Dt.length)return this.disableNext=!0,void this.lastInResponses?.pop();this.elementArray=Dt,this.disableNext=Dt.length<this.elementPerCall,this.disablePrev=!je,this.isFetched=!0,this.mode&&this.fetchedArray.emit(this.elementArray)})}resetPagination(){this.disableNext=!1,this.disablePrev=!0,this.currentIndex=-1,this.currentElement=void 0,this.elementArray=[],this.lastInResponses=[]}ngOnChanges(Ze){this.firstCall||(this.isFetched=!1,Ze.path&&this.fos.pathSetter(Ze.path.currentValue),Ze.query&&(Ze.query.currentValue instanceof Object?(this.queryChange=Ze.query.currentValue.value,this.key=Ze.query.currentValue.key,this.exact=!!Ze.query.currentValue.exact):(this.queryChange=Ze.query.currentValue,this.key=this.filterKey,this.exact=!1),console.log(this.key,this.queryChange)),this.filterProducts())}filterProducts(){this.resetPagination(),this.nextPage(!0)}}return ne.\u0275fac=function(Ze){return new(Ze||ne)(h.Y36(j.U))},ne.\u0275cmp=h.Xpm({type:ne,selectors:[["app-pagination"]],inputs:{query:"query",path:"path",showParams:"showParams",mode:"mode",key:"key"},outputs:{selectedElement:"selectedElement",fetchedArray:"fetchedArray"},features:[h._Bn([j.U,{provide:"path",useValue:"/RMreport"}]),h.TTD],decls:14,vars:1,consts:[["aria-label","Page navigation",1,"my-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],["class","list-group mt-3 mb-3",4,"ngIf"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[1,"d-flex"],[4,"ngFor","ngForOf"],["class","ms-2",4,"ngIf"],[4,"ngIf"],[1,"ms-2"]],template:function(Ze,je){1&Ze&&(h.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"button",3),h.NdJ("click",function(){return je.nextPage(!1)}),h.TgZ(4,"span",4),h._uU(5,"\xab"),h.qZA()()(),h.TgZ(6,"li",2)(7,"span",5),h._uU(8," Anterior/Siguiente Registro"),h.qZA()(),h.TgZ(9,"li",2)(10,"button",6),h.NdJ("click",function(){return je.nextPage(!0)}),h.TgZ(11,"span",4),h._uU(12,"\xbb"),h.qZA()()()()(),h.YNc(13,xe,2,1,"ul",7)),2&Ze&&(h.xp6(13),h.Q6J("ngIf",!je.mode&&je.isFetched))},dependencies:[ge.sg,ge.O5]}),ne})()},4466:(Bt,ze,k)=>{k.d(ze,{m:()=>ge});var h=k(6895),L=k(433),j=k(4650);let ge=(()=>{class de{}return de.\u0275fac=function(we){return new(we||de)},de.\u0275mod=j.oAB({type:de}),de.\u0275inj=j.cJS({imports:[h.ez,L.u5,L.UX,L.u5]}),de})()},2955:(Bt,ze,k)=>{var h=k(1481),L=k(4650),j=k(9051),ge=k(4985),de=k(5748);let me=(()=>{class Ne{constructor(){this.formObj=[[new ge.O("Nombre","fullname","text"),new ge.O("Nombre de Usuario","username","text")],[new ge.O("Correo Electronico","email","text")],[new ge.O("Password","password","password"),new ge.O("Confirmar Password","Confirm Password","password")]]}ngOnInit(){}submit(ve){console.log(ve)}filter(){this.q="Esc"}getSelectedElement(ve){console.log(ve)}}return Ne.\u0275fac=function(ve){return new(ve||Ne)},Ne.\u0275cmp=L.Xpm({type:Ne,selectors:[["app-home"]],decls:3,vars:2,consts:[[3,"click"],[3,"path","query","selectedElement"]],template:function(ve,wt){1&ve&&(L.TgZ(0,"button",0),L.NdJ("click",function(){return wt.filter()}),L._uU(1,"filter me this"),L.qZA(),L.TgZ(2,"app-pagination",1),L.NdJ("selectedElement",function(yt){return wt.getSelectedElement(yt)}),L.qZA()),2&ve&&(L.xp6(2),L.Q6J("path","/products")("query",wt.q))},dependencies:[de.Q]}),Ne})();var we=k(5698),se=k(4004),xe=k(8505),ee=k(3651);const Ze=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:(()=>{class Ne{constructor(ve){this.authService=ve}ngOnInit(){}authenticate(){this.authService.googleSignin()}}return Ne.\u0275fac=function(ve){return new(ve||Ne)(L.Y36(ee.e))},Ne.\u0275cmp=L.Xpm({type:Ne,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"d-flex","text-center","text-bg-dark","h-100",2,"background-image","url(assets/img/bg.png)"],[1,"d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"my-auto"],["type","button",1,"btn","btn-lg","btn-outline-light","fw-bold","border-white","rounded-pill",3,"click"],[1,"ms-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"]],template:function(ve,wt){1&ve&&(L.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),L._uU(4," IBM Furniture"),L.qZA(),L.TgZ(5,"button",3),L.NdJ("click",function(){return wt.authenticate()}),L._uU(6," Iniciar Sesion con Google "),L.TgZ(7,"span",4),L.O4$(),L.TgZ(8,"svg",5),L._UZ(9,"path",6),L.qZA()()()()()())}}),Ne})()},{path:"home",component:me,canActivate:[(()=>{class Ne{constructor(ve,wt){this.auth=ve,this.router=wt}canActivate(ve,wt){return this.auth.user$.pipe((0,we.q)(1),(0,se.U)(jt=>!!jt),(0,xe.b)(jt=>{jt||(console.log("access denied"),this.router.navigate(["/login"]))}))}}return Ne.\u0275fac=function(ve){return new(ve||Ne)(L.LFG(ee.e),L.LFG(j.F0))},Ne.\u0275prov=L.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})()]},{path:"clients",loadChildren:()=>k.e(737).then(k.bind(k,1737)).then(Ne=>Ne.ClientModule)},{path:"materials",loadChildren:()=>Promise.all([k.e(540),k.e(434)]).then(k.bind(k,2434)).then(Ne=>Ne.MaterialModule)},{path:"products",loadChildren:()=>Promise.all([k.e(592),k.e(596)]).then(k.bind(k,2596)).then(Ne=>Ne.ProductModule)},{path:"orders",loadChildren:()=>Promise.all([k.e(540),k.e(592),k.e(479)]).then(k.bind(k,6479)).then(Ne=>Ne.OrdersModule)},{path:"shop",loadChildren:()=>Promise.all([k.e(540),k.e(592),k.e(117)]).then(k.bind(k,9117)).then(Ne=>Ne.ShoppingModule)},{path:"history",loadChildren:()=>k.e(72).then(k.bind(k,2072)).then(Ne=>Ne.HistoryModule)}];let je=(()=>{class Ne{}return Ne.\u0275fac=function(ve){return new(ve||Ne)},Ne.\u0275mod=L.oAB({type:Ne}),Ne.\u0275inj=L.cJS({imports:[j.Bz.forRoot(Ze),j.Bz]}),Ne})();var Le=k(2011),Dt=k(33),We=k(6895);let Oe=(()=>{class Ne{constructor(ve){this.auth=ve,this.signOut=()=>this.auth.signOut()}ngOnInit(){}}return Ne.\u0275fac=function(ve){return new(ve||Ne)(L.Y36(ee.e))},Ne.\u0275cmp=L.Xpm({type:Ne,selectors:[["app-navbar"]],decls:36,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["height","30","src","/assets/img/ibmFurniture_logo.png","alt","","srcset","",1,"rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["routerLink","products",1,"nav-link"],["routerLink","clients",1,"nav-link"],["routerLink","materials",1,"nav-link"],["routerLink","orders",1,"nav-link"],["routerLink","shop",1,"nav-link"],["routerLink","history",1,"nav-link"],[1,"navbar-nav"],[1,"fs-3","nav-link","me-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"]],template:function(ve,wt){1&ve&&(L.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),L._UZ(3,"img",3),L._uU(4," IBM Furniture "),L.qZA(),L.TgZ(5,"button",4),L._UZ(6,"span",5),L.qZA(),L.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),L._uU(11,"Inicio"),L.qZA()(),L.TgZ(12,"li",8)(13,"a",10),L._uU(14,"Productos"),L.qZA()(),L.TgZ(15,"li",8)(16,"a",11),L._uU(17,"Clientes"),L.qZA()(),L.TgZ(18,"li",8)(19,"a",12),L._uU(20,"Materiales"),L.qZA()(),L.TgZ(21,"li",8)(22,"a",13),L._uU(23,"Ordenes"),L.qZA()(),L.TgZ(24,"li",8)(25,"a",14),L._uU(26,"Compras"),L.qZA()(),L.TgZ(27,"li",8)(28,"a",15),L._uU(29,"Historial"),L.qZA()()(),L.TgZ(30,"ul",16)(31,"li",8)(32,"a",17),L.NdJ("click",function(){return wt.signOut()}),L.O4$(),L.TgZ(33,"svg",18),L._UZ(34,"path",19)(35,"path",20),L.qZA()()()()()()())},dependencies:[j.yS]}),Ne})();function Tt(Ne,ot){1&Ne&&L._UZ(0,"app-navbar")}let _t=(()=>{class Ne{constructor(ve){this.auth=ve,this.title="IBMFurniture"}}return Ne.\u0275fac=function(ve){return new(ve||Ne)(L.Y36(ee.e))},Ne.\u0275cmp=L.Xpm({type:Ne,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"vh-100"]],template:function(ve,wt){1&ve&&(L.YNc(0,Tt,1,0,"app-navbar",0),L.ALo(1,"async"),L.TgZ(2,"div",1),L._UZ(3,"router-outlet"),L.qZA()),2&ve&&L.Q6J("ngIf",L.lcZ(1,1,wt.auth.user$))},dependencies:[We.O5,j.lC,Oe,We.Ov]}),Ne})();const he_firebase={apiKey:"AIzaSyCmya1htVh_wLXOc0zUSpurtnKYROqfSoU",authDomain:"ibmfurniture.firebaseapp.com",projectId:"ibmfurniture",storageBucket:"ibmfurniture.appspot.com",messagingSenderId:"313012116484",appId:"1:313012116484:web:1b535bfdb657c90b742951"};var rt=k(4466);let Xe=(()=>{class Ne{}return Ne.\u0275fac=function(ve){return new(ve||Ne)},Ne.\u0275mod=L.oAB({type:Ne,bootstrap:[_t]}),Ne.\u0275inj=L.cJS({imports:[h.b2,je,Le.hO.initializeApp(he_firebase),Dt.yb,rt.m]}),Ne})();(0,L.G48)(),h.q6().bootstrapModule(Xe).catch(Ne=>console.error(Ne))},9751:(Bt,ze,k)=>{k.d(ze,{y:()=>se});var h=k(2961),L=k(727),j=k(8822),ge=k(9635),de=k(2416),me=k(576),we=k(2806);let se=(()=>{class Ee{constructor(je){je&&(this._subscribe=je)}lift(je){const Le=new Ee;return Le.source=this,Le.operator=je,Le}subscribe(je,Le,Dt){const We=function ne(Ee){return Ee&&Ee instanceof h.Lv||function ee(Ee){return Ee&&(0,me.m)(Ee.next)&&(0,me.m)(Ee.error)&&(0,me.m)(Ee.complete)}(Ee)&&(0,L.Nn)(Ee)}(je)?je:new h.Hp(je,Le,Dt);return(0,we.x)(()=>{const{operator:Oe,source:Tt}=this;We.add(Oe?Oe.call(We,Tt):Tt?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(je){try{return this._subscribe(je)}catch(Le){je.error(Le)}}forEach(je,Le){return new(Le=xe(Le))((Dt,We)=>{const Oe=new h.Hp({next:Tt=>{try{je(Tt)}catch(_t){We(_t),Oe.unsubscribe()}},error:We,complete:Dt});this.subscribe(Oe)})}_subscribe(je){var Le;return null===(Le=this.source)||void 0===Le?void 0:Le.subscribe(je)}[j.L](){return this}pipe(...je){return(0,ge.U)(je)(this)}toPromise(je){return new(je=xe(je))((Le,Dt)=>{let We;this.subscribe(Oe=>We=Oe,Oe=>Dt(Oe),()=>Le(We))})}}return Ee.create=Ze=>new Ee(Ze),Ee})();function xe(Ee){var Ze;return null!==(Ze=Ee??de.v.Promise)&&void 0!==Ze?Ze:Promise}},7579:(Bt,ze,k)=>{k.d(ze,{x:()=>we});var h=k(9751),L=k(727);const ge=(0,k(3888).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=k(8737),me=k(2806);let we=(()=>{class xe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const Ee=new se(this,this);return Ee.operator=ne,Ee}_throwIfClosed(){if(this.closed)throw new ge}next(ne){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ee of this.currentObservers)Ee.next(ne)}})}error(ne){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().error(ne)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:Ee,isStopped:Ze,observers:je}=this;return Ee||Ze?L.Lc:(this.currentObservers=null,je.push(ne),new L.w0(()=>{this.currentObservers=null,(0,de.P)(je,ne)}))}_checkFinalizedStatuses(ne){const{hasError:Ee,thrownError:Ze,isStopped:je}=this;Ee?ne.error(Ze):je&&ne.complete()}asObservable(){const ne=new h.y;return ne.source=this,ne}}return xe.create=(ee,ne)=>new se(ee,ne),xe})();class se extends we{constructor(ee,ne){super(),this.destination=ee,this.source=ne}next(ee){var ne,Ee;null===(Ee=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===Ee||Ee.call(ne,ee)}error(ee){var ne,Ee;null===(Ee=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===Ee||Ee.call(ne,ee)}complete(){var ee,ne;null===(ne=null===(ee=this.destination)||void 0===ee?void 0:ee.complete)||void 0===ne||ne.call(ee)}_subscribe(ee){var ne,Ee;return null!==(Ee=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(ee))&&void 0!==Ee?Ee:L.Lc}}},2961:(Bt,ze,k)=>{k.d(ze,{Hp:()=>Dt,Lv:()=>Ee});var h=k(576),L=k(727),j=k(2416),ge=k(7849);function de(){}const me=xe("C",void 0,void 0);function xe(he,rt,Xe){return{kind:he,value:rt,error:Xe}}var ee=k(3410),ne=k(2806);class Ee extends L.w0{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,L.Nn)(rt)&&rt.add(this)):this.destination=_t}static create(rt,Xe,Ne){return new Dt(rt,Xe,Ne)}next(rt){this.isStopped?Tt(function se(he){return xe("N",he,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?Tt(function we(he){return xe("E",void 0,he)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?Tt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function je(he,rt){return Ze.call(he,rt)}class Le{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(rt)}catch(Ne){We(Ne)}}error(rt){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(rt)}catch(Ne){We(Ne)}else We(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(Xe){We(Xe)}}}class Dt extends Ee{constructor(rt,Xe,Ne){let ot;if(super(),(0,h.m)(rt)||!rt)ot={next:rt??void 0,error:Xe??void 0,complete:Ne??void 0};else{let ve;this&&j.v.useDeprecatedNextContext?(ve=Object.create(rt),ve.unsubscribe=()=>this.unsubscribe(),ot={next:rt.next&&je(rt.next,ve),error:rt.error&&je(rt.error,ve),complete:rt.complete&&je(rt.complete,ve)}):ot=rt}this.destination=new Le(ot)}}function We(he){j.v.useDeprecatedSynchronousErrorHandling?(0,ne.O)(he):(0,ge.h)(he)}function Tt(he,rt){const{onStoppedNotification:Xe}=j.v;Xe&&ee.z.setTimeout(()=>Xe(he,rt))}const _t={closed:!0,next:de,error:function Oe(he){throw he},complete:de}},727:(Bt,ze,k)=>{k.d(ze,{Lc:()=>me,w0:()=>de,Nn:()=>we});var h=k(576);const j=(0,k(3888).d)(xe=>function(ne){xe(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((Ee,Ze)=>`${Ze+1}) ${Ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var ge=k(8737);class de{constructor(ee){this.initialTeardown=ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ee;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const je of ne)je.remove(this);else ne.remove(this);const{initialTeardown:Ee}=this;if((0,h.m)(Ee))try{Ee()}catch(je){ee=je instanceof j?je.errors:[je]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const je of Ze)try{se(je)}catch(Le){ee=ee??[],Le instanceof j?ee=[...ee,...Le.errors]:ee.push(Le)}}if(ee)throw new j(ee)}}add(ee){var ne;if(ee&&ee!==this)if(this.closed)se(ee);else{if(ee instanceof de){if(ee.closed||ee._hasParent(this))return;ee._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(ee)}}_hasParent(ee){const{_parentage:ne}=this;return ne===ee||Array.isArray(ne)&&ne.includes(ee)}_addParent(ee){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(ee),ne):ne?[ne,ee]:ee}_removeParent(ee){const{_parentage:ne}=this;ne===ee?this._parentage=null:Array.isArray(ne)&&(0,ge.P)(ne,ee)}remove(ee){const{_finalizers:ne}=this;ne&&(0,ge.P)(ne,ee),ee instanceof de&&ee._removeParent(this)}}de.EMPTY=(()=>{const xe=new de;return xe.closed=!0,xe})();const me=de.EMPTY;function we(xe){return xe instanceof de||xe&&"closed"in xe&&(0,h.m)(xe.remove)&&(0,h.m)(xe.add)&&(0,h.m)(xe.unsubscribe)}function se(xe){(0,h.m)(xe)?xe():xe.unsubscribe()}},2416:(Bt,ze,k)=>{k.d(ze,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Bt,ze,k)=>{k.d(ze,{z:()=>de});var h=k(8189),j=k(7669),ge=k(8996);function de(...me){return function L(){return(0,h.J)(1)}()((0,ge.D)(me,(0,j.yG)(me)))}},515:(Bt,ze,k)=>{k.d(ze,{E:()=>L});const L=new(k(9751).y)(de=>de.complete())},8996:(Bt,ze,k)=>{k.d(ze,{D:()=>rt});var h=k(8421),L=k(5363),j=k(9468),me=k(9751),se=k(2202),xe=k(576),ee=k(9672);function Ee(Xe,Ne){if(!Xe)throw new Error("Iterable cannot be null");return new me.y(ot=>{(0,ee.f)(ot,Ne,()=>{const ve=Xe[Symbol.asyncIterator]();(0,ee.f)(ot,Ne,()=>{ve.next().then(wt=>{wt.done?ot.complete():ot.next(wt.value)})},0,!0)})})}var Ze=k(3670),je=k(8239),Le=k(1144),Dt=k(6495),We=k(2206),Oe=k(4532),Tt=k(3260);function rt(Xe,Ne){return Ne?function he(Xe,Ne){if(null!=Xe){if((0,Ze.c)(Xe))return function ge(Xe,Ne){return(0,h.Xf)(Xe).pipe((0,j.R)(Ne),(0,L.Q)(Ne))}(Xe,Ne);if((0,Le.z)(Xe))return function we(Xe,Ne){return new me.y(ot=>{let ve=0;return Ne.schedule(function(){ve===Xe.length?ot.complete():(ot.next(Xe[ve++]),ot.closed||this.schedule())})})}(Xe,Ne);if((0,je.t)(Xe))return function de(Xe,Ne){return(0,h.Xf)(Xe).pipe((0,j.R)(Ne),(0,L.Q)(Ne))}(Xe,Ne);if((0,We.D)(Xe))return Ee(Xe,Ne);if((0,Dt.T)(Xe))return function ne(Xe,Ne){return new me.y(ot=>{let ve;return(0,ee.f)(ot,Ne,()=>{ve=Xe[se.h](),(0,ee.f)(ot,Ne,()=>{let wt,jt;try{({value:wt,done:jt}=ve.next())}catch(yt){return void ot.error(yt)}jt?ot.complete():ot.next(wt)},0,!0)}),()=>(0,xe.m)(ve?.return)&&ve.return()})}(Xe,Ne);if((0,Tt.L)(Xe))return function _t(Xe,Ne){return Ee((0,Tt.Q)(Xe),Ne)}(Xe,Ne)}throw(0,Oe.z)(Xe)}(Xe,Ne):(0,h.Xf)(Xe)}},8421:(Bt,ze,k)=>{k.d(ze,{Xf:()=>Ze});var h=k(7582),L=k(1144),j=k(8239),ge=k(9751),de=k(3670),me=k(2206),we=k(4532),se=k(6495),xe=k(3260),ee=k(576),ne=k(7849),Ee=k(8822);function Ze(he){if(he instanceof ge.y)return he;if(null!=he){if((0,de.c)(he))return function je(he){return new ge.y(rt=>{const Xe=he[Ee.L]();if((0,ee.m)(Xe.subscribe))return Xe.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,L.z)(he))return function Le(he){return new ge.y(rt=>{for(let Xe=0;Xe<he.length&&!rt.closed;Xe++)rt.next(he[Xe]);rt.complete()})}(he);if((0,j.t)(he))return function Dt(he){return new ge.y(rt=>{he.then(Xe=>{rt.closed||(rt.next(Xe),rt.complete())},Xe=>rt.error(Xe)).then(null,ne.h)})}(he);if((0,me.D)(he))return Oe(he);if((0,se.T)(he))return function We(he){return new ge.y(rt=>{for(const Xe of he)if(rt.next(Xe),rt.closed)return;rt.complete()})}(he);if((0,xe.L)(he))return function Tt(he){return Oe((0,xe.Q)(he))}(he)}throw(0,we.z)(he)}function Oe(he){return new ge.y(rt=>{(function _t(he,rt){var Xe,Ne,ot,ve;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,h.KL)(he);!(Ne=yield Xe.next()).done;)if(rt.next(Ne.value),rt.closed)return}catch(wt){ot={error:wt}}finally{try{Ne&&!Ne.done&&(ve=Xe.return)&&(yield ve.call(Xe))}finally{if(ot)throw ot.error}}rt.complete()})})(he,rt).catch(Xe=>rt.error(Xe))})}},6451:(Bt,ze,k)=>{k.d(ze,{T:()=>me});var h=k(8189),L=k(8421),j=k(515),ge=k(7669),de=k(8996);function me(...we){const se=(0,ge.yG)(we),xe=(0,ge._6)(we,1/0),ee=we;return ee.length?1===ee.length?(0,L.Xf)(ee[0]):(0,h.J)(xe)((0,de.D)(ee,se)):j.E}},9646:(Bt,ze,k)=>{k.d(ze,{of:()=>j});var h=k(7669),L=k(8996);function j(...ge){const de=(0,h.yG)(ge);return(0,L.D)(ge,de)}},5403:(Bt,ze,k)=>{k.d(ze,{x:()=>L});var h=k(2961);function L(ge,de,me,we,se){return new j(ge,de,me,we,se)}class j extends h.Lv{constructor(de,me,we,se,xe,ee){super(de),this.onFinalize=xe,this.shouldUnsubscribe=ee,this._next=me?function(ne){try{me(ne)}catch(Ee){de.error(Ee)}}:super._next,this._error=se?function(ne){try{se(ne)}catch(Ee){de.error(Ee)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(ne){de.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},6590:(Bt,ze,k)=>{k.d(ze,{d:()=>j});var h=k(4482),L=k(5403);function j(ge){return(0,h.e)((de,me)=>{let we=!1;de.subscribe((0,L.x)(me,se=>{we=!0,me.next(se)},()=>{we||me.next(ge),me.complete()}))})}},9300:(Bt,ze,k)=>{k.d(ze,{h:()=>j});var h=k(4482),L=k(5403);function j(ge,de){return(0,h.e)((me,we)=>{let se=0;me.subscribe((0,L.x)(we,xe=>ge.call(de,xe,se++)&&we.next(xe)))})}},590:(Bt,ze,k)=>{k.d(ze,{P:()=>we});var h=k(6805),L=k(9300),j=k(5698),ge=k(6590),de=k(8068),me=k(4671);function we(se,xe){const ee=arguments.length>=2;return ne=>ne.pipe(se?(0,L.h)((Ee,Ze)=>se(Ee,Ze,ne)):me.y,(0,j.q)(1),ee?(0,ge.d)(xe):(0,de.T)(()=>new h.K))}},4004:(Bt,ze,k)=>{k.d(ze,{U:()=>j});var h=k(4482),L=k(5403);function j(ge,de){return(0,h.e)((me,we)=>{let se=0;me.subscribe((0,L.x)(we,xe=>{we.next(ge.call(de,xe,se++))}))})}},8189:(Bt,ze,k)=>{k.d(ze,{J:()=>j});var h=k(5577),L=k(4671);function j(ge=1/0){return(0,h.z)(L.y,ge)}},5577:(Bt,ze,k)=>{k.d(ze,{z:()=>se});var h=k(4004),L=k(8421),j=k(4482),ge=k(9672),de=k(5403),we=k(576);function se(xe,ee,ne=1/0){return(0,we.m)(ee)?se((Ee,Ze)=>(0,h.U)((je,Le)=>ee(Ee,je,Ze,Le))((0,L.Xf)(xe(Ee,Ze))),ne):("number"==typeof ee&&(ne=ee),(0,j.e)((Ee,Ze)=>function me(xe,ee,ne,Ee,Ze,je,Le,Dt){const We=[];let Oe=0,Tt=0,_t=!1;const he=()=>{_t&&!We.length&&!Oe&&ee.complete()},rt=Ne=>Oe<Ee?Xe(Ne):We.push(Ne),Xe=Ne=>{je&&ee.next(Ne),Oe++;let ot=!1;(0,L.Xf)(ne(Ne,Tt++)).subscribe((0,de.x)(ee,ve=>{Ze?.(ve),je?rt(ve):ee.next(ve)},()=>{ot=!0},void 0,()=>{if(ot)try{for(Oe--;We.length&&Oe<Ee;){const ve=We.shift();Le?(0,ge.f)(ee,Le,()=>Xe(ve)):Xe(ve)}he()}catch(ve){ee.error(ve)}}))};return xe.subscribe((0,de.x)(ee,rt,()=>{_t=!0,he()})),()=>{Dt?.()}}(Ee,Ze,xe,ne)))}},5363:(Bt,ze,k)=>{k.d(ze,{Q:()=>ge});var h=k(9672),L=k(4482),j=k(5403);function ge(de,me=0){return(0,L.e)((we,se)=>{we.subscribe((0,j.x)(se,xe=>(0,h.f)(se,de,()=>se.next(xe),me),()=>(0,h.f)(se,de,()=>se.complete(),me),xe=>(0,h.f)(se,de,()=>se.error(xe),me)))})}},5026:(Bt,ze,k)=>{k.d(ze,{R:()=>ge});var h=k(4482),L=k(5403);function j(de,me,we,se,xe){return(ee,ne)=>{let Ee=we,Ze=me,je=0;ee.subscribe((0,L.x)(ne,Le=>{const Dt=je++;Ze=Ee?de(Ze,Le,Dt):(Ee=!0,Le),se&&ne.next(Ze)},xe&&(()=>{Ee&&ne.next(Ze),ne.complete()})))}}function ge(de,me){return(0,h.e)(j(de,me,arguments.length>=2,!0))}},3099:(Bt,ze,k)=>{k.d(ze,{B:()=>de});var h=k(8421),L=k(7579),j=k(2961),ge=k(4482);function de(we={}){const{connector:se=(()=>new L.x),resetOnError:xe=!0,resetOnComplete:ee=!0,resetOnRefCountZero:ne=!0}=we;return Ee=>{let Ze,je,Le,Dt=0,We=!1,Oe=!1;const Tt=()=>{je?.unsubscribe(),je=void 0},_t=()=>{Tt(),Ze=Le=void 0,We=Oe=!1},he=()=>{const rt=Ze;_t(),rt?.unsubscribe()};return(0,ge.e)((rt,Xe)=>{Dt++,!Oe&&!We&&Tt();const Ne=Le=Le??se();Xe.add(()=>{Dt--,0===Dt&&!Oe&&!We&&(je=me(he,ne))}),Ne.subscribe(Xe),!Ze&&Dt>0&&(Ze=new j.Hp({next:ot=>Ne.next(ot),error:ot=>{Oe=!0,Tt(),je=me(_t,xe,ot),Ne.error(ot)},complete:()=>{We=!0,Tt(),je=me(_t,ee),Ne.complete()}}),(0,h.Xf)(rt).subscribe(Ze))})(Ee)}}function me(we,se,...xe){if(!0===se)return void we();if(!1===se)return;const ee=new j.Hp({next:()=>{ee.unsubscribe(),we()}});return se(...xe).subscribe(ee)}},8675:(Bt,ze,k)=>{k.d(ze,{O:()=>ge});var h=k(7272),L=k(7669),j=k(4482);function ge(...de){const me=(0,L.yG)(de);return(0,j.e)((we,se)=>{(me?(0,h.z)(de,we,me):(0,h.z)(de,we)).subscribe(se)})}},9468:(Bt,ze,k)=>{k.d(ze,{R:()=>L});var h=k(4482);function L(j,ge=0){return(0,h.e)((de,me)=>{me.add(j.schedule(()=>de.subscribe(me),ge))})}},3900:(Bt,ze,k)=>{k.d(ze,{w:()=>ge});var h=k(8421),L=k(4482),j=k(5403);function ge(de,me){return(0,L.e)((we,se)=>{let xe=null,ee=0,ne=!1;const Ee=()=>ne&&!xe&&se.complete();we.subscribe((0,j.x)(se,Ze=>{xe?.unsubscribe();let je=0;const Le=ee++;(0,h.Xf)(de(Ze,Le)).subscribe(xe=(0,j.x)(se,Dt=>se.next(me?me(Ze,Dt,Le,je++):Dt),()=>{xe=null,Ee()}))},()=>{ne=!0,Ee()}))})}},5698:(Bt,ze,k)=>{k.d(ze,{q:()=>ge});var h=k(515),L=k(4482),j=k(5403);function ge(de){return de<=0?()=>h.E:(0,L.e)((me,we)=>{let se=0;me.subscribe((0,j.x)(we,xe=>{++se<=de&&(we.next(xe),de<=se&&we.complete())}))})}},8505:(Bt,ze,k)=>{k.d(ze,{b:()=>de});var h=k(576),L=k(4482),j=k(5403),ge=k(4671);function de(me,we,se){const xe=(0,h.m)(me)||we||se?{next:me,error:we,complete:se}:me;return xe?(0,L.e)((ee,ne)=>{var Ee;null===(Ee=xe.subscribe)||void 0===Ee||Ee.call(xe);let Ze=!0;ee.subscribe((0,j.x)(ne,je=>{var Le;null===(Le=xe.next)||void 0===Le||Le.call(xe,je),ne.next(je)},()=>{var je;Ze=!1,null===(je=xe.complete)||void 0===je||je.call(xe),ne.complete()},je=>{var Le;Ze=!1,null===(Le=xe.error)||void 0===Le||Le.call(xe,je),ne.error(je)},()=>{var je,Le;Ze&&(null===(je=xe.unsubscribe)||void 0===je||je.call(xe)),null===(Le=xe.finalize)||void 0===Le||Le.call(xe)}))}):ge.y}},8068:(Bt,ze,k)=>{k.d(ze,{T:()=>ge});var h=k(6805),L=k(4482),j=k(5403);function ge(me=de){return(0,L.e)((we,se)=>{let xe=!1;we.subscribe((0,j.x)(se,ee=>{xe=!0,se.next(ee)},()=>xe?se.complete():se.error(me())))})}function de(){return new h.K}},4408:(Bt,ze,k)=>{k.d(ze,{o:()=>de});var h=k(727);class L extends h.w0{constructor(we,se){super()}schedule(we,se=0){return this}}const j={setInterval(me,we,...se){const{delegate:xe}=j;return xe?.setInterval?xe.setInterval(me,we,...se):setInterval(me,we,...se)},clearInterval(me){const{delegate:we}=j;return(we?.clearInterval||clearInterval)(me)},delegate:void 0};var ge=k(8737);class de extends L{constructor(we,se){super(we,se),this.scheduler=we,this.work=se,this.pending=!1}schedule(we,se=0){var xe;if(this.closed)return this;this.state=we;const ee=this.id,ne=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(ne,ee,se)),this.pending=!0,this.delay=se,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(ne,this.id,se),this}requestAsyncId(we,se,xe=0){return j.setInterval(we.flush.bind(we,this),xe)}recycleAsyncId(we,se,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return se;null!=se&&j.clearInterval(se)}execute(we,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(we,se);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,se){let ee,xe=!1;try{this.work(we)}catch(ne){xe=!0,ee=ne||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),ee}unsubscribe(){if(!this.closed){const{id:we,scheduler:se}=this,{actions:xe}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(xe,this),null!=we&&(this.id=this.recycleAsyncId(se,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(Bt,ze,k)=>{k.d(ze,{v:()=>j});var h=k(6063);class L{constructor(de,me=L.now){this.schedulerActionCtor=de,this.now=me}schedule(de,me=0,we){return new this.schedulerActionCtor(this,de).schedule(we,me)}}L.now=h.l.now;class j extends L{constructor(de,me=L.now){super(de,me),this.actions=[],this._active=!1}flush(de){const{actions:me}=this;if(this._active)return void me.push(de);let we;this._active=!0;do{if(we=de.execute(de.state,de.delay))break}while(de=me.shift());if(this._active=!1,we){for(;de=me.shift();)de.unsubscribe();throw we}}}},4986:(Bt,ze,k)=>{k.d(ze,{z:()=>j});var h=k(4408);const j=new(k(7565).v)(h.o)},6063:(Bt,ze,k)=>{k.d(ze,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Bt,ze,k)=>{k.d(ze,{z:()=>h});const h={setTimeout(L,j,...ge){const{delegate:de}=h;return de?.setTimeout?de.setTimeout(L,j,...ge):setTimeout(L,j,...ge)},clearTimeout(L){const{delegate:j}=h;return(j?.clearTimeout||clearTimeout)(L)},delegate:void 0}},2202:(Bt,ze,k)=>{k.d(ze,{h:()=>L});const L=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Bt,ze,k)=>{k.d(ze,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Bt,ze,k)=>{k.d(ze,{K:()=>L});const L=(0,k(3888).d)(j=>function(){j(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Bt,ze,k)=>{k.d(ze,{_6:()=>me,jO:()=>ge,yG:()=>de});var h=k(576);function j(we){return we[we.length-1]}function ge(we){return(0,h.m)(j(we))?we.pop():void 0}function de(we){return function L(we){return we&&(0,h.m)(we.schedule)}(j(we))?we.pop():void 0}function me(we,se){return"number"==typeof j(we)?we.pop():se}},4742:(Bt,ze,k)=>{k.d(ze,{D:()=>de});const{isArray:h}=Array,{getPrototypeOf:L,prototype:j,keys:ge}=Object;function de(we){if(1===we.length){const se=we[0];if(h(se))return{args:se,keys:null};if(function me(we){return we&&"object"==typeof we&&L(we)===j}(se)){const xe=ge(se);return{args:xe.map(ee=>se[ee]),keys:xe}}}return{args:we,keys:null}}},8737:(Bt,ze,k)=>{function h(L,j){if(L){const ge=L.indexOf(j);0<=ge&&L.splice(ge,1)}}k.d(ze,{P:()=>h})},3888:(Bt,ze,k)=>{function h(L){const ge=L(de=>{Error.call(de),de.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}k.d(ze,{d:()=>h})},1810:(Bt,ze,k)=>{function h(L,j){return L.reduce((ge,de,me)=>(ge[de]=j[me],ge),{})}k.d(ze,{n:()=>h})},2806:(Bt,ze,k)=>{k.d(ze,{O:()=>ge,x:()=>j});var h=k(2416);let L=null;function j(de){if(h.v.useDeprecatedSynchronousErrorHandling){const me=!L;if(me&&(L={errorThrown:!1,error:null}),de(),me){const{errorThrown:we,error:se}=L;if(L=null,we)throw se}}else de()}function ge(de){h.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=de)}},9672:(Bt,ze,k)=>{function h(L,j,ge,de=0,me=!1){const we=j.schedule(function(){ge(),me?L.add(this.schedule(null,de)):this.unsubscribe()},de);if(L.add(we),!me)return we}k.d(ze,{f:()=>h})},4671:(Bt,ze,k)=>{function h(L){return L}k.d(ze,{y:()=>h})},1144:(Bt,ze,k)=>{k.d(ze,{z:()=>h});const h=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(Bt,ze,k)=>{k.d(ze,{D:()=>L});var h=k(576);function L(j){return Symbol.asyncIterator&&(0,h.m)(j?.[Symbol.asyncIterator])}},576:(Bt,ze,k)=>{function h(L){return"function"==typeof L}k.d(ze,{m:()=>h})},3670:(Bt,ze,k)=>{k.d(ze,{c:()=>j});var h=k(8822),L=k(576);function j(ge){return(0,L.m)(ge[h.L])}},6495:(Bt,ze,k)=>{k.d(ze,{T:()=>j});var h=k(2202),L=k(576);function j(ge){return(0,L.m)(ge?.[h.h])}},8239:(Bt,ze,k)=>{k.d(ze,{t:()=>L});var h=k(576);function L(j){return(0,h.m)(j?.then)}},3260:(Bt,ze,k)=>{k.d(ze,{L:()=>ge,Q:()=>j});var h=k(7582),L=k(576);function j(de){return(0,h.FC)(this,arguments,function*(){const we=de.getReader();try{for(;;){const{value:se,done:xe}=yield(0,h.qq)(we.read());if(xe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(se)}}finally{we.releaseLock()}})}function ge(de){return(0,L.m)(de?.getReader)}},4482:(Bt,ze,k)=>{k.d(ze,{A:()=>L,e:()=>j});var h=k(576);function L(ge){return(0,h.m)(ge?.lift)}function j(ge){return de=>{if(L(de))return de.lift(function(me){try{return ge(me,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Bt,ze,k)=>{k.d(ze,{Z:()=>ge});var h=k(4004);const{isArray:L}=Array;function ge(de){return(0,h.U)(me=>function j(de,me){return L(me)?de(...me):de(me)}(de,me))}},9635:(Bt,ze,k)=>{k.d(ze,{U:()=>j,z:()=>L});var h=k(4671);function L(...ge){return j(ge)}function j(ge){return 0===ge.length?h.y:1===ge.length?ge[0]:function(me){return ge.reduce((we,se)=>se(we),me)}}},7849:(Bt,ze,k)=>{k.d(ze,{h:()=>j});var h=k(2416),L=k(3410);function j(ge){L.z.setTimeout(()=>{const{onUnhandledError:de}=h.v;if(!de)throw ge;de(ge)})}},4532:(Bt,ze,k)=>{function h(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(ze,{z:()=>h})},6895:(Bt,ze,k)=>{k.d(ze,{Do:()=>_t,EM:()=>hs,HT:()=>de,JF:()=>yo,K0:()=>we,Mx:()=>Vi,O5:()=>Nr,Ov:()=>Ie,PM:()=>Xs,S$:()=>We,V_:()=>ee,Ye:()=>he,b0:()=>Tt,bD:()=>Ni,ez:()=>Qs,mk:()=>Vn,q:()=>j,sg:()=>Bi,w_:()=>me});var h=k(4650);let L=null;function j(){return L}function de(b){L||(L=b)}class me{}const we=new h.OlP("DocumentToken");let se=(()=>{class b{historyGo(M){throw new Error("Not implemented")}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275prov=h.Yz7({token:b,factory:function(){return function xe(){return(0,h.LFG)(ne)}()},providedIn:"platform"}),b})();const ee=new h.OlP("Location Initialized");let ne=(()=>{class b extends se{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(M){const z=j().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",M,!1),()=>z.removeEventListener("popstate",M)}onHashChange(M){const z=j().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",M,!1),()=>z.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,z,_e){Ee()?this._history.pushState(M,z,_e):this.location.hash=_e}replaceState(M,z,_e){Ee()?this._history.replaceState(M,z,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return b.\u0275fac=function(M){return new(M||b)(h.LFG(we))},b.\u0275prov=h.Yz7({token:b,factory:function(){return function Ze(){return new ne((0,h.LFG)(we))}()},providedIn:"platform"}),b})();function Ee(){return!!window.history.pushState}function je(b,V){if(0==b.length)return V;if(0==V.length)return b;let M=0;return b.endsWith("/")&&M++,V.startsWith("/")&&M++,2==M?b+V.substring(1):1==M?b+V:b+"/"+V}function Le(b){const V=b.match(/#|\?|$/),M=V&&V.index||b.length;return b.slice(0,M-("/"===b[M-1]?1:0))+b.slice(M)}function Dt(b){return b&&"?"!==b[0]?"?"+b:b}let We=(()=>{class b{historyGo(M){throw new Error("Not implemented")}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275prov=h.Yz7({token:b,factory:function(){return(0,h.f3M)(Tt)},providedIn:"root"}),b})();const Oe=new h.OlP("appBaseHref");let Tt=(()=>{class b extends We{constructor(M,z){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=z??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return je(this._baseHref,M)}path(M=!1){const z=this._platformLocation.pathname+Dt(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&M?`${z}${_e}`:z}pushState(M,z,_e,Je){const ct=this.prepareExternalUrl(_e+Dt(Je));this._platformLocation.pushState(M,z,ct)}replaceState(M,z,_e,Je){const ct=this.prepareExternalUrl(_e+Dt(Je));this._platformLocation.replaceState(M,z,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return b.\u0275fac=function(M){return new(M||b)(h.LFG(se),h.LFG(Oe,8))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),_t=(()=>{class b extends We{constructor(M,z){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(M){const z=je(this._baseHref,M);return z.length>0?"#"+z:z}pushState(M,z,_e,Je){let ct=this.prepareExternalUrl(_e+Dt(Je));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(M,z,ct)}replaceState(M,z,_e,Je){let ct=this.prepareExternalUrl(_e+Dt(Je));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(M,z,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return b.\u0275fac=function(M){return new(M||b)(h.LFG(se),h.LFG(Oe,8))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac}),b})(),he=(()=>{class b{constructor(M){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const z=this._locationStrategy.getBaseHref();this._baseHref=Le(Ne(z)),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,z=""){return this.path()==this.normalize(M+Dt(z))}normalize(M){return b.stripTrailingSlash(function Xe(b,V){return b&&V.startsWith(b)?V.substring(b.length):V}(this._baseHref,Ne(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,z="",_e=null){this._locationStrategy.pushState(_e,"",M,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+Dt(z)),_e)}replaceState(M,z="",_e=null){this._locationStrategy.replaceState(_e,"",M,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+Dt(z)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)})),()=>{const z=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",z){this._urlChangeListeners.forEach(_e=>_e(M,z))}subscribe(M,z,_e){return this._subject.subscribe({next:M,error:z,complete:_e})}}return b.normalizeQueryParams=Dt,b.joinWithSlash=je,b.stripTrailingSlash=Le,b.\u0275fac=function(M){return new(M||b)(h.LFG(We))},b.\u0275prov=h.Yz7({token:b,factory:function(){return function rt(){return new he((0,h.LFG)(We))}()},providedIn:"root"}),b})();function Ne(b){return b.replace(/\/index.html$/,"")}function Vi(b,V){V=encodeURIComponent(V);for(const M of b.split(";")){const z=M.indexOf("="),[_e,Je]=-1==z?[M,""]:[M.slice(0,z),M.slice(z+1)];if(_e.trim()===V)return decodeURIComponent(Je)}return null}let Vn=(()=>{class b{constructor(M,z,_e,Je){this._iterableDiffers=M,this._keyValueDiffers=z,this._ngEl=_e,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(z=>this._toggleClass(z.key,z.currentValue)),M.forEachChangedItem(z=>this._toggleClass(z.key,z.currentValue)),M.forEachRemovedItem(z=>{z.previousValue&&this._toggleClass(z.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(z=>{if("string"!=typeof z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(z.item)}`);this._toggleClass(z.item,!0)}),M.forEachRemovedItem(z=>this._toggleClass(z.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(z=>this._toggleClass(z,!0)):Object.keys(M).forEach(z=>this._toggleClass(z,!!M[z])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(z=>this._toggleClass(z,!1)):Object.keys(M).forEach(z=>this._toggleClass(z,!1)))}_toggleClass(M,z){(M=M.trim())&&M.split(/\s+/g).forEach(_e=>{z?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}}return b.\u0275fac=function(M){return new(M||b)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),b})();class br{constructor(V,M,z,_e){this.$implicit=V,this.ngForOf=M,this.index=z,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bi=(()=>{class b{constructor(M,z,_e){this._viewContainer=M,this._template=z,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const z=this._viewContainer;M.forEachOperation((_e,Je,ct)=>{if(null==_e.previousIndex)z.createEmbeddedView(this._template,new br(_e.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)z.remove(null===Je?void 0:Je);else if(null!==Je){const cn=z.get(Je);z.move(cn,ct),Di(cn,_e)}});for(let _e=0,Je=z.length;_e<Je;_e++){const cn=z.get(_e).context;cn.index=_e,cn.count=Je,cn.ngForOf=this._ngForOf}M.forEachIdentityChange(_e=>{Di(z.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(M,z){return!0}}return b.\u0275fac=function(M){return new(M||b)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),b})();function Di(b,V){b.context.$implicit=V.item}let Nr=(()=>{class b{constructor(M,z){this._viewContainer=M,this._context=new gi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Lr("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Lr("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,z){return!0}}return b.\u0275fac=function(M){return new(M||b)(h.Y36(h.s_b),h.Y36(h.Rgc))},b.\u0275dir=h.lG2({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),b})();class gi{constructor(){this.$implicit=null,this.ngIf=null}}function Lr(b,V){if(V&&!V.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,h.AaK)(V)}'.`)}class ho{createSubscription(V,M){return V.subscribe({next:M,error:z=>{throw z}})}dispose(V){V.unsubscribe()}}class fo{createSubscription(V,M){return V.then(M,z=>{throw z})}dispose(V){}}const po=new fo,Te=new ho;let Ie=(()=>{class b{constructor(M){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=M}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(M){return this._obj?M!==this._obj?(this._dispose(),this.transform(M)):this._latestValue:(M&&this._subscribe(M),this._latestValue)}_subscribe(M){this._obj=M,this._strategy=this._selectStrategy(M),this._subscription=this._strategy.createSubscription(M,z=>this._updateLatestValue(M,z))}_selectStrategy(M){if((0,h.QGY)(M))return po;if((0,h.F4k)(M))return Te;throw function ar(b,V){return new h.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(M,z){M===this._obj&&(this._latestValue=z,this._ref.markForCheck())}}return b.\u0275fac=function(M){return new(M||b)(h.Y36(h.sBO,16))},b.\u0275pipe=h.Yjl({name:"async",type:b,pure:!1,standalone:!0}),b})(),Qs=(()=>{class b{}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=h.oAB({type:b}),b.\u0275inj=h.cJS({}),b})();const Ni="browser";function Xs(b){return"server"===b}let hs=(()=>{class b{}return b.\u0275prov=(0,h.Yz7)({token:b,providedIn:"root",factory:()=>new mo((0,h.LFG)(we),window)}),b})();class mo{constructor(V,M){this.document=V,this.window=M,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const M=function Wr(b,V){const M=b.getElementById(V)||b.getElementsByName(V)[0];if(M)return M;if("function"==typeof b.createTreeWalker&&b.body&&(b.body.createShadowRoot||b.body.attachShadow)){const z=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let _e=z.currentNode;for(;_e;){const Je=_e.shadowRoot;if(Je){const ct=Je.getElementById(V)||Je.querySelector(`[name="${V}"]`);if(ct)return ct}_e=z.nextNode()}}return null}(this.document,V);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=V)}}scrollToElement(V){const M=V.getBoundingClientRect(),z=M.left+this.window.pageXOffset,_e=M.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(z-Je[0],_e-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fs(b){return Object.getOwnPropertyDescriptor(b,"scrollRestoration")}class yo{}},4650:(Bt,ze,k)=>{k.d(ze,{$8M:()=>dn,$Z:()=>Uh,AFp:()=>ME,ALo:()=>Y0,AaK:()=>se,AsE:()=>rg,CHM:()=>no,CRH:()=>oE,CZH:()=>Dy,CqO:()=>mf,D6c:()=>ND,DdM:()=>H0,EJc:()=>qI,EpF:()=>Im,F4k:()=>Dm,FYo:()=>Cd,FiY:()=>vr,G48:()=>gD,Gf:()=>iE,GfV:()=>Mg,Gpc:()=>ne,JOm:()=>ss,KtG:()=>ro,LFG:()=>Fi,LSH:()=>Kl,Lbi:()=>zI,Lck:()=>Bw,MAs:()=>Ir,MMx:()=>a_,NdJ:()=>Yp,O4$:()=>wr,OlP:()=>yr,Oqu:()=>Jc,PXZ:()=>lD,Q6J:()=>pf,QGY:()=>Zd,QP$:()=>st,Qsj:()=>Qy,R0b:()=>Mu,RDi:()=>mg,Rgc:()=>dg,SBq:()=>ec,Sil:()=>YI,Suo:()=>sE,TTD:()=>Es,TgZ:()=>qd,Tol:()=>tg,VKq:()=>G0,X6Q:()=>pD,XFs:()=>bt,Xpm:()=>sr,Xts:()=>$f,Y36:()=>El,YKP:()=>O0,YNc:()=>Wp,Yjl:()=>Y,Yz7:()=>Vt,Z0I:()=>yn,ZZ4:()=>P_,_Bn:()=>N0,_UZ:()=>Ms,_Vd:()=>Jl,_c5:()=>RD,_uU:()=>Hm,aQg:()=>N_,c2e:()=>WI,cJS:()=>Zt,cg1:()=>cy,dDg:()=>sD,dqk:()=>Rn,eFA:()=>$E,ekj:()=>_f,eoX:()=>UE,f3M:()=>Fl,g9A:()=>RE,h0i:()=>Sf,hGG:()=>PD,hij:()=>Df,iGM:()=>rE,ifc:()=>Jt,ip1:()=>SE,jDz:()=>F0,kL8:()=>dy,kcU:()=>ca,lG2:()=>ue,lcZ:()=>Q0,lqb:()=>Zl,lri:()=>LE,n5z:()=>rn,oAB:()=>Ve,oxw:()=>Qp,q4F:()=>Yf,qLn:()=>Vc,qOj:()=>Gd,qZA:()=>wi,rWj:()=>VE,sBO:()=>mD,sIi:()=>zd,s_b:()=>Ey,soG:()=>Cy,tb:()=>PE,tp0:()=>hi,uIk:()=>Kc,vHH:()=>Le,vpe:()=>Rl,wAp:()=>Fn,xp6:()=>Ss,z2F:()=>by,zSh:()=>bh,zs3:()=>eu});var h=k(7579),L=k(727),j=k(9751),ge=k(6451),de=k(3099);function me(n){for(let r in n)if(n[r]===me)return r;throw Error("Could not find renamed property on target object.")}function we(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function se(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(se).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function xe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ee=me({__forward_ref__:me});function ne(n){return n.__forward_ref__=ne,n.toString=function(){return se(this())},n}function Ee(n){return Ze(n)?n():n}function Ze(n){return"function"==typeof n&&n.hasOwnProperty(ee)&&n.__forward_ref__===ne}class Le extends Error{constructor(r,o){super(function Dt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function We(n){return"string"==typeof n?n:null==n?"":String(n)}function rt(n,r){throw new Le(-201,!1)}function $e(n,r){null==n&&function Ke(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function Vt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ln(n){return zn(n,Gt)||zn(n,Cr)}function yn(n){return null!==ln(n)}function zn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Bn(n){return n&&(n.hasOwnProperty(Wn)||n.hasOwnProperty(cr))?n[Wn]:null}const Gt=me({\u0275prov:me}),Wn=me({\u0275inj:me}),Cr=me({ngInjectableDef:me}),cr=me({ngInjectorDef:me});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let An;function Jn(n){const r=An;return An=n,r}function jr(n,r,o){const u=ln(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&bt.Optional?null:void 0!==r?r:void rt(se(n))}function dr(n){return{toString:n}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),Jt=(()=>{return(n=Jt||(Jt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Jt;var n})();const Rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fr={},un=[],gr=me({\u0275cmp:me}),wn=me({\u0275dir:me}),zr=me({\u0275pipe:me}),Sn=me({\u0275mod:me}),bn=me({\u0275fac:me}),Nt=me({__NG_ELEMENT_ID__:me});let rr=0;function sr(n){return dr(()=>{const o=!0===n.standalone,u={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Jt.Emulated,id:"c"+rr++,styles:n.styles||un,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,m=n.features;return l.inputs=oe(n.inputs,u),l.outputs=oe(n.outputs),m&&m.forEach(C=>C(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(K).filter(ce):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(De).filter(ce):null,l})}function K(n){return q(n)||H(n)}function ce(n){return null!==n}function Ve(n){return dr(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function oe(n,r){if(null==n)return fr;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,r&&(r[l]=f)}return o}const ue=sr;function Y(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function q(n){return n[gr]||null}function H(n){return n[wn]||null}function De(n){return n[zr]||null}function st(n){const r=q(n)||H(n)||De(n);return null!==r&&r.standalone}function Mt(n,r){const o=n[Sn]||null;if(!o&&!0===r)throw new Error(`Type ${se(n)} does not have '\u0275mod' property.`);return o}function Lr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Tr(n){return Array.isArray(n)&&!0===n[1]}function Ps(n){return 0!=(8&n.flags)}function Ri(n){return 2==(2&n.flags)}function Ns(n){return 1==(1&n.flags)}function Or(n){return null!==n.template}function ji(n){return 0!=(256&n[2])}function Hi(n,r){return n.hasOwnProperty(bn)?n[bn]:null}class ci{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Es(){return Os}function Os(n){return n.type.prototype.ngOnChanges&&(n.setInput=ds),sa}function sa(){const n=Ro(this),r=n?.current;if(r){const o=n.previous;if(o===fr)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function ds(n,r,o,u){const l=Ro(n)||function Qs(n,r){return n[zo]=r}(n,{previous:fr,current:null}),f=l.current||(l.current={}),m=l.previous,C=this.declaredInputs[o],S=m[C];f[C]=new ci(S&&S.currentValue,r,m===fr),n[u]=r}Es.ngInherit=!0;const zo="__ngSimpleChanges__";function Ro(n){return n[zo]||null}function Er(n){for(;Array.isArray(n);)n=n[0];return n}function fs(n,r){return Er(r[n])}function Wr(n,r){return Er(r[n.index])}function yo(n,r){return n.data[r]}function zi(n,r){return n[r]}function di(n,r){const o=r[n];return Lr(o)?o:o[0]}function Po(n){return 64==(64&n[2])}function Xr(n,r){return null==r?null:n[r]}function Kr(n){n[18]=0}function to(n,r){n[5]+=r;let o=n,u=n[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const En={lFrame:ko(null),bindingsEnabled:!0};function _o(){return En.bindingsEnabled}function gt(){return En.lFrame.lView}function Un(){return En.lFrame.tView}function no(n){return En.lFrame.contextLView=n,n[8]}function ro(n){return En.lFrame.contextLView=null,n}function Gr(){let n=ei();for(;null!==n&&64===n.type;)n=n.parent;return n}function ei(){return En.lFrame.currentTNode}function es(n,r){const o=En.lFrame;o.currentTNode=n,o.isParent=r}function No(){return En.lFrame.isParent}function x(){const n=En.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function en(){return En.lFrame.bindingIndex++}function $n(n){const r=En.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function bi(n,r){const o=En.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ls(r)}function Ls(n){En.lFrame.currentDirectiveIndex=n}function Oo(){return En.lFrame.currentQueryIndex}function ki(n){En.lFrame.currentQueryIndex=n}function Vs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function xa(n,r,o){if(o&bt.SkipSelf){let l=r,f=n;for(;!(l=l.parent,null!==l||o&bt.Host||(l=Vs(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;r=l,n=f}const u=En.lFrame=Wo();return u.currentTNode=r,u.lView=n,!0}function wo(n){const r=Wo(),o=n[1];En.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Wo(){const n=En.lFrame,r=null===n?null:n.child;return null===r?ko(n):r}function ko(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ko(){const n=En.lFrame;return En.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ti=Ko;function Us(){const n=Ko();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ur(){return En.lFrame.selectedIndex}function mi(n){En.lFrame.selectedIndex=n}function Sr(){const n=En.lFrame;return yo(n.tView,n.selectedIndex)}function wr(){En.lFrame.currentNamespace="svg"}function ca(){!function qi(){En.lFrame.currentNamespace=null}()}function Cs(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:F,ngOnDestroy:W}=f;m&&(n.contentHooks||(n.contentHooks=[])).push(-o,m),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),S&&(n.viewHooks||(n.viewHooks=[])).push(-o,S),F&&((n.viewHooks||(n.viewHooks=[])).push(o,F),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,F)),null!=W&&(n.destroyHooks||(n.destroyHooks=[])).push(o,W)}}function ts(n,r,o){Zi(n,r,3,o)}function Zo(n,r,o,u){(3&n[2])===o&&Zi(n,r,o,u)}function ps(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function Zi(n,r,o,u){const f=u??-1,m=r.length-1;let C=0;for(let S=void 0!==u?65535&n[18]:0;S<m;S++)if("number"==typeof r[S+1]){if(C=r[S],null!=u&&C>=u)break}else r[S]<0&&(n[18]+=65536),(C<f||-1==f)&&(yi(n,o,r,S),n[18]=(4294901760&n[18])+S+2),S++}function yi(n,r,o,u){const l=o[u]<0,f=o[u+1],C=n[l?-o[u]:o[u]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class io{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function z(n,r,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],m=o[u++],C=o[u++];n.setAttribute(r,m,C,f)}else{const f=l,m=o[++u];Je(f)?n.setProperty(r,f,m):n.setAttribute(r,f,m),u++}}return u}function _e(n){return 3===n||4===n||6===n}function Je(n){return 64===n.charCodeAt(0)}function ct(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const l=r[u];"number"==typeof l?o=l:0===o||cn(n,o,l,null,-1===o||2===o?r[++u]:null)}}return n}function cn(n,r,o,u,l){let f=0,m=n.length;if(-1===r)m=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===r){m=-1;break}if(C>r){m=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==l&&(n[f+1]=l));if(u===n[f+1])return void(n[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==m&&(n.splice(m,0,r),f=m+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==l&&n.splice(f++,0,l)}function or(n){return-1!==n}function Hn(n){return 32767&n}function gn(n,r){let o=function mr(n){return n>>16}(n),u=r;for(;o>0;)u=u[15],o--;return u}let Mr=!0;function On(n){const r=Mr;return Mr=n,r}let pr=0;const xr={};function Kt(n,r){const o=da(n,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,nn(u.data,n),nn(r,null),nn(u.blueprint,null));const l=$t(n,r),f=n.injectorIndex;if(or(l)){const m=Hn(l),C=gn(l,r),S=C[1].data;for(let F=0;F<8;F++)r[f+F]=C[m+F]|S[m+F]}return r[f+8]=l,f}function nn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function da(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function $t(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=r;for(;null!==l;){if(u=Rr(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function qe(n,r,o){!function ao(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Nt)&&(u=o[Nt]),null==u&&(u=o[Nt]=pr++);const l=255&u;r.data[n+(l>>5)]|=1<<l}(n,r,o)}function ai(n,r,o){if(o&bt.Optional||void 0!==n)return n;rt()}function Ga(n,r,o,u){if(o&bt.Optional&&void 0===u&&(u=null),0==(o&(bt.Self|bt.Host))){const l=n[9],f=Jn(void 0);try{return l?l.get(r,u,o&bt.Optional):jr(r,u,o&bt.Optional)}finally{Jn(f)}}return ai(u,0,o)}function za(n,r,o,u=bt.Default,l){if(null!==n){if(1024&r[2]){const m=function Ru(n,r,o,u,l){let f=n,m=r;for(;null!==f&&null!==m&&1024&m[2]&&!(256&m[2]);){const C=xu(f,m,o,u|bt.Self,xr);if(C!==xr)return C;let S=f.parent;if(!S){const F=m[21];if(F){const W=F.get(o,xr,u);if(W!==xr)return W}S=Rr(m),m=m[15]}f=S}return l}(n,r,o,u,xr);if(m!==xr)return m}const f=xu(n,r,o,u,xr);if(f!==xr)return f}return Ga(r,o,u,l)}function xu(n,r,o,u,l){const f=function Pl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Nt)?n[Nt]:void 0;return"number"==typeof r?r>=0?255&r:ui:r}(o);if("function"==typeof f){if(!xa(r,n,u))return u&bt.Host?ai(l,0,u):Ga(r,o,u,l);try{const m=f(u);if(null!=m||u&bt.Optional)return m;rt()}finally{Ti()}}else if("number"==typeof f){let m=null,C=da(n,r),S=-1,F=u&bt.Host?r[16][6]:null;for((-1===C||u&bt.SkipSelf)&&(S=-1===C?$t(n,r):r[C+8],-1!==S&&fa(u,!1)?(m=r[1],C=Hn(S),r=gn(S,r)):C=-1);-1!==C;){const W=r[1];if(Nl(f,C,W.data)){const ie=nl(C,r,o,m,u,F);if(ie!==xr)return ie}S=r[C+8],-1!==S&&fa(u,r[1].data[C+8]===F)&&Nl(f,C,r)?(m=W,C=Hn(S),r=gn(S,r)):C=-1}}return l}function nl(n,r,o,u,l,f){const m=r[1],C=m.data[n+8],W=Yo(C,m,o,null==u?Ri(C)&&Mr:u!=m&&0!=(3&C.type),l&bt.Host&&f===C);return null!==W?ha(r,m,W,C):xr}function Yo(n,r,o,u,l){const f=n.providerIndexes,m=r.data,C=1048575&f,S=n.directiveStart,W=f>>20,Ce=l?C+W:n.directiveEnd;for(let Ge=u?C:C+W;Ge<Ce;Ge++){const pt=m[Ge];if(Ge<S&&o===pt||Ge>=S&&pt.type===o)return Ge}if(l){const Ge=m[S];if(Ge&&Or(Ge)&&Ge.type===o)return S}return null}function ha(n,r,o,u){let l=n[o];const f=r.data;if(function so(n){return n instanceof io}(l)){const m=l;m.resolving&&function Tt(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Le(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Oe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():We(n)}(f[o]));const C=On(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?Jn(m.injectImpl):null;xa(n,u,bt.Default);try{l=n[o]=m.factory(void 0,f,n,u),r.firstCreatePass&&o>=u.directiveStart&&function Bs(n,r,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=r.type.prototype;if(u){const m=Os(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,l),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],r)}finally{null!==S&&Jn(S),On(C),m.resolving=!1,Ti()}}return l}function Nl(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function fa(n,r){return!(n&bt.Self||n&bt.Host&&r)}class Wa{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return za(this._tNode,this._lView,r,u,o)}}function ui(){return new Wa(Gr(),gt())}function rn(n){return dr(()=>{const r=n.prototype.constructor,o=r[bn]||Co(r),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const f=l[bn]||Co(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Co(n){return Ze(n)?()=>{const r=Co(Ee(n));return r&&r()}:Hi(n)}function Rr(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function dn(n){return function vt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(_e(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===r)return o[l+1];l+=2}}}return null}(Gr(),n)}const In="__parameters__";function gs(n,r,o){return dr(()=>{const u=function Ht(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(r);function l(...f){if(this instanceof l)return u.apply(this,f),this;const m=new l(...f);return C.annotation=m,C;function C(S,F,W){const ie=S.hasOwnProperty(In)?S[In]:Object.defineProperty(S,In,{value:[]})[In];for(;ie.length<=W;)ie.push(null);return(ie[W]=ie[W]||[]).push(m),S}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class yr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Vt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ai(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(r===n&&(r=n.slice(0,o)),Ai(u,r)):r!==n&&r.push(u)}return r}function Si(n,r){n.forEach(o=>Array.isArray(o)?Si(o,r):r(o))}function au(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Hs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ys(n,r,o){let u=v(n,r);return u>=0?n[1|u]=o:(u=~u,function kl(n,r,o,u){let l=n.length;if(l==r)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function vi(n,r){const o=v(n,r);if(o>=0)return n[1|o]}function v(n,r){return function y(n,r,o){let u=0,l=n.length>>o;for(;l!==u;){const f=u+(l-u>>1),m=n[f<<o];if(r===m)return f<<o;m>r?l=f:u=f+1}return~(l<<o)}(n,r,1)}const Kn={},Mi="__NG_DI_FLAG__",li="ngTempTokenPath",Gs=/\n/gm,ea="__source";let Pa;function Ts(n){const r=Pa;return Pa=n,r}function lu(n,r=bt.Default){if(void 0===Pa)throw new Le(-203,!1);return null===Pa?jr(n,void 0,r):Pa.get(n,r&bt.Optional?null:void 0,r)}function Fi(n,r=bt.Default){return(function hn(){return An}()||lu)(Ee(n),r)}function Fl(n,r=bt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Fi(n,r)}function il(n){const r=[];for(let o=0;o<n.length;o++){const u=Ee(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Le(900,!1);let l,f=bt.Default;for(let m=0;m<u.length;m++){const C=u[m],S=Yi(C);"number"==typeof S?-1===S?l=C.token:f|=S:l=C}r.push(Fi(l,f))}else r.push(Fi(u))}return r}function wa(n,r){return n[Mi]=r,n.prototype[Mi]=r,n}function Yi(n){return n[Mi]}const vr=wa(gs("Optional"),8),hi=wa(gs("SkipSelf"),4);var ss=(()=>((ss=ss||{})[ss.Important=1]="Important",ss[ss.DashCase=2]="DashCase",ss))();const te=new Map;let pe=0;const fi="__ngContext__";function Li(n,r){Lr(r)?(n[fi]=r[20],function it(n){te.set(n[20],n)}(r)):n[fi]=r}function dl(n,r){return undefined(n,r)}function hl(n){const r=n[3];return Tr(r)?r[3]:r}function Ac(n){return d(n[13])}function _(n){return d(n[4])}function d(n){for(;null!==n&&!Tr(n);)n=n[4];return n}function I(n,r,o,u,l){if(null!=u){let f,m=!1;Tr(u)?f=u:Lr(u)&&(m=!0,u=u[0]);const C=Er(u);0===n&&null!==o?null==l?ad(r,o,C):Ja(r,o,C,l||null,!0):1===n&&null!==o?Ja(r,o,C,l||null,!0):2===n?function hh(n,r,o){const u=ld(n,r);u&&function ud(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}(r,C,m):3===n&&r.destroyNode(C),null!=f&&function My(n,r,o,u,l){const f=o[7];f!==Er(o)&&I(r,n,u,f,l);for(let C=10;C<o.length;C++){const S=o[C];Mc(S[1],S,n,r,u,f)}}(r,n,f,o,l)}}function et(n,r,o){return n.createElement(r,o)}function $l(n,r){const o=n[9],u=o.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,to(l,-1)),o.splice(u,1)}function As(n,r){if(n.length<=10)return;const o=10+r,u=n[o];if(u){const l=u[17];null!==l&&l!==n&&$l(l,u),r>0&&(n[o-1][4]=u[4]);const f=Hs(n,10+r);!function kt(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const m=f[19];null!==m&&m.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Hl(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Mc(n,r,o,3,null,null),function lr(n){let r=n[13];if(!r)return vu(n[1],n);for(;r;){let o=null;if(Lr(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==n;)Lr(r)&&vu(r[1],r),r=r[3];null===r&&(r=n),Lr(r)&&vu(r[1],r),o=r&&r[4]}r=o}}(r)}}function vu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function ia(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=r[o[u]];if(!(l instanceof io)){const f=o[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const C=l[f[m]],S=f[m+1];try{S.call(C)}finally{}}else try{f.call(l)}finally{}}}}(n,r),function od(n,r){const o=n.cleanup,u=r[7];let l=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const m=o[f+1],C="function"==typeof m?m(r):Er(r[m]),S=u[l=o[f+2]],F=o[f+3];"boolean"==typeof F?C.removeEventListener(o[f],S,F):F>=0?u[l=F]():u[l=-F].unsubscribe(),f+=2}else{const m=u[l=o[f+1]];o[f].call(m)}if(null!==u){for(let f=l+1;f<u.length;f++)(0,u[f])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&Tr(r[3])){o!==r[3]&&$l(o,r);const u=r[19];null!==u&&u.detachView(n)}!function Ut(n){te.delete(n[20])}(r)}}function Sc(n,r,o){return function $u(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const l=n.data[u.directiveStart].encapsulation;if(l===Jt.None||l===Jt.Emulated)return null}return Wr(u,o)}(n,r.parent,o)}function Ja(n,r,o,u,l){n.insertBefore(r,o,u,l)}function ad(n,r,o){n.appendChild(r,o)}function er(n,r,o,u,l){null!==u?Ja(n,r,o,u,l):ad(n,r,o)}function ld(n,r){return n.parentNode(r)}let Xa,pg=function cd(n,r,o){return 40&n.type?Wr(n,o):null};function Hu(n,r,o,u){const l=Sc(n,u,r),f=r[11],C=function Nf(n,r,o){return pg(n,r,o)}(u.parent||r[6],u,r);if(null!=l)if(Array.isArray(o))for(let S=0;S<o.length;S++)er(f,l,o[S],C,!1);else er(f,l,o,C,!1)}function _u(n,r){if(null!==r){const o=r.type;if(3&o)return Wr(r,n);if(4&o)return Gu(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return _u(n,u);{const l=n[r.index];return Tr(l)?Gu(-1,l):Er(l)}}if(32&o)return dl(r,n)()||Er(n[r.index]);{const u=Ff(n,r);return null!==u?Array.isArray(u)?u[0]:_u(hl(n[16]),u):_u(n,r.next)}}return null}function Ff(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Gu(n,r){const o=10+n+1;if(o<r.length){const u=r[o],l=u[1].firstChild;if(null!==l)return _u(u,l)}return r[7]}function fl(n,r,o,u,l,f,m){for(;null!=o;){const C=u[o.index],S=o.type;if(m&&0===r&&(C&&Li(Er(C),u),o.flags|=4),64!=(64&o.flags))if(8&S)fl(n,r,o.child,u,l,f,!1),I(r,n,l,C,f);else if(32&S){const F=dl(o,u);let W;for(;W=F();)I(r,n,l,W,f);I(r,n,l,C,f)}else 16&S?xc(n,r,u,o,l,f):I(r,n,l,C,f);o=m?o.projectionNext:o.next}}function Mc(n,r,o,u,l,f){fl(o,u,n.firstChild,r,l,f,!1)}function xc(n,r,o,u,l,f){const m=o[16],S=m[6].projection[u.projection];if(Array.isArray(S))for(let F=0;F<S.length;F++)I(r,n,l,S[F],f);else fl(n,r,S,m[3],l,f,!0)}function Ei(n,r,o){n.setAttribute(r,"style",o)}function Rc(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function mg(n){Xa=n}class yh{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function zu(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var os=(()=>((os=os||{})[os.NONE=0]="NONE",os[os.HTML=1]="HTML",os[os.STYLE=2]="STYLE",os[os.SCRIPT=3]="SCRIPT",os[os.URL=4]="URL",os[os.RESOURCE_URL=5]="RESOURCE_URL",os))();function Kl(n){const r=function Ed(){const n=gt();return n&&n[12]}();return r?r.sanitize(os.URL,n)||"":function Wl(n,r){const o=function vh(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?zu(n):function Eh(n){return(n=String(n)).match(_g)?n:"unsafe:"+n}(We(n))}const $f=new yr("ENVIRONMENT_INITIALIZER"),Wu=new yr("INJECTOR",-1),ql=new yr("INJECTOR_DEF_TYPES");class Hf{get(r,o=Kn){if(o===Kn){const u=new Error(`NullInjectorError: No provider for ${se(r)}!`);throw u.name="NullInjectorError",u}return o}}function Gy(...n){return{\u0275providers:Gf(0,n)}}function Gf(n,...r){const o=[],u=new Set;let l;return Si(r,f=>{const m=f;Ch(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&Iu(l,o),o}function Iu(n,r){for(let o=0;o<n.length;o++){const{providers:l}=n[o];Si(l,f=>{r.push(f)})}}function Ch(n,r,o,u){if(!(n=Ee(n)))return!1;let l=null,f=Bn(n);const m=!f&&q(n);if(f||m){if(m&&!m.standalone)return!1;l=n}else{const S=n.ngModule;if(f=Bn(S),!f)return!1;l=S}const C=u.has(l);if(m){if(C)return!1;if(u.add(l),m.dependencies){const S="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const F of S)Ch(F,r,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let F;u.add(l);try{Si(f.imports,W=>{Ch(W,r,o,u)&&(F||(F=[]),F.push(W))})}finally{}void 0!==F&&Iu(F,r)}if(!C){const F=Hi(l)||(()=>new l);r.push({provide:l,useFactory:F,deps:un},{provide:ql,useValue:l,multi:!0},{provide:$f,useValue:()=>Fi(l),multi:!0})}const S=f.providers;null==S||C||Si(S,W=>{r.push(W)})}}return l!==n&&void 0!==n.providers}const bg=me({provide:String,useValue:me});function Oc(n){return null!==n&&"object"==typeof n&&bg in n}function Ta(n){return"function"==typeof n}const bh=new yr("Set Injector scope."),kc={},zf={};let Th;function Id(){return void 0===Th&&(Th=new Hf),Th}class Zl{}class Wf extends Zl{constructor(r,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yl(r,m=>this.processProvider(m)),this.records.set(Wu,Fc(void 0,this)),l.has("environment")&&this.records.set(Zl,Fc(void 0,this));const f=this.records.get(bh);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(ql.multi,un,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ts(this),u=Jn(void 0);try{return r()}finally{Ts(o),Jn(u)}}get(r,o=Kn,u=bt.Default){this.assertNotDestroyed();const l=Ts(this),f=Jn(void 0);try{if(!(u&bt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const S=function Wy(n){return"function"==typeof n||"object"==typeof n&&n instanceof yr}(r)&&ln(r);C=S&&this.injectableDefInScope(S)?Fc(Ah(r),kc):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(u&bt.Self?Id():this.parent).get(r,o=u&bt.Optional&&o===Kn?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[li]=m[li]||[]).unshift(se(r)),l)throw m;return function Na(n,r,o,u){const l=n[li];throw r[ea]&&l.unshift(r[ea]),n.message=function Za(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=se(r);if(Array.isArray(r))l=r.map(se).join(" -> ");else if("object"==typeof r){let f=[];for(let m in r)if(r.hasOwnProperty(m)){let C=r[m];f.push(m+":"+("string"==typeof C?JSON.stringify(C):se(C)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(Gs,"\n  ")}`}("\n"+n.message,l,o,u),n.ngTokenPath=l,n[li]=null,n}(m,r,"R3InjectorError",this.source)}throw m}finally{Jn(f),Ts(l)}}resolveInjectorInitializers(){const r=Ts(this),o=Jn(void 0);try{const u=this.get($f.multi,un,bt.Self);for(const l of u)l()}finally{Ts(r),Jn(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(se(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(r){let o=Ta(r=Ee(r))?r:Ee(r&&r.provide);const u=function Dd(n){return Oc(n)?Fc(void 0,n.useValue):Fc(vl(n),kc)}(r);if(Ta(r)||!0!==r.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Fc(void 0,kc,!0),l.factory=()=>il(l.multi),this.records.set(o,l)),o=r,l.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kc&&(o.value=zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function zy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ee(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ah(n){const r=ln(n),o=null!==r?r.factory:Hi(n);if(null!==o)return o;if(n instanceof yr)throw new Le(204,!1);if(n instanceof Function)return function Sh(n){const r=n.length;if(r>0)throw function Ra(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}(r,"?"),new Le(204,!1);const o=function tr(n){const r=n&&(n[Gt]||n[Cr]);if(r){const o=function jn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Le(204,!1)}function vl(n,r,o){let u;if(Ta(n)){const l=Ee(n);return Hi(l)||Ah(l)}if(Oc(n))u=()=>Ee(n.useValue);else if(function yl(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...il(n.deps||[]));else if(function ml(n){return!(!n||!n.useExisting)}(n))u=()=>Fi(Ee(n.useExisting));else{const l=Ee(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return Hi(l)||Ah(l);u=()=>new l(...il(n.deps))}return u}function Fc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ky(n){return!!n.\u0275providers}function Yl(n,r){for(const o of n)Array.isArray(o)?Yl(o,r):Ky(o)?Yl(o.\u0275providers,r):r(o)}class Ku{}class Zy{resolveComponentFactory(r){throw function Ag(n){const r=Error(`No component factory found for ${se(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jl=(()=>{class n{}return n.NULL=new Zy,n})();function Kf(){return Xl(Gr(),gt())}function Xl(n,r){return new ec(Wr(n,r))}let ec=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Kf,n})();function qf(n){return n instanceof ec?n.nativeElement:n}class Cd{}let Qy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Zf(){const n=gt(),o=di(Gr().index,n);return(Lr(o)?o:n)[11]}(),n})(),Mh=(()=>{class n{}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:()=>null}),n})();class Mg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Yf=new Mg("14.3.0"),tc={};function xh(n){return n.ngOriginalError}class Vc{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&xh(r);for(;o&&xh(o);)o=xh(o);return o||null}}function jo(n){return n instanceof Function?n():n}function Jf(n,r,o){let u=n.length;for(;;){const l=n.indexOf(r,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const f=r.length;if(l+f===u||n.charCodeAt(l+f)<=32)return l}o=l+1}}const Xf="ng-template";function ev(n,r,o){let u=0;for(;u<n.length;){let l=n[u++];if(o&&"class"===l){if(l=n[u],-1!==Jf(l.toLowerCase(),r,0))return!0}else if(1===l){for(;u<n.length&&"string"==typeof(l=n[u++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Td(n){return 4===n.type&&n.value!==Xf}function Pg(n,r,o){return r===(4!==n.type||o?n.value:Xf)}function tv(n,r,o){let u=4;const l=n.attrs||[],f=function Ad(n){for(let r=0;r<n.length;r++)if(_e(n[r]))return r;return n.length}(l);let m=!1;for(let C=0;C<r.length;C++){const S=r[C];if("number"!=typeof S){if(!m)if(4&u){if(u=2|1&u,""!==S&&!Pg(n,S,o)||""===S&&1===r.length){if(Ua(u))return!1;m=!0}}else{const F=8&u?S:r[++C];if(8&u&&null!==n.attrs){if(!ev(n.attrs,F,o)){if(Ua(u))return!1;m=!0}continue}const ie=nv(8&u?"class":S,l,Td(n),o);if(-1===ie){if(Ua(u))return!1;m=!0;continue}if(""!==F){let Ce;Ce=ie>f?"":l[ie+1].toLowerCase();const Ge=8&u?Ce:null;if(Ge&&-1!==Jf(Ge,F,0)||2&u&&F!==Ce){if(Ua(u))return!1;m=!0}}}}else{if(!m&&!Ua(u)&&!Ua(S))return!1;if(m&&Ua(S))continue;m=!1,u=S|1&u}}return Ua(u)||m}function Ua(n){return 0==(1&n)}function nv(n,r,o,u){if(null===r)return-1;let l=0;if(u||!o){let f=!1;for(;l<r.length;){const m=r[l];if(m===n)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function Ng(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ep(n,r,o=!1){for(let u=0;u<r.length;u++)if(tv(n,r[u],o))return!0;return!1}function kg(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],o=1,u=2,l="",f=!1;for(;o<n.length;){let m=n[o];if("string"==typeof m)if(2&u){const C=n[++o];l+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Ua(m)&&(r+=kg(f,l),l=""),u=m,f=f||!Ua(u);o++}return""!==l&&(r+=kg(f,l)),r}const Qn={};function Ss(n){Lg(Un(),gt(),ur()+n,!1)}function Lg(n,r,o,u){if(!u)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&ts(r,f,o)}else{const f=n.preOrderHooks;null!==f&&Zo(r,f,0,o)}mi(o)}function kh(n,r=null,o=null,u){const l=Fh(n,r,o,u);return l.resolveInjectorInitializers(),l}function Fh(n,r=null,o=null,u,l=new Set){const f=[o||un,Gy(n)];return u=u||("object"==typeof n?void 0:se(n)),new Wf(f,r||Id(),u||null,l)}let eu=(()=>{class n{static create(o,u){if(Array.isArray(o))return kh({name:""},u,o,"");{const l=o.name??"";return kh({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=Kn,n.NULL=new Hf,n.\u0275prov=Vt({token:n,providedIn:"any",factory:()=>Fi(Wu)}),n.__NG_ELEMENT_ID__=-1,n})();function El(n,r=bt.Default){const o=gt();return null===o?Fi(n,r):za(Gr(),o,Ee(n),r)}function Uh(){throw new Error("invalid")}function Bh(n,r){return n<<17|r<<2}function Ba(n){return n>>17&32767}function cp(n){return 2|n}function Zu(n){return(131068&n)>>2}function Ws(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function Kh(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],f=o[u+1];if(-1!==f){const m=n.data[f];ki(l),m.contentQueries(2,r[f],f)}}}function Ld(n,r,o,u,l,f,m,C,S,F,W){const ie=r.blueprint.slice();return ie[0]=l,ie[2]=76|u,(null!==W||n&&1024&n[2])&&(ie[2]|=1024),Kr(ie),ie[3]=ie[15]=n,ie[8]=o,ie[10]=m||n&&n[10],ie[11]=C||n&&n[11],ie[12]=S||n&&n[12]||null,ie[9]=F||n&&n[9]||null,ie[6]=f,ie[20]=function be(){return pe++}(),ie[21]=W,ie[16]=2==r.type?n[16]:ie,ie}function Il(n,r,o,u,l){let f=n.data[r];if(null===f)f=function Vd(n,r,o,u,l){const f=ei(),m=No(),S=n.data[r]=function Tp(n,r,o,u,l,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,r,u,l);return null===n.firstChild&&(n.firstChild=S),null!==f&&(m?null==f.child&&null!==S.parent&&(f.child=S):null===f.next&&(f.next=S)),S}(n,r,o,u,l),function ti(){return En.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const m=function Wi(){const n=En.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return es(f,!0),f}function Dl(n,r,o,u){if(0===o)return-1;const l=r.length;for(let f=0;f<o;f++)r.push(u),n.blueprint.push(u),n.data.push(null);return l}function Cl(n,r,o){wo(r);try{const u=n.viewQuery;null!==u&&jd(1,u,o);const l=n.template;null!==l&&qh(n,r,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kh(n,r),n.staticViewQueries&&jd(2,n.viewQuery,o);const f=n.components;null!==f&&function Dp(n,r){for(let o=0;o<r.length;o++)Mv(n,r[o])}(r,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,Us()}}function tu(n,r,o,u){const l=r[2];if(128!=(128&l)){wo(r);try{Kr(r),function Qe(n){return En.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&qh(n,r,o,2,u);const m=3==(3&l);if(m){const F=n.preOrderCheckHooks;null!==F&&ts(r,F,null)}else{const F=n.preOrderHooks;null!==F&&Zo(r,F,0,null),ps(r,0)}if(function Pp(n){for(let r=Ac(n);null!==r;r=_(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const l=o[u],f=l[3];0==(512&l[2])&&to(f,1),l[2]|=512}}}(r),function Av(n){for(let r=Ac(n);null!==r;r=_(r))for(let o=10;o<r.length;o++){const u=r[o],l=u[1];Po(u)&&tu(l,u,l.template,u[8])}}(r),null!==n.contentQueries&&Kh(n,r),m){const F=n.contentCheckHooks;null!==F&&ts(r,F)}else{const F=n.contentHooks;null!==F&&Zo(r,F,1),ps(r,1)}!function Ev(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)mi(~l);else{const f=l,m=o[++u],C=o[++u];bi(m,f),C(2,r[f])}}}finally{mi(-1)}}(n,r);const C=n.components;null!==C&&function wv(n,r){for(let o=0;o<r.length;o++)Sv(n,r[o])}(r,C);const S=n.viewQuery;if(null!==S&&jd(2,S,u),m){const F=n.viewCheckHooks;null!==F&&ts(r,F)}else{const F=n.viewHooks;null!==F&&Zo(r,F,2),ps(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,to(r[3],-1))}finally{Us()}}}function qh(n,r,o,u,l){const f=ur(),m=2&u;try{mi(-1),m&&r.length>22&&Lg(n,r,22,!1),o(u,l)}finally{mi(f)}}function bl(n,r,o){!_o()||(function Dv(n,r,o,u){const l=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||Kt(o,r),Li(u,r);const m=o.initialInputs;for(let C=l;C<f;C++){const S=n.data[C],F=Or(S);F&&Tv(r,o,S);const W=ha(r,n,C,o);Li(W,r),null!==m&&Rp(0,C-l,W,S,0,m),F&&(di(o.index,r)[8]=W)}}(n,r,o,Wr(o,r)),128==(128&o.flags)&&function Cv(n,r,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,m=function Ds(){return En.lFrame.currentDirectiveIndex}();try{mi(f);for(let C=u;C<l;C++){const S=n.data[C],F=r[C];Ls(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&lm(S,F)}}finally{mi(-1),Ls(m)}}(n,r,o))}function Zh(n,r,o=Wr){const u=r.localNames;if(null!==u){let l=r.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],C=-1===m?o(r,n):n[m];n[l++]=C}}}function dc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cp(n,r,o,u,l,f,m,C,S,F){const W=22+u,ie=W+l,Ce=function Iv(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:Qn);return o}(W,ie),Ge="function"==typeof F?F():F;return Ce[1]={type:n,blueprint:Ce,template:o,queries:null,viewQuery:C,declTNode:r,data:Ce.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:Ge,incompleteFirstPass:!1}}function Yh(n,r,o,u){const l=nf(r);null===o?l.push(u):(l.push(o),n.firstCreatePass&&Cu(n).push(u,l.length-1))}function rm(n,r,o){for(let u in n)if(n.hasOwnProperty(u)){const l=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,l):o[u]=[r,l]}return o}function im(n,r){const u=r.directiveEnd,l=n.data,f=r.attrs,m=[];let C=null,S=null;for(let F=r.directiveStart;F<u;F++){const W=l[F],ie=W.inputs,Ce=null===f||Td(r)?null:dm(ie,f);m.push(Ce),C=rm(ie,F,C),S=rm(W.outputs,F,S)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=m,r.inputs=C,r.outputs=S}function sm(n,r){const o=di(r,n);16&o[2]||(o[2]|=32)}function Qh(n,r,o,u){let l=!1;if(_o()){const f=function bv(n,r,o){const u=n.directiveRegistry;let l=null;if(u)for(let f=0;f<u.length;f++){const m=u[f];ep(o,m.selectors,!1)&&(l||(l=[]),qe(Kt(o,r),n,m.type),Or(m)?(Jh(n,o),l.unshift(m)):l.push(m))}return l}(n,r,o),m=null===u?null:{"":-1};if(null!==f){l=!0,cm(o,n.data.length,f.length);for(let W=0;W<f.length;W++){const ie=f[W];ie.providersResolver&&ie.providersResolver(ie)}let C=!1,S=!1,F=Dl(n,r,f.length,null);for(let W=0;W<f.length;W++){const ie=f[W];o.mergedAttrs=ct(o.mergedAttrs,ie.hostAttrs),Xh(n,o,r,F,ie),xp(F,ie,m),null!==ie.contentQueries&&(o.flags|=8),(null!==ie.hostBindings||null!==ie.hostAttrs||0!==ie.hostVars)&&(o.flags|=128);const Ce=ie.type.prototype;!C&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!S&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),S=!0),F++}im(n,o)}m&&function Mp(n,r,o){if(r){const u=n.localNames=[];for(let l=0;l<r.length;l+=2){const f=o[r[l+1]];if(null==f)throw new Le(-301,!1);u.push(r[l],f)}}}(o,u,m)}return o.mergedAttrs=ct(o.mergedAttrs,o.attrs),l}function Sp(n,r,o,u,l,f){const m=f.hostBindings;if(m){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const S=~r.index;(function um(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(C)!=S&&C.push(S),C.push(u,l,m)}}function lm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Jh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;Or(r)&&(o[""]=n)}}function cm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Xh(n,r,o,u,l){n.data[u]=l;const f=l.factory||(l.factory=Hi(l.type)),m=new io(f,Or(l),El);n.blueprint[u]=m,o[u]=m,Sp(n,r,0,u,Dl(n,o,l.hostVars,Qn),l)}function Tv(n,r,o){const u=Wr(r,n),l=dc(o),f=n[10],m=$c(n,Ld(n,l,null,o.onPush?32:16,u,r,f,f.createRenderer(u,o),null,null,null));n[r.index]=m}function ja(n,r,o,u,l,f){const m=Wr(n,r);!function ef(n,r,o,u,l,f,m){if(null==f)n.removeAttribute(r,l,o);else{const C=null==m?We(f):m(f,u||"",l);n.setAttribute(r,l,C,o)}}(r[11],m,f,n.value,o,u,l)}function Rp(n,r,o,u,l,f){const m=f[r];if(null!==m){const C=u.setInput;for(let S=0;S<m.length;){const F=m[S++],W=m[S++],ie=m[S++];null!==C?u.setInput(o,ie,F,W):o[W]=ie}}}function dm(n,r){let o=null,u=0;for(;u<r.length;){const l=r[u];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,n[l],r[u+1])),u+=2}else u+=2;else u+=4}return o}function tf(n,r,o,u){return new Array(n,!0,!1,r,null,0,u,o,null,null)}function Sv(n,r){const o=di(r,n);if(Po(o)){const u=o[1];48&o[2]?tu(u,o,u.template,o[8]):o[5]>0&&Ud(o)}}function Ud(n){for(let u=Ac(n);null!==u;u=_(u))for(let l=10;l<u.length;l++){const f=u[l];if(Po(f))if(512&f[2]){const m=f[1];tu(m,f,m.template,f[8])}else f[5]>0&&Ud(f)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=di(o[u],n);Po(l)&&l[5]>0&&Ud(l)}}function Mv(n,r){const o=di(r,n),u=o[1];(function Np(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),Cl(u,o,o[8])}function $c(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bd(n){for(;n;){n[2]|=32;const r=hl(n);if(ji(n)&&!r)return n;n=r}return null}function Qu(n,r,o,u=!0){const l=r[10];l.begin&&l.begin();try{tu(n,r,n.template,o)}catch(m){throw u&&hm(r,m),m}finally{l.end&&l.end()}}function jd(n,r,o){ki(0),r(n,o)}function nf(n){return n[7]||(n[7]=[])}function Cu(n){return n.cleanup||(n.cleanup=[])}function hm(n,r){const o=n[9],u=o?o.get(Vc,null):null;u&&u.handleError(r)}function $d(n,r,o,u,l){for(let f=0;f<o.length;){const m=o[f++],C=o[f++],S=r[m],F=n.data[m];null!==F.setInput?F.setInput(S,l,u,C):S[C]=l}}function Ju(n,r,o){const u=fs(r,n);!function J(n,r,o){n.setValue(r,o)}(n[11],u,o)}function sf(n,r,o){let u=o?n.styles:null,l=o?n.classes:null,f=0;if(null!==r)for(let m=0;m<r.length;m++){const C=r[m];"number"==typeof C?f=C:1==f?l=xe(l,C):2==f&&(u=xe(u,C+": "+r[++m]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function Hc(n,r,o,u,l=!1){for(;null!==o;){const f=r[o.index];if(null!==f&&u.push(Er(f)),Tr(f))for(let C=10;C<f.length;C++){const S=f[C],F=S[1].firstChild;null!==F&&Hc(S[1],S,F,u)}const m=o.type;if(8&m)Hc(n,r,o.child,u);else if(32&m){const C=dl(o,r);let S;for(;S=C();)u.push(S)}else if(16&m){const C=Ff(r,o);if(Array.isArray(C))u.push(...C);else{const S=hl(r[16]);Hc(S[1],S,C,u,!0)}}o=l?o.projectionNext:o.next}return u}class Hd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Hc(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Tr(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(As(r,u),Hs(o,u))}this._attachedToViewContainer=!1}Hl(this._lView[1],this._lView)}onDestroy(r){Yh(this._lView[1],this._lView,null,r)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Qu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dn(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=r}}class Op extends Hd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Qu(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class kp extends Jl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=q(r);return new Gc(o,this.ngModule)}}function af(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Fp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const l=this.injector.get(r,tc,u);return l!==tc||o===tc?l:this.parentInjector.get(r,o,u)}}class Gc extends Ku{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return af(this.componentDef.inputs)}get outputs(){return af(this.componentDef.outputs)}create(r,o,u,l){let f=(l=l||this.ngModule)instanceof Zl?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new Fp(r,f):r,C=m.get(Cd,null);if(null===C)throw new Le(407,!1);const S=m.get(Mh,null),F=C.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ie=u?function bp(n,r,o){return n.selectRootElement(r,o===Jt.ShadowDom)}(F,u,this.componentDef.encapsulation):et(F,W,function Rv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(W)),Ce=this.componentDef.onPush?288:272,Ge=Cp(0,null,null,1,0,null,null,null,null,null),pt=Ld(null,Ge,null,Ce,null,null,C,F,S,m,null);let Ft,Qt;wo(pt);try{const Cn=function Vp(n,r,o,u,l,f){const m=o[1];o[22]=n;const S=Il(m,22,2,"#host",null),F=S.mergedAttrs=r.hostAttrs;null!==F&&(sf(S,F,!0),null!==n&&(z(l,n,F),null!==S.classes&&Rc(l,n,S.classes),null!==S.styles&&Ei(l,n,S.styles)));const W=u.createRenderer(n,r),ie=Ld(o,dc(r),null,r.onPush?32:16,o[22],S,u,W,f||null,null,null);return m.firstCreatePass&&(qe(Kt(S,o),m,r.type),Jh(m,S),cm(S,o.length,1)),$c(o,ie),o[22]=ie}(ie,this.componentDef,pt,C,F);if(ie)if(u)z(F,ie,["ng-version",Yf.full]);else{const{attrs:Ln,classes:Ct}=function iv(n){const r=[],o=[];let u=1,l=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===l?""!==f&&r.push(f,n[++u]):8===l&&o.push(f);else{if(!Ua(l))break;l=f}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Ln&&z(F,ie,Ln),Ct&&Ct.length>0&&Rc(F,ie,Ct.join(" "))}if(Qt=yo(Ge,22),void 0!==o){const Ln=Qt.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const Gn=o[Ct];Ln.push(null!=Gn?Array.from(Gn):null)}}Ft=function Ov(n,r,o,u){const l=o[1],f=function am(n,r,o){const u=Gr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xh(n,u,r,Dl(n,r,1,null),o),im(n,u));const l=ha(r,n,u.directiveStart,u);Li(l,r);const f=Wr(u,r);return f&&Li(f,r),l}(l,o,r);if(n[8]=o[8]=f,null!==u)for(const C of u)C(f,r);if(r.contentQueries){const C=Gr();r.contentQueries(1,f,C.directiveStart)}const m=Gr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(mi(m.index),Sp(o[1],m,0,m.directiveStart,m.directiveEnd,r),lm(r,f)),f}(Cn,this.componentDef,pt,[Up]),Cl(Ge,pt,null)}finally{Us()}return new Nv(this.componentType,Ft,Xl(Qt,pt),pt,Qt)}}class Nv extends class Ql{}{constructor(r,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new Op(l),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[r])){const f=this._rootLView;$d(f[1],f,l,r,o),sm(f,this._tNode.index)}}get injector(){return new Wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Up(){const n=Gr();Cs(gt()[1],n)}function Gd(n){let r=function uf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let l;if(Or(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Le(903,!1);l=r.\u0275dir}if(l){if(o){u.push(l);const m=n;m.inputs=hc(n.inputs),m.declaredInputs=hc(n.declaredInputs),m.outputs=hc(n.outputs);const C=l.hostBindings;C&&fm(n,C);const S=l.viewQuery,F=l.contentQueries;if(S&&Fv(n,S),F&&Bp(n,F),we(n.inputs,l.inputs),we(n.declaredInputs,l.declaredInputs),we(n.outputs,l.outputs),Or(l)&&l.data.animation){const W=n.data;W.animation=(W.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let m=0;m<f.length;m++){const C=f[m];C&&C.ngInherit&&C(n),C===Gd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function kv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const l=n[u];l.hostVars=r+=l.hostVars,l.hostAttrs=ct(l.hostAttrs,o=ct(o,l.hostAttrs))}}(u)}function hc(n){return n===fr?{}:n===un?[]:n}function Fv(n,r){const o=n.viewQuery;n.viewQuery=o?(u,l)=>{r(u,l),o(u,l)}:r}function Bp(n,r){const o=n.contentQueries;n.contentQueries=o?(u,l,f)=>{r(u,l,f),o(u,l,f)}:r}function fm(n,r){const o=n.hostBindings;n.hostBindings=o?(u,l)=>{r(u,l),o(u,l)}:r}let cf=null;function fc(){if(!cf){const n=Rn.Symbol;if(n&&n.iterator)cf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cf=u)}}}return cf}function zd(n){return!!Wd(n)&&(Array.isArray(n)||!(n instanceof Map)&&fc()in n)}function Wd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function nu(n,r,o){return n[r]=o}function Ks(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Kc(n,r,o,u){const l=gt();return Ks(l,en(),r)&&(Un(),ja(Sr(),l,n,r,o,u)),Kc}function mc(n,r,o,u,l,f){const C=function bu(n,r,o,u){const l=Ks(n,r,o);return Ks(n,r+1,u)||l}(n,function Z(){return En.lFrame.bindingIndex}(),o,l);return $n(2),C?r+We(o)+u+We(l)+f:Qn}function Wp(n,r,o,u,l,f,m,C){const S=gt(),F=Un(),W=n+22,ie=F.firstCreatePass?function wm(n,r,o,u,l,f,m,C,S){const F=r.consts,W=Il(r,n,4,m||null,Xr(F,C));Qh(r,o,W,Xr(F,S)),Cs(r,W);const ie=W.tViews=Cp(2,W,u,l,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,F);return null!==r.queries&&(r.queries.template(r,W),ie.queries=r.queries.embeddedTView(W)),W}(W,F,S,r,o,u,l,f,m):F.data[W];es(ie,!1);const Ce=S[11].createComment("");Hu(F,S,Ce,ie),Li(Ce,S),$c(S,S[W]=tf(Ce,S,Ce,ie)),Ns(ie)&&bl(F,S,ie),null!=m&&Zh(S,ie,C)}function Ir(n){return zi(function Br(){return En.lFrame.contextLView}(),22+n)}function pf(n,r,o){const u=gt();return Ks(u,en(),r)&&function $o(n,r,o,u,l,f,m,C){const S=Wr(r,o);let W,F=r.inputs;!C&&null!=F&&(W=F[u])?($d(n,o,W,u,l),Ri(r)&&sm(o,r.index)):3&r.type&&(u=function Ap(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=m?m(l,r.value||"",u):l,f.setProperty(S,u,l))}(Un(),Sr(),u,n,r,u[11],o,!1),pf}function gf(n,r,o,u,l){const m=l?"class":"style";$d(n,o,r.inputs[m],m,u)}function qd(n,r,o,u){const l=gt(),f=Un(),m=22+n,C=l[11],S=l[m]=et(C,r,function qo(){return En.lFrame.currentNamespace}()),F=f.firstCreatePass?function Kd(n,r,o,u,l,f,m){const C=r.consts,F=Il(r,n,2,l,Xr(C,f));return Qh(r,o,F,Xr(C,m)),null!==F.attrs&&sf(F,F.attrs,!1),null!==F.mergedAttrs&&sf(F,F.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,F),F}(m,f,l,0,r,o,u):f.data[m];es(F,!0);const W=F.mergedAttrs;null!==W&&z(C,S,W);const ie=F.classes;null!==ie&&Rc(C,S,ie);const Ce=F.styles;return null!==Ce&&Ei(C,S,Ce),64!=(64&F.flags)&&Hu(f,l,S,F),0===function aa(){return En.lFrame.elementDepthCount}()&&Li(S,l),function Ar(){En.lFrame.elementDepthCount++}(),Ns(F)&&(bl(f,l,F),function cc(n,r,o){if(Ps(r)){const l=r.directiveEnd;for(let f=r.directiveStart;f<l;f++){const m=n.data[f];m.contentQueries&&m.contentQueries(1,o[f],f)}}}(f,F,l)),null!==u&&Zh(l,F),qd}function wi(){let n=Gr();No()?function ws(){En.lFrame.isParent=!1}():(n=n.parent,es(n,!1));const r=n;!function Oi(){En.lFrame.elementDepthCount--}();const o=Un();return o.firstCreatePass&&(Cs(o,n),Ps(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ou(n){return 0!=(16&n.flags)}(r)&&gf(o,r,gt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function b(n){return 0!=(32&n.flags)}(r)&&gf(o,r,gt(),r.stylesWithoutHost,!1),wi}function Ms(n,r,o,u){return qd(n,r,o,u),wi(),Ms}function Im(){return gt()}function Zd(n){return!!n&&"function"==typeof n.then}function Dm(n){return!!n&&"function"==typeof n.subscribe}const mf=Dm;function Yp(n,r,o,u){const l=gt(),f=Un(),m=Gr();return function Lv(n,r,o,u,l,f,m,C){const S=Ns(u),W=n.firstCreatePass&&Cu(n),ie=r[8],Ce=nf(r);let Ge=!0;if(3&u.type||C){const Qt=Wr(u,r),Cn=C?C(Qt):Qt,Ln=Ce.length,Ct=C?Jr=>C(Er(Jr[u.index])):u.index;let Gn=null;if(!C&&S&&(Gn=function Ii(n,r,o,u){const l=n.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===o&&l[f+1]===u){const C=r[7],S=l[f+2];return C.length>S?C[S]:null}"string"==typeof m&&(f+=2)}return null}(n,r,l,u.index)),null!==Gn)(Gn.__ngLastListenerFn__||Gn).__ngNextListenerFn__=f,Gn.__ngLastListenerFn__=f,Ge=!1;else{f=Ji(u,r,ie,f,!1);const Jr=o.listen(Cn,l,f);Ce.push(f,Jr),W&&W.push(l,Ct,Ln,Ln+1)}}else f=Ji(u,r,ie,f,!1);const pt=u.outputs;let Ft;if(Ge&&null!==pt&&(Ft=pt[l])){const Qt=Ft.length;if(Qt)for(let Cn=0;Cn<Qt;Cn+=2){const Xi=r[Ft[Cn]][Ft[Cn+1]].subscribe(f),uh=Ce.length;Ce.push(f,Xi),W&&W.push(l,u.index,uh,-(uh+1))}}}(f,l,l[11],m,n,r,0,u),Yp}function Vv(n,r,o,u){try{return!1!==o(u)}catch(l){return hm(n,l),!1}}function Ji(n,r,o,u,l){return function f(m){if(m===Function)return u;Bd(2&n.flags?di(n.index,r):r);let S=Vv(r,0,u,m),F=f.__ngNextListenerFn__;for(;F;)S=Vv(r,0,F,m)&&S,F=F.__ngNextListenerFn__;return l&&!1===S&&(m.preventDefault(),m.returnValue=!1),S}}function Qp(n=1){return function la(n){return(En.lFrame.contextLView=function Io(n,r){for(;n>0;)r=r[15],n--;return r}(n,En.lFrame.contextLView))[8]}(n)}function Ml(n,r,o,u,l){const f=n[o+1],m=null===r;let C=u?Ba(f):Zu(f),S=!1;for(;0!==C&&(!1===S||m);){const W=n[C+1];yf(n[C],r)&&(S=!0,n[C+1]=u?jh(W):cp(W)),C=u?Ba(W):Zu(W)}S&&(n[o+1]=u?cp(f):jh(f))}function yf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&v(n,r)>=0}const xs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pm(n){return n.substring(xs.key,xs.keyEnd)}function Yd(n,r){const o=xs.textEnd;return o===r?-1:(r=xs.keyEnd=function km(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,xs.key=r,o),Au(n,r,o))}function Au(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function _f(n,r){return function Ho(n,r,o,u){const l=gt(),f=Un(),m=$n(2);f.firstUpdatePass&&Xd(f,n,m,u),r!==Qn&&Ks(l,m,r)&&$m(f,f.data[ur()],l,l[11],n,l[m+1]=function l0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=se(zu(n)))),n}(r,o),u,m)}(n,r,null,!0),_f}function tg(n){!function iu(n,r,o,u){const l=Un(),f=$n(2);l.firstUpdatePass&&Xd(l,null,f,u);const m=gt();if(o!==Qn&&Ks(m,f,o)){const C=l.data[ur()];if(If(C,u)&&!Jd(l,f)){let S=u?C.classesWithoutHost:C.stylesWithoutHost;null!==S&&(o=xe(S,o||"")),gf(l,C,m,o,u)}else!function nh(n,r,o,u,l,f,m,C){l===Qn&&(l=un);let S=0,F=0,W=0<l.length?l[0]:null,ie=0<f.length?f[0]:null;for(;null!==W||null!==ie;){const Ce=S<l.length?l[S+1]:void 0,Ge=F<f.length?f[F+1]:void 0;let Ft,pt=null;W===ie?(S+=2,F+=2,Ce!==Ge&&(pt=ie,Ft=Ge)):null===ie||null!==W&&W<ie?(S+=2,pt=W):(F+=2,pt=ie,Ft=Ge),null!==pt&&$m(n,r,o,u,pt,Ft,m,C),W=S<l.length?l[S]:null,ie=F<f.length?f[F]:null}}(l,C,m,m[11],m[f+1],m[f+1]=function th(n,r,o){if(null==o||""===o)return un;const u=[],l=zu(o);if(Array.isArray(l))for(let f=0;f<l.length;f++)n(u,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&n(u,f,l[f]);else"string"==typeof l&&r(u,l);return u}(n,r,o),u,f)}}(ys,$a,n,!0)}function $a(n,r){for(let o=function Om(n){return function Qd(n){xs.key=0,xs.keyEnd=0,xs.value=0,xs.valueEnd=0,xs.textEnd=n.length}(n),Yd(n,Au(n,0,xs.textEnd))}(r);o>=0;o=Yd(r,o))ys(n,Pm(r),!0)}function Jd(n,r){return r>=n.expandoStartIndex}function Xd(n,r,o,u){const l=n.data;if(null===l[o+1]){const f=l[ur()],m=Jd(n,o);If(f,u)&&null===r&&!m&&(r=!1),r=function Bm(n,r,o,u){const l=function Eo(n){const r=En.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=u?r.residualClasses:r.residualStyles;if(null===l)0===(u?r.classBindings:r.styleBindings)&&(o=_c(o=wf(null,n,r,o,u),r.attrs,u),f=null);else{const m=r.directiveStylingLast;if(-1===m||n[m]!==l)if(o=wf(l,n,r,o,u),null===f){let S=function eh(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==Zu(u))return n[Ba(u)]}(n,r,u);void 0!==S&&Array.isArray(S)&&(S=wf(null,n,r,S[1],u),S=_c(S,r.attrs,u),function Gv(n,r,o,u){n[Ba(o?r.classBindings:r.styleBindings)]=u}(n,r,u,S))}else f=function Ef(n,r,o){let u;const l=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<l;f++)u=_c(u,n[f].hostAttrs,o);return _c(u,r.attrs,o)}(n,r,u)}return void 0!==f&&(u?r.residualClasses=f:r.residualStyles=f),o}(l,f,r,u),function Sl(n,r,o,u,l,f){let m=f?r.classBindings:r.styleBindings,C=Ba(m),S=Zu(m);n[u]=o;let W,F=!1;if(Array.isArray(o)){const ie=o;W=ie[1],(null===W||v(ie,W)>0)&&(F=!0)}else W=o;if(l)if(0!==S){const Ce=Ba(n[C+1]);n[u+1]=Bh(Ce,C),0!==Ce&&(n[Ce+1]=Ws(n[Ce+1],u)),n[C+1]=function lp(n,r){return 131071&n|r<<17}(n[C+1],u)}else n[u+1]=Bh(C,0),0!==C&&(n[C+1]=Ws(n[C+1],u)),C=u;else n[u+1]=Bh(S,0),0===C?C=u:n[S+1]=Ws(n[S+1],u),S=u;F&&(n[u+1]=cp(n[u+1])),Ml(n,W,u,!0),Ml(n,W,u,!1),function u0(n,r,o,u,l){const f=l?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&v(f,r)>=0&&(o[u+1]=jh(o[u+1]))}(r,W,n,u,f),m=Bh(C,S),f?r.classBindings=m:r.styleBindings=m}(l,f,r,o,m,u)}}function wf(n,r,o,u,l){let f=null;const m=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<m&&(f=r[C],u=_c(u,f.hostAttrs,l),f!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function _c(n,r,o){const u=o?1:2;let l=-1;if(null!==r)for(let f=0;f<r.length;f++){const m=r[f];"number"==typeof m?l=m:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ys(n,m,!!o||r[++f]))}return void 0===n?null:n}function $m(n,r,o,u,l,f,m,C){if(!(3&r.type))return;const S=n.data,F=S[C+1];ng(function Wg(n){return 1==(1&n)}(F)?Ec(S,r,o,l,Zu(F),m):void 0)||(ng(f)||function Nd(n){return 2==(2&n)}(F)&&(f=Ec(S,null,o,l,C,m)),function xy(n,r,o,u,l){if(r)l?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:ss.DashCase;null==l?n.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=ss.Important),n.setStyle(o,u,l,f))}}(u,m,fs(ur(),o),l,f))}function Ec(n,r,o,u,l,f){const m=null===r;let C;for(;l>0;){const S=n[l],F=Array.isArray(S),W=F?S[1]:S,ie=null===W;let Ce=o[l+1];Ce===Qn&&(Ce=ie?un:void 0);let Ge=ie?vi(Ce,u):W===u?Ce:void 0;if(F&&!ng(Ge)&&(Ge=vi(S,u)),ng(Ge)&&(C=Ge,m))return C;const pt=n[l+1];l=m?Ba(pt):Zu(pt)}if(null!==r){let S=f?r.residualClasses:r.residualStyles;null!=S&&(C=vi(S,u))}return C}function ng(n){return void 0!==n}function If(n,r){return 0!=(n.flags&(r?16:32))}function Hm(n,r=""){const o=gt(),u=Un(),l=n+22,f=u.firstCreatePass?Il(u,l,1,r,null):u.data[l],m=o[l]=function $(n,r){return n.createText(r)}(o[11],r);Hu(u,o,m,f),es(f,!1)}function Jc(n){return Df("",n,""),Jc}function Df(n,r,o){const u=gt(),l=function Tl(n,r,o,u){return Ks(n,en(),o)?r+We(o)+u:Qn}(u,n,r,o);return l!==Qn&&Ju(u,ur(),l),Df}function rg(n,r,o,u,l){const f=gt(),m=mc(f,n,r,o,u,l);return m!==Qn&&Ju(f,ur(),m),rg}const Cc=void 0;var Zv=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let su={};function cy(n){const r=function m0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const u=r.split("-")[0];if(o=hy(u),o)return o;if("en"===u)return Zv;throw new Le(701,!1)}function dy(n){return cy(n)[Fn.PluralCase]}function hy(n){return n in su||(su[n]=Rn.ng&&Rn.ng.common&&Rn.ng.common.locales&&Rn.ng.common.locales[n]),su[n]}var Fn=(()=>((Fn=Fn||{})[Fn.LocaleId=0]="LocaleId",Fn[Fn.DayPeriodsFormat=1]="DayPeriodsFormat",Fn[Fn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fn[Fn.DaysFormat=3]="DaysFormat",Fn[Fn.DaysStandalone=4]="DaysStandalone",Fn[Fn.MonthsFormat=5]="MonthsFormat",Fn[Fn.MonthsStandalone=6]="MonthsStandalone",Fn[Fn.Eras=7]="Eras",Fn[Fn.FirstDayOfWeek=8]="FirstDayOfWeek",Fn[Fn.WeekendRange=9]="WeekendRange",Fn[Fn.DateFormat=10]="DateFormat",Fn[Fn.TimeFormat=11]="TimeFormat",Fn[Fn.DateTimeFormat=12]="DateTimeFormat",Fn[Fn.NumberSymbols=13]="NumberSymbols",Fn[Fn.NumberFormats=14]="NumberFormats",Fn[Fn.CurrencyCode=15]="CurrencyCode",Fn[Fn.CurrencySymbol=16]="CurrencySymbol",Fn[Fn.CurrencyName=17]="CurrencyName",Fn[Fn.Currencies=18]="Currencies",Fn[Fn.Directionality=19]="Directionality",Fn[Fn.PluralCase=20]="PluralCase",Fn[Fn.ExtraData=21]="ExtraData",Fn))();const oh="en-US";let og=oh;function n_(n,r,o,u,l){if(n=Ee(n),Array.isArray(n))for(let f=0;f<n.length;f++)n_(n[f],r,o,u,l);else{const f=Un(),m=gt();let C=Ta(n)?n:Ee(n.provide),S=vl(n);const F=Gr(),W=1048575&F.providerIndexes,ie=F.directiveStart,Ce=F.providerIndexes>>20;if(Ta(n)||!n.multi){const Ge=new io(S,l,El),pt=i_(C,r,l?W:W+Ce,ie);-1===pt?(qe(Kt(F,m),f,C),r_(f,n,r.length),r.push(C),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),o.push(Ge),m.push(Ge)):(o[pt]=Ge,m[pt]=Ge)}else{const Ge=i_(C,r,W+Ce,ie),pt=i_(C,r,W,W+Ce),Ft=Ge>=0&&o[Ge],Qt=pt>=0&&o[pt];if(l&&!Qt||!l&&!Ft){qe(Kt(F,m),f,C);const Cn=function Uw(n,r,o,u,l){const f=new io(n,o,El);return f.multi=[],f.index=r,f.componentProviders=0,P0(f,l,u&&!o),f}(l?Vw:Lw,o.length,l,u,S);!l&&Qt&&(o[pt].providerFactory=Cn),r_(f,n,r.length,0),r.push(C),F.directiveStart++,F.directiveEnd++,l&&(F.providerIndexes+=1048576),o.push(Cn),m.push(Cn)}else r_(f,n,Ge>-1?Ge:pt,P0(o[l?pt:Ge],S,!l&&u));!l&&u&&Qt&&o[pt].componentProviders++}}}function r_(n,r,o,u){const l=Ta(r),f=function wd(n){return!!n.useClass}(r);if(l||f){const S=(f?Ee(r.useClass):r).prototype.ngOnDestroy;if(S){const F=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const W=F.indexOf(o);-1===W?F.push(o,[u,S]):F[W+1].push(u,S)}else F.push(o,S)}}}function P0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,u){for(let l=o;l<u;l++)if(r[l]===n)return l;return-1}function Lw(n,r,o,u){return s_(this.multi,[])}function Vw(n,r,o,u){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,C=ha(o,o[1],this.providerFactory.index,u);f=C.slice(0,m),s_(l,f);for(let S=m;S<C.length;S++)f.push(C[S])}else f=[],s_(l,f);return f}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function N0(n,r=[]){return o=>{o.providersResolver=(u,l)=>function Fw(n,r,o){const u=Un();if(u.firstCreatePass){const l=Or(n);n_(o,u.data,u.blueprint,l,!0),n_(r,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,r)}}class Sf{}class O0{}function Bw(n,r){return new k0(n,r??null)}class k0 extends Sf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kp(this);const u=Mt(r);this._bootstrapComponents=jo(u.bootstrap),this._r3Injector=Fh(r,o,[{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],se(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class o_ extends O0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class jw extends Sf{constructor(r,o,u){super(),this.componentFactoryResolver=new kp(this),this.instance=null;const l=new Wf([...r,{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],o||Id(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function a_(n,r,o=null){return new jw(n,r,o).injector}let $w=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Gf(0,o.type),l=u.length>0?a_([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Vt({token:n,providedIn:"environment",factory:()=>new n(Fi(Zl))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get($w).getOrCreateStandaloneInjector(n)}function H0(n,r,o){const u=x()+n,l=gt();return l[u]===Qn?nu(l,u,o?r.call(o):r()):function pc(n,r){return n[r]}(l,u)}function G0(n,r,o,u){return z0(gt(),x(),n,r,o,u)}function z0(n,r,o,u,l,f){const m=r+o;return Ks(n,m,l)?nu(n,m+1,f?u.call(f,l):u(l)):function lg(n,r){const o=n[r];return o===Qn?void 0:o}(n,m+1)}function Y0(n,r){const o=Un();let u;const l=n+22;o.firstCreatePass?(u=function sI(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const f=u.factory||(u.factory=Hi(u.type)),m=Jn(El);try{const C=On(!1),S=f();return On(C),function ff(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,gt(),l,S),S}finally{Jn(m)}}function Q0(n,r,o){const u=n+22,l=gt(),f=zi(l,u);return function cg(n,r){return n[1].data[r].pure}(l,u)?z0(l,x(),r,f.transform,o,f):f.transform(o)}function l_(n){return r=>{setTimeout(n,void 0,r)}}const Rl=class cI extends h.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let l=r,f=o||(()=>null),m=u;if(r&&"object"==typeof r){const S=r;l=S.next?.bind(S),f=S.error?.bind(S),m=S.complete?.bind(S)}this.__isAsync&&(f=l_(f),l&&(l=l_(l)),m&&(m=l_(m)));const C=super.subscribe({next:l,error:f,complete:m});return r instanceof L.w0&&r.add(C),C}};function dI(){return this._results[fc()]()}class c_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=fc(),u=c_.prototype;u[o]||(u[o]=dI)}get changes(){return this._changes||(this._changes=new Rl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const l=Ai(r);(this._changesDetected=!function _a(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],f=r[u];if(o&&(l=o(l),f=o(f)),f!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=dg,fI=class extends hI{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,l=Ld(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),Cl(u,l,r),new Hd(l)}};function pI(){return _y(Gr(),gt())}function _y(n,r){return 4&n.type?new fI(r,n,Xl(n,r)):null}let Ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return eE(Gr(),gt())}const mI=Ey,J0=class extends mI{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new Wa(this._hostTNode,this._hostLView)}get parentInjector(){const r=$t(this._hostTNode,this._hostLView);if(or(r)){const o=gn(r,this._hostLView),u=Hn(r);return new Wa(o[1].data[u+8],o)}return new Wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=X0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const m=r.createEmbeddedView(o||{},f);return this.insert(m,l),m}createComponent(r,o,u,l,f){const m=r&&!function Jo(n){return"function"==typeof n}(r);let C;if(m)C=o;else{const ie=o||{};C=ie.index,u=ie.injector,l=ie.projectableNodes,f=ie.environmentInjector||ie.ngModuleRef}const S=m?r:new Gc(q(r)),F=u||this.parentInjector;if(!f&&null==S.ngModule){const Ce=(m?F:this.parentInjector).get(Zl,null);Ce&&(f=Ce)}const W=S.create(F,l,void 0,f);return this.insert(W.hostView,C),W}insert(r,o){const u=r._lView,l=u[1];if(function eo(n){return Tr(n[3])}(u)){const W=this.indexOf(r);if(-1!==W)this.detach(W);else{const ie=u[3],Ce=new J0(ie,ie[6],ie[3]);Ce.detach(Ce.indexOf(r))}}const f=this._adjustIndex(o),m=this._lContainer;!function Ao(n,r,o,u){const l=10+u,f=o.length;u>0&&(o[l-1][4]=r),u<f-10?(r[4]=o[l],au(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const m=r[17];null!==m&&o!==m&&function zs(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(m,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,u,m,f);const C=Gu(f,m),S=u[11],F=ld(S,m[7]);return null!==F&&function qt(n,r,o,u,l,f){u[0]=l,u[6]=r,Mc(n,u,o,1,l,f)}(l,m[6],S,u,F,C),r.attachToViewContainerRef(),au(d_(m),f,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=X0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=As(this._lContainer,o);u&&(Hs(d_(this._lContainer),o),Hl(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=As(this._lContainer,o);return u&&null!=Hs(d_(this._lContainer),o)?new Hd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function X0(n){return n[8]}function d_(n){return n[8]||(n[8]=[])}function eE(n,r){let o;const u=r[n.index];if(Tr(u))o=u;else{let l;if(8&n.type)l=Er(u);else{const f=r[11];l=f.createComment("");const m=Wr(n,r);Ja(f,ld(f,m),l,function fg(n,r){return n.nextSibling(r)}(f,m),!1)}r[n.index]=o=tf(u,r,l,n),$c(r,o)}return new J0(o,n,r)}class h_{constructor(r){this.queryList=r,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,l=[];for(let f=0;f<u;f++){const m=o.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new f_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==lE(r,o).matches&&this.queries[o].setDirty()}}class tE{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class p_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(r,l);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new p_(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class g_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new g_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(r,o,_I(o,f)),this.matchTNodeWithReadOption(r,o,Yo(o,r,f,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Yo(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ec||l===Ey||l===dg&&4&o.type)this.addMatch(o.index,-2);else{const f=Yo(o,r,l,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function _I(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function wI(n,r,o,u){return-1===o?function EI(n,r){return 11&n.type?Xl(n,r):4&n.type?_y(n,r):null}(r,n):-2===o?function II(n,r,o){return o===ec?Xl(r,n):o===dg?_y(r,n):o===Ey?eE(r,n):void 0}(n,r,u):ha(n,n[1],o,r)}function nE(n,r,o,u){const l=r[19].queries[u];if(null===l.matches){const f=n.data,m=o.matches,C=[];for(let S=0;S<m.length;S+=2){const F=m[S];C.push(F<0?null:wI(r,f[F],m[S+1],o.metadata.read))}l.matches=C}return l.matches}function m_(n,r,o,u){const l=n.queries.getByIndex(o),f=l.matches;if(null!==f){const m=nE(n,r,l,o);for(let C=0;C<f.length;C+=2){const S=f[C];if(S>0)u.push(m[C/2]);else{const F=f[C+1],W=r[-S];for(let ie=10;ie<W.length;ie++){const Ce=W[ie];Ce[17]===Ce[3]&&m_(Ce[1],Ce,F,u)}if(null!==W[9]){const ie=W[9];for(let Ce=0;Ce<ie.length;Ce++){const Ge=ie[Ce];m_(Ge[1],Ge,F,u)}}}}}return u}function rE(n){const r=gt(),o=Un(),u=Oo();ki(u+1);const l=lE(o,u);if(n.dirty&&function vo(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const f=l.crossesNgTemplate?m_(o,r,u,[]):nE(o,r,l,u);n.reset(f,qf),n.notifyOnChanges()}return!0}return!1}function iE(n,r,o){const u=Un();u.firstCreatePass&&(uE(u,new tE(n,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),aE(u,gt(),r)}function sE(n,r,o,u){const l=Un();if(l.firstCreatePass){const f=Gr();uE(l,new tE(r,o,u),f.index),function CI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}aE(l,gt(),o)}function oE(){return function DI(n,r){return n[19].queries[r].queryList}(gt(),Oo())}function aE(n,r,o){const u=new c_(4==(4&o));Yh(n,r,u,u.destroy),null===r[19]&&(r[19]=new f_),r[19].queries.push(new h_(u))}function uE(n,r,o){null===n.queries&&(n.queries=new p_),n.queries.track(new g_(r,o))}function lE(n,r){return n.queries.getByIndex(r)}function Iy(...n){}const SE=new yr("Application Initializer");let Dy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Iy,this.reject=Iy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Zd(f))o.push(f);else if(mf(f)){const m=new Promise((C,S)=>{f.subscribe({complete:C,error:S})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Fi(SE,8))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ME=new yr("AppId",{providedIn:"root",factory:function xE(){return`${w_()}${w_()}${w_()}`}});function w_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RE=new yr("Platform Initializer"),zI=new yr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),PE=new yr("appBootstrapListener");let WI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cy=new yr("LocaleId",{providedIn:"root",factory:()=>Fl(Cy,bt.Optional|bt.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||oh}()}),qI=new yr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let YI=(()=>{class n{compileModuleSync(o){return new o_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=jo(Mt(o).declarations).reduce((m,C)=>{const S=q(C);return S&&m.push(new Gc(S)),m},[]);return new ZI(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function I_(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Mu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rl(!1),this.onMicrotaskEmpty=new Rl(!1),this.onStable=new Rl(!1),this.onError=new Rl(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function eD(){let n=Rn.requestAnimationFrame,r=Rn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rD(n){const r=()=>{!function nD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,C_(n),n.isCheckStableRunning=!0,D_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),C_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,m,C)=>{try{return kE(n),o.invokeTask(l,f,m,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),FE(n)}},onInvoke:(o,u,l,f,m,C,S)=>{try{return kE(n),o.invoke(l,f,m,C,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),FE(n)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,C_(n),D_(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mu.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(Mu.isInAngularZone())throw new Le(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,r,tD,Iy,Iy);try{return f.runTask(m,o,u)}finally{f.cancelTask(m)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const tD={};function D_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function C_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function FE(n){n._nesting--,D_(n)}class iD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rl,this.onMicrotaskEmpty=new Rl,this.onStable=new Rl,this.onError=new Rl}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,l){return r.apply(o,u)}}const LE=new yr(""),VE=new yr("");let b_,sD=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function oD(n){b_=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mu.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(Fi(Mu),Fi(UE),Fi(VE))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac}),n})(),UE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return b_?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xc=null;const BE=new yr("AllowMultipleToken"),T_=new yr("PlatformDestroyListeners");class lD{constructor(r,o){this.name=r,this.token=o}}function $E(n,r,o=[]){const u=`Platform: ${r}`,l=new yr(u);return(f=[])=>{let m=A_();if(!m||m.injector.get(BE,!1)){const C=[...o,...f,{provide:l,useValue:!0}];n?n(C):function cD(n){if(Xc&&!Xc.get(BE,!1))throw new Le(400,!1);Xc=n;const r=n.get(GE);(function jE(n){const r=n.get(RE,null);r&&r.forEach(o=>o())})(n)}(function HE(n=[],r){return eu.create({name:r,providers:[{provide:bh,useValue:"platform"},{provide:T_,useValue:new Set([()=>Xc=null])},...n]})}(C,u))}return function hD(n){const r=A_();if(!r)throw new Le(401,!1);return r}()}}function A_(){return Xc?.get(GE)??null}let GE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function WE(n,r){let o;return o="noop"===n?new iD:("zone.js"===n?void 0:n)||new Mu(r),o}(u?.ngZone,function zE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:Mu,useValue:l}];return l.run(()=>{const m=eu.create({providers:f,parent:this.injector,name:o.moduleType.name}),C=o.create(m),S=C.injector.get(Vc,null);if(!S)throw new Le(402,!1);return l.runOutsideAngular(()=>{const F=l.onError.subscribe({next:W=>{S.handleError(W)}});C.onDestroy(()=>{Ty(this._modules,C),F.unsubscribe()})}),function KE(n,r,o){try{const u=o();return Zd(u)?u.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(S,l,()=>{const F=C.injector.get(Dy);return F.runInitializers(),F.donePromise.then(()=>(function el(n){$e(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Cy,oh)||oh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const l=qE({},u);return function aD(n,r,o){const u=new o_(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(by);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Le(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(T_,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Fi(eu))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qE(n,r){return Array.isArray(r)?r.reduce(qE,n):{...n,...r}}let by=(()=>{class n{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new j.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),m=new j.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Mu.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ge.T)(f,m.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Ku;if(!this._injector.get(Dy).done)throw!l&&st(o),new Le(405,false);let m;m=l?o:this._injector.get(Jl).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const C=function uD(n){return n.isBoundToModule}(m)?void 0:this._injector.get(Sf),F=m.create(eu.NULL,[],u||m.selector,C),W=F.location.nativeElement,ie=F.injector.get(LE,null);return ie?.registerApplication(W),F.onDestroy(()=>{this.detachView(F.hostView),Ty(this.components,F),ie?.unregisterApplication(W)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new Le(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ty(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(PE,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ty(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Le(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Fi(Mu),Fi(Zl),Fi(Vc))},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ty(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let YE=!0,QE=!1;function pD(){return QE=!0,YE}function gD(){if(QE)throw new Error("Cannot enable prod mode after platform setup.");YE=!1}let mD=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,o){if(Ri(n)&&!o){const u=di(n.index,r);return new Hd(u,u)}return 47&n.type?new Hd(r[16],r):null}(Gr(),gt(),16==(16&n))}class tw{constructor(){}supports(r){return zd(r)}create(r){return new CD(r)}}const DD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DD}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const m=!u||o&&o.currentIndex<rw(u,l,f)?o:u,C=rw(m,l,f),S=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{f||(f=[]);const F=C-l,W=S-l;if(F!=W){for(let Ce=0;Ce<F;Ce++){const Ge=Ce<f.length?f[Ce]:f[Ce]=0,pt=Ge+Ce;W<=pt&&pt<F&&(f[Ce]=Ge+1)}f[m.previousIndex]=W-F}}C!==S&&r(m,C,S)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!zd(r))throw new Le(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,f,m,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)f=r[C],m=this._trackByFn(C,f),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,f,m,C)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,C),u=!0),o=o._next}else l=0,function jp(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[fc()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,C=>{m=this._trackByFn(l,C),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,C,m,l)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,l){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,f,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,f,l)):r=this._addAfter(new bD(o,u),f,l),r}_verifyReinsertion(r,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?r=this._reinsertAfter(f,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,f=r._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const l=null===o?this._itHead:o._next;return r._next=l,r._prev=o,null===l?this._itTail=r:l._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new nw),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class bD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class nw{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new TD,this.map.set(o,u)),u.add(r)}get(r,o){const l=this.map.get(r);return l?l.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rw(n,r,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+r+l}class iw{constructor(){}supports(r){return r instanceof Map||Wd(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Wd(r)))throw new Le(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,o);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const u=new SD(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class SD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sw(){return new P_([new tw])}let P_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||sw()),deps:[[n,new hi,new vr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Le(901,!1)}}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:sw}),n})();function ow(){return new N_([new iw])}let N_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||ow()),deps:[[n,new hi,new vr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Le(901,!1)}}return n.\u0275prov=Vt({token:n,providedIn:"root",factory:ow}),n})();const RD=$E(null,"core",[]);let PD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Fi(by))},n.\u0275mod=Ve({type:n}),n.\u0275inj=Zt({}),n})();function ND(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Bt,ze,k)=>{k.d(ze,{Wl:()=>We,Fj:()=>he,u5:()=>no,JJ:()=>_n,JL:()=>an,F:()=>Lr,On:()=>Te,YN:()=>go,wV:()=>lt,UX:()=>ro,Q7:()=>Xr,EJ:()=>oi,_Y:()=>Ie,Kr:()=>mo});var h=k(4650),L=k(6895),j=k(8996),ge=k(9751),de=k(4742),me=k(8421),we=k(7669),se=k(5403),xe=k(3268),ee=k(1810),Ee=k(4004);let Ze=(()=>{class O{constructor(x,Z){this._renderer=x,this._elementRef=Z,this.onChange=Qe=>{},this.onTouched=()=>{}}setProperty(x,Z){this._renderer.setProperty(this._elementRef.nativeElement,x,Z)}registerOnTouched(x){this.onTouched=x}registerOnChange(x){this.onChange=x}setDisabledState(x){this.setProperty("disabled",x)}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(h.Qsj),h.Y36(h.SBq))},O.\u0275dir=h.lG2({type:O}),O})(),je=(()=>{class O extends Ze{}return O.\u0275fac=function(){let R;return function(Z){return(R||(R=h.n5z(O)))(Z||O)}}(),O.\u0275dir=h.lG2({type:O,features:[h.qOj]}),O})();const Le=new h.OlP("NgValueAccessor"),Dt={provide:Le,useExisting:(0,h.Gpc)(()=>We),multi:!0};let We=(()=>{class O extends je{writeValue(x){this.setProperty("checked",x)}}return O.\u0275fac=function(){let R;return function(Z){return(R||(R=h.n5z(O)))(Z||O)}}(),O.\u0275dir=h.lG2({type:O,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(x,Z){1&x&&h.NdJ("change",function(en){return Z.onChange(en.target.checked)})("blur",function(){return Z.onTouched()})},features:[h._Bn([Dt]),h.qOj]}),O})();const Oe={provide:Le,useExisting:(0,h.Gpc)(()=>he),multi:!0},_t=new h.OlP("CompositionEventMode");let he=(()=>{class O extends Ze{constructor(x,Z,Qe){super(x,Z),this._compositionMode=Qe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tt(){const O=(0,L.q)()?(0,L.q)().getUserAgent():"";return/android (\d+)/.test(O.toLowerCase())}())}writeValue(x){this.setProperty("value",x??"")}_handleInput(x){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(x)}_compositionStart(){this._composing=!0}_compositionEnd(x){this._composing=!1,this._compositionMode&&this.onChange(x)}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(_t,8))},O.\u0275dir=h.lG2({type:O,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(x,Z){1&x&&h.NdJ("input",function(en){return Z._handleInput(en.target.value)})("blur",function(){return Z.onTouched()})("compositionstart",function(){return Z._compositionStart()})("compositionend",function(en){return Z._compositionEnd(en.target.value)})},features:[h._Bn([Oe]),h.qOj]}),O})();const ot=new h.OlP("NgValidators"),ve=new h.OlP("NgAsyncValidators");function Rt(O){return function Xe(O){return null==O||("string"==typeof O||Array.isArray(O))&&0===O.length}(O.value)?{required:!0}:null}function Ke(O){return null}function at(O){return null!=O}function dt(O){return(0,h.QGY)(O)?(0,j.D)(O):O}function Et(O){let R={};return O.forEach(x=>{R=null!=x?{...R,...x}:R}),0===Object.keys(R).length?null:R}function Vt(O,R){return R.map(x=>x(O))}function Zt(O){return O.map(R=>function St(O){return!O.validate}(R)?R:x=>R.validate(x))}function yn(O){return null!=O?function ln(O){if(!O)return null;const R=O.filter(at);return 0==R.length?null:function(x){return Et(Vt(x,R))}}(Zt(O)):null}function tr(O){return null!=O?function zn(O){if(!O)return null;const R=O.filter(at);return 0==R.length?null:function(x){return function ne(...O){const R=(0,we.jO)(O),{args:x,keys:Z}=(0,de.D)(O),Qe=new ge.y(en=>{const{length:$n}=x;if(!$n)return void en.complete();const ti=new Array($n);let Ki=$n,bi=$n;for(let Ds=0;Ds<$n;Ds++){let Ls=!1;(0,me.Xf)(x[Ds]).subscribe((0,se.x)(en,Eo=>{Ls||(Ls=!0,bi--),ti[Ds]=Eo},()=>Ki--,void 0,()=>{(!Ki||!Ls)&&(bi||en.next(Z?(0,ee.n)(Z,ti):ti),en.complete())}))}});return R?Qe.pipe((0,xe.Z)(R)):Qe}(Vt(x,R).map(dt)).pipe((0,Ee.U)(Et))}}(Zt(O)):null}function jn(O,R){return null===O?[R]:Array.isArray(O)?[...O,R]:[O,R]}function Wn(O){return O?Array.isArray(O)?O:[O]:[]}function Cr(O,R){return Array.isArray(O)?O.includes(R):O===R}function cr(O,R){const x=Wn(R);return Wn(O).forEach(Qe=>{Cr(x,Qe)||x.push(Qe)}),x}function bt(O,R){return Wn(R).filter(x=>!Cr(O,x))}class An{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=yn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=tr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,x){return!!this.control&&this.control.hasError(R,x)}getError(R,x){return this.control?this.control.getError(R,x):null}}class hn extends An{get formDirective(){return null}get path(){return null}}class Jn extends An{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jr{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _n=(()=>{class O extends jr{constructor(x){super(x)}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(Jn,2))},O.\u0275dir=h.lG2({type:O,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(x,Z){2&x&&h.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)},features:[h.qOj]}),O})(),an=(()=>{class O extends jr{constructor(x){super(x)}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(hn,10))},O.\u0275dir=h.lG2({type:O,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(x,Z){2&x&&h.ekj("ng-untouched",Z.isUntouched)("ng-touched",Z.isTouched)("ng-pristine",Z.isPristine)("ng-dirty",Z.isDirty)("ng-valid",Z.isValid)("ng-invalid",Z.isInvalid)("ng-pending",Z.isPending)("ng-submitted",Z.isSubmitted)},features:[h.qOj]}),O})();const Ve="VALID",It="INVALID",oe="PENDING",ue="DISABLED";function Y(O){return(st(O)?O.validators:O)||null}function q(O){return Array.isArray(O)?yn(O):O||null}function H(O,R){return(st(R)?R.asyncValidators:O)||null}function De(O){return Array.isArray(O)?tr(O):O||null}function st(O){return null!=O&&!Array.isArray(O)&&"object"==typeof O}class re{constructor(R,x){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=x,this._composedValidatorFn=q(this._rawValidators),this._composedAsyncValidatorFn=De(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===Ve}get invalid(){return this.status===It}get pending(){return this.status==oe}get disabled(){return this.status===ue}get enabled(){return this.status!==ue}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=q(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=De(R)}addValidators(R){this.setValidators(cr(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(cr(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(bt(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(bt(R,this._rawAsyncValidators))}hasValidator(R){return Cr(this._rawValidators,R)}hasAsyncValidator(R){return Cr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(x=>{x.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(x=>{x.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=oe,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const x=this._parentMarkedDirty(R.onlySelf);this.status=ue,this.errors=null,this._forEachChild(Z=>{Z.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:x}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(R={}){const x=this._parentMarkedDirty(R.onlySelf);this.status=Ve,this._forEachChild(Z=>{Z.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:x}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ve||this.status===oe)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(x=>x._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ue:Ve}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=oe,this._hasOwnPendingAsyncValidator=!0;const x=dt(this.asyncValidator(this));this._asyncValidationSubscription=x.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,x={}){this.errors=R,this._updateControlsErrors(!1!==x.emitEvent)}get(R){let x=R;return null==x||(Array.isArray(x)||(x=x.split(".")),0===x.length)?null:x.reduce((Z,Qe)=>Z&&Z._find(Qe),this)}getError(R,x){const Z=x?this.get(x):this;return Z&&Z.errors?Z.errors[R]:null}hasError(R,x){return!!this.getError(R,x)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?ue:this.errors?It:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oe)?oe:this._anyControlsHaveStatus(It)?It:Ve}_anyControlsHaveStatus(R){return this._anyControls(x=>x.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){st(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class ae extends re{constructor(R,x,Z){super(Y(x),H(Z,x)),this.controls=R,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,x){return this.controls[R]?this.controls[R]:(this.controls[R]=x,x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange),x)}addControl(R,x,Z={}){this.registerControl(R,x),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(R,x={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}setControl(R,x,Z={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],x&&this.registerControl(R,x),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,x={}){(function Yt(O,R,x){O._forEachChild((Z,Qe)=>{if(void 0===x[Qe])throw new h.vHH(1002,"")})})(this,0,R),Object.keys(R).forEach(Z=>{(function Mt(O,R,x){const Z=O.controls;if(!(R?Object.keys(Z):Z).length)throw new h.vHH(1e3,"");if(!Z[x])throw new h.vHH(1001,"")})(this,!0,Z),this.controls[Z].setValue(R[Z],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(R,x={}){null!=R&&(Object.keys(R).forEach(Z=>{const Qe=this.controls[Z];Qe&&Qe.patchValue(R[Z],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(R={},x={}){this._forEachChild((Z,Qe)=>{Z.reset(R[Qe],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this._reduceChildren({},(R,x,Z)=>(R[Z]=x.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(x,Z)=>!!Z._syncPendingControls()||x);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(x=>{const Z=this.controls[x];Z&&R(Z,x)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[x,Z]of Object.entries(this.controls))if(this.contains(x)&&R(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(x,Z,Qe)=>((Z.enabled||this.disabled)&&(x[Qe]=Z.value),x))}_reduceChildren(R,x){let Z=R;return this._forEachChild((Qe,en)=>{Z=x(Z,Qe,en)}),Z}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}function Me(O,R){pn(O,R),R.valueAccessor.writeValue(O.value),O.disabled&&R.valueAccessor.setDisabledState?.(!0),function Pn(O,R){R.valueAccessor.registerOnChange(x=>{O._pendingValue=x,O._pendingChange=!0,O._pendingDirty=!0,"change"===O.updateOn&&xn(O,R)})}(O,R),function Zr(O,R){const x=(Z,Qe)=>{R.valueAccessor.writeValue(Z),Qe&&R.viewToModelUpdate(Z)};O.registerOnChange(x),R._registerOnDestroy(()=>{O._unregisterOnChange(x)})}(O,R),function Pr(O,R){R.valueAccessor.registerOnTouched(()=>{O._pendingTouched=!0,"blur"===O.updateOn&&O._pendingChange&&xn(O,R),"submit"!==O.updateOn&&O.markAsTouched()})}(O,R),function ft(O,R){if(R.valueAccessor.setDisabledState){const x=Z=>{R.valueAccessor.setDisabledState(Z)};O.registerOnDisabledChange(x),R._registerOnDestroy(()=>{O._unregisterOnDisabledChange(x)})}}(O,R)}function ht(O,R){O.forEach(x=>{x.registerOnValidatorChange&&x.registerOnValidatorChange(R)})}function pn(O,R){const x=function Bn(O){return O._rawValidators}(O);null!==R.validator?O.setValidators(jn(x,R.validator)):"function"==typeof x&&O.setValidators([x]);const Z=function Gt(O){return O._rawAsyncValidators}(O);null!==R.asyncValidator?O.setAsyncValidators(jn(Z,R.asyncValidator)):"function"==typeof Z&&O.setAsyncValidators([Z]);const Qe=()=>O.updateValueAndValidity();ht(R._rawValidators,Qe),ht(R._rawAsyncValidators,Qe)}function xn(O,R){O._pendingDirty&&O.markAsDirty(),O.setValue(O._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(O._pendingValue),O._pendingChange=!1}const Nr={provide:hn,useExisting:(0,h.Gpc)(()=>Lr)},gi=(()=>Promise.resolve())();let Lr=(()=>{class O extends hn{constructor(x,Z){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new ae({},yn(x),tr(Z))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(x){gi.then(()=>{const Z=this._findContainer(x.path);x.control=Z.registerControl(x.name,x.control),Me(x.control,x),x.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(x)})}getControl(x){return this.form.get(x.path)}removeControl(x){gi.then(()=>{const Z=this._findContainer(x.path);Z&&Z.removeControl(x.name),this._directives.delete(x)})}addFormGroup(x){gi.then(()=>{const Z=this._findContainer(x.path),Qe=new ae({});(function Yr(O,R){pn(O,R)})(Qe,x),Z.registerControl(x.name,Qe),Qe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(x){gi.then(()=>{const Z=this._findContainer(x.path);Z&&Z.removeControl(x.name)})}getFormGroup(x){return this.form.get(x.path)}updateModel(x,Z){gi.then(()=>{this.form.get(x.path).setValue(Z)})}setValue(x){this.control.setValue(x)}onSubmit(x){return this.submitted=!0,function br(O,R){O._syncPendingControls(),R.forEach(x=>{const Z=x.control;"submit"===Z.updateOn&&Z._pendingChange&&(x.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(x),"dialog"===x?.target?.method}onReset(){this.resetForm()}resetForm(x){this.form.reset(x),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(x){return x.pop(),x.length?this.form.get(x):this.form}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(ot,10),h.Y36(ve,10))},O.\u0275dir=h.lG2({type:O,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(x,Z){1&x&&h.NdJ("submit",function(en){return Z.onSubmit(en)})("reset",function(){return Z.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Nr]),h.qOj]}),O})();function Tr(O,R){const x=O.indexOf(R);x>-1&&O.splice(x,1)}function Ps(O){return"object"==typeof O&&null!==O&&2===Object.keys(O).length&&"value"in O&&"disabled"in O}const Ri=class extends re{constructor(R=null,x,Z){super(Y(x),H(Z,x)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(x),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),st(x)&&(x.nonNullable||x.initialValueIsDefault)&&(this.defaultValue=Ps(R)?R.value:R)}setValue(R,x={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==x.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==x.emitViewToModelChange)),this.updateValueAndValidity(x)}patchValue(R,x={}){this.setValue(R,x)}reset(R=this.defaultValue,x={}){this._applyFormState(R),this.markAsPristine(x),this.markAsUntouched(x),this.setValue(this.value,x),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Tr(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Tr(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Ps(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},fo={provide:Jn,useExisting:(0,h.Gpc)(()=>Te)},po=(()=>Promise.resolve())();let Te=(()=>{class O extends Jn{constructor(x,Z,Qe,en,$n){super(),this._changeDetectorRef=$n,this.control=new Ri,this._registered=!1,this.update=new h.vpe,this._parent=x,this._setValidators(Z),this._setAsyncValidators(Qe),this.valueAccessor=function Bi(O,R){if(!R)return null;let x,Z,Qe;return Array.isArray(R),R.forEach(en=>{en.constructor===he?x=en:function pi(O){return Object.getPrototypeOf(O.constructor)===je}(en)?Z=en:Qe=en}),Qe||Z||x||null}(0,en)}ngOnChanges(x){if(this._checkForErrors(),!this._registered||"name"in x){if(this._registered&&(this._checkName(),this.formDirective)){const Z=x.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in x&&this._updateDisabled(x),function Zs(O,R){if(!O.hasOwnProperty("model"))return!1;const x=O.model;return!!x.isFirstChange()||!Object.is(R,x.currentValue)}(x,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Me(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(x){po.then(()=>{this.control.setValue(x,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(x){const Z=x.isDisabled.currentValue,Qe=0!==Z&&(0,h.D6c)(Z);po.then(()=>{Qe&&!this.control.disabled?this.control.disable():!Qe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(x){return this._parent?function tn(O,R){return[...R.path,O]}(x,this._parent):[x]}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(hn,9),h.Y36(ot,10),h.Y36(ve,10),h.Y36(Le,10),h.Y36(h.sBO,8))},O.\u0275dir=h.lG2({type:O,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([fo]),h.qOj,h.TTD]}),O})(),Ie=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275dir=h.lG2({type:O,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),O})();const ke={provide:Le,useExisting:(0,h.Gpc)(()=>lt),multi:!0};let lt=(()=>{class O extends je{writeValue(x){this.setProperty("value",x??"")}registerOnChange(x){this.onChange=Z=>{x(""==Z?null:parseFloat(Z))}}}return O.\u0275fac=function(){let R;return function(Z){return(R||(R=h.n5z(O)))(Z||O)}}(),O.\u0275dir=h.lG2({type:O,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(x,Z){1&x&&h.NdJ("input",function(en){return Z.onChange(en.target.value)})("blur",function(){return Z.onTouched()})},features:[h._Bn([ke]),h.qOj]}),O})(),qn=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=h.oAB({type:O}),O.\u0275inj=h.cJS({}),O})();const kr=new h.OlP("NgModelWithFormControlWarning"),Ni={provide:Le,useExisting:(0,h.Gpc)(()=>oi),multi:!0};function Js(O,R){return null==O?`${R}`:(R&&"object"==typeof R&&(R="Object"),`${O}: ${R}`.slice(0,50))}let oi=(()=>{class O extends je{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){this.value=x;const Qe=Js(this._getOptionId(x),x);this.setProperty("value",Qe)}registerOnChange(x){this.onChange=Z=>{this.value=this._getOptionValue(Z),x(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(x){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z),x))return Z;return null}_getOptionValue(x){const Z=function Hr(O){return O.split(":")[0]}(x);return this._optionMap.has(Z)?this._optionMap.get(Z):x}}return O.\u0275fac=function(){let R;return function(Z){return(R||(R=h.n5z(O)))(Z||O)}}(),O.\u0275dir=h.lG2({type:O,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(x,Z){1&x&&h.NdJ("change",function(en){return Z.onChange(en.target.value)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Ni]),h.qOj]}),O})(),go=(()=>{class O{constructor(x,Z,Qe){this._element=x,this._renderer=Z,this._select=Qe,this._select&&(this.id=this._select._registerOption())}set ngValue(x){null!=this._select&&(this._select._optionMap.set(this.id,x),this._setElementValue(Js(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._setElementValue(x),this._select&&this._select.writeValue(this._select.value)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(oi,9))},O.\u0275dir=h.lG2({type:O,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),O})();const Xs={provide:Le,useExisting:(0,h.Gpc)(()=>hs),multi:!0};function Ma(O,R){return null==O?`${R}`:("string"==typeof R&&(R=`'${R}'`),R&&"object"==typeof R&&(R="Object"),`${O}: ${R}`.slice(0,50))}let hs=(()=>{class O extends je{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){let Z;if(this.value=x,Array.isArray(x)){const Qe=x.map(en=>this._getOptionId(en));Z=(en,$n)=>{en._setSelected(Qe.indexOf($n.toString())>-1)}}else Z=(Qe,en)=>{Qe._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(x){this.onChange=Z=>{const Qe=[],en=Z.selectedOptions;if(void 0!==en){const $n=en;for(let ti=0;ti<$n.length;ti++){const bi=this._getOptionValue($n[ti].value);Qe.push(bi)}}else{const $n=Z.options;for(let ti=0;ti<$n.length;ti++){const Ki=$n[ti];if(Ki.selected){const bi=this._getOptionValue(Ki.value);Qe.push(bi)}}}this.value=Qe,x(Qe)}}_registerOption(x){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,x),Z}_getOptionId(x){for(const Z of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Z)._value,x))return Z;return null}_getOptionValue(x){const Z=function oa(O){return O.split(":")[0]}(x);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:x}}return O.\u0275fac=function(){let R;return function(Z){return(R||(R=h.n5z(O)))(Z||O)}}(),O.\u0275dir=h.lG2({type:O,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(x,Z){1&x&&h.NdJ("change",function(en){return Z.onChange(en.target)})("blur",function(){return Z.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Xs]),h.qOj]}),O})(),mo=(()=>{class O{constructor(x,Z,Qe){this._element=x,this._renderer=Z,this._select=Qe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(x){null!=this._select&&(this._value=x,this._setElementValue(Ma(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._select?(this._value=x,this._setElementValue(Ma(this.id,x)),this._select.writeValue(this._select.value)):this._setElementValue(x)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}_setSelected(x){this._renderer.setProperty(this._element.nativeElement,"selected",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return O.\u0275fac=function(x){return new(x||O)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(hs,9))},O.\u0275dir=h.lG2({type:O,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),O})(),Gi=(()=>{class O{constructor(){this._validator=Ke}ngOnChanges(x){if(this.inputName in x){const Z=this.normalizeInput(x[this.inputName].currentValue);this._enabled=this.enabled(Z),this._validator=this._enabled?this.createValidator(Z):Ke,this._onChange&&this._onChange()}}validate(x){return this._validator(x)}registerOnValidatorChange(x){this._onChange=x}enabled(x){return null!=x}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275dir=h.lG2({type:O,features:[h.TTD]}),O})();const Po={provide:ot,useExisting:(0,h.Gpc)(()=>Xr),multi:!0};let Xr=(()=>{class O extends Gi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=x=>Rt}enabled(x){return x}}return O.\u0275fac=function(){let R;return function(Z){return(R||(R=h.n5z(O)))(Z||O)}}(),O.\u0275dir=h.lG2({type:O,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(x,Z){2&x&&h.uIk("required",Z._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Po]),h.qOj]}),O})(),Un=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=h.oAB({type:O}),O.\u0275inj=h.cJS({imports:[qn]}),O})(),no=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=h.oAB({type:O}),O.\u0275inj=h.cJS({imports:[Un]}),O})(),ro=(()=>{class O{static withConfig(x){return{ngModule:O,providers:[{provide:kr,useValue:x.warnOnNgModelWithFormControl}]}}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=h.oAB({type:O}),O.\u0275inj=h.cJS({imports:[Un]}),O})()},1481:(Bt,ze,k)=>{k.d(ze,{Dx:()=>_n,b2:()=>hn,q6:()=>Cr});var h=k(6895),L=k(4650);class j extends h.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ge extends j{static makeCurrent(){(0,h.HT)(new ge)}onAndCancel(ae,X,Ae){return ae.addEventListener(X,Ae,!1),()=>{ae.removeEventListener(X,Ae,!1)}}dispatchEvent(ae,X){ae.dispatchEvent(X)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,X){return(X=X||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,X){return"window"===X?window:"document"===X?ae:"body"===X?ae.body:null}getBaseHref(ae){const X=function me(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==X?null:function se(re){we=we||document.createElement("a"),we.setAttribute("href",re);const ae=we.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(X)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,h.Mx)(document.cookie,ae)}}let we,de=null;const xe=new L.OlP("TRANSITION_ID"),ne=[{provide:L.ip1,useFactory:function ee(re,ae,X){return()=>{X.get(L.CZH).donePromise.then(()=>{const Ae=(0,h.q)(),He=ae.querySelectorAll(`style[ng-transition="${re}"]`);for(let Pt=0;Pt<He.length;Pt++)Ae.remove(He[Pt])})}},deps:[xe,h.K0,L.zs3],multi:!0}];let Ze=(()=>{class re{build(){return new XMLHttpRequest}}return re.\u0275fac=function(X){return new(X||re)},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})();const je=new L.OlP("EventManagerPlugins");let Le=(()=>{class re{constructor(X,Ae){this._zone=Ae,this._eventNameToPlugin=new Map,X.forEach(He=>He.manager=this),this._plugins=X.slice().reverse()}addEventListener(X,Ae,He){return this._findPluginFor(Ae).addEventListener(X,Ae,He)}addGlobalEventListener(X,Ae,He){return this._findPluginFor(Ae).addGlobalEventListener(X,Ae,He)}getZone(){return this._zone}_findPluginFor(X){const Ae=this._eventNameToPlugin.get(X);if(Ae)return Ae;const He=this._plugins;for(let Pt=0;Pt<He.length;Pt++){const tn=He[Pt];if(tn.supports(X))return this._eventNameToPlugin.set(X,tn),tn}throw new Error(`No event manager plugin found for event ${X}`)}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(je),L.LFG(L.R0b))},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})();class Dt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,X,Ae){const He=(0,h.q)().getGlobalEventTarget(this._doc,ae);if(!He)throw new Error(`Unsupported event target ${He} for event ${X}`);return this.addEventListener(He,X,Ae)}}let We=(()=>{class re{constructor(){this._stylesSet=new Set}addStyles(X){const Ae=new Set;X.forEach(He=>{this._stylesSet.has(He)||(this._stylesSet.add(He),Ae.add(He))}),this.onStylesAdded(Ae)}onStylesAdded(X){}getAllStyles(){return Array.from(this._stylesSet)}}return re.\u0275fac=function(X){return new(X||re)},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})(),Oe=(()=>{class re extends We{constructor(X){super(),this._doc=X,this._hostNodes=new Map,this._hostNodes.set(X.head,[])}_addStylesToHost(X,Ae,He){X.forEach(Pt=>{const tn=this._doc.createElement("style");tn.textContent=Pt,He.push(Ae.appendChild(tn))})}addHost(X){const Ae=[];this._addStylesToHost(this._stylesSet,X,Ae),this._hostNodes.set(X,Ae)}removeHost(X){const Ae=this._hostNodes.get(X);Ae&&Ae.forEach(Tt),this._hostNodes.delete(X)}onStylesAdded(X){this._hostNodes.forEach((Ae,He)=>{this._addStylesToHost(X,He,Ae)})}ngOnDestroy(){this._hostNodes.forEach(X=>X.forEach(Tt))}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(h.K0))},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})();function Tt(re){(0,h.q)().remove(re)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},he=/%COMP%/g;function jt(re,ae,X){for(let Ae=0;Ae<ae.length;Ae++){let He=ae[Ae];Array.isArray(He)?jt(re,He,X):(He=He.replace(he,re),X.push(He))}return X}function yt(re){return ae=>{if("__ngUnwrap__"===ae)return re;!1===re(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let Rt=(()=>{class re{constructor(X,Ae,He){this.eventManager=X,this.sharedStylesHost=Ae,this.appId=He,this.rendererByCompId=new Map,this.defaultRenderer=new Dr(X)}createRenderer(X,Ae){if(!X||!Ae)return this.defaultRenderer;switch(Ae.encapsulation){case L.ifc.Emulated:{let He=this.rendererByCompId.get(Ae.id);return He||(He=new $e(this.eventManager,this.sharedStylesHost,Ae,this.appId),this.rendererByCompId.set(Ae.id,He)),He.applyToHost(X),He}case 1:case L.ifc.ShadowDom:return new Ke(this.eventManager,this.sharedStylesHost,X,Ae);default:if(!this.rendererByCompId.has(Ae.id)){const He=jt(Ae.id,Ae.styles,[]);this.sharedStylesHost.addStyles(He),this.rendererByCompId.set(Ae.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(Le),L.LFG(Oe),L.LFG(L.AFp))},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})();class Dr{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,X){return X?document.createElementNS(_t[X]||X,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,X){(Fe(ae)?ae.content:ae).appendChild(X)}insertBefore(ae,X,Ae){ae&&(Fe(ae)?ae.content:ae).insertBefore(X,Ae)}removeChild(ae,X){ae&&ae.removeChild(X)}selectRootElement(ae,X){let Ae="string"==typeof ae?document.querySelector(ae):ae;if(!Ae)throw new Error(`The selector "${ae}" did not match any elements`);return X||(Ae.textContent=""),Ae}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,X,Ae,He){if(He){X=He+":"+X;const Pt=_t[He];Pt?ae.setAttributeNS(Pt,X,Ae):ae.setAttribute(X,Ae)}else ae.setAttribute(X,Ae)}removeAttribute(ae,X,Ae){if(Ae){const He=_t[Ae];He?ae.removeAttributeNS(He,X):ae.removeAttribute(`${Ae}:${X}`)}else ae.removeAttribute(X)}addClass(ae,X){ae.classList.add(X)}removeClass(ae,X){ae.classList.remove(X)}setStyle(ae,X,Ae,He){He&(L.JOm.DashCase|L.JOm.Important)?ae.style.setProperty(X,Ae,He&L.JOm.Important?"important":""):ae.style[X]=Ae}removeStyle(ae,X,Ae){Ae&L.JOm.DashCase?ae.style.removeProperty(X):ae.style[X]=""}setProperty(ae,X,Ae){ae[X]=Ae}setValue(ae,X){ae.nodeValue=X}listen(ae,X,Ae){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,X,yt(Ae)):this.eventManager.addEventListener(ae,X,yt(Ae))}}function Fe(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class $e extends Dr{constructor(ae,X,Ae,He){super(ae),this.component=Ae;const Pt=jt(He+"-"+Ae.id,Ae.styles,[]);X.addStyles(Pt),this.contentAttr=function ve(re){return"_ngcontent-%COMP%".replace(he,re)}(He+"-"+Ae.id),this.hostAttr=function wt(re){return"_nghost-%COMP%".replace(he,re)}(He+"-"+Ae.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,X){const Ae=super.createElement(ae,X);return super.setAttribute(Ae,this.contentAttr,""),Ae}}class Ke extends Dr{constructor(ae,X,Ae,He){super(ae),this.sharedStylesHost=X,this.hostEl=Ae,this.shadowRoot=Ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Pt=jt(He.id,He.styles,[]);for(let tn=0;tn<Pt.length;tn++){const Me=document.createElement("style");Me.textContent=Pt[tn],this.shadowRoot.appendChild(Me)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,X){return super.appendChild(this.nodeOrShadowRoot(ae),X)}insertBefore(ae,X,Ae){return super.insertBefore(this.nodeOrShadowRoot(ae),X,Ae)}removeChild(ae,X){return super.removeChild(this.nodeOrShadowRoot(ae),X)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let at=(()=>{class re extends Dt{constructor(X){super(X)}supports(X){return!0}addEventListener(X,Ae,He){return X.addEventListener(Ae,He,!1),()=>this.removeEventListener(X,Ae,He)}removeEventListener(X,Ae,He){return X.removeEventListener(Ae,He)}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(h.K0))},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})();const dt=["alt","control","meta","shift"],Et={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vt={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let St=(()=>{class re extends Dt{constructor(X){super(X)}supports(X){return null!=re.parseEventName(X)}addEventListener(X,Ae,He){const Pt=re.parseEventName(Ae),tn=re.eventCallback(Pt.fullKey,He,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,h.q)().onAndCancel(X,Pt.domEventName,tn))}static parseEventName(X){const Ae=X.toLowerCase().split("."),He=Ae.shift();if(0===Ae.length||"keydown"!==He&&"keyup"!==He)return null;const Pt=re._normalizeKey(Ae.pop());let tn="",Me=Ae.indexOf("code");if(Me>-1&&(Ae.splice(Me,1),tn="code."),dt.forEach(ht=>{const ft=Ae.indexOf(ht);ft>-1&&(Ae.splice(ft,1),tn+=ht+".")}),tn+=Pt,0!=Ae.length||0===Pt.length)return null;const Re={};return Re.domEventName=He,Re.fullKey=tn,Re}static matchEventFullKeyCode(X,Ae){let He=Et[X.key]||X.key,Pt="";return Ae.indexOf("code.")>-1&&(He=X.code,Pt="code."),!(null==He||!He)&&(He=He.toLowerCase()," "===He?He="space":"."===He&&(He="dot"),dt.forEach(tn=>{tn!==He&&(0,Vt[tn])(X)&&(Pt+=tn+".")}),Pt+=He,Pt===Ae)}static eventCallback(X,Ae,He){return Pt=>{re.matchEventFullKeyCode(Pt,X)&&He.runGuarded(()=>Ae(Pt))}}static _normalizeKey(X){return"esc"===X?"escape":X}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(h.K0))},re.\u0275prov=L.Yz7({token:re,factory:re.\u0275fac}),re})();const Cr=(0,L.eFA)(L._c5,"browser",[{provide:L.Lbi,useValue:h.bD},{provide:L.g9A,useValue:function jn(){ge.makeCurrent()},multi:!0},{provide:h.K0,useFactory:function Gt(){return(0,L.RDi)(document),document},deps:[]}]),cr=new L.OlP(""),bt=[{provide:L.rWj,useClass:class Ee{addToWindow(ae){L.dqk.getAngularTestability=(Ae,He=!0)=>{const Pt=ae.findTestabilityInTree(Ae,He);if(null==Pt)throw new Error("Could not find testability for element.");return Pt},L.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),L.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),L.dqk.frameworkStabilizers||(L.dqk.frameworkStabilizers=[]),L.dqk.frameworkStabilizers.push(Ae=>{const He=L.dqk.getAllAngularTestabilities();let Pt=He.length,tn=!1;const Me=function(Re){tn=tn||Re,Pt--,0==Pt&&Ae(tn)};He.forEach(function(Re){Re.whenStable(Me)})})}findTestabilityInTree(ae,X,Ae){return null==X?null:ae.getTestability(X)??(Ae?(0,h.q)().isShadowRoot(X)?this.findTestabilityInTree(ae,X.host,!0):this.findTestabilityInTree(ae,X.parentElement,!0):null)}},deps:[]},{provide:L.lri,useClass:L.dDg,deps:[L.R0b,L.eoX,L.rWj]},{provide:L.dDg,useClass:L.dDg,deps:[L.R0b,L.eoX,L.rWj]}],An=[{provide:L.zSh,useValue:"root"},{provide:L.qLn,useFactory:function Bn(){return new L.qLn},deps:[]},{provide:je,useClass:at,multi:!0,deps:[h.K0,L.R0b,L.Lbi]},{provide:je,useClass:St,multi:!0,deps:[h.K0]},{provide:Rt,useClass:Rt,deps:[Le,Oe,L.AFp]},{provide:L.FYo,useExisting:Rt},{provide:We,useExisting:Oe},{provide:Oe,useClass:Oe,deps:[h.K0]},{provide:Le,useClass:Le,deps:[je,L.R0b]},{provide:h.JF,useClass:Ze,deps:[]},[]];let hn=(()=>{class re{constructor(X){}static withServerTransition(X){return{ngModule:re,providers:[{provide:L.AFp,useValue:X.appId},{provide:xe,useExisting:L.AFp},ne]}}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(cr,12))},re.\u0275mod=L.oAB({type:re}),re.\u0275inj=L.cJS({providers:[...An,...bt],imports:[h.ez,L.hGG]}),re})(),_n=(()=>{class re{constructor(X){this._doc=X}getTitle(){return this._doc.title}setTitle(X){this._doc.title=X||""}}return re.\u0275fac=function(X){return new(X||re)(L.LFG(h.K0))},re.\u0275prov=L.Yz7({token:re,factory:function(X){let Ae=null;return Ae=X?new X:function dr(){return new _n((0,L.LFG)(h.K0))}(),Ae},providedIn:"root"}),re})();typeof window<"u"&&window},9051:(Bt,ze,k)=>{k.d(ze,{F0:()=>rn,rH:()=>Rr,yS:()=>dn,Bz:()=>Ra,lC:()=>yo});var h=k(4650),L=k(8996),j=k(9646),ge=k(7579);class de extends ge.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const y=super._subscribe(E);return!y.closed&&E.next(this._value),y}getValue(){const{hasError:E,thrownError:y,_value:T}=this;if(E)throw y;return this._throwIfClosed(),T}next(E){super.next(this._value=E)}}var me=k(6805),we=k(9751),se=k(4742),xe=k(4671),ee=k(3268),ne=k(7669),Ee=k(1810),Ze=k(5403),je=k(9672);function Le(...v){const E=(0,ne.yG)(v),y=(0,ne.jO)(v),{args:T,keys:P}=(0,se.D)(v);if(0===T.length)return(0,L.D)([],E);const G=new we.y(function Dt(v,E,y=xe.y){return T=>{We(E,()=>{const{length:P}=v,G=new Array(P);let le=P,fe=P;for(let nt=0;nt<P;nt++)We(E,()=>{const Lt=(0,L.D)(v[nt],E);let Mn=!1;Lt.subscribe((0,Ze.x)(T,sn=>{G[nt]=sn,Mn||(Mn=!0,fe--),fe||T.next(y(G.slice()))},()=>{--le||T.complete()}))},T)},T)}}(T,E,P?le=>(0,Ee.n)(P,le):xe.y));return y?G.pipe((0,ee.Z)(y)):G}function We(v,E,y){v?(0,je.f)(y,v,E):E()}var Oe=k(7272),Tt=k(8421);function _t(v){return new we.y(E=>{(0,Tt.Xf)(v()).subscribe(E)})}var he=k(9635),rt=k(576);function Xe(v,E){const y=(0,rt.m)(v)?v:()=>v,T=P=>P.error(y());return new we.y(E?P=>E.schedule(T,0,P):T)}var Ne=k(515),ot=k(727),ve=k(4482);function wt(){return(0,ve.e)((v,E)=>{let y=null;v._refCount++;const T=(0,Ze.x)(E,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(y=null);const P=v._connection,G=y;y=null,P&&(!G||P===G)&&P.unsubscribe(),E.unsubscribe()});v.subscribe(T),T.closed||(y=v.connect())})}class jt extends we.y{constructor(E,y){super(),this.source=E,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,ve.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new ot.w0;const y=this.getSubject();E.add(this.source.subscribe((0,Ze.x)(y,void 0,()=>{this._teardown(),y.complete()},T=>{this._teardown(),y.error(T)},()=>this._teardown()))),E.closed&&(this._connection=null,E=ot.w0.EMPTY)}return E}refCount(){return wt()(this)}}var yt=k(6895),xt=k(4004),Rt=k(3900),Dr=k(5698),Ye=k(8675),Pe=k(9300),Fe=k(5577),$e=k(590);function Ke(v,E){return(0,rt.m)(E)?(0,Fe.z)(v,E,1):(0,Fe.z)(v,1)}var at=k(8505);function dt(v){return(0,ve.e)((E,y)=>{let G,T=null,P=!1;T=E.subscribe((0,Ze.x)(y,void 0,void 0,le=>{G=(0,Tt.Xf)(v(le,dt(v)(E))),T?(T.unsubscribe(),T=null,G.subscribe(y)):P=!0})),P&&(T.unsubscribe(),T=null,G.subscribe(y))})}var Et=k(5026);function Vt(v){return v<=0?()=>Ne.E:(0,ve.e)((E,y)=>{let T=[];E.subscribe((0,Ze.x)(y,P=>{T.push(P),v<T.length&&T.shift()},()=>{for(const P of T)y.next(P);y.complete()},void 0,()=>{T=null}))})}var St=k(8068),Zt=k(6590);function ln(v,E){const y=arguments.length>=2;return T=>T.pipe(v?(0,Pe.h)((P,G)=>v(P,G,T)):xe.y,Vt(1),y?(0,Zt.d)(E):(0,St.T)(()=>new me.K))}function tr(v){return(0,ve.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(v)}})}var jn=k(8189),Bn=k(1481);const Gt="primary",Wn=Symbol("RouteTitle");class Cr{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function cr(v){return new Cr(v)}function bt(v,E,y){const T=y.path.split("/");if(T.length>v.length||"full"===y.pathMatch&&(E.hasChildren()||T.length<v.length))return null;const P={};for(let G=0;G<T.length;G++){const le=T[G],fe=v[G];if(le.startsWith(":"))P[le.substring(1)]=fe;else if(le!==fe.path)return null}return{consumed:v.slice(0,T.length),posParams:P}}function hn(v,E){const y=v?Object.keys(v):void 0,T=E?Object.keys(E):void 0;if(!y||!T||y.length!=T.length)return!1;let P;for(let G=0;G<y.length;G++)if(P=y[G],!Jn(v[P],E[P]))return!1;return!0}function Jn(v,E){if(Array.isArray(v)&&Array.isArray(E)){if(v.length!==E.length)return!1;const y=[...v].sort(),T=[...E].sort();return y.every((P,G)=>T[G]===P)}return v===E}function jr(v){return Array.prototype.concat.apply([],v)}function $r(v){return v.length>0?v[v.length-1]:null}function _n(v,E){for(const y in v)v.hasOwnProperty(y)&&E(v[y],y)}function an(v){return(0,h.CqO)(v)?v:(0,h.QGY)(v)?(0,L.D)(Promise.resolve(v)):(0,j.of)(v)}const Rn={exact:function un(v,E,y){if(!tt(v.segments,E.segments)||!Sn(v.segments,E.segments,y)||v.numberOfChildren!==E.numberOfChildren)return!1;for(const T in E.children)if(!v.children[T]||!un(v.children[T],E.children[T],y))return!1;return!0},subset:wn},hr={exact:function fr(v,E){return hn(v,E)},subset:function gr(v,E){return Object.keys(E).length<=Object.keys(v).length&&Object.keys(E).every(y=>Jn(v[y],E[y]))},ignored:()=>!0};function nr(v,E,y){return Rn[y.paths](v.root,E.root,y.matrixParams)&&hr[y.queryParams](v.queryParams,E.queryParams)&&!("exact"===y.fragment&&v.fragment!==E.fragment)}function wn(v,E,y){return zr(v,E,E.segments,y)}function zr(v,E,y,T){if(v.segments.length>y.length){const P=v.segments.slice(0,y.length);return!(!tt(P,y)||E.hasChildren()||!Sn(P,y,T))}if(v.segments.length===y.length){if(!tt(v.segments,y)||!Sn(v.segments,y,T))return!1;for(const P in E.children)if(!v.children[P]||!wn(v.children[P],E.children[P],T))return!1;return!0}{const P=y.slice(0,v.segments.length),G=y.slice(v.segments.length);return!!(tt(v.segments,P)&&Sn(v.segments,P,T)&&v.children[Gt])&&zr(v.children[Gt],E,G,T)}}function Sn(v,E,y){return E.every((T,P)=>hr[y](v[P].parameters,T.parameters))}class bn{constructor(E,y,T){this.root=E,this.queryParams=y,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return It.serialize(this)}}class Nt{constructor(E,y){this.segments=E,this.children=y,this.parent=null,_n(y,(T,P)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oe(this)}}class rr{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return Yt(this)}}function tt(v,E){return v.length===E.length&&v.every((y,T)=>y.path===E[T].path)}let ce=(()=>{class v{}return v.\u0275fac=function(y){return new(y||v)},v.\u0275prov=h.Yz7({token:v,factory:function(){return new Ve},providedIn:"root"}),v})();class Ve{parse(E){const y=new Re(E);return new bn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${ue(E.root,!0)}`,T=function ae(v){const E=Object.keys(v).map(y=>{const T=v[y];return Array.isArray(T)?T.map(P=>`${q(y)}=${q(P)}`).join("&"):`${q(y)}=${q(T)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${T}${"string"==typeof E.fragment?`#${function H(v){return encodeURI(v)}(E.fragment)}`:""}`}}const It=new Ve;function oe(v){return v.segments.map(E=>Yt(E)).join("/")}function ue(v,E){if(!v.hasChildren())return oe(v);if(E){const y=v.children[Gt]?ue(v.children[Gt],!1):"",T=[];return _n(v.children,(P,G)=>{G!==Gt&&T.push(`${G}:${ue(P,!1)}`)}),T.length>0?`${y}(${T.join("//")})`:y}{const y=function K(v,E){let y=[];return _n(v.children,(T,P)=>{P===Gt&&(y=y.concat(E(T,P)))}),_n(v.children,(T,P)=>{P!==Gt&&(y=y.concat(E(T,P)))}),y}(v,(T,P)=>P===Gt?[ue(v.children[Gt],!1)]:[`${P}:${ue(T,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Gt]?`${oe(v)}/${y[0]}`:`${oe(v)}/(${y.join("//")})`}}function Y(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(v){return Y(v).replace(/%3B/gi,";")}function De(v){return Y(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function st(v){return decodeURIComponent(v)}function Mt(v){return st(v.replace(/\+/g,"%20"))}function Yt(v){return`${De(v.path)}${function re(v){return Object.keys(v).map(E=>`;${De(E)}=${De(v[E])}`).join("")}(v.parameters)}`}const X=/^[^\/()?;=#]+/;function Ae(v){const E=v.match(X);return E?E[0]:""}const He=/^[^=?&#]+/,tn=/^[^&#]+/;class Re{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(T[Gt]=new Nt(E,y)),T}parseSegment(){const E=Ae(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(E),new rr(st(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=Ae(this.remaining);if(!y)return;this.capture(y);let T="";if(this.consumeOptional("=")){const P=Ae(this.remaining);P&&(T=P,this.capture(T))}E[st(y)]=st(T)}parseQueryParam(E){const y=function Pt(v){const E=v.match(He);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let T="";if(this.consumeOptional("=")){const le=function Me(v){const E=v.match(tn);return E?E[0]:""}(this.remaining);le&&(T=le,this.capture(T))}const P=Mt(y),G=Mt(T);if(E.hasOwnProperty(P)){let le=E[P];Array.isArray(le)||(le=[le],E[P]=le),le.push(G)}else E[P]=G}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=Ae(this.remaining),P=this.remaining[T.length];if("/"!==P&&")"!==P&&";"!==P)throw new h.vHH(4010,!1);let G;T.indexOf(":")>-1?(G=T.slice(0,T.indexOf(":")),this.capture(G),this.capture(":")):E&&(G=Gt);const le=this.parseChildren();y[G]=1===Object.keys(le).length?le[Gt]:new Nt([],le),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new h.vHH(4011,!1)}}function ht(v){return v.segments.length>0?new Nt([],{[Gt]:v}):v}function ft(v){const E={};for(const T of Object.keys(v.children)){const G=ft(v.children[T]);(G.segments.length>0||G.hasChildren())&&(E[T]=G)}return function pn(v){if(1===v.numberOfChildren&&v.children[Gt]){const E=v.children[Gt];return new Nt(v.segments.concat(E.segments),E.children)}return v}(new Nt(v.segments,E))}function vn(v){return v instanceof bn}function Yr(v,E,y,T,P){if(0===y.length)return Vi(E.root,E.root,E.root,T,P);const G=function Zs(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new Ui(!0,0,v);let E=0,y=!1;const T=v.reduce((P,G,le)=>{if("object"==typeof G&&null!=G){if(G.outlets){const fe={};return _n(G.outlets,(nt,Lt)=>{fe[Lt]="string"==typeof nt?nt.split("/"):nt}),[...P,{outlets:fe}]}if(G.segmentPath)return[...P,G.segmentPath]}return"string"!=typeof G?[...P,G]:0===le?(G.split("/").forEach((fe,nt)=>{0==nt&&"."===fe||(0==nt&&""===fe?y=!0:".."===fe?E++:""!=fe&&P.push(fe))}),P):[...P,G]},[]);return new Ui(y,E,T)}(y);return G.toRoot()?Vi(E.root,E.root,new Nt([],{}),T,P):function le(nt){const Lt=function Bi(v,E,y,T){if(v.isAbsolute)return new pi(E.root,!0,0);if(-1===T)return new pi(y,y===E.root,0);return function Di(v,E,y){let T=v,P=E,G=y;for(;G>P;){if(G-=P,T=T.parent,!T)throw new h.vHH(4005,!1);P=T.segments.length}return new pi(T,!1,P-G)}(y,T+(Qr(v.commands[0])?0:1),v.numberOfDoubleDots)}(G,E,v.snapshot?._urlSegment,nt),Mn=Lt.processChildren?gi(Lt.segmentGroup,Lt.index,G.commands):Nr(Lt.segmentGroup,Lt.index,G.commands);return Vi(E.root,Lt.segmentGroup,Mn,T,P)}(v.snapshot?._lastPathIndex)}function Qr(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function Fr(v){return"object"==typeof v&&null!=v&&v.outlets}function Vi(v,E,y,T,P){let le,G={};T&&_n(T,(nt,Lt)=>{G[Lt]=Array.isArray(nt)?nt.map(Mn=>`${Mn}`):`${nt}`}),le=v===E?y:Vn(v,E,y);const fe=ht(ft(le));return new bn(fe,G,P)}function Vn(v,E,y){const T={};return _n(v.children,(P,G)=>{T[G]=P===E?y:Vn(P,E,y)}),new Nt(v.segments,T)}class Ui{constructor(E,y,T){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=T,E&&T.length>0&&Qr(T[0]))throw new h.vHH(4003,!1);const P=T.find(Fr);if(P&&P!==$r(T))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pi{constructor(E,y,T){this.segmentGroup=E,this.processChildren=y,this.index=T}}function Nr(v,E,y){if(v||(v=new Nt([],{})),0===v.segments.length&&v.hasChildren())return gi(v,E,y);const T=function Lr(v,E,y){let T=0,P=E;const G={match:!1,pathIndex:0,commandIndex:0};for(;P<v.segments.length;){if(T>=y.length)return G;const le=v.segments[P],fe=y[T];if(Fr(fe))break;const nt=`${fe}`,Lt=T<y.length-1?y[T+1]:null;if(P>0&&void 0===nt)break;if(nt&&Lt&&"object"==typeof Lt&&void 0===Lt.outlets){if(!Ns(nt,Lt,le))return G;T+=2}else{if(!Ns(nt,{},le))return G;T++}P++}return{match:!0,pathIndex:P,commandIndex:T}}(v,E,y),P=y.slice(T.commandIndex);if(T.match&&T.pathIndex<v.segments.length){const G=new Nt(v.segments.slice(0,T.pathIndex),{});return G.children[Gt]=new Nt(v.segments.slice(T.pathIndex),v.children),gi(G,0,P)}return T.match&&0===P.length?new Nt(v.segments,{}):T.match&&!v.hasChildren()?Tr(v,E,y):T.match?gi(v,0,P):Tr(v,E,y)}function gi(v,E,y){if(0===y.length)return new Nt(v.segments,{});{const T=function us(v){return Fr(v[0])?v[0].outlets:{[Gt]:v}}(y),P={};return _n(T,(G,le)=>{"string"==typeof G&&(G=[G]),null!==G&&(P[le]=Nr(v.children[le],E,G))}),_n(v.children,(G,le)=>{void 0===T[le]&&(P[le]=G)}),new Nt(v.segments,P)}}function Tr(v,E,y){const T=v.segments.slice(0,E);let P=0;for(;P<y.length;){const G=y[P];if(Fr(G)){const nt=Ps(G.outlets);return new Nt(T,nt)}if(0===P&&Qr(y[0])){T.push(new rr(v.segments[E].path,Ri(y[0]))),P++;continue}const le=Fr(G)?G.outlets[Gt]:`${G}`,fe=P<y.length-1?y[P+1]:null;le&&fe&&Qr(fe)?(T.push(new rr(le,Ri(fe))),P+=2):(T.push(new rr(le,{})),P++)}return new Nt(T,{})}function Ps(v){const E={};return _n(v,(y,T)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[T]=Tr(new Nt([],{}),0,y))}),E}function Ri(v){const E={};return _n(v,(y,T)=>E[T]=`${y}`),E}function Ns(v,E,y){return v==y.path&&hn(E,y.parameters)}class Or{constructor(E,y){this.id=E,this.url=y}}class ji extends Or{constructor(E,y,T="imperative",P=null){super(E,y),this.type=0,this.navigationTrigger=T,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ls extends Or{constructor(E,y,T){super(E,y),this.urlAfterRedirects=T,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xo extends Or{constructor(E,y,T,P){super(E,y),this.reason=T,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ys extends Or{constructor(E,y,T,P){super(E,y),this.error=T,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ha extends Or{constructor(E,y,T,P){super(E,y),this.urlAfterRedirects=T,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends Or{constructor(E,y,T,P){super(E,y),this.urlAfterRedirects=T,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ho extends Or{constructor(E,y,T,P,G){super(E,y),this.urlAfterRedirects=T,this.state=P,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fo extends Or{constructor(E,y,T,P){super(E,y),this.urlAfterRedirects=T,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class po extends Or{constructor(E,y,T,P){super(E,y),this.urlAfterRedirects=T,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ie{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ke{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lt{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tn{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qn{constructor(E,y,T){this.routerEvent=E,this.position=y,this.anchor=T,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Nn{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=$i(E,this._root);return y?y.children.map(T=>T.value):[]}firstChild(E){const y=$i(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Pi(E,this._root);return y.length<2?[]:y[y.length-2].children.map(P=>P.value).filter(P=>P!==E)}pathFromRoot(E){return Pi(E,this._root).map(y=>y.value)}}function $i(v,E){if(v===E.value)return E;for(const y of E.children){const T=$i(v,y);if(T)return T}return null}function Pi(v,E){if(v===E.value)return[E];for(const y of E.children){const T=Pi(v,y);if(T.length)return T.unshift(E),T}return[]}class kr{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function Yn(v){const E={};return v&&v.children.forEach(y=>E[y.value.outlet]=y),E}class cs extends Nn{constructor(E,y){super(E),this.snapshot=y,Ro(this,E)}toString(){return this.snapshot.toString()}}function Hi(v,E){const y=function ci(v,E){const le=new ds([],{},{},"",{},Gt,E,null,v.root,-1,{});return new zo("",new kr(le,[]))}(v,E),T=new de([new rr("",{})]),P=new de({}),G=new de({}),le=new de({}),fe=new de(""),nt=new Es(T,P,le,fe,G,Gt,E,y.root);return nt.snapshot=y.root,new cs(new kr(nt,[]),y)}class Es{constructor(E,y,T,P,G,le,fe,nt){this.url=E,this.params=y,this.queryParams=T,this.fragment=P,this.data=G,this.outlet=le,this.component=fe,this.title=this.data?.pipe((0,xt.U)(Lt=>Lt[Wn]))??(0,j.of)(void 0),this._futureSnapshot=nt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(E=>cr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(E=>cr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Os(v,E="emptyOnly"){const y=v.pathFromRoot;let T=0;if("always"!==E)for(T=y.length-1;T>=1;){const P=y[T],G=y[T-1];if(P.routeConfig&&""===P.routeConfig.path)T--;else{if(G.component)break;T--}}return function sa(v){return v.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(T))}class ds{constructor(E,y,T,P,G,le,fe,nt,Lt,Mn,sn,Kn){this.url=E,this.params=y,this.queryParams=T,this.fragment=P,this.data=G,this.outlet=le,this.component=fe,this.title=this.data?.[Wn],this.routeConfig=nt,this._urlSegment=Lt,this._lastPathIndex=Mn,this._correctedLastPathIndex=Kn??Mn,this._resolve=sn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zo extends Nn{constructor(E,y){super(y),this.url=E,Ro(this,y)}toString(){return Qs(this._root)}}function Ro(v,E){E.value._routerState=v,E.children.forEach(y=>Ro(v,y))}function Qs(v){const E=v.children.length>0?` { ${v.children.map(Qs).join(", ")} } `:"";return`${v.value}${E}`}function Ni(v){if(v.snapshot){const E=v.snapshot,y=v._futureSnapshot;v.snapshot=y,hn(E.queryParams,y.queryParams)||v.queryParams.next(y.queryParams),E.fragment!==y.fragment&&v.fragment.next(y.fragment),hn(E.params,y.params)||v.params.next(y.params),function An(v,E){if(v.length!==E.length)return!1;for(let y=0;y<v.length;++y)if(!hn(v[y],E[y]))return!1;return!0}(E.url,y.url)||v.url.next(y.url),hn(E.data,y.data)||v.data.next(y.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function Js(v,E){const y=hn(v.params,E.params)&&function sr(v,E){return tt(v,E)&&v.every((y,T)=>hn(y.parameters,E[T].parameters))}(v.url,E.url);return y&&!(!v.parent!=!E.parent)&&(!v.parent||Js(v.parent,E.parent))}function oi(v,E,y){if(y&&v.shouldReuseRoute(E.value,y.value.snapshot)){const T=y.value;T._futureSnapshot=E.value;const P=function go(v,E,y){return E.children.map(T=>{for(const P of y.children)if(v.shouldReuseRoute(T.value,P.value.snapshot))return oi(v,T,P);return oi(v,T)})}(v,E,y);return new kr(T,P)}{if(v.shouldAttach(E.value)){const G=v.retrieve(E.value);if(null!==G){const le=G.route;return le.value._futureSnapshot=E.value,le.children=E.children.map(fe=>oi(v,fe)),le}}const T=function Xs(v){return new Es(new de(v.url),new de(v.params),new de(v.queryParams),new de(v.fragment),new de(v.data),v.outlet,v.component,v)}(E.value),P=E.children.map(G=>oi(v,G));return new kr(T,P)}}const Ma="ngNavigationCancelingError";function oa(v,E){const{redirectTo:y,navigationBehaviorOptions:T}=vn(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,P=Er(!1,0,E);return P.url=y,P.navigationBehaviorOptions=T,P}function Er(v,E,y){const T=new Error("NavigationCancelingError: "+(v||""));return T[Ma]=!0,T.cancellationCode=E,y&&(T.url=y),T}function hs(v){return mo(v)&&vn(v.url)}function mo(v){return v&&v[Ma]}class fs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wr,this.attachRef=null}}let Wr=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(y,T){const P=this.getOrCreateContext(y);P.outlet=T,this.contexts.set(y,P)}onChildOutletDestroyed(y){const T=this.getContext(y);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let T=this.getContext(y);return T||(T=new fs,this.contexts.set(y,T)),T}getContext(y){return this.contexts.get(y)||null}}return v.\u0275fac=function(y){return new(y||v)},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Gi=!1;let yo=(()=>{class v{constructor(y,T,P,G,le){this.parentContexts=y,this.location=T,this.changeDetector=G,this.environmentInjector=le,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=P||Gt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Gi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Gi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Gi);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,T){this.activated=y,this._activatedRoute=T,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,T){if(this.isActivated)throw new h.vHH(4013,Gi);this._activatedRoute=y;const P=this.location,le=y._futureSnapshot.component,fe=this.parentContexts.getOrCreateContext(this.name).children,nt=new zi(y,fe,P.injector);if(T&&function di(v){return!!v.resolveComponentFactory}(T)){const Lt=T.resolveComponentFactory(le);this.activated=P.createComponent(Lt,P.length,nt)}else this.activated=P.createComponent(le,{index:P.length,injector:nt,environmentInjector:T??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(y){return new(y||v)(h.Y36(Wr),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},v.\u0275dir=h.lG2({type:v,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),v})();class zi{constructor(E,y,T){this.route=E,this.childContexts=y,this.parent=T}get(E,y){return E===Es?this.route:E===Wr?this.childContexts:this.parent.get(E,y)}}let vo=(()=>{class v{}return v.\u0275fac=function(y){return new(y||v)},v.\u0275cmp=h.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(y,T){1&y&&h._UZ(0,"router-outlet")},dependencies:[yo],encapsulation:2}),v})();function Po(v,E){return v.providers&&!v._injector&&(v._injector=(0,h.MMx)(v.providers,E,`Route: ${v.path}`)),v._injector??E}function Ar(v){const E=v.children&&v.children.map(Ar),y=E?{...v,children:E}:{...v};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==Gt&&(y.component=vo),y}function Oi(v){return v.outlet||Gt}function _o(v,E){const y=v.filter(T=>Oi(T)===E);return y.push(...v.filter(T=>Oi(T)!==E)),y}function Ci(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let E=v.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class gt{constructor(E,y,T,P){this.routeReuseStrategy=E,this.futureState=y,this.currState=T,this.forwardEvent=P}activate(E){const y=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,T,E),Ni(this.futureState.root),this.activateChildRoutes(y,T,E)}deactivateChildRoutes(E,y,T){const P=Yn(y);E.children.forEach(G=>{const le=G.value.outlet;this.deactivateRoutes(G,P[le],T),delete P[le]}),_n(P,(G,le)=>{this.deactivateRouteAndItsChildren(G,T)})}deactivateRoutes(E,y,T){const P=E.value,G=y?y.value:null;if(P===G)if(P.component){const le=T.getContext(P.outlet);le&&this.deactivateChildRoutes(E,y,le.children)}else this.deactivateChildRoutes(E,y,T);else G&&this.deactivateRouteAndItsChildren(y,T)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const T=y.getContext(E.value.outlet),P=T&&E.value.component?T.children:y,G=Yn(E);for(const le of Object.keys(G))this.deactivateRouteAndItsChildren(G[le],P);if(T&&T.outlet){const le=T.outlet.detach(),fe=T.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:le,route:E,contexts:fe})}}deactivateRouteAndOutlet(E,y){const T=y.getContext(E.value.outlet),P=T&&E.value.component?T.children:y,G=Yn(E);for(const le of Object.keys(G))this.deactivateRouteAndItsChildren(G[le],P);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(E,y,T){const P=Yn(y);E.children.forEach(G=>{this.activateRoutes(G,P[G.value.outlet],T),this.forwardEvent(new Tn(G.value.snapshot))}),E.children.length&&this.forwardEvent(new lt(E.value.snapshot))}activateRoutes(E,y,T){const P=E.value,G=y?y.value:null;if(Ni(P),P===G)if(P.component){const le=T.getOrCreateContext(P.outlet);this.activateChildRoutes(E,y,le.children)}else this.activateChildRoutes(E,y,T);else if(P.component){const le=T.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const fe=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),le.children.onOutletReAttached(fe.contexts),le.attachRef=fe.componentRef,le.route=fe.route.value,le.outlet&&le.outlet.attach(fe.componentRef,fe.route.value),Ni(fe.route.value),this.activateChildRoutes(E,null,le.children)}else{const fe=Ci(P.snapshot),nt=fe?.get(h._Vd)??null;le.attachRef=null,le.route=P,le.resolver=nt,le.injector=fe,le.outlet&&le.outlet.activateWith(P,le.injector),this.activateChildRoutes(E,null,le.children)}}else this.activateChildRoutes(E,null,T)}}class Un{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class no{constructor(E,y){this.component=E,this.route=y}}function ro(v,E,y){const T=v._root;return Wi(T,E?E._root:null,y,[T.value])}function ei(v,E){const y=Symbol(),T=E.get(v,y);return T===y?"function"!=typeof v||(0,h.Z0I)(v)?E.get(v):v:T}function Wi(v,E,y,T,P={canDeactivateChecks:[],canActivateChecks:[]}){const G=Yn(E);return v.children.forEach(le=>{(function es(v,E,y,T,P={canDeactivateChecks:[],canActivateChecks:[]}){const G=v.value,le=E?E.value:null,fe=y?y.getContext(v.value.outlet):null;if(le&&G.routeConfig===le.routeConfig){const nt=function No(v,E,y){if("function"==typeof y)return y(v,E);switch(y){case"pathParamsChange":return!tt(v.url,E.url);case"pathParamsOrQueryParamsChange":return!tt(v.url,E.url)||!hn(v.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(v,E)||!hn(v.queryParams,E.queryParams);default:return!Js(v,E)}}(le,G,G.routeConfig.runGuardsAndResolvers);nt?P.canActivateChecks.push(new Un(T)):(G.data=le.data,G._resolvedData=le._resolvedData),Wi(v,E,G.component?fe?fe.children:null:y,T,P),nt&&fe&&fe.outlet&&fe.outlet.isActivated&&P.canDeactivateChecks.push(new no(fe.outlet.component,le))}else le&&ws(E,fe,P),P.canActivateChecks.push(new Un(T)),Wi(v,null,G.component?fe?fe.children:null:y,T,P)})(le,G[le.value.outlet],y,T.concat([le.value]),P),delete G[le.value.outlet]}),_n(G,(le,fe)=>ws(le,y.getContext(fe),P)),P}function ws(v,E,y){const T=Yn(v),P=v.value;_n(T,(G,le)=>{ws(G,P.component?E?E.children.getContext(le):null:E,y)}),y.canDeactivateChecks.push(new no(P.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,P))}function Is(v){return"function"==typeof v}function ti(v){return v instanceof me.K||"EmptyError"===v?.name}const Ki=Symbol("INITIAL_VALUE");function bi(){return(0,Rt.w)(v=>Le(v.map(E=>E.pipe((0,Dr.q)(1),(0,Ye.O)(Ki)))).pipe((0,xt.U)(E=>{for(const y of E)if(!0!==y){if(y===Ki)return Ki;if(!1===y||y instanceof bn)return y}return!0}),(0,Pe.h)(E=>E!==Ki),(0,Dr.q)(1)))}function ko(v){return(0,he.z)((0,at.b)(E=>{if(vn(E))throw oa(0,E)}),(0,xt.U)(E=>!0===E))}const Ti={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Us(v,E,y,T,P){const G=la(v,E,y);return G.matched?function Ko(v,E,y,T){const P=E.canMatch;if(!P||0===P.length)return(0,j.of)(!0);const G=P.map(le=>{const fe=ei(le,v);return an(function Qe(v){return v&&Is(v.canMatch)}(fe)?fe.canMatch(E,y):v.runInContext(()=>fe(E,y)))});return(0,j.of)(G).pipe(bi(),ko())}(T=Po(E,T),E,y).pipe((0,xt.U)(le=>!0===le?G:{...Ti})):(0,j.of)(G)}function la(v,E,y){if(""===E.path)return"full"===E.pathMatch&&(v.hasChildren()||y.length>0)?{...Ti}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const P=(E.matcher||bt)(y,v,E);if(!P)return{...Ti};const G={};_n(P.posParams,(fe,nt)=>{G[nt]=fe.path});const le=P.consumed.length>0?{...G,...P.consumed[P.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:P.consumed,remainingSegments:y.slice(P.consumed.length),parameters:le,positionalParamSegments:P.posParams??{}}}function Io(v,E,y,T,P="corrected"){if(y.length>0&&function Sr(v,E,y){return y.some(T=>Fo(v,E,T)&&Oi(T)!==Gt)}(v,y,T)){const le=new Nt(E,function mi(v,E,y,T){const P={};P[Gt]=T,T._sourceSegment=v,T._segmentIndexShift=E.length;for(const G of y)if(""===G.path&&Oi(G)!==Gt){const le=new Nt([],{});le._sourceSegment=v,le._segmentIndexShift=E.length,P[Oi(G)]=le}return P}(v,E,T,new Nt(y,v.children)));return le._sourceSegment=v,le._segmentIndexShift=E.length,{segmentGroup:le,slicedSegments:[]}}if(0===y.length&&function wr(v,E,y){return y.some(T=>Fo(v,E,T))}(v,y,T)){const le=new Nt(v.segments,function ur(v,E,y,T,P,G){const le={};for(const fe of T)if(Fo(v,y,fe)&&!P[Oi(fe)]){const nt=new Nt([],{});nt._sourceSegment=v,nt._segmentIndexShift="legacy"===G?v.segments.length:E.length,le[Oi(fe)]=nt}return{...P,...le}}(v,E,y,T,v.children,P));return le._sourceSegment=v,le._segmentIndexShift=E.length,{segmentGroup:le,slicedSegments:y}}const G=new Nt(v.segments,v.children);return G._sourceSegment=v,G._segmentIndexShift=E.length,{segmentGroup:G,slicedSegments:y}}function Fo(v,E,y){return(!(v.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function ca(v,E,y,T){return!!(Oi(v)===T||T!==Gt&&Fo(E,y,v))&&("**"===v.path||la(E,v,y).matched)}function qi(v,E,y){return 0===E.length&&!v.children[y]}const qo=!1;class Bs{constructor(E){this.segmentGroup=E||null}}class Cs{constructor(E){this.urlTree=E}}function ts(v){return Xe(new Bs(v))}function Zo(v){return Xe(new Cs(v))}class ns{constructor(E,y,T,P,G){this.injector=E,this.configLoader=y,this.urlSerializer=T,this.urlTree=P,this.config=G,this.allowRedirects=!0}apply(){const E=Io(this.urlTree.root,[],[],this.config).segmentGroup,y=new Nt(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,Gt).pipe((0,xt.U)(G=>this.createUrlTree(ft(G),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dt(G=>{if(G instanceof Cs)return this.allowRedirects=!1,this.match(G.urlTree);throw G instanceof Bs?this.noMatchError(G):G}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,Gt).pipe((0,xt.U)(P=>this.createUrlTree(ft(P),E.queryParams,E.fragment))).pipe(dt(P=>{throw P instanceof Bs?this.noMatchError(P):P}))}noMatchError(E){return new h.vHH(4002,qo)}createUrlTree(E,y,T){const P=ht(E);return new bn(P,y,T)}expandSegmentGroup(E,y,T,P){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(E,y,T).pipe((0,xt.U)(G=>new Nt([],G))):this.expandSegment(E,T,y,T.segments,P,!0)}expandChildren(E,y,T){const P=[];for(const G of Object.keys(T.children))"primary"===G?P.unshift(G):P.push(G);return(0,L.D)(P).pipe(Ke(G=>{const le=T.children[G],fe=_o(y,G);return this.expandSegmentGroup(E,fe,le,G).pipe((0,xt.U)(nt=>({segment:nt,outlet:G})))}),(0,Et.R)((G,le)=>(G[le.outlet]=le.segment,G),{}),ln())}expandSegment(E,y,T,P,G,le){return(0,L.D)(T).pipe(Ke(fe=>this.expandSegmentAgainstRoute(E,y,T,fe,P,G,le).pipe(dt(Lt=>{if(Lt instanceof Bs)return(0,j.of)(null);throw Lt}))),(0,$e.P)(fe=>!!fe),dt((fe,nt)=>{if(ti(fe))return qi(y,P,G)?(0,j.of)(new Nt([],{})):ts(y);throw fe}))}expandSegmentAgainstRoute(E,y,T,P,G,le,fe){return ca(P,y,G,le)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(E,y,P,G,le):fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,T,P,G,le):ts(y):ts(y)}expandSegmentAgainstRouteUsingRedirect(E,y,T,P,G,le){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,T,P,le):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,T,P,G,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,T,P){const G=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Zo(G):this.lineralizeSegments(T,G).pipe((0,Fe.z)(le=>{const fe=new Nt(le,{});return this.expandSegment(E,fe,y,le,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,T,P,G,le){const{matched:fe,consumedSegments:nt,remainingSegments:Lt,positionalParamSegments:Mn}=la(y,P,G);if(!fe)return ts(y);const sn=this.applyRedirectCommands(nt,P.redirectTo,Mn);return P.redirectTo.startsWith("/")?Zo(sn):this.lineralizeSegments(P,sn).pipe((0,Fe.z)(Kn=>this.expandSegment(E,y,T,Kn.concat(Lt),le,!1)))}matchSegmentAgainstRoute(E,y,T,P,G){return"**"===T.path?(E=Po(T,E),T.loadChildren?(T._loadedRoutes?(0,j.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):this.configLoader.loadChildren(E,T)).pipe((0,xt.U)(fe=>(T._loadedRoutes=fe.routes,T._loadedInjector=fe.injector,new Nt(P,{})))):(0,j.of)(new Nt(P,{}))):Us(y,T,P,E).pipe((0,Rt.w)(({matched:le,consumedSegments:fe,remainingSegments:nt})=>le?this.getChildConfig(E=T._injector??E,T,P).pipe((0,Fe.z)(Mn=>{const sn=Mn.injector??E,Kn=Mn.routes,{segmentGroup:Mi,slicedSegments:li}=Io(y,fe,nt,Kn),Xo=new Nt(Mi.segments,Mi.children);if(0===li.length&&Xo.hasChildren())return this.expandChildren(sn,Kn,Xo).pipe((0,xt.U)(Pa=>new Nt(fe,Pa)));if(0===Kn.length&&0===li.length)return(0,j.of)(new Nt(fe,{}));const Gs=Oi(T)===G;return this.expandSegment(sn,Xo,Kn,li,Gs?Gt:G,!0).pipe((0,xt.U)(ea=>new Nt(fe.concat(ea.segments),ea.children)))})):ts(y)))}getChildConfig(E,y,T){return y.children?(0,j.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,j.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function Wo(v,E,y,T){const P=E.canLoad;if(void 0===P||0===P.length)return(0,j.of)(!0);const G=P.map(le=>{const fe=ei(le,v);return an(function O(v){return v&&Is(v.canLoad)}(fe)?fe.canLoad(E,y):v.runInContext(()=>fe(E,y)))});return(0,j.of)(G).pipe(bi(),ko())}(E,y,T).pipe((0,Fe.z)(P=>P?this.configLoader.loadChildren(E,y).pipe((0,at.b)(G=>{y._loadedRoutes=G.routes,y._loadedInjector=G.injector})):function Zi(v){return Xe(Er(qo,3))}())):(0,j.of)({routes:[],injector:E})}lineralizeSegments(E,y){let T=[],P=y.root;for(;;){if(T=T.concat(P.segments),0===P.numberOfChildren)return(0,j.of)(T);if(P.numberOfChildren>1||!P.children[Gt])return Xe(new h.vHH(4e3,qo));P=P.children[Gt]}}applyRedirectCommands(E,y,T){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,T)}applyRedirectCreateUrlTree(E,y,T,P){const G=this.createSegmentGroup(E,y.root,T,P);return new bn(G,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const T={};return _n(E,(P,G)=>{if("string"==typeof P&&P.startsWith(":")){const fe=P.substring(1);T[G]=y[fe]}else T[G]=P}),T}createSegmentGroup(E,y,T,P){const G=this.createSegments(E,y.segments,T,P);let le={};return _n(y.children,(fe,nt)=>{le[nt]=this.createSegmentGroup(E,fe,T,P)}),new Nt(G,le)}createSegments(E,y,T,P){return y.map(G=>G.path.startsWith(":")?this.findPosParam(E,G,P):this.findOrReturn(G,T))}findPosParam(E,y,T){const P=T[y.path.substring(1)];if(!P)throw new h.vHH(4001,qo);return P}findOrReturn(E,y){let T=0;for(const P of y){if(P.path===E.path)return y.splice(T),P;T++}return E}}class oo{}class ou{constructor(E,y,T,P,G,le,fe,nt){this.injector=E,this.rootComponentType=y,this.config=T,this.urlTree=P,this.url=G,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=fe,this.urlSerializer=nt}recognize(){const E=Io(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,Gt).pipe((0,xt.U)(y=>{if(null===y)return null;const T=new ds([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new kr(T,y),G=new zo(this.url,P);return this.inheritParamsAndData(G._root),G}))}inheritParamsAndData(E){const y=E.value,T=Os(y,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),E.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(E,y,T,P){return 0===T.segments.length&&T.hasChildren()?this.processChildren(E,y,T):this.processSegment(E,y,T,T.segments,P)}processChildren(E,y,T){return(0,L.D)(Object.keys(T.children)).pipe(Ke(P=>{const G=T.children[P],le=_o(y,P);return this.processSegmentGroup(E,le,G,P)}),(0,Et.R)((P,G)=>P&&G?(P.push(...G),P):null),function yn(v,E=!1){return(0,ve.e)((y,T)=>{let P=0;y.subscribe((0,Ze.x)(T,G=>{const le=v(G,P++);(le||E)&&T.next(G),!le&&T.complete()}))})}(P=>null!==P),(0,Zt.d)(null),ln(),(0,xt.U)(P=>{if(null===P)return null;const G=z(P);return function b(v){v.sort((E,y)=>E.value.outlet===Gt?-1:y.value.outlet===Gt?1:E.value.outlet.localeCompare(y.value.outlet))}(G),G}))}processSegment(E,y,T,P,G){return(0,L.D)(y).pipe(Ke(le=>this.processSegmentAgainstRoute(le._injector??E,le,T,P,G)),(0,$e.P)(le=>!!le),dt(le=>{if(ti(le))return qi(T,P,G)?(0,j.of)([]):(0,j.of)(null);throw le}))}processSegmentAgainstRoute(E,y,T,P,G){if(y.redirectTo||!ca(y,T,P,G))return(0,j.of)(null);let le;if("**"===y.path){const fe=P.length>0?$r(P).parameters:{},nt=ct(T)+P.length,Lt=new ds(P,fe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,or(y),Oi(y),y.component??y._loadedComponent??null,y,Je(T),nt,Hn(y),nt);le=(0,j.of)({snapshot:Lt,consumedSegments:[],remainingSegments:[]})}else le=Us(T,y,P,E).pipe((0,xt.U)(({matched:fe,consumedSegments:nt,remainingSegments:Lt,parameters:Mn})=>{if(!fe)return null;const sn=ct(T)+nt.length;return{snapshot:new ds(nt,Mn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,or(y),Oi(y),y.component??y._loadedComponent??null,y,Je(T),sn,Hn(y),sn),consumedSegments:nt,remainingSegments:Lt}}));return le.pipe((0,Rt.w)(fe=>{if(null===fe)return(0,j.of)(null);const{snapshot:nt,consumedSegments:Lt,remainingSegments:Mn}=fe;E=y._injector??E;const sn=y._loadedInjector??E,Kn=function V(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(y),{segmentGroup:Mi,slicedSegments:li}=Io(T,Lt,Mn,Kn.filter(Gs=>void 0===Gs.redirectTo),this.relativeLinkResolution);if(0===li.length&&Mi.hasChildren())return this.processChildren(sn,Kn,Mi).pipe((0,xt.U)(Gs=>null===Gs?null:[new kr(nt,Gs)]));if(0===Kn.length&&0===li.length)return(0,j.of)([new kr(nt,[])]);const Xo=Oi(y)===G;return this.processSegment(sn,Kn,Mi,li,Xo?Gt:G).pipe((0,xt.U)(Gs=>null===Gs?null:[new kr(nt,Gs)]))}))}}function M(v){const E=v.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function z(v){const E=[],y=new Set;for(const T of v){if(!M(T)){E.push(T);continue}const P=E.find(G=>T.value.routeConfig===G.value.routeConfig);void 0!==P?(P.children.push(...T.children),y.add(P)):E.push(T)}for(const T of y){const P=z(T.children);E.push(new kr(T.value,P))}return E.filter(T=>!y.has(T))}function Je(v){let E=v;for(;E._sourceSegment;)E=E._sourceSegment;return E}function ct(v){let E=v,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function or(v){return v.data||{}}function Hn(v){return v.resolve||{}}function mt(v){return"string"==typeof v.title||null===v.title}function pr(v){return(0,Rt.w)(E=>{const y=v(E);return y?(0,L.D)(y).pipe((0,xt.U)(()=>E)):(0,j.of)(E)})}let xr=(()=>{class v{buildTitle(y){let T,P=y.root;for(;void 0!==P;)T=this.getResolvedTitleForRoute(P)??T,P=P.children.find(G=>G.outlet===Gt);return T}getResolvedTitleForRoute(y){return y.data[Wn]}}return v.\u0275fac=function(y){return new(y||v)},v.\u0275prov=h.Yz7({token:v,factory:function(){return(0,h.f3M)(ao)},providedIn:"root"}),v})(),ao=(()=>{class v extends xr{constructor(y){super(),this.title=y}updateTitle(y){const T=this.buildTitle(y);void 0!==T&&this.title.setTitle(T)}}return v.\u0275fac=function(y){return new(y||v)(h.LFG(Bn.Dx))},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class nn{}class $t extends class da{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const vt=new h.OlP("",{providedIn:"root",factory:()=>({})}),Ga=new h.OlP("ROUTES");let za=(()=>{class v{constructor(y,T){this.injector=y,this.compiler=T,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,j.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const T=an(y.loadComponent()).pipe((0,at.b)(G=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=G}),tr(()=>{this.componentLoaders.delete(y)})),P=new jt(T,()=>new ge.x).pipe(wt());return this.componentLoaders.set(y,P),P}loadChildren(y,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return(0,j.of)({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const G=this.loadModuleFactoryOrRoutes(T.loadChildren).pipe((0,xt.U)(fe=>{this.onLoadEndListener&&this.onLoadEndListener(T);let nt,Lt,Mn=!1;Array.isArray(fe)?Lt=fe:(nt=fe.create(y).injector,Lt=jr(nt.get(Ga,[],h.XFs.Self|h.XFs.Optional)));return{routes:Lt.map(Ar),injector:nt}}),tr(()=>{this.childrenLoaders.delete(T)})),le=new jt(G,()=>new ge.x).pipe(wt());return this.childrenLoaders.set(T,le),le}loadModuleFactoryOrRoutes(y){return an(y()).pipe((0,Fe.z)(T=>T instanceof h.YKP||Array.isArray(T)?(0,j.of)(T):(0,L.D)(this.compiler.compileModuleAsync(T))))}}return v.\u0275fac=function(y){return new(y||v)(h.LFG(h.zs3),h.LFG(h.Sil))},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class xu{}class nl{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function ha(v){throw v}function Pl(v,E,y){return E.parse("/")}const Nl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ui(){const v=(0,h.f3M)(ce),E=(0,h.f3M)(Wr),y=(0,h.f3M)(yt.Ye),T=(0,h.f3M)(h.zs3),P=(0,h.f3M)(h.Sil),G=(0,h.f3M)(Ga,{optional:!0})??[],le=(0,h.f3M)(vt,{optional:!0})??{},fe=(0,h.f3M)(ao),nt=(0,h.f3M)(xr,{optional:!0}),Lt=(0,h.f3M)(xu,{optional:!0}),Mn=(0,h.f3M)(nn,{optional:!0}),sn=new rn(null,v,E,y,T,P,jr(G));return Lt&&(sn.urlHandlingStrategy=Lt),Mn&&(sn.routeReuseStrategy=Mn),sn.titleStrategy=nt??fe,function Wa(v,E){v.errorHandler&&(E.errorHandler=v.errorHandler),v.malformedUriErrorHandler&&(E.malformedUriErrorHandler=v.malformedUriErrorHandler),v.onSameUrlNavigation&&(E.onSameUrlNavigation=v.onSameUrlNavigation),v.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=v.paramsInheritanceStrategy),v.relativeLinkResolution&&(E.relativeLinkResolution=v.relativeLinkResolution),v.urlUpdateStrategy&&(E.urlUpdateStrategy=v.urlUpdateStrategy),v.canceledNavigationResolution&&(E.canceledNavigationResolution=v.canceledNavigationResolution)}(le,sn),sn}let rn=(()=>{class v{constructor(y,T,P,G,le,fe,nt){this.rootComponentType=y,this.urlSerializer=T,this.rootContexts=P,this.location=G,this.config=nt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge.x,this.errorHandler=ha,this.malformedUriErrorHandler=Pl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,j.of)(void 0),this.urlHandlingStrategy=new nl,this.routeReuseStrategy=new $t,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=le.get(za),this.configLoader.onLoadEndListener=Kn=>this.triggerEvent(new Ie(Kn)),this.configLoader.onLoadStartListener=Kn=>this.triggerEvent(new Te(Kn)),this.ngModule=le.get(h.h0i),this.console=le.get(h.c2e);const sn=le.get(h.R0b);this.isNgZoneEnabled=sn instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(nt),this.currentUrlTree=function Jt(){return new bn(new Nt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hi(this.currentUrlTree,this.rootComponentType),this.transitions=new de({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(y){const T=this.events;return y.pipe((0,Pe.h)(P=>0!==P.id),(0,xt.U)(P=>({...P,extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,Rt.w)(P=>{let G=!1,le=!1;return(0,j.of)(P).pipe((0,at.b)(fe=>{this.currentNavigation={id:fe.id,initialUrl:fe.rawUrl,extractedUrl:fe.extractedUrl,trigger:fe.source,extras:fe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Rt.w)(fe=>{const nt=this.browserUrlTree.toString(),Lt=!this.navigated||fe.extractedUrl.toString()!==nt||nt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Lt)&&this.urlHandlingStrategy.shouldProcessUrl(fe.rawUrl))return Ru(fe.source)&&(this.browserUrlTree=fe.extractedUrl),(0,j.of)(fe).pipe((0,Rt.w)(sn=>{const Kn=this.transitions.getValue();return T.next(new ji(sn.id,this.serializeUrl(sn.extractedUrl),sn.source,sn.restoredState)),Kn!==this.transitions.getValue()?Ne.E:Promise.resolve(sn)}),function io(v,E,y,T){return(0,Rt.w)(P=>function yi(v,E,y,T,P){return new ns(v,E,y,T,P).apply()}(v,E,y,P.extractedUrl,T).pipe((0,xt.U)(G=>({...P,urlAfterRedirects:G}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,at.b)(sn=>{this.currentNavigation={...this.currentNavigation,finalUrl:sn.urlAfterRedirects},P.urlAfterRedirects=sn.urlAfterRedirects}),function mr(v,E,y,T,P,G){return(0,Fe.z)(le=>function Lo(v,E,y,T,P,G,le="emptyOnly",fe="legacy"){return new ou(v,E,y,T,P,le,fe,G).recognize().pipe((0,Rt.w)(nt=>null===nt?function Do(v){return new we.y(E=>E.error(v))}(new oo):(0,j.of)(nt)))}(v,E,y,le.urlAfterRedirects,T.serialize(le.urlAfterRedirects),T,P,G).pipe((0,xt.U)(fe=>({...le,targetSnapshot:fe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,at.b)(sn=>{if(P.targetSnapshot=sn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!sn.extras.skipLocationChange){const Mi=this.urlHandlingStrategy.merge(sn.urlAfterRedirects,sn.rawUrl);this.setBrowserUrl(Mi,sn)}this.browserUrlTree=sn.urlAfterRedirects}const Kn=new Ha(sn.id,this.serializeUrl(sn.extractedUrl),this.serializeUrl(sn.urlAfterRedirects),sn.targetSnapshot);T.next(Kn)}));if(Lt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Kn,extractedUrl:Mi,source:li,restoredState:Xo,extras:Gs}=fe,Ea=new ji(Kn,this.serializeUrl(Mi),li,Xo);T.next(Ea);const ea=Hi(Mi,this.rootComponentType).snapshot;return P={...fe,targetSnapshot:ea,urlAfterRedirects:Mi,extras:{...Gs,skipLocationChange:!1,replaceUrl:!1}},(0,j.of)(P)}return this.rawUrlTree=fe.rawUrl,fe.resolve(null),Ne.E}),(0,at.b)(fe=>{const nt=new ar(fe.id,this.serializeUrl(fe.extractedUrl),this.serializeUrl(fe.urlAfterRedirects),fe.targetSnapshot);this.triggerEvent(nt)}),(0,xt.U)(fe=>P={...fe,guards:ro(fe.targetSnapshot,fe.currentSnapshot,this.rootContexts)}),function Ds(v,E){return(0,Fe.z)(y=>{const{targetSnapshot:T,currentSnapshot:P,guards:{canActivateChecks:G,canDeactivateChecks:le}}=y;return 0===le.length&&0===G.length?(0,j.of)({...y,guardsResult:!0}):function Ls(v,E,y,T){return(0,L.D)(v).pipe((0,Fe.z)(P=>function wo(v,E,y,T,P){const G=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,j.of)(!0);const le=G.map(fe=>{const nt=Ci(E)??P,Lt=ei(fe,nt);return an(function Z(v){return v&&Is(v.canDeactivate)}(Lt)?Lt.canDeactivate(v,E,y,T):nt.runInContext(()=>Lt(v,E,y,T))).pipe((0,$e.P)())});return(0,j.of)(le).pipe(bi())}(P.component,P.route,y,E,T)),(0,$e.P)(P=>!0!==P,!0))}(le,T,P,v).pipe((0,Fe.z)(fe=>fe&&function Br(v){return"boolean"==typeof v}(fe)?function Eo(v,E,y,T){return(0,L.D)(E).pipe(Ke(P=>(0,Oe.z)(function ki(v,E){return null!==v&&E&&E(new ke(v)),(0,j.of)(!0)}(P.route.parent,T),function Oo(v,E){return null!==v&&E&&E(new At(v)),(0,j.of)(!0)}(P.route,T),function xa(v,E,y){const T=E[E.length-1],G=E.slice(0,E.length-1).reverse().map(le=>function Gr(v){const E=v.routeConfig?v.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:v,guards:E}:null}(le)).filter(le=>null!==le).map(le=>_t(()=>{const fe=le.guards.map(nt=>{const Lt=Ci(le.node)??y,Mn=ei(nt,Lt);return an(function x(v){return v&&Is(v.canActivateChild)}(Mn)?Mn.canActivateChild(T,v):Lt.runInContext(()=>Mn(T,v))).pipe((0,$e.P)())});return(0,j.of)(fe).pipe(bi())}));return(0,j.of)(G).pipe(bi())}(v,P.path,y),function Vs(v,E,y){const T=E.routeConfig?E.routeConfig.canActivate:null;if(!T||0===T.length)return(0,j.of)(!0);const P=T.map(G=>_t(()=>{const le=Ci(E)??y,fe=ei(G,le);return an(function R(v){return v&&Is(v.canActivate)}(fe)?fe.canActivate(E,v):le.runInContext(()=>fe(E,v))).pipe((0,$e.P)())}));return(0,j.of)(P).pipe(bi())}(v,P.route,y))),(0,$e.P)(P=>!0!==P,!0))}(T,G,v,E):(0,j.of)(fe)),(0,xt.U)(fe=>({...y,guardsResult:fe})))})}(this.ngModule.injector,fe=>this.triggerEvent(fe)),(0,at.b)(fe=>{if(P.guardsResult=fe.guardsResult,vn(fe.guardsResult))throw oa(0,fe.guardsResult);const nt=new ho(fe.id,this.serializeUrl(fe.extractedUrl),this.serializeUrl(fe.urlAfterRedirects),fe.targetSnapshot,!!fe.guardsResult);this.triggerEvent(nt)}),(0,Pe.h)(fe=>!!fe.guardsResult||(this.restoreHistory(fe),this.cancelNavigationTransition(fe,"",3),!1)),pr(fe=>{if(fe.guards.canActivateChecks.length)return(0,j.of)(fe).pipe((0,at.b)(nt=>{const Lt=new fo(nt.id,this.serializeUrl(nt.extractedUrl),this.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.triggerEvent(Lt)}),(0,Rt.w)(nt=>{let Lt=!1;return(0,j.of)(nt).pipe(function gn(v,E){return(0,Fe.z)(y=>{const{targetSnapshot:T,guards:{canActivateChecks:P}}=y;if(!P.length)return(0,j.of)(y);let G=0;return(0,L.D)(P).pipe(Ke(le=>function Mr(v,E,y,T){const P=v.routeConfig,G=v._resolve;return void 0!==P?.title&&!mt(P)&&(G[Wn]=P.title),function On(v,E,y,T){const P=function ni(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===P.length)return(0,j.of)({});const G={};return(0,L.D)(P).pipe((0,Fe.z)(le=>function js(v,E,y,T){const P=Ci(E)??T,G=ei(v,P);return an(G.resolve?G.resolve(E,y):P.runInContext(()=>G(E,y)))}(v[le],E,y,T).pipe((0,$e.P)(),(0,at.b)(fe=>{G[le]=fe}))),Vt(1),function zn(v){return(0,xt.U)(()=>v)}(G),dt(le=>ti(le)?Ne.E:Xe(le)))}(G,v,E,T).pipe((0,xt.U)(le=>(v._resolvedData=le,v.data=Os(v,y).resolve,P&&mt(P)&&(v.data[Wn]=P.title),null)))}(le.route,T,v,E)),(0,at.b)(()=>G++),Vt(1),(0,Fe.z)(le=>G===P.length?(0,j.of)(y):Ne.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,at.b)({next:()=>Lt=!0,complete:()=>{Lt||(this.restoreHistory(nt),this.cancelNavigationTransition(nt,"",2))}}))}),(0,at.b)(nt=>{const Lt=new po(nt.id,this.serializeUrl(nt.extractedUrl),this.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.triggerEvent(Lt)}))}),pr(fe=>{const nt=Lt=>{const Mn=[];Lt.routeConfig?.loadComponent&&!Lt.routeConfig._loadedComponent&&Mn.push(this.configLoader.loadComponent(Lt.routeConfig).pipe((0,at.b)(sn=>{Lt.component=sn}),(0,xt.U)(()=>{})));for(const sn of Lt.children)Mn.push(...nt(sn));return Mn};return Le(nt(fe.targetSnapshot.root)).pipe((0,Zt.d)(),(0,Dr.q)(1))}),pr(()=>this.afterPreactivation()),(0,xt.U)(fe=>{const nt=function Hr(v,E,y){const T=oi(v,E._root,y?y._root:void 0);return new cs(T,E)}(this.routeReuseStrategy,fe.targetSnapshot,fe.currentRouterState);return P={...fe,targetRouterState:nt}}),(0,at.b)(fe=>{this.currentUrlTree=fe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(fe.urlAfterRedirects,fe.rawUrl),this.routerState=fe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(fe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,fe),this.browserUrlTree=fe.urlAfterRedirects)}),((v,E,y)=>(0,xt.U)(T=>(new gt(E,T.targetRouterState,T.currentRouterState,y).activate(v),T)))(this.rootContexts,this.routeReuseStrategy,fe=>this.triggerEvent(fe)),(0,at.b)({next(){G=!0},complete(){G=!0}}),tr(()=>{G||le||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),dt(fe=>{if(le=!0,mo(fe)){hs(fe)||(this.navigated=!0,this.restoreHistory(P,!0));const nt=new xo(P.id,this.serializeUrl(P.extractedUrl),fe.message,fe.cancellationCode);if(T.next(nt),hs(fe)){const Lt=this.urlHandlingStrategy.merge(fe.url,this.rawUrlTree),Mn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ru(P.source)};this.scheduleNavigation(Lt,"imperative",null,Mn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{this.restoreHistory(P,!0);const nt=new Ys(P.id,this.serializeUrl(P.extractedUrl),fe,P.targetSnapshot??void 0);T.next(nt);try{P.resolve(this.errorHandler(fe))}catch(Lt){P.reject(Lt)}}return Ne.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next({...this.transitions.value,...y})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const T="popstate"===y.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{const P={replaceUrl:!0},G=y.state?.navigationId?y.state:null;if(G){const fe={...G};delete fe.navigationId,delete fe.\u0275routerPageId,0!==Object.keys(fe).length&&(P.state=fe)}const le=this.parseUrl(y.url);this.scheduleNavigation(le,T,G,P)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map(Ar),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,T={}){const{relativeTo:P,queryParams:G,fragment:le,queryParamsHandling:fe,preserveFragment:nt}=T,Lt=P||this.routerState.root,Mn=nt?this.currentUrlTree.fragment:le;let sn=null;switch(fe){case"merge":sn={...this.currentUrlTree.queryParams,...G};break;case"preserve":sn=this.currentUrlTree.queryParams;break;default:sn=G||null}return null!==sn&&(sn=this.removeEmptyProps(sn)),Yr(Lt,this.currentUrlTree,y,sn,Mn??null)}navigateByUrl(y,T={skipLocationChange:!1}){const P=vn(y)?y:this.parseUrl(y),G=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(G,"imperative",null,T)}navigate(y,T={skipLocationChange:!1}){return function Co(v){for(let E=0;E<v.length;E++){if(null==v[E])throw new h.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,T),T)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let T;try{T=this.urlSerializer.parse(y)}catch(P){T=this.malformedUriErrorHandler(P,this.urlSerializer,y)}return T}isActive(y,T){let P;if(P=!0===T?{...Nl}:!1===T?{...fa}:T,vn(y))return nr(this.currentUrlTree,y,P);const G=this.parseUrl(y);return nr(this.currentUrlTree,G,P)}removeEmptyProps(y){return Object.keys(y).reduce((T,P)=>{const G=y[P];return null!=G&&(T[P]=G),T},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new ls(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,T,P,G,le){if(this.disposed)return Promise.resolve(!1);let fe,nt,Lt;le?(fe=le.resolve,nt=le.reject,Lt=le.promise):Lt=new Promise((Kn,Mi)=>{fe=Kn,nt=Mi});const Mn=++this.navigationId;let sn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),sn=P&&P.\u0275routerPageId?P.\u0275routerPageId:G.replaceUrl||G.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):sn=0,this.setTransition({id:Mn,targetPageId:sn,source:T,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:G,resolve:fe,reject:nt,promise:Lt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Lt.catch(Kn=>Promise.reject(Kn))}setBrowserUrl(y,T){const P=this.urlSerializer.serialize(y),G={...T.extras.state,...this.generateNgRouterState(T.id,T.targetPageId)};this.location.isCurrentPathEqualTo(P)||T.extras.replaceUrl?this.location.replaceState(P,"",G):this.location.go(P,"",G)}restoreHistory(y,T=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===P?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===P&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,T,P){const G=new xo(y.id,this.serializeUrl(y.extractedUrl),T,P);this.triggerEvent(G),y.resolve(!1)}generateNgRouterState(y,T){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:T}:{navigationId:y}}}return v.\u0275fac=function(y){h.$Z()},v.\u0275prov=h.Yz7({token:v,factory:function(){return ui()},providedIn:"root"}),v})();function Ru(v){return"imperative"!==v}let Rr=(()=>{class v{constructor(y,T,P,G,le){this.router=y,this.route=T,this.tabIndexAttribute=P,this.renderer=G,this.el=le,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ge.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,h.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,h.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,h.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const T=this.renderer,P=this.el.nativeElement;null!==y?T.setAttribute(P,"tabindex",y):T.removeAttribute(P,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(y){return new(y||v)(h.Y36(rn),h.Y36(Es),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},v.\u0275dir=h.lG2({type:v,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,T){1&y&&h.NdJ("click",function(){return T.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),v})(),dn=(()=>{class v{constructor(y,T,P){this.router=y,this.route=T,this.locationStrategy=P,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ge.x,this.subscription=y.events.subscribe(G=>{G instanceof ls&&this.updateTargetUrlAndHref()})}set preserveFragment(y){this._preserveFragment=(0,h.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,h.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,h.D6c)(y)}get replaceUrl(){return this._replaceUrl}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,T,P,G,le){return!!(0!==y||T||P||G||le||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(y){return new(y||v)(h.Y36(rn),h.Y36(Es),h.Y36(yt.S$))},v.\u0275dir=h.lG2({type:v,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,T){1&y&&h.NdJ("click",function(G){return T.onClick(G.button,G.ctrlKey,G.shiftKey,G.altKey,G.metaKey)}),2&y&&h.uIk("target",T.target)("href",T.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),v})();class pa{}let gs=(()=>{class v{constructor(y,T,P,G,le){this.router=y,this.injector=P,this.preloadingStrategy=G,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.h)(y=>y instanceof ls),Ke(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,T){const P=[];for(const G of T){G.providers&&!G._injector&&(G._injector=(0,h.MMx)(G.providers,y,`Route: ${G.path}`));const le=G._injector??y,fe=G._loadedInjector??le;G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent?P.push(this.preloadConfig(le,G)):(G.children||G._loadedRoutes)&&P.push(this.processRoutes(fe,G.children??G._loadedRoutes))}return(0,L.D)(P).pipe((0,jn.J)())}preloadConfig(y,T){return this.preloadingStrategy.preload(T,()=>{let P;P=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(y,T):(0,j.of)(null);const G=P.pipe((0,Fe.z)(le=>null===le?(0,j.of)(void 0):(T._loadedRoutes=le.routes,T._loadedInjector=le.injector,this.processRoutes(le.injector??y,le.routes))));if(T.loadComponent&&!T._loadedComponent){const le=this.loader.loadComponent(T);return(0,L.D)([G,le]).pipe((0,jn.J)())}return G})}}return v.\u0275fac=function(y){return new(y||v)(h.LFG(rn),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(pa),h.LFG(za))},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const ga=new h.OlP("");let Qo=(()=>{class v{constructor(y,T,P={}){this.router=y,this.viewportScroller=T,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof ls&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof qn&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,T){this.router.triggerEvent(new qn(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return v.\u0275fac=function(y){h.$Z()},v.\u0275prov=h.Yz7({token:v,factory:v.\u0275fac}),v})();function Vo(v,E){return{\u0275kind:v,\u0275providers:E}}function ma(v){return[{provide:Ga,multi:!0,useValue:v}]}function bs(){const v=(0,h.f3M)(h.zs3);return E=>{const y=v.get(h.z2F);if(E!==y.components[0])return;const T=v.get(rn),P=v.get(Nu);1===v.get(ya)&&T.initialNavigation(),v.get(Ue,null,h.XFs.Optional)?.setUpPreloading(),v.get(ga,null,h.XFs.Optional)?.init(),T.resetRootComponentType(y.componentTypes[0]),P.closed||(P.next(),P.unsubscribe())}}const Nu=new h.OlP("",{factory:()=>new ge.x}),ya=new h.OlP("",{providedIn:"root",factory:()=>1});const Ue=new h.OlP("");function Jo(v){return Vo(0,[{provide:Ue,useExisting:gs},{provide:pa,useExisting:v}])}const Si=new h.OlP("ROUTER_FORROOT_GUARD"),au=[yt.Ye,{provide:ce,useClass:Ve},{provide:rn,useFactory:ui},Wr,{provide:Es,useFactory:function Ka(v){return v.routerState.root},deps:[rn]},za];function Hs(){return new h.PXZ("Router",rn)}let Ra=(()=>{class v{constructor(y){}static forRoot(y,T){return{ngModule:v,providers:[au,[],ma(y),{provide:Si,useFactory:ms,deps:[[rn,new h.FiY,new h.tp0]]},{provide:vt,useValue:T||{}},T?.useHash?{provide:yt.S$,useClass:yt.Do}:{provide:yt.S$,useClass:yt.b0},{provide:ga,useFactory:()=>{const v=(0,h.f3M)(rn),E=(0,h.f3M)(yt.EM),y=(0,h.f3M)(vt);return y.scrollOffset&&E.setOffset(y.scrollOffset),new Qo(v,E,y)}},T?.preloadingStrategy?Jo(T.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Hs},T?.initialNavigation?qa(T):[],[{provide:Uo,useFactory:bs},{provide:h.tb,multi:!0,useExisting:Uo}]]}}static forChild(y){return{ngModule:v,providers:[ma(y)]}}}return v.\u0275fac=function(y){return new(y||v)(h.LFG(Si,8))},v.\u0275mod=h.oAB({type:v}),v.\u0275inj=h.cJS({imports:[vo]}),v})();function ms(v){return"guarded"}function qa(v){return["disabled"===v.initialNavigation?Vo(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const E=(0,h.f3M)(rn);return()=>{E.setUpLocationChangeListener()}}},{provide:ya,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Vo(2,[{provide:ya,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:E=>{const y=E.get(yt.V_,Promise.resolve());let T=!1;return()=>y.then(()=>new Promise(G=>{const le=E.get(rn),fe=E.get(Nu);(function P(G){E.get(rn).events.pipe((0,Pe.h)(fe=>fe instanceof ls||fe instanceof xo||fe instanceof Ys),(0,xt.U)(fe=>fe instanceof ls||fe instanceof xo&&(0===fe.code||1===fe.code)&&null),(0,Pe.h)(fe=>null!==fe),(0,Dr.q)(1)).subscribe(()=>{G()})})(()=>{G(!0),T=!0}),le.afterPreactivation=()=>(G(!0),T||fe.closed?(0,j.of)(void 0):fe),le.initialNavigation()}))}}]).\u0275providers:[]]}const Uo=new h.OlP("")},3942:(Bt,ze,k)=>{k.d(ze,{Z:()=>Le});var h=k(2090),L=k(4859),j=k(6881),ge=k(1877);class de{constructor(We,Oe){this._delegate=We,this.firebase=Oe,(0,j._addComponent)(We,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(We,Oe=j._DEFAULT_ENTRY_NAME){var Tt;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(We);return!_t.isInitialized()&&"EXPLICIT"===(null===(Tt=_t.getComponent())||void 0===Tt?void 0:Tt.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:Oe})}_removeServiceInstance(We,Oe=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Oe)}_addComponent(We){(0,j._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,j._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function xe(){const Dt=function se(Dt){const We={},Oe={__esModule:!0,initializeApp:function he(ot,ve={}){const wt=j.initializeApp(ot,ve);if((0,h.r3)(We,wt.name))return We[wt.name];const jt=new Dt(wt,Oe);return We[wt.name]=jt,jt},app:_t,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Xe(ot){const ve=ot.name,wt=ve.replace("-compat","");if(j._registerComponent(ot)&&"PUBLIC"===ot.type){const jt=(yt=_t())=>{if("function"!=typeof yt[wt])throw we.create("invalid-app-argument",{appName:ve});return yt[wt]()};void 0!==ot.serviceProps&&(0,h.ZB)(jt,ot.serviceProps),Oe[wt]=jt,Dt.prototype[wt]=function(...yt){return this._getService.bind(this,ve).apply(this,ot.multipleInstances?yt:[])}}return"PUBLIC"===ot.type?Oe[wt]:null},removeApp:function Tt(ot){delete We[ot]},useAsService:function Ne(ot,ve){return"serverAuth"===ve?null:ve},modularAPIs:j}};function _t(ot){if(!(0,h.r3)(We,ot=ot||j._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:ot});return We[ot]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function rt(){return Object.keys(We).map(ot=>We[ot])}}),_t.App=Dt,Oe}(de);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function We(Oe){(0,h.ZB)(Dt,Oe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Dt}(),ne=new ge.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=ee;!function je(Dt){(0,j.registerVersion)("@firebase/app-compat","0.2.13",Dt)}()},6881:(Bt,ze,k)=>{k.r(ze),k.d(ze,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>zr,_DEFAULT_ENTRY_NAME:()=>$r,_addComponent:()=>zt,_addOrOverwriteComponent:()=>Jt,_apps:()=>_n,_clearComponents:()=>fr,_components:()=>an,_getProvider:()=>hr,_registerComponent:()=>Rn,_removeServiceInstance:()=>nr,deleteApp:()=>rr,getApp:()=>bn,getApps:()=>Nt,initializeApp:()=>Sn,onLog:()=>K,registerVersion:()=>tt,setLogLevel:()=>ce});var h=k(5861),L=k(4859),j=k(1877),ge=k(2090);let me,we;const ee=new WeakMap,ne=new WeakMap,Ee=new WeakMap,Ze=new WeakMap,je=new WeakMap;let We={get(Me,Re,ht){if(Me instanceof IDBTransaction){if("done"===Re)return ne.get(Me);if("objectStoreNames"===Re)return Me.objectStoreNames||Ee.get(Me);if("store"===Re)return ht.objectStoreNames[1]?void 0:ht.objectStore(ht.objectStoreNames[0])}return he(Me[Re])},set:(Me,Re,ht)=>(Me[Re]=ht,!0),has:(Me,Re)=>Me instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in Me};function _t(Me){return"function"==typeof Me?function Tt(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Me)?function(...Re){return Me.apply(rt(this),Re),he(ee.get(this))}:function(...Re){return he(Me.apply(rt(this),Re))}:function(Re,...ht){const ft=Me.call(rt(this),Re,...ht);return Ee.set(ft,Re.sort?Re.sort():[Re]),he(ft)}}(Me):(Me instanceof IDBTransaction&&function Dt(Me){if(ne.has(Me))return;const Re=new Promise((ht,ft)=>{const pn=()=>{Me.removeEventListener("complete",vn),Me.removeEventListener("error",Pn),Me.removeEventListener("abort",Pn)},vn=()=>{ht(),pn()},Pn=()=>{ft(Me.error||new DOMException("AbortError","AbortError")),pn()};Me.addEventListener("complete",vn),Me.addEventListener("error",Pn),Me.addEventListener("abort",Pn)});ne.set(Me,Re)}(Me),((Me,Re)=>Re.some(ht=>Me instanceof ht))(Me,function se(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Me,We):Me)}function he(Me){if(Me instanceof IDBRequest)return function Le(Me){const Re=new Promise((ht,ft)=>{const pn=()=>{Me.removeEventListener("success",vn),Me.removeEventListener("error",Pn)},vn=()=>{ht(he(Me.result)),pn()},Pn=()=>{ft(Me.error),pn()};Me.addEventListener("success",vn),Me.addEventListener("error",Pn)});return Re.then(ht=>{ht instanceof IDBCursor&&ee.set(ht,Me)}).catch(()=>{}),je.set(Re,Me),Re}(Me);if(Ze.has(Me))return Ze.get(Me);const Re=_t(Me);return Re!==Me&&(Ze.set(Me,Re),je.set(Re,Me)),Re}const rt=Me=>je.get(Me),ot=["get","getKey","getAll","getAllKeys","count"],ve=["put","add","delete","clear"],wt=new Map;function jt(Me,Re){if(!(Me instanceof IDBDatabase)||Re in Me||"string"!=typeof Re)return;if(wt.get(Re))return wt.get(Re);const ht=Re.replace(/FromIndex$/,""),ft=Re!==ht,pn=ve.includes(ht);if(!(ht in(ft?IDBIndex:IDBObjectStore).prototype)||!pn&&!ot.includes(ht))return;const vn=function(){var Pn=(0,h.Z)(function*(Pr,...xn){const Zr=this.transaction(Pr,pn?"readwrite":"readonly");let Yr=Zr.store;return ft&&(Yr=Yr.index(xn.shift())),(yield Promise.all([Yr[ht](...xn),pn&&Zr.done]))[0]});return function(xn){return Pn.apply(this,arguments)}}();return wt.set(Re,vn),vn}!function Oe(Me){We=Me(We)}(Me=>({...Me,get:(Re,ht,ft)=>jt(Re,ht)||Me.get(Re,ht,ft),has:(Re,ht)=>!!jt(Re,ht)||Me.has(Re,ht)}));class yt{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function xt(Me){return"VERSION"===Me.getComponent()?.type}(ht)){const ft=ht.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(ht=>ht).join(" ")}}const Rt="@firebase/app",Ye=new j.Yd("@firebase/app"),$r="[DEFAULT]",dr={[Rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_n=new Map,an=new Map;function zt(Me,Re){try{Me.container.addComponent(Re)}catch(ht){Ye.debug(`Component ${Re.name} failed to register with FirebaseApp ${Me.name}`,ht)}}function Jt(Me,Re){Me.container.addOrOverwriteComponent(Re)}function Rn(Me){const Re=Me.name;if(an.has(Re))return Ye.debug(`There were multiple attempts to register component ${Re}.`),!1;an.set(Re,Me);for(const ht of _n.values())zt(ht,Me);return!0}function hr(Me,Re){const ht=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),Me.container.getProvider(Re)}function nr(Me,Re,ht=$r){hr(Me,Re).clearInstance(ht)}function fr(){an.clear()}const gr=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(Re,ht,ft){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const zr="9.23.0";function Sn(Me,Re={}){let ht=Me;"object"!=typeof Re&&(Re={name:Re});const ft=Object.assign({name:$r,automaticDataCollectionEnabled:!1},Re),pn=ft.name;if("string"!=typeof pn||!pn)throw gr.create("bad-app-name",{appName:String(pn)});if(ht||(ht=(0,ge.aH)()),!ht)throw gr.create("no-options");const vn=_n.get(pn);if(vn){if((0,ge.vZ)(ht,vn.options)&&(0,ge.vZ)(ft,vn.config))return vn;throw gr.create("duplicate-app",{appName:pn})}const Pn=new L.H0(pn);for(const xn of an.values())Pn.addComponent(xn);const Pr=new wn(ht,ft,Pn);return _n.set(pn,Pr),Pr}function bn(Me=$r){const Re=_n.get(Me);if(!Re&&Me===$r&&(0,ge.aH)())return Sn();if(!Re)throw gr.create("no-app",{appName:Me});return Re}function Nt(){return Array.from(_n.values())}function rr(Me){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(Me){const Re=Me.name;_n.has(Re)&&(_n.delete(Re),yield Promise.all(Me.container.getProviders().map(ht=>ht.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function tt(Me,Re,ht){var ft;let pn=null!==(ft=dr[Me])&&void 0!==ft?ft:Me;ht&&(pn+=`-${ht}`);const vn=pn.match(/\s|\//),Pn=Re.match(/\s|\//);if(vn||Pn){const Pr=[`Unable to register library "${pn}" with version "${Re}":`];return vn&&Pr.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),vn&&Pn&&Pr.push("and"),Pn&&Pr.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void Ye.warn(Pr.join(" "))}Rn(new L.wA(`${pn}-version`,()=>({library:pn,version:Re}),"VERSION"))}function K(Me,Re){if(null!==Me&&"function"!=typeof Me)throw gr.create("invalid-log-argument");(0,j.Am)(Me,Re)}function ce(Me){(0,j.Ub)(Me)}const oe="firebase-heartbeat-store";let ue=null;function Y(){return ue||(ue=function Xe(Me,Re,{blocked:ht,upgrade:ft,blocking:pn,terminated:vn}={}){const Pn=indexedDB.open(Me,Re),Pr=he(Pn);return ft&&Pn.addEventListener("upgradeneeded",xn=>{ft(he(Pn.result),xn.oldVersion,xn.newVersion,he(Pn.transaction),xn)}),ht&&Pn.addEventListener("blocked",xn=>ht(xn.oldVersion,xn.newVersion,xn)),Pr.then(xn=>{vn&&xn.addEventListener("close",()=>vn()),pn&&xn.addEventListener("versionchange",Zr=>pn(Zr.oldVersion,Zr.newVersion,Zr))}).catch(()=>{}),Pr}("firebase-heartbeat-database",1,{upgrade:(Me,Re)=>{0===Re&&Me.createObjectStore(oe)}}).catch(Me=>{throw gr.create("idb-open",{originalErrorMessage:Me.message})})),ue}function H(){return(H=(0,h.Z)(function*(Me){try{return yield(yield Y()).transaction(oe).objectStore(oe).get(Mt(Me))}catch(Re){if(Re instanceof ge.ZR)Ye.warn(Re.message);else{const ht=gr.create("idb-get",{originalErrorMessage:Re?.message});Ye.warn(ht.message)}}})).apply(this,arguments)}function De(Me,Re){return st.apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(Me,Re){try{const ft=(yield Y()).transaction(oe,"readwrite");yield ft.objectStore(oe).put(Re,Mt(Me)),yield ft.done}catch(ht){if(ht instanceof ge.ZR)Ye.warn(ht.message);else{const ft=gr.create("idb-set",{originalErrorMessage:ht?.message});Ye.warn(ft.message)}}})).apply(this,arguments)}function Mt(Me){return`${Me.name}!${Me.options.appId}`}class ae{constructor(Re){this.container=Re,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new He(ht),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var Re=this;return(0,h.Z)(function*(){const ft=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=X();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==pn&&!Re._heartbeatsCache.heartbeats.some(vn=>vn.date===pn))return Re._heartbeatsCache.heartbeats.push({date:pn,agent:ft}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(vn=>{const Pn=new Date(vn.date).valueOf();return Date.now()-Pn<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,h.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const ht=X(),{heartbeatsToSend:ft,unsentEntries:pn}=function Ae(Me,Re=1024){const ht=[];let ft=Me.slice();for(const pn of Me){const vn=ht.find(Pn=>Pn.agent===pn.agent);if(vn){if(vn.dates.push(pn.date),Pt(ht)>Re){vn.dates.pop();break}}else if(ht.push({agent:pn.agent,dates:[pn.date]}),Pt(ht)>Re){ht.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:ht,unsentEntries:ft}}(Re._heartbeatsCache.heartbeats),vn=(0,ge.L)(JSON.stringify({version:2,heartbeats:ft}));return Re._heartbeatsCache.lastSentHeartbeatDate=ht,pn.length>0?(Re._heartbeatsCache.heartbeats=pn,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),vn})()}}function X(){return(new Date).toISOString().substring(0,10)}class He{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ge.hl)()&&(0,ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,h.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function q(Me){return H.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var ht=this;return(0,h.Z)(function*(){var ft;if(yield ht._canUseIndexedDBPromise){const vn=yield ht.read();return De(ht.app,{lastSentHeartbeatDate:null!==(ft=Re.lastSentHeartbeatDate)&&void 0!==ft?ft:vn.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var ht=this;return(0,h.Z)(function*(){var ft;if(yield ht._canUseIndexedDBPromise){const vn=yield ht.read();return De(ht.app,{lastSentHeartbeatDate:null!==(ft=Re.lastSentHeartbeatDate)&&void 0!==ft?ft:vn.lastSentHeartbeatDate,heartbeats:[...vn.heartbeats,...Re.heartbeats]})}})()}}function Pt(Me){return(0,ge.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function tn(Me){Rn(new L.wA("platform-logger",Re=>new yt(Re),"PRIVATE")),Rn(new L.wA("heartbeat",Re=>new ae(Re),"PRIVATE")),tt(Rt,"0.9.13",Me),tt(Rt,"0.9.13","esm2017"),tt("fire-js","")}("")},4859:(Bt,ze,k)=>{k.d(ze,{H0:()=>se,wA:()=>j});var h=k(5861),L=k(2090);class j{constructor(ee,ne,Ee){this.name=ee,this.instanceFactory=ne,this.type=Ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ee){return this.instantiationMode=ee,this}setMultipleInstances(ee){return this.multipleInstances=ee,this}setServiceProps(ee){return this.serviceProps=ee,this}setInstanceCreatedCallback(ee){return this.onInstanceCreated=ee,this}}const ge="[DEFAULT]";class de{constructor(ee,ne){this.name=ee,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ee){const ne=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(ne)){const Ee=new L.BH;if(this.instancesDeferred.set(ne,Ee),this.isInitialized(ne)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:ne});Ze&&Ee.resolve(Ze)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(ee){var ne;const Ee=this.normalizeInstanceIdentifier(ee?.identifier),Ze=null!==(ne=ee?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(Ee)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ee})}catch(je){if(Ze)return null;throw je}}getComponent(){return this.component}setComponent(ee){if(ee.name!==this.name)throw Error(`Mismatching Component ${ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ee,this.shouldAutoInitialize()){if(function we(xe){return"EAGER"===xe.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(const[ne,Ee]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(ne);try{const je=this.getOrInitializeService({instanceIdentifier:Ze});Ee.resolve(je)}catch{}}}}clearInstance(ee=ge){this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)}delete(){var ee=this;return(0,h.Z)(function*(){const ne=Array.from(ee.instances.values());yield Promise.all([...ne.filter(Ee=>"INTERNAL"in Ee).map(Ee=>Ee.INTERNAL.delete()),...ne.filter(Ee=>"_delete"in Ee).map(Ee=>Ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ee=ge){return this.instances.has(ee)}getOptions(ee=ge){return this.instancesOptions.get(ee)||{}}initialize(ee={}){const{options:ne={}}=ee,Ee=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(Ee))throw Error(`${this.name}(${Ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:Ee,options:ne});for(const[je,Le]of this.instancesDeferred.entries())Ee===this.normalizeInstanceIdentifier(je)&&Le.resolve(Ze);return Ze}onInit(ee,ne){var Ee;const Ze=this.normalizeInstanceIdentifier(ne),je=null!==(Ee=this.onInitCallbacks.get(Ze))&&void 0!==Ee?Ee:new Set;je.add(ee),this.onInitCallbacks.set(Ze,je);const Le=this.instances.get(Ze);return Le&&ee(Le,Ze),()=>{je.delete(ee)}}invokeOnInitCallbacks(ee,ne){const Ee=this.onInitCallbacks.get(ne);if(Ee)for(const Ze of Ee)try{Ze(ee,ne)}catch{}}getOrInitializeService({instanceIdentifier:ee,options:ne={}}){let Ee=this.instances.get(ee);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=ee,xe===ge?void 0:xe),options:ne}),this.instances.set(ee,Ee),this.instancesOptions.set(ee,ne),this.invokeOnInitCallbacks(Ee,ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ee,Ee)}catch{}var xe;return Ee||null}normalizeInstanceIdentifier(ee=ge){return this.component?this.component.multipleInstances?ee:ge:ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(ee){this.name=ee,this.providers=new Map}addComponent(ee){const ne=this.getProvider(ee.name);if(ne.isComponentSet())throw new Error(`Component ${ee.name} has already been registered with ${this.name}`);ne.setComponent(ee)}addOrOverwriteComponent(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)}getProvider(ee){if(this.providers.has(ee))return this.providers.get(ee);const ne=new de(ee,this);return this.providers.set(ee,ne),ne}getProviders(){return Array.from(this.providers.values())}}},1877:(Bt,ze,k)=>{k.d(ze,{Am:()=>xe,Ub:()=>se,Yd:()=>we,in:()=>L});const h=[];var L=(()=>{return(ee=L||(L={}))[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",L;var ee})();const j={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},ge=L.INFO,de={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},me=(ee,ne,...Ee)=>{if(ne<ee.logLevel)return;const Ze=(new Date).toISOString(),je=de[ne];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[je](`[${Ze}]  ${ee.name}:`,...Ee)};class we{constructor(ne){this.name=ne,this._logLevel=ge,this._logHandler=me,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in L))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?j[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...ne),this._logHandler(this,L.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...ne),this._logHandler(this,L.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,L.INFO,...ne),this._logHandler(this,L.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,L.WARN,...ne),this._logHandler(this,L.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...ne),this._logHandler(this,L.ERROR,...ne)}}function se(ee){h.forEach(ne=>{ne.setLogLevel(ee)})}function xe(ee,ne){for(const Ee of h){let Ze=null;ne&&ne.level&&(Ze=j[ne.level]),Ee.userLogHandler=null===ee?null:(je,Le,...Dt)=>{const We=Dt.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Le>=(Ze??je.logLevel)&&ee({level:L[Le].toLowerCase(),message:We,args:Dt,type:je.name})}}}},259:(Bt,ze,k)=>{k.d(ze,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=k(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(Bt,ze,k)=>{k.d(ze,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Bt,ze,k)=>{k.r(ze);var h=k(5861),L=k(3942),j=k(1389),ge=k(2090),we=(k(6881),k(1877),k(4859));function se(){return window}function ne(){return(ne=(0,h.Z)(function*(Y,q,H){var De;const{BuildInfo:st}=se();(0,j.as)(q.sessionId,"AuthEvent did not contain a session ID");const Mt=yield Oe(q.sessionId),Yt={};return(0,j.at)()?Yt.ibi=st.packageName:(0,j.au)()?Yt.apn=st.packageName:(0,j.av)(Y,"operation-not-supported-in-this-environment"),st.displayName&&(Yt.appDisplayName=st.displayName),Yt.sessionId=Mt,(0,j.aw)(Y,H,q.type,void 0,null!==(De=q.eventId)&&void 0!==De?De:void 0,Yt)})).apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*(Y){const{BuildInfo:q}=se(),H={};(0,j.at)()?H.iosBundleId=q.packageName:(0,j.au)()?H.androidPackageName=q.packageName:(0,j.av)(Y,"operation-not-supported-in-this-environment"),yield(0,j.ax)(Y,H)})).apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(Y,q,H){const{cordova:De}=se();let st=()=>{};try{yield new Promise((Mt,Yt)=>{let re=null;function ae(){var He;Mt();const Pt=null===(He=De.plugins.browsertab)||void 0===He?void 0:He.close;"function"==typeof Pt&&Pt(),"function"==typeof H?.close&&H.close()}function X(){re||(re=window.setTimeout(()=>{Yt((0,j.az)(Y,"redirect-cancelled-by-user"))},2e3))}function Ae(){"visible"===document?.visibilityState&&X()}q.addPassiveListener(ae),document.addEventListener("resume",X,!1),(0,j.au)()&&document.addEventListener("visibilitychange",Ae,!1),st=()=>{q.removePassiveListener(ae),document.removeEventListener("resume",X,!1),document.removeEventListener("visibilitychange",Ae,!1),re&&window.clearTimeout(re)}})}finally{st()}})).apply(this,arguments)}function Oe(Y){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(Y){const q=_t(Y),H=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(H)).map(st=>st.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _t(Y){if((0,j.as)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const q=new ArrayBuffer(Y.length),H=new Uint8Array(q);for(let De=0;De<Y.length;De++)H[De]=Y.charCodeAt(De);return H}class rt extends j.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(q)),super.onEvent(q)}initialized(){var q=this;return(0,h.Z)(function*(){yield q.initPromise})()}}function ot(Y){return ve.apply(this,arguments)}function ve(){return(ve=(0,h.Z)(function*(Y){const q=yield yt()._get(xt(Y));return q&&(yield yt()._remove(xt(Y))),q})).apply(this,arguments)}function jt(){const Y=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const De=Math.floor(Math.random()*q.length);Y.push(q.charAt(De))}return Y.join("")}function yt(){return(0,j.aC)(j.b)}function xt(Y){return(0,j.aD)("authEvent",Y.config.apiKey,Y.name)}function Ye(Y){if(!Y?.includes("?"))return{};const[q,...H]=Y.split("?");return(0,ge.zd)(H.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.az)("no-auth-event")}}function St(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function ln(Y=(0,ge.z$)()){return!("file:"!==St()&&"ionic:"!==St()&&"capacitor:"!==St()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bn(){try{const Y=self.localStorage,q=j.aL();if(Y)return Y.setItem(q,"1"),Y.removeItem(q),!function jn(Y=(0,ge.z$)()){return function zn(){return(0,ge.w1)()&&11===document?.documentMode}()||function tr(Y=(0,ge.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,ge.hl)()}catch{return Gt()&&(0,ge.hl)()}return!1}function Gt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wn(){return(function Zt(){return"http:"===St()||"https:"===St()}()||(0,ge.ru)()||ln())&&!function yn(){return(0,ge.b$)()||(0,ge.UG)()}()&&Bn()&&!Gt()}function Cr(){return ln()&&typeof document<"u"}function bt(){return(bt=(0,h.Z)(function*(){return!!Cr()&&new Promise(Y=>{const q=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),Y(!0)})})})).apply(this,arguments)}const hn={LOCAL:"local",NONE:"none",SESSION:"session"},Jn=j.aA,jr="persistence";function dr(Y){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(Y){yield Y._initializationPromise;const q=zt(),H=j.aD(jr,Y.config.apiKey,Y.name);q&&q.setItem(H,Y._getPersistence())})).apply(this,arguments)}function zt(){var Y;try{return(null===(Y=function An(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const Jt=j.aA;class Rn{constructor(){this.browserResolver=j.aC(j.k),this.cordovaResolver=j.aC(class Fe{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aE,this._overrideRedirectResult=j.aF}_initialize(q){var H=this;return(0,h.Z)(function*(){const De=q._key();let st=H.eventManagers.get(De);return st||(st=new rt(q),H.eventManagers.set(De,st),H.attachCallbackListeners(q,st)),st})()}_openPopup(q){(0,j.av)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,H,De,st){var Mt=this;return(0,h.Z)(function*(){!function We(Y){var q,H,De,st,Mt,Yt,re,ae,X,Ae;const He=se();(0,j.aA)("function"==typeof(null===(q=He?.universalLinks)||void 0===q?void 0:q.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.aA)(typeof(null===(H=He?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.aA)("function"==typeof(null===(Mt=null===(st=null===(De=He?.cordova)||void 0===De?void 0:De.plugins)||void 0===st?void 0:st.browsertab)||void 0===Mt?void 0:Mt.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aA)("function"==typeof(null===(ae=null===(re=null===(Yt=He?.cordova)||void 0===Yt?void 0:Yt.plugins)||void 0===re?void 0:re.browsertab)||void 0===ae?void 0:ae.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aA)("function"==typeof(null===(Ae=null===(X=He?.cordova)||void 0===X?void 0:X.InAppBrowser)||void 0===Ae?void 0:Ae.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Yt=yield Mt._initialize(q);yield Yt.initialized(),Yt.resetRedirect(),(0,j.aG)(),yield Mt._originValidation(q);const re=function Xe(Y,q,H=null){return{type:q,eventId:H,urlResponse:null,sessionId:jt(),postBody:null,tenantId:Y.tenantId,error:(0,j.az)(Y,"no-auth-event")}}(q,De,st);yield function Ne(Y,q){return yt()._set(xt(Y),q)}(q,re);const ae=yield function ee(Y,q,H){return ne.apply(this,arguments)}(q,re,H),X=yield function je(Y){const{cordova:q}=se();return new Promise(H=>{q.plugins.browsertab.isAvailable(De=>{let st=null;De?q.plugins.browsertab.openUrl(Y):st=q.InAppBrowser.open(Y,(0,j.ay)()?"_blank":"_system","location=yes"),H(st)})})}(ae);return function Le(Y,q,H){return Dt.apply(this,arguments)}(q,Yt,X)})()}_isIframeWebStorageSupported(q,H){throw new Error("Method not implemented.")}_originValidation(q){const H=q._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function Ee(Y){return Ze.apply(this,arguments)}(q)),this.originValidationPromises[H]}attachCallbackListeners(q,H){const{universalLinks:De,handleOpenURL:st,BuildInfo:Mt}=se(),Yt=setTimeout((0,h.Z)(function*(){yield ot(q),H.onEvent(Ke())}),500),re=function(){var Ae=(0,h.Z)(function*(He){clearTimeout(Yt);const Pt=yield ot(q);let tn=null;Pt&&He?.url&&(tn=function wt(Y,q){var H,De;const st=function Dr(Y){const q=Ye(Y),H=q.link?decodeURIComponent(q.link):void 0,De=Ye(H).link,st=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return Ye(st).link||st||De||H||Y}(q);if(st.includes("/__/auth/callback")){const Mt=Ye(st),Yt=Mt.firebaseError?function Rt(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent(Mt.firebaseError)):null,re=null===(De=null===(H=Yt?.code)||void 0===H?void 0:H.split("auth/"))||void 0===De?void 0:De[1],ae=re?(0,j.az)(re):null;return ae?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:ae,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:st,postBody:null}}return null}(Pt,He.url)),H.onEvent(tn||Ke())});return function(Pt){return Ae.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,re);const ae=st,X=`${Mt.packageName.toLowerCase()}://`;se().handleOpenURL=function(){var Ae=(0,h.Z)(function*(He){if(He.toLowerCase().startsWith(X)&&re({url:He}),"function"==typeof ae)try{ae(He)}catch(Pt){console.error(Pt)}});return function(He){return Ae.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aE,this._overrideRedirectResult=j.aF}_initialize(q){var H=this;return(0,h.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,H,De,st){var Mt=this;return(0,h.Z)(function*(){return yield Mt.selectUnderlyingResolver(),Mt.assertedUnderlyingResolver._openPopup(q,H,De,st)})()}_openRedirect(q,H,De,st){var Mt=this;return(0,h.Z)(function*(){return yield Mt.selectUnderlyingResolver(),Mt.assertedUnderlyingResolver._openRedirect(q,H,De,st)})()}_isIframeWebStorageSupported(q,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,H)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return Cr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,h.Z)(function*(){if(q.underlyingResolver)return;const H=yield function cr(){return bt.apply(this,arguments)}();q.underlyingResolver=H?q.cordovaResolver:q.browserResolver})()}}function hr(Y){return Y.unwrap()}function fr(Y){return gr(Y)}function gr(Y){const{_tokenResponse:q}=Y instanceof ge.ZR?Y.customData:Y;if(!q)return null;if(!(Y instanceof ge.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return j.P.credentialFromResult(Y);const H=q.providerId;if(!H||H===j.p.PASSWORD)return null;let De;switch(H){case j.p.GOOGLE:De=j.V;break;case j.p.FACEBOOK:De=j.U;break;case j.p.GITHUB:De=j.W;break;case j.p.TWITTER:De=j.Z;break;default:const{oauthIdToken:st,oauthAccessToken:Mt,oauthTokenSecret:Yt,pendingToken:re,nonce:ae}=q;return Mt||Yt||st||re?re?H.startsWith("saml.")?j.aO._create(H,re):j.L._fromParams({providerId:H,signInMethod:H,pendingToken:re,idToken:st,accessToken:Mt}):new j.X(H).credential({idToken:st,accessToken:Mt,rawNonce:ae}):null}return Y instanceof ge.ZR?De.credentialFromError(Y):De.credentialFromResult(Y)}function wn(Y,q){return q.catch(H=>{throw H instanceof ge.ZR&&function un(Y,q){var H;const De=null===(H=q.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===q?.code)q.resolver=new bn(Y,j.aq(Y,q));else if(De){const st=gr(q),Mt=q;st&&(Mt.credential=st,Mt.tenantId=De.tenantId||void 0,Mt.email=De.email||void 0,Mt.phoneNumber=De.phoneNumber||void 0)}}(Y,H),H}).then(H=>{const st=H.user;return{operationType:H.operationType,credential:fr(H),additionalUserInfo:j.ao(H),user:Nt.getOrCreate(st)}})}function zr(Y,q){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(Y,q){const H=yield q;return{verificationId:H.verificationId,confirm:De=>wn(Y,H.confirm(De))}})).apply(this,arguments)}class bn{constructor(q,H){this.resolver=H,this.auth=function nr(Y){return Y.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return wn(hr(this.auth),this.resolver.resolveSignIn(q))}}class Nt{constructor(q){this._delegate=q,this.multiFactor=j.ar(q)}static getOrCreate(q){return Nt.USER_MAP.has(q)||Nt.USER_MAP.set(q,new Nt(q)),Nt.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var H=this;return(0,h.Z)(function*(){return wn(H.auth,j.a0(H._delegate,q))})()}linkWithPhoneNumber(q,H){var De=this;return(0,h.Z)(function*(){return zr(De.auth,j.l(De._delegate,q,H))})()}linkWithPopup(q){var H=this;return(0,h.Z)(function*(){return wn(H.auth,j.d(H._delegate,q,Rn))})()}linkWithRedirect(q){var H=this;return(0,h.Z)(function*(){return yield dr(j.aH(H.auth)),j.g(H._delegate,q,Rn)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var H=this;return(0,h.Z)(function*(){return wn(H.auth,j.a1(H._delegate,q))})()}reauthenticateWithPhoneNumber(q,H){return zr(this.auth,j.r(this._delegate,q,H))}reauthenticateWithPopup(q){return wn(this.auth,j.e(this._delegate,q,Rn))}reauthenticateWithRedirect(q){var H=this;return(0,h.Z)(function*(){return yield dr(j.aH(H.auth)),j.h(H._delegate,q,Rn)})()}sendEmailVerification(q){return j.ae(this._delegate,q)}unlink(q){var H=this;return(0,h.Z)(function*(){return yield j.an(H._delegate,q),H})()}updateEmail(q){return j.aj(this._delegate,q)}updatePassword(q){return j.ak(this._delegate,q)}updatePhoneNumber(q){return j.u(this._delegate,q)}updateProfile(q){return j.ai(this._delegate,q)}verifyBeforeUpdateEmail(q,H){return j.af(this._delegate,q,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Nt.USER_MAP=new WeakMap;const rr=j.aA;let sr=(()=>{class Y{constructor(H,De){if(this.app=H,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:st}=H.options;rr(st,"invalid-api-key",{appName:H.name}),rr(st,"invalid-api-key",{appName:H.name});const Mt=typeof window<"u"?Rn:void 0;this._delegate=De.initialize({options:{persistence:K(st,H.name),popupRedirectResolver:Mt}}),this._delegate._updateErrorMap(j.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Nt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,De){j.I(this._delegate,H,De)}applyActionCode(H){return j.a5(this._delegate,H)}checkActionCode(H){return j.a6(this._delegate,H)}confirmPasswordReset(H,De){return j.a4(this._delegate,H,De)}createUserWithEmailAndPassword(H,De){var st=this;return(0,h.Z)(function*(){return wn(st._delegate,j.a8(st._delegate,H,De))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return j.ad(this._delegate,H)}isSignInWithEmailLink(H){return j.ab(this._delegate,H)}getRedirectResult(){var H=this;return(0,h.Z)(function*(){rr(Wn(),H._delegate,"operation-not-supported-in-this-environment");const De=yield j.j(H._delegate,Rn);return De?wn(H._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function at(Y,q){(0,j.aH)(Y)._logFramework(q)}(this._delegate,H)}onAuthStateChanged(H,De,st){const{next:Mt,error:Yt,complete:re}=tt(H,De,st);return this._delegate.onAuthStateChanged(Mt,Yt,re)}onIdTokenChanged(H,De,st){const{next:Mt,error:Yt,complete:re}=tt(H,De,st);return this._delegate.onIdTokenChanged(Mt,Yt,re)}sendSignInLinkToEmail(H,De){return j.aa(this._delegate,H,De)}sendPasswordResetEmail(H,De){return j.a3(this._delegate,H,De||void 0)}setPersistence(H){var De=this;return(0,h.Z)(function*(){let st;switch(function $r(Y,q){Jn(Object.values(hn).includes(q),Y,"invalid-persistence-type"),(0,ge.b$)()?Jn(q!==hn.SESSION,Y,"unsupported-persistence-type"):(0,ge.UG)()?Jn(q===hn.NONE,Y,"unsupported-persistence-type"):Gt()?Jn(q===hn.NONE||q===hn.LOCAL&&(0,ge.hl)(),Y,"unsupported-persistence-type"):Jn(q===hn.NONE||Bn(),Y,"unsupported-persistence-type")}(De._delegate,H),H){case hn.SESSION:st=j.a;break;case hn.LOCAL:st=(yield j.aC(j.i)._isAvailable())?j.i:j.b;break;case hn.NONE:st=j.N;break;default:return j.av("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(st)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return wn(this._delegate,j._(this._delegate))}signInWithCredential(H){return wn(this._delegate,j.$(this._delegate,H))}signInWithCustomToken(H){return wn(this._delegate,j.a2(this._delegate,H))}signInWithEmailAndPassword(H,De){return wn(this._delegate,j.a9(this._delegate,H,De))}signInWithEmailLink(H,De){return wn(this._delegate,j.ac(this._delegate,H,De))}signInWithPhoneNumber(H,De){return zr(this._delegate,j.s(this._delegate,H,De))}signInWithPopup(H){var De=this;return(0,h.Z)(function*(){return rr(Wn(),De._delegate,"operation-not-supported-in-this-environment"),wn(De._delegate,j.c(De._delegate,H,Rn))})()}signInWithRedirect(H){var De=this;return(0,h.Z)(function*(){return rr(Wn(),De._delegate,"operation-not-supported-in-this-environment"),yield dr(De._delegate),j.f(De._delegate,H,Rn)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return j.a7(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=hn,Y})();function tt(Y,q,H){let De=Y;"function"!=typeof Y&&({next:De,error:q,complete:H}=Y);const st=De;return{next:Yt=>st(Yt&&Nt.getOrCreate(Yt)),error:q,complete:H}}function K(Y,q){const H=function an(Y,q){const H=zt();if(!H)return[];const De=j.aD(jr,Y,q);switch(H.getItem(De)){case hn.NONE:return[j.N];case hn.LOCAL:return[j.i,j.a];case hn.SESSION:return[j.a];default:return[]}}(Y,q);if(typeof self<"u"&&!H.includes(j.i)&&H.push(j.i),typeof window<"u")for(const De of[j.b,j.a])H.includes(De)||H.push(De);return H.includes(j.N)||H.push(j.N),H}class ce{constructor(){this.providerId="phone",this._delegate=new j.P(hr(L.Z.auth()))}static credential(q,H){return j.P.credential(q,H)}verifyPhoneNumber(q,H){return this._delegate.verifyPhoneNumber(q,H)}unwrap(){return this._delegate}}ce.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,ce.PROVIDER_ID=j.P.PROVIDER_ID;const Ve=j.aA;class It{constructor(q,H,De=L.Z.app()){var st;Ve(null===(st=De.options)||void 0===st?void 0:st.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new j.R(q,H,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ue(Y){Y.INTERNAL.registerComponent(new we.wA("auth-compat",q=>{const H=q.getProvider("app-compat").getImmediate(),De=q.getProvider("auth");return new sr(H,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.Q,FacebookAuthProvider:j.U,GithubAuthProvider:j.W,GoogleAuthProvider:j.V,OAuthProvider:j.X,SAMLAuthProvider:j.Y,PhoneAuthProvider:ce,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:It,TwitterAuthProvider:j.Z,Auth:sr,AuthCredential:j.J,Error:ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.4.2")}(L.Z)},5861:(Bt,ze,k)=>{function h(j,ge,de,me,we,se,xe){try{var ee=j[se](xe),ne=ee.value}catch(Ee){return void de(Ee)}ee.done?ge(ne):Promise.resolve(ne).then(me,we)}function L(j){return function(){var ge=this,de=arguments;return new Promise(function(me,we){var se=j.apply(ge,de);function xe(ne){h(se,me,we,xe,ee,"next",ne)}function ee(ne){h(se,me,we,xe,ee,"throw",ne)}xe(void 0)})}}k.d(ze,{Z:()=>L})},7582:(Bt,ze,k)=>{function ge(Ye,Pe){var Fe={};for(var $e in Ye)Object.prototype.hasOwnProperty.call(Ye,$e)&&Pe.indexOf($e)<0&&(Fe[$e]=Ye[$e]);if(null!=Ye&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for($e=Object.getOwnPropertySymbols(Ye);Ke<$e.length;Ke++)Pe.indexOf($e[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Ye,$e[Ke])&&(Fe[$e[Ke]]=Ye[$e[Ke]])}return Fe}function Ee(Ye,Pe,Fe,$e){return new(Fe||(Fe=Promise))(function(at,dt){function Et(Zt){try{St($e.next(Zt))}catch(ln){dt(ln)}}function Vt(Zt){try{St($e.throw(Zt))}catch(ln){dt(ln)}}function St(Zt){Zt.done?at(Zt.value):function Ke(at){return at instanceof Fe?at:new Fe(function(dt){dt(at)})}(Zt.value).then(Et,Vt)}St(($e=$e.apply(Ye,Pe||[])).next())})}function he(Ye){return this instanceof he?(this.v=Ye,this):new he(Ye)}function rt(Ye,Pe,Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,$e=Fe.apply(Ye,Pe||[]),at=[];return Ke={},dt("next"),dt("throw"),dt("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function dt(yn){$e[yn]&&(Ke[yn]=function(zn){return new Promise(function(tr,jn){at.push([yn,zn,tr,jn])>1||Et(yn,zn)})})}function Et(yn,zn){try{!function Vt(yn){yn.value instanceof he?Promise.resolve(yn.value.v).then(St,Zt):ln(at[0][2],yn)}($e[yn](zn))}catch(tr){ln(at[0][3],tr)}}function St(yn){Et("next",yn)}function Zt(yn){Et("throw",yn)}function ln(yn,zn){yn(zn),at.shift(),at.length&&Et(at[0][0],at[0][1])}}function Ne(Ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Pe=Ye[Symbol.asyncIterator];return Pe?Pe.call(Ye):(Ye=function Dt(Ye){var Pe="function"==typeof Symbol&&Symbol.iterator,Fe=Pe&&Ye[Pe],$e=0;if(Fe)return Fe.call(Ye);if(Ye&&"number"==typeof Ye.length)return{next:function(){return Ye&&$e>=Ye.length&&(Ye=void 0),{value:Ye&&Ye[$e++],done:!Ye}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ye),Fe={},$e("next"),$e("throw"),$e("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe);function $e(at){Fe[at]=Ye[at]&&function(dt){return new Promise(function(Et,Vt){!function Ke(at,dt,Et,Vt){Promise.resolve(Vt).then(function(St){at({value:St,done:Et})},dt)}(Et,Vt,(dt=Ye[at](dt)).done,dt.value)})}}}k.d(ze,{FC:()=>rt,KL:()=>Ne,_T:()=>ge,mG:()=>Ee,qq:()=>he})}},Bt=>{Bt(Bt.s=2955)}]);