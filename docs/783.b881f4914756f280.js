"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[783],{9783:(F,y,d)=>{d.r(y),d.d(y,{ClientModule:()=>J});var t=d(6895),v=d(9051),x=d(4004),e=d(4650),b=d(2425),m=d(433);function u(r,f){if(1&r){const n=e.EpF();e.TgZ(0,"div",2)(1,"h4"),e._uU(2,"Cliente"),e.qZA(),e.TgZ(3,"form")(4,"div",3)(5,"input",4),e.NdJ("ngModelChange",function(p){e.CHM(n);const M=e.oxw();return e.KtG(M.currentClient.name=p)}),e.qZA(),e.TgZ(6,"label",5),e._uU(7,"Nombre"),e.qZA()(),e.TgZ(8,"div",3)(9,"input",6),e.NdJ("ngModelChange",function(p){e.CHM(n);const M=e.oxw();return e.KtG(M.currentClient.code=p)}),e.qZA(),e.TgZ(10,"label",7),e._uU(11,"Numero de Cliente"),e.qZA()(),e.TgZ(12,"div",3)(13,"input",8),e.NdJ("ngModelChange",function(p){e.CHM(n);const M=e.oxw();return e.KtG(M.currentClient.phone=p)}),e.qZA(),e.TgZ(14,"label",9),e._uU(15,"Numero de Telefono"),e.qZA()(),e.TgZ(16,"div",10)(17,"input",11),e.NdJ("ngModelChange",function(p){e.CHM(n);const M=e.oxw();return e.KtG(M.currentClient.address=p)}),e.qZA(),e.TgZ(18,"label",12),e._uU(19,"Direccion"),e.qZA()()(),e.TgZ(20,"button",13),e.NdJ("click",function(){e.CHM(n);const p=e.oxw();return e.KtG(p.deleteClient())}),e._uU(21," Eliminar "),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){e.CHM(n);const p=e.oxw();return e.KtG(p.updateClient())}),e._uU(23," Editar "),e.qZA(),e.TgZ(24,"button",15),e._uU(25," Editar "),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(5),e.Q6J("ngModel",n.currentClient.name),e.xp6(4),e.Q6J("ngModel",n.currentClient.code),e.xp6(4),e.Q6J("ngModel",n.currentClient.phone),e.xp6(4),e.Q6J("ngModel",n.currentClient.address),e.xp6(10),e.Oqu(n.message)}}function o(r,f){1&r&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"p"),e._uU(3,"No fue posible acceder a este cliente..."),e.qZA()())}let i=(()=>{class r{constructor(n){this.ClientService=n,this.refreshList=new e.vpe,this.currentClient={name:"",code:"",phone:0,address:""},this.message=""}ngOnInit(){this.message=""}ngOnChanges(){this.message="",this.currentClient={...this.client}}updateClient(){this.currentClient.id&&this.ClientService.update(this.currentClient.id,{name:this.currentClient.name,code:this.currentClient.code,phone:this.currentClient.phone,address:this.currentClient.address}).then(()=>this.message="The Client was updated successfully!").catch(l=>console.log(l))}deleteClient(){this.currentClient.id&&this.ClientService.delete(this.currentClient.id).then(()=>{this.refreshList.emit(),this.message="The Client was updated successfully!"}).catch(n=>console.log(n))}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(b.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-details"]],inputs:{client:"client"},outputs:{refreshList:"refreshList"},features:[e.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-floating","mb-2"],["type","text","id","name","required","","name","name","placeholder","Nombre","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],["type","text","id","code","required","","name","code","placeholder","Codigo","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","code"],["id","phone","required","","placeholder","description","name","phone","type","tel",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],[1,"form-floating","mb-3"],["id","address","required","","placeholder","description","name","address","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],[1,"btn","btn-danger","rounded-pill","mx-2",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill",3,"click"],[1,"btn","btn-success","rounded-pill"]],template:function(n,l){1&n&&(e.YNc(0,u,28,5,"div",0),e.YNc(1,o,4,0,"div",1)),2&n&&(e.Q6J("ngIf",l.currentClient),e.xp6(1),e.Q6J("ngIf",!l.currentClient))},dependencies:[t.O5,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.Q7,m.On,m.F]}),r})();function a(r,f){if(1&r){const n=e.EpF();e.TgZ(0,"li",20),e.NdJ("click",function(){const p=e.CHM(n),M=p.$implicit,I=p.index,U=e.oxw();return e.KtG(U.setActiveClient(M,I))}),e._uU(1),e.qZA()}if(2&r){const n=f.$implicit,l=f.index,p=e.oxw();e.ekj("active",l==p.currentIndex),e.xp6(1),e.AsE(" ",n.name," - ",n.code," ")}}function C(r,f){if(1&r){const n=e.EpF();e.TgZ(0,"div")(1,"app-client-details",21),e.NdJ("refreshList",function(){e.CHM(n);const p=e.oxw();return e.KtG(p.refreshList())}),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(1),e.Q6J("client",n.currentClient)}}function T(r,f){1&r&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"p"),e._uU(3,"Seleccione un cliente..."),e.qZA()())}let Z=(()=>{class r{constructor(n){this.ClientService=n,this.Clients=[],this.currentIndex=-1,this.title="",this.query="",this.codeFilter=!1}ngOnInit(){history.state.id?this.retrieveClientById(history.state.id):this.retrieveClientClients()}refreshList(){this.currentClient=void 0,this.currentIndex=-1,this.retrieveClientClients()}retrieveClientById(n){this.ClientService.getById(n).pipe((0,x.U)(l=>({id:l.id,...l.data()}))).subscribe(l=>{console.log(l),this.Clients?.push(l),this.setActiveClient(l,0)})}retrieveClientClients(){this.ClientService.getAll().snapshotChanges().pipe((0,x.U)(n=>n.map(l=>({id:l.payload.doc.id,...l.payload.doc.data()})))).subscribe(n=>{this.Clients=n})}filterClients(){this.query?(this.codeFilter?this.ClientService.filterByCode(this.query):this.ClientService.filterByName(this.query)).snapshotChanges().pipe((0,x.U)(l=>l.map(p=>({id:p.payload.doc.id,...p.payload.doc.data()})))).subscribe(l=>{this.Clients=l,console.log(l)}):this.retrieveClientClients()}setActiveClient(n,l){this.currentClient=n,this.currentIndex=l}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(b.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-list"]],decls:27,vars:5,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],[1,"ms-5","form-check"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault","name","codeFilter",1,"form-check-input",3,"ngModel","ngModelChange"],["type","search","name","query","placeholder","Buscar por Nombre o Numero de Cliente","aria-label","Search",1,"form-control","ms-2","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"position-fixed","bottom-0","end-0",2,"margin","6rem","z-index","1070"],["routerLink","add",1,"btn","btn-success","btn-lg","rounded-pill"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","4vh","height","4vh","viewBox","0 0 47 47",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141 c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27 c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435 c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"client","refreshList"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),e._uU(3,"Lista de clientes"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6," Filtro por No. Cliente "),e.qZA(),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(M){return l.codeFilter=M}),e.qZA()(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(M){return l.query=M}),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return l.filterClients()}),e._uU(10,"Buscar"),e.qZA()(),e._UZ(11,"hr"),e.TgZ(12,"div",8)(13,"button",9),e.O4$(),e.TgZ(14,"svg",10),e._UZ(15,"g",11)(16,"g",12),e.TgZ(17,"g",13)(18,"g"),e._UZ(19,"path",14),e.qZA()()()()(),e.kcU(),e.TgZ(20,"div",15)(21,"div",16)(22,"ul",17),e.YNc(23,a,2,4,"li",18),e.qZA()(),e.TgZ(24,"div",16),e.YNc(25,C,2,1,"div",19),e.YNc(26,T,4,0,"div",19),e.qZA()()()),2&n&&(e.xp6(7),e.Q6J("ngModel",l.codeFilter),e.xp6(1),e.Q6J("ngModel",l.query),e.xp6(15),e.Q6J("ngForOf",l.Clients),e.xp6(2),e.Q6J("ngIf",l.currentClient),e.xp6(1),e.Q6J("ngIf",!l.currentClient))},dependencies:[t.sg,t.O5,v.rH,m._Y,m.Fj,m.Wl,m.JJ,m.JL,m.On,m.F,i]}),r})();class c{}var g=d(4985),s=d(6535),h=d(798),_=d(4245);function A(r,f){if(1&r){const n=e.EpF();e.TgZ(0,"div")(1,"div",4)(2,"div",5)(3,"app-form",6),e.NdJ("formModel",function(p){e.CHM(n);const M=e.oxw();return e.KtG(M.submit(p))}),e.qZA()()()()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("formObj",n.formObj)}}function w(r,f){if(1&r){const n=e.EpF();e.TgZ(0,"div",7)(1,"h4"),e._uU(2,"El material a sido registrado Satisfactoriamente!"),e.qZA(),e.TgZ(3,"button",8),e.NdJ("click",function(){e.CHM(n);const p=e.oxw();return e.KtG(p.newClient())}),e._uU(4,"A\xf1adir Otro"),e.qZA()()}}const O=[{path:"",component:Z},{path:"add",component:(()=>{class r{constructor(n,l,p){this.ClientService=n,this.auditService=l,this.fos=p,this.client=new c,this.submitted=!1,this.formObj=[[new g.O("Nombre","name","text"),new g.O("Numero de Cliente","code","text")],[new g.O("Direccion","address","text")],[new g.O("Telefono","phone","number")]]}submit(n){this.client=n,this.saveClient()}saveClient(){this.fos.create(this.client).then(()=>{console.log("Created new Client successfully!"),this.auditService.create(b.y.name,"Crear Cliente","Jonny123"),this.submitted=!0})}newClient(){this.submitted=!1,this.client=new c}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(b.y),e.Y36(h.C),e.Y36(s.U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-client"]],features:[e._Bn([s.U,{provide:"path",useValue:"/clients"}])],decls:6,vars:2,consts:[[1,"container","vh-100"],[1,"text-muted","mt-5"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"card","mt-4","bg-light","shadow-lg","border-0"],[1,"card-body"],["btnMes","Crear Cliente","modalMessage","\xbfDesea continuar con la creacion del cliente?",3,"formObj","formModel"],[1,"mt-3"],[1,"btn","btn-outline-success","mt-2",3,"click"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2," Registro del Cliente"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,A,4,1,"div",2),e.YNc(5,w,5,0,"div",3),e.qZA()),2&n&&(e.xp6(4),e.Q6J("ngIf",!l.submitted),e.xp6(1),e.Q6J("ngIf",l.submitted))},dependencies:[t.O5,_.U]}),r})()}];let N=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[v.Bz.forChild(O),v.Bz]}),r})();var B=d(4466);let J=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[t.ez,N,m.u5,B.m]}),r})()},4245:(F,y,d)=>{d.d(y,{U:()=>Z});var t=d(4650),v=d(4985),x=d(6895),e=d(433);let b=(()=>{class c{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.continue=new t.vpe}ngOnInit(){}modalContinue(s){this.continue.emit(s)}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage"},outputs:{continue:"continue"},decls:17,vars:2,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","rounded-pill"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","rounded-pill",3,"click"]],template:function(s,h){1&s&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),t._uU(8,"PRECAUCION"),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return h.modalContinue(!1)}),t.qZA()(),t.TgZ(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return h.modalContinue(!1)}),t._uU(14,"Abortar"),t.qZA(),t.TgZ(15,"button",11),t.NdJ("click",function(){return h.modalContinue(!0)}),t._uU(16,"Continuar"),t.qZA()()()()()()),2&s&&(t.xp6(2),t.hij(" ",h.btnMessage," "),t.xp6(9),t.hij(" ",h.modalMessage," "))}}),c})();function m(c,g){if(1&c&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&c){const s=t.oxw(2).$implicit;t.xp6(1),t.hij("",s.placeholder," es obligatorio")}}function u(c,g){if(1&c&&(t.TgZ(0,"div",12),t.YNc(1,m,2,1,"div",13),t.qZA()),2&c){t.oxw();const s=t.MAs(2);t.xp6(1),t.Q6J("ngIf",s.errors.required)}}function o(c,g){1&c&&t._UZ(0,"div",14)}const i=function(c){return{"is-invalid":c}};function a(c,g){if(1&c){const s=t.EpF();t.TgZ(0,"div",6)(1,"input",7,8),t.NdJ("ngModelChange",function(_){const w=t.CHM(s).$implicit;return t.KtG(w.value=_)}),t.qZA(),t.YNc(3,u,2,1,"div",9),t.TgZ(4,"label",10),t._uU(5),t.qZA(),t.YNc(6,o,1,0,"div",11),t.qZA()}if(2&c){const s=g.$implicit,h=t.MAs(2),_=t.oxw(2),A=t.MAs(1);t.xp6(1),t.Tol("form-control"+s.classlist),t.Q6J("id",s.label)("name",s.label)("type",s.type)("placeholder",s.placeholder)("ngModel",s.value)("value",s.valueCallback?s.getValue():s.value)("ngClass",t.VKq(14,i,A.submitted&&h.errors))("readonly",_.mode),t.xp6(2),t.Q6J("ngIf",A.submitted&&h.errors),t.xp6(1),t.Q6J("for",s.label),t.xp6(1),t.Oqu(s.placeholder),t.xp6(1),t.Q6J("ngIf","radio"==s.type)}}function C(c,g){if(1&c&&(t.TgZ(0,"div",4),t.YNc(1,a,7,16,"div",5),t.qZA()),2&c){const s=g.$implicit;t.xp6(1),t.Q6J("ngForOf",s)}}function T(c,g){if(1&c){const s=t.EpF();t.TgZ(0,"div",15)(1,"app-warn-modal",16),t.NdJ("continue",function(_){t.CHM(s);const A=t.oxw();return t.KtG(A.onSubmit(_))}),t.qZA(),t.TgZ(2,"button",17),t.NdJ("click",function(){t.CHM(s);const _=t.oxw(),A=t.MAs(1);return t.KtG(_.onReset(A))}),t._uU(3," Reset "),t.qZA()()}if(2&c){const s=t.oxw();t.xp6(1),t.Q6J("btnMessage",s.btnMes)}}let Z=(()=>{class c{constructor(s){this.cdref=s,this.formModel=new t.vpe,this.mode=!1,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new v.O("Nombre Completo","fullname","text"),new v.O("Nombre de Usuario","username","text")],[new v.O("Correo Electronico","email","text")],[new v.O("Password","password","password"),new v.O("Confirmar Password","Confirm Password","password")],[new v.O("Aceptar los Terminos","Accept Terms","radio","form-check-input",!1)]],this.continue=!1}ngOnInit(){}onContinue(s){this.continue=s}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(s){if(this.continue&&s){var h={};this.formObj.flat(2).forEach(_=>h[_.label]=_.value),this.formModel.emit(h)}}onReset(s){this.continue=!1,s.reset()}}return c.\u0275fac=function(s){return new(s||c)(t.Y36(t.sBO))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-form"]],inputs:{mode:"mode",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel"},decls:4,vars:2,consts:[["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["required","",3,"id","name","type","placeholder","ngModel","value","ngClass","readonly","ngModelChange"],["input","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"",3,"for"],["class","mb-4",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["type","submit","modalMessage","\xbfSeguro que desea crear una nueva orden?",3,"btnMessage","continue"],["type","button",1,"ms-2","btn","btn-outline-danger","rounded-pill",3,"click"]],template:function(s,h){if(1&s){const _=t.EpF();t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){t.CHM(_);const w=t.MAs(1);return t.KtG(w.form.valid&&h.onContinue(!0))}),t.YNc(2,C,2,1,"div",2),t.YNc(3,T,4,1,"div",3),t.qZA()}2&s&&(t.xp6(2),t.Q6J("ngForOf",h.formObj),t.xp6(1),t.Q6J("ngIf",!h.mode))},dependencies:[x.mk,x.sg,x.O5,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.On,e.F,b]}),c})()},798:(F,y,d)=>{d.d(y,{C:()=>e});var t=d(8179),v=d(4650),x=d(33);let e=(()=>{class b{constructor(u){this.db=u,this.dbPath="/audit",this.objectsRef=u.collection(this.dbPath)}getNextBatch(u,o){return this.db.collection(this.dbPath,o?i=>i.orderBy("timestamp","desc").startAfter(o.timestamp).limit(u):i=>i.orderBy("timestamp","desc").limit(u))}create(u,o,i){var a={operation:u,process:o,timestamp:t.EK.fromDate(new Date),user:i};return console.log(a),this.objectsRef.add({...a})}update(u,o){return this.objectsRef.doc(u).update(o)}delete(u){return this.objectsRef.doc(u).delete()}filterByDateBatch(u,o,i,a,C){return console.log(i),this.db.collection(this.dbPath,T=>T.where("timestamp",">=",u).where("timestamp","<=",o).where("name","==",i).orderBy("timestamp","desc").limit(a))}filterByNameBatch(u,o,i){return this.db.collection(this.dbPath,i?a=>a.where("name",">=",u).where("name","<=",u+"\uf8ff").orderBy("name","desc").startAfter(i.name).limit(o):a=>a.where("name",">=",u).where("name","<=",u+"\uf8ff").orderBy("name","desc").limit(o))}filterByCodeBatch(u,o,i){return this.db.collection(this.dbPath,i?a=>a.where("code",">=",u).where("code","<=",u+"\uf8ff").orderBy("code","desc").startAfter(i.code).limit(o):a=>a.where("code",">=",u).where("code","<=",u+"\uf8ff").orderBy("code","desc").limit(o))}}return b.\u0275fac=function(u){return new(u||b)(v.LFG(x.ST))},b.\u0275prov=v.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},6535:(F,y,d)=>{d.d(y,{U:()=>b});var t=d(5861),v=d(4004),x=d(4650),e=d(33);let b=(()=>{class m{constructor(o,i){this.db=o,this.path=i,this.objectRef=o.collection(this.path),this.pagination={query:void 0,filterType:!1,filterKey:"",productsPerCall:2,disableNext:!1,disablePrev:!0,lastInResponses:[],requestDataArray:[]}}pathSetter(o){this.path=o,this.objectRef=this.db.collection(this.path)}paginationSetter(o){return this.pagination=o,this}paginationGetter(){return this.pagination}nextPage(o){var i=this;return(0,t.Z)(function*(){var a,C;if(console.log(i.pagination.disablePrev),o){if(i.pagination.disableNext)return;i.pagination.requestDataArray.length&&i.pagination.lastInResponses?.push(i.pagination.requestDataArray[i.pagination.requestDataArray.length-1]),a=i.pagination.lastInResponses?.length?i.pagination.lastInResponses[i.pagination.lastInResponses?.length-1]:void 0,console.log(a)}else{if(i.pagination.disablePrev)return;i.pagination.lastInResponses?.pop(),a=i.pagination.lastInResponses?.pop()}return console.log("Info:",a,i.pagination.lastInResponses,i.pagination.productsPerCall,i.pagination.query),C=i.pagination.query?i.filterByNameBatch(i.pagination.query,i.pagination.productsPerCall,a):i.getNextBatch(i.pagination.productsPerCall,a),new Promise(T=>{C.snapshotChanges().pipe((0,v.U)(Z=>Z.map(c=>({id:c.payload.doc.id,...c.payload.doc.data()})))).subscribe({next:Z=>{if(!Z.length)return i.pagination.disableNext=!0,void i.pagination.lastInResponses.pop();console.log(Z),i.pagination.requestDataArray=Z,i.pagination.disableNext=Z.length<i.pagination.productsPerCall,i.pagination.disablePrev=!a,T(i.pagination)},error:Z=>{i.pagination.disableNext=!1}})})})()}getNextBatch(o,i){return this.db.collection(this.path,i?a=>a.orderBy("timestamp","desc").startAfter(i.timestamp).limit(o):a=>a.orderBy("timestamp","desc").limit(o))}getAll(){return this.objectRef}getByKey(o,i){return this.db.collection(this.path,a=>a.where(o,"==",i))}create(o){return this.objectRef.add({...o})}update(o,i){return this.objectRef.doc(o).update(i)}delete(o){return this.objectRef.doc(o).delete()}filterByNameBatch(o,i,a){return a?this.db.collection(this.path,C=>C.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").startAfter(a.name).limit(i)):(this.pagination.lastInResponses=[],this.pagination.requestDataArray=[],this.pagination.disableNext=!1,this.pagination.disablePrev=!0,this.db.collection(this.path,C=>C.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").limit(i)))}filterByKeyBatch(o,i,a,C){return console.log(o,i),C?(console.log(C[o]),this.db.collection(this.path,T=>T.where(o,">=",i).where(o,"<=",i+"\uf8ff").orderBy(o,"desc").startAfter(C[o]).limit(a))):this.db.collection(this.path,T=>T.where(o,">=",i).where(o,"<=",i+"\uf8ff").orderBy(o,"desc").limit(a))}}return m.\u0275fac=function(o){return new(o||m)(x.LFG(e.ST),x.LFG("path"))},m.\u0275prov=x.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8179:(F,y,d)=>{d.d(y,{EK:()=>t.EK});var t=d(2810)}}]);