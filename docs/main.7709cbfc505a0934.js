"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[179],{6217:(Ht,Le,R)=>{R.d(Le,{nm:()=>ss});var p=R(4976);R(4650),R(259);var ge=R(5861),rt=R(6881),it=R(4859),Et=R(2090),ht=R(1877);const Ce=new Map,_t={activated:!1,tokenObservers:[]},en={initialized:!1,enabled:!1};function Tt(Me){return Ce.get(Me)||Object.assign({},_t)}function Vt(){return en}class pt{constructor(be,$e,gt,Ut,An){if(this.operation=be,this.retryPolicy=$e,this.getWaitDuration=gt,this.lowerBound=Ut,this.upperBound=An,this.pending=null,this.nextErrorWaitInterval=Ut,Ut>An)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var $e=this;return(0,ge.Z)(function*(){$e.stop();try{$e.pending=new Et.BH,yield function Ct(Me){return new Promise(be=>{setTimeout(be,Me)})}($e.getNextRun(be)),$e.pending.resolve(),yield $e.pending.promise,$e.pending=new Et.BH,yield $e.operation(),$e.pending.resolve(),yield $e.pending.promise,$e.process(!0).catch(()=>{})}catch(gt){$e.retryPolicy(gt)?$e.process(!1).catch(()=>{}):$e.stop()}})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const $e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),$e}}}const Zt=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tn(Me){if(!Tt(Me).activated)throw Zt.create("use-before-activation",{appName:Me.name})}function Fn(Me,be){return ar.apply(this,arguments)}function ar(){return(ar=(0,ge.Z)(function*({url:Me,body:be},$e){const gt={"Content-Type":"application/json"},Ut=$e.getImmediate({optional:!0});if(Ut){const pi=yield Ut.getHeartbeatsHeader();pi&&(gt["X-Firebase-Client"]=pi)}const An={method:"POST",body:JSON.stringify(be),headers:gt};let ir,Xn;try{ir=yield fetch(Me,An)}catch(pi){throw Zt.create("fetch-network-error",{originalErrorMessage:pi?.message})}if(200!==ir.status)throw Zt.create("fetch-status-error",{httpStatus:ir.status});try{Xn=yield ir.json()}catch(pi){throw Zt.create("fetch-parse-error",{originalErrorMessage:pi?.message})}const Ln=Xn.ttl.match(/^([\d.]+)(s)$/);if(!Ln||!Ln[2]||isNaN(Number(Ln[1])))throw Zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Xn.ttl}`});const ei=1e3*Number(Ln[1]),li=Date.now();return{token:Xn.token,expireTimeMillis:li+ei,issuedAtTimeMillis:li}})).apply(this,arguments)}function Pn(Me,be){const{projectId:$e,appId:gt,apiKey:Ut}=Me.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${$e}/apps/${gt}:exchangeDebugToken?key=${Ut}`,body:{debug_token:be}}}const _r="firebase-app-check-store";let Rn=null;function Un(){return Rn||(Rn=new Promise((Me,be)=>{try{const $e=indexedDB.open("firebase-app-check-database",1);$e.onsuccess=gt=>{Me(gt.target.result)},$e.onerror=gt=>{var Ut;be(Zt.create("storage-open",{originalErrorMessage:null===(Ut=gt.target.error)||void 0===Ut?void 0:Ut.message}))},$e.onupgradeneeded=gt=>{0===gt.oldVersion&&gt.target.result.createObjectStore(_r,{keyPath:"compositeKey"})}}catch($e){be(Zt.create("storage-open",{originalErrorMessage:$e?.message}))}}),Rn)}function pe(){return(pe=(0,ge.Z)(function*(Me,be){const gt=(yield Un()).transaction(_r,"readwrite"),An=gt.objectStore(_r).put({compositeKey:Me,value:be});return new Promise((ir,Xn)=>{An.onsuccess=Ln=>{ir()},gt.onerror=Ln=>{var ei;Xn(Zt.create("storage-set",{originalErrorMessage:null===(ei=Ln.target.error)||void 0===ei?void 0:ei.message}))}})})).apply(this,arguments)}const rn=new ht.Yd("@firebase/app-check");function Nt(Me,be){return(0,Et.hl)()?function Br(Me,be){return function Ze(Me,be){return pe.apply(this,arguments)}(function ot(Me){return`${Me.options.appId}-${Me.name}`}(Me),be)}(Me,be).catch($e=>{rn.warn(`Failed to write token to IndexedDB. Error: ${$e}`)}):Promise.resolve()}function rr(){return Vt().enabled}function Ft(){return we.apply(this,arguments)}function we(){return(we=(0,ge.Z)(function*(){const Me=Vt();if(Me.enabled&&Me.token)return Me.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const et={error:"UNKNOWN_ERROR"};function jt(Me){return Et.US.encodeString(JSON.stringify(Me),!1)}function xe(Me){return G.apply(this,arguments)}function G(){return(G=(0,ge.Z)(function*(Me,be=!1){const $e=Me.app;tn($e);const gt=Tt($e);let An,Ut=gt.token;if(Ut&&!H(Ut)&&(gt.token=void 0,Ut=void 0),!Ut){const Ln=yield gt.cachedTokenPromise;Ln&&(H(Ln)?Ut=Ln:yield Nt($e,void 0))}if(!be&&Ut&&H(Ut))return{token:Ut.token};let Xn,ir=!1;if(rr()){gt.exchangeTokenPromise||(gt.exchangeTokenPromise=Fn(Pn($e,yield Ft()),Me.heartbeatServiceProvider).finally(()=>{gt.exchangeTokenPromise=void 0}),ir=!0);const Ln=yield gt.exchangeTokenPromise;return yield Nt($e,Ln),gt.token=Ln,{token:Ln.token}}try{gt.exchangeTokenPromise||(gt.exchangeTokenPromise=gt.provider.getToken().finally(()=>{gt.exchangeTokenPromise=void 0}),ir=!0),Ut=yield Tt($e).exchangeTokenPromise}catch(Ln){"appCheck/throttled"===Ln.code?rn.warn(Ln.message):rn.error(Ln),An=Ln}return Ut?An?Xn=H(Ut)?{token:Ut.token,internalError:An}:Te(An):(Xn={token:Ut.token},gt.token=Ut,yield Nt($e,Ut)):Xn=Te(An),ir&&K($e,Xn),Xn})).apply(this,arguments)}function Be(){return(Be=(0,ge.Z)(function*(Me){const be=Me.app;tn(be);const{provider:$e}=Tt(be);if(rr()){const gt=yield Ft(),{token:Ut}=yield Fn(Pn(be,gt),Me.heartbeatServiceProvider);return{token:Ut}}{const{token:gt}=yield $e.getToken();return{token:gt}}})).apply(this,arguments)}function le(Me,be){const $e=Tt(Me),gt=$e.tokenObservers.filter(Ut=>Ut.next!==be);0===gt.length&&$e.tokenRefresher&&$e.tokenRefresher.isRunning()&&$e.tokenRefresher.stop(),$e.tokenObservers=gt}function ae(Me){const{app:be}=Me,$e=Tt(be);let gt=$e.tokenRefresher;gt||(gt=function Y(Me){const{app:be}=Me;return new pt((0,ge.Z)(function*(){let gt;if(gt=Tt(be).token?yield xe(Me,!0):yield xe(Me),gt.error)throw gt.error;if(gt.internalError)throw gt.internalError}),()=>!0,()=>{const $e=Tt(be);if($e.token){let gt=$e.token.issuedAtTimeMillis+.5*($e.token.expireTimeMillis-$e.token.issuedAtTimeMillis)+3e5;return gt=Math.min(gt,$e.token.expireTimeMillis-3e5),Math.max(0,gt-Date.now())}return 0},3e4,96e4)}(Me),$e.tokenRefresher=gt),!gt.isRunning()&&$e.isTokenAutoRefreshEnabled&&gt.start()}function K(Me,be){const $e=Tt(Me).tokenObservers;for(const gt of $e)try{"EXTERNAL"===gt.type&&null!=be.error?gt.error(be.error):gt.next(be)}catch{}}function H(Me){return Me.expireTimeMillis-Date.now()>0}function Te(Me){return{token:jt(et),error:Me}}class dt{constructor(be,$e){this.app=be,this.heartbeatServiceProvider=$e}_delete(){const{tokenObservers:be}=Tt(this.app);for(const $e of be)le(this.app,$e.next);return Promise.resolve()}}const Ki="app-check-internal";!function Kr(){(0,rt._registerComponent)(new it.wA("app-check",Me=>function $t(Me,be){return new dt(Me,be)}(Me.getProvider("app").getImmediate(),Me.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Me,be,$e)=>{Me.getProvider(Ki).initialize()})),(0,rt._registerComponent)(new it.wA(Ki,Me=>function an(Me){return{getToken:be=>xe(Me,be),getLimitedUseToken:()=>function ie(Me){return Be.apply(this,arguments)}(Me),addTokenListener:be=>function At(Me,be,$e,gt){const{app:Ut}=Me,An=Tt(Ut);if(An.tokenObservers=[...An.tokenObservers,{next:$e,error:gt,type:be}],An.token&&H(An.token)){const Xn=An.token;Promise.resolve().then(()=>{$e({token:Xn.token}),ae(Me)}).catch(()=>{})}An.cachedTokenPromise.then(()=>ae(Me))}(Me,"INTERNAL",be),removeTokenListener:be=>le(Me.app,be)}}(Me.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rt.registerVersion)("@firebase/app-check","0.8.0")}();class ss{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Ht,Le,R)=>{R.d(Le,{zQ:()=>nr,rT:()=>en,f7:()=>Wt,L6:()=>Ce,_Q:()=>_t,lh:()=>Tt,Qv:()=>ht,nw:()=>Vt});var p=R(4650),F=R(7579),B=R(9646),ce=R(9751),he=R(8996),Ie=R(6451),De=R(5363),ee=R(3900),Fe=R(4004),te=R(6063);class fe extends F.x{constructor(Ke=1/0,je=1/0,Je=te.l){super(),this._bufferSize=Ke,this._windowTime=je,this._timestampProvider=Je,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=je===1/0,this._bufferSize=Math.max(1,Ke),this._windowTime=Math.max(1,je)}next(Ke){const{isStopped:je,_buffer:Je,_infiniteTimeWindow:pt,_timestampProvider:Ct,_windowTime:vt}=this;je||(Je.push(Ke),!pt&&Je.push(Ct.now()+vt)),this._trimBuffer(),super.next(Ke)}_subscribe(Ke){this._throwIfClosed(),this._trimBuffer();const je=this._innerSubscribe(Ke),{_infiniteTimeWindow:Je,_buffer:pt}=this,Ct=pt.slice();for(let vt=0;vt<Ct.length&&!Ke.closed;vt+=Je?1:2)Ke.next(Ct[vt]);return this._checkFinalizedStatuses(Ke),je}_trimBuffer(){const{_bufferSize:Ke,_timestampProvider:je,_buffer:Je,_infiniteTimeWindow:pt}=this,Ct=(pt?1:2)*Ke;if(Ke<1/0&&Ct<Je.length&&Je.splice(0,Je.length-Ct),!pt){const vt=je.now();let Zt=0;for(let kt=1;kt<Je.length&&Je[kt]<=vt;kt+=2)Zt=kt;Zt&&Je.splice(0,Zt+1)}}}var Ee=R(3099);function Dt(Ve,Ke,je){let Je,pt=!1;return Ve&&"object"==typeof Ve?({bufferSize:Je=1/0,windowTime:Ke=1/0,refCount:pt=!1,scheduler:je}=Ve):Je=Ve??1/0,(0,Ee.B)({connector:()=>new fe(Je,Ke,je),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:pt})}var at=R(590),tt=R(576);function Rt(Ve,Ke){return(0,tt.m)(Ke)?(0,ee.w)(()=>Ve,Ke):(0,ee.w)(()=>Ve)}var qe=R(9468),Re=R(9300),Pt=R(4976),yt=R(2011),ge=R(6895),rt=R(6217);R(9260);const ht=new p.OlP("angularfire2.auth.use-emulator"),Ce=new p.OlP("angularfire2.auth.settings"),_t=new p.OlP("angularfire2.auth.tenant-id"),en=new p.OlP("angularfire2.auth.langugage-code"),Tt=new p.OlP("angularfire2.auth.use-device-language"),Wt=new p.OlP("angularfire.auth.persistence"),Vt=(Ve,Ke,je,Je,pt,Ct,vt,Zt)=>(0,yt.cc)(`${Ve.name}.auth`,"AngularFireAuth",Ve.name,()=>{const kt=Ke.runOutsideAngular(()=>Ve.auth());if(je&&kt.useEmulator(...je),Je&&(kt.tenantId=Je),kt.languageCode=pt,Ct&&kt.useDeviceLanguage(),vt)for(const[tn,un]of Object.entries(vt))kt.settings[tn]=un;return Zt&&kt.setPersistence(Zt),kt},[je,Je,pt,Ct,vt,Zt]);let nr=(()=>{class Ve{constructor(je,Je,pt,Ct,vt,Zt,kt,tn,un,vn,Fn,ar){const Xt=new F.x,fn=(0,B.of)(void 0).pipe((0,De.Q)(vt.outsideAngular),(0,ee.w)(()=>Ct.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,9568)))),(0,Fe.U)(()=>(0,yt.on)(je,Ct,Je)),(0,Fe.U)(Pn=>Vt(Pn,Ct,Zt,tn,un,vn,kt,Fn)),Dt({bufferSize:1,refCount:!1}));if((0,ge.PM)(pt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,B.of)(null);else{fn.pipe((0,at.P)()).subscribe();const $n=fn.pipe((0,ee.w)(xt=>xt.getRedirectResult().then(Rn=>Rn,()=>null)),Pt.iC,Dt({bufferSize:1,refCount:!1})),br=fn.pipe((0,ee.w)(xt=>new ce.y(Rn=>({unsubscribe:Ct.runOutsideAngular(()=>xt.onAuthStateChanged(Un=>Rn.next(Un),Un=>Rn.error(Un),()=>Rn.complete()))})))),_r=fn.pipe((0,ee.w)(xt=>new ce.y(Rn=>({unsubscribe:Ct.runOutsideAngular(()=>xt.onIdTokenChanged(Un=>Rn.next(Un),Un=>Rn.error(Un),()=>Rn.complete()))}))));this.authState=$n.pipe(Rt(br),(0,qe.R)(vt.outsideAngular),(0,De.Q)(vt.insideAngular)),this.user=$n.pipe(Rt(_r),(0,qe.R)(vt.outsideAngular),(0,De.Q)(vt.insideAngular)),this.idToken=this.user.pipe((0,ee.w)(xt=>xt?(0,he.D)(xt.getIdToken()):(0,B.of)(null))),this.idTokenResult=this.user.pipe((0,ee.w)(xt=>xt?(0,he.D)(xt.getIdTokenResult()):(0,B.of)(null))),this.credential=(0,Ie.T)($n,Xt,this.authState.pipe((0,Re.h)(xt=>!xt))).pipe((0,Fe.U)(xt=>xt?.user?xt:null),(0,qe.R)(vt.outsideAngular),(0,De.Q)(vt.insideAngular))}return(0,yt.pX)(this,fn,Ct,{spy:{apply:(Pn,$n,br)=>{(Pn.startsWith("signIn")||Pn.startsWith("createUser"))&&br.then(_r=>Xt.next(_r))}}})}}return Ve.\u0275fac=function(je){return new(je||Ve)(p.LFG(yt.Dh),p.LFG(yt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Pt.HU),p.LFG(ht,8),p.LFG(Ce,8),p.LFG(_t,8),p.LFG(en,8),p.LFG(Tt,8),p.LFG(Wt,8),p.LFG(rt.nm,8))},Ve.\u0275prov=p.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"any"}),Ve})()},33:(Ht,Le,R)=>{R.d(Le,{ST:()=>et,yb:()=>jt});var p=R(4650),F=R(4986),B=R(9751),ce=R(8996),he=R(9646),Ie=R(4976),De=R(8675),ee=R(4482),Fe=R(5403);function te(){return(0,ee.e)((xe,G)=>{let ie,Be=!1;xe.subscribe((0,Fe.x)(G,At=>{const le=ie;ie=At,Be&&G.next([le,At]),Be=!0}))})}var fe=R(4004),Ee=R(5026),Dt=R(4671);function tt(xe,G){return xe===G}var Rt=R(9300),qe=R(2011),Re=R(6895),yt=(R(9568),R(3942)),ge=R(2810),rt=R(2090),it=R(4859);function Ce(xe,G){if(void 0===G)return{merge:!1};if(void 0!==G.mergeFields&&void 0!==G.merge)throw new ge.WA("invalid-argument",`Invalid options passed to function ${xe}(): You cannot specify both "merge" and "mergeFields".`);return G}function _t(){if(typeof Uint8Array>"u")throw new ge.WA("unimplemented","Uint8Arrays are not available in this environment.")}function en(){if(!(0,ge.Me)())throw new ge.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Tt{constructor(G){this._delegate=G}static fromBase64String(G){return en(),new Tt(ge.Jj.fromBase64String(G))}static fromUint8Array(G){return _t(),new Tt(ge.Jj.fromUint8Array(G))}toBase64(){return en(),this._delegate.toBase64()}toUint8Array(){return _t(),this._delegate.toUint8Array()}isEqual(G){return this._delegate.isEqual(G._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wt(xe){return function Vt(xe,G){if("object"!=typeof xe||null===xe)return!1;const ie=xe;for(const Be of G)if(Be in ie&&"function"==typeof ie[Be])return!0;return!1}(xe,["next","error","complete"])}class nr{enableIndexedDbPersistence(G,ie){return(0,ge.ST)(G._delegate,{forceOwnership:ie})}enableMultiTabIndexedDbPersistence(G){return(0,ge.fH)(G._delegate)}clearIndexedDbPersistence(G){return(0,ge.Fc)(G._delegate)}}class Ue{constructor(G,ie,Be){this._delegate=ie,this._persistenceProvider=Be,this.INTERNAL={delete:()=>this.terminate()},G instanceof ge.l7||(this._appCompat=G)}get _databaseId(){return this._delegate._databaseId}settings(G){const ie=this._delegate._getSettings();!G.merge&&ie.host!==G.host&&(0,ge.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),G.merge&&delete(G=Object.assign(Object.assign({},ie),G)).merge,this._delegate._setSettings(G)}useEmulator(G,ie,Be={}){(0,ge.at)(this._delegate,G,ie,Be)}enableNetwork(){return(0,ge.Ix)(this._delegate)}disableNetwork(){return(0,ge.TF)(this._delegate)}enablePersistence(G){let ie=!1,Be=!1;return G&&(ie=!!G.synchronizeTabs,Be=!!G.experimentalForceOwningTab,(0,ge.Wi)("synchronizeTabs",ie,"experimentalForceOwningTab",Be)),ie?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Be)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,ge.Mx)(this._delegate)}onSnapshotsInSync(G){return(0,ge.sc)(this._delegate,G)}get app(){if(!this._appCompat)throw new ge.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(G){try{return new Xt(this,(0,ge.hJ)(this._delegate,G))}catch(ie){throw vt(ie,"collection()","Firestore.collection()")}}doc(G){try{return new Ct(this,(0,ge.JU)(this._delegate,G))}catch(ie){throw vt(ie,"doc()","Firestore.doc()")}}collectionGroup(G){try{return new vn(this,(0,ge.B$)(this._delegate,G))}catch(ie){throw vt(ie,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(G){return(0,ge.i3)(this._delegate,ie=>G(new je(this,ie)))}batch(){return(0,ge.qY)(this._delegate),new Je(new ge.PU(this._delegate,G=>(0,ge.GL)(this._delegate,G)))}loadBundle(G){return(0,ge.Pb)(this._delegate,G)}namedQuery(G){return(0,ge.L$)(this._delegate,G).then(ie=>ie?new vn(this,ie):null)}}class Ve extends ge.u7{constructor(G){super(),this.firestore=G}convertBytes(G){return new Tt(new ge.Jj(G))}convertReference(G){const ie=this.convertDocumentKey(G,this.firestore._databaseId);return Ct.forKey(ie,this.firestore,null)}}class je{constructor(G,ie){this._firestore=G,this._delegate=ie,this._userDataWriter=new Ve(G)}get(G){const ie=fn(G);return this._delegate.get(ie).then(Be=>new tn(this._firestore,new ge.xU(this._firestore._delegate,this._userDataWriter,Be._key,Be._document,Be.metadata,ie.converter)))}set(G,ie,Be){const At=fn(G);return Be?(Ce("Transaction.set",Be),this._delegate.set(At,ie,Be)):this._delegate.set(At,ie),this}update(G,ie,Be,...At){const le=fn(G);return 2===arguments.length?this._delegate.update(le,ie):this._delegate.update(le,ie,Be,...At),this}delete(G){const ie=fn(G);return this._delegate.delete(ie),this}}class Je{constructor(G){this._delegate=G}set(G,ie,Be){const At=fn(G);return Be?(Ce("WriteBatch.set",Be),this._delegate.set(At,ie,Be)):this._delegate.set(At,ie),this}update(G,ie,Be,...At){const le=fn(G);return 2===arguments.length?this._delegate.update(le,ie):this._delegate.update(le,ie,Be,...At),this}delete(G){const ie=fn(G);return this._delegate.delete(ie),this}commit(){return this._delegate.commit()}}class pt{constructor(G,ie,Be){this._firestore=G,this._userDataWriter=ie,this._delegate=Be}fromFirestore(G,ie){const Be=new ge.$q(this._firestore._delegate,this._userDataWriter,G._key,G._document,G.metadata,null);return this._delegate.fromFirestore(new un(this._firestore,Be),ie??{})}toFirestore(G,ie){return ie?this._delegate.toFirestore(G,ie):this._delegate.toFirestore(G)}static getInstance(G,ie){const Be=pt.INSTANCES;let At=Be.get(G);At||(At=new WeakMap,Be.set(G,At));let le=At.get(ie);return le||(le=new pt(G,new Ve(G),ie),At.set(ie,le)),le}}pt.INSTANCES=new WeakMap;class Ct{constructor(G,ie){this.firestore=G,this._delegate=ie,this._userDataWriter=new Ve(G)}static forPath(G,ie,Be){if(G.length%2!=0)throw new ge.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${G.canonicalString()} has ${G.length}`);return new Ct(ie,new ge.my(ie._delegate,Be,new ge.Ky(G)))}static forKey(G,ie,Be){return new Ct(ie,new ge.my(ie._delegate,Be,G))}get id(){return this._delegate.id}get parent(){return new Xt(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(G){try{return new Xt(this.firestore,(0,ge.hJ)(this._delegate,G))}catch(ie){throw vt(ie,"collection()","DocumentReference.collection()")}}isEqual(G){return(G=(0,rt.m9)(G))instanceof ge.my&&(0,ge.Eo)(this._delegate,G)}set(G,ie){ie=Ce("DocumentReference.set",ie);try{return ie?(0,ge.pl)(this._delegate,G,ie):(0,ge.pl)(this._delegate,G)}catch(Be){throw vt(Be,"setDoc()","DocumentReference.set()")}}update(G,ie,...Be){try{return 1===arguments.length?(0,ge.r7)(this._delegate,G):(0,ge.r7)(this._delegate,G,ie,...Be)}catch(At){throw vt(At,"updateDoc()","DocumentReference.update()")}}delete(){return(0,ge.oe)(this._delegate)}onSnapshot(...G){const ie=Zt(G),Be=kt(G,At=>new tn(this.firestore,new ge.xU(this.firestore._delegate,this._userDataWriter,At._key,At._document,At.metadata,this._delegate.converter)));return(0,ge.cf)(this._delegate,ie,Be)}get(G){let ie;return ie="cache"===G?.source?(0,ge.kl)(this._delegate):"server"===G?.source?(0,ge.Xk)(this._delegate):(0,ge.QT)(this._delegate),ie.then(Be=>new tn(this.firestore,new ge.xU(this.firestore._delegate,this._userDataWriter,Be._key,Be._document,Be.metadata,this._delegate.converter)))}withConverter(G){return new Ct(this.firestore,this._delegate.withConverter(G?pt.getInstance(this.firestore,G):null))}}function vt(xe,G,ie){return xe.message=xe.message.replace(G,ie),xe}function Zt(xe){for(const G of xe)if("object"==typeof G&&!Wt(G))return G;return{}}function kt(xe,G){var ie,Be;let At;return At=Wt(xe[0])?xe[0]:Wt(xe[1])?xe[1]:"function"==typeof xe[0]?{next:xe[0],error:xe[1],complete:xe[2]}:{next:xe[1],error:xe[2],complete:xe[3]},{next:le=>{At.next&&At.next(G(le))},error:null===(ie=At.error)||void 0===ie?void 0:ie.bind(At),complete:null===(Be=At.complete)||void 0===Be?void 0:Be.bind(At)}}class tn{constructor(G,ie){this._firestore=G,this._delegate=ie}get ref(){return new Ct(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(G){return this._delegate.data(G)}get(G,ie){return this._delegate.get(G,ie)}isEqual(G){return(0,ge.qK)(this._delegate,G._delegate)}}class un extends tn{data(G){const ie=this._delegate.data(G);return(0,ge.K9)(void 0!==ie,"Document in a QueryDocumentSnapshot should exist"),ie}}class vn{constructor(G,ie){this.firestore=G,this._delegate=ie,this._userDataWriter=new Ve(G)}where(G,ie,Be){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.ar)(G,ie,Be)))}catch(At){throw vt(At,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(G,ie){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.Xo)(G,ie)))}catch(Be){throw vt(Be,/(orderBy|where)\(\)/,"Query.$1()")}}limit(G){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.b9)(G)))}catch(ie){throw vt(ie,"limit()","Query.limit()")}}limitToLast(G){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.vh)(G)))}catch(ie){throw vt(ie,"limitToLast()","Query.limitToLast()")}}startAt(...G){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.e0)(...G)))}catch(ie){throw vt(ie,"startAt()","Query.startAt()")}}startAfter(...G){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.TQ)(...G)))}catch(ie){throw vt(ie,"startAfter()","Query.startAfter()")}}endBefore(...G){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.Lx)(...G)))}catch(ie){throw vt(ie,"endBefore()","Query.endBefore()")}}endAt(...G){try{return new vn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.Wu)(...G)))}catch(ie){throw vt(ie,"endAt()","Query.endAt()")}}isEqual(G){return(0,ge.iE)(this._delegate,G._delegate)}get(G){let ie;return ie="cache"===G?.source?(0,ge.UQ)(this._delegate):"server"===G?.source?(0,ge.zN)(this._delegate):(0,ge.PL)(this._delegate),ie.then(Be=>new ar(this.firestore,new ge.W(this.firestore._delegate,this._userDataWriter,this._delegate,Be._snapshot)))}onSnapshot(...G){const ie=Zt(G),Be=kt(G,At=>new ar(this.firestore,new ge.W(this.firestore._delegate,this._userDataWriter,this._delegate,At._snapshot)));return(0,ge.cf)(this._delegate,ie,Be)}withConverter(G){return new vn(this.firestore,this._delegate.withConverter(G?pt.getInstance(this.firestore,G):null))}}class Fn{constructor(G,ie){this._firestore=G,this._delegate=ie}get type(){return this._delegate.type}get doc(){return new un(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ar{constructor(G,ie){this._firestore=G,this._delegate=ie}get query(){return new vn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(G=>new un(this._firestore,G))}docChanges(G){return this._delegate.docChanges(G).map(ie=>new Fn(this._firestore,ie))}forEach(G,ie){this._delegate.forEach(Be=>{G.call(ie,new un(this._firestore,Be))})}isEqual(G){return(0,ge.qK)(this._delegate,G._delegate)}}class Xt extends vn{constructor(G,ie){super(G,ie),this.firestore=G,this._delegate=ie}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const G=this._delegate.parent;return G?new Ct(this.firestore,G):null}doc(G){try{return new Ct(this.firestore,void 0===G?(0,ge.JU)(this._delegate):(0,ge.JU)(this._delegate,G))}catch(ie){throw vt(ie,"doc()","CollectionReference.doc()")}}add(G){return(0,ge.ET)(this._delegate,G).then(ie=>new Ct(this.firestore,ie))}isEqual(G){return(0,ge.Eo)(this._delegate,G._delegate)}withConverter(G){return new Xt(this.firestore,this._delegate.withConverter(G?pt.getInstance(this.firestore,G):null))}}function fn(xe){return(0,ge.Cf)(xe,ge.my)}class Pn{constructor(...G){this._delegate=new ge.Lz(...G)}static documentId(){return new Pn(ge.Xb.keyField().canonicalString())}isEqual(G){return(G=(0,rt.m9)(G))instanceof ge.Lz&&this._delegate._internalPath.isEqual(G._internalPath)}}class $n{constructor(G){this._delegate=G}static serverTimestamp(){const G=(0,ge.Bt)();return G._methodName="FieldValue.serverTimestamp",new $n(G)}static delete(){const G=(0,ge.AK)();return G._methodName="FieldValue.delete",new $n(G)}static arrayUnion(...G){const ie=(0,ge.vr)(...G);return ie._methodName="FieldValue.arrayUnion",new $n(ie)}static arrayRemove(...G){const ie=(0,ge.Ab)(...G);return ie._methodName="FieldValue.arrayRemove",new $n(ie)}static increment(G){const ie=(0,ge.nP)(G);return ie._methodName="FieldValue.increment",new $n(ie)}isEqual(G){return this._delegate.isEqual(G._delegate)}}const br={Firestore:Ue,GeoPoint:ge.F8,Timestamp:ge.EK,Blob:Tt,Transaction:je,WriteBatch:Je,DocumentReference:Ct,DocumentSnapshot:tn,Query:vn,QueryDocumentSnapshot:un,QuerySnapshot:ar,CollectionReference:Xt,FieldPath:Pn,FieldValue:$n,setLogLevel:function Ke(xe){(0,ge.Ub)(xe)},CACHE_SIZE_UNLIMITED:ge.IX};!function xt(xe){(function _r(xe,G){xe.INTERNAL.registerComponent(new it.wA("firestore-compat",ie=>{const Be=ie.getProvider("app-compat").getImmediate(),At=ie.getProvider("firestore").getImmediate();return G(Be,At)},"PUBLIC").setServiceProps(Object.assign({},br)))})(xe,(G,ie)=>new Ue(G,ie,new nr)),xe.registerVersion("@firebase/firestore-compat","0.3.12")}(yt.Z);var Rn=R(1205),Un=R(6217),ur=R(9260);function Bn(xe,G){return function Br(xe,G=F.z){return new B.y(ie=>{let Be;return null!=G?G.schedule(()=>{Be=xe.onSnapshot({includeMetadataChanges:!0},ie)}):Be=xe.onSnapshot({includeMetadataChanges:!0},ie),()=>{Be?.()}})}(xe,G)}function Ze(xe,G){return Bn(xe,G).pipe((0,fe.U)(ie=>({payload:ie,type:"query"})))}function pe(xe,G){return Ze(xe,G).pipe((0,De.O)(void 0),te(),(0,fe.U)(([ie,Be])=>{const At=Be.payload.docChanges(),le=At.map(ae=>({type:ae.type,payload:ae}));return ie&&JSON.stringify(ie.payload.metadata)!==JSON.stringify(Be.payload.metadata)&&Be.payload.docs.forEach((ae,Y)=>{const K=At.find(Te=>Te.doc.ref.isEqual(ae.ref)),H=ie?.payload.docs.find(Te=>Te.ref.isEqual(ae.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(ae.metadata)||!K&&H&&JSON.stringify(H.metadata)===JSON.stringify(ae.metadata)||le.push({type:"modified",payload:{oldIndex:Y,newIndex:Y,type:"modified",doc:ae}})}),le}))}function de(xe,G,ie){return pe(xe,ie).pipe((0,Ee.R)((Be,At)=>function Xe(xe,G,ie){return G.forEach(Be=>{ie.indexOf(Be.type)>-1&&(xe=function rn(xe,G){switch(G.type){case"added":if(!xe[G.newIndex]||!xe[G.newIndex].doc.ref.isEqual(G.doc.ref))return ot(xe,G.newIndex,0,G);break;case"modified":if(null==xe[G.oldIndex]||xe[G.oldIndex].doc.ref.isEqual(G.doc.ref)){if(G.oldIndex!==G.newIndex){const ie=xe.slice();return ie.splice(G.oldIndex,1),ie.splice(G.newIndex,0,G),ie}return ot(xe,G.newIndex,1,G)}break;case"removed":if(xe[G.oldIndex]&&xe[G.oldIndex].doc.ref.isEqual(G.doc.ref))return ot(xe,G.oldIndex,1)}return xe}(xe,Be))}),xe}(Be,At.map(le=>le.payload),G),[]),function at(xe,G=Dt.y){return xe=xe??tt,(0,ee.e)((ie,Be)=>{let At,le=!0;ie.subscribe((0,Fe.x)(Be,ae=>{const Y=G(ae);(le||!xe(At,Y))&&(le=!1,At=Y,Be.next(ae))}))})}(),(0,fe.U)(Be=>Be.map(At=>({type:At.type,payload:At}))))}function ot(xe,G,ie,...Be){const At=xe.slice();return At.splice(G,ie,...Be),At}function yn(xe){return(!xe||0===xe.length)&&(xe=["added","removed","modified"]),xe}class Tn{constructor(G,ie,Be){this.ref=G,this.query=ie,this.afs=Be}stateChanges(G){let ie=pe(this.query,this.afs.schedulers.outsideAngular);return G&&G.length>0&&(ie=ie.pipe((0,fe.U)(Be=>Be.filter(At=>G.indexOf(At.type)>-1)))),ie.pipe((0,De.O)(void 0),te(),(0,Rt.h)(([Be,At])=>At.length>0||!Be),(0,fe.U)(([Be,At])=>At),Ie.iC)}auditTrail(G){return this.stateChanges(G).pipe((0,Ee.R)((ie,Be)=>[...ie,...Be],[]))}snapshotChanges(G){const ie=yn(G);return de(this.query,ie,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(G={}){return Ze(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(ie=>ie.payload.docs.map(Be=>G.idField?Object.assign(Object.assign({},Be.data()),{[G.idField]:Be.id}):Be.data())),Ie.iC)}get(G){return(0,ce.D)(this.query.get(G)).pipe(Ie.iC)}add(G){return this.ref.add(G)}doc(G){return new Nt(this.ref.doc(G),this.afs)}}class Nt{constructor(G,ie){this.ref=G,this.afs=ie}set(G,ie){return this.ref.set(G,ie)}update(G){return this.ref.update(G)}delete(){return this.ref.delete()}collection(G,ie){const Be=this.ref.collection(G),{ref:At,query:le}=Ye(Be,ie);return new Tn(At,le,this.afs)}snapshotChanges(){return function qn(xe,G){return Bn(xe,G).pipe((0,De.O)(void 0),te(),(0,fe.U)(([ie,Be])=>Be.exists?ie?.exists?{payload:Be,type:"modified"}:{payload:Be,type:"added"}:{payload:Be,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(G={}){return this.snapshotChanges().pipe((0,fe.U)(({payload:ie})=>G.idField?Object.assign(Object.assign({},ie.data()),{[G.idField]:ie.id}):ie.data()))}get(G){return(0,ce.D)(this.ref.get(G)).pipe(Ie.iC)}}class Nn{constructor(G,ie){this.query=G,this.afs=ie}stateChanges(G){return G&&0!==G.length?pe(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(ie=>ie.filter(Be=>G.indexOf(Be.type)>-1)),(0,Rt.h)(ie=>ie.length>0),Ie.iC):pe(this.query,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}auditTrail(G){return this.stateChanges(G).pipe((0,Ee.R)((ie,Be)=>[...ie,...Be],[]))}snapshotChanges(G){const ie=yn(G);return de(this.query,ie,this.afs.schedulers.outsideAngular).pipe(Ie.iC)}valueChanges(G={}){return Ze(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(Be=>Be.payload.docs.map(At=>G.idField?Object.assign({[G.idField]:At.id},At.data()):At.data())),Ie.iC)}get(G){return(0,ce.D)(this.query.get(G)).pipe(Ie.iC)}}const pn=new p.OlP("angularfire2.enableFirestorePersistence"),rr=new p.OlP("angularfire2.firestore.persistenceSettings"),Ft=new p.OlP("angularfire2.firestore.settings"),we=new p.OlP("angularfire2.firestore.use-emulator");function Ye(xe,G=(ie=>ie)){return{query:G(xe),ref:xe}}let et=(()=>{class xe{constructor(ie,Be,At,le,ae,Y,K,H,Te,dt,$t,an,re,oe,X,Pe,He){this.schedulers=K;const Bt=(0,qe.on)(ie,Y,Be),_n=Te;dt&&(0,Rn.nw)(Bt,Y,$t,re,oe,X,an,Pe),[this.firestore,this.persistenceEnabled$]=(0,qe.cc)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const ke=Y.runOutsideAngular(()=>Bt.firestore());if(le&&ke.settings(le),_n&&ke.useEmulator(..._n),At&&!(0,Re.PM)(ae)){const Ne=()=>{try{return(0,ce.D)(ke.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(St){return typeof console<"u"&&console.warn(St),(0,he.of)(!1)}};return[ke,Y.runOutsideAngular(Ne)]}return[ke,(0,he.of)(!1)]},[le,_n,At])}collection(ie,Be){let At;At="string"==typeof ie?this.firestore.collection(ie):ie;const{ref:le,query:ae}=Ye(At,Be),Y=this.schedulers.ngZone.run(()=>le);return new Tn(Y,ae,this)}collectionGroup(ie,Be){const At=Be||(ae=>ae),le=this.firestore.collectionGroup(ie);return new Nn(At(le),this)}doc(ie){let Be;Be="string"==typeof ie?this.firestore.doc(ie):ie;const At=this.schedulers.ngZone.run(()=>Be);return new Nt(At,this)}createId(){return this.firestore.collection("_").doc().id}}return xe.\u0275fac=function(ie){return new(ie||xe)(p.LFG(qe.Dh),p.LFG(qe.xv,8),p.LFG(pn,8),p.LFG(Ft,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ie.HU),p.LFG(rr,8),p.LFG(we,8),p.LFG(Rn.zQ,8),p.LFG(Rn.Qv,8),p.LFG(Rn.L6,8),p.LFG(Rn._Q,8),p.LFG(Rn.rT,8),p.LFG(Rn.lh,8),p.LFG(Rn.f7,8),p.LFG(Un.nm,8))},xe.\u0275prov=p.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"any"}),xe})(),jt=(()=>{class xe{constructor(){ur.Z.registerVersion("angularfire",Ie.q4.full,"fst-compat")}static enablePersistence(ie){return{ngModule:xe,providers:[{provide:pn,useValue:!0},{provide:rr,useValue:ie}]}}}return xe.\u0275fac=function(ie){return new(ie||xe)},xe.\u0275mod=p.oAB({type:xe}),xe.\u0275inj=p.cJS({providers:[et]}),xe})()},2011:(Ht,Le,R)=>{R.d(Le,{Dh:()=>ee,GT:()=>Ie,cc:()=>at,hO:()=>Dt,on:()=>te,pX:()=>he,xv:()=>Fe});var p=R(4650),F=R(9260),B=R(4976);Ht=R.hmd(Ht);const ce=["ngOnDestroy"],he=(Re,Pt,yt,ge={})=>new Proxy(Re,{get:(rt,it)=>yt.runOutsideAngular(()=>{var Et;if(Re[it])return!(null===(Et=ge?.spy)||void 0===Et)&&Et.get&&ge.spy.get(it,Re[it]),Re[it];if(ce.indexOf(it)>-1)return()=>{};const ht=Pt.toPromise().then(Ce=>{const _t=Ce&&Ce[it];return"function"==typeof _t?_t.bind(Ce):_t&&_t.then?_t.then(en=>yt.run(()=>en)):yt.run(()=>_t)});return new Proxy(()=>{},{get:(Ce,_t)=>ht[_t],apply:(Ce,_t,en)=>ht.then(Tt=>{var Wt;const Vt=Tt&&Tt(...en);return!(null===(Wt=ge?.spy)||void 0===Wt)&&Wt.apply&&ge.spy.apply(it,en,Vt),Vt})})})}),Ie=(Re,Pt)=>{Pt.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(ge=>{Object.defineProperty(Re.prototype,ge,Object.getOwnPropertyDescriptor(yt.prototype||yt,ge))})})};class De{constructor(Pt){return Pt}}const ee=new p.OlP("angularfire2.app.options"),Fe=new p.OlP("angularfire2.app.name");function te(Re,Pt,yt){const rt="object"==typeof yt&&yt||{};rt.name=rt.name||"string"==typeof yt&&yt||"[DEFAULT]";const Et=F.Z.apps.filter(ht=>ht&&ht.name===rt.name)[0]||Pt.runOutsideAngular(()=>F.Z.initializeApp(Re,rt));try{JSON.stringify(Re)!==JSON.stringify(Et.options)&&fe("error",`${Et.name} Firebase App already initialized with different options${Ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new De(Et)}const fe=(Re,...Pt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Re](...Pt)},Ee={provide:De,useFactory:te,deps:[ee,p.R0b,[new p.FiY,Fe]]};let Dt=(()=>{class Re{constructor(yt){F.Z.registerVersion("angularfire",B.q4.full,"core"),F.Z.registerVersion("angularfire",B.q4.full,"app-compat"),F.Z.registerVersion("angular",p.q4F.full,yt.toString())}static initializeApp(yt,ge){return{ngModule:Re,providers:[{provide:ee,useValue:yt},{provide:Fe,useValue:ge}]}}}return Re.\u0275fac=function(yt){return new(yt||Re)(p.LFG(p.Lbi))},Re.\u0275mod=p.oAB({type:Re}),Re.\u0275inj=p.cJS({providers:[Ee]}),Re})();function at(Re,Pt,yt,ge,rt){const[,it,Et]=globalThis.\u0275AngularfireInstanceCache.find(ht=>ht[0]===Re)||[];if(it)return function tt(Re,Pt){try{return Re.toString()===Pt.toString()}catch{return Re===Pt}}(rt,Et)||(qe("error",`${Pt} was already initialized on the ${yt} Firebase App with different settings.${Rt?" You may need to reload as Firebase is not HMR aware.":""}`),qe("warn",{is:rt,was:Et})),it;{const ht=ge();return globalThis.\u0275AngularfireInstanceCache.push([Re,ht,rt]),ht}}const Rt=!!Ht.hot,qe=(Re,...Pt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Re](...Pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Ht,Le,R)=>{R.d(Le,{q4:()=>xa,iC:()=>cl,HU:()=>td,vb:()=>hu,JM:()=>ul});var p=R(4650),F=R(259),B=R(5861),ce=R(6881),he=R(2090),Ie=R(4859),De=R(1877);let Fe,te;const Dt=new WeakMap,at=new WeakMap,tt=new WeakMap,Rt=new WeakMap,qe=new WeakMap;let yt={get(w,T,j){if(w instanceof IDBTransaction){if("done"===T)return at.get(w);if("objectStoreNames"===T)return w.objectStoreNames||tt.get(w);if("store"===T)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return Et(w[T])},set:(w,T,j)=>(w[T]=j,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function it(w){return"function"==typeof w?function rt(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(ht(this),T),Et(Dt.get(this))}:function(...T){return Et(w.apply(ht(this),T))}:function(T,...j){const ne=w.call(ht(this),T,...j);return tt.set(ne,T.sort?T.sort():[T]),Et(ne)}}(w):(w instanceof IDBTransaction&&function Pt(w){if(at.has(w))return;const T=new Promise((j,ne)=>{const ye=()=>{w.removeEventListener("complete",Se),w.removeEventListener("error",ct),w.removeEventListener("abort",ct)},Se=()=>{j(),ye()},ct=()=>{ne(w.error||new DOMException("AbortError","AbortError")),ye()};w.addEventListener("complete",Se),w.addEventListener("error",ct),w.addEventListener("abort",ct)});at.set(w,T)}(w),((w,T)=>T.some(j=>w instanceof j))(w,function fe(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,yt):w)}function Et(w){if(w instanceof IDBRequest)return function Re(w){const T=new Promise((j,ne)=>{const ye=()=>{w.removeEventListener("success",Se),w.removeEventListener("error",ct)},Se=()=>{j(Et(w.result)),ye()},ct=()=>{ne(w.error),ye()};w.addEventListener("success",Se),w.addEventListener("error",ct)});return T.then(j=>{j instanceof IDBCursor&&Dt.set(j,w)}).catch(()=>{}),qe.set(T,w),T}(w);if(Rt.has(w))return Rt.get(w);const T=it(w);return T!==w&&(Rt.set(w,T),qe.set(T,w)),T}const ht=w=>qe.get(w),en=["get","getKey","getAll","getAllKeys","count"],Tt=["put","add","delete","clear"],Wt=new Map;function Vt(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Wt.get(T))return Wt.get(T);const j=T.replace(/FromIndex$/,""),ne=T!==j,ye=Tt.includes(j);if(!(j in(ne?IDBIndex:IDBObjectStore).prototype)||!ye&&!en.includes(j))return;const Se=function(){var ct=(0,B.Z)(function*(nn,...Jt){const In=this.transaction(nn,ye?"readwrite":"readonly");let bn=In.store;return ne&&(bn=bn.index(Jt.shift())),(yield Promise.all([bn[j](...Jt),ye&&In.done]))[0]});return function(Jt){return ct.apply(this,arguments)}}();return Wt.set(T,Se),Se}!function ge(w){yt=w(yt)}(w=>({...w,get:(T,j,ne)=>Vt(T,j)||w.get(T,j,ne),has:(T,j)=>!!Vt(T,j)||w.has(T,j)}));const nr="@firebase/installations",Ke="w:0.6.4",je="FIS_v2",kt=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tn(w){return w instanceof he.ZR&&w.code.includes("request-failed")}function un({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function vn(w){return{token:w.token,requestStatus:2,expiresIn:br(w.expiresIn),creationTime:Date.now()}}function Fn(w,T){return ar.apply(this,arguments)}function ar(){return(ar=(0,B.Z)(function*(w,T){const ne=(yield T.json()).error;return kt.create("request-failed",{requestName:w,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Xt({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function fn(w,{refreshToken:T}){const j=Xt(w);return j.append("Authorization",function _r(w){return`${je} ${w}`}(T)),j}function Pn(w){return $n.apply(this,arguments)}function $n(){return($n=(0,B.Z)(function*(w){const T=yield w();return T.status>=500&&T.status<600?w():T})).apply(this,arguments)}function br(w){return Number(w.replace("s","000"))}function xt(w,T){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:T},{fid:j}){const ne=un(w),ye=Xt(w),Se=T.getImmediate({optional:!0});if(Se){const In=yield Se.getHeartbeatsHeader();In&&ye.append("x-firebase-client",In)}const nn={method:"POST",headers:ye,body:JSON.stringify({fid:j,authVersion:je,appId:w.appId,sdkVersion:Ke})},Jt=yield Pn(()=>fetch(ne,nn));if(Jt.ok){const In=yield Jt.json();return{fid:In.fid||j,registrationStatus:2,refreshToken:In.refreshToken,authToken:vn(In.authToken)}}throw yield Fn("Create Installation",Jt)})).apply(this,arguments)}function Un(w){return new Promise(T=>{setTimeout(T,w)})}const Br=/^[cdef][\w-]{21}$/;function qn(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const j=function Ze(w){return function ur(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Br.test(j)?j:""}catch{return""}}function pe(w){return`${w.appName}!${w.appId}`}const de=new Map;function Xe(w,T){const j=pe(w);yn(j,T),function Tn(w,T){const j=function Nn(){return!Nt&&"BroadcastChannel"in self&&(Nt=new BroadcastChannel("[Firebase] FID Change"),Nt.onmessage=w=>{yn(w.data.key,w.data.fid)}),Nt}();j&&j.postMessage({key:w,fid:T}),function pn(){0===de.size&&Nt&&(Nt.close(),Nt=null)}()}(j,T)}function yn(w,T){const j=de.get(w);if(j)for(const ne of j)ne(T)}let Nt=null;const we="firebase-installations-store";let Ye=null;function et(){return Ye||(Ye=function Ce(w,T,{blocked:j,upgrade:ne,blocking:ye,terminated:Se}={}){const ct=indexedDB.open(w,T),nn=Et(ct);return ne&&ct.addEventListener("upgradeneeded",Jt=>{ne(Et(ct.result),Jt.oldVersion,Jt.newVersion,Et(ct.transaction))}),j&&ct.addEventListener("blocked",()=>j()),nn.then(Jt=>{Se&&Jt.addEventListener("close",()=>Se()),ye&&Jt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),nn}("firebase-installations-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(we)}})),Ye}function jt(w,T){return xe.apply(this,arguments)}function xe(){return(xe=(0,B.Z)(function*(w,T){const j=pe(w),ye=(yield et()).transaction(we,"readwrite"),Se=ye.objectStore(we),ct=yield Se.get(j);return yield Se.put(T,j),yield ye.done,(!ct||ct.fid!==T.fid)&&Xe(w,T.fid),T})).apply(this,arguments)}function G(w){return ie.apply(this,arguments)}function ie(){return(ie=(0,B.Z)(function*(w){const T=pe(w),ne=(yield et()).transaction(we,"readwrite");yield ne.objectStore(we).delete(T),yield ne.done})).apply(this,arguments)}function Be(w,T){return At.apply(this,arguments)}function At(){return(At=(0,B.Z)(function*(w,T){const j=pe(w),ye=(yield et()).transaction(we,"readwrite"),Se=ye.objectStore(we),ct=yield Se.get(j),nn=T(ct);return void 0===nn?yield Se.delete(j):yield Se.put(nn,j),yield ye.done,nn&&(!ct||ct.fid!==nn.fid)&&Xe(w,nn.fid),nn})).apply(this,arguments)}function le(w){return ae.apply(this,arguments)}function ae(){return(ae=(0,B.Z)(function*(w){let T;const j=yield Be(w.appConfig,ne=>{const ye=Y(ne),Se=K(w,ye);return T=Se.registrationPromise,Se.installationEntry});return""===j.fid?{installationEntry:yield T}:{installationEntry:j,registrationPromise:T}})).apply(this,arguments)}function Y(w){return re(w||{fid:qn(),registrationStatus:0})}function K(w,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(kt.create("app-offline"))};const j={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},ne=function H(w,T){return Te.apply(this,arguments)}(w,j);return{installationEntry:j,registrationPromise:ne}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:dt(w)}:{installationEntry:T}}function Te(){return(Te=(0,B.Z)(function*(w,T){try{const j=yield xt(w,T);return jt(w.appConfig,j)}catch(j){throw tn(j)&&409===j.customData.serverCode?yield G(w.appConfig):yield jt(w.appConfig,{fid:T.fid,registrationStatus:0}),j}})).apply(this,arguments)}function dt(w){return $t.apply(this,arguments)}function $t(){return($t=(0,B.Z)(function*(w){let T=yield an(w.appConfig);for(;1===T.registrationStatus;)yield Un(100),T=yield an(w.appConfig);if(0===T.registrationStatus){const{installationEntry:j,registrationPromise:ne}=yield le(w);return ne||j}return T})).apply(this,arguments)}function an(w){return Be(w,T=>{if(!T)throw kt.create("installation-not-found");return re(T)})}function re(w){return function oe(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function X(w,T){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:T},j){const ne=He(w,j),ye=fn(w,j),Se=T.getImmediate({optional:!0});if(Se){const In=yield Se.getHeartbeatsHeader();In&&ye.append("x-firebase-client",In)}const nn={method:"POST",headers:ye,body:JSON.stringify({installation:{sdkVersion:Ke,appId:w.appId}})},Jt=yield Pn(()=>fetch(ne,nn));if(Jt.ok)return vn(yield Jt.json());throw yield Fn("Generate Auth Token",Jt)})).apply(this,arguments)}function He(w,{fid:T}){return`${un(w)}/${T}/authTokens:generate`}function Bt(w){return _n.apply(this,arguments)}function _n(){return(_n=(0,B.Z)(function*(w,T=!1){let j;const ne=yield Be(w.appConfig,Se=>{if(!Vn(Se))throw kt.create("not-registered");const ct=Se.authToken;if(!T&&Zn(ct))return Se;if(1===ct.requestStatus)return j=ke(w,T),Se;{if(!navigator.onLine)throw kt.create("app-offline");const nn=jn(Se);return j=wt(w,nn),nn}});return j?yield j:ne.authToken})).apply(this,arguments)}function ke(w,T){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,B.Z)(function*(w,T){let j=yield St(w.appConfig);for(;1===j.authToken.requestStatus;)yield Un(100),j=yield St(w.appConfig);const ne=j.authToken;return 0===ne.requestStatus?Bt(w,T):ne})).apply(this,arguments)}function St(w){return Be(w,T=>{if(!Vn(T))throw kt.create("not-registered");return function Rr(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function wt(w,T){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,B.Z)(function*(w,T){try{const j=yield X(w,T),ne=Object.assign(Object.assign({},T),{authToken:j});return yield jt(w.appConfig,ne),j}catch(j){if(!tn(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const ne=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield jt(w.appConfig,ne)}else yield G(w.appConfig);throw j}})).apply(this,arguments)}function Vn(w){return void 0!==w&&2===w.registrationStatus}function Zn(w){return 2===w.requestStatus&&!function Tr(w){const T=Date.now();return T<w.creationTime||w.creationTime+w.expiresIn<T+36e5}(w)}function jn(w){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:T})}function Wr(){return(Wr=(0,B.Z)(function*(w){const T=w,{installationEntry:j,registrationPromise:ne}=yield le(T);return ne?ne.catch(console.error):Bt(T).catch(console.error),j.fid})).apply(this,arguments)}function Ns(){return(Ns=(0,B.Z)(function*(w,T=!1){const j=w;return yield Qn(j),(yield Bt(j,T)).token})).apply(this,arguments)}function Qn(w){return ui.apply(this,arguments)}function ui(){return(ui=(0,B.Z)(function*(w){const{registrationPromise:T}=yield le(w);T&&(yield T)})).apply(this,arguments)}function qr(w){return kt.create("missing-app-config-values",{valueName:w})}const $r="installations",Xr=w=>{const T=w.getProvider("app").getImmediate(),j=function ss(w){if(!w||!w.options)throw qr("App Configuration");if(!w.name)throw qr("App Name");const T=["projectId","apiKey","appId"];for(const j of T)if(!w.options[j])throw qr(j);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(T);return{app:T,appConfig:j,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},os=w=>{const T=w.getProvider("app").getImmediate(),j=(0,ce._getProvider)(T,$r).getImmediate();return{getId:()=>function Gr(w){return Wr.apply(this,arguments)}(j),getToken:ye=>function Or(w){return Ns.apply(this,arguments)}(j,ye)}};(function Nr(){(0,ce._registerComponent)(new Ie.wA($r,Xr,"PUBLIC")),(0,ce._registerComponent)(new Ie.wA("installations-internal",os,"PRIVATE"))})(),(0,ce.registerVersion)(nr,"0.6.4"),(0,ce.registerVersion)(nr,"0.6.4","esm2017");const Bi="@firebase/remote-config",dr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ea{constructor(T,j,ne,ye){this.client=T,this.storage=j,this.storageCache=ne,this.logger=ye}isCachedDataFresh(T,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-j,ye=ne<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ye}.`),ye}fetch(T){var j=this;return(0,B.Z)(function*(){const[ne,ye]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(ye&&j.isCachedDataFresh(T.cacheMaxAgeMillis,ne))return ye;T.eTag=ye&&ye.eTag;const Se=yield j.client.fetch(T),ct=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Se.status&&ct.push(j.storage.setLastSuccessfulFetchResponse(Se)),yield Promise.all(ct),Se})()}}function as(w=navigator){return w.languages&&w.languages[0]||w.language}class Lo{constructor(T,j,ne,ye,Se,ct){this.firebaseInstallations=T,this.sdkVersion=j,this.namespace=ne,this.projectId=ye,this.apiKey=Se,this.appId=ct}fetch(T){var j=this;return(0,B.Z)(function*(){const[ne,ye]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),ct=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,nn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Jt={sdk_version:j.sdkVersion,app_instance_id:ne,app_instance_id_token:ye,app_id:j.appId,language_code:as()},In={method:"POST",headers:nn,body:JSON.stringify(Jt)},bn=fetch(ct,In),zn=new Promise((uo,Pa)=>{T.signal.addEventListener(()=>{const gu=new Error("The operation was aborted.");gu.name="AbortError",Pa(gu)})});let gs;try{yield Promise.race([bn,zn]),gs=yield bn}catch(uo){let Pa="fetch-client-network";throw"AbortError"===uo?.name&&(Pa="fetch-timeout"),dr.create(Pa,{originalErrorMessage:uo?.message})}let _i=gs.status;const Ui=gs.headers.get("ETag")||void 0;let ha,pu;if(200===gs.status){let uo;try{uo=yield gs.json()}catch(Pa){throw dr.create("fetch-client-parse",{originalErrorMessage:Pa?.message})}ha=uo.entries,pu=uo.state}if("INSTANCE_STATE_UNSPECIFIED"===pu?_i=500:"NO_CHANGE"===pu?_i=304:("NO_TEMPLATE"===pu||"EMPTY_CONFIG"===pu)&&(ha={}),304!==_i&&200!==_i)throw dr.create("fetch-status",{httpStatus:_i});return{status:_i,eTag:Ui,config:ha}})()}}class Co{constructor(T,j){this.client=T,this.storage=j}fetch(T){var j=this;return(0,B.Z)(function*(){const ne=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(T,ne)})()}attemptFetch(T,{throttleEndTimeMillis:j,backoffCount:ne}){var ye=this;return(0,B.Z)(function*(){yield function us(w,T){return new Promise((j,ne)=>{const ye=Math.max(T-Date.now(),0),Se=setTimeout(j,ye);w.addEventListener(()=>{clearTimeout(Se),ne(dr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,j);try{const Se=yield ye.client.fetch(T);return yield ye.storage.deleteThrottleMetadata(),Se}catch(Se){if(!function Vo(w){if(!(w instanceof he.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Se))throw Se;const ct={throttleEndTimeMillis:Date.now()+(0,he.$s)(ne),backoffCount:ne+1};return yield ye.storage.setThrottleMetadata(ct),ye.attemptFetch(T,ct)}})()}}class Zs{constructor(T,j,ne,ye,Se){this.app=T,this._client=j,this._storageCache=ne,this._storage=ye,this._logger=Se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kr(w,T){const j=w.target.error||void 0;return dr.create(T,{originalErrorMessage:j&&j?.message})}const Zi="app_namespace_store";class ta{constructor(T,j,ne,ye=function co(){return new Promise((w,T)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ne=>{T(kr(ne,"storage-open"))},j.onsuccess=ne=>{w(ne.target.result)},j.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Zi,{keyPath:"compositeKey"})}}catch(j){T(dr.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=T,this.appName=j,this.namespace=ne,this.openDbPromise=ye}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var j=this;return(0,B.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((ye,Se)=>{const nn=ne.transaction([Zi],"readonly").objectStore(Zi),Jt=j.createCompositeKey(T);try{const In=nn.get(Jt);In.onerror=bn=>{Se(kr(bn,"storage-get"))},In.onsuccess=bn=>{const zn=bn.target.result;ye(zn?zn.value:void 0)}}catch(In){Se(dr.create("storage-get",{originalErrorMessage:In?.message}))}})})()}set(T,j){var ne=this;return(0,B.Z)(function*(){const ye=yield ne.openDbPromise;return new Promise((Se,ct)=>{const Jt=ye.transaction([Zi],"readwrite").objectStore(Zi),In=ne.createCompositeKey(T);try{const bn=Jt.put({compositeKey:In,value:j});bn.onerror=zn=>{ct(kr(zn,"storage-set"))},bn.onsuccess=()=>{Se()}}catch(bn){ct(dr.create("storage-set",{originalErrorMessage:bn?.message}))}})})()}delete(T){var j=this;return(0,B.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((ye,Se)=>{const nn=ne.transaction([Zi],"readwrite").objectStore(Zi),Jt=j.createCompositeKey(T);try{const In=nn.delete(Jt);In.onerror=bn=>{Se(kr(bn,"storage-delete"))},In.onsuccess=()=>{ye()}}catch(In){Se(dr.create("storage-delete",{originalErrorMessage:In?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class yr{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,B.Z)(function*(){const j=T.storage.getLastFetchStatus(),ne=T.storage.getLastSuccessfulFetchTimestampMillis(),ye=T.storage.getActiveConfig(),Se=yield j;Se&&(T.lastFetchStatus=Se);const ct=yield ne;ct&&(T.lastSuccessfulFetchTimestampMillis=ct);const nn=yield ye;nn&&(T.activeConfig=nn)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function hi(){return ho.apply(this,arguments)}function ho(){return(ho=(0,B.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}let ki,ti;!function Ys(){(0,ce._registerComponent)(new Ie.wA("remote-config",function w(T,{instanceIdentifier:j}){const ne=T.getProvider("app").getImmediate(),ye=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw dr.create("registration-window");if(!(0,he.hl)())throw dr.create("indexed-db-unavailable");const{projectId:Se,apiKey:ct,appId:nn}=ne.options;if(!Se)throw dr.create("registration-project-id");if(!ct)throw dr.create("registration-api-key");if(!nn)throw dr.create("registration-app-id");const Jt=new ta(nn,ne.name,j=j||"firebase"),In=new yr(Jt),bn=new De.Yd(Bi);bn.logLevel=De.in.ERROR;const zn=new Lo(ye,ce.SDK_VERSION,j,Se,ct,nn),gs=new Co(zn,Jt),_i=new ea(gs,Jt,In,bn),Ui=new Zs(ne,_i,In,Jt,bn);return function ir(w){const T=(0,he.m9)(w);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ui),Ui},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Bi,"0.4.4"),(0,ce.registerVersion)(Bi,"0.4.4","esm2017")}();const Qs=new WeakMap,gi=new WeakMap,zr=new WeakMap,Es=new WeakMap,On=new WeakMap;let Ei={get(w,T,j){if(w instanceof IDBTransaction){if("done"===T)return gi.get(w);if("objectStoreNames"===T)return w.objectStoreNames||zr.get(w);if("store"===T)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return cs(w[T])},set:(w,T,j)=>(w[T]=j,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function To(w){return"function"==typeof w?function Us(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Uo(){return ti||(ti=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(Bo(this),T),cs(Qs.get(this))}:function(...T){return cs(w.apply(Bo(this),T))}:function(T,...j){const ne=w.call(Bo(this),T,...j);return zr.set(ne,T.sort?T.sort():[T]),cs(ne)}}(w):(w instanceof IDBTransaction&&function Vs(w){if(gi.has(w))return;const T=new Promise((j,ne)=>{const ye=()=>{w.removeEventListener("complete",Se),w.removeEventListener("error",ct),w.removeEventListener("abort",ct)},Se=()=>{j(),ye()},ct=()=>{ne(w.error||new DOMException("AbortError","AbortError")),ye()};w.addEventListener("complete",Se),w.addEventListener("error",ct),w.addEventListener("abort",ct)});gi.set(w,T)}(w),((w,T)=>T.some(j=>w instanceof j))(w,function ya(){return ki||(ki=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Ei):w)}function cs(w){if(w instanceof IDBRequest)return function Js(w){const T=new Promise((j,ne)=>{const ye=()=>{w.removeEventListener("success",Se),w.removeEventListener("error",ct)},Se=()=>{j(cs(w.result)),ye()},ct=()=>{ne(w.error),ye()};w.addEventListener("success",Se),w.addEventListener("error",ct)});return T.then(j=>{j instanceof IDBCursor&&Qs.set(j,w)}).catch(()=>{}),On.set(T,w),T}(w);if(Es.has(w))return Es.get(w);const T=To(w);return T!==w&&(Es.set(w,T),On.set(T,w)),T}const Bo=w=>On.get(w);function It(w,T,{blocked:j,upgrade:ne,blocking:ye,terminated:Se}={}){const ct=indexedDB.open(w,T),nn=cs(ct);return ne&&ct.addEventListener("upgradeneeded",Jt=>{ne(cs(ct.result),Jt.oldVersion,Jt.newVersion,cs(ct.transaction))}),j&&ct.addEventListener("blocked",()=>j()),nn.then(Jt=>{Se&&Jt.addEventListener("close",()=>Se()),ye&&Jt.addEventListener("versionchange",()=>ye())}).catch(()=>{}),nn}function Jn(w,{blocked:T}={}){const j=indexedDB.deleteDatabase(w);return T&&j.addEventListener("blocked",()=>T()),cs(j).then(()=>{})}const jo=["get","getKey","getAll","getAllKeys","count"],Yi=["put","add","delete","clear"],Pr=new Map;function k(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Pr.get(T))return Pr.get(T);const j=T.replace(/FromIndex$/,""),ne=T!==j,ye=Yi.includes(j);if(!(j in(ne?IDBIndex:IDBObjectStore).prototype)||!ye&&!jo.includes(j))return;const Se=function(){var ct=(0,B.Z)(function*(nn,...Jt){const In=this.transaction(nn,ye?"readwrite":"readonly");let bn=In.store;return ne&&(bn=bn.index(Jt.shift())),(yield Promise.all([bn[j](...Jt),ye&&In.done]))[0]});return function(Jt){return ct.apply(this,arguments)}}();return Pr.set(T,Se),Se}!function Fr(w){Ei=w(Ei)}(w=>({...w,get:(T,j,ne)=>k(T,j)||w.get(T,j,ne),has:(T,j)=>!!k(T,j)||w.has(T,j)}));const P="/firebase-messaging-sw.js",M="/firebase-cloud-messaging-push-scope",q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ln="google.c.a.c_id",Yn="google.c.a.c_l",Xs="google.c.a.ts",ws="google.c.a.e";var wi=(()=>{return(w=wi||(wi={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",wi;var w})();function Qi(w){const T=new Uint8Array(w);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bs(w){const j=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(j),ye=new Uint8Array(ne.length);for(let Se=0;Se<ne.length;++Se)ye[Se]=ne.charCodeAt(Se);return ye}const ni="fcm_token_details_db",Va="fcm_token_object_Store";function va(w){return $o.apply(this,arguments)}function $o(){return $o=(0,B.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Se=>Se.name).includes(ni))return null;let T=null;return(yield It(ni,5,{upgrade:(ne=(0,B.Z)(function*(ye,Se,ct,nn){var Jt;if(Se<2||!ye.objectStoreNames.contains(Va))return;const In=nn.objectStore(Va),bn=yield In.index("fcmSenderId").get(w);if(yield In.clear(),bn)if(2===Se){const zn=bn;if(!zn.auth||!zn.p256dh||!zn.endpoint)return;T={token:zn.fcmToken,createTime:null!==(Jt=zn.createTime)&&void 0!==Jt?Jt:Date.now(),subscriptionOptions:{auth:zn.auth,p256dh:zn.p256dh,endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:"string"==typeof zn.vapidKey?zn.vapidKey:Qi(zn.vapidKey)}}}else if(3===Se){const zn=bn;T={token:zn.fcmToken,createTime:zn.createTime,subscriptionOptions:{auth:Qi(zn.auth),p256dh:Qi(zn.p256dh),endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:Qi(zn.vapidKey)}}}else if(4===Se){const zn=bn;T={token:zn.fcmToken,createTime:zn.createTime,subscriptionOptions:{auth:Qi(zn.auth),p256dh:Qi(zn.p256dh),endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:Qi(zn.vapidKey)}}}}),function(Se,ct,nn,Jt){return ne.apply(this,arguments)})})).close(),yield Jn(ni),yield Jn("fcm_vapid_details_db"),yield Jn("undefined"),Ho(T)?T:null;var ne}),$o.apply(this,arguments)}function Ho(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:T}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Fi="firebase-messaging-store";let js=null;function _a(){return js||(js=It("firebase-messaging-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(Fi)}})),js}function eo(w){return zo.apply(this,arguments)}function zo(){return(zo=(0,B.Z)(function*(w){const T=Ua(w),ne=yield(yield _a()).transaction(Fi).objectStore(Fi).get(T);if(ne)return ne;{const ye=yield va(w.appConfig.senderId);if(ye)return yield fo(w,ye),ye}})).apply(this,arguments)}function fo(w,T){return So.apply(this,arguments)}function So(){return(So=(0,B.Z)(function*(w,T){const j=Ua(w),ye=(yield _a()).transaction(Fi,"readwrite");return yield ye.objectStore(Fi).put(T,j),yield ye.done,T})).apply(this,arguments)}function xi(w){return ds.apply(this,arguments)}function ds(){return(ds=(0,B.Z)(function*(w){const T=Ua(w),ne=(yield _a()).transaction(Fi,"readwrite");yield ne.objectStore(Fi).delete(T),yield ne.done})).apply(this,arguments)}function Ua({appConfig:w}){return w.appId}const pr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ii(w,T){return vr.apply(this,arguments)}function vr(){return(vr=(0,B.Z)(function*(w,T){const j=yield Ds(w),ne=to(T),ye={method:"POST",headers:j,body:JSON.stringify(ne)};let Se;try{Se=yield(yield fetch(Ea(w.appConfig),ye)).json()}catch(ct){throw pr.create("token-subscribe-failed",{errorInfo:ct?.toString()})}if(Se.error)throw pr.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw pr.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function Er(w,T){return ra.apply(this,arguments)}function ra(){return(ra=(0,B.Z)(function*(w,T){const j=yield Ds(w),ne=to(T.subscriptionOptions),ye={method:"PATCH",headers:j,body:JSON.stringify(ne)};let Se;try{Se=yield(yield fetch(`${Ea(w.appConfig)}/${T.token}`,ye)).json()}catch(ct){throw pr.create("token-update-failed",{errorInfo:ct?.toString()})}if(Se.error)throw pr.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw pr.create("token-update-no-token");return Se.token})).apply(this,arguments)}function Mo(w,T){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,B.Z)(function*(w,T){const ne={method:"DELETE",headers:yield Ds(w)};try{const Se=yield(yield fetch(`${Ea(w.appConfig)}/${T}`,ne)).json();if(Se.error)throw pr.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(ye){throw pr.create("token-unsubscribe-failed",{errorInfo:ye?.toString()})}})).apply(this,arguments)}function Ea({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function Ds(w){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,B.Z)(function*({appConfig:w,installations:T}){const j=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function to({p256dh:w,auth:T,endpoint:j,vapidKey:ne}){const ye={web:{endpoint:j,auth:T,p256dh:w}};return ne!==q&&(ye.web.applicationPubKey=ne),ye}const ia=6048e5;function hs(w){return $i.apply(this,arguments)}function $i(){return($i=(0,B.Z)(function*(w){const T=yield xo(w.swRegistration,w.vapidKey),j={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:T.endpoint,auth:Qi(T.getKey("auth")),p256dh:Qi(T.getKey("p256dh"))},ne=yield eo(w.firebaseDependencies);if(ne){if(b(ne.subscriptionOptions,j))return Date.now()>=ne.createTime+ia?no(w,{token:ne.token,createTime:Date.now(),subscriptionOptions:j}):ne.token;try{yield Mo(w.firebaseDependencies,ne.token)}catch(ye){console.warn(ye)}return ro(w.firebaseDependencies,j)}return ro(w.firebaseDependencies,j)})).apply(this,arguments)}function Di(w){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,B.Z)(function*(w){const T=yield eo(w.firebaseDependencies);T&&(yield Mo(w.firebaseDependencies,T.token),yield xi(w.firebaseDependencies));const j=yield w.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function no(w,T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,B.Z)(function*(w,T){try{const j=yield Er(w.firebaseDependencies,T),ne=Object.assign(Object.assign({},T),{token:j,createTime:Date.now()});return yield fo(w.firebaseDependencies,ne),j}catch(j){throw yield Di(w),j}})).apply(this,arguments)}function ro(w,T){return po.apply(this,arguments)}function po(){return(po=(0,B.Z)(function*(w,T){const ne={token:yield Ii(w,T),createTime:Date.now(),subscriptionOptions:T};return yield fo(w,ne),ne.token})).apply(this,arguments)}function xo(w,T){return ru.apply(this,arguments)}function ru(){return(ru=(0,B.Z)(function*(w,T){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bs(T)})})).apply(this,arguments)}function b(w,T){return T.vapidKey===w.vapidKey&&T.endpoint===w.endpoint&&T.auth===w.auth&&T.p256dh===w.p256dh}function V(w){const T={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function x(w,T){if(!T.notification)return;w.notification={};const j=T.notification.title;j&&(w.notification.title=j);const ne=T.notification.body;ne&&(w.notification.body=ne);const ye=T.notification.image;ye&&(w.notification.image=ye);const Se=T.notification.icon;Se&&(w.notification.icon=Se)}(T,w),function W(w,T){!T.data||(w.data=T.data)}(T,w),function _e(w,T){var j,ne,ye,Se,ct;if(!(T.fcmOptions||null!==(j=T.notification)&&void 0!==j&&j.click_action))return;w.fcmOptions={};const nn=null!==(ye=null===(ne=T.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==ye?ye:null===(Se=T.notification)||void 0===Se?void 0:Se.click_action;nn&&(w.fcmOptions.link=nn);const Jt=null===(ct=T.fcmOptions)||void 0===ct?void 0:ct.analytics_label;Jt&&(w.fcmOptions.analyticsLabel=Jt)}(T,w),T}function st(w){return"object"==typeof w&&!!w&&ln in w}function mt(w,T){const j=[];for(let ne=0;ne<w.length;ne++)j.push(w.charAt(ne)),ne<T.length&&j.push(T.charAt(ne));return j.join("")}function gr(w){return pr.create("missing-app-config-values",{valueName:w})}mt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tr{constructor(T,j,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ye=function En(w){if(!w||!w.options)throw gr("App Configuration Object");if(!w.name)throw gr("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:j}=w;for(const ne of T)if(!j[ne])throw gr(ne);return{appName:w.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ye,installations:j,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function wr(w){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,B.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(P,{scope:M}),w.swRegistration.update().catch(()=>{})}catch(T){throw pr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Sr(w,T){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,B.Z)(function*(w,T){if(!T&&!w.swRegistration&&(yield wr(w)),T||!w.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw pr.create("invalid-sw-registration");w.swRegistration=T}})).apply(this,arguments)}function Yr(w,T){return fs.apply(this,arguments)}function fs(){return(fs=(0,B.Z)(function*(w,T){T?w.vapidKey=T:w.vapidKey||(w.vapidKey=q)})).apply(this,arguments)}function Ir(){return(Ir=(0,B.Z)(function*(w,T){if(!navigator)throw pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pr.create("permission-blocked");return yield Yr(w,T?.vapidKey),yield Sr(w,T?.serviceWorkerRegistration),hs(w)})).apply(this,arguments)}function Lr(w,T,j){return go.apply(this,arguments)}function go(){return(go=(0,B.Z)(function*(w,T,j){const ne=sn(T);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:j[ln],message_name:j[Yn],message_time:j[Xs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sn(w){switch(w){case wi.NOTIFICATION_CLICKED:return"notification_open";case wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sa(){return(sa=(0,B.Z)(function*(w,T){const j=T.data;if(!j.isFirebaseMessaging)return;w.onMessageHandler&&j.messageType===wi.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(V(j)):w.onMessageHandler.next(V(j)));const ne=j.data;st(ne)&&"1"===ne[ws]&&(yield Lr(w,j.messageType,ne))})).apply(this,arguments)}const Yt="@firebase/messaging",Ot=w=>{const T=new tr(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function gn(w,T){return sa.apply(this,arguments)}(T,j)),T},ri=w=>{const T=w.getProvider("messaging").getImmediate();return{getToken:ne=>function Mt(w,T){return Ir.apply(this,arguments)}(T,ne)}};function Mu(){return wa.apply(this,arguments)}function wa(){return(wa=(0,B.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Su(){(0,ce._registerComponent)(new Ie.wA("messaging",Ot,"PUBLIC")),(0,ce._registerComponent)(new Ie.wA("messaging-internal",ri,"PRIVATE")),(0,ce.registerVersion)(Yt,"0.12.4"),(0,ce.registerVersion)(Yt,"0.12.4","esm2017")}();const kn="analytics",bs="firebase_id",wn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ts="https://www.googletagmanager.com/gtag/js",Sn=new De.Yd("@firebase/analytics"),sr=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Qt(w){if(!w.startsWith(Ts)){const T=sr.create("invalid-gtag-resource",{gtagURL:w});return Sn.warn(T.message),""}return w}function Ji(w){return Promise.all(w.map(T=>T.catch(j=>j)))}function Ia(w,T){const j=function qo(w,T){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(w,T)),j}("firebase-js-sdk-policy",{createScriptURL:Qt}),ne=document.createElement("script"),ye=`${Ts}?l=${w}&id=${T}`;ne.src=j?j?.createScriptURL(ye):ye,ne.async=!0,document.head.appendChild(ne)}function Ro(w,T,j,ne,ye,Se){return Da.apply(this,arguments)}function Da(){return(Da=(0,B.Z)(function*(w,T,j,ne,ye,Se){const ct=ne[ye];try{if(ct)yield T[ct];else{const Jt=(yield Ji(j)).find(In=>In.measurementId===ye);Jt&&(yield T[Jt.appId])}}catch(nn){Sn.error(nn)}w("config",ye,Se)})).apply(this,arguments)}function xu(w,T,j,ne,ye){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,B.Z)(function*(w,T,j,ne,ye){try{let Se=[];if(ye&&ye.send_to){let ct=ye.send_to;Array.isArray(ct)||(ct=[ct]);const nn=yield Ji(j);for(const Jt of ct){const In=nn.find(zn=>zn.measurementId===Jt),bn=In&&T[In.appId];if(!bn){Se=[];break}Se.push(bn)}}0===Se.length&&(Se=Object.values(T)),yield Promise.all(Se),w("event",ne,ye||{})}catch(Se){Sn.error(Se)}})).apply(this,arguments)}function nl(w){const T=window.document.getElementsByTagName("script");for(const j of Object.values(T))if(j.src&&j.src.includes(Ts)&&j.src.includes(w))return j;return null}const si=new class Zo{constructor(T={},j=1e3){this.throttleMetadata=T,this.intervalMillis=j}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,j){this.throttleMetadata[T]=j}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ze(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function io(w){return so.apply(this,arguments)}function so(){return(so=(0,B.Z)(function*(w){var T;const{appId:j,apiKey:ne}=w,ye={method:"GET",headers:ze(ne)},Se=wn.replace("{app-id}",j),ct=yield fetch(Se,ye);if(200!==ct.status&&304!==ct.status){let nn="";try{const Jt=yield ct.json();null!==(T=Jt.error)&&void 0!==T&&T.message&&(nn=Jt.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:ct.status,responseMessage:nn})}return ct.json()})).apply(this,arguments)}function Ga(w){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,B.Z)(function*(w,T=si,j){const{appId:ne,apiKey:ye,measurementId:Se}=w.options;if(!ne)throw sr.create("no-app-id");if(!ye){if(Se)return{measurementId:Se,appId:ne};throw sr.create("no-api-key")}const ct=T.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nn=new su;return setTimeout((0,B.Z)(function*(){nn.abort()}),void 0!==j?j:6e4),Li({appId:ne,apiKey:ye,measurementId:Se},ct,nn,T)})).apply(this,arguments)}function Li(w,T,j){return iu.apply(this,arguments)}function iu(){return(iu=(0,B.Z)(function*(w,{throttleEndTimeMillis:T,backoffCount:j},ne,ye=si){var Se;const{appId:ct,measurementId:nn}=w;try{yield $s(ne,T)}catch(Jt){if(nn)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nn} provided in the "measurementId" field in the local Firebase config. [${Jt?.message}]`),{appId:ct,measurementId:nn};throw Jt}try{const Jt=yield io(w);return ye.deleteThrottleMetadata(ct),Jt}catch(Jt){const In=Jt;if(!ba(In)){if(ye.deleteThrottleMetadata(ct),nn)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nn} provided in the "measurementId" field in the local Firebase config. [${In?.message}]`),{appId:ct,measurementId:nn};throw Jt}const bn=503===Number(null===(Se=In?.customData)||void 0===Se?void 0:Se.httpStatus)?(0,he.$s)(j,ye.intervalMillis,30):(0,he.$s)(j,ye.intervalMillis),zn={throttleEndTimeMillis:Date.now()+bn,backoffCount:j+1};return ye.setThrottleMetadata(ct,zn),Sn.debug(`Calling attemptFetch again in ${bn} millis`),Li(w,zn,ne,ye)}})).apply(this,arguments)}function $s(w,T){return new Promise((j,ne)=>{const ye=Math.max(T-Date.now(),0),Se=setTimeout(j,ye);w.addEventListener(()=>{clearTimeout(Se),ne(sr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ba(w){if(!(w instanceof he.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}class su{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Pu,ut;function Xi(){return(Xi=(0,B.Z)(function*(w,T,j,ne,ye){if(ye&&ye.global)w("event",j,ne);else{const Se=yield T;w("event",j,Object.assign(Object.assign({},ne),{send_to:Se}))}})).apply(this,arguments)}function Kt(w){ut=w}function Gn(w){Pu=w}function dn(){return hr.apply(this,arguments)}function hr(){return(hr=(0,B.Z)(function*(){if(!(0,he.hl)())return Sn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(w){return Sn.warn(sr.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function fi(){return(fi=(0,B.Z)(function*(w,T,j,ne,ye,Se,ct){var nn;const Jt=Ga(w);Jt.then(_i=>{j[_i.measurementId]=_i.appId,w.options.measurementId&&_i.measurementId!==w.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${_i.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_i=>Sn.error(_i)),T.push(Jt);const In=dn().then(_i=>{if(_i)return ne.getId()}),[bn,zn]=yield Promise.all([Jt,In]);nl(Se)||Ia(Se,bn.measurementId),ut&&(ye("consent","default",ut),Kt(void 0)),ye("js",new Date);const gs=null!==(nn=ct?.config)&&void 0!==nn?nn:{};return gs.origin="firebase",gs.update=!0,null!=zn&&(gs[bs]=zn),ye("config",bn.measurementId,gs),Pu&&(ye("set",Pu),Gn(void 0)),bn.measurementId})).apply(this,arguments)}class oo{constructor(T){this.app=T}_delete(){return delete Qr[this.app.options.appId],Promise.resolve()}}let Qr={},Ou=[];const Ta={};let ou,Ss,Aa="dataLayer",au=!1;function Fl(w,T,j){!function Nu(){const w=[];if((0,he.ru)()&&w.push("This is a browser extension environment."),(0,he.zI)()||w.push("Cookies are not available."),w.length>0){const T=w.map((ne,ye)=>`(${ye+1}) ${ne}`).join(" "),j=sr.create("invalid-analytics-context",{errorInfo:T});Sn.warn(j.message)}}();const ne=w.options.appId;if(!ne)throw sr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw sr.create("no-api-key");Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qr[ne])throw sr.create("already-exists",{id:ne});if(!au){!function Mr(w){let T=[];Array.isArray(window[w])?T=window[w]:window[w]=T}(Aa);const{wrappedGtag:Se,gtagCore:ct}=function ps(w,T,j,ne,ye){let Se=function(...ct){window[ne].push(arguments)};return window[ye]&&"function"==typeof window[ye]&&(Se=window[ye]),window[ye]=function Ru(w,T,j,ne){function Se(){return(Se=(0,B.Z)(function*(ct,...nn){try{if("event"===ct){const[Jt,In]=nn;yield xu(w,T,j,Jt,In)}else if("config"===ct){const[Jt,In]=nn;yield Ro(w,T,j,ne,Jt,In)}else if("consent"===ct){const[Jt]=nn;w("consent","update",Jt)}else if("get"===ct){const[Jt,In,bn]=nn;w("get",Jt,In,bn)}else if("set"===ct){const[Jt]=nn;w("set",Jt)}else w(ct,...nn)}catch(Jt){Sn.error(Jt)}})).apply(this,arguments)}return function ye(ct){return Se.apply(this,arguments)}}(Se,w,T,j),{gtagCore:Se,wrappedGtag:window[ye]}}(Qr,Ou,Ta,Aa,"gtag");Ss=Se,ou=ct,au=!0}return Qr[ne]=function As(w,T,j,ne,ye,Se,ct){return fi.apply(this,arguments)}(w,Ou,Ta,T,ou,Aa,j),new oo(w)}function Hi(){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,B.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const ol="@firebase/analytics";!function bi(){(0,ce._registerComponent)(new Ie.wA(kn,(T,{options:j})=>Fl(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,ce._registerComponent)(new Ie.wA("analytics-internal",function w(T){try{const j=T.getProvider(kn).getImmediate();return{logEvent:(ne,ye,Se)=>function Po(w,T,j,ne){w=(0,he.m9)(w),function kl(w,T,j,ne,ye){return Xi.apply(this,arguments)}(Ss,Qr[w.app.options.appId],T,j,ne).catch(ye=>Sn.error(ye))}(j,ne,ye,Se)}}catch(j){throw sr.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,ce.registerVersion)(ol,"0.10.0"),(0,ce.registerVersion)(ol,"0.10.0","esm2017")}();var lu=R(4408),ai=R(7565);const ku=new class Ma extends ai.v{}(class mo extends lu.o{constructor(T,j){super(T,j),this.scheduler=T,this.work=j}schedule(T,j=0){return j>0?super.schedule(T,j):(this.delay=j,this.state=T,this.scheduler.flush(this),this)}execute(T,j){return j>0||this.closed?super.execute(T,j):this._execute(T,j)}requestAsyncId(T,j,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(T,j,ne):(T.flush(this),0)}});var al=R(4986),Ul=R(8505),Yo=R(9468),Qo=R(5363);const xa=new p.GfV("7.6.1"),ao="__angularfire_symbol__analyticsIsSupportedValue",yo="__angularfire_symbol__analyticsIsSupported",la="__angularfire_symbol__remoteConfigIsSupportedValue",Jo="__angularfire_symbol__remoteConfigIsSupported",cu="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function ul(w,T,j){if(T){if(1===T.length)return T[0];const Se=T.filter(ct=>ct.app===j);if(1===Se.length)return Se[0]}return j.container.getProvider(w).getImmediate({optional:!0})}globalThis[yo]||(globalThis[yo]=Hi().then(w=>globalThis[ao]=w).catch(()=>globalThis[ao]=!1)),globalThis[Ka]||(globalThis[Ka]=Mu().then(w=>globalThis[cu]=w).catch(()=>globalThis[cu]=!1)),globalThis[Jo]||(globalThis[Jo]=hi().then(w=>globalThis[la]=w).catch(()=>globalThis[la]=!1));const hu=(w,T)=>{const j=T?[T]:(0,F.C6)(),ne=[];return j.forEach(ye=>{ye.container.getProvider(w).instances.forEach(ct=>{ne.includes(ct)||ne.push(ct)})}),ne};function fu(){}class ll{constructor(T,j=ku){this.zone=T,this.delegate=j}now(){return this.delegate.now()}schedule(T,j,ne){const ye=this.zone;return this.delegate.schedule(function(ct){ye.runGuarded(()=>{T.apply(this,[ct])})},j,ne)}}class Vu{constructor(T){this.zone=T,this.task=null}call(T,j){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fu,{},fu,fu)),j.pipe((0,Ul.b)({next:ne,complete:ne,error:ne})).subscribe(T).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let td=(()=>{class w{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new ll(Zone.current)),this.insideAngular=j.run(()=>new ll(Zone.current,al.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(j){return new(j||w)(p.LFG(p.R0b))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ca(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function cl(w){return ca(),function Zr(w){return function(j){return(j=j.lift(new Vu(w.ngZone))).pipe((0,Yo.R)(w.outsideAngular),(0,Qo.Q)(w.insideAngular))}}(ca())(w)}},1389:(Ht,Le,R)=>{R.d(Le,{$:()=>P,A:()=>fe,D:()=>at,I:()=>jr,J:()=>Xr,L:()=>di,N:()=>Be,P:()=>As,Q:()=>ta,R:()=>_,U:()=>ji,V:()=>hi,W:()=>ho,X:()=>ls,Y:()=>ya,Z:()=>Uo,_:()=>On,a:()=>oa,a0:()=>q,a1:()=>ln,a2:()=>mi,a3:()=>Va,a4:()=>$o,a5:()=>Go,a6:()=>Fi,a7:()=>_a,a8:()=>zo,a9:()=>So,aA:()=>Ce,aB:()=>la,aC:()=>G,aD:()=>At,aE:()=>Yo,aF:()=>Vl,aG:()=>oi,aH:()=>Ar,aL:()=>Ko,aO:()=>ki,aa:()=>xi,ab:()=>Ua,ac:()=>na,ad:()=>Er,ae:()=>Mo,af:()=>Ea,ai:()=>ia,aj:()=>$i,ak:()=>Di,an:()=>Us,ao:()=>x,aq:()=>fs,ar:()=>Yt,as:()=>en,at:()=>re,au:()=>dt,av:()=>ge,aw:()=>gs,ax:()=>du,ay:()=>oe,az:()=>rt,b:()=>tl,c:()=>Ss,d:()=>Fl,e:()=>Vi,f:()=>ol,g:()=>Ma,h:()=>lu,i:()=>rl,j:()=>al,k:()=>uo,l:()=>z,m:()=>Rf,p:()=>ee,r:()=>me,s:()=>A,u:()=>dn});var p=R(5861),F=R(2090),B=R(6881),ce=R(7582),he=R(1877),Ie=R(4859);const ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const at=function Ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},tt=function Dt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Rt=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new he.Yd("@firebase/auth");function yt(v,...d){Re.logLevel<=he.in.ERROR&&Re.error(`Auth (${B.SDK_VERSION}): ${v}`,...d)}function ge(v,...d){throw ht(v,...d)}function rt(v,...d){return ht(v,...d)}function it(v,d,g){const I=Object.assign(Object.assign({},tt()),{[d]:g});return new F.LL("auth","Firebase",I).create(d,{appName:v.name})}function Et(v,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&ge(v,"argument-error"),it(v,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ht(v,...d){if("string"!=typeof v){const g=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return Rt.create(v,...d)}function Ce(v,d,...g){if(!v)throw ht(d,...g)}function _t(v){const d="INTERNAL ASSERTION FAILED: "+v;throw yt(d),new Error(d)}function en(v,d){v||_t(d)}function Tt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Wt(){return"http:"===Vt()||"https:"===Vt()}function Vt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ve{constructor(d,g){this.shortDelay=d,this.longDelay=g,en(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function nr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ke(v,d){en(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class je{static initialize(d,g,I){this.fetchImpl=d,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pt=new Ve(3e4,6e4);function Ct(v,d){return v.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:v.tenantId}):d}function vt(v,d,g,I){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(v,d,g,I,$={}){return kt(v,$,(0,p.Z)(function*(){let J={},Oe={};I&&("GET"===d?Oe=I:J={body:JSON.stringify(I)});const lt=(0,F.xO)(Object.assign({key:v.config.apiKey},Oe)).slice(1),zt=yield v._getAdditionalHeaders();return zt["Content-Type"]="application/json",v.languageCode&&(zt["X-Firebase-Locale"]=v.languageCode),je.fetch()(Fn(v,v.config.apiHost,g,lt),Object.assign({method:d,headers:zt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function kt(v,d,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,p.Z)(function*(v,d,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},Je),d);try{const $=new ar(v),J=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const Oe=yield J.json();if("needConfirmation"in Oe)throw Xt(v,"account-exists-with-different-credential",Oe);if(J.ok&&!("errorMessage"in Oe))return Oe;{const lt=J.ok?Oe.errorMessage:Oe.error.message,[zt,on]=lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===zt)throw Xt(v,"credential-already-in-use",Oe);if("EMAIL_EXISTS"===zt)throw Xt(v,"email-already-in-use",Oe);if("USER_DISABLED"===zt)throw Xt(v,"user-disabled",Oe);const Mn=I[zt]||zt.toLowerCase().replace(/[_\s]+/g,"-");if(on)throw it(v,Mn,on);ge(v,Mn)}}catch($){if($ instanceof F.ZR)throw $;ge(v,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function un(v,d,g,I){return vn.apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(v,d,g,I,$={}){const J=yield vt(v,d,g,I,$);return"mfaPendingCredential"in J&&ge(v,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function Fn(v,d,g,I){const $=`${d}${g}?${I}`;return v.config.emulator?Ke(v.config,$):`${v.config.apiScheme}://${$}`}class ar{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(rt(this.auth,"network-request-failed")),pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xt(v,d,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const $=rt(v,d,I);return $.customData._tokenResponse=g,$}function Pn(){return(Pn=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function $n(v,d){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function _r(v,d){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Rn(v){if(v)try{const d=new Date(Number(v));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Br(){return(Br=(0,p.Z)(function*(v,d=!1){const g=(0,F.m9)(v),I=yield g.getIdToken(d),$=qn(I);Ce($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const J="object"==typeof $.firebase?$.firebase:void 0,Oe=J?.sign_in_provider;return{claims:$,token:I,authTime:Rn(Bn($.auth_time)),issuedAtTime:Rn(Bn($.iat)),expirationTime:Rn(Bn($.exp)),signInProvider:Oe||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function Bn(v){return 1e3*Number(v)}function qn(v){const[d,g,I]=v.split(".");if(void 0===d||void 0===g||void 0===I)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,F.tV)(g);return $?JSON.parse($):(yt("Failed to decode base64 JWT payload"),null)}catch($){return yt("Caught error parsing JWT payload as JSON",$?.toString()),null}}function pe(v,d){return de.apply(this,arguments)}function de(){return(de=(0,p.Z)(function*(v,d,g=!1){if(g)return d;try{return yield d}catch(I){throw I instanceof F.ZR&&Xe(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function Xe({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class ot{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),I)}iteration(){var d=this;return(0,p.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&d.schedule(!0))}d.schedule()})()}}class rn{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yn(v){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(v){var d;const g=v.auth,I=yield v.getIdToken(),$=yield pe(v,_r(g,{idToken:I}));Ce($?.users.length,g,"internal-error");const J=$.users[0];v._notifyReloadListener(J);const Oe=null!==(d=J.providerUserInfo)&&void 0!==d&&d.length?rr(J.providerUserInfo):[],lt=pn(v.providerData,Oe),Mn=!!v.isAnonymous&&!(v.email&&J.passwordHash||lt?.length),mr={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:lt,metadata:new rn(J.createdAt,J.lastLoginAt),isAnonymous:Mn};Object.assign(v,mr)})).apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(v){const d=(0,F.m9)(v);yield yn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function pn(v,d){return[...v.filter(I=>!d.some($=>$.providerId===I.providerId)),...d]}function rr(v){return v.map(d=>{var{providerId:g}=d,I=(0,ce._T)(d,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function we(){return(we=(0,p.Z)(function*(v,d){const g=yield kt(v,{},(0,p.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:$,apiKey:J}=v.config,Oe=Fn(v,$,"/v1/token",`key=${J}`),lt=yield v._getAdditionalHeaders();return lt["Content-Type"]="application/x-www-form-urlencoded",je.fetch()(Oe,{method:"POST",headers:lt,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ce(d.idToken,"internal-error"),Ce(typeof d.idToken<"u","internal-error"),Ce(typeof d.refreshToken<"u","internal-error");const g="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Ze(v){const d=qn(v);return Ce(d,"internal-error"),Ce(typeof d.exp<"u","internal-error"),Ce(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var I=this;return(0,p.Z)(function*(){return Ce(!I.accessToken||I.refreshToken,d,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var I=this;return(0,p.Z)(function*(){const{accessToken:$,refreshToken:J,expiresIn:Oe}=yield function Ft(v,d){return we.apply(this,arguments)}(d,g);I.updateTokensAndExpiration($,J,Number(Oe))})()}updateTokensAndExpiration(d,g,I){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,g){const{refreshToken:I,accessToken:$,expirationTime:J}=g,Oe=new Ye;return I&&(Ce("string"==typeof I,"internal-error",{appName:d}),Oe.refreshToken=I),$&&(Ce("string"==typeof $,"internal-error",{appName:d}),Oe.accessToken=$),J&&(Ce("number"==typeof J,"internal-error",{appName:d}),Oe.expirationTime=J),Oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return _t("not implemented")}}function et(v,d){Ce("string"==typeof v||typeof v>"u","internal-error",{appName:d})}class jt{constructor(d){var{uid:g,auth:I,stsTokenManager:$}=d,J=(0,ce._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new rn(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,p.Z)(function*(){const I=yield pe(g,g.stsTokenManager.getToken(g.auth,d));return Ce(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(d){return function ur(v){return Br.apply(this,arguments)}(this,d)}reload(){return function Nt(v){return Nn.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ce(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const g=new jt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(d){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var I=this;return(0,p.Z)(function*(){let $=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),$=!0),g&&(yield yn(I)),yield I.auth._persistUserIfCurrent(I),$&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,p.Z)(function*(){const g=yield d.getIdToken();return yield pe(d,function fn(v,d){return Pn.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var I,$,J,Oe,lt,zt,on,Mn;const mr=null!==(I=g.displayName)&&void 0!==I?I:void 0,vo=null!==($=g.email)&&void 0!==$?$:void 0,Hs=null!==(J=g.phoneNumber)&&void 0!==J?J:void 0,$l=null!==(Oe=g.photoURL)&&void 0!==Oe?Oe:void 0,Ms=null!==(lt=g.tenantId)&&void 0!==lt?lt:void 0,Hl=null!==(zt=g._redirectEventId)&&void 0!==zt?zt:void 0,mu=null!==(on=g.createdAt)&&void 0!==on?on:void 0,od=null!==(Mn=g.lastLoginAt)&&void 0!==Mn?Mn:void 0,{uid:Xo,emailVerified:Sc,isAnonymous:ju,providerData:Za,stsTokenManager:ad}=g;Ce(Xo&&ad,d,"internal-error");const lr=Ye.fromJSON(this.name,ad);Ce("string"==typeof Xo,d,"internal-error"),et(mr,d.name),et(vo,d.name),Ce("boolean"==typeof Sc,d,"internal-error"),Ce("boolean"==typeof ju,d,"internal-error"),et(Hs,d.name),et($l,d.name),et(Ms,d.name),et(Hl,d.name),et(mu,d.name),et(od,d.name);const ud=new jt({uid:Xo,auth:d,email:vo,emailVerified:Sc,displayName:mr,isAnonymous:ju,photoURL:$l,phoneNumber:Hs,tenantId:Ms,stsTokenManager:lr,createdAt:mu,lastLoginAt:od});return Za&&Array.isArray(Za)&&(ud.providerData=Za.map(dh=>Object.assign({},dh))),Hl&&(ud._redirectEventId=Hl),ud}static _fromIdTokenResponse(d,g,I=!1){return(0,p.Z)(function*(){const $=new Ye;$.updateFromServerResponse(g);const J=new jt({uid:g.localId,auth:d,stsTokenManager:$,isAnonymous:I});return yield yn(J),J})()}}const xe=new Map;function G(v){en(v instanceof Function,"Expected a class definition");let d=xe.get(v);return d?(en(d instanceof v,"Instance stored in cache mismatched with class"),d):(d=new v,xe.set(v,d),d)}const Be=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,I){var $=this;return(0,p.Z)(function*(){$.storage[g]=I})()}_get(g){var I=this;return(0,p.Z)(function*(){const $=I.storage[g];return void 0===$?null:$})()}_remove(g){var I=this;return(0,p.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function At(v,d,g){return`firebase:${v}:${d}:${g}`}class le{constructor(d,g,I){this.persistence=d,this.auth=g,this.userKey=I;const{config:$,name:J}=this.auth;this.fullUserKey=At(this.userKey,$.apiKey,J),this.fullPersistenceKey=At("persistence",$.apiKey,J),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,p.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?jt._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,p.Z)(function*(){if(g.persistence===d)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,I="authUser"){return(0,p.Z)(function*(){if(!g.length)return new le(G(Be),d,I);const $=(yield Promise.all(g.map(function(){var on=(0,p.Z)(function*(Mn){if(yield Mn._isAvailable())return Mn});return function(Mn){return on.apply(this,arguments)}}()))).filter(on=>on);let J=$[0]||G(Be);const Oe=At(I,d.config.apiKey,d.name);let lt=null;for(const on of g)try{const Mn=yield on._get(Oe);if(Mn){const mr=jt._fromJSON(d,Mn);on!==J&&(lt=mr),J=on;break}}catch{}const zt=$.filter(on=>on._shouldAllowMigration);return J._shouldAllowMigration&&zt.length?(J=zt[0],lt&&(yield J._set(Oe,lt.toJSON())),yield Promise.all(g.map(function(){var on=(0,p.Z)(function*(Mn){if(Mn!==J)try{yield Mn._remove(Oe)}catch{}});return function(Mn){return on.apply(this,arguments)}}())),new le(J,d,I)):new le(J,d,I)})()}}function ae(v){const d=v.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Te(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Y(d))return"Firefox";if(d.includes("silk/"))return"Silk";if($t(d))return"Blackberry";if(an(d))return"Webos";if(K(d))return"Safari";if((d.includes("chrome/")||H(d))&&!d.includes("edge/"))return"Chrome";if(dt(d))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Y(v=(0,F.z$)()){return/firefox\//i.test(v)}function K(v=(0,F.z$)()){const d=v.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function H(v=(0,F.z$)()){return/crios\//i.test(v)}function Te(v=(0,F.z$)()){return/iemobile/i.test(v)}function dt(v=(0,F.z$)()){return/android/i.test(v)}function $t(v=(0,F.z$)()){return/blackberry/i.test(v)}function an(v=(0,F.z$)()){return/webos/i.test(v)}function re(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function oe(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function He(v=(0,F.z$)()){return re(v)||dt(v)||an(v)||$t(v)||/windows phone/i.test(v)||Te(v)}function _n(v,d=[]){let g;switch(v){case"Browser":g=ae((0,F.z$)());break;case"Worker":g=`${ae((0,F.z$)())}-${v}`;break;default:g=v}const I=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${B.SDK_VERSION}/${I}`}function Ne(){return(Ne=(0,p.Z)(function*(v){return(yield vt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function St(v,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,p.Z)(function*(v,d){return vt(v,"GET","/v2/recaptchaConfig",Ct(v,d))})).apply(this,arguments)}function Dn(v){return void 0!==v&&void 0!==v.getResponse}function Vn(v){return void 0!==v&&void 0!==v.enterprise}class Zn{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function jn(v){return new Promise((d,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=d,I.onerror=$=>{const J=rt("internal-error");J.customData=$,g(J)},I.type="text/javascript",I.charset="UTF-8",function Tr(){var v,d;return null!==(d=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==d?d:document}().appendChild(I)})}function Rr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Ns{constructor(d){this.type="recaptcha-enterprise",this.auth=Ar(d)}verify(d="verify",g=!1){var I=this;return(0,p.Z)(function*(){function J(){return J=(0,p.Z)(function*(lt){if(!g){if(null==lt.tenantId&&null!=lt._agentRecaptchaConfig)return lt._agentRecaptchaConfig.siteKey;if(null!=lt.tenantId&&void 0!==lt._tenantRecaptchaConfigs[lt.tenantId])return lt._tenantRecaptchaConfigs[lt.tenantId].siteKey}return new Promise(function(){var zt=(0,p.Z)(function*(on,Mn){St(lt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(mr=>{if(void 0!==mr.recaptchaKey){const vo=new Zn(mr);return null==lt.tenantId?lt._agentRecaptchaConfig=vo:lt._tenantRecaptchaConfigs[lt.tenantId]=vo,on(vo.siteKey)}Mn(new Error("recaptcha Enterprise site key undefined"))}).catch(mr=>{Mn(mr)})});return function(on,Mn){return zt.apply(this,arguments)}}())}),J.apply(this,arguments)}function Oe(lt,zt,on){const Mn=window.grecaptcha;Vn(Mn)?Mn.enterprise.ready(()=>{Mn.enterprise.execute(lt,{action:d}).then(mr=>{zt(mr)}).catch(()=>{zt("NO_RECAPTCHA")})}):on(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((lt,zt)=>{(function $(lt){return J.apply(this,arguments)})(I.auth).then(on=>{if(!g&&Vn(window.grecaptcha))Oe(on,lt,zt);else{if(typeof window>"u")return void zt(new Error("RecaptchaVerifier is only supported in browser"));jn("https://www.google.com/recaptcha/enterprise.js?render="+on).then(()=>{Oe(on,lt,zt)}).catch(Mn=>{zt(Mn)})}}).catch(on=>{zt(on)})})})()}}function Qn(v,d,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(v,d,g,I=!1){const $=new Ns(v);let J;try{J=yield $.verify(g)}catch{J=yield $.verify(g,!0)}const Oe=Object.assign({},d);return Object.assign(Oe,I?{captchaResp:J}:{captchaResponse:J}),Object.assign(Oe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Oe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Oe})).apply(this,arguments)}class ks{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const I=J=>new Promise((Oe,lt)=>{try{Oe(d(J))}catch(zt){lt(zt)}});I.onAbort=g,this.queue.push(I);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===d)return;const I=[];try{for(const $ of g.queue)yield $(d),$.onAbort&&I.push($.onAbort)}catch($){I.reverse();for(const J of I)try{J()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class Ni{constructor(d,g,I,$){this.app=d,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(d,g){var I=this;return g&&(this._popupRedirectResolver=G(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var $,J;if(!I._deleted&&(I.persistenceManager=yield le.create(I,d),!I._deleted)){if(null!==($=I._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(J=I.currentUser)||void 0===J?void 0:J.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,p.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,p.Z)(function*(){var I;const $=yield g.assertedPersistence.getCurrentUser();let J=$,Oe=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const lt=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,zt=J?._redirectEventId,on=yield g.tryRedirectSignIn(d);(!lt||lt===zt)&&on?.user&&(J=on.user,Oe=!0)}if(!J)return g.directlySetCurrentUser(null);if(!J._redirectEventId){if(Oe)try{yield g.beforeStateQueue.runMiddleware(J)}catch(lt){J=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(lt))}return J?g.reloadAndSetCurrentUserOrClear(J):g.directlySetCurrentUser(null)}return Ce(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===J._redirectEventId?g.directlySetCurrentUser(J):g.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(d){var g=this;return(0,p.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,p.Z)(function*(){try{yield yn(d)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ue(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var d=this;return(0,p.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,p.Z)(function*(){const I=d?(0,F.m9)(d):null;return I&&Ce(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(d,g=!1){var I=this;return(0,p.Z)(function*(){if(!I._deleted)return d&&Ce(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,p.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,p.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(G(d))}))}initializeRecaptchaConfig(){var d=this;return(0,p.Z)(function*(){const g=yield St(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Zn(g);null==d.tenantId?d._agentRecaptchaConfig=I:d._tenantRecaptchaConfigs[d.tenantId]=I,I.emailPasswordEnabled&&new Ns(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new F.LL("auth","Firebase",d())}onAuthStateChanged(d,g,I){return this.registerStateListener(this.authStateSubscription,d,g,I)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,I){return this.registerStateListener(this.idTokenSubscription,d,g,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var I=this;return(0,p.Z)(function*(){const $=yield I.getOrInitRedirectPersistenceManager(g);return null===d?$.removeCurrentUser():$.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const I=d&&G(d)||g._popupRedirectResolver;Ce(I,g,"argument-error"),g.redirectPersistenceManager=yield le.create(g,[G(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,p.Z)(function*(){var I,$;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===d?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,p.Z)(function*(){if(d===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,I,$){if(this._deleted)return()=>{};const J="function"==typeof g?g:g.next.bind(g),Oe=this._isInitialized?Promise.resolve():this._initializationPromise;return Ce(Oe,this,"internal-error"),Oe.then(()=>J(this.currentUser)),"function"==typeof g?d.addObserver(g,I,$):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==d&&g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh(),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=_n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,p.Z)(function*(){var g;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const $=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();$&&(I["X-Firebase-Client"]=$);const J=yield d._getAppCheckToken();return J&&(I["X-Firebase-AppCheck"]=J),I})()}_getAppCheckToken(){var d=this;return(0,p.Z)(function*(){var g;const I=yield null===(g=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function Pt(v,...d){Re.logLevel<=he.in.WARN&&Re.warn(`Auth (${B.SDK_VERSION}): ${v}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Ar(v){return(0,F.m9)(v)}class Ki{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jr(v,d,g){const I=Ar(v);Ce(I._canInitEmulator,I,"emulator-config-failed"),Ce(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const $=!!g?.disableWarnings,J=ss(d),{host:Oe,port:lt}=function qr(v){const d=ss(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(d.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(I);if($){const J=$[1];return{host:J,port:$r(I.substr(J.length+1))}}{const[J,Oe]=I.split(":");return{host:J,port:$r(Oe)}}}(d);I.config.emulator={url:`${J}//${Oe}${null===lt?"":`:${lt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Oe,port:lt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Ks(){function v(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ss(v){const d=v.indexOf(":");return d<0?"":v.substr(0,d+1)}function $r(v){if(!v)return null;const d=Number(v);return isNaN(d)?null:d}class Xr{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return _t("not implemented")}_getIdTokenResponse(d){return _t("not implemented")}_linkToIdToken(d,g){return _t("not implemented")}_getReauthenticationResolver(d){return _t("not implemented")}}function os(v,d){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:resetPassword",Ct(v,d))})).apply(this,arguments)}function Bi(v,d){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function wo(v,d){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:update",Ct(v,d))})).apply(this,arguments)}function ma(v,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithPassword",Ct(v,d))})).apply(this,arguments)}function Io(v,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:sendOobCode",Ct(v,d))})).apply(this,arguments)}function lo(v,d){return Me.apply(this,arguments)}function Me(){return(Me=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function be(v,d){return $e.apply(this,arguments)}function $e(){return($e=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function gt(v,d){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function An(v,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,d))})).apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithEmailLink",Ct(v,d))})).apply(this,arguments)}class pi extends Xr{constructor(d,g,I,$=null){super("password",I),this._email=d,this._password=g,this._tenantId=$}static _fromEmailAndPassword(d,g){return new pi(d,g,"password")}static _fromEmailAndCode(d,g,I=null){return new pi(d,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,p.Z)(function*(){var I;switch(g.signInMethod){case"password":const $={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=d._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const J=yield Qn(d,$,"signInWithPassword");return ma(d,J)}return ma(d,$).catch(function(){var J=(0,p.Z)(function*(Oe){if("auth/missing-recaptcha-token"===Oe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const lt=yield Qn(d,$,"signInWithPassword");return ma(d,lt)}return Promise.reject(Oe)});return function(Oe){return J.apply(this,arguments)}}());case"emailLink":return function Xn(v,d){return Ln.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:ge(d,"internal-error")}})()}_linkToIdToken(d,g){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return Bi(d,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ei(v,d){return li.apply(this,arguments)}(d,{idToken:g,email:I._email,oobCode:I._password});default:ge(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function cr(v,d){return ys.apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithIdp",Ct(v,d))})).apply(this,arguments)}class di extends Xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new di(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):ge("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$}=g,J=(0,ce._T)(g,["providerId","signInMethod"]);if(!I||!$)return null;const Oe=new di(I,$);return Oe.idToken=J.idToken||void 0,Oe.accessToken=J.accessToken||void 0,Oe.secret=J.secret,Oe.nonce=J.nonce,Oe.pendingToken=J.pendingToken||null,Oe}_getIdTokenResponse(d){return cr(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,cr(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,cr(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,F.xO)(g)}return d}}function ea(v,d){return as.apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:sendVerificationCode",Ct(v,d))})).apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,d))})).apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(v,d){const g=yield un(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,d));if(g.temporaryProof)throw Xt(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ls={USER_NOT_FOUND:"user-not-found"};function Zs(){return(Zs=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithPhoneNumber",Ct(v,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ls)})).apply(this,arguments)}class kr extends Xr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new kr({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new kr({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function Lo(v,d){return us.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function Vo(v,d){return Co.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function qi(v,d){return Zs.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:I,verificationCode:$}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:I,code:$}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}=d;return I||g||$||J?new kr({verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}):null}}class _s{constructor(d){var g,I,$,J,Oe,lt;const zt=(0,F.zd)((0,F.pd)(d)),on=null!==(g=zt.apiKey)&&void 0!==g?g:null,Mn=null!==(I=zt.oobCode)&&void 0!==I?I:null,mr=function Zi(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=zt.mode)&&void 0!==$?$:null);Ce(on&&Mn&&mr,"argument-error"),this.apiKey=on,this.operation=mr,this.code=Mn,this.continueUrl=null!==(J=zt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(Oe=zt.languageCode)&&void 0!==Oe?Oe:null,this.tenantId=null!==(lt=zt.tenantId)&&void 0!==lt?lt:null}static parseLink(d){const g=function vs(v){const d=(0,F.zd)((0,F.pd)(v)).link,g=d?(0,F.zd)((0,F.pd)(d)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||g||d||v}(d);try{return new _s(g)}catch{return null}}}let ta=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return pi._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const $=_s.parseLink(I);return Ce($,"argument-error"),pi._fromEmailAndCode(g,$.code,$.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class yr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ys extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ls extends Ys{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return Ce("providerId"in g&&"signInMethod"in g,"argument-error"),di._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ce(d.idToken||d.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ls.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ls.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:$,pendingToken:J,nonce:Oe,providerId:lt}=d;if(!I&&!$&&!g&&!J||!lt)return null;try{return new ls(lt)._credential({idToken:g,accessToken:I,nonce:Oe,pendingToken:J})}catch{return null}}}let ji=(()=>{class v extends Ys{constructor(){super("facebook.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),hi=(()=>{class v extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:$}=g;if(!I&&!$)return null;try{return v.credential(I,$)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ho=(()=>{class v extends Ys{constructor(){super("github.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ki extends Xr{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return cr(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,cr(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,cr(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$,pendingToken:J}=g;return I&&$&&J&&I===$?new ki(I,J):null}static _create(d,g){return new ki(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ya extends yr{constructor(d){Ce(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return ya.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return ya.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=ki.fromJSON(d);return Ce(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:I}=d;if(!g||!I)return null;try{return ki._create(I,g)}catch{return null}}}let Uo=(()=>{class v extends Ys{constructor(){super("twitter.com")}static credential(g,I){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:$}=g;if(!I||!$)return null;try{return v.credential(I,$)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Qs(v,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signUp",Ct(v,d))})).apply(this,arguments)}class zr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,I,$=!1){return(0,p.Z)(function*(){const J=yield jt._fromIdTokenResponse(d,I,$),Oe=Es(I);return new zr({user:J,providerId:Oe,_tokenResponse:I,operationType:g})})()}static _forOperation(d,g,I){return(0,p.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const $=Es(I);return new zr({user:d,providerId:$,_tokenResponse:I,operationType:g})})()}}function Es(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function On(v){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(v){var d;const g=Ar(v);if(yield g._initializationPromise,null!==(d=g.currentUser)&&void 0!==d&&d.isAnonymous)return new zr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Qs(g,{returnSecureToken:!0}),$=yield zr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Vs extends F.ZR{constructor(d,g,I,$){var J;super(g.code,g.message),this.operationType=I,this.user=$,Object.setPrototypeOf(this,Vs.prototype),this.customData={appName:d.name,tenantId:null!==(J=d.tenantId)&&void 0!==J?J:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,g,I,$){return new Vs(d,g,I,$)}}function Ei(v,d,g,I){return("reauthenticate"===d?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?Vs._fromErrorAndOperation(v,J,d,I):J})}function Fr(v){return new Set(v.map(({providerId:d})=>d).filter(d=>!!d))}function Us(v,d){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v);yield It(!0,g,d);const{providerUserInfo:I}=yield $n(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),$=Fr(I||[]);return g.providerData=g.providerData.filter(J=>$.has(J.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function cs(v,d){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,p.Z)(function*(v,d,g=!1){const I=yield pe(v,d._linkToIdToken(v.auth,yield v.getIdToken()),g);return zr._forOperation(v,"link",I)})).apply(this,arguments)}function It(v,d,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(v,d,g){yield yn(d);const $=!1===v?"provider-already-linked":"no-such-provider";Ce(Fr(d.providerData).has(g)===v,d.auth,$)})).apply(this,arguments)}function jo(v,d){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(v,d,g=!1){const{auth:I}=v,$="reauthenticate";try{const J=yield pe(v,Ei(I,$,d,v),g);Ce(J.idToken,I,"internal-error");const Oe=qn(J.idToken);Ce(Oe,I,"internal-error");const{sub:lt}=Oe;return Ce(v.uid===lt,I,"user-mismatch"),zr._forOperation(v,$,J)}catch(J){throw"auth/user-not-found"===J?.code&&ge(I,"user-mismatch"),J}})).apply(this,arguments)}function Pr(v,d){return k.apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(v,d,g=!1){const I="signIn",$=yield Ei(v,I,d),J=yield zr._fromIdTokenResponse(v,I,$);return g||(yield v._updateCurrentUser(J.user)),J})).apply(this,arguments)}function P(v,d){return M.apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(v,d){return Pr(Ar(v),d)})).apply(this,arguments)}function q(v,d){return nt.apply(this,arguments)}function nt(){return(nt=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v);return yield It(!1,g,d.providerId),cs(g,d)})).apply(this,arguments)}function ln(v,d){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(v,d){return jo((0,F.m9)(v),d)})).apply(this,arguments)}function Xs(v,d){return ws.apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(v,d){return un(v,"POST","/v1/accounts:signInWithCustomToken",Ct(v,d))})).apply(this,arguments)}function mi(v,d){return wi.apply(this,arguments)}function wi(){return(wi=(0,p.Z)(function*(v,d){const g=Ar(v),I=yield Xs(g,{token:d,returnSecureToken:!0}),$=yield zr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Qi{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?Bs._fromServerResponse(d,g):"totpInfo"in g?ni._fromServerResponse(d,g):ge(d,"internal-error")}}class Bs extends Qi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new Bs(g)}}class ni extends Qi{constructor(d){super("totp",d)}static _fromServerResponse(d,g){return new ni(g)}}function Is(v,d,g){var I;Ce((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),Ce(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ce(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(Ce(g.android.packageName.length>0,v,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function Va(v,d,g){return va.apply(this,arguments)}function va(){return va=(0,p.Z)(function*(v,d,g){var I;const $=Ar(v),J={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Oe=yield Qn($,J,"getOobCode",!0);g&&Is($,Oe,g),yield be($,Oe)}else g&&Is($,J,g),yield be($,J).catch(function(){var Oe=(0,p.Z)(function*(lt){if("auth/missing-recaptcha-token"!==lt.code)return Promise.reject(lt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const zt=yield Qn($,J,"getOobCode",!0);g&&Is($,zt,g),yield be($,zt)}});return function(lt){return Oe.apply(this,arguments)}}())}),va.apply(this,arguments)}function $o(v,d,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,p.Z)(function*(v,d,g){yield os((0,F.m9)(v),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Go(v,d){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(v,d){yield wo((0,F.m9)(v),{oobCode:d})})).apply(this,arguments)}function Fi(v,d){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v),I=yield os(g,{oobCode:d}),$=I.requestType;switch(Ce($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ce(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ce(I.mfaInfo,g,"internal-error");default:Ce(I.email,g,"internal-error")}let J=null;return I.mfaInfo&&(J=Qi._fromServerResponse(Ar(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:J},operation:$}})).apply(this,arguments)}function _a(v,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(v,d){const{data:g}=yield Fi((0,F.m9)(v),d);return g.email})).apply(this,arguments)}function zo(v,d,g){return fo.apply(this,arguments)}function fo(){return fo=(0,p.Z)(function*(v,d,g){var I;const $=Ar(v),J={returnSecureToken:!0,email:d,password:g,clientType:"CLIENT_TYPE_WEB"};let Oe;if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const on=yield Qn($,J,"signUpPassword");Oe=Qs($,on)}else Oe=Qs($,J).catch(function(){var on=(0,p.Z)(function*(Mn){if("auth/missing-recaptcha-token"===Mn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const mr=yield Qn($,J,"signUpPassword");return Qs($,mr)}return Promise.reject(Mn)});return function(Mn){return on.apply(this,arguments)}}());const lt=yield Oe.catch(on=>Promise.reject(on)),zt=yield zr._fromIdTokenResponse($,"signIn",lt);return yield $._updateCurrentUser(zt.user),zt}),fo.apply(this,arguments)}function So(v,d,g){return P((0,F.m9)(v),ta.credential(d,g))}function xi(v,d,g){return ds.apply(this,arguments)}function ds(){return ds=(0,p.Z)(function*(v,d,g){var I;const $=Ar(v),J={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function Oe(lt,zt){Ce(zt.handleCodeInApp,$,"argument-error"),zt&&Is($,lt,zt)}if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const lt=yield Qn($,J,"getOobCode",!0);Oe(lt,g),yield gt($,lt)}else Oe(J,g),yield gt($,J).catch(function(){var lt=(0,p.Z)(function*(zt){if("auth/missing-recaptcha-token"!==zt.code)return Promise.reject(zt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const on=yield Qn($,J,"getOobCode",!0);Oe(on,g),yield gt($,on)}});return function(zt){return lt.apply(this,arguments)}}())}),ds.apply(this,arguments)}function Ua(v,d){return"EMAIL_SIGNIN"===_s.parseLink(d)?.operation}function na(v,d,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v),$=ta.credentialWithLink(d,g||Tt());return Ce($._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),P(I,$)})).apply(this,arguments)}function Ii(v,d){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:createAuthUri",Ct(v,d))})).apply(this,arguments)}function Er(v,d){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(v,d){const I={identifier:d,continueUri:Wt()?Tt():"http://localhost"},{signinMethods:$}=yield Ii((0,F.m9)(v),I);return $||[]})).apply(this,arguments)}function Mo(v,d){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v),$={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};d&&Is(g.auth,$,d);const{email:J}=yield lo(g.auth,$);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ea(v,d,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:d};g&&Is(I.auth,J,g);const{email:Oe}=yield An(I.auth,J);Oe!==v.email&&(yield v.reload())})).apply(this,arguments)}function Cs(v,d){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(v,d){return vt(v,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ia(v,d){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(v,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const I=(0,F.m9)(v),J={idToken:yield I.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},Oe=yield pe(I,Cs(I.auth,J));I.displayName=Oe.displayName||null,I.photoURL=Oe.photoUrl||null;const lt=I.providerData.find(({providerId:zt})=>"password"===zt);lt&&(lt.displayName=I.displayName,lt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Oe)})).apply(this,arguments)}function $i(v,d){return Pi((0,F.m9)(v),d,null)}function Di(v,d){return Pi((0,F.m9)(v),null,d)}function Pi(v,d,g){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(v,d,g){const{auth:I}=v,J={idToken:yield v.getIdToken(),returnSecureToken:!0};d&&(J.email=d),g&&(J.password=g);const Oe=yield pe(v,Bi(I,J));yield v._updateTokensIfNecessary(Oe,!0)})).apply(this,arguments)}class ro{constructor(d,g,I={}){this.isNewUser=d,this.providerId=g,this.profile=I}}class po extends ro{constructor(d,g,I,$){super(d,g,I),this.username=$}}class xo extends ro{constructor(d,g){super(d,"facebook.com",g)}}class ru extends po{constructor(d,g){super(d,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class b extends ro{constructor(d,g){super(d,"google.com",g)}}class V extends po{constructor(d,g,I){super(d,"twitter.com",g,I)}}function x(v){const{user:d,_tokenResponse:g}=v;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Wo(v){var d,g;if(!v)return null;const{providerId:I}=v,$=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},J=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Oe=null===(g=null===(d=qn(v.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(Oe)return new ro(J,"anonymous"!==Oe&&"custom"!==Oe?Oe:null)}if(!I)return null;switch(I){case"facebook.com":return new xo(J,$);case"github.com":return new ru(J,$);case"google.com":return new b(J,$);case"twitter.com":return new V(J,$,v.screenName||null);case"custom":case"anonymous":return new ro(J,null);default:return new ro(J,I,$)}}(g)}class Hn{constructor(d,g,I){this.type=d,this.credential=g,this.auth=I}static _fromIdtoken(d,g){return new Hn("enroll",d,g)}static _fromMfaPendingCredential(d){return new Hn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,I;if(d?.multiFactorSession){if(null!==(g=d.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Hn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return Hn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Yr{constructor(d,g,I){this.session=d,this.hints=g,this.signInResolver=I}static _fromError(d,g){const I=Ar(d),$=g.customData._serverResponse,J=($.mfaInfo||[]).map(lt=>Qi._fromServerResponse(I,lt));Ce($.mfaPendingCredential,I,"internal-error");const Oe=Hn._fromMfaPendingCredential($.mfaPendingCredential);return new Yr(Oe,J,function(){var lt=(0,p.Z)(function*(zt){const on=yield zt._process(I,Oe);delete $.mfaInfo,delete $.mfaPendingCredential;const Mn=Object.assign(Object.assign({},$),{idToken:on.idToken,refreshToken:on.refreshToken});switch(g.operationType){case"signIn":const mr=yield zr._fromIdTokenResponse(I,g.operationType,Mn);return yield I._updateCurrentUser(mr.user),mr;case"reauthenticate":return Ce(g.user,I,"internal-error"),zr._forOperation(g.user,g.operationType,Mn);default:ge(I,"internal-error")}});return function(zt){return lt.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,p.Z)(function*(){return g.signInResolver(d)})()}}function fs(v,d){var g;const I=(0,F.m9)(v),$=d;return Ce(d.customData.operationType,I,"argument-error"),Ce(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Yr._fromError(I,$)}function Mt(v,d){return vt(v,"POST","/v2/accounts/mfaEnrollment:start",Ct(v,d))}class gn{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>Qi._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new gn(d)}getSession(){var d=this;return(0,p.Z)(function*(){return Hn._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,g){var I=this;return(0,p.Z)(function*(){const $=d,J=yield I.getSession(),Oe=yield pe(I.user,$._process(I.user.auth,J,g));return yield I.user._updateTokensIfNecessary(Oe),I.user.reload()})()}unenroll(d){var g=this;return(0,p.Z)(function*(){const I="string"==typeof d?d:d.uid,$=yield g.user.getIdToken();try{const J=yield pe(g.user,function sn(v,d){return vt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(v,d))}(g.user.auth,{idToken:$,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Oe})=>Oe!==I),yield g.user._updateTokensIfNecessary(J),yield g.user.reload()}catch(J){throw J}})()}}const sa=new WeakMap;function Yt(v){const d=(0,F.m9)(v);return sa.has(d)||sa.set(d,gn._fromUser(d)),sa.get(d)}const Qe="__sak";class Ot{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Qe,"1"),this.storage.removeItem(Qe),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const tl=(()=>{class v extends Ot{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ri(){const v=(0,F.z$)();return K(v)||re(v)}()&&function Bt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=He(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const $=this.storage.getItem(I),J=this.localCache[I];$!==J&&g(I,J,$)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((lt,zt,on)=>{this.notifyListeners(lt,on)});const $=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const lt=this.storage.getItem($);if(g.newValue!==lt)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!I)return}const J=()=>{const lt=this.storage.getItem($);!I&&this.localCache[$]===lt||this.notifyListeners($,lt)},Oe=this.storage.getItem($);!function Pe(){return(0,F.w1)()&&10===document.documentMode}()||Oe===g.newValue||g.newValue===g.oldValue?J():setTimeout(J,10)}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var $=()=>super._set,J=this;return(0,p.Z)(function*(){yield $().call(J,g,I),J.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,$=this;return(0,p.Z)(function*(){const J=yield I().call($,g);return $.localCache[g]=JSON.stringify(J),J})()}_remove(g){var I=()=>super._remove,$=this;return(0,p.Z)(function*(){yield I().call($,g),delete $.localCache[g]})()}}return v.type="LOCAL",v})(),oa=(()=>{class v extends Ot{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let Nl=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(J=>J.isListeningto(g));if(I)return I;const $=new v(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,p.Z)(function*(){const $=g,{eventId:J,eventType:Oe,data:lt}=$.data,zt=I.handlersMap[Oe];if(!zt?.size)return;$.ports[0].postMessage({status:"ack",eventId:J,eventType:Oe});const on=Array.from(zt).map(function(){var mr=(0,p.Z)(function*(vo){return vo($.origin,lt)});return function(vo){return mr.apply(this,arguments)}}()),Mn=yield function Ol(v){return Promise.all(v.map(function(){var d=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return d.apply(this,arguments)}}()))}(on);$.ports[0].postMessage({status:"done",eventId:J,eventType:Oe,response:Mn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ko(v="",d=10){let g="";for(let I=0;I<d;I++)g+=Math.floor(10*Math.random());return v+g}class ii{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,I=50){var $=this;return(0,p.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let Oe,lt;return new Promise((zt,on)=>{const Mn=Ko("",20);J.port1.start();const mr=setTimeout(()=>{on(new Error("unsupported_event"))},I);lt={messageChannel:J,onMessage(vo){const Hs=vo;if(Hs.data.eventId===Mn)switch(Hs.data.status){case"ack":clearTimeout(mr),Oe=setTimeout(()=>{on(new Error("timeout"))},3e3);break;case"done":clearTimeout(Oe),zt(Hs.data.response);break;default:clearTimeout(mr),clearTimeout(Oe),on(new Error("invalid_response"))}}},$.handlers.add(lt),J.port1.addEventListener("message",lt.onMessage),$.target.postMessage({eventType:d,eventId:Mn,data:g},[J.port2])}).finally(()=>{lt&&$.removeMessageHandler(lt)})})()}}function yi(){return window}function bs(){return typeof yi().WorkerGlobalScope<"u"&&"function"==typeof yi().importScripts}function Hr(){return(Hr=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Sn="firebaseLocalStorageDb",sr="firebaseLocalStorage",Qt="fbase_key";class Ji{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function qo(v,d){return v.transaction([sr],d?"readwrite":"readonly").objectStore(sr)}function Mr(){const v=indexedDB.open(Sn,1);return new Promise((d,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(sr,{keyPath:Qt})}catch($){g($)}}),v.addEventListener("success",(0,p.Z)(function*(){const I=v.result;I.objectStoreNames.contains(sr)?d(I):(I.close(),yield function Ia(){const v=indexedDB.deleteDatabase(Sn);return new Ji(v).toPromise()}(),d(yield Mr()))}))})}function Ro(v,d,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,p.Z)(function*(v,d,g){const I=qo(v,!0).put({[Qt]:d,value:g});return new Ji(I).toPromise()})).apply(this,arguments)}function Ca(){return(Ca=(0,p.Z)(function*(v,d){const g=qo(v,!1).get(d),I=yield new Ji(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ru(v,d){const g=qo(v,!0).delete(d);return new Ji(g).toPromise()}const rl=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Mr()),g.db})()}_withRetries(g){var I=this;return(0,p.Z)(function*(){let $=0;for(;;)try{const J=yield I._openDb();return yield g(J)}catch(J){if($++>3)throw J;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return bs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Nl._getInstance(function Ts(){return bs()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*($,J){return{keyProcessed:(yield g._poll()).includes(J.key)}});return function($,J){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*($,J){return["keyChanged"]});return function($,J){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var I,$;if(g.activeServiceWorker=yield function ja(){return Hr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ii(g.activeServiceWorker);const J=yield g.sender._send("ping",{},800);!J||(null===(I=J[0])||void 0===I?void 0:I.fulfilled)&&(null===($=J[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function wn(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Mr();return yield Ro(g,Qe,"1"),yield Ru(g,Qe),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var $=this;return(0,p.Z)(function*(){return $._withPendingWrite((0,p.Z)(function*(){return yield $._withRetries(J=>Ro(J,g,I)),$.localCache[g]=I,$.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,p.Z)(function*(){const $=yield I._withRetries(J=>function xu(v,d){return Ca.apply(this,arguments)}(J,g));return I.localCache[g]=$,$})()}_remove(g){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries($=>Ru($,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const I=yield g._withRetries(Oe=>{const lt=qo(Oe,!1).getAll();return new Ji(lt).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const $=[],J=new Set;for(const{fbase_key:Oe,value:lt}of I)J.add(Oe),JSON.stringify(g.localCache[Oe])!==JSON.stringify(lt)&&(g.notifyListeners(Oe,lt),$.push(Oe));for(const Oe of Object.keys(g.localCache))g.localCache[Oe]&&!J.has(Oe)&&(g.notifyListeners(Oe,null),$.push(Oe));return $})()}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Zo(v,d){return vt(v,"POST","/v2/accounts/mfaSignIn:start",Ct(v,d))}const Ga=1e12;class Ci{constructor(d){this.auth=d,this.counter=Ga,this._widgets=new Map}render(d,g){const I=this.counter;return this._widgets.set(I,new Li(d,this.auth.name,g||{})),this.counter++,I}reset(d){var g;const I=d||Ga;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(d){var g;return(null===(g=this._widgets.get(d||Ga))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,p.Z)(function*(){var I;return null===(I=g._widgets.get(d||Ga))||void 0===I||I.execute(),""})()}}class Li{constructor(d,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof d?document.getElementById(d):d;Ce($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function iu(v){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $s=Rr("rcb"),ba=new Ve(3e4,6e4);class Pu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=yi().grecaptcha)||void 0===d||!d.render)}load(d,g=""){return Ce(function kl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),d,"argument-error"),this.shouldResolveImmediately(g)&&Dn(yi().grecaptcha)?Promise.resolve(yi().grecaptcha):new Promise((I,$)=>{const J=yi().setTimeout(()=>{$(rt(d,"network-request-failed"))},ba.get());yi()[$s]=()=>{yi().clearTimeout(J),delete yi()[$s];const lt=yi().grecaptcha;if(!lt||!Dn(lt))return void $(rt(d,"internal-error"));const zt=lt.render;lt.render=(on,Mn)=>{const mr=zt(on,Mn);return this.counter++,mr},this.hostLanguage=g,I(lt)},jn(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:$s,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(J),$(rt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var g;return!(null===(g=yi().grecaptcha)||void 0===g||!g.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xi{load(d){return(0,p.Z)(function*(){return new Ci(d)})()}clearedOneInstance(){}}const za="recaptcha",aa={theme:"light",type:"image"};class _{constructor(d,g=Object.assign({},aa),I){this.parameters=g,this.type=za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ar(I),this.isInvisible="invisible"===this.parameters.size,Ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof d?document.getElementById(d):d;Ce($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xi:new Pu,this.validateStartingState()}verify(){var d=this;return(0,p.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(g)||new Promise(J=>{const Oe=lt=>{!lt||(d.tokenChangeListeners.delete(Oe),J(lt))};d.tokenChangeListeners.add(Oe),d.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ce(!this.parameters.sitekey,this.auth,"argument-error"),Ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof d)d(g);else if("string"==typeof d){const I=yi()[d];"function"==typeof I&&I(g)}}}assertNotDestroyed(){Ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,p.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,p.Z)(function*(){Ce(Wt()&&!bs(),d.auth,"internal-error"),yield function E(){let v=null;return new Promise(d=>{"complete"!==document.readyState?(v=()=>d(),window.addEventListener("load",v)):d()}).catch(d=>{throw v&&window.removeEventListener("load",v),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function ke(v){return Ne.apply(this,arguments)}(d.auth);Ce(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class y{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=kr._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function A(v,d,g){return O.apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(v,d,g){const I=Ar(v),$=yield Kt(I,d,(0,F.m9)(g));return new y($,J=>P(I,J))})).apply(this,arguments)}function z(v,d,g){return ue.apply(this,arguments)}function ue(){return(ue=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);yield It(!1,I,"phone");const $=yield Kt(I.auth,d,(0,F.m9)(g));return new y($,J=>q(I,J))})).apply(this,arguments)}function me(v,d,g){return ut.apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v),$=yield Kt(I.auth,d,(0,F.m9)(g));return new y($,J=>ln(I,J))})).apply(this,arguments)}function Kt(v,d,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,p.Z)(function*(v,d,g){var I;const $=yield g.verify();try{let J;if(Ce("string"==typeof $,v,"argument-error"),Ce(g.type===za,v,"argument-error"),J="string"==typeof d?{phoneNumber:d}:d,"session"in J){const Oe=J.session;if("phoneNumber"in J)return Ce("enroll"===Oe.type,v,"internal-error"),(yield Mt(v,{idToken:Oe.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{Ce("signin"===Oe.type,v,"internal-error");const lt=(null===(I=J.multiFactorHint)||void 0===I?void 0:I.uid)||J.multiFactorUid;return Ce(lt,v,"missing-multi-factor-info"),(yield Zo(v,{mfaPendingCredential:Oe.credential,mfaEnrollmentId:lt,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Oe}=yield ea(v,{phoneNumber:J.phoneNumber,recaptchaToken:$});return Oe}}finally{g._reset()}})).apply(this,arguments)}function dn(v,d){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(v,d){yield cs((0,F.m9)(v),d)})).apply(this,arguments)}let As=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Ar(g)}verifyPhoneNumber(g,I){return Kt(this.auth,g,(0,F.m9)(I))}static credential(g,I){return kr._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:$}=g;return I&&$?kr._fromTokenResponse(I,$):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function fi(v,d){return d?G(d):(Ce(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class oo extends Xr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return cr(d,this._buildIdpRequest())}_linkToIdToken(d,g){return cr(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return cr(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function Qr(v){return Pr(v.auth,new oo(v),v.bypassAuthState)}function Ou(v){const{auth:d,user:g}=v;return Ce(g,d,"internal-error"),jo(g,new oo(v),v.bypassAuthState)}function Ta(v){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,p.Z)(function*(v){const{auth:d,user:g}=v;return Ce(g,d,"internal-error"),cs(g,new oo(v),v.bypassAuthState)})).apply(this,arguments)}class il{constructor(d,g,I,$,J=!1){this.auth=d,this.resolver=I,this.user=$,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,p.Z)(function*(I,$){d.pendingPromise={resolve:I,reject:$};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(J){d.reject(J)}});return function(I,$){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:$,postBody:J,tenantId:Oe,error:lt,type:zt}=d;if(lt)return void g.reject(lt);const on={auth:g.auth,requestUri:I,sessionId:$,tenantId:Oe||void 0,postBody:J||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(zt)(on))}catch(Mn){g.reject(Mn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Qr;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return Ou;default:ge(this.auth,"internal-error")}}resolve(d){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ou=new Ve(2e3,1e4);function Ss(v,d,g){return au.apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(v,d,g){const I=Ar(v);Et(v,d,yr);const $=fi(I,g);return new ua(I,"signInViaPopup",d,$).executeNotNull()})).apply(this,arguments)}function Vi(v,d,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);Et(I.auth,d,yr);const $=fi(I.auth,g);return new ua(I.auth,"reauthViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}function Fl(v,d,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);Et(I.auth,d,yr);const $=fi(I.auth,g);return new ua(I.auth,"linkViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}let ua=(()=>{class v extends il{constructor(g,I,$,J,Oe){super(g,I,J,Oe),this.provider=$,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const I=yield g.execute();return Ce(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,p.Z)(function*(){en(1===g.filter.length,"Popup operations only handle one event");const I=Ko();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(rt(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,$;this.pollId=null!==($=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,ou.get())};g()}}return v.currentPopupAction=null,v})();const Sa=new Map;class Wa extends il{constructor(d,g,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,p.Z)(function*(){let I=Sa.get(g.auth._key());if(!I){try{const J=(yield function Ll(v,d){return Dr.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;I=()=>Promise.resolve(J)}catch($){I=()=>Promise.reject($)}Sa.set(g.auth._key(),I)}return g.bypassAuthState||Sa.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(I,d);if("unknown"!==d.type){if(d.eventId){const $=yield I.auth._redirectUserForId(d.eventId);if($)return I.user=$,g().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Dr(){return(Dr=(0,p.Z)(function*(v,d){const g=es(d),I=Po(v);if(!(yield I._isAvailable()))return!1;const $="true"===(yield I._get(g));return yield I._remove(g),$})).apply(this,arguments)}function uu(v,d){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(v,d){return Po(v)._set(es(d),"true")})).apply(this,arguments)}function oi(){Sa.clear()}function Vl(v,d){Sa.set(v._key(),d)}function Po(v){return G(v._redirectPersistence)}function es(v){return At("pendingRedirect",v.config.apiKey,v.name)}function ol(v,d,g){return function Tc(v,d,g){return bi.apply(this,arguments)}(v,d,g)}function bi(){return(bi=(0,p.Z)(function*(v,d,g){const I=Ar(v);Et(v,d,yr),yield I._initializationPromise;const $=fi(I,g);return yield uu($,I),$._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function lu(v,d,g){return function mo(v,d,g){return ai.apply(this,arguments)}(v,d,g)}function ai(){return(ai=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);Et(I.auth,d,yr),yield I.auth._initializationPromise;const $=fi(I.auth,g);yield uu($,I.auth);const J=yield xa(I);return $._openRedirect(I.auth,d,"reauthViaRedirect",J)})).apply(this,arguments)}function Ma(v,d,g){return function ku(v,d,g){return Fu.apply(this,arguments)}(v,d,g)}function Fu(){return(Fu=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);Et(I.auth,d,yr),yield I.auth._initializationPromise;const $=fi(I.auth,g);yield It(!1,I,d.providerId),yield uu($,I.auth);const J=yield xa(I);return $._openRedirect(I.auth,d,"linkViaRedirect",J)})).apply(this,arguments)}function al(v,d){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,p.Z)(function*(v,d){return yield Ar(v)._initializationPromise,Yo(v,d,!1)})).apply(this,arguments)}function Yo(v,d){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(v,d,g=!1){const I=Ar(v),$=fi(I,d),Oe=yield new Wa(I,$,g).execute();return Oe&&!g&&(delete Oe.user._redirectEventId,yield I._persistUserIfCurrent(Oe.user),yield I._setRedirectUser(null,d)),Oe})).apply(this,arguments)}function xa(v){return ao.apply(this,arguments)}function ao(){return(ao=(0,p.Z)(function*(v){const d=Ko(`${v.uid}:::`);return v._redirectEventId=d,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),d})).apply(this,arguments)}class la{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(g=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ka(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cu(v);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var I;if(d.error&&!cu(d)){const $=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(rt(this.auth,$))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const I=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jo(d))}saveEventToCache(d){this.cachedEventUids.add(Jo(d)),this.lastProcessedEventTime=Date.now()}}function Jo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(d=>d).join("-")}function cu({type:v,error:d}){return"unknown"===v&&"auth/no-auth-event"===d?.code}function du(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(v,d={}){return vt(v,"GET","/v1/projects",d)})).apply(this,arguments)}const Ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function hu(){return(hu=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:d}=yield du(v);for(const g of d)try{if(fu(g))return}catch{}ge(v,"unauthorized-domain")})).apply(this,arguments)}function fu(v){const d=Tt(),{protocol:g,hostname:I}=new URL(d);if(v.startsWith("chrome-extension://")){const Oe=new URL(v);return""===Oe.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&Oe.hostname===I}if(!ed.test(g))return!1;if(Ra.test(v))return I===v;const $=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(I)}const ll=new Ve(3e4,6e4);function Vu(){const v=yi().___jsl;if(v?.H)for(const d of Object.keys(v.H))if(v.H[d].r=v.H[d].r||[],v.H[d].L=v.H[d].L||[],v.H[d].r=[...v.H[d].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let ca=null;function nd(v){return ca=ca||function td(v){return new Promise((d,g)=>{var I,$,J;function Oe(){Vu(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Vu(),g(rt(v,"network-request-failed"))},timeout:ll.get()})}if(null!==($=null===(I=yi().gapi)||void 0===I?void 0:I.iframes)&&void 0!==$&&$.Iframe)d(gapi.iframes.getContext());else{if(null===(J=yi().gapi)||void 0===J||!J.load){const lt=Rr("iframefcb");return yi()[lt]=()=>{gapi.load?Oe():g(rt(v,"network-request-failed"))},jn(`https://apis.google.com/js/api.js?onload=${lt}`).catch(zt=>g(zt))}Oe()}}).catch(d=>{throw ca=null,d})}(v),ca}const da=new Ve(5e3,15e3),cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(v){const d=v.config;Ce(d.authDomain,v,"auth-domain-config-required");const g=d.emulator?Ke(d,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:v.name,v:B.SDK_VERSION},$=Zr.get(v.config.apiHost);$&&(I.eid=$);const J=v._getFrameworks();return J.length&&(I.fw=J.join(",")),`${g}?${(0,F.xO)(I).slice(1)}`}function w(){return w=(0,p.Z)(function*(v){const d=yield nd(v),g=yi().gapi;return Ce(g,v,"internal-error"),d.open({where:document.body,url:ns(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cl,dontclear:!0},I=>new Promise(function(){var $=(0,p.Z)(function*(J,Oe){yield I.restyle({setHideOnLeave:!1});const lt=rt(v,"network-request-failed"),zt=yi().setTimeout(()=>{Oe(lt)},da.get());function on(){yi().clearTimeout(zt),J(I)}I.ping(on).then(on,()=>{Oe(lt)})});return function(J,Oe){return $.apply(this,arguments)}}()))}),w.apply(this,arguments)}const T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ct{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zn=encodeURIComponent("fac");function gs(v,d,g,I,$,J){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(v,d,g,I,$,J){Ce(v.config.authDomain,v,"auth-domain-config-required"),Ce(v.config.apiKey,v,"invalid-api-key");const Oe={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:B.SDK_VERSION,eventId:$};if(d instanceof yr){d.setDefaultLanguage(v.languageCode),Oe.providerId=d.providerId||"",(0,F.xb)(d.getCustomParameters())||(Oe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Mn,mr]of Object.entries(J||{}))Oe[Mn]=mr}if(d instanceof Ys){const Mn=d.getScopes().filter(mr=>""!==mr);Mn.length>0&&(Oe.scopes=Mn.join(","))}v.tenantId&&(Oe.tid=v.tenantId);const lt=Oe;for(const Mn of Object.keys(lt))void 0===lt[Mn]&&delete lt[Mn];const zt=yield v._getAppCheckToken(),on=zt?`#${zn}=${encodeURIComponent(zt)}`:"";return`${Ui(v)}?${(0,F.xO)(lt).slice(1)}${on}`})).apply(this,arguments)}function Ui({config:v}){return v.emulator?Ke(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}const ha="webStorageSupport",uo=class pu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oa,this._completeRedirectFn=Yo,this._overrideRedirectResult=Vl}_openPopup(d,g,I,$){var J=this;return(0,p.Z)(function*(){var Oe;en(null===(Oe=J.eventManagers[d._key()])||void 0===Oe?void 0:Oe.manager,"_initialize() not called before _openPopup()");const lt=yield gs(d,g,I,Tt(),$);return function nn(v,d,g,I=500,$=600){const J=Math.max((window.screen.availHeight-$)/2,0).toString(),Oe=Math.max((window.screen.availWidth-I)/2,0).toString();let lt="";const zt=Object.assign(Object.assign({},T),{width:I.toString(),height:$.toString(),top:J,left:Oe}),on=(0,F.z$)().toLowerCase();g&&(lt=H(on)?"_blank":g),Y(on)&&(d=d||"http://localhost",zt.scrollbars="yes");const Mn=Object.entries(zt).reduce((vo,[Hs,$l])=>`${vo}${Hs}=${$l},`,"");if(function X(v=(0,F.z$)()){var d;return re(v)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(on)&&"_self"!==lt)return function Jt(v,d){const g=document.createElement("a");g.href=v,g.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(d||"",lt),new ct(null);const mr=window.open(d||"",lt,Mn);Ce(mr,v,"popup-blocked");try{mr.focus()}catch{}return new ct(mr)}(d,lt,Ko())})()}_openRedirect(d,g,I,$){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(d),function kn(v){yi().location.href=v}(yield gs(d,g,I,Tt(),$)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:$,promise:J}=this.eventManagers[g];return $?Promise.resolve($):(en(J,"If manager is not set, promise should be"),J)}const I=this.initAndGetManager(d);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(d){var g=this;return(0,p.Z)(function*(){const I=yield function rd(v){return w.apply(this,arguments)}(d),$=new la(d);return I.register("authEvent",J=>(Ce(J?.authEvent,d,"invalid-auth-event"),{status:$.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:$},g.iframes[d._key()]=I,$})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(ha,{type:ha},$=>{var J;const Oe=null===(J=$?.[0])||void 0===J?void 0:J[ha];void 0!==Oe&&g(!!Oe),ge(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ul(v){return hu.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return He()||K()||re()}};class gu extends class Pa{constructor(d){this.factorId=d}_process(d,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,I);case"signin":return this._finalizeSignIn(d,g.credential);default:return _t("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new gu(d)}_finalizeEnroll(d,g,I){return function Ir(v,d){return vt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(v,d))}(d,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function si(v,d){return vt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ct(v,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rf=(()=>{class v{constructor(){}static assertion(g){return gu._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var dl="@firebase/auth";class hl{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);!g||(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,F.Pz)("authIdTokenMaxAge"),function sd(v){(0,B._registerComponent)(new Ie.wA("auth",(d,{options:g})=>{const I=d.getProvider("app").getImmediate(),$=d.getProvider("heartbeat"),J=d.getProvider("app-check-internal"),{apiKey:Oe,authDomain:lt}=I.options;Ce(Oe&&!Oe.includes(":"),"invalid-api-key",{appName:I.name});const zt={apiKey:Oe,authDomain:lt,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_n(v)},on=new Ni(I,$,J,zt);return function Mi(v,d){const g=d?.persistence||[],I=(Array.isArray(g)?g:[g]).map(G);d?.errorMap&&v._updateErrorMap(d.errorMap),v._initializeWithPersistence(I,d?.popupRedirectResolver)}(on,g),on},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,I)=>{d.getProvider("auth-internal").initialize()})),(0,B._registerComponent)(new Ie.wA("auth-internal",d=>{const g=Ar(d.getProvider("auth").getImmediate());return new hl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,B.registerVersion)(dl,"0.23.2",function lh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,B.registerVersion)(dl,"0.23.2","esm2017")}("Browser")},2810:(Ht,Le,R)=>{R.d(Le,{u7:()=>sg,Jj:()=>vc,IX:()=>Cm,my:()=>Ai,xU:()=>Ic,Lz:()=>Ml,WA:()=>Ot,F8:()=>yf,$q:()=>sh,W:()=>Dc,EK:()=>Hr,PU:()=>og,l7:()=>Yo,Ky:()=>Qt,Xb:()=>sr,Cf:()=>xr,K9:()=>sa,Me:()=>Tc,yq:()=>Lr,Wi:()=>Em,ET:()=>Cc,Ab:()=>Jv,vr:()=>my,Fc:()=>Tm,hJ:()=>Kp,B$:()=>qp,at:()=>qd,oe:()=>uy,AK:()=>py,TF:()=>Sm,JU:()=>Zp,ST:()=>Uv,fH:()=>Bv,Ix:()=>Am,Wu:()=>Km,Lx:()=>Wm,qY:()=>zi,GL:()=>nu,QT:()=>ey,kl:()=>ty,Xk:()=>ny,PL:()=>ry,UQ:()=>iy,zN:()=>sy,nP:()=>Xv,b9:()=>Df,vh:()=>rg,Pb:()=>Mm,L$:()=>xm,cf:()=>qv,sc:()=>Zv,Xo:()=>Hm,IO:()=>jm,iE:()=>Zd,Eo:()=>Im,i3:()=>fy,Bt:()=>gy,pl:()=>oy,Ub:()=>fs,qK:()=>Xm,TQ:()=>zm,e0:()=>Gm,r7:()=>ay,Mx:()=>Jp,ar:()=>$m});var ee,p=R(5861),F=R(6881),B=R(4859),ce=R(1877),he=R(2090),Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},De={},Fe=Fe||{},te=Ie||self;function fe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ee(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var at="closure_uid_"+(1e9*Math.random()>>>0),tt=0;function Rt(i,e,t){return i.call.apply(i.bind,arguments)}function qe(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function Re(i,e,t){return(Re=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rt:qe).apply(null,arguments)}function Pt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function yt(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(s,a,c){for(var f=Array(arguments.length-2),D=2;D<arguments.length;D++)f[D-2]=arguments[D];return e.prototype[a].apply(s,f)}}function ge(){this.s=this.s,this.o=this.o}ge.prototype.s=!1,ge.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Dt(i){Object.prototype.hasOwnProperty.call(i,at)&&i[at]||(i[at]=++tt)}(this)},ge.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const it=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Et(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function ht(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(fe(s)){const a=i.length||0,c=s.length||0;i.length=a+c;for(let f=0;f<c;f++)i[a+f]=s[f]}else i.push(s)}}function Ce(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!te.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{te.addEventListener("test",()=>{},e),te.removeEventListener("test",()=>{},e)}catch{}return i}();function en(i){return/^[\s\xa0]*$/.test(i)}function Tt(){var i=te.navigator;return i&&(i=i.userAgent)?i:""}function Wt(i){return-1!=Tt().indexOf(i)}function Vt(i){return Vt[" "](i),i}Vt[" "]=function(){};var vt,i,Ue=Wt("Opera"),Ve=Wt("Trident")||Wt("MSIE"),Ke=Wt("Edge"),je=Ke||Ve,Je=Wt("Gecko")&&!(-1!=Tt().toLowerCase().indexOf("webkit")&&!Wt("Edge"))&&!(Wt("Trident")||Wt("MSIE"))&&!Wt("Edge"),pt=-1!=Tt().toLowerCase().indexOf("webkit")&&!Wt("Edge");function Ct(){var i=te.document;return i?i.documentMode:void 0}e:{var Zt="",kt=(i=Tt(),Je?/rv:([^\);]+)(\)|;)/.exec(i):Ke?/Edge\/([\d\.]+)/.exec(i):Ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):pt?/WebKit\/(\S+)/.exec(i):Ue?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(kt&&(Zt=kt?kt[1]:""),Ve){var tn=Ct();if(null!=tn&&tn>parseFloat(Zt)){vt=String(tn);break e}}vt=Zt}var Fn=te.document&&Ve&&(Ct()||parseInt(vt,10))||void 0;function ar(i,e){if(Ce.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Je){e:{try{Vt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Xt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ar.$.h.call(this)}}yt(ar,Ce);var Xt={2:"touch",3:"pen",4:"mouse"};ar.prototype.h=function(){ar.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var fn="closure_listenable_"+(1e6*Math.random()|0),Pn=0;function $n(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Pn,this.fa=this.ia=!1}function br(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function _r(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Rn(i){const e={};for(const t in i)e[t]=i[t];return e}const Un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ur(i,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)i[t]=s[t];for(let c=0;c<Un.length;c++)t=Un[c],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Br(i){this.src=i,this.g={},this.h=0}function Bn(i,e){var t=e.type;if(t in i.g){var c,s=i.g[t],a=it(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(br(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function qn(i,e,t,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}Br.prototype.add=function(i,e,t,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var f=qn(i,e,s,a);return-1<f?(e=i[f],t||(e.ia=!1)):((e=new $n(e,this.src,c,!!s,a)).ia=t,i.push(e)),e};var Ze="closure_lm_"+(1e6*Math.random()|0),pe={};function de(i,e,t,s,a){if(s&&s.once)return rn(i,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)de(i,e[c],t,s,a);return null}return t=Ft(t),i&&i[fn]?i.O(e,t,Ee(s)?!!s.capture:!!s,a):Xe(i,e,t,!1,s,a)}function Xe(i,e,t,s,a,c){if(!e)throw Error("Invalid event type");var f=Ee(a)?!!a.capture:!!a,D=pn(i);if(D||(i[Ze]=D=new Br(i)),(t=D.add(e,t,s,f,c)).proxy)return t;if(s=function ot(){const e=Nn;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)_t||(a=f),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(Nt(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function rn(i,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)rn(i,e[c],t,s,a);return null}return t=Ft(t),i&&i[fn]?i.P(e,t,Ee(s)?!!s.capture:!!s,a):Xe(i,e,t,!0,s,a)}function yn(i,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)yn(i,e[c],t,s,a);else s=Ee(s)?!!s.capture:!!s,t=Ft(t),i&&i[fn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=qn(c=i.g[e],t,s,a))&&(br(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=pn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=qn(e,t,s,a)),(t=-1<i?e[i]:null)&&Tn(t))}function Tn(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[fn])Bn(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Nt(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=pn(e))?(Bn(t,i),0==t.h&&(t.src=null,e[Ze]=null)):br(i)}}}function Nt(i){return i in pe?pe[i]:pe[i]="on"+i}function Nn(i,e){if(i.fa)i=!0;else{e=new ar(e,this);var t=i.listener,s=i.la||i.src;i.ia&&Tn(i),i=t.call(s,e)}return i}function pn(i){return(i=i[Ze])instanceof Br?i:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(i){return"function"==typeof i?i:(i[rr]||(i[rr]=function(e){return i.handleEvent(e)}),i[rr])}function we(){ge.call(this),this.i=new Br(this),this.S=this,this.J=null}function Ye(i,e){var t,s=i.J;if(s)for(t=[];s;s=s.J)t.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new Ce(e,i);else if(e instanceof Ce)e.target=e.target||i;else{var a=e;ur(e=new Ce(s,i),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];a=et(f,s,!0,e)&&a}if(a=et(f=e.g=i,s,!0,e)&&a,a=et(f,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=et(f=e.g=t[c],s,!1,e)&&a}function et(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.fa&&f.capture==t){var D=f.listener,N=f.la||f.src;f.ia&&Bn(i.i,f),a=!1!==D.call(N,s)&&a}}return a&&!s.defaultPrevented}yt(we,ge),we.prototype[fn]=!0,we.prototype.removeEventListener=function(i,e,t,s){yn(this,i,e,t,s)},we.prototype.N=function(){if(we.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)br(t[s]);delete i.g[e],i.h--}}this.J=null},we.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},we.prototype.P=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var jt=te.JSON.stringify;function G(){var i=H;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Be=new class xe{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new At,i=>i.reset());class At{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function le(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function ae(i){te.setTimeout(()=>{throw i},0)}let Y,K=!1,H=new class ie{constructor(){this.h=this.g=null}add(e,t){const s=Be.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Te=()=>{const i=te.Promise.resolve(void 0);Y=()=>{i.then(dt)}};var dt=()=>{for(var i;i=G();){try{i.h.call(i.g)}catch(t){ae(t)}var e=Be;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}K=!1};function $t(i,e){we.call(this),this.h=i||1,this.g=e||te,this.j=Re(this.qb,this),this.l=Date.now()}function an(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function re(i,e,t){if("function"==typeof i)t&&(i=Re(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Re(i.handleEvent,i)}return 2147483647<Number(e)?-1:te.setTimeout(i,e||0)}function oe(i){i.g=re(()=>{i.g=null,i.i&&(i.i=!1,oe(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}yt($t,we),(ee=$t.prototype).ga=!1,ee.T=null,ee.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(an(this),this.start()))}},ee.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ee.N=function(){$t.$.N.call(this),an(this),delete this.g};class X extends ge{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(te.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(i){ge.call(this),this.h=i,this.g={}}yt(Pe,ge);var He=[];function Bt(i,e,t,s){Array.isArray(t)||(t&&(He[0]=t.toString()),t=He);for(var a=0;a<t.length;a++){var c=de(e,t[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function _n(i){_r(i.g,function(e,t){this.g.hasOwnProperty(t)&&Tn(e)},i),i.g={}}function ke(){this.g=!0}function wt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Vn(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<a.length;f++)a[f]=""}}}return jt(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Pe.prototype.N=function(){Pe.$.N.call(this),_n(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ke.prototype.Ea=function(){this.g=!1},ke.prototype.info=function(){};var Zn={},Tr=null;function jn(){return Tr=Tr||new we}function Rr(i){Ce.call(this,Zn.Ta,i)}function Gr(i){const e=jn();Ye(e,new Rr(e))}function Wr(i,e){Ce.call(this,Zn.STAT_EVENT,i),this.stat=e}function Or(i){const e=jn();Ye(e,new Wr(e,i))}function Ns(i,e){Ce.call(this,Zn.Ua,i),this.size=e}function Qn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return te.setTimeout(function(){i()},e)}Zn.Ta="serverreachability",yt(Rr,Ce),Zn.STAT_EVENT="statevent",yt(Wr,Ce),Zn.Ua="timingevent",yt(Ns,Ce);var ui={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ks={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ni(){}function Ki(){}Ni.prototype.h=null;var ss,Kr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mi(){Ce.call(this,"d")}function jr(){Ce.call(this,"c")}function qr(){}function $r(i,e,t,s){this.l=i,this.j=e,this.m=t,this.W=s||1,this.U=new Pe(this),this.P=Xr,this.V=new $t(i=je?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}yt(Mi,Ce),yt(jr,Ce),yt(qr,Ni),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},ss=new qr;var Xr=45e3,os={},Nr={};function Bi(i,e,t){i.L=1,i.v=ys(Ln(e)),i.s=t,i.S=!0,qs(i,null)}function qs(i,e){i.G=Date.now(),dr(i),i.A=Ln(i.v);var t=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),Zi(t.i,"t",s),i.C=0,t=i.l.J,i.h=new Ks,i.g=zo(i.l,t?e:null,!i.s),0<i.O&&(i.M=new X(Re(i.Pa,i,i.g),i.O)),Bt(i.U,i.g,"readystatechange",i.nb),e=i.I?Rn(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Gr(),function Ne(i,e,t,s,a,c){i.info(function(){if(i.g)if(c)for(var f="",D=c.split("&"),N=0;N<D.length;N++){var U=D[N].split("=");if(1<U.length){var Q=U[0];U=U[1];var ve=Q.split("_");f=2<=ve.length&&"type"==ve[1]?f+(Q+"=")+U+"&":f+(Q+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(i.j,i.u,i.A,i.m,i.W,i.s)}function wo(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Fs(i,e,t){let a,s=!0;for(;!i.J&&i.C<t.length;){if(a=ma(i,t),a==Nr){4==e&&(i.o=4,Or(14),s=!1),wt(i.j,i.m,null,"[Incomplete Response]");break}if(a==os){i.o=4,Or(15),wt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}wt(i.j,i.m,a,null),be(i,a)}wo(i)&&a!=Nr&&a!=os&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Or(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),$o(e),e.M=!0,Or(11))):(wt(i.j,i.m,t,"[Invalid Chunked Response]"),Me(i),lo(i))}function ma(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Nr:(t=Number(e.substring(t,s)),isNaN(t)?os:(s+=1)+t>e.length?Nr:(e=e.slice(s,s+t),i.C=s+t,e))}function dr(i){i.Y=Date.now()+i.P,Io(i,i.P)}function Io(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Qn(Re(i.lb,i),e)}function Do(i){i.B&&(te.clearTimeout(i.B),i.B=null)}function lo(i){0==i.l.H||i.J||Ao(i.l,i)}function Me(i){Do(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,an(i.V),_n(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function be(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||ji(t.i,i)))if(!i.K&&ji(t.i,i)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;Go(t),ws(t)}va(t),Or(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Qn(Re(t.ib,t),6e3));if(1>=ls(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else js(t,11)}else if((i.K||t.g==i)&&Go(t),!en(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let U=a[e];if(t.V=U[0],U=U[1],2==t.H)if("c"==U[0]){t.K=U[1],t.pa=U[2];const Q=U[3];null!=Q&&(t.ra=Q,t.l.info("VER="+t.ra));const ve=U[4];null!=ve&&(t.Ga=ve,t.l.info("SVER="+t.Ga));const Ge=U[5];null!=Ge&&"number"==typeof Ge&&0<Ge&&(t.L=s=1.5*Ge,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const ft=i.g;if(ft){const Gt=ft.g?ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gt){var c=s.i;c.g||-1==Gt.indexOf("spdy")&&-1==Gt.indexOf("quic")&&-1==Gt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(hi(c,c.h),c.h=null))}if(s.F){const hn=ft.g?ft.g.getResponseHeader("X-HTTP-Session-Id"):null;hn&&(s.Da=hn,cr(s.I,s.F,hn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var f=i;if((s=t).wa=eo(s,s.J?s.pa:null,s.Y),f.K){ho(s.i,f);var D=f,N=s.L;N&&D.setTimeout(N),D.B&&(Do(D),dr(D)),s.g=f}else Va(s);0<t.j.length&&wi(t)}else"stop"!=U[0]&&"close"!=U[0]||js(t,7);else 3==t.H&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?js(t,7):Xs(t):"noop"!=U[0]&&t.h&&t.h.Aa(U),t.A=0)}Gr()}catch{}}function Ut(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(fe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function gt(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(fe(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function $e(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(fe(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],i)}(ee=$r.prototype).setTimeout=function(i){this.P=i},ee.nb=function(i){i=i.target;const e=this.M;e&&3==k(i)?e.l():this.Pa(i)},ee.Pa=function(i){try{if(i==this.g)e:{const Q=k(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Q)&&(3!=Q||je||this.g&&(this.h.h||this.g.ja()||P(this.g)))){this.J||4!=Q||7==e||Gr(),Do(this);var t=this.g.da();this.ca=t;t:if(wo(this)){var s=P(this.g);i="";var a=s.length,c=4==k(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Me(this),lo(this);var f="";break t}this.h.i=new te.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=200==t,function St(i,e,t,s,a,c,f){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.W,Q,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!en(D)){var U=D;break t}}U=null}if(!(t=U)){this.i=!1,this.o=3,Or(12),Me(this),lo(this);break e}wt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,be(this,t)}this.S?(Fs(this,Q,f),je&&this.i&&3==Q&&(Bt(this.U,this.V,"tick",this.mb),this.V.start())):(wt(this.j,this.m,f,null),be(this,f)),4==Q&&Me(this),this.i&&!this.J&&(4==Q?Ao(this.l,this):(this.i=!1,dr(this)))}else(function M(i){const e={};i=(i.g&&2<=k(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(en(i[s]))continue;var t=le(i[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function xt(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Or(12)):(this.o=0,Or(13)),Me(this),lo(this)}}}catch{}},ee.mb=function(){if(this.g){var i=k(this.g),e=this.g.ja();this.C<e.length&&(Do(this),Fs(this,i,e),this.i&&4!=i&&dr(this))}},ee.cancel=function(){this.J=!0,Me(this)},ee.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Dn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gr(),Or(17)),Me(this),this.o=2,lo(this)):Io(this,this.Y-i)};var An=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Xn){this.h=i.h,ei(this,i.j),this.s=i.s,this.g=i.g,li(this,i.m),this.l=i.l;var e=i.i,t=new Ls;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pi(this,t),this.o=i.o}else i&&(e=String(i).match(An))?(this.h=!1,ei(this,e[1]||"",!0),this.s=ci(e[2]||""),this.g=ci(e[3]||"",!0),li(this,e[4]),this.l=ci(e[5]||"",!0),pi(this,e[6]||"",!0),this.o=ci(e[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}function Ln(i){return new Xn(i)}function ei(i,e,t){i.j=t?ci(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function li(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function pi(i,e,t){e instanceof Ls?(i.i=e,function _s(i,e){e&&!i.j&&(qi(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Zs(this,s),Zi(this,a,t))},i)),i.j=e}(i.i,i.h)):(t||(e=di(e,Vo)),i.i=new Ls(e,i.h))}function cr(i,e,t){i.i.set(e,t)}function ys(i){return cr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ci(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function di(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ea),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ea(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Xn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(di(e,as,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(di(e,as,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(di(t,"/"==t.charAt(0)?us:Lo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",di(t,Co)),i.join("")};var as=/[#\/\?@]/g,Lo=/[#\?:]/g,us=/[#\?]/g,Vo=/[#\?@]/g,Co=/#/g;function Ls(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function qi(i){i.g||(i.g=new Map,i.h=0,i.i&&function ir(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var c=i[t].substring(0,s);a=i[t].substring(s+1)}else c=i[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zs(i,e){qi(i),e=vs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function kr(i,e){return qi(i),e=vs(i,e),i.g.has(e)}function Zi(i,e,t){Zs(i,e),0<t.length&&(i.i=null,i.g.set(vs(i,e),Et(t)),i.h+=t.length)}function vs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ta(i){this.l=i||yr,i=te.PerformanceNavigationTiming?0<(i=te.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(te.g&&te.g.Ka&&te.g.Ka()&&te.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ee=Ls.prototype).add=function(i,e){qi(this),this.i=null,i=vs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ee.forEach=function(i,e){qi(this),this.g.forEach(function(t,s){t.forEach(function(a){i.call(e,a,s,this)},this)},this)},ee.ta=function(){qi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=i[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},ee.Z=function(i){qi(this);let e=[];if("string"==typeof i)kr(this,i)&&(e=e.concat(this.g.get(vs(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ee.set=function(i,e){return qi(this),this.i=null,kr(this,i=vs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ee.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),f=this.Z(s);for(s=0;s<f.length;s++){var a=c;""!==f[s]&&(a+="="+encodeURIComponent(String(f[s]))),i.push(a)}}return this.i=i.join("&")};var yr=10;function Ys(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ls(i){return i.h?1:i.g?i.g.size:0}function ji(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function hi(i,e){i.g?i.g.add(e):i.h=e}function ho(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function bo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return Et(i.i)}function ti(){this.g=new class{stringify(i){return te.JSON.stringify(i,void 0)}parse(i){return te.JSON.parse(i,void 0)}}}function ya(i,e,t){const s=t||"";try{Ut(i,function(a,c){let f=a;Ee(a)&&(f=jt(a)),e.push(s+c+"="+encodeURIComponent(f))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Qs(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function gi(i){this.l=i.fc||null,this.j=i.ob||!1}function zr(i,e){we.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Es,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ta.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},yt(gi,Ni),gi.prototype.g=function(){return new zr(this.l,this.j)},gi.prototype.i=function(i){return function(){return i}}({}),yt(zr,we);var Es=0;function On(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Js(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Vs(i)}function Vs(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ee=zr.prototype).open=function(i,e){if(this.readyState!=Es)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Vs(this)},ee.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||te).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Js(this)),this.readyState=Es},ee.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof te.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;On(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ee.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Js(this):Vs(this),3==this.readyState&&On(this)}},ee.Za=function(i){this.g&&(this.response=this.responseText=i,Js(this))},ee.Ya=function(i){this.g&&(this.response=i,Js(this))},ee.ka=function(){this.g&&Js(this)},ee.setRequestHeader=function(i,e){this.v.append(i,e)},ee.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ee.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ei=te.JSON.parse;function Fr(i){we.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Us,this.L=this.M=!1}yt(Fr,we);var Us="",To=/^https?$/i,cs=["POST","PUT"];function It(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Jn(i),Yi(i)}function Jn(i){i.F||(i.F=!0,Ye(i,"complete"),Ye(i,"error"))}function jo(i){if(i.h&&typeof Fe<"u"&&(!i.C[1]||4!=k(i)||2!=i.da()))if(i.v&&4==k(i))re(i.La,0,i);else if(Ye(i,"readystatechange"),4==k(i)){i.h=!1;try{const f=i.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===f){var a=String(i.I).match(An)[1]||null;!a&&te.self&&te.self.location&&(a=te.self.location.protocol.slice(0,-1)),s=!To.test(a?a.toLowerCase():"")}t=s}if(t)Ye(i,"complete"),Ye(i,"success");else{i.m=6;try{var c=2<k(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Jn(i)}}finally{Yi(i)}}}function Yi(i,e){if(i.g){Pr(i);const t=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ye(i,"ready");try{t.onreadystatechange=s}catch{}}}function Pr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(te.clearTimeout(i.A),i.A=null)}function k(i){return i.g?i.g.readyState:0}function P(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Us:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function q(i){let e="";return _r(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function nt(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=q(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):cr(i,e,t))}function ln(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Yn(i){this.Ga=0,this.j=[],this.l=new ke,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ln("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ln("baseRetryDelayMs",5e3,i),this.hb=ln("retryDelaySeedMs",1e4,i),this.eb=ln("forwardChannelMaxRetries",2,i),this.xa=ln("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new ta(i&&i.concurrentRequestLimit),this.Ja=new ti,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xs(i){if(mi(i),3==i.H){var e=i.W++,t=Ln(i.I);if(cr(t,"SID",i.K),cr(t,"RID",e),cr(t,"TYPE","terminate"),ni(i,t),(e=new $r(i,i.l,e)).L=2,e.v=ys(Ln(t)),t=!1,te.navigator&&te.navigator.sendBeacon)try{t=te.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&te.Image&&((new Image).src=e.v,t=!0),t||(e.g=zo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),dr(e)}_a(i)}function ws(i){i.g&&($o(i),i.g.cancel(),i.g=null)}function mi(i){ws(i),i.u&&(te.clearTimeout(i.u),i.u=null),Go(i),i.i.cancel(),i.m&&("number"==typeof i.m&&te.clearTimeout(i.m),i.m=null)}function wi(i){if(!Ys(i.i)&&!i.m){i.m=!0;var e=i.Na;Y||Te(),K||(Y(),K=!0),H.add(e,i),i.C=0}}function Bs(i,e){var t;t=e?e.m:i.W++;const s=Ln(i.I);cr(s,"SID",i.K),cr(s,"RID",t),cr(s,"AID",i.V),ni(i,s),i.o&&i.s&&nt(s,i.o,i.s),t=new $r(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Is(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),hi(i.i,t),Bi(t,s,e)}function ni(i,e){i.na&&_r(i.na,function(t,s){cr(e,s,t)}),i.h&&Ut({},function(t,s){cr(e,s,t)})}function Is(i,e,t){t=Math.min(i.j.length,t);var s=i.h?Re(i.h.Va,i.h,i):null;e:{var a=i.j;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=a[0].g,f.push("ofs="+c)):c=0:f.push("ofs="+c);let D=!0;for(let N=0;N<t;N++){let U=a[N].g;const Q=a[N].map;if(U-=c,0>U)c=Math.max(0,a[N].g-100),D=!1;else try{ya(Q,f,"req"+U+"_")}catch{s&&s(Q)}}if(D){s=f.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,s}function Va(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Y||Te(),K||(Y(),K=!0),H.add(e,i),i.A=0}}function va(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Qn(Re(i.Ma,i),Fi(i,i.A)),i.A++,0))}function $o(i){null!=i.B&&(te.clearTimeout(i.B),i.B=null)}function Ho(i){i.g=new $r(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Ln(i.wa);cr(e,"RID","rpc"),cr(e,"SID",i.K),cr(e,"AID",i.V),cr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&cr(e,"TO",i.qa),cr(e,"TYPE","xmlhttp"),ni(i,e),i.o&&i.s&&nt(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=ys(Ln(e)),t.s=null,t.S=!0,qs(t,i)}function Go(i){null!=i.v&&(te.clearTimeout(i.v),i.v=null)}function Ao(i,e){var t=null;if(i.g==e){Go(i),$o(i),i.g=null;var s=2}else{if(!ji(i.i,e))return;t=e.F,ho(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=i.C;Ye(s=jn(),new Ns(s,t)),wi(i)}else Va(i);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function Qi(i,e){return!(ls(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Qn(Re(i.Na,i,e),Fi(i,i.C)),i.C++,0)))}(i,e)||2==s&&va(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:js(i,5);break;case 4:js(i,10);break;case 3:js(i,6);break;default:js(i,2)}}function Fi(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function js(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var s=Re(i.pb,i);t||(t=new Xn("//www.google.com/images/cleardot.gif"),te.location&&"http"==te.location.protocol||ei(t,"https"),ys(t)),function Uo(i,e){const t=new ke;if(te.Image){const s=new Image;s.onload=Pt(Qs,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Pt(Qs,t,s,"TestLoadImage: error",!1,e),s.onabort=Pt(Qs,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Pt(Qs,t,s,"TestLoadImage: timeout",!1,e),te.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Or(2);i.H=0,i.h&&i.h.za(e),_a(i),mi(i)}function _a(i){if(i.H=0,i.ma=[],i.h){const e=bo(i.i);(0!=e.length||0!=i.j.length)&&(ht(i.ma,e),ht(i.ma,i.j),i.i.i.length=0,Et(i.j),i.j.length=0),i.h.ya()}}function eo(i,e,t){var s=t instanceof Xn?Ln(t):new Xn(t);if(""!=s.g)e&&(s.g=e+"."+s.g),li(s,s.m);else{var a=te.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Xn(null);s&&ei(c,s),e&&(c.g=e),a&&li(c,a),t&&(c.l=t),s=c}return e=i.Da,(t=i.F)&&e&&cr(s,t,e),cr(s,"VER",i.ra),ni(i,s),s}function zo(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fr(t&&i.Ha&&!i.va?new gi({ob:!0}):i.va)).Oa(i.J),e}function fo(){}function So(){if(Ve&&!(10<=Number(Fn)))throw Error("Environmental error: no available transport.")}function xi(i,e){we.call(this),this.g=new Yn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!en(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!en(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new na(this)}function ds(i){Mi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ua(){jr.call(this),this.status=1}function na(i){this.g=i}function Ii(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vr(i,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=i.g[3],f=(e=i.g[0])+(c^(t=i.g[1])&((a=i.g[2])^c))+s[0]+3614090360&4294967295;f=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(f<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|f>>>10))+((f=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|f>>>12))+((f=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|f>>>9))+((f=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|f>>>11))+((c=(e=t+((f=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|f>>>22))^((a=c+((f=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|f>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(f<<21&4294967295|f>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+c&4294967295}function Er(i,e){this.h=e;for(var t=[],s=!0,a=i.length-1;0<=a;a--){var c=0|i[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(ee=Fr.prototype).Oa=function(i){this.M=i},ee.ha=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ss.g(),this.C=function Ar(i){return i.h||(i.h=i.i())}(this.u?this.u:ss),this.g.onreadystatechange=Re(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void It(this,c)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=te.FormData&&i instanceof te.FormData,!(0<=it(cs,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,f]of t)this.g.setRequestHeader(c,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pr(this),0<this.B&&((this.L=function Bo(i){return Ve&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Re(this.ua,this)):this.A=re(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){It(this,c)}},ee.ua=function(){typeof Fe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))},ee.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ye(this,"complete"),Ye(this,"abort"),Yi(this))},ee.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yi(this,!0)),Fr.$.N.call(this)},ee.La=function(){this.s||(this.G||this.v||this.l?jo(this):this.kb())},ee.kb=function(){jo(this)},ee.isActive=function(){return!!this.g},ee.da=function(){try{return 2<k(this)?this.g.status:-1}catch{return-1}},ee.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ee.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ei(e)}},ee.Ia=function(){return this.m},ee.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ee=Yn.prototype).ra=8,ee.H=1,ee.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new $r(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Rn(c),ur(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Is(this,a,e),cr(t=Ln(this.I),"RID",i),cr(t,"CVER",22),this.F&&cr(t,"X-HTTP-Session-Id",this.F),ni(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(q(c)))+"&"+e:this.o&&nt(t,this.o,c)),hi(this.i,a),this.bb&&cr(t,"TYPE","init"),this.P?(cr(t,"$req",e),cr(t,"SID","null"),a.aa=!0,Bi(a,t,null)):Bi(a,t,e),this.H=2}}else 3==this.H&&(i?Bs(this,i):0==this.j.length||Ys(this.i)||Bs(this))},ee.Ma=function(){if(this.u=null,Ho(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Qn(Re(this.jb,this),i)}},ee.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Or(10),ws(this),Ho(this))},ee.ib=function(){null!=this.v&&(this.v=null,ws(this),va(this),Or(19))},ee.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Or(2)):(this.l.info("Failed to ping google.com"),Or(1))},ee.isActive=function(){return!!this.h&&this.h.isActive(this)},(ee=fo.prototype).Ba=function(){},ee.Aa=function(){},ee.za=function(){},ee.ya=function(){},ee.isActive=function(){return!0},ee.Va=function(){},So.prototype.g=function(i,e){return new xi(i,e)},yt(xi,we),xi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Or(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=eo(i,null,i.Y),wi(i)},xi.prototype.close=function(){Xs(this.g)},xi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=jt(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&wi(e)},xi.prototype.N=function(){this.g.h=null,delete this.j,Xs(this.g),delete this.g,xi.$.N.call(this)},yt(ds,Mi),yt(Ua,jr),yt(na,fo),na.prototype.Ba=function(){Ye(this.g,"a")},na.prototype.Aa=function(i){Ye(this.g,new ds(i))},na.prototype.za=function(i){Ye(this.g,new Ua)},na.prototype.ya=function(){Ye(this.g,"b")},yt(Ii,function pr(){this.blockSize=-1}),Ii.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ii.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)vr(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(s[a++]=i.charCodeAt(c++),a==this.blockSize){vr(this,s),a=0;break}}else for(;c<e;)if(s[a++]=i[c++],a==this.blockSize){vr(this,s),a=0;break}}this.h=a,this.i+=e},Ii.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)i[t++]=this.g[e]>>>s&255;return i};var ra={};function Mo(i){return-128<=i&&128>i?function nr(i,e){var t=ra;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new Er([0|e],0>e?-1:0)}):new Er([0|i],0>i?-1:0)}function Ri(i){if(isNaN(i)||!isFinite(i))return Cs;if(0>i)return Di(Ri(-i));for(var e=[],t=1,s=0;i>=t;s++)e[s]=i/t|0,t*=Ds;return new Er(e,0)}var Ds=4294967296,Cs=Mo(0),to=Mo(1),ia=Mo(16777216);function hs(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function $i(i){return-1==i.h}function Di(i){for(var e=i.g.length,t=[],s=0;s<e;s++)t[s]=~i.g[s];return new Er(t,~i.h).add(to)}function Pi(i,e){return i.add(Di(e))}function no(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Wo(i,e){this.g=i,this.h=e}function ro(i,e){if(hs(e))throw Error("division by zero");if(hs(i))return new Wo(Cs,Cs);if($i(i))return e=ro(Di(i),e),new Wo(Di(e.g),Di(e.h));if($i(e))return e=ro(i,Di(e)),new Wo(Di(e.g),e.h);if(30<i.g.length){if($i(i)||$i(e))throw Error("slowDivide_ only works with positive integers.");for(var t=to,s=e;0>=s.X(i);)t=po(t),s=po(s);var a=xo(t,1),c=xo(s,1);for(s=xo(s,2),t=xo(t,2);!hs(s);){var f=c.add(s);0>=f.X(i)&&(a=a.add(t),c=f),s=xo(s,1),t=xo(t,1)}return e=Pi(i,a.R(e)),new Wo(a,e)}for(a=Cs;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),f=(c=Ri(t)).R(e);$i(f)||0<f.X(i);)f=(c=Ri(t-=s)).R(e);hs(c)&&(c=to),a=a.add(c),i=Pi(i,f)}return new Wo(a,i)}function po(i){for(var e=i.g.length+1,t=[],s=0;s<e;s++)t[s]=i.D(s)<<1|i.D(s-1)>>>31;return new Er(t,i.h)}function xo(i,e){var t=e>>5;e%=32;for(var s=i.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?i.D(c+t)>>>e|i.D(c+t+1)<<32-e:i.D(c+t);return new Er(a,i.h)}(ee=Er.prototype).ea=function(){if($i(this))return-Di(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);i+=(0<=s?s:Ds+s)*e,e*=Ds}return i},ee.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(hs(this))return"0";if($i(this))return"-"+Di(this).toString(i);for(var e=Ri(Math.pow(i,6)),t=this,s="";;){var a=ro(t,e).g,c=((0<(t=Pi(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(hs(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},ee.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ee.X=function(i){return $i(i=Pi(this,i))?-1:hs(i)?0:1},ee.abs=function(){return $i(this)?Di(this):this},ee.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&i.D(a)),f=(c>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=f>>>16,t[a]=(f&=65535)<<16|(c&=65535)}return new Er(t,-2147483648&t[t.length-1]?-1:0)},ee.R=function(i){if(hs(this)||hs(i))return Cs;if($i(this))return $i(i)?Di(this).R(Di(i)):Di(Di(this).R(i));if($i(i))return Di(this.R(Di(i)));if(0>this.X(ia)&&0>i.X(ia))return Ri(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var c=this.D(s)>>>16,f=65535&this.D(s),D=i.D(a)>>>16,N=65535&i.D(a);t[2*s+2*a]+=f*N,no(t,2*s+2*a),t[2*s+2*a+1]+=c*N,no(t,2*s+2*a+1),t[2*s+2*a+1]+=f*D,no(t,2*s+2*a+1),t[2*s+2*a+2]+=c*D,no(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Er(t,0)},ee.gb=function(i){return ro(this,i).h},ee.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&i.D(s);return new Er(t,this.h&i.h)},ee.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|i.D(s);return new Er(t,this.h|i.h)},ee.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^i.D(s);return new Er(t,this.h^i.h)},So.prototype.createWebChannel=So.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,ks.COMPLETE="complete",Ki.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",we.prototype.listen=we.prototype.O,Fr.prototype.listenOnce=Fr.prototype.P,Fr.prototype.getLastError=Fr.prototype.Sa,Fr.prototype.getLastErrorCode=Fr.prototype.Ia,Fr.prototype.getStatus=Fr.prototype.da,Fr.prototype.getResponseJson=Fr.prototype.Wa,Fr.prototype.getResponseText=Fr.prototype.ja,Fr.prototype.send=Fr.prototype.ha,Fr.prototype.setWithCredentials=Fr.prototype.Oa,Ii.prototype.digest=Ii.prototype.l,Ii.prototype.reset=Ii.prototype.reset,Ii.prototype.update=Ii.prototype.j,Er.prototype.add=Er.prototype.add,Er.prototype.multiply=Er.prototype.R,Er.prototype.modulo=Er.prototype.gb,Er.prototype.compare=Er.prototype.X,Er.prototype.toNumber=Er.prototype.ea,Er.prototype.toString=Er.prototype.toString,Er.prototype.getBits=Er.prototype.D,Er.fromNumber=Ri,Er.fromString=function Ea(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Di(Ea(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ri(Math.pow(e,8)),s=Cs,a=0;a<i.length;a+=8){var c=Math.min(8,i.length-a),f=parseInt(i.substring(a,a+c),e);8>c?(c=Ri(Math.pow(e,c)),s=s.R(c).add(Ri(f))):s=(s=s.R(t)).add(Ri(f))}return s};var ru=De.createWebChannelTransport=function(){return new So},b=De.getStatEventTarget=function(){return jn()},V=De.ErrorCode=ui,x=De.EventType=ks,W=De.Event=Zn,_e=De.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},st=De.FetchXmlHttpFactory=gi,mt=De.WebChannel=Ki,En=De.XhrIo=Fr,gr=De.Md5=Ii,tr=De.Integer=Er;const wr="@firebase/firestore";class Cn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let Sr="9.23.0";const Hn=new ce.Yd("@firebase/firestore");function Yr(){return Hn.logLevel}function fs(i){Hn.setLogLevel(i)}function Mt(i,...e){if(Hn.logLevel<=ce.in.DEBUG){const t=e.map(go);Hn.debug(`Firestore (${Sr}): ${i}`,...t)}}function Ir(i,...e){if(Hn.logLevel<=ce.in.ERROR){const t=e.map(go);Hn.error(`Firestore (${Sr}): ${i}`,...t)}}function Lr(i,...e){if(Hn.logLevel<=ce.in.WARN){const t=e.map(go);Hn.warn(`Firestore (${Sr}): ${i}`,...t)}}function go(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function sn(i="Unexpected state"){const e=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: `+i;throw Ir(e),new Error(e)}function gn(i,e){i||sn()}function sa(i,e){i||sn()}function Yt(i,e){return i}const Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ot extends he.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Su{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}}class wa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tl{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=U=>this.i!==a?(a=this.i,t(U)):Promise.resolve();let f=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new ri,e.enqueueRetryable(()=>c(this.currentUser))};const D=()=>{const U=f;e.enqueueRetryable((0,p.Z)(function*(){yield U.promise,yield c(s.currentUser)}))},N=U=>{Mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(U=>N(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?N(U):(Mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new ri)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gn("string"==typeof s.accessToken),new Su(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gn(null===e||"string"==typeof e),new Cn(e)}}class Ba{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class oa{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ba(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ol{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=c=>{null!=c.error&&Mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.T;return this.T=c.token,Mt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{Mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):Mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gn("string"==typeof t.token),this.T=t.token,new Ol(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ii(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class yi{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=ii(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function kn(i,e){return i<e?-1:i>e?1:0}function bs(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}function ja(i){return i+"\0"}class Hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ot(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ot(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ot(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ot(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hr.fromMillis(Date.now())}static fromDate(e){return Hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Hr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wn(e)}static min(){return new wn(new Hr(0,0))}static max(){return new wn(new Hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ts{constructor(e,t,s){void 0===t?t=0:t>e.length&&sn(),void 0===s?s=e.length-t:s>e.length-t&&sn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ts.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),f=t.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Sn extends Ts{construct(e,t,s){return new Sn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ot(Qe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Sn(t)}static emptyPath(){return new Sn([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Ts{construct(e,t,s){return new sr(e,t,s)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new Ot(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new Ot(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[a+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new Ot(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=N,a+=2}else"`"===D?(f=!f,a++):"."!==D||f?(s+=D,a++):(c(),a++)}if(c(),f)throw new Ot(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(t)}static emptyPath(){return new sr([])}}class Qt{constructor(e){this.path=e}static fromPath(e){return new Qt(Sn.fromString(e))}static fromName(e){return new Qt(Sn.fromString(e).popFirst(5))}static empty(){return new Qt(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qt(new Sn(e.slice()))}}class Ji{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function qo(i){return i.fields.find(e=>2===e.kind)}function Ia(i){return i.fields.filter(e=>2!==e.kind)}Ji.UNKNOWN_ID=-1;class Ro{constructor(e,t){this.fieldPath=e,this.kind=t}}class xu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xu(0,ps.min())}}function Ca(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=wn.fromTimestamp(1e9===s?new Hr(t+1,0):new Hr(t,s));return new ps(a,Qt.empty(),e)}function Ru(i){return new ps(i.readTime,i.key,-1)}class ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ps(wn.min(),Qt.empty(),-1)}static max(){return new ps(wn.max(),Qt.empty(),-1)}}function nl(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qt.comparator(i.documentKey,e.documentKey),0!==t?t:kn(i.largestBatchId,e.largestBatchId))}const Ha="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Zo(i){return si.apply(this,arguments)}function si(){return si=(0,p.Z)(function*(i){if(i.code!==Qe.FAILED_PRECONDITION||i.message!==Ha)throw i;Mt("LocalStore","Unexpectedly lost primary lease")}),si.apply(this,arguments)}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(t){return ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,s)=>{t(e)})}static reject(e){return new ze((t,s)=>{s(e)})}static waitFor(e){return new ze((t,s)=>{let a=0,c=0,f=!1;e.forEach(D=>{++a,D.next(()=>{++c,f&&c===a&&t()},N=>s(N))}),f=!0,c===a&&t()})}static or(e){let t=ze.resolve(!1);for(const s of e)t=t.next(a=>a?ze.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new ze((s,a)=>{const c=e.length,f=new Array(c);let D=0;for(let N=0;N<c;N++){const U=N;t(e[U]).next(Q=>{f[U]=Q,++D,D===c&&s(f)},Q=>a(Q))}})}static doWhile(e,t){return new ze((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class io{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ri,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ci(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=su(s.target.error);this.v.reject(new Ci(e,a))}}static open(e,t,s,a){try{return new io(t,e.transaction(a,s))}catch(c){throw new Ci(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Mt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iu(t)}}class so{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===so.S((0,he.z$)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Mt("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,he.hl)())return!1;if(so.C())return!0;const e=(0,he.z$)(),t=so.S(e),s=0<t&&t<10,a=so.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,p.Z)(function*(){return t.db||(Mt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{s(f.target.result)},c.onblocked=()=>{a(new Ci(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const D=f.target.error;a("VersionError"===D.name?new Ot(Qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Ot(Qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ci(e,D))},c.onupgradeneeded=f=>{Mt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.V.O(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{Mt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,p.Z)(function*(){const f="readonly"===t;let D=0;for(;;){++D;try{c.db=yield c.$(e);const N=io.open(c.db,e,f?"readonly":"readwrite",s),U=a(N).next(Q=>(N.P(),Q)).catch(Q=>(N.abort(Q),ze.reject(Q))).toPromise();return U.catch(()=>{}),yield N.R,U}catch(N){const U=N,Q="FirebaseError"!==U.name&&D<3;if(Mt("SimpleDb","Transaction failed with error:",U.message,"Retrying:",Q),c.close(),!Q)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ga{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $s(this.L.delete())}}class Ci extends Ot{constructor(e,t){super(Qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Li(i){return"IndexedDbTransactionError"===i.name}class iu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Mt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Mt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),$s(s)}add(e){return Mt("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(void 0===t&&(t=null),Mt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Mt("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return Mt("SimpleDb","COUNT",this.store.name),$s(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.W(a,(f,D)=>{c.push(D)}).next(()=>c)}{const a=this.store.getAll(s.range);return new ze((c,f)=>{a.onerror=D=>{f(D.target.error)},a.onsuccess=D=>{c(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new ze((a,c)=>{s.onerror=f=>{c(f.target.error)},s.onsuccess=f=>{a(f.target.result)}})}J(e,t){Mt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(c,f,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new ze((s,a)=>{t.onerror=c=>{const f=su(c.target.error);a(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(D=>{D?f.continue():s()}):s()}})}W(e,t){const s=[];return new ze((a,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const D=f.target.result;if(!D)return void a();const N=new Ga(D),U=t(D.primaryKey,D.value,N);if(U instanceof ze){const Q=U.catch(ve=>(N.done(),ze.reject(ve)));s.push(Q)}N.isDone?a():null===N.K?D.continue():D.continue(N.K)}}).next(()=>ze.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(i){return new ze((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const a=su(s.target.error);t(a)}})}let ba=!1;function su(i){const e=so.S((0,he.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ba||(ba=!0,setTimeout(()=>{throw s},0)),s}}return i}class Pu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Mt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,p.Z)(function*(){t.task=null;try{Mt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Li(s)?Mt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Zo(s)}yield t.et(6e4)}))}}class kl{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,p.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,c=!0;return ze.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!s.has(f))return Mt("IndexBackiller",`Processing collection: ${f}`),this.it(e,f,a).next(D=>{a-=D,s.add(f)});c=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const f=c.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.rt(a,c)).next(D=>(Mt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>f.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,c)=>{const f=Ru(c);nl(f,s)>0&&(s=f)}),new ps(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xi=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function za(i){return null==i}function aa(i){return 0===i&&1/i==-1/0}function _(i){return"number"==typeof i&&Number.isInteger(i)&&!aa(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function E(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=A(e)),e=y(i.get(t),e);return A(e)}function y(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function A(i){return i+"\x01\x01"}function O(i){const e=i.length;if(gn(e>=2),2===e)return gn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Sn.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const f=i.indexOf("\x01",c);switch((f<0||f>t)&&sn(),i.charAt(f+1)){case"\x01":const D=i.substring(c,f);let N;0===a.length?N=D:(a+=D,N=a,a=""),s.push(N);break;case"\x10":a+=i.substring(c,f),a+="\0";break;case"\x11":a+=i.substring(c,f+1);break;default:sn()}c=f+2}return new Sn(s)}const z=["userId","batchId"];function ue(i,e){return[i,E(e)]}function me(i,e,t){return[i,E(e),t]}const ut={},Kt=["prefixPath","collectionGroup","readTime","documentId"],Gn=["prefixPath","collectionGroup","documentId"],dn=["collectionGroup","readTime","prefixPath","documentId"],hr=["canonicalId","targetId"],As=["targetId","path"],fi=["path","targetId"],oo=["collectionId","parent"],Qr=["indexId","uid"],Ou=["uid","sequenceNumber"],Ta=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Aa=["indexId","uid","orderedDocumentKey"],il=["userId","collectionPath","documentId"],ou=["userId","collectionPath","largestBatchId"],Ss=["userId","collectionGroup","largestBatchId"],au=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vi=[...au,"documentOverlays"],Nu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=Nu,sl=[...Fl,"indexConfiguration","indexState","indexEntries"];class ua extends rl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hi(i,e){const t=Yt(i);return so.M(t.ht,e)}function Sa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Wa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ll(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Dr{constructor(e,t){this.comparator=e,this.root=t||vi.EMPTY}insert(e,t){return new Dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??vi.RED,this.left=a??vi.EMPTY,this.right=c??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new vi(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return vi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const e=this.left.check();if(e!==this.right.check())throw sn();return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1,vi.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(i,e,t,s,a){return this}insert(i,e,t){return new vi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oi{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(e){return new Vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new oi(this.comparator);return t.data=e,t}}class Vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Po(i){return i.hasNext()?i.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new es([])}unionWith(e){let t=new oi(sr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ol extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tc(){return typeof atob<"u"}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ol("Invalid base64 string: "+a):a}}(e);return new bi(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const lu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(i){if(gn(!!i),"string"==typeof i){let e=0;const t=lu.exec(i);if(gn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ai(i.seconds),nanos:ai(i.nanos)}}function ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ma(i){return"string"==typeof i?bi.fromBase64String(i):bi.fromUint8Array(i)}function ku(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fu(i){const e=i.mapValue.fields.__previous_value__;return ku(e)?Fu(e):e}function al(i){const e=mo(i.mapValue.fields.__local_write_time__.timestampValue);return new Hr(e.seconds,e.nanos)}class Ul{constructor(e,t,s,a,c,f,D,N,U){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=D,this.longPollingOptions=N,this.useFetchStreams=U}}class Yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xa={nullValue:"NULL_VALUE"};function ao(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ku(i)?4:td(i)?9007199254740991:10:sn()}function yo(i,e){if(i===e)return!0;const t=ao(i);if(t!==ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return al(i).isEqual(al(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=mo(s.timestampValue),f=mo(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,Ma(i.bytesValue).isEqual(Ma(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return ai(s.geoPointValue.latitude)===ai(a.geoPointValue.latitude)&&ai(s.geoPointValue.longitude)===ai(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ai(s.integerValue)===ai(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=ai(s.doubleValue),f=ai(a.doubleValue);return c===f?aa(c)===aa(f):isNaN(c)&&isNaN(f)}return!1}(i,e);case 9:return bs(i.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Sa(c)!==Sa(f))return!1;for(const D in c)if(c.hasOwnProperty(D)&&(void 0===f[D]||!yo(c[D],f[D])))return!1;return!0}(i,e);default:return sn()}var a}function la(i,e){return void 0!==(i.values||[]).find(t=>yo(t,e))}function Jo(i,e){if(i===e)return 0;const t=ao(i),s=ao(e);if(t!==s)return kn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(i.booleanValue,e.booleanValue);case 2:return function(a,c){const f=ai(a.integerValue||a.doubleValue),D=ai(c.integerValue||c.doubleValue);return f<D?-1:f>D?1:f===D?0:isNaN(f)?isNaN(D)?0:-1:1}(i,e);case 3:return cu(i.timestampValue,e.timestampValue);case 4:return cu(al(i),al(e));case 5:return kn(i.stringValue,e.stringValue);case 6:return function(a,c){const f=Ma(a),D=Ma(c);return f.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),D=c.split("/");for(let N=0;N<f.length&&N<D.length;N++){const U=kn(f[N],D[N]);if(0!==U)return U}return kn(f.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const f=kn(ai(a.latitude),ai(c.latitude));return 0!==f?f:kn(ai(a.longitude),ai(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,c){const f=a.values||[],D=c.values||[];for(let N=0;N<f.length&&N<D.length;++N){const U=Jo(f[N],D[N]);if(U)return U}return kn(f.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===Qo.mapValue&&c===Qo.mapValue)return 0;if(a===Qo.mapValue)return 1;if(c===Qo.mapValue)return-1;const f=a.fields||{},D=Object.keys(f),N=c.fields||{},U=Object.keys(N);D.sort(),U.sort();for(let Q=0;Q<D.length&&Q<U.length;++Q){const ve=kn(D[Q],U[Q]);if(0!==ve)return ve;const Ge=Jo(f[D[Q]],N[U[Q]]);if(0!==Ge)return Ge}return kn(D.length,U.length)}(i.mapValue,e.mapValue);default:throw sn()}}function cu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return kn(i,e);const t=mo(i),s=mo(e),a=kn(t.seconds,s.seconds);return 0!==a?a:kn(t.nanos,s.nanos)}function Ka(i){return du(i)}function du(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=mo(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ma(i.bytesValue).toBase64():"referenceValue"in i?Qt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let a="[",c=!0;for(const f of s.values||[])c?c=!1:a+=",",a+=du(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",f=!0;for(const D of a)f?f=!1:c+=",",c+=`${D}:${du(s.fields[D])}`;return c+"}"}(i.mapValue):sn();var e}function Ra(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ed(i){return!!i&&"integerValue"in i}function ul(i){return!!i&&"arrayValue"in i}function hu(i){return!!i&&"nullValue"in i}function fu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ll(i){return!!i&&"mapValue"in i}function Vu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Wa(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Vu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ca(i){return"nullValue"in i?xa:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ra(Yo.empty(),Qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:sn()}function nd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ra(Yo.empty(),Qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Qo:sn()}function da(i,e){const t=Jo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bl(i,e){const t=Jo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ll(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=sr.emptyPath(),s={},a=[];e.forEach((f,D)=>{if(!t.isImmediateParentOf(D)){const N=this.getFieldsMap(t);this.applyChanges(N,s,a),s={},a=[],t=D.popLast()}f?s[D.lastSegment()]=Vu(f):a.push(D.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ll(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ll(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Wa(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new ts(Vu(this.value))}}function cl(i){const e=[];return Wa(i.fields,(t,s)=>{const a=new sr([t]);if(ll(s)){const c=cl(s.mapValue).fields;if(0===c.length)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new es(e)}class Zr{constructor(e,t,s,a,c,f,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=D}static newInvalidDocument(e){return new Zr(e,0,wn.min(),wn.min(),wn.min(),ts.empty(),0)}static newFoundDocument(e,t,s,a){return new Zr(e,1,t,wn.min(),s,a,0)}static newNoDocument(e,t){return new Zr(e,2,t,wn.min(),wn.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new Zr(e,3,t,wn.min(),wn.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ns{constructor(e,t){this.position=e,this.inclusive=t}}function rd(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(s=c.field.isKeyField()?Qt.comparator(Qt.fromName(f.referenceValue),t.key):Jo(f,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function w(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!yo(i.position[t],e.position[t]))return!1;return!0}class T{constructor(e,t="asc"){this.field=e,this.dir=t}}function j(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ne{}class ye extends ne{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ui(e,t,s):"array-contains"===t?new Pa(e,s):"in"===t?new gu(e,s):"not-in"===t?new Rf(e,s):"array-contains-any"===t?new Pf(e,s):new ye(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ha(e,s):new pu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jo(t,this.value)):null!==t&&ao(this.value)===ao(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Se extends ne{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Se(e,t)}matches(e){return ct(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ct(i){return"and"===i.op}function nn(i){return"or"===i.op}function Jt(i){return In(i)&&ct(i)}function In(i){for(const e of i.filters)if(e instanceof Se)return!1;return!0}function bn(i){if(i instanceof ye)return i.field.canonicalString()+i.op.toString()+Ka(i.value);if(Jt(i))return i.filters.map(e=>bn(e)).join(",");{const e=i.filters.map(t=>bn(t)).join(",");return`${i.op}(${e})`}}function zn(i,e){return i instanceof ye?(t=i,(s=e)instanceof ye&&t.op===s.op&&t.field.isEqual(s.field)&&yo(t.value,s.value)):i instanceof Se?function(t,s){return s instanceof Se&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,c,f)=>a&&zn(c,s.filters[f]),!0)}(i,e):void sn();var t,s}function gs(i,e){const t=i.filters.concat(e);return Se.create(t,i.op)}function _i(i){return i instanceof ye?`${(e=i).field.canonicalString()} ${e.op} ${Ka(e.value)}`:i instanceof Se?function(e){return e.op.toString()+" {"+e.getFilters().map(_i).join(" ,")+"}"}(i):"Filter";var e}class Ui extends ye{constructor(e,t,s){super(e,t,s),this.key=Qt.fromName(s.referenceValue)}matches(e){const t=Qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ha extends ye{constructor(e,t){super(e,"in",t),this.keys=uo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pu extends ye{constructor(e,t){super(e,"not-in",t),this.keys=uo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uo(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Qt.fromName(s.referenceValue))}class Pa extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ul(t)&&la(t.arrayValue,this.value)}}class gu extends ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&la(this.value.arrayValue,t)}}class Rf extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!la(this.value.arrayValue,t)}}class Pf extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>la(this.value.arrayValue,s))}}class id{constructor(e,t=null,s=[],a=[],c=null,f=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=D,this.dt=null}}function jl(i,e=null,t=[],s=[],a=null,c=null,f=null){return new id(i,e,t,s,a,c,f)}function Oa(i){const e=Yt(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>bn(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),za(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),e.dt=t}return e.dt}function dl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!j(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!zn(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!w(i.startAt,e.startAt)&&w(i.endAt,e.endAt)}function Uu(i){return Qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function hl(i,e){return i.filters.filter(t=>t instanceof ye&&t.field.isEqual(e))}function lh(i,e,t){let s=xa,a=!0;for(const c of hl(i,e)){let f=xa,D=!0;switch(c.op){case"<":case"<=":f=ca(c.value);break;case"==":case"in":case">=":f=c.value;break;case">":f=c.value,D=!1;break;case"!=":case"not-in":f=xa}da({value:s,inclusive:a},{value:f,inclusive:D})<0&&(s=f,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const f=t.position[c];da({value:s,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}function sd(i,e,t){let s=Qo,a=!0;for(const c of hl(i,e)){let f=Qo,D=!0;switch(c.op){case">=":case">":f=nd(c.value),D=!1;break;case"==":case"in":case"<=":f=c.value;break;case"<":f=c.value,D=!1;break;case"!=":case"not-in":f=Qo}Bl({value:s,inclusive:a},{value:f,inclusive:D})>0&&(s=f,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const f=t.position[c];Bl({value:s,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}class qa{constructor(e,t=null,s=[],a=[],c=null,f="F",D=null,N=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=D,this.endAt=N,this.wt=null,this._t=null}}function fl(i,e,t,s,a,c,f,D){return new qa(i,e,t,s,a,c,f,D)}function Bu(i){return new qa(i)}function ch(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ac(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function v(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function d(i){return null!==i.collectionGroup}function g(i){const e=Yt(i);if(null===e.wt){e.wt=[];const t=v(e),s=Ac(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new T(t)),e.wt.push(new T(sr.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new T(sr.keyField(),c))}}}return e.wt}function I(i){const e=Yt(i);if(!e._t)if("F"===e.limitType)e._t=jl(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of g(e))t.push(new T(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new ns(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ns(e.startAt.position,e.startAt.inclusive):null;e._t=jl(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function $(i,e){e.getFirstInequalityField(),v(i);const t=i.filters.concat([e]);return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function J(i,e,t){return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Oe(i,e){return dl(I(i),I(e))&&i.limitType===e.limitType}function lt(i){return`${Oa(I(i))}|lt:${i.limitType}`}function zt(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>_i(s)).join(", ")}]`),za(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),`Target(${t})`}(I(i))}; limitType=${i.limitType})`}function on(i,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Qt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(i,e)&&function(t,s){for(const a of g(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(a,c,f){const D=rd(a,c,f);return a.inclusive?D<=0:D<0}(t.startAt,g(t),s)||t.endAt&&!function(a,c,f){const D=rd(a,c,f);return a.inclusive?D>=0:D>0}(t.endAt,g(t),s)));var t,s}function Mn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mr(i){return(e,t)=>{let s=!1;for(const a of g(i)){const c=vo(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function vo(i,e,t){const s=i.field.isKeyField()?Qt.comparator(e.key,t.key):function(a,c,f){const D=c.data.field(a),N=f.data.field(a);return null!==D&&null!==N?Jo(D,N):sn()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return sn()}}class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const $l=new Dr(Qt.comparator);function Ms(){return $l}const Hl=new Dr(Qt.comparator);function mu(...i){let e=Hl;for(const t of i)e=e.insert(t.key,t);return e}function od(i){let e=Hl;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xo(){return ju()}function Sc(){return ju()}function ju(){return new Hs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Za=new Dr(Qt.comparator),ad=new oi(Qt.comparator);function lr(...i){let e=ad;for(const t of i)e=e.add(t);return e}const ud=new oi(kn);function dh(){return ud}function ld(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function fg(i){return{integerValue:""+i}}function Of(i,e){return _(e)?fg(e):ld(i,e)}class cd{constructor(){this._=void 0}}function pg(i,e,t){return i instanceof $u?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&ku(a)&&(a=Fu(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):i instanceof yu?Ff(i,e):i instanceof Hu?hh(i,e):function(s,a){const c=kf(s,a),f=Mc(c)+Mc(s.gt);return ed(c)&&ed(s.gt)?fg(f):ld(s.serializer,f)}(i,e)}function Nf(i,e,t){return i instanceof yu?Ff(i,e):i instanceof Hu?hh(i,e):t}function kf(i,e){return i instanceof pl?ed(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class $u extends cd{}class yu extends cd{constructor(e){super(),this.elements=e}}function Ff(i,e){const t=gg(e);for(const s of i.elements)t.some(a=>yo(a,s))||t.push(s);return{arrayValue:{values:t}}}class Hu extends cd{constructor(e){super(),this.elements=e}}function hh(i,e){let t=gg(e);for(const s of i.elements)t=t.filter(a=>!yo(a,s));return{arrayValue:{values:t}}}class pl extends cd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Mc(i){return ai(i.integerValue||i.doubleValue)}function gg(i){return ul(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xc{constructor(e,t){this.field=e,this.transform=t}}class xy{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Gl{}function fh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new gl(i.key,Ti.none()):new Pc(i.key,i.data,Ti.none());{const t=i.data,s=ts.empty();let a=new oi(sr.comparator);for(let c of e.fields)if(!a.has(c)){let f=t.field(c);null===f&&c.length>1&&(c=c.popLast(),f=t.field(c)),null===f?s.delete(c):s.set(c,f),a=a.add(c)}return new Ya(i.key,s,new es(a.toArray()),Ti.none())}}function zl(i,e,t){i instanceof Pc?function(s,a,c){const f=s.value.clone(),D=Lf(s.fieldTransforms,a,c.transformResults);f.setAll(D),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,e,t):i instanceof Ya?function(s,a,c){if(!Rc(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=Lf(s.fieldTransforms,a,c.transformResults),D=a.data;D.setAll(mg(s)),D.setAll(f),a.convertToFoundDocument(c.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dd(i,e,t,s){return i instanceof Pc?function(a,c,f,D){if(!Rc(a.precondition,c))return f;const N=a.value.clone(),U=hd(a.fieldTransforms,D,c);return N.setAll(U),c.convertToFoundDocument(c.version,N).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ya?function(a,c,f,D){if(!Rc(a.precondition,c))return f;const N=hd(a.fieldTransforms,D,c),U=c.data;return U.setAll(mg(a)),U.setAll(N),c.convertToFoundDocument(c.version,U).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(Q=>Q.field))}(i,e,t,s):(f=t,Rc(i.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f);var c,f}function Ry(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=kf(s.transform,a||null);null!=c&&(null===t&&(t=ts.empty()),t.set(s.field,c))}return t||null}function Py(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&bs(t,s,(a,c)=>function My(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof yu&&s instanceof yu||t instanceof Hu&&s instanceof Hu?bs(t.elements,s.elements,yo):t instanceof pl&&s instanceof pl?yo(t.gt,s.gt):t instanceof $u&&s instanceof $u);var t,s}(a,c))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Pc extends Gl{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ya extends Gl{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function mg(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Lf(i,e,t){const s=new Map;gn(i.length===t.length);for(let a=0;a<t.length;a++){const c=i[a],f=c.transform,D=e.data.field(c.field);s.set(c.field,Nf(f,D,t[a]))}return s}function hd(i,e,t){const s=new Map;for(const a of i){const c=a.transform,f=t.data.field(a.field);s.set(a.field,pg(c,f,e))}return s}class gl extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ph extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&zl(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Sc();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let D=this.applyToLocalView(f,c.mutatedFields);D=t.has(a.key)?null:D;const N=fh(f,D);null!==N&&s.set(a.key,N),f.isValidDocument()||f.convertToNoDocument(wn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lr())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(t,s)=>Py(t,s))&&bs(this.baseMutations,e.baseMutations,(t,s)=>Py(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){gn(e.mutations.length===s.length);let a=Za;const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,t){this.count=e,this.unchangedNames=t}}var ms,Vr;function yg(i){switch(i){default:return sn();case Qe.CANCELLED:case Qe.UNKNOWN:case Qe.DEADLINE_EXCEEDED:case Qe.RESOURCE_EXHAUSTED:case Qe.INTERNAL:case Qe.UNAVAILABLE:case Qe.UNAUTHENTICATED:return!1;case Qe.INVALID_ARGUMENT:case Qe.NOT_FOUND:case Qe.ALREADY_EXISTS:case Qe.PERMISSION_DENIED:case Qe.FAILED_PRECONDITION:case Qe.ABORTED:case Qe.OUT_OF_RANGE:case Qe.UNIMPLEMENTED:case Qe.DATA_LOSS:return!0}}function Gu(i){if(void 0===i)return Ir("GRPC error has no .code"),Qe.UNKNOWN;switch(i){case ms.OK:return Qe.OK;case ms.CANCELLED:return Qe.CANCELLED;case ms.UNKNOWN:return Qe.UNKNOWN;case ms.DEADLINE_EXCEEDED:return Qe.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return Qe.RESOURCE_EXHAUSTED;case ms.INTERNAL:return Qe.INTERNAL;case ms.UNAVAILABLE:return Qe.UNAVAILABLE;case ms.UNAUTHENTICATED:return Qe.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return Qe.INVALID_ARGUMENT;case ms.NOT_FOUND:return Qe.NOT_FOUND;case ms.ALREADY_EXISTS:return Qe.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return Qe.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return Qe.FAILED_PRECONDITION;case ms.ABORTED:return Qe.ABORTED;case ms.OUT_OF_RANGE:return Qe.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return Qe.UNIMPLEMENTED;case ms.DATA_LOSS:return Qe.DATA_LOSS;default:return sn()}}(Vr=ms||(ms={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class Wl{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vh}static getOrCreateInstance(){return null===vh&&(vh=new Wl),vh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vh=null;function ky(){return new TextEncoder}const H_=new tr([4294967295,4294967295],0);function Fy(i){const e=ky().encode(i),t=new gr;return t.update(e),new Uint8Array(t.digest())}function Ly(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new tr([t,s],0),new tr([a,c],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(s<0)throw new Oc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Oc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=tr.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(tr.fromNumber(s)));return 1===a.compare(H_)&&(a=new tr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const f=this.Et(s,a,c);if(!this.At(f))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new vg(c,a,t);return s.forEach(D=>f.insert(D)),f}insert(e){if(0===this.It)return;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const f=this.Et(s,a,c);this.Rt(f)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fd(wn.min(),a,new Dr(kn),Ms(),lr())}}class pd{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pd(s,t,lr(),lr(),lr())}}class _h{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _g{constructor(e,t){this.targetId=e,this.Vt=t}}class Eh{constructor(e,t,s=bi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class vu{constructor(){this.St=0,this.Dt=Uf(),this.Ct=bi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=lr(),t=lr(),s=lr();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:sn()}}),new pd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Uf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ms(),this.zt=Vf(),this.Wt=new Dr(kn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:sn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,c=this.se(s);if(c){const f=c.target;if(Uu(f))if(0===a){const D=new Qt(f.path);this.Yt(s,D,Zr.newNoDocument(D,wn.min()))}else gn(1===a);else{const D=this.ie(s);if(D!==a){const N=this.re(e,D);0!==N&&(this.ee(s),this.Wt=this.Wt.insert(s,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(U,Q,ve){var Ge,ft,Gt,hn,mn,fr;const Ur={localCacheCount:Q,existenceFilterCount:ve.count},Cr=ve.unchangedNames;return Cr&&(Ur.bloomFilter={applied:0===U,hashCount:null!==(Ge=Cr?.hashCount)&&void 0!==Ge?Ge:0,bitmapLength:null!==(hn=null===(Gt=null===(ft=Cr?.bits)||void 0===ft?void 0:ft.bitmap)||void 0===Gt?void 0:Gt.length)&&void 0!==hn?hn:0,padding:null!==(fr=null===(mn=Cr?.bits)||void 0===mn?void 0:mn.padding)&&void 0!==fr?fr:0}),Ur}(N,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:c="",padding:f=0},hashCount:D=0}=s;let N,U;try{N=Ma(c).toUint8Array()}catch(Q){if(Q instanceof ol)return Lr("Decoding the base64 bloom filter in existence filter failed ("+Q.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Q}try{U=new vg(N,f,D)}catch(Q){return Lr(Q instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",Q),1}return 0===U.It?1:a!==t-this.oe(e.targetId,U)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(c=>{const f=this.Gt.ue(),D=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.vt(D)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,f)=>{const D=this.se(f);if(D){if(c.current&&Uu(D.target)){const N=new Qt(D.target.path);null!==this.jt.get(N)||this.ae(f,N)||this.Yt(f,N,Zr.newNoDocument(N,e))}c.Mt&&(t.set(f,c.Ot()),c.Ft())}});let s=lr();this.zt.forEach((c,f)=>{let D=!0;f.forEachWhile(N=>{const U=this.se(N);return!U||"TargetPurposeLimboResolution"===U.purpose||(D=!1,!1)}),D&&(s=s.add(c))}),this.jt.forEach((c,f)=>f.setReadTime(e));const a=new fd(e,t,this.Wt,this.jt,s);return this.jt=Ms(),this.zt=Vf(),this.Wt=new Dr(kn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new vu,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new oi(kn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Mt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new vu),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new Dr(Qt.comparator)}function Uf(){return new Dr(Qt.comparator)}const Eg={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z_={and:"AND",or:"OR"};class W_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(i,e){return i.useProto3Json||za(e)?e:{value:e}}function ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function K_(i,e){return ml(i,e.toTimestamp())}function Gi(i){return gn(!!i),wn.fromTimestamp(function(e){const t=mo(e);return new Hr(t.seconds,t.nanos)}(i))}function Bf(i,e){return(t=i,new Sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wg(i){const e=Sn.fromString(i);return gn(Gf(e)),e}function yd(i,e){return Bf(i.databaseId,e.path)}function _u(i,e){const t=wg(e);if(t.get(1)!==i.databaseId.projectId)throw new Ot(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Ot(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Qt(Ih(t))}function wh(i,e){return Bf(i.databaseId,e)}function vd(i){const e=wg(i);return 4===e.length?Sn.emptyPath():Ih(e)}function _d(i){return new Sn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ih(i){return gn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ig(i,e,t){return{name:yd(i,e),fields:t.value.mapValue.fields}}function rs(i,e,t){const s=_u(i,e.name),a=Gi(e.updateTime),c=e.createTime?Gi(e.createTime):wn.min(),f=new ts({mapValue:{fields:e.fields}}),D=Zr.newFoundDocument(s,a,c,f);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function Kl(i,e){let t;if(e instanceof Pc)t={update:Ig(i,e.key,e.value)};else if(e instanceof gl)t={delete:yd(i,e.key)};else if(e instanceof Ya)t={update:Ig(i,e.key,e.data),updateMask:Gy(e.fieldMask)};else{if(!(e instanceof ph))return sn();t={verify:yd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const f=c.transform;if(f instanceof $u)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof yu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Hu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pl)return{fieldPath:c.field.canonicalString(),increment:f.gt};throw sn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:K_(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:sn()),t;var a}function Dh(i,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ti.updateTime(Gi(a.updateTime)):void 0!==a.exists?Ti.exists(a.exists):Ti.none():Ti.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,f){let D=null;"setToServerValue"in f?(gn("REQUEST_TIME"===f.setToServerValue),D=new $u):"appendMissingElements"in f?D=new yu(f.appendMissingElements.values||[]):"removeAllFromArray"in f?D=new Hu(f.removeAllFromArray.values||[]):"increment"in f?D=new pl(c,f.increment):sn();const N=sr.fromServerFormat(f.fieldPath);return new xc(N,D)}(i,a)):[];var a;if(e.update){const a=_u(i,e.update.name),c=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new es((e.updateMask.fieldPaths||[]).map(U=>sr.fromServerFormat(U)));return new Ya(a,c,f,t,s)}return new Pc(a,c,t,s)}if(e.delete){const a=_u(i,e.delete);return new gl(a,t)}if(e.verify){const a=_u(i,e.verify);return new ph(a,t)}return sn()}function Dg(i,e){return{documents:[wh(i,e.path)]}}function jf(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wh(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wh(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(N){if(0!==N.length)return Hf(Se.create(N,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(N){if(0!==N.length)return N.map(U=>{return{field:zu((Q=U).field),direction:q_(Q.dir)};var Q})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=md(i,e.limit);var D,N;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(N=e.endAt).inclusive,values:N.position}),t}function Cg(i){let e=vd(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){gn(1===s);const Q=t.from[0];Q.allDescendants?a=Q.collectionId:e=e.child(Q.collectionId)}let c=[];t.where&&(c=function(Q){const ve=Hy(Q);return ve instanceof Se&&Jt(ve)?ve.getFilters():[ve]}(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(Q=>{return new T(ql((ve=Q).field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ve.direction));var ve}));let D=null;t.limit&&(D=function(Q){let ve;return ve="object"==typeof Q?Q.value:Q,za(ve)?null:ve}(t.limit));let N=null;var Q;t.startAt&&(N=new ns((Q=t.startAt).values||[],!!Q.before));let U=null;return t.endAt&&(U=function(Q){return new ns(Q.values||[],!Q.before)}(t.endAt)),fl(e,a,f,c,D,"F",N,U)}function Hy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ql(e.unaryFilter.field);return ye.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ql(e.unaryFilter.field);return ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ql(e.unaryFilter.field);return ye.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ql(e.unaryFilter.field);return ye.create(c,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(i):void 0!==i.fieldFilter?ye.create(ql((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Se.create(e.compositeFilter.filters.map(t=>Hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return sn()}}(e.compositeFilter.op))}(i):sn();var e}function q_(i){return Eg[i]}function Ed(i){return G_[i]}function $f(i){return z_[i]}function zu(i){return{fieldPath:i.canonicalString()}}function ql(i){return sr.fromServerFormat(i.fieldPath)}function Hf(i){return i instanceof ye?function(e){if("=="===e.op){if(fu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NAN"}};if(hu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NAN"}};if(hu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(e.field),op:Ed(e.op),value:e.value}}}(i):i instanceof Se?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:$f(e.op),filters:t}}}(i):sn()}function Gy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Eu{constructor(e,t,s,a,c=wn.min(),f=wn.min(),D=bi.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=D,this.expectedCount=N}withSequenceNumber(e){return new Eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ch{constructor(e){this.fe=e}}function bg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yd(a=i.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:ml(a,c.version.toTimestamp()),createTime:ml(a,c.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:yl(e.version)};else{if(!e.isUnknownDocument())return sn();s.unknownDocument={path:t.path.toArray(),version:yl(e.version)}}var a,c;return s}function Nc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function yl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vl(i){const e=new Hr(i.seconds,i.nanoseconds);return wn.fromTimestamp(e)}function fa(i,e){const t=(e.baseMutations||[]).map(c=>Dh(i.fe,c));for(let c=0;c<e.mutations.length-1;++c){const f=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(f.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const s=e.mutations.map(c=>Dh(i.fe,c)),a=Hr.fromMillis(e.localWriteTimeMs);return new gh(e.batchId,a,t,s)}function wd(i){const e=vl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?vl(i.lastLimboFreeSnapshotVersion):wn.min();let s;var a;return void 0!==i.query.documents?(gn(1===(a=i.query).documents.length),s=I(Bu(vd(a.documents[0])))):s=I(Cg(i.query)),new Eu(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,bi.fromBase64String(i.resumeToken))}function bh(i,e){const t=yl(e.snapshotVersion),s=yl(e.lastLimboFreeSnapshotVersion);let a;a=Uu(e.target)?Dg(i.fe,e.target):jf(i.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oa(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function kc(i){const e=Cg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?J(e,e.limit,"L"):e}function zf(i,e){return new yh(e.largestBatchId,Dh(i.fe,e.overlayMutation))}function Th(i,e){const t=e.path.lastSegment();return[i,E(e.path.popLast()),t]}function Id(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:yl(s.readTime),documentKey:E(s.documentKey.path),largestBatchId:s.largestBatchId}}class Zl{getBundleMetadata(e,t){return Wf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:vl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(s=t).id,createTime:yl(Gi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ah(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:kc(a.bundledQuery),readTime:vl(a.readTime)};var a})}saveNamedQuery(e,t){return Ah(e).put({name:(s=t).name,readTime:yl(Gi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Wf(i){return Hi(i,"bundles")}function Ah(i){return Hi(i,"namedQueries")}class Sh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sh(e,t.uid||"")}getOverlay(e,t){return Dd(e).get(Th(this.userId,t)).next(s=>s?zf(this.serializer,s):null)}getOverlays(e,t){const s=Xo();return ze.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,f)=>{const D=new yh(t,f);a.push(this.we(e,D))}),ze.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(f=>a.add(E(f.getCollectionPath())));const c=[];return a.forEach(f=>{const D=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,s+1],!1,!0);c.push(Dd(e).J("collectionPathOverlayIndex",D))}),ze.waitFor(c)}getOverlaysForCollection(e,t,s){const a=Xo(),c=E(t),f=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Dd(e).j("collectionPathOverlayIndex",f).next(D=>{for(const N of D){const U=zf(this.serializer,N);a.set(U.getKey(),U)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=Xo();let f;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dd(e).X({index:"collectionGroupOverlayIndex",range:D},(N,U,Q)=>{const ve=zf(this.serializer,U);c.size()<a||ve.largestBatchId===f?(c.set(ve.getKey(),ve),f=ve.largestBatchId):Q.done()}).next(()=>c)}we(e,t){return Dd(e).put(function(s,a,c){const[f,D,N]=Th(a,c.mutation.key);return{userId:a,collectionPath:D,documentId:N,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kl(s.fe,c.mutation)}}(this.serializer,this.userId,t))}}function Dd(i){return Hi(i,"documentOverlays")}class _l{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ai(e.integerValue));else if("doubleValue"in e){const s=ai(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),aa(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ma(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):sn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Qt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Fc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tg(i){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=Fc(255&t[a]);if(s+=c,8!==c)break}return s}(i);return Math.ceil(e/8)}_l.Ve=new _l;class zy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Wy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ky{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yl{constructor(){this.je=new zy,this.ze=new Wy(this.je),this.We=new Ky(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ql{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ql(this.indexId,this.documentKey,this.arrayValue,s)}}function Wu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ag(i.arrayValue,e.arrayValue),0!==t?t:(t=Ag(i.directionalValue,e.directionalValue),0!==t?t:Qt.comparator(i.documentKey,e.documentKey)))}function Ag(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Sg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){gn(e.collectionGroup===this.collectionId);const t=qo(e);if(void 0!==t&&!this.en(t))return!1;const s=Ia(e);let a=new Set,c=0,f=0;for(;c<s.length&&this.en(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const D=s[c];if(!this.nn(this.Ze,D)||!this.sn(this.Ye[f++],D))return!1}++c}for(;c<s.length;++c){const D=s[c];if(f>=this.Ye.length||!this.sn(this.Ye[f++],D))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qy(i){var e,t;if(gn(i instanceof ye||i instanceof Se),i instanceof ye){if(i instanceof gu){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>ye.create(i.field,"==",c)))||[];return Se.create(a,"or")}return i}const s=i.filters.map(a=>qy(a));return Se.create(s,i.op)}function Zy(i){if(0===i.getFilters().length)return[];const e=ec(qy(i));return gn(Xl(e)),Jl(e)||Kf(e)?[e]:e.getFilters()}function Jl(i){return i instanceof ye}function Kf(i){return i instanceof Se&&Jt(i)}function Xl(i){return Jl(i)||Kf(i)||function(e){if(e instanceof Se&&nn(e)){for(const t of e.getFilters())if(!Jl(t)&&!Kf(t))return!1;return!0}return!1}(i)}function ec(i){if(gn(i instanceof ye||i instanceof Se),i instanceof ye)return i;if(1===i.filters.length)return ec(i.filters[0]);const e=i.filters.map(s=>ec(s));let t=Se.create(e,i.op);return t=Cd(t),Xl(t)?t:(gn(t instanceof Se),gn(ct(t)),gn(t.filters.length>1),t.filters.reduce((s,a)=>qf(s,a)))}function qf(i,e){let t;return gn(i instanceof ye||i instanceof Se),gn(e instanceof ye||e instanceof Se),t=i instanceof ye?e instanceof ye?Se.create([i,e],"and"):Yy(i,e):e instanceof ye?Yy(e,i):function(s,a){if(gn(s.filters.length>0&&a.filters.length>0),ct(s)&&ct(a))return gs(s,a.getFilters());const c=nn(s)?s:a,f=nn(s)?a:s,D=c.filters.map(N=>qf(N,f));return Se.create(D,"or")}(i,e),Cd(t)}function Yy(i,e){if(ct(e))return gs(e,i.getFilters());{const t=e.filters.map(s=>qf(i,s));return Se.create(t,"or")}}function Cd(i){if(gn(i instanceof ye||i instanceof Se),i instanceof ye)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(In(i))return i;const t=e.map(a=>Cd(a)),s=[];return t.forEach(a=>{a instanceof ye?s.push(a):a instanceof Se&&(a.op===i.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Se.create(s,i.op)}class Qy{constructor(){this.rn=new Zf}addToCollectionParentIndex(e,t){return this.rn.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ze.resolve()}deleteFieldIndex(e,t){return ze.resolve()}getDocumentsMatchingTarget(e,t){return ze.resolve(null)}getIndexType(e,t){return ze.resolve(0)}getFieldIndexes(e,t){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,t){return ze.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return ze.resolve(ps.min())}updateCollectionGroup(e,t,s){return ze.resolve()}updateIndexEntries(e,t){return ze.resolve()}}class Zf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new oi(Sn.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new oi(Sn.comparator)).toArray()}}const Mh=new Uint8Array(0);class Mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Zf,this.un=new Hs(s=>Oa(s),(s,a)=>dl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:s,parent:E(a)};return Yf(e).put(c)}return ze.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[ja(t),""],!1,!0);return Yf(e).j(a).next(c=>{for(const f of c){if(f.collectionId!==t)break;s.push(O(f.parent))}return s})}addFieldIndex(e,t){const s=Lc(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var f;delete a.indexId;const c=s.add(a);if(t.indexState){const f=bd(e);return c.next(D=>{f.put(Id(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Lc(e),a=bd(e),c=tc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=tc(e);let a=!0;const c=new Map;return ze.forEach(this.cn(t),f=>this.an(e,f).next(D=>{a&&(a=!!D),c.set(f,D)})).next(()=>{if(a){let f=lr();const D=[];return ze.forEach(c,(N,U)=>{var Q;Mt("IndexedDbIndexManager",`Using index ${Q=N,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(Cr=>`${Cr.fieldPath}:${Cr.kind}`).join(",")}`} to execute ${Oa(t)}`);const ve=function(Cr,Ws){const Os=qo(Ws);if(void 0===Os)return null;for(const Oi of hl(Cr,Os.fieldPath))switch(Oi.op){case"array-contains-any":return Oi.value.arrayValue.values||[];case"array-contains":return[Oi.value]}return null}(U,N),Ge=function(Cr,Ws){const Os=new Map;for(const Oi of Ia(Ws))for(const Fo of hl(Cr,Oi.fieldPath))switch(Fo.op){case"==":case"in":Os.set(Oi.fieldPath.canonicalString(),Fo.value);break;case"not-in":case"!=":return Os.set(Oi.fieldPath.canonicalString(),Fo.value),Array.from(Os.values())}return null}(U,N),ft=function(Cr,Ws){const Os=[];let Oi=!0;for(const Fo of Ia(Ws)){const Tu=0===Fo.kind?lh(Cr,Fo.fieldPath,Cr.startAt):sd(Cr,Fo.fieldPath,Cr.startAt);Os.push(Tu.value),Oi&&(Oi=Tu.inclusive)}return new ns(Os,Oi)}(U,N),Gt=function(Cr,Ws){const Os=[];let Oi=!0;for(const Fo of Ia(Ws)){const Tu=0===Fo.kind?sd(Cr,Fo.fieldPath,Cr.endAt):lh(Cr,Fo.fieldPath,Cr.endAt);Os.push(Tu.value),Oi&&(Oi=Tu.inclusive)}return new ns(Os,Oi)}(U,N),hn=this.hn(N,U,ft),mn=this.hn(N,U,Gt),fr=this.ln(N,U,Ge),Ur=this.fn(N.indexId,ve,hn,ft.inclusive,mn,Gt.inclusive,fr);return ze.forEach(Ur,Cr=>s.H(Cr,t.limit).next(Ws=>{Ws.forEach(Os=>{const Oi=Qt.fromSegments(Os.documentKey);f.has(Oi)||(f=f.add(Oi),D.push(Oi))})}))}).next(()=>D)}return ze.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Zy(Se.create(e.filters,"and")).map(s=>jl(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,c,f,D){const N=(null!=t?t.length:1)*Math.max(s.length,c.length),U=N/(null!=t?t.length:1),Q=[];for(let ve=0;ve<N;++ve){const Ge=t?this.dn(t[ve/U]):Mh,ft=this.wn(e,Ge,s[ve%U],a),Gt=this._n(e,Ge,c[ve%U],f),hn=D.map(mn=>this.wn(e,Ge,mn,!0));Q.push(...this.createRange(ft,Gt,hn))}return Q}wn(e,t,s,a){const c=new Ql(e,Qt.empty(),t,s);return a?c:c.Je()}_n(e,t,s,a){const c=new Ql(e,Qt.empty(),t,s);return a?c.Je():c}an(e,t){const s=new Sg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let f=null;for(const D of c)s.tn(D)&&(!f||D.fields.length>f.fields.length)&&(f=D);return f})}getIndexType(e,t){let s=2;const a=this.cn(t);return ze.forEach(a,c=>this.an(e,c).next(f=>{f?0!==s&&f.fields.length<function(D){let N=new oi(sr.comparator),U=!1;for(const Q of D.filters)for(const ve of Q.getFlattenedFilters())ve.field.isKeyField()||("array-contains"===ve.op||"array-contains-any"===ve.op?U=!0:N=N.add(ve.field));for(const Q of D.orderBy)Q.field.isKeyField()||(N=N.add(Q.field));return N.size+(U?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Yl;for(const a of Ia(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const f=s.He(a.kind);_l.Ve._e(c,f)}return s.Qe()}dn(e){const t=new Yl;return _l.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Yl;return _l.Ve._e(Ra(this.databaseId,t),s.He(function(a){const c=Ia(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Yl);let c=0;for(const f of Ia(e)){const D=s[c++];for(const N of a)if(this.yn(t,f.fieldPath)&&ul(D))a=this.pn(a,f,D);else{const U=N.He(f.kind);_l.Ve._e(D,U)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],c=[];for(const f of s.arrayValue.values||[])for(const D of a){const N=new Yl;N.seed(D.Qe()),_l.Ve._e(f,N.He(t.kind)),c.push(N)}return c}yn(e,t){return!!e.filters.find(s=>s instanceof ye&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Lc(e),a=bd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(c=>{const f=[];return ze.forEach(c,D=>a.get([D.indexId,this.uid]).next(N=>{f.push(function(U,Q){const ve=Q?new xu(Q.sequenceNumber,new ps(vl(Q.readTime),new Qt(O(Q.documentKey)),Q.largestBatchId)):xu.empty(),Ge=U.fields.map(([ft,Gt])=>new Ro(sr.fromServerFormat(ft),Gt));return new Ji(U.indexId,U.collectionGroup,Ge,ve)}(D,N))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:kn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Lc(e),c=bd(e);return this.Tn(e).next(f=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>ze.forEach(D,N=>c.put(Id(N.indexId,this.user,f,s)))))}updateIndexEntries(e,t){const s=new Map;return ze.forEach(t,(a,c)=>{const f=s.get(a.collectionGroup);return(f?ze.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),ze.forEach(D,N=>this.En(e,a,N).next(U=>{const Q=this.An(c,N);return U.isEqual(Q)?ze.resolve():this.vn(e,c,N,U,Q)}))))})}Rn(e,t,s,a){return tc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return tc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=tc(e);let c=new oi(Wu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(f,D)=>{c=c.add(new Ql(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>c)}An(e,t){let s=new oi(Wu);const a=this.mn(t,e);if(null==a)return s;const c=qo(t);if(null!=c){const f=e.data.field(c.fieldPath);if(ul(f))for(const D of f.arrayValue.values||[])s=s.add(new Ql(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Ql(t.indexId,e.key,Mh,a));return s}vn(e,t,s,a,c){Mt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(D,N,U,Q,ve){const Ge=D.getIterator(),ft=N.getIterator();let Gt=Po(Ge),hn=Po(ft);for(;Gt||hn;){let mn=!1,fr=!1;if(Gt&&hn){const Ur=U(Gt,hn);Ur<0?fr=!0:Ur>0&&(mn=!0)}else null!=Gt?fr=!0:mn=!0;mn?(Q(hn),hn=Po(ft)):fr?(ve(Gt),Gt=Po(Ge)):(Gt=Po(Ge),hn=Po(ft))}}(a,c,Wu,D=>{f.push(this.Rn(e,t,s,D))},D=>{f.push(this.Pn(e,t,s,D))}),ze.waitFor(f)}Tn(e){let t=1;return bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((f,D)=>Wu(f,D)).filter((f,D,N)=>!D||0!==Wu(f,N[D-1]));const a=[];a.push(e);for(const f of s){const D=Wu(f,e),N=Wu(f,t);if(0===D)a[0]=e.Je();else if(D>0&&N<0)a.push(f),a.push(f.Je());else if(N>0)break}a.push(t);const c=[];for(let f=0;f<a.length;f+=2){if(this.bn(a[f],a[f+1]))return[];c.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,Mh,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,Mh,[]]))}return c}bn(e,t){return Wu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return ze.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||sn())).next(xh)}}function Yf(i){return Hi(i,"collectionParents")}function tc(i){return Hi(i,"indexEntries")}function Lc(i){return Hi(i,"indexConfiguration")}function bd(i){return Hi(i,"indexState")}function xh(i){gn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const a=i[s].indexState.offset;nl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),a=i.store("documentMutations"),c=[],f=IDBKeyRange.only(t.batchId);let D=0;const N=s.X({range:f},(Q,ve,Ge)=>(D++,Ge.delete()));c.push(N.next(()=>{gn(1===D)}));const U=[];for(const Q of t.mutations){const ve=me(e,Q.key.path,t.batchId);c.push(a.delete(ve)),U.push(Q.key)}return ze.waitFor(c).next(()=>U)}function Rh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw sn();e=i.noDocument}return JSON.stringify(e).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class Ph{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){gn(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Ph(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return El(e).X({index:"userMutationsIndex",range:s},(a,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Uc(e),f=El(e);return f.add({}).next(D=>{gn("number"==typeof D);const N=new gh(D,t,s,a),U=function(Ge,ft,Gt){const hn=Gt.baseMutations.map(fr=>Kl(Ge.fe,fr)),mn=Gt.mutations.map(fr=>Kl(Ge.fe,fr));return{userId:ft,batchId:Gt.batchId,localWriteTimeMs:Gt.localWriteTime.toMillis(),baseMutations:hn,mutations:mn}}(this.serializer,this.userId,N),Q=[];let ve=new oi((Ge,ft)=>kn(Ge.canonicalString(),ft.canonicalString()));for(const Ge of a){const ft=me(this.userId,Ge.key.path,D);ve=ve.add(Ge.key.path.popLast()),Q.push(f.put(U)),Q.push(c.put(ft,ut))}return ve.forEach(Ge=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Ge))}),e.addOnCommittedListener(()=>{this.Vn[D]=N.keys()}),ze.waitFor(Q).next(()=>N)})}lookupMutationBatch(e,t){return El(e).get(t).next(s=>s?(gn(s.userId===this.userId),fa(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?ze.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return El(e).X({index:"userMutationsIndex",range:a},(f,D,N)=>{D.userId===this.userId&&(gn(D.batchId>=s),c=fa(this.serializer,D)),N.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return El(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,f)=>{s=c.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return El(e).j("userMutationsIndex",t).next(s=>s.map(a=>fa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ue(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Uc(e).X({range:a},(f,D,N)=>{const[U,Q,ve]=f,Ge=O(Q);if(U===this.userId&&t.path.isEqual(Ge))return El(e).get(ve).next(ft=>{if(!ft)throw sn();gn(ft.userId===this.userId),c.push(fa(this.serializer,ft))});N.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new oi(kn);const a=[];return t.forEach(c=>{const f=ue(this.userId,c.path),D=IDBKeyRange.lowerBound(f),N=Uc(e).X({range:D},(U,Q,ve)=>{const[Ge,ft,Gt]=U,hn=O(ft);Ge===this.userId&&c.path.isEqual(hn)?s=s.add(Gt):ve.done()});a.push(N)}),ze.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=ue(this.userId,s),f=IDBKeyRange.lowerBound(c);let D=new oi(kn);return Uc(e).X({range:f},(N,U,Q)=>{const[ve,Ge,ft]=N,Gt=O(Ge);ve===this.userId&&s.isPrefixOf(Gt)?Gt.length===a&&(D=D.add(ft)):Q.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(El(e).get(c).next(f=>{if(null===f)throw sn();gn(f.userId===this.userId),s.push(fa(this.serializer,f))}))}),ze.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return xg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ze.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Uc(e).X({range:s},(c,f,D)=>{if(c[0]===this.userId){const N=O(c[1]);a.push(N)}else D.done()}).next(()=>{gn(0===a.length)})})}containsKey(e,t){return Rg(e,this.userId,t)}xn(e){return nc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rg(i,e,t){const s=ue(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let f=!1;return Uc(i).X({range:c,Y:!0},(D,N,U)=>{const[Q,ve,Ge]=D;Q===e&&ve===a&&(f=!0),U.done()}).next(()=>f)}function El(i){return Hi(i,"mutations")}function Uc(i){return Hi(i,"documentMutations")}function nc(i){return Hi(i,"mutationQueues")}class Oo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Oo(0)}static Mn(){return new Oo(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Oo(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>wn.fromTimestamp(new Hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(gn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Bc(e).X((f,D)=>{const N=wd(D);N.sequenceNumber<=t&&null===s.get(N.targetId)&&(a++,c.push(this.removeTargetData(e,N)))}).next(()=>ze.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Bc(e).X((s,a)=>{const c=wd(a);t(c)})}$n(e){return Xy(e).get("targetGlobalKey").next(t=>(gn(null!==t),t))}On(e,t){return Xy(e).put("targetGlobalKey",t)}Fn(e,t){return Bc(e).put(bh(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Oa(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Bc(e).X({range:a,index:"queryTargetsIndex"},(f,D,N)=>{const U=wd(D);dl(t,U.target)&&(c=U,N.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=rc(e);return t.forEach(f=>{const D=E(f.path);a.push(c.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,f))}),ze.waitFor(a)}removeMatchingKeys(e,t,s){const a=rc(e);return ze.forEach(t,c=>{const f=E(c.path);return ze.waitFor([a.delete([s,f]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=rc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=rc(e);let c=lr();return a.X({range:s,Y:!0},(f,D,N)=>{const U=O(f[1]),Q=new Qt(U);c=c.add(Q)}).next(()=>c)}containsKey(e,t){const s=E(t.path),a=IDBKeyRange.bound([s],[ja(s)],!1,!0);let c=0;return rc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([f,D],N,U)=>{0!==f&&(c++,U.done())}).next(()=>c>0)}le(e,t){return Bc(e).get(t).next(s=>s?wd(s):null)}}function Bc(i){return Hi(i,"targets")}function Xy(i){return Hi(i,"targetGlobal")}function rc(i){return Hi(i,"targetDocuments")}function Qf([i,e],[t,s]){const a=kn(i,t);return 0===a?kn(e,s):a}class Y_{constructor(e){this.Ln=e,this.buffer=new oi(Qf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jf{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Mt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,p.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Li(s)?Mt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Zo(s)}yield t.Qn(3e5)}))}}class Q_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(Xi.ct);const s=new Y_(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(Vc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vc):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,c,f,D,N,U;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ve=>(ve>this.params.maximumSequenceNumbersToCollect?(Mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ve}`),a=this.params.maximumSequenceNumbersToCollect):a=ve,f=Date.now(),this.nthSequenceNumber(e,a))).next(ve=>(s=ve,D=Date.now(),this.removeTargets(e,s,t))).next(ve=>(c=ve,N=Date.now(),this.removeOrphanedDocuments(e,s))).next(ve=>(U=Date.now(),Yr()<=ce.in.DEBUG&&Mt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-Q}ms\n\tDetermined least recently used ${a} in `+(D-f)+`ms\n\tRemoved ${c} targets in `+(N-D)+`ms\n\tRemoved ${ve} documents in `+(U-N)+`ms\nTotal Duration: ${U-Q}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:ve})))}}class ev{constructor(e,t){this.db=e,this.garbageCollector=function Xf(i,e){return new Q_(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Td(e,s)}removeReference(e,t,s){return Td(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Td(e,t)}Xn(e,t){return function(s,a){let c=!1;return nc(s).Z(f=>Rg(s,f,a).next(D=>(D&&(c=!0),ze.resolve(!D)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(f,D)=>{if(D<=t){const N=this.Xn(e,f).next(U=>{if(!U)return c++,s.getEntry(e,f).next(()=>(s.removeEntry(f,wn.min()),rc(e).delete([0,E(f.path)])))});a.push(N)}}).next(()=>ze.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Td(e,t)}Yn(e,t){const s=rc(e);let a,c=Xi.ct;return s.X({index:"documentTargetsIndex"},([f,D],{path:N,sequenceNumber:U})=>{0===f?(c!==Xi.ct&&t(new Qt(O(a)),c),c=U,a=N):c=Xi.ct}).next(()=>{c!==Xi.ct&&t(new Qt(O(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return rc(i).put((s=i.currentSequenceNumber,{targetId:0,path:E(e.path),sequenceNumber:s}));var s}class Pg{constructor(){this.changes=new Hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?ze.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ic(e).put(s)}removeEntry(e,t,s){return ic(e).delete(function(a,c){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Nc(c),f[f.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Zr.newInvalidDocument(t);return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s=this.ts(t,c)}).next(()=>s)}es(e,t){let s={size:0,document:Zr.newInvalidDocument(t)};return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s={document:this.ts(t,c),size:Rh(c)}}).next(()=>s)}getEntries(e,t){let s=Ms();return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);s=s.insert(a,f)}).next(()=>s)}ss(e,t){let s=Ms(),a=new Dr(Qt.comparator);return this.ns(e,t,(c,f)=>{const D=this.ts(c,f);s=s.insert(c,D),a=a.insert(c,Rh(f))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return ze.resolve();let a=new oi(Ng);t.forEach(N=>a=a.add(N));const c=IDBKeyRange.bound(Ad(a.first()),Ad(a.last())),f=a.getIterator();let D=f.getNext();return ic(e).X({index:"documentKeyIndex",range:c},(N,U,Q)=>{const ve=Qt.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;D&&Ng(D,ve)<0;)s(D,null),D=f.getNext();D&&D.isEqual(ve)&&(s(D,U),D=f.hasNext()?f.getNext():null),D?Q.G(Ad(D)):Q.done()}).next(()=>{for(;D;)s(D,null),D=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Nc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ic(e).j(IDBKeyRange.bound(f,D,!0)).next(N=>{let U=Ms();for(const Q of N){const ve=this.ts(Qt.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);ve.isFoundDocument()&&(on(t,ve)||a.has(ve.key))&&(U=U.insert(ve.key,ve))}return U})}getAllFromCollectionGroup(e,t,s,a){let c=Ms();const f=Og(t,s),D=Og(t,ps.max());return ic(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,D,!0)},(N,U,Q)=>{const ve=this.ts(Qt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);c=c.insert(ve.key,ve),c.size===a&&Q.done()}).next(()=>c)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(gn(!!t),t))}Zn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function Z_(i,e){let t;if(e.document)t=rs(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Qt.fromSegments(e.noDocument.path),a=vl(e.noDocument.readTime);t=Zr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return sn();{const s=Qt.fromSegments(e.unknownDocument.path),a=vl(e.unknownDocument.version);t=Zr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Hr(s[0],s[1]);return wn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(wn.min()))return s}return Zr.newInvalidDocument(e)}}function Na(i){return new tv(i)}class nv extends Pg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Hs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new oi((c,f)=>kn(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const D=this.us.get(c);if(t.push(this.os.removeEntry(e,c,D.readTime)),f.isValidDocument()){const N=bg(this.os.serializer,f);a=a.add(c.path.popLast()),s+=Rh(N)-D.size,t.push(this.os.addEntry(e,c,N))}else if(s-=D.size,this.trackRemovals){const N=bg(this.os.serializer,f.convertToNoDocument(wn.min()));t.push(this.os.addEntry(e,c,N))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,s)),ze.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((c,f)=>{this.us.set(c,{size:f,readTime:s.get(c).readTime})}),s))}}function ep(i){return Hi(i,"remoteDocumentGlobal")}function ic(i){return Hi(i,"remoteDocumentsV14")}function Ad(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Og(i,e){const t=e.documentKey.path.toArray();return[i,Nc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ng(i,e){const t=i.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=kn(t[c],s[c]),a)return a;return a=kn(t.length,s.length),a||(a=kn(t[t.length-2],s[s.length-2]),a||kn(t[t.length-1],s[s.length-1]))}class kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&dd(s.mutation,a,es.empty(),Hr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,lr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=lr()){const a=Xo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let f=mu();return c.forEach((D,N)=>{f=f.insert(D,N.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=Xo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,lr()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,D)=>{t.set(f,D)})})}computeViews(e,t,s,a){let c=Ms();const f=ju(),D=ju();return t.forEach((N,U)=>{const Q=s.get(U.key);a.has(U.key)&&(void 0===Q||Q.mutation instanceof Ya)?c=c.insert(U.key,U):void 0!==Q?(f.set(U.key,Q.mutation.getFieldMask()),dd(Q.mutation,U,Q.mutation.getFieldMask(),Hr.now())):f.set(U.key,es.empty())}),this.recalculateAndSaveOverlays(e,c).next(N=>(N.forEach((U,Q)=>f.set(U,Q)),t.forEach((U,Q)=>{var ve;return D.set(U,new kg(Q,null!==(ve=f.get(U))&&void 0!==ve?ve:null))}),D))}recalculateAndSaveOverlays(e,t){const s=ju();let a=new Dr((f,D)=>f-D),c=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const D of f)D.keys().forEach(N=>{const U=t.get(N);if(null===U)return;let Q=s.get(N)||es.empty();Q=D.applyToLocalView(U,Q),s.set(N,Q);const ve=(a.get(D.batchId)||lr()).add(N);a=a.insert(D.batchId,ve)})}).next(()=>{const f=[],D=a.getReverseIterator();for(;D.hasNext();){const N=D.getNext(),U=N.key,Q=N.value,ve=Sc();Q.forEach(Ge=>{if(!c.has(Ge)){const ft=fh(t.get(Ge),s.get(Ge));null!==ft&&ve.set(Ge,ft),c=c.add(Ge)}}),f.push(this.documentOverlayCache.saveOverlays(e,U,ve))}return ze.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Qt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):ze.resolve(Xo());let D=-1,N=c;return f.next(U=>ze.forEach(U,(Q,ve)=>(D<ve.largestBatchId&&(D=ve.largestBatchId),c.get(Q)?ze.resolve():this.remoteDocumentCache.getEntry(e,Q).next(Ge=>{N=N.insert(Q,Ge)}))).next(()=>this.populateOverlays(e,U,c)).next(()=>this.computeViews(e,N,U,lr())).next(Q=>({batchId:D,changes:od(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qt(t)).next(s=>{let a=mu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let c=mu();return this.indexManager.getCollectionParents(e,a).next(f=>ze.forEach(f,D=>{const N=(U=t,Q=D.child(a),new qa(Q,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,Q;return this.getDocumentsMatchingCollectionQuery(e,N,s).next(U=>{U.forEach((Q,ve)=>{c=c.insert(Q,ve)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(c=>{a.forEach((D,N)=>{const U=N.getKey();null===c.get(U)&&(c=c.insert(U,Zr.newInvalidDocument(U)))});let f=mu();return c.forEach((D,N)=>{const U=a.get(D);void 0!==U&&dd(U.mutation,N,es.empty(),Hr.now()),on(t,N)&&(f=f.insert(D,N))}),f})}}class rv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ze.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Gi(s.createTime)}),ze.resolve()}getNamedQuery(e,t){return ze.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:kc(s.bundledQuery),readTime:Gi(s.readTime)}),ze.resolve();var s}}class iv{constructor(){this.overlays=new Dr(Qt.comparator),this.ls=new Map}getOverlay(e,t){return ze.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xo();return ze.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.we(e,t,c)}),ze.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(s)),ze.resolve()}getOverlaysForCollection(e,t,s){const a=Xo(),c=t.length+1,f=new Qt(t.child("")),D=this.overlays.getIteratorFrom(f);for(;D.hasNext();){const N=D.getNext().value,U=N.getKey();if(!t.isPrefixOf(U.path))break;U.path.length===c&&N.largestBatchId>s&&a.set(N.getKey(),N)}return ze.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Dr((U,Q)=>U-Q);const f=this.overlays.getIterator();for(;f.hasNext();){const U=f.getNext().value;if(U.getKey().getCollectionGroup()===t&&U.largestBatchId>s){let Q=c.get(U.largestBatchId);null===Q&&(Q=Xo(),c=c.insert(U.largestBatchId,Q)),Q.set(U.getKey(),U)}}const D=Xo(),N=c.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((U,Q)=>D.set(U,Q)),!(D.size()>=a)););return ze.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const f=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let c=this.ls.get(t);void 0===c&&(c=lr(),this.ls.set(t,c)),this.ls.set(t,c.add(s.key))}}class or{constructor(){this.fs=new oi(xs.ds),this.ws=new oi(xs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new xs(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new xs(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Qt(new Sn([])),s=new xs(t,e),a=new xs(t,e+1),c=[];return this.ws.forEachInRange([s,a],f=>{this.ys(f),c.push(f.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qt(new Sn([])),s=new xs(t,e),a=new xs(t,e+1);let c=lr();return this.ws.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new xs(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class xs{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qt.comparator(e.key,t.key)||kn(e.As,t.As)}static _s(e,t){return kn(e.As,t.As)||Qt.comparator(e.key,t.key)}}class Lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new oi(xs.ds)}checkEmpty(e){return ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.vs;this.vs++;const f=new gh(c,t,s,a);this.mutationQueue.push(f);for(const D of a)this.Rs=this.Rs.add(new xs(D.key,c)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return ze.resolve(f)}lookupMutationBatch(e,t){return ze.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return ze.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xs(t,0),a=new xs(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([s,a],f=>{const D=this.Ps(f.As);c.push(D)}),ze.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new oi(kn);return t.forEach(a=>{const c=new xs(a,0),f=new xs(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,f],D=>{s=s.add(D.As)})}),ze.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Qt.isDocumentKey(c)||(c=c.child(""));const f=new xs(new Qt(c),0);let D=new oi(kn);return this.Rs.forEachWhile(N=>{const U=N.key.path;return!!s.isPrefixOf(U)&&(U.length===a&&(D=D.add(N.As)),!0)},f),ze.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){gn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return ze.forEach(t.mutations,a=>{const c=new xs(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new xs(t,0),a=this.Rs.firstAfterOrEqual(s);return ze.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ze.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vg{constructor(e){this.Ds=e,this.docs=new Dr(Qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,f=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ze.resolve(s?s.document.mutableCopy():Zr.newInvalidDocument(t))}getEntries(e,t){let s=Ms();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Zr.newInvalidDocument(a))}),ze.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Ms();const f=t.path,D=new Qt(f.child("")),N=this.docs.getIteratorFrom(D);for(;N.hasNext();){const{key:U,value:{document:Q}}=N.getNext();if(!f.isPrefixOf(U.path))break;U.path.length>f.length+1||nl(Ru(Q),s)<=0||(a.has(Q.key)||on(t,Q))&&(c=c.insert(Q.key,Q.mutableCopy()))}return ze.resolve(c)}getAllFromCollectionGroup(e,t,s,a){sn()}Cs(e,t){return ze.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new sv(this)}getSize(e){return ze.resolve(this.size)}}class sv extends Pg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),ze.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ov{constructor(e){this.persistence=e,this.xs=new Hs(t=>Oa(t),dl),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new or,this.targetCount=0,this.Ms=Oo.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),ze.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.Fn(t),ze.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.xs.forEach((f,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(f),c.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),ze.waitFor(c).next(()=>a)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return ze.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),ze.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),ze.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return ze.resolve(s)}containsKey(e,t){return ze.resolve(this.ks.containsKey(t))}}class Oh{constructor(e,t){this.$s={},this.overlays={},this.Os=new Xi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ov(this),this.indexManager=new Qy,this.remoteDocumentCache=new Vg(s=>this.referenceDelegate.Ls(s)),this.serializer=new Ch(t),this.qs=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Lg(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){Mt("MemoryPersistence","Starting transaction:",e);const a=new av(this.Os.next());return this.referenceDelegate.Us(),s(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return ze.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class av extends rl{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Qs=new or,this.js=null}static zs(e){return new Sd(e)}get Ws(){if(this.js)return this.js;throw sn()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),ze.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ze.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Ws,s=>{const a=Qt.fromPath(s);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,wn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ze.or([()=>ze.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uv{constructor(e){this.serializer=e}O(e,t,s,a){const c=new io("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",z,{unique:!0}),D.createObjectStore("documentMutations"),lv(e),function(D){D.createObjectStore("remoteDocuments")}(e));let f=ze.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),lv(e)),f=f.next(()=>function(D){const N=D.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wn.min().toTimestamp(),targetCount:0};return N.put("targetGlobalKey",U)}(c))),s<4&&a>=4&&(0!==s&&(f=f.next(()=>function(D,N){return N.store("mutations").j().next(U=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",z,{unique:!0});const Q=N.store("mutations"),ve=U.map(Ge=>Q.put(Ge));return ze.waitFor(ve)})}(e,c))),f=f.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(f=f.next(()=>this.Ys(c))),s<6&&a>=6&&(f=f.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),s<7&&a>=7&&(f=f.next(()=>this.Zs(c))),s<8&&a>=8&&(f=f.next(()=>this.ti(e,c))),s<9&&a>=9&&(f=f.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(f=f.next(()=>this.ei(c))),s<11&&a>=11&&(f=f.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(f=f.next(()=>{!function(D){const N=D.createObjectStore("documentOverlays",{keyPath:il});N.createIndex("collectionPathOverlayIndex",ou,{unique:!1}),N.createIndex("collectionGroupOverlayIndex",Ss,{unique:!1})}(e)})),s<13&&a>=13&&(f=f.next(()=>function(D){const N=D.createObjectStore("remoteDocumentsV14",{keyPath:Kt});N.createIndex("documentKeyIndex",Gn),N.createIndex("collectionGroupIndex",dn)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(f=f.next(()=>this.si(e,c))),s<15&&a>=15&&(f=f.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Qr}).createIndex("sequenceNumberIndex",Ou,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Ta}).createIndex("documentKeyIndex",Aa,{unique:!1})}(e))),f}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Rh(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>ze.forEach(a,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",f).next(D=>ze.forEach(D,N=>{gn(N.userId===c.userId);const U=fa(this.serializer,N);return xg(e,c.userId,U).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.X((f,D)=>{const N=new Sn(f),U=[0,E(N)];c.push(t.get(U).next(Q=>Q?ze.resolve():t.put({targetId:0,path:E(N),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ze.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:oo});const s=t.store("collectionParents"),a=new Zf,c=f=>{if(a.add(f)){const D=f.lastSegment(),N=f.popLast();return s.put({collectionId:D,parent:E(N)})}};return t.store("remoteDocuments").X({Y:!0},(f,D)=>{const N=new Sn(f);return c(N.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([f,D,N],U)=>{const Q=O(D);return c(Q.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const c=wd(a),f=bh(this.serializer,c);return t.put(f)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((c,f)=>{const D=t.store("remoteDocumentsV14"),N=(U=f,U.document?new Qt(Sn.fromString(U.document.name).popFirst(5)):U.noDocument?Qt.fromSegments(U.noDocument.path):U.unknownDocument?Qt.fromSegments(U.unknownDocument.path):sn()).path.toArray();var U;const Q={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(D.put(Q))}).next(()=>ze.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Na(this.serializer),c=new Oh(Sd.zs,this.serializer.fe);return s.j().next(f=>{const D=new Map;return f.forEach(N=>{var U;let Q=null!==(U=D.get(N.userId))&&void 0!==U?U:lr();fa(this.serializer,N).keys().forEach(ve=>Q=Q.add(ve)),D.set(N.userId,Q)}),ze.forEach(D,(N,U)=>{const Q=new Cn(U),ve=Sh.de(this.serializer,Q),Ge=c.getIndexManager(Q),ft=Ph.de(Q,this.serializer,Ge,c.referenceDelegate);return new Fg(a,ft,ve,Ge).recalculateAndSaveOverlaysForDocumentKeys(new ua(t,Xi.ct),N).next()})})}}function lv(i){i.createObjectStore("targetDocuments",{keyPath:As}).createIndex("documentTargetsIndex",fi,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hr,{unique:!0}),i.createObjectStore("targetGlobal")}const kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,t,s,a,c,f,D,N,U,Q,ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=c,this.window=f,this.document=D,this.ri=U,this.oi=Q,this.ui=ve,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Ge=>Promise.resolve(),!Fh.D())throw new Ot(Qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,a),this.di=t+"main",this.serializer=new Ch(N),this.wi=new so(this.di,this.ui,new uv(this.serializer)),this.Bs=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Na(this.serializer),this.qs=new Zl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Q&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ot(Qe.FAILED_PRECONDITION,kh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Xi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,p.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,p.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,p.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Li(e))return Mt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Mt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Qa(e).get("owner").next(t=>ze.resolve(this.Ri(t)))}Pi(e){return Lh(e).delete(this.clientId)}bi(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Hi(s,"clientMetadata");return a.j().next(c=>{const f=e.Si(c,18e5),D=c.filter(N=>-1===f.indexOf(N));return ze.forEach(D,N=>a.delete(N.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ze.resolve(!0):Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ot(Qe.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Mt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,p.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new ua(t,Xi.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Ph.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){Mt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(f=this.ui)?sl:14===f?Fl:13===f?Nu:12===f?Vi:11===f?au:void sn();var f;let D;return this.wi.runTransaction(e,a,c,N=>(D=new ua(N,this.Os?this.Os.next():Xi.ct),"readwrite-primary"===t?this.Ti(D).next(U=>!!U||this.Ei(D)).next(U=>{if(!U)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ot(Qe.FAILED_PRECONDITION,Ha);return s(D)}).next(U=>this.vi(D).next(()=>U)):this.Oi(D).next(()=>s(D)))).then(N=>(D.raiseOnCommittedEvent(),N))}Oi(e){return Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ot(Qe.FAILED_PRECONDITION,kh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static D(){return so.D()}Ai(e){const t=Qa(e);return t.get("owner").next(s=>this.Ri(s)?(Mt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ze.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ir(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,he.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Mt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ir("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ir("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qa(i){return Hi(i,"owner")}function Lh(i){return Hi(i,"clientMetadata")}function Md(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class xd{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=lr(),a=lr();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xd(e,t.fromCache,s,a)}}class Ug{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,s)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(ch(t))return ze.resolve(null);let s=I(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=J(t,null,"F"),s=I(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=lr(...c);return this.Ui.getDocuments(e,f).next(D=>this.indexManager.getMinOffset(e,s).next(N=>{const U=this.ji(t,D);return this.zi(t,U,f,N.readTime)?this.Ki(e,J(t,null,"F")):this.Wi(e,U,t,N)}))})))}Gi(e,t,s,a){return ch(t)||a.isEqual(wn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(c=>{const f=this.ji(t,c);return this.zi(t,f,s,a)?this.Qi(e,t):(Yr()<=ce.in.DEBUG&&Mt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zt(t)),this.Wi(e,f,t,Ca(a,-1)))})}ji(e,t){let s=new oi(mr(e));return t.forEach((a,c)=>{on(e,c)&&(s=s.add(c))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return Yr()<=ce.in.DEBUG&&Mt("QueryEngine","Using full collection scan to execute query:",zt(t)),this.Ui.getDocumentsMatchingQuery(e,t,ps.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(f=>{c=c.insert(f.key,f)}),c))}}class J_{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Dr(kn),this.Yi=new Hs(c=>Oa(c),dl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function cv(i,e,t,s){return new J_(i,e,t,s)}function dv(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,p.Z)(function*(i,e){const t=Yt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],D=[];let N=lr();for(const U of a){f.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}for(const U of c){D.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}return t.localDocuments.getDocuments(s,N).next(U=>({er:U,removedBatchIds:f,addedBatchIds:D}))})})}),tp.apply(this,arguments)}function Bg(i,e){const t=Yt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(f,D,N,U){const Q=N.batch,ve=Q.keys();let Ge=ze.resolve();return ve.forEach(ft=>{Ge=Ge.next(()=>U.getEntry(D,ft)).next(Gt=>{const hn=N.docVersions.get(ft);gn(null!==hn),Gt.version.compareTo(hn)<0&&(Q.applyToRemoteDocument(Gt,N),Gt.isValidDocument()&&(Gt.setReadTime(N.commitVersion),U.addEntry(Gt)))})}),Ge.next(()=>f.mutationQueue.removeMutationBatch(D,Q))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let D=lr();for(let N=0;N<f.mutationResults.length;++N)f.mutationResults[N].transformResults.length>0&&(D=D.add(f.batch.mutations[N].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hv(i){const e=Yt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fv(i,e){const t=Yt(i),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((Q,ve)=>{const Ge=a.get(ve);if(!Ge)return;D.push(t.Bs.removeMatchingKeys(c,Q.removedDocuments,ve).next(()=>t.Bs.addMatchingKeys(c,Q.addedDocuments,ve)));let ft=Ge.withSequenceNumber(c.currentSequenceNumber);var Gt,hn,mn;null!==e.targetMismatches.get(ve)?ft=ft.withResumeToken(bi.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):Q.resumeToken.approximateByteSize()>0&&(ft=ft.withResumeToken(Q.resumeToken,s)),a=a.insert(ve,ft),hn=ft,mn=Q,(0===(Gt=Ge).resumeToken.approximateByteSize()||hn.snapshotVersion.toMicroseconds()-Gt.snapshotVersion.toMicroseconds()>=3e8||mn.addedDocuments.size+mn.modifiedDocuments.size+mn.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(c,ft))});let N=Ms(),U=lr();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(c,Q))}),D.push(sc(c,f,e.documentUpdates).next(Q=>{N=Q.nr,U=Q.sr})),!s.isEqual(wn.min())){const Q=t.Bs.getLastRemoteSnapshotVersion(c).next(ve=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,s));D.push(Q)}return ze.waitFor(D).next(()=>f.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,N,U)).next(()=>N)}).then(c=>(t.Ji=a,c))}function sc(i,e,t){let s=lr(),a=lr();return t.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Ms();return t.forEach((D,N)=>{const U=c.get(D);N.isFoundDocument()!==U.isFoundDocument()&&(a=a.add(D)),N.isNoDocument()&&N.version.isEqual(wn.min())?(e.removeEntry(D,N.readTime),f=f.insert(D,N)):!U.isValidDocument()||N.version.compareTo(U.version)>0||0===N.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(N),f=f.insert(D,N)):Mt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",U.version," Watch version:",N.version)}),{nr:f,sr:a}})}function pv(i,e){const t=Yt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oc(i,e){const t=Yt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(c=>c?(a=c,ze.resolve(a)):t.Bs.allocateTargetId(s).next(f=>(a=new Eu(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Ku(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,p.Z)(function*(i,e,t){const s=Yt(i),a=s.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Li(f))throw f;Mt("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),np.apply(this,arguments)}function Rd(i,e,t){const s=Yt(i);let a=wn.min(),c=lr();return s.persistence.runTransaction("Execute query","readonly",f=>function(D,N,U){const Q=Yt(D),ve=Q.Yi.get(U);return void 0!==ve?ze.resolve(Q.Ji.get(ve)):Q.Bs.getTargetData(N,U)}(s,f,I(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(f,D.targetId).next(N=>{c=N})}).next(()=>s.Hi.getDocumentsMatchingQuery(f,e,t?a:wn.min(),t?c:lr())).next(D=>(Hg(s,Mn(e),D),{documents:D,ir:c})))}function jg(i,e){const t=Yt(i),s=Yt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.le(c,e).next(f=>f?f.target:null))}function $g(i,e){const t=Yt(i),s=t.Xi.get(e)||wn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Ca(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hg(t,e,a),a))}function Hg(i,e,t){let s=i.Xi.get(e)||wn.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Xi.set(e,s)}function rp(){return rp=(0,p.Z)(function*(i,e,t,s){const a=Yt(i);let c=lr(),f=Ms();for(const U of t){const Q=e.rr(U.metadata.name);U.document&&(c=c.add(Q));const ve=e.ur(U);ve.setReadTime(e.cr(U.metadata.readTime)),f=f.insert(Q,ve)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),N=yield oc(a,(U=s,I(Bu(Sn.fromString(`__bundle__/docs/${U}`)))));var U;return a.persistence.runTransaction("Apply bundle documents","readwrite",U=>sc(U,D,f).next(Q=>(D.apply(U),Q)).next(Q=>a.Bs.removeMatchingKeysForTargetId(U,N.targetId).next(()=>a.Bs.addMatchingKeys(U,c,N.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(U,Q.nr,Q.sr)).next(()=>Q.nr)))}),rp.apply(this,arguments)}function Gg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,p.Z)(function*(i,e,t=lr()){const s=yield oc(i,I(kc(e.bundledQuery))),a=Yt(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const f=Gi(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return a.qs.saveNamedQuery(c,e);const D=s.withResumeToken(bi.EMPTY_BYTE_STRING,f);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(c,D).next(()=>a.Bs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,s.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),ip.apply(this,arguments)}function sp(i,e){return`firestore_clients_${i}_${e}`}function op(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pd(i,e){return`firestore_targets_${i}_${e}`}class ap{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let c,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(c=new Ot(a.error.code,a.error.message))),f?new ap(e,t,a.state,c):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new Ot(s.error.code,s.error.message))),c?new ac(e,s.state,a):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=dh();for(let f=0;a&&f<s.activeTargetIds.length;++f)a=_(s.activeTargetIds[f]),c=c.add(s.activeTargetIds[f]);return a?new Vh(e,c):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zg(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wl{constructor(){this.activeTargetIds=dh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,s,a,c){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Dr(kn),this.started=!1,this.yr=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=sp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wl),this.Tr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(sp(e.persistenceKey,a));if(c){const f=Vh.ar(a,c);f&&(e.gr=e.gr.insert(f.clientId,f))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pd(this.persistenceKey,e));if(s){const a=ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Mt("SharedClientState","READ",e,t),t}setItem(e,t){Mt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Mt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Mt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,p.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(c){let f=Xi.ct;if(null!=c)try{const D=JSON.parse(c);gn("number"==typeof D),f=D}catch(D){Ir("SharedClientState","Failed to read sequence number from WebStorage",D)}return f}(s.newValue);a!==Xi.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ap(this.currentUser,e,t,s),c=op(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Pd(this.persistenceKey,e),c=new ac(e,t,s);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Vh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ap.ar(new Cn(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return ac.ar(a,t)}br(e){return zg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,p.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Mt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(s),f=[],D=[];return c.forEach(N=>{a.has(N)||f.push(N)}),a.forEach(N=>{c.has(N)||D.push(N)}),this.syncEngine.Wr(f,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class up{constructor(){this.Hr=new wl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wl,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bh{Yr(e){}shutdown(){}}class ka{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Od=null;function lp(){return null===Od?Od=268435456+Math.round(2147483648*Math.random()):Od++,"0x"+Od.toString(16)}const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gs="WebChannelConnection";class Wg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,c){const f=lp(),D=this.To(e,t);Mt("RestConnection",`Sending RPC '${e}' ${f}:`,D,s);const N={};return this.Eo(N,a,c),this.Ao(e,D,N,s).then(U=>(Mt("RestConnection",`Received RPC '${e}' ${f}: `,U),U),U=>{throw Lr("RestConnection",`RPC '${e}' ${f} failed with error: `,U,"url: ",D,"request:",s),U})}vo(e,t,s,a,c,f){return this.Io(e,t,s,a,c)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${cp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const c=lp();return new Promise((f,D)=>{const N=new En;N.setWithCredentials(!0),N.listenOnce(x.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case V.NO_ERROR:const Q=N.getResponseJson();Mt(Gs,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(Q)),f(Q);break;case V.TIMEOUT:Mt(Gs,`RPC '${e}' ${c} timed out`),D(new Ot(Qe.DEADLINE_EXCEEDED,"Request time out"));break;case V.HTTP_ERROR:const ve=N.getStatus();if(Mt(Gs,`RPC '${e}' ${c} failed with status:`,ve,"response text:",N.getResponseText()),ve>0){let Ge=N.getResponseJson();Array.isArray(Ge)&&(Ge=Ge[0]);const ft=Ge?.error;if(ft&&ft.status&&ft.message){const Gt=function(hn){const mn=hn.toLowerCase().replace(/_/g,"-");return Object.values(Qe).indexOf(mn)>=0?mn:Qe.UNKNOWN}(ft.status);D(new Ot(Gt,ft.message))}else D(new Ot(Qe.UNKNOWN,"Server responded with status "+N.getStatus()))}else D(new Ot(Qe.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{Mt(Gs,`RPC '${e}' ${c} completed.`)}});const U=JSON.stringify(a);Mt(Gs,`RPC '${e}' ${c} sending request:`,a),N.send(t,"POST",U,s,15)})}Ro(e,t,s){const a=lp(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ru(),D=b(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;void 0!==U&&(N.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(N.xmlHttpFactory=new st({})),this.Eo(N.initMessageHeaders,t,s),N.encodeInitMessageHeaders=!0;const Q=c.join("");Mt(Gs,`Creating RPC '${e}' stream ${a}: ${Q}`,N);const ve=f.createWebChannel(Q,N);let Ge=!1,ft=!1;const Gt=new qu({ro:mn=>{ft?Mt(Gs,`Not sending because RPC '${e}' stream ${a} is closed:`,mn):(Ge||(Mt(Gs,`Opening RPC '${e}' stream ${a} transport.`),ve.open(),Ge=!0),Mt(Gs,`RPC '${e}' stream ${a} sending:`,mn),ve.send(mn))},oo:()=>ve.close()}),hn=(mn,fr,Ur)=>{mn.listen(fr,Cr=>{try{Ur(Cr)}catch(Ws){setTimeout(()=>{throw Ws},0)}})};return hn(ve,mt.EventType.OPEN,()=>{ft||Mt(Gs,`RPC '${e}' stream ${a} transport opened.`)}),hn(ve,mt.EventType.CLOSE,()=>{ft||(ft=!0,Mt(Gs,`RPC '${e}' stream ${a} transport closed`),Gt.wo())}),hn(ve,mt.EventType.ERROR,mn=>{ft||(ft=!0,Lr(Gs,`RPC '${e}' stream ${a} transport errored:`,mn),Gt.wo(new Ot(Qe.UNAVAILABLE,"The operation could not be completed")))}),hn(ve,mt.EventType.MESSAGE,mn=>{var fr;if(!ft){const Ur=mn.data[0];gn(!!Ur);const Cr=Ur,Ws=Cr.error||(null===(fr=Cr[0])||void 0===fr?void 0:fr.error);if(Ws){Mt(Gs,`RPC '${e}' stream ${a} received error:`,Ws);const Os=Ws.status;let Oi=function(Tu){const vy=ms[Tu];if(void 0!==vy)return Gu(vy)}(Os),Fo=Ws.message;void 0===Oi&&(Oi=Qe.INTERNAL,Fo="Unknown error status: "+Os+" with message "+Ws.message),ft=!0,Gt.wo(new Ot(Oi,Fo)),ve.close()}else Mt(Gs,`RPC '${e}' stream ${a} received:`,Ur),Gt._o(Ur)}}),hn(D,W.STAT_EVENT,mn=>{mn.stat===_e.PROXY?Mt(Gs,`RPC '${e}' stream ${a} detected buffering proxy`):mn.stat===_e.NOPROXY&&Mt(Gs,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Gt.fo()},0),Gt}}function jh(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function jc(i){return new W_(i,!0)}class Kg{constructor(e,t,s=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&Mt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Nd{constructor(e,t,s,a,c,f,D,N){this.ii=e,this.$o=s,this.Oo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=D,this.listener=N,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Kg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,p.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,p.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,p.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===Qe.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===Qe.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Ot(Qe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,p.Z)(function*(){e.state=0,e.start()}))}tu(e){return Mt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Nd{constructor(e,t,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function By(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(N=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===N?1:"REMOVE"===N?2:"CURRENT"===N?3:"RESET"===N?4:sn(),a=e.targetChange.targetIds||[],c=function(N,U){return N.useProto3Json?(gn(void 0===U||"string"==typeof U),bi.fromBase64String(U||"")):(gn(void 0===U||U instanceof Uint8Array),bi.fromUint8Array(U||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,D=f&&function(N){const U=void 0===N.code?Qe.UNKNOWN:Gu(N.code);return new Ot(U,N.message||"")}(f);t=new Eh(s,a,c,D||null)}else if("documentChange"in e){const s=e.documentChange,a=_u(i,s.document.name),c=Gi(s.document.updateTime),f=s.document.createTime?Gi(s.document.createTime):wn.min(),D=new ts({mapValue:{fields:s.document.fields}}),N=Zr.newFoundDocument(a,c,f,D);t=new _h(s.targetIds||[],s.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const s=e.documentDelete,a=_u(i,s.document),c=s.readTime?Gi(s.readTime):wn.min(),f=Zr.newNoDocument(a,c);t=new _h([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,a=_u(i,s.document);t=new _h([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return sn();{const s=e.filter,{count:a=0,unchangedNames:c}=s,f=new Ny(a,c);t=new _g(s.targetId,f)}}var N;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return wn.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?wn.min():c.readTime?Gi(c.readTime):wn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(a,c){let f;const D=c.target;if(f=Uu(D)?{documents:Dg(a,D)}:{query:jf(a,D)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Vy(a,c.resumeToken);const N=md(a,c.expectedCount);null!==N&&(f.expectedCount=N)}else if(c.snapshotVersion.compareTo(wn.min())>0){f.readTime=ml(a,c.snapshotVersion.toTimestamp());const N=md(a,c.expectedCount);null!==N&&(f.expectedCount=N)}return f}(this.serializer,e);const s=function $y(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class hp extends Nd{constructor(e,t,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(gn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jy(i,e){return i&&i.length>0?(gn(void 0!==e),i.map(t=>function(s,a){let c=Gi(s.updateTime?s.updateTime:a);return c.isEqual(wn.min())&&(c=Gi(a)),new xy(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Gi(e.commitTime);return this.listener.cu(s,t)}return gn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Kl(this.serializer,s))};this.Wo(t)}}class fp extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Ot(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ot(Qe.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.vo(e,t,s,c,f,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ot(Qe.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class mv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ir(t),this.mu=!1):Mt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yv{constructor(e,t,s,a,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(D=>{s.enqueueAndForget((0,p.Z)(function*(){var N;lc(f)&&(Mt("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,p.Z)(function*(U){const Q=Yt(U);Q.vu.add(4),yield uc(Q),Q.bu.set("Unknown"),Q.vu.delete(4),yield kd(Q)}),function(U){return N.apply(this,arguments)})(f))}))}),this.bu=new mv(s,a)}}function kd(i){return gp.apply(this,arguments)}function gp(){return gp=(0,p.Z)(function*(i){if(lc(i))for(const e of i.Ru)yield e(!0)}),gp.apply(this,arguments)}function uc(i){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,p.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Zg.apply(this,arguments)}function Hh(i,e){const t=Yt(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Fd(t)?yp(t):bl(t).Ko()&&zh(t,e))}function Gh(i,e){const t=Yt(i),s=bl(t);t.Au.delete(e),s.Ko()&&mp(t,e),0===t.Au.size&&(s.Ko()?s.jo():lc(t)&&t.bu.set("Unknown"))}function zh(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(i).su(e)}function mp(i,e){i.Vu.qt(e),bl(i).iu(e)}function yp(i){i.Vu=new gd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),bl(i).start(),i.bu.gu()}function Fd(i){return lc(i)&&!bl(i).Uo()&&i.Au.size>0}function lc(i){return 0===Yt(i).vu.size}function vv(i){i.Vu=void 0}function X_(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,p.Z)(function*(i){i.Au.forEach((e,t)=>{zh(i,e)})}),Yg.apply(this,arguments)}function e0(i,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,p.Z)(function*(i,e){vv(i),Fd(i)?(i.bu.Iu(e),yp(i)):i.bu.set("Unknown")}),Qg.apply(this,arguments)}function t0(i,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,p.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Eh&&2===e.state&&e.cause)try{yield(s=(0,p.Z)(function*(a,c){const f=c.cause;for(const D of c.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,f),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,c){return s.apply(this,arguments)})(i,e)}catch(s){Mt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vp(i,s)}else if(e instanceof _h?i.Vu.Ht(e):e instanceof _g?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(wn.min()))try{const s=yield hv(i.localStore);t.compareTo(s)>=0&&(yield function(a,c){const f=a.Vu.ce(c);return f.targetChanges.forEach((D,N)=>{if(D.resumeToken.approximateByteSize()>0){const U=a.Au.get(N);U&&a.Au.set(N,U.withResumeToken(D.resumeToken,c))}}),f.targetMismatches.forEach((D,N)=>{const U=a.Au.get(D);if(!U)return;a.Au.set(D,U.withResumeToken(bi.EMPTY_BYTE_STRING,U.snapshotVersion)),mp(a,D);const Q=new Eu(U.target,D,N,U.sequenceNumber);zh(a,Q)}),a.remoteSyncer.applyRemoteEvent(f)}(i,t))}catch(s){Mt("RemoteStore","Failed to raise snapshot:",s),yield vp(i,s)}var s}),Jg.apply(this,arguments)}function vp(i,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,p.Z)(function*(i,e,t){if(!Li(e))throw e;i.vu.add(1),yield uc(i),i.bu.set("Offline"),t||(t=()=>hv(i.localStore)),i.asyncQueue.enqueueRetryable((0,p.Z)(function*(){Mt("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield kd(i)}))}),Xg.apply(this,arguments)}function Zu(i,e){return e().catch(t=>vp(i,t,e))}function Il(i){return _p.apply(this,arguments)}function _p(){return _p=(0,p.Z)(function*(i){const e=Yt(i),t=Ja(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;em(e);)try{const a=yield pv(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Ep(e,a)}catch(a){yield vp(e,a)}wp(e)&&Wh(e)}),_p.apply(this,arguments)}function em(i){return lc(i)&&i.Eu.length<10}function Ep(i,e){i.Eu.push(e);const t=Ja(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function wp(i){return lc(i)&&!Ja(i).Uo()&&i.Eu.length>0}function Wh(i){Ja(i).start()}function _v(i){return wu.apply(this,arguments)}function wu(){return wu=(0,p.Z)(function*(i){Ja(i).hu()}),wu.apply(this,arguments)}function tm(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,p.Z)(function*(i){const e=Ja(i);for(const t of i.Eu)e.uu(t.mutations)}),Ip.apply(this,arguments)}function Ev(i,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,p.Z)(function*(i,e,t){const s=i.Eu.shift(),a=mh.from(s,e,t);yield Zu(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield Il(i)}),Kh.apply(this,arguments)}function wv(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,p.Z)(function*(i,e){var t;e&&Ja(i).ou&&(yield(t=(0,p.Z)(function*(s,a){if(yg(c=a.code)&&c!==Qe.ABORTED){const f=s.Eu.shift();Ja(s).Qo(),yield Zu(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield Il(s)}var c}),function(s,a){return t.apply(this,arguments)})(i,e)),wp(i)&&Wh(i)}),Dp.apply(this,arguments)}function Ld(i,e){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,p.Z)(function*(i,e){const t=Yt(i);t.asyncQueue.verifyOperationInProgress(),Mt("RemoteStore","RemoteStore received new credentials");const s=lc(t);t.vu.add(3),yield uc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kd(t)}),Dl.apply(this,arguments)}function Vd(i,e){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,p.Z)(function*(i,e){const t=Yt(i);e?(t.vu.delete(2),yield kd(t)):e||(t.vu.add(2),yield uc(t),t.bu.set("Unknown"))}),Cl.apply(this,arguments)}function bl(i){return i.Su||(i.Su=function(e,t,s){const a=Yt(e);return a.fu(),new $h(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:X_.bind(null,i),ao:e0.bind(null,i),nu:t0.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(t){t?(i.Su.Qo(),Fd(i)?yp(i):i.bu.set("Unknown")):(yield i.Su.stop(),vv(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Ja(i){return i.Du||(i.Du=function(e,t,s){const a=Yt(e);return a.fu(),new hp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:_v.bind(null,i),ao:wv.bind(null,i),au:tm.bind(null,i),cu:Ev.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(t){t?(i.Du.Qo(),yield Il(i)):(yield i.Du.stop(),i.Eu.length>0&&(Mt("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class qh{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,a,c){const f=Date.now()+s,D=new qh(e,t,f,a,c);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ot(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(i,e){if(Ir("AsyncQueue",`${e}: ${i}`),Li(i))return new Ot(Qe.UNAVAILABLE,`${e}: ${i}`);throw i}class Tl{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Qt.comparator(t.key,s.key):(t,s)=>Qt.comparator(t.key,s.key),this.keyedMap=mu(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new Tl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Tl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Zh{constructor(){this.Cu=new Dr(Qt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):sn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class dc{constructor(e,t,s,a,c,f,D,N,U){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=D,this.excludesMetadataChanges=N,this.hasCachedResults=U}static fromInitialDocuments(e,t,s,a,c){const f=[];return t.forEach(D=>{f.push({type:0,doc:D})}),new dc(e,t,Tl.emptySet(t),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Cp{constructor(){this.Nu=void 0,this.listeners=[]}}class Iv{constructor(){this.queries=new Hs(e=>lt(e),Oe),this.onlineState="Unknown",this.ku=new Set}}function nm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,p.Z)(function*(i,e){const t=Yt(i),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Cp),a)try{c.Nu=yield t.onListen(s)}catch(f){const D=cc(f,`Initialization of query '${zt(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&Ap(t)}),bp.apply(this,arguments)}function Yh(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,p.Z)(function*(i,e){const t=Yt(i),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Tp.apply(this,arguments)}function rm(i,e){const t=Yt(i);let s=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const D of f.listeners)D.$u(a)&&(s=!0);f.Nu=a}}s&&Ap(t)}function im(i,e,t){const s=Yt(i),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function Ap(i){i.ku.forEach(e=>{e.next()})}class No{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class om{constructor(e){this.serializer=e}rr(e){return _u(this.serializer,e)}ur(e){return e.metadata.exists?rs(this.serializer,e.document,!1):Zr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Gi(e)}}class n0{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=am(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=Sn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new om(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.rr(a.metadata.name);for(const f of a.metadata.queries){const D=(t.get(f)||lr()).add(c);t.set(f,D)}}return t}complete(){var e=this;return(0,p.Z)(function*(){const t=yield function gv(i,e,t,s){return rp.apply(this,arguments)}(e.localStore,new om(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Gg(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function am(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Qh{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=lr(),this.mutatedKeys=lr(),this.tc=mr(e),this.ec=new Tl(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Zh,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,D=!1;const N="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,U="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((Q,ve)=>{const Ge=a.get(Q),ft=on(this.query,ve)?ve:null,Gt=!!Ge&&this.mutatedKeys.has(Ge.key),hn=!!ft&&(ft.hasLocalMutations||this.mutatedKeys.has(ft.key)&&ft.hasCommittedMutations);let mn=!1;Ge&&ft?Ge.data.isEqual(ft.data)?Gt!==hn&&(s.track({type:3,doc:ft}),mn=!0):this.rc(Ge,ft)||(s.track({type:2,doc:ft}),mn=!0,(N&&this.tc(ft,N)>0||U&&this.tc(ft,U)<0)&&(D=!0)):!Ge&&ft?(s.track({type:0,doc:ft}),mn=!0):Ge&&!ft&&(s.track({type:1,doc:Ge}),mn=!0,(N||U)&&(D=!0)),mn&&(ft?(f=f.add(ft),c=hn?c.add(Q):c.delete(Q)):(f=f.delete(Q),c=c.delete(Q)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const Q="F"===this.query.limitType?f.last():f.first();f=f.delete(Q.key),c=c.delete(Q.key),s.track({type:1,doc:Q})}return{ec:f,ic:s,zi:D,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((U,Q)=>function(ve,Ge){const ft=Gt=>{switch(Gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return ft(ve)-ft(Ge)}(U.type,Q.type)||this.tc(U.doc,Q.doc)),this.oc(s);const f=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,N=D!==this.Xu;return this.Xu=D,0!==c.length||N?{snapshot:new dc(this.query,e.ec,a,c,e.mutatedKeys,0===D,N,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:f}:{cc:f}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Zh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=lr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Sp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Qh(s))}),t}hc(e){this.Yu=e.ir,this.Zu=lr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Dv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Cv{constructor(e){this.key=e,this.fc=!1}}class lm{constructor(e,t,s,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.dc={},this.wc=new Hs(D=>lt(D),Oe),this._c=new Map,this.mc=new Set,this.gc=new Dr(Qt.comparator),this.yc=new Map,this.Ic=new or,this.Tc={},this.Ec=new Map,this.Ac=Oo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function bv(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,p.Z)(function*(i,e){const t=uf(i);let s,a;const c=t.wc.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.lc();else{const f=yield oc(t.localStore,I(e)),D=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,a=yield Mp(t,e,s,"current"===D,f.resumeToken),t.isPrimaryClient&&Hh(t.remoteStore,f)}return a}),Jh.apply(this,arguments)}function Mp(i,e,t,s,a){return xp.apply(this,arguments)}function xp(){return xp=(0,p.Z)(function*(i,e,t,s,a){i.Rc=(ve,Ge,ft)=>{return(Gt=(0,p.Z)(function*(hn,mn,fr,Ur){let Cr=mn.view.sc(fr);Cr.zi&&(Cr=yield Rd(hn.localStore,mn.query,!1).then(({documents:Oi})=>mn.view.sc(Oi,Cr)));const Ws=Ur&&Ur.targetChanges.get(mn.targetId),Os=mn.view.applyChanges(Cr,hn.isPrimaryClient,Ws);return jd(hn,mn.targetId,Os.cc),Os.snapshot}),function(hn,mn,fr,Ur){return Gt.apply(this,arguments)})(i,ve,Ge,ft);var Gt};const c=yield Rd(i.localStore,e,!0),f=new um(e,c.ir),D=f.sc(c.documents),N=pd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,a),U=f.applyChanges(D,i.isPrimaryClient,N);jd(i,t,U.cc);const Q=new Dv(e,t,f);return i.wc.set(e,Q),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),U.snapshot}),xp.apply(this,arguments)}function cm(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,p.Z)(function*(i,e){const t=Yt(i),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(c=>!Oe(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ku(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Gh(t.remoteStore,s.targetId),Yu(t,s.targetId)}).catch(Zo))):(Yu(t,s.targetId),yield Ku(t.localStore,s.targetId,!0))}),Xh.apply(this,arguments)}function Fa(){return Fa=(0,p.Z)(function*(i,e,t){const s=Gd(i);try{const a=yield function(c,f){const D=Yt(c),N=Hr.now(),U=f.reduce((Ge,ft)=>Ge.add(ft.key),lr());let Q,ve;return D.persistence.runTransaction("Locally write mutations","readwrite",Ge=>{let ft=Ms(),Gt=lr();return D.Zi.getEntries(Ge,U).next(hn=>{ft=hn,ft.forEach((mn,fr)=>{fr.isValidDocument()||(Gt=Gt.add(mn))})}).next(()=>D.localDocuments.getOverlayedDocuments(Ge,ft)).next(hn=>{Q=hn;const mn=[];for(const fr of f){const Ur=Ry(fr,Q.get(fr.key).overlayedDocument);null!=Ur&&mn.push(new Ya(fr.key,Ur,cl(Ur.value.mapValue),Ti.exists(!0)))}return D.mutationQueue.addMutationBatch(Ge,N,mn,f)}).next(hn=>{ve=hn;const mn=hn.applyToLocalDocumentSet(Q,Gt);return D.documentOverlayCache.saveOverlays(Ge,hn.batchId,mn)})}).then(()=>({batchId:ve.batchId,changes:od(Q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,f,D){let N=c.Tc[c.currentUser.toKey()];N||(N=new Dr(kn)),N=N.insert(f,D),c.Tc[c.currentUser.toKey()]=N}(s,a.batchId,t),yield Iu(s,a.changes),yield Il(s.remoteStore)}catch(a){const c=cc(a,"Failed to persist write");t.reject(c)}}),Fa.apply(this,arguments)}function ef(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,p.Z)(function*(i,e){const t=Yt(i);try{const s=yield fv(t.localStore,e);e.targetChanges.forEach((a,c)=>{const f=t.yc.get(c);f&&(gn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.fc=!0:a.modifiedDocuments.size>0?gn(f.fc):a.removedDocuments.size>0&&(gn(f.fc),f.fc=!1))}),yield Iu(t,s,e)}catch(s){yield Zo(s)}}),Rp.apply(this,arguments)}function dm(i,e,t){const s=Yt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((c,f)=>{const D=f.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(c,f){const D=Yt(c);D.onlineState=f;let N=!1;D.queries.forEach((U,Q)=>{for(const ve of Q.listeners)ve.Mu(f)&&(N=!0)}),N&&Ap(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function r0(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,p.Z)(function*(i,e,t){const s=Yt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),c=a&&a.key;if(c){let f=new Dr(Qt.comparator);f=f.insert(c,Zr.newNoDocument(c,wn.min()));const D=lr().add(c),N=new fd(wn.min(),new Map,new Dr(kn),f,D);yield ef(s,N),s.gc=s.gc.remove(c),s.yc.delete(e),nf(s)}else yield Ku(s.localStore,e,!1).then(()=>Yu(s,e,t)).catch(Zo)}),tf.apply(this,arguments)}function Av(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,p.Z)(function*(i,e){const t=Yt(i),s=e.batch.batchId;try{const a=yield Bg(t.localStore,e);Bd(t,s,null),$c(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Iu(t,a)}catch(a){yield Zo(a)}}),Pp.apply(this,arguments)}function Sv(i,e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,p.Z)(function*(i,e,t){const s=Yt(i);try{const a=yield function(c,f){const D=Yt(c);return D.persistence.runTransaction("Reject batch","readwrite-primary",N=>{let U;return D.mutationQueue.lookupMutationBatch(N,f).next(Q=>(gn(null!==Q),U=Q.keys(),D.mutationQueue.removeMutationBatch(N,Q))).next(()=>D.mutationQueue.performConsistencyCheck(N)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(N,U,f)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(N,U)).next(()=>D.localDocuments.getDocuments(N,U))})}(s.localStore,e);Bd(s,e,t),$c(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Iu(s,a)}catch(a){yield Zo(a)}}),Ud.apply(this,arguments)}function Op(){return Op=(0,p.Z)(function*(i,e){const t=Yt(i);lc(t.remoteStore)||Mt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const f=Yt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>f.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=cc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Op.apply(this,arguments)}function $c(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Bd(i,e,t){const s=Yt(i);let a=s.Tc[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Yu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),t&&i.dc.Pc(s,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||xv(i,s)})}function xv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Gh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),nf(i))}function jd(i,e,t){for(const s of t)s instanceof Qh?(i.Ic.addReference(s.key,e),s0(i,s)):s instanceof Sp?(Mt("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||xv(i,s.key)):sn()}function s0(i,e){const t=e.key,s=t.path.canonicalString();i.gc.get(t)||i.mc.has(s)||(Mt("SyncEngine","New document in limbo: "+t),i.mc.add(s),nf(i))}function nf(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new Qt(Sn.fromString(e)),s=i.Ac.next();i.yc.set(s,new Cv(t)),i.gc=i.gc.insert(t,s),Hh(i.remoteStore,new Eu(I(Bu(t.path)),s,"TargetPurposeLimboResolution",Xi.ct))}}function Iu(i,e,t){return rf.apply(this,arguments)}function rf(){return rf=(0,p.Z)(function*(i,e,t){const s=Yt(i),a=[],c=[],f=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,N)=>{f.push(s.Rc(N,e,t).then(U=>{if((U||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(N.targetId,U?.fromCache?"not-current":"current"),U){a.push(U);const Q=xd.Li(N.targetId,U);c.push(Q)}}))}),yield Promise.all(f),s.dc.nu(a),yield(D=(0,p.Z)(function*(N,U){const Q=Yt(N);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ve=>ze.forEach(U,Ge=>ze.forEach(Ge.Fi,ft=>Q.persistence.referenceDelegate.addReference(ve,Ge.targetId,ft)).next(()=>ze.forEach(Ge.Bi,ft=>Q.persistence.referenceDelegate.removeReference(ve,Ge.targetId,ft)))))}catch(ve){if(!Li(ve))throw ve;Mt("LocalStore","Failed to update sequence numbers: "+ve)}for(const ve of U){const Ge=ve.targetId;if(!ve.fromCache){const ft=Q.Ji.get(Ge),hn=ft.withLastLimboFreeSnapshotVersion(ft.snapshotVersion);Q.Ji=Q.Ji.insert(Ge,hn)}}}),function(N,U){return D.apply(this,arguments)})(s.localStore,c))}),rf.apply(this,arguments)}function hm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,p.Z)(function*(i,e){const t=Yt(i);if(!t.currentUser.isEqual(e)){Mt("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(f=>{f.forEach(D=>{D.reject(new Ot(Qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Iu(t,s.er)}var a}),$d.apply(this,arguments)}function Qu(i,e){const t=Yt(i),s=t.yc.get(e);if(s&&s.fc)return lr().add(s.key);{let a=lr();const c=t._c.get(e);if(!c)return a;for(const f of c){const D=t.wc.get(f);a=a.unionWith(D.view.nc)}return a}}function sf(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,p.Z)(function*(i,e){const t=Yt(i),s=yield Rd(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&jd(t,e.targetId,a.cc),a}),Hc.apply(this,arguments)}function Hd(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,p.Z)(function*(i,e){const t=Yt(i);return $g(t.localStore,e).then(s=>Iu(t,s))}),Np.apply(this,arguments)}function kp(i,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,p.Z)(function*(i,e,t,s){const a=Yt(i),c=yield function(f,D){const N=Yt(f),U=Yt(N.mutationQueue);return N.persistence.runTransaction("Lookup mutation documents","readonly",Q=>U.Sn(Q,D).next(ve=>ve?N.localDocuments.getDocuments(Q,ve):ze.resolve(null)))}(a.localStore,e);var D;null!==c?("pending"===t?yield Il(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),$c(a,e),D=e,Yt(Yt(a.localStore).mutationQueue).Cn(D)):sn(),yield Iu(a,c)):Mt("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function Fp(){return Fp=(0,p.Z)(function*(i,e){const t=Yt(i);if(uf(t),Gd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Gc(t,s.toArray());t.vc=!0,yield Vd(t.remoteStore,!0);for(const c of a)Hh(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):a=a.then(()=>(Yu(t,f),Ku(t.localStore,f,!0))),Gh(t.remoteStore,f)}),yield a,yield Gc(t,s),function(c){const f=Yt(c);f.yc.forEach((D,N)=>{Gh(f.remoteStore,N)}),f.Ic.Ts(),f.yc=new Map,f.gc=new Dr(Qt.comparator)}(t),t.vc=!1,yield Vd(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function Gc(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,p.Z)(function*(i,e,t){const s=Yt(i),a=[],c=[];for(const f of e){let D;const N=s._c.get(f);if(N&&0!==N.length){D=yield oc(s.localStore,I(N[0]));for(const U of N){const Q=s.wc.get(U),ve=yield sf(s,Q);ve.snapshot&&c.push(ve.snapshot)}}else{const U=yield jg(s.localStore,f);D=yield oc(s.localStore,U),yield Mp(s,Pv(U),f,!1,D.resumeToken)}a.push(D)}return s.dc.nu(c),a}),Lp.apply(this,arguments)}function Pv(i){return fl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Ov(i){const e=Yt(i);return Yt(Yt(e.localStore).persistence).$i()}function o0(i,e,t,s){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,p.Z)(function*(i,e,t,s){const a=Yt(i);if(a.vc)return void Mt("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const f=yield $g(a.localStore,Mn(c[0])),D=fd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield Iu(a,f,D);break}case"rejected":yield Ku(a.localStore,e,!0),Yu(a,e,s);break;default:sn()}}),Vp.apply(this,arguments)}function Nv(i,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,p.Z)(function*(i,e,t){const s=uf(i);if(s.vc){for(const a of e){if(s._c.has(a)){Mt("SyncEngine","Adding an already active target "+a);continue}const c=yield jg(s.localStore,a),f=yield oc(s.localStore,c);yield Mp(s,Pv(c),f.targetId,!1,f.resumeToken),Hh(s.remoteStore,f)}for(const a of t)s._c.has(a)&&(yield Ku(s.localStore,a,!1).then(()=>{Gh(s.remoteStore,a),Yu(s,a)}).catch(Zo))}}),Up.apply(this,arguments)}function uf(i){const e=Yt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r0.bind(null,e),e.dc.nu=rm.bind(null,e.eventManager),e.dc.Pc=im.bind(null,e.eventManager),e}function Gd(i){const e=Yt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sv.bind(null,e),e}class hc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,p.Z)(function*(){t.serializer=jc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new Oh(Sd.zs,this.serializer)}createSharedClientState(e){return new up}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends hc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,p.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gd(s.Vc.syncEngine),yield Il(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Jf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new kl(t,this.persistence);return new Pu(e.asyncQueue,s)}createPersistence(e){const t=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new Fh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jh(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new up}}class fm extends Bp{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,p.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Uh&&(s.sharedClientState.syncEngine={jr:kp.bind(null,a),zr:o0.bind(null,a),Wr:Nv.bind(null,a),$i:Ov.bind(null,a),Qr:Hd.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var c=(0,p.Z)(function*(f){yield function Rv(i,e){return Fp.apply(this,arguments)}(s.Vc.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start():f||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(f&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():f||s.indexBackfillerScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jh();if(!Uh.D(t))throw new Ot(Qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class zc{initialize(e,t){var s=this;return(0,p.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>dm(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=hm.bind(null,s.syncEngine),yield Vd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iv}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=new Wg(e.databaseInfo);return new fp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=D=>dm(this.syncEngine,D,0),f=ka.D()?new ka:new Bh,new yv(t,s,a,c,f);var t,s,a,c,f}createSyncEngine(e,t){return function(s,a,c,f,D,N,U){const Q=new lm(s,a,c,f,D,N);return U&&(Q.vc=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,p.Z)(function*(t){const s=Yt(t);Mt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield uc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pm(i,e=10240){let t=0;return{read:()=>(0,p.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,p.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const c=yield e.$c(a);return new sm(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,p.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,p.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,p.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,p.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ot(Qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,p.Z)(function*(c,f){const D=Yt(c),N=_d(D.serializer)+"/documents",U={documents:f.map(ft=>yd(D.serializer,ft))},Q=yield D.vo("BatchGetDocuments",N,U,f.length),ve=new Map;Q.forEach(ft=>{const Gt=function Uy(i,e){return"found"in e?function(t,s){gn(!!s.found);const a=_u(t,s.found.name),c=Gi(s.found.updateTime),f=s.found.createTime?Gi(s.found.createTime):wn.min(),D=new ts({mapValue:{fields:s.found.fields}});return Zr.newFoundDocument(a,c,f,D)}(i,e):"missing"in e?function(t,s){gn(!!s.missing),gn(!!s.readTime);const a=_u(t,s.missing),c=Gi(s.readTime);return Zr.newNoDocument(a,c)}(i,e):sn()}(D.serializer,ft);ve.set(Gt.key.toString(),Gt)});const Ge=[];return f.forEach(ft=>{const Gt=ve.get(ft.toString());gn(!!Gt),Ge.push(Gt)}),Ge}),function(c,f){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=Qt.fromPath(a);e.mutations.push(new ph(c,e.precondition(c)))}),yield(s=(0,p.Z)(function*(a,c){const f=Yt(a),D=_d(f.serializer)+"/documents",N={writes:c.map(U=>Kl(f.serializer,U))};yield f.Io("Commit",D,N)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sn();t=wn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Ot(Qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wn.min())?Ti.exists(!1):Ti.updateTime(t):Ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wn.min()))throw new Ot(Qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(t)}return Ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a0{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.Bc=s.maxAttempts,this.qo=new Kg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,p.Z)(function*(){const t=new fc(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!za(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yg(t)}return!1}}class zd{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Cn.UNAUTHENTICATED,this.clientId=yi.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var f=(0,p.Z)(function*(D){Mt("FirestoreClient","Received user=",D.uid),yield c.authCredentialListener(D),c.user=D});return function(D){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(s,f=>(Mt("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ot(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=cc(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Mt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,p.Z)(function*(c){s.isEqual(c)||(yield dv(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jp.apply(this,arguments)}function Wd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield pc(i);Mt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(a=>Ld(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>Ld(e.remoteStore,c)),i._onlineComponents=e}),$p.apply(this,arguments)}function Xa(i){return"FirebaseError"===i.name?i.code===Qe.FAILED_PRECONDITION||i.code===Qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function pc(i){return zs.apply(this,arguments)}function zs(){return zs=(0,p.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Mt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Xa(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),yield df(i,new hc)}}else Mt("FirestoreClient","Using default OfflineComponentProvider"),yield df(i,new hc);return i._offlineComponents}),zs.apply(this,arguments)}function Du(i){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,p.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Mt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wd(i,i._uninitializedComponentsProvider._online)):(Mt("FirestoreClient","Using default OnlineComponentProvider"),yield Wd(i,new zc))),i._onlineComponents}),Wc.apply(this,arguments)}function pa(i){return pc(i).then(e=>e.persistence)}function Kc(i){return pc(i).then(e=>e.localStore)}function gc(i){return Du(i).then(e=>e.remoteStore)}function Al(i){return Du(i).then(e=>e.syncEngine)}function eu(i){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,p.Z)(function*(i){const e=yield Du(i),t=e.eventManager;return t.onListen=bv.bind(null,e.syncEngine),t.onUnlisten=cm.bind(null,e.syncEngine),t}),Sl.apply(this,arguments)}function yc(i,e,t={}){const s=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(a,c,f,D,N){const U=new lf({next:ve=>{c.enqueueAndForget(()=>Yh(a,Q));const Ge=ve.docs.has(f);!Ge&&ve.fromCache?N.reject(new Ot(Qe.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&ve.fromCache&&D&&"server"===D.source?N.reject(new Ot(Qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):N.resolve(ve)},error:ve=>N.reject(ve)}),Q=new No(Bu(f.path),U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Hp(i,e,t={}){const s=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(a,c,f,D,N){const U=new lf({next:ve=>{c.enqueueAndForget(()=>Yh(a,Q)),ve.fromCache&&"server"===D.source?N.reject(new Ot(Qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):N.resolve(ve)},error:ve=>N.reject(ve)}),Q=new No(f,U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Gp(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const zp=new Map;function hf(i,e,t){if(!t)throw new Ot(Qe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Em(i,e,t,s){if(!0===e&&!0===s)throw new Ot(Qe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wm(i){if(!Qt.isDocumentKey(i))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wp(i){if(Qt.isDocumentKey(i))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":sn()}function xr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ot(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new Ot(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pf(i,e){if(e<=0)throw new Ot(Qe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class gf{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Ot(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ot(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Em("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gp(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Ot(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ot(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ot(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ot(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ot(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Mu;switch(t.type){case"firstParty":return new oa(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ot(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zp.get(e);t&&(Mt("ComponentProvider","Removing Datastore"),zp.delete(e),t.terminate())}(this),Promise.resolve()}}function qd(i,e,t,s={}){var a;const c=(i=xr(i,Kd))._getSettings(),f=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==f&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let D,N;if("string"==typeof s.mockUserToken)D=s.mockUserToken,N=Cn.MOCK_USER;else{D=(0,he.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new Ot(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Cn(U)}i._authCredentials=new wa(new Su(D,N))}}class Ai{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ai(this.firestore,e,this._key)}}class Rs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Cu extends Rs{constructor(e,t,s){super(e,t,Bu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ai(this.firestore,null,new Qt(e))}withConverter(e){return new Cu(this.firestore,e,this._path)}}function Kp(i,e,...t){if(i=(0,he.m9)(i),hf("collection","path",e),i instanceof Kd){const s=Sn.fromString(e,...t);return Wp(s),new Cu(i,null,s)}{if(!(i instanceof Ai||i instanceof Cu))throw new Ot(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Sn.fromString(e,...t));return Wp(s),new Cu(i.firestore,null,s)}}function qp(i,e){if(i=xr(i,Kd),hf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ot(Qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rs(i,null,(t=e,new qa(Sn.emptyPath(),t)));var t}function Zp(i,e,...t){if(i=(0,he.m9)(i),1===arguments.length&&(e=yi.A()),hf("doc","path",e),i instanceof Kd){const s=Sn.fromString(e,...t);return wm(s),new Ai(i,null,new Qt(s))}{if(!(i instanceof Ai||i instanceof Cu))throw new Ot(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Sn.fromString(e,...t));return wm(s),new Ai(i.firestore,i instanceof Cu?i.converter:null,new Qt(s))}}function Im(i,e){return i=(0,he.m9)(i),e=(0,he.m9)(e),(i instanceof Ai||i instanceof Cu)&&(e instanceof Ai||e instanceof Cu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Zd(i,e){return i=(0,he.m9)(i),e=(0,he.m9)(e),i instanceof Rs&&e instanceof Rs&&i.firestore===e.firestore&&Oe(i._query,e._query)&&i.converter===e.converter}class Dm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Kg(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&Mt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,p.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Li(t))throw t;Mt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=qh.createAndSchedule(this,e,t,s,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&sn()}verifyOperationInProgress(){}sa(){var e=this;return(0,p.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class Yp{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Cm=-1;class Si extends Kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Dm,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qp(this),this._firestoreClient.terminate()}}function zi(i){return i._firestoreClient||Qp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qp(i){var e,t,s;const a=i._freezeSettings(),c=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ul(i._databaseId,D,i._persistenceKey,(U=a).host,U.ssl,U.experimentalForceLongPolling,U.experimentalAutoDetectLongPolling,Gp(U.experimentalLongPollingOptions),U.useFetchStreams));var D,U;i._firestoreClient=new zd(i._authCredentials,i._appCheckCredentials,i._queue,c),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Uv(i,e){Xp(i=xr(i,Si));const t=zi(i);if(t._uninitializedComponentsProvider)throw new Ot(Qe.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),a=new zc;return bm(t,a,new Bp(a,s.cacheSizeBytes,e?.forceOwnership))}function Bv(i){Xp(i=xr(i,Si));const e=zi(i);if(e._uninitializedComponentsProvider)throw new Ot(Qe.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new zc;return bm(e,s,new fm(s,t.cacheSizeBytes))}function bm(i,e,t){const s=new ri;return i.asyncQueue.enqueue((0,p.Z)(function*(){try{yield df(i,t),yield Wd(i,e),s.resolve()}catch(a){const c=a;if(!Xa(c))throw c;Lr("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Tm(i){if(i._initialized&&!i._terminated)throw new Ot(Qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return i._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(t=(0,p.Z)(function*(s){if(!so.D())return Promise.resolve();const a=s+"main";yield so.delete(a)}),function(s){return t.apply(this,arguments)})(Md(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Jp(i){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Mv(i,e){return Op.apply(this,arguments)}(yield Al(e),t)})),t.promise}(zi(i=xr(i,Si)))}function Am(i){return function qc(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield pa(i),t=yield gc(i);return e.setNetworkEnabled(!0),function(s){const a=Yt(s);return a.vu.delete(0),kd(a)}(t)}))}(zi(i=xr(i,Si)))}function Sm(i){return function Zc(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield pa(i),t=yield gc(i);return e.setNetworkEnabled(!1),(s=(0,p.Z)(function*(a){const c=Yt(a);c.vu.add(0),yield uc(c),c.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(zi(i=xr(i,Si)))}function Mm(i,e){const t=zi(i=xr(i,Si)),s=new Yp;return function ym(i,e,t,s){const a=function(c,f){let D;return D="string"==typeof c?ky().encode(c):c,N=function(N,U){if(N instanceof Uint8Array)return pm(N,U);if(N instanceof ArrayBuffer)return pm(new Uint8Array(N),U);if(N instanceof ReadableStream)return N.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new cf(N,f);var N}(t,jc(e));i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function kv(i,e,t){const s=Yt(i);var a;(a=(0,p.Z)(function*(c,f,D){try{const N=yield f.getMetadata();if(yield function(Ge,ft){const Gt=Yt(Ge),hn=Gi(ft.createTime);return Gt.persistence.runTransaction("hasNewerBundle","readonly",mn=>Gt.qs.getBundleMetadata(mn,ft.id)).then(mn=>!!mn&&mn.createTime.compareTo(hn)>=0)}(c.localStore,N))return yield f.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ge=N).totalDocuments,bytesLoaded:Ge.totalBytes,totalDocuments:Ge.totalDocuments,totalBytes:Ge.totalBytes}),Promise.resolve(new Set);D._updateProgress(am(N));const U=new n0(N,c.localStore,f.serializer);let Q=yield f.bc();for(;Q;){const Ge=yield U.zu(Q);Ge&&D._updateProgress(Ge),Q=yield f.bc()}const ve=yield U.complete();return yield Iu(c,ve.Ju,void 0),yield function(Ge,ft){const Gt=Yt(Ge);return Gt.persistence.runTransaction("Save bundle","readwrite",hn=>Gt.qs.saveBundleMetadata(hn,ft))}(c.localStore,N),D._completeWith(ve.progress),Promise.resolve(ve.Hu)}catch(N){return Lr("SyncEngine",`Loading bundle failed with ${N}`),D._failWith(N),Promise.resolve(new Set)}var Ge}),function(c,f,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Al(i),a,s)}))}(t,i._databaseId,e,s),s}function xm(i,e){return function vm(i,e){return i.asyncQueue.enqueue((0,p.Z)(function*(){return function(t,s){const a=Yt(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,s))}(yield Kc(i),e)}))}(zi(i=xr(i,Si)),e).then(t=>t?new Rs(i,null,t.query):null)}function Xp(i){if(i._initialized||i._terminated)throw new Ot(Qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(bi.fromBase64String(e))}catch(t){throw new Ot(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ml{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ot(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xl{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ot(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ot(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}const Ps=/^__.*__$/;class Pm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class Om{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class Yd{constructor(e,t,s,a,c,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Nm(this.ca)&&Ps.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $v{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}ya(e,t,s,a=!1){return new Yd({ca:e,methodName:t,ga:s,path:sr.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(i){const e=i._freezeSettings(),t=jc(i._databaseId);return new $v(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Qd(i,e,t,s,a,c={}){const f=i.ya(c.merge||c.mergeFields?2:0,e,t,a);La("Data must be an object, but it was:",f,s);const D=Um(s,f);let N,U;if(c.merge)N=new es(f.fieldMask),U=f.fieldTransforms;else if(c.mergeFields){const Q=[];for(const ve of c.mergeFields){const Ge=ko(e,ve,t);if(!f.contains(Ge))throw new Ot(Qe.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);Bm(Q,Ge)||Q.push(Ge)}N=new es(Q),U=f.fieldTransforms.filter(ve=>N.covers(ve.field))}else N=null,U=f.fieldTransforms;return new Pm(new ts(D),N,U)}class bu extends xl{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bu}}function km(i,e,t){return new Yd({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends xl{_toFieldTransform(e){return new xc(e.path,new $u)}isEqual(e){return e instanceof eg}}class Fm extends xl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Eo(c,t)),a=new yu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Hv extends xl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Eo(c,t)),a=new Hu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Lm extends xl{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new pl(e.serializer,Of(e.serializer,this.Ia));return new xc(e.path,t)}isEqual(e){return this===e}}function Vm(i,e,t,s){const a=i.ya(1,e,t);La("Data must be an object, but it was:",a,s);const c=[],f=ts.empty();Wa(s,(N,U)=>{const Q=Jd(e,N,t);U=(0,he.m9)(U);const ve=a.da(Q);if(U instanceof bu)c.push(Q);else{const Ge=Eo(U,ve);null!=Ge&&(c.push(Q),f.set(Q,Ge))}});const D=new es(c);return new Om(f,D,a.fieldTransforms)}function vf(i,e,t,s,a,c){const f=i.ya(1,e,t),D=[ko(e,s,t)],N=[a];if(c.length%2!=0)throw new Ot(Qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<c.length;Ge+=2)D.push(ko(e,c[Ge])),N.push(c[Ge+1]);const U=[],Q=ts.empty();for(let Ge=D.length-1;Ge>=0;--Ge)if(!Bm(U,D[Ge])){const ft=D[Ge];let Gt=N[Ge];Gt=(0,he.m9)(Gt);const hn=f.da(ft);if(Gt instanceof bu)U.push(ft);else{const mn=Eo(Gt,hn);null!=mn&&(U.push(ft),Q.set(ft,mn))}}const ve=new es(U);return new Om(Q,ve,f.fieldTransforms)}function _f(i,e,t,s=!1){return Eo(t,i.ya(s?4:3,e))}function Eo(i,e){if(tg(i=(0,he.m9)(i)))return La("Unsupported field value:",e,i),Um(i,e);if(i instanceof xl)return function(t,s){if(!Nm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const f of t){let D=Eo(f,s.wa(c));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),c++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,he.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Of(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Hr.fromDate(t);return{timestampValue:ml(s.serializer,a)}}if(t instanceof Hr){const a=new Hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ml(s.serializer,a)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:Vy(s.serializer,t._byteString)};if(t instanceof Ai){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ff(t)}`)}(i,e)}function Um(i,e){const t={};return Ll(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(i,(s,a)=>{const c=Eo(a,e.ha(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Hr||i instanceof yf||i instanceof vc||i instanceof Ai||i instanceof xl)}function La(i,e,t){if(!tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ff(t);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function ko(i,e,t){if((e=(0,he.m9)(e))instanceof Ml)return e._internalPath;if("string"==typeof e)return Jd(i,e);throw Xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const tu=new RegExp("[~\\*/\\[\\]]");function Jd(i,e,t){if(e.search(tu)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ml(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xd(i,e,t,s,a){const c=s&&!s.isEmpty(),f=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let N="";return(c||f)&&(N+=" (found",c&&(N+=` in field ${s}`),f&&(N+=` in document ${a}`),N+=")"),new Ot(Qe.INVALID_ARGUMENT,D+i+N)}function Bm(i,e){return i.some(t=>t.isEqual(e))}class eh{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ai(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends eh{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Jd(i,e):e instanceof Ml?e._internalPath:e._delegate._internalPath}function wf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Ot(Qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _c{}class th extends _c{}function jm(i,e,...t){let s=[];e instanceof _c&&s.push(e),s=s.concat(t),function(a){const c=a.filter(D=>D instanceof Ec).length,f=a.filter(D=>D instanceof nh).length;if(c>1||c>0&&f>0)throw new Ot(Qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class nh extends th{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Rs(e.firestore,e.converter,$(e._query,t))}_parse(e){const t=Rl(e.firestore);return function(a,c,f,D,N,U,Q){let ve;if(N.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new Ot(Qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){Zm(Q,U);const Ge=[];for(const ft of Q)Ge.push(qm(D,a,ft));ve={arrayValue:{values:Ge}}}else ve=qm(D,a,Q)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||Zm(Q,U),ve=_f(f,"where",Q,"in"===U||"not-in"===U);return ye.create(N,U,ve)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $m(i,e,t){const s=e,a=Ef("where",i);return nh._create(a,s,t)}class Ec extends _c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ec(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Se.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let c=s;const f=a.getFlattenedFilters();for(const D of f)Ym(c,D),c=$(c,D)}(e._query,t),new Rs(e.firestore,e.converter,$(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new If(e,t)}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new Ot(Qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ot(Qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new T(a,c);return function(D,N){if(null===Ac(D)){const U=v(D);null!==U&&Qm(0,U,N.field)}}(s,f),f}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new qa(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Hm(i,e="asc"){const t=e,s=Ef("orderBy",i);return If._create(s,t)}class Jc extends th{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jc(e,t,s)}_apply(e){return new Rs(e.firestore,e.converter,J(e._query,this._limit,this._limitType))}}function Df(i){return pf("limit",i),Jc._create("limit",i,"F")}function rg(i){return pf("limitToLast",i),Jc._create("limitToLast",i,"L")}class rh extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(a=t,new qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Gm(...i){return rh._create("startAt",i,!0)}function zm(...i){return rh._create("startAfter",i,!1)}class ih extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(a=t,new qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Wm(...i){return ih._create("endBefore",i,!1)}function Km(...i){return ih._create("endAt",i,!0)}function ig(i,e,t,s){if(t[0]=(0,he.m9)(t[0]),t[0]instanceof eh)return function(a,c,f,D,N){if(!D)throw new Ot(Qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const U=[];for(const Q of g(a))if(Q.field.isKeyField())U.push(Ra(c,D.key));else{const ve=D.data.field(Q.field);if(ku(ve))throw new Ot(Qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ve){const Ge=Q.field.canonicalString();throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}U.push(ve)}return new ns(U,N)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const a=Rl(i.firestore);return function(c,f,D,N,U,Q){const ve=c.explicitOrderBy;if(U.length>ve.length)throw new Ot(Qe.INVALID_ARGUMENT,`Too many arguments provided to ${N}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let ft=0;ft<U.length;ft++){const Gt=U[ft];if(ve[ft].field.isKeyField()){if("string"!=typeof Gt)throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${N}(), but got a ${typeof Gt}`);if(!d(c)&&-1!==Gt.indexOf("/"))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${N}() must be a plain document ID, but '${Gt}' contains a slash.`);const hn=c.path.child(Sn.fromString(Gt));if(!Qt.isDocumentKey(hn))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${N}() must result in a valid document path, but '${hn}' is not because it contains an odd number of segments.`);const mn=new Qt(hn);Ge.push(Ra(f,mn))}else{const hn=_f(D,N,Gt);Ge.push(hn)}}return new ns(Ge,Q)}(i._query,i.firestore._databaseId,a,e,t,s)}}function qm(i,e,t){if("string"==typeof(t=(0,he.m9)(t))){if(""===t)throw new Ot(Qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d(e)&&-1!==t.indexOf("/"))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Sn.fromString(t));if(!Qt.isDocumentKey(s))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ra(i,new Qt(s))}if(t instanceof Ai)return Ra(i,t._key);throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function Zm(i,e){if(!Array.isArray(i)||0===i.length)throw new Ot(Qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ym(i,e){if(e.isInequality()){const s=v(i),a=e.field;if(null!==s&&!s.isEqual(a))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const c=Ac(i);null!==c&&Qm(0,a,c)}const t=function(s,a){for(const c of s)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ot(Qe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qm(i,e,t){if(!t.isEqual(e))throw new Ot(Qe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sg{convertValue(e,t="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wa(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new yf(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Fu(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Sn.fromString(e);gn(Gf(s));const a=new Yo(s.get(1),s.get(3)),c=new Qt(s.popFirst(5));return a.isEqual(t)||Ir(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Cf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class zv extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ai(this.firestore,null,t)}}class wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends eh{constructor(e,t,s,a,c,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class sh extends Ic{data(e={}){return super.data(e)}}class Dc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new wc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ot(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new wc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const D=new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new wc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let N=-1,U=-1;return 0!==f.type&&(N=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),U=c.indexOf(f.doc.key)),{type:Kv(f.type),doc:D,oldIndex:N,newIndex:U}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}function Xm(i,e){return i instanceof Ic&&e instanceof Ic?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Dc&&e instanceof Dc&&i._firestore===e._firestore&&Zd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ey(i){i=xr(i,Ai);const e=xr(i.firestore,Si);return yc(zi(e),i._key).then(t=>ly(e,i,t))}class Ju extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ai(this.firestore,null,t)}}function ty(i){i=xr(i,Ai);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return function Yc(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(s=(0,p.Z)(function*(a,c,f){try{const D=yield function(N,U){const Q=Yt(N);return Q.persistence.runTransaction("read document","readonly",ve=>Q.localDocuments.getDocument(ve,U))}(a,c);D.isFoundDocument()?f.resolve(D):D.isNoDocument()?f.resolve(null):f.reject(new Ot(Qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const N=cc(D,`Failed to get document '${c} from cache`);f.reject(N)}}),function(a,c,f){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._key).then(a=>new Ic(e,s,i._key,a,new wc(null!==a&&a.hasLocalMutations,!0),i.converter))}function ny(i){i=xr(i,Ai);const e=xr(i.firestore,Si);return yc(zi(e),i._key,{source:"server"}).then(t=>ly(e,i,t))}function ry(i){i=xr(i,Rs);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return wf(i._query),Hp(t,i._query).then(a=>new Dc(e,s,i,a))}function iy(i){i=xr(i,Rs);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return function gm(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(s=(0,p.Z)(function*(a,c,f){try{const D=yield Rd(a,c,!0),N=new um(c,D.ir),U=N.sc(D.documents),Q=N.applyChanges(U,!1);f.resolve(Q.snapshot)}catch(D){const N=cc(D,`Failed to execute query '${c} against cache`);f.reject(N)}}),function(a,c,f){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._query).then(a=>new Dc(e,s,i,a))}function sy(i){i=xr(i,Rs);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return Hp(t,i._query,{source:"server"}).then(a=>new Dc(e,s,i,a))}function oy(i,e,t){i=xr(i,Ai);const s=xr(i.firestore,Si),a=Cf(i.converter,e,t);return nu(s,[Qd(Rl(s),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,Ti.none())])}function ay(i,e,t,...s){i=xr(i,Ai);const a=xr(i.firestore,Si),c=Rl(a);let f;return f="string"==typeof(e=(0,he.m9)(e))||e instanceof Ml?vf(c,"updateDoc",i._key,e,t,s):Vm(c,"updateDoc",i._key,e),nu(a,[f.toMutation(i._key,Ti.exists(!0))])}function uy(i){return nu(xr(i.firestore,Si),[new gl(i._key,Ti.none())])}function Cc(i,e){const t=xr(i.firestore,Si),s=Zp(i),a=Cf(i.converter,e);return nu(t,[Qd(Rl(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,Ti.exists(!1))]).then(()=>s)}function qv(i,...e){var t,s,a;i=(0,he.m9)(i);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||mf(e[f])||(c=e[f],f++);const D={includeMetadataChanges:c.includeMetadataChanges};if(mf(e[f])){const ve=e[f];e[f]=null===(t=ve.next)||void 0===t?void 0:t.bind(ve),e[f+1]=null===(s=ve.error)||void 0===s?void 0:s.bind(ve),e[f+2]=null===(a=ve.complete)||void 0===a?void 0:a.bind(ve)}let N,U,Q;if(i instanceof Ai)U=xr(i.firestore,Si),Q=Bu(i._key.path),N={next:ve=>{e[f]&&e[f](ly(U,i,ve))},error:e[f+1],complete:e[f+2]};else{const ve=xr(i,Rs);U=xr(ve.firestore,Si),Q=ve._query;const Ge=new Ju(U);N={next:ft=>{e[f]&&e[f](new Dc(U,Ge,ve,ft))},error:e[f+1],complete:e[f+2]},wf(i._query)}return function(ve,Ge,ft,Gt){const hn=new lf(Gt),mn=new No(Ge,hn,ft);return ve.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return nm(yield eu(ve),mn)})),()=>{hn.Dc(),ve.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Yh(yield eu(ve),mn)}))}}(zi(U),Q,D,N)}function Zv(i,e){return function mm(i,e){const t=new lf(e);return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return s=yield eu(i),a=t,Yt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return s=yield eu(i),a=t,void Yt(s).ku.delete(a);var s,a}))}}(zi(i=xr(i,Si)),mf(e)?e:{next:e})}function nu(i,e){return function(t,s){const a=new ri;return t.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Tv(i,e,t){return Fa.apply(this,arguments)}(yield Al(t),s,a)})),a.promise}(zi(i),e)}function ly(i,e,t){const s=t.docs.get(e._key),a=new Ju(i);return new Ic(i,a,e._key,s,new wc(t.hasPendingWrites,t.fromCache),e.converter)}const _0={maxAttempts:5};class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rl(e)}set(e,t,s){this._verifyNotCommitted();const a=Xu(e,this._firestore),c=Cf(a.converter,t,s),f=Qd(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(f.toMutation(a._key,Ti.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=Xu(e,this._firestore);let f;return f="string"==typeof(t=(0,he.m9)(t))||t instanceof Ml?vf(this._dataReader,"WriteBatch.update",c._key,t,s,a):Vm(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,Ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xu(e,this._firestore);return this._mutations=this._mutations.concat(new gl(t._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ot(Qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xu(i,e){if((i=(0,he.m9)(i)).firestore!==e)throw new Ot(Qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rl(e)}get(e){const t=Xu(e,this._firestore),s=new zv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return sn();const c=a[0];if(c.isFoundDocument())return new eh(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new eh(this._firestore,s,t._key,null,t.converter);throw sn()})}set(e,t,s){const a=Xu(e,this._firestore),c=Cf(a.converter,t,s),f=Qd(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,f),this}update(e,t,s,...a){const c=Xu(e,this._firestore);let f;return f="string"==typeof(t=(0,he.m9)(t))||t instanceof Ml?vf(this._dataReader,"Transaction.update",c._key,t,s,a):Vm(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=Xu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xu(e,this._firestore),s=new Ju(this._firestore);return super.get(e).then(a=>new Ic(this._firestore,s,t._key,a._document,new wc(!1,!1),t.converter))}}function fy(i,e,t){i=xr(i,Si);const s=Object.assign(Object.assign({},_0),t);return function(a){if(a.maxAttempts<1)throw new Ot(Qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,c,f){const D=new ri;return a.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const N=yield function mc(i){return Du(i).then(e=>e.datastore)}(a);new a0(a.asyncQueue,N,f,c,D).run()})),D.promise}(zi(i),a=>e(new Qv(i,a)),s)}function py(){return new bu("deleteField")}function gy(){return new eg("serverTimestamp")}function my(...i){return new Fm("arrayUnion",i)}function Jv(...i){return new Hv("arrayRemove",i)}function Xv(i){return new Lm("increment",i)}!function(i,e=!0){Sr=F.SDK_VERSION,(0,F._registerComponent)(new B.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const c=t.getProvider("app").getImmediate(),f=new Si(new tl(t.getProvider("auth-internal")),new Nl(t.getProvider("app-check-internal")),function(D,N){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Ot(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(D.options.projectId,N)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(wr,"3.13.0",i),(0,F.registerVersion)(wr,"3.13.0","esm2017")}()},2090:(Ht,Le,R)=>{R.d(Le,{$s:()=>G,BH:()=>it,G6:()=>Ke,L:()=>Fe,LL:()=>Zt,Pz:()=>rt,Sg:()=>Et,UG:()=>_t,US:()=>Ie,ZB:()=>Ee,ZR:()=>vt,aH:()=>ge,b$:()=>Wt,eu:()=>Je,hl:()=>je,jU:()=>en,m9:()=>At,ne:()=>pe,pd:()=>qn,r3:()=>$n,ru:()=>Tt,tV:()=>te,uI:()=>Ce,vZ:()=>Rn,w1:()=>nr,xO:()=>Br,xb:()=>_r,z$:()=>ht,zI:()=>pt,zd:()=>Bn});const ce=function(le){const ae=[];let Y=0;for(let K=0;K<le.length;K++){let H=le.charCodeAt(K);H<128?ae[Y++]=H:H<2048?(ae[Y++]=H>>6|192,ae[Y++]=63&H|128):55296==(64512&H)&&K+1<le.length&&56320==(64512&le.charCodeAt(K+1))?(H=65536+((1023&H)<<10)+(1023&le.charCodeAt(++K)),ae[Y++]=H>>18|240,ae[Y++]=H>>12&63|128,ae[Y++]=H>>6&63|128,ae[Y++]=63&H|128):(ae[Y++]=H>>12|224,ae[Y++]=H>>6&63|128,ae[Y++]=63&H|128)}return ae},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(le,ae){if(!Array.isArray(le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let H=0;H<le.length;H+=3){const Te=le[H],dt=H+1<le.length,$t=dt?le[H+1]:0,an=H+2<le.length,re=an?le[H+2]:0;let Pe=(15&$t)<<2|re>>6,He=63&re;an||(He=64,dt||(Pe=64)),K.push(Y[Te>>2],Y[(3&Te)<<4|$t>>4],Y[Pe],Y[He])}return K.join("")},encodeString(le,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(le):this.encodeByteArray(ce(le),ae)},decodeString(le,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(le):function(le){const ae=[];let Y=0,K=0;for(;Y<le.length;){const H=le[Y++];if(H<128)ae[K++]=String.fromCharCode(H);else if(H>191&&H<224){const Te=le[Y++];ae[K++]=String.fromCharCode((31&H)<<6|63&Te)}else if(H>239&&H<365){const an=((7&H)<<18|(63&le[Y++])<<12|(63&le[Y++])<<6|63&le[Y++])-65536;ae[K++]=String.fromCharCode(55296+(an>>10)),ae[K++]=String.fromCharCode(56320+(1023&an))}else{const Te=le[Y++],dt=le[Y++];ae[K++]=String.fromCharCode((15&H)<<12|(63&Te)<<6|63&dt)}}return ae.join("")}(this.decodeStringToByteArray(le,ae))},decodeStringToByteArray(le,ae){this.init_();const Y=ae?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let H=0;H<le.length;){const Te=Y[le.charAt(H++)],$t=H<le.length?Y[le.charAt(H)]:0;++H;const re=H<le.length?Y[le.charAt(H)]:64;++H;const X=H<le.length?Y[le.charAt(H)]:64;if(++H,null==Te||null==$t||null==re||null==X)throw new De;K.push(Te<<2|$t>>4),64!==re&&(K.push($t<<4&240|re>>2),64!==X&&K.push(re<<6&192|X))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let le=0;le<this.ENCODED_VALS.length;le++)this.byteToCharMap_[le]=this.ENCODED_VALS.charAt(le),this.charToByteMap_[this.byteToCharMap_[le]]=le,this.byteToCharMapWebSafe_[le]=this.ENCODED_VALS_WEBSAFE.charAt(le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[le]]=le,le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(le)]=le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(le)]=le)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(le){return function(le){const ae=ce(le);return Ie.encodeByteArray(ae,!0)}(le).replace(/\./g,"")},te=function(le){try{return Ie.decodeString(le,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function Ee(le,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===le&&(le={});break;case Array:le=[];break;default:return ae}for(const Y in ae)!ae.hasOwnProperty(Y)||!Dt(Y)||(le[Y]=Ee(le[Y],ae[Y]));return le}function Dt(le){return"__proto__"!==le}const Re=()=>{try{return function at(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const le=process.env.__FIREBASE_DEFAULTS__;return le?JSON.parse(le):void 0})()||(()=>{if(typeof document>"u")return;let le;try{le=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ae=le&&te(le[1]);return ae&&JSON.parse(ae)})()}catch(le){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${le}`)}},ge=()=>{var le;return null===(le=Re())||void 0===le?void 0:le.config},rt=le=>{var ae;return null===(ae=Re())||void 0===ae?void 0:ae[`_${le}`]};class it{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,Y)=>{this.resolve=ae,this.reject=Y})}wrapCallback(ae){return(Y,K)=>{Y?this.reject(Y):this.resolve(K),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(Y):ae(Y,K))}}}function Et(le,ae){if(le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=ae||"demo-project",H=le.iat||0,Te=le.sub||le.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dt=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:H,exp:H+3600,auth_time:H,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},le);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(dt)),""].join(".")}function ht(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function _t(){var le;const ae=null===(le=Re())||void 0===le?void 0:le.forceEnvironment;if("node"===ae)return!0;if("browser"===ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function en(){return"object"==typeof self&&self.self===self}function Tt(){const le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof le&&void 0!==le.id}function Wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nr(){const le=ht();return le.indexOf("MSIE ")>=0||le.indexOf("Trident/")>=0}function Ke(){return!_t()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){try{return"object"==typeof indexedDB}catch{return!1}}function Je(){return new Promise((le,ae)=>{try{let Y=!0;const K="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(K);H.onsuccess=()=>{H.result.close(),Y||self.indexedDB.deleteDatabase(K),le(!0)},H.onupgradeneeded=()=>{Y=!1},H.onerror=()=>{var Te;ae((null===(Te=H.error)||void 0===Te?void 0:Te.message)||"")}}catch(Y){ae(Y)}})}function pt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class vt extends Error{constructor(ae,Y,K){super(Y),this.code=ae,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(ae,Y,K){this.service=ae,this.serviceName=Y,this.errors=K}create(ae,...Y){const K=Y[0]||{},H=`${this.service}/${ae}`,Te=this.errors[ae],dt=Te?function kt(le,ae){return le.replace(tn,(Y,K)=>{const H=ae[K];return null!=H?String(H):`<${K}?>`})}(Te,K):"Error";return new vt(H,`${this.serviceName}: ${dt} (${H}).`,K)}}const tn=/\{\$([^}]+)}/g;function $n(le,ae){return Object.prototype.hasOwnProperty.call(le,ae)}function _r(le){for(const ae in le)if(Object.prototype.hasOwnProperty.call(le,ae))return!1;return!0}function Rn(le,ae){if(le===ae)return!0;const Y=Object.keys(le),K=Object.keys(ae);for(const H of Y){if(!K.includes(H))return!1;const Te=le[H],dt=ae[H];if(Un(Te)&&Un(dt)){if(!Rn(Te,dt))return!1}else if(Te!==dt)return!1}for(const H of K)if(!Y.includes(H))return!1;return!0}function Un(le){return null!==le&&"object"==typeof le}function Br(le){const ae=[];for(const[Y,K]of Object.entries(le))Array.isArray(K)?K.forEach(H=>{ae.push(encodeURIComponent(Y)+"="+encodeURIComponent(H))}):ae.push(encodeURIComponent(Y)+"="+encodeURIComponent(K));return ae.length?"&"+ae.join("&"):""}function Bn(le){const ae={};return le.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[H,Te]=K.split("=");ae[decodeURIComponent(H)]=decodeURIComponent(Te)}}),ae}function qn(le){const ae=le.indexOf("?");if(!ae)return"";const Y=le.indexOf("#",ae);return le.substring(ae,Y>0?Y:void 0)}function pe(le,ae){const Y=new de(le,ae);return Y.subscribe.bind(Y)}class de{constructor(ae,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{ae(this)}).catch(K=>{this.error(K)})}next(ae){this.forEachObserver(Y=>{Y.next(ae)})}error(ae){this.forEachObserver(Y=>{Y.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,Y,K){let H;if(void 0===ae&&void 0===Y&&void 0===K)throw new Error("Missing Observer.");H=function ot(le,ae){if("object"!=typeof le||null===le)return!1;for(const Y of ae)if(Y in le&&"function"==typeof le[Y])return!0;return!1}(ae,["next","error","complete"])?ae:{next:ae,error:Y,complete:K},void 0===H.next&&(H.next=rn),void 0===H.error&&(H.error=rn),void 0===H.complete&&(H.complete=rn);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),Te}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,ae)}sendOne(ae,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{Y(this.observers[ae])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function G(le,ae=1e3,Y=2){const K=ae*Math.pow(Y,le),H=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+H)}function At(le){return le&&le._delegate?le._delegate:le}},3651:(Ht,Le,R)=>{R.d(Le,{e:()=>Rt});var p=R(5861),F=R(1389),De=(R(2090),R(6881),R(1877),R(4859),R(3900)),ee=R(9646),Fe=R(5698),te=R(8505),fe=R(4004),Ee=R(4650),Dt=R(1205),at=R(33),tt=R(2827);let Rt=(()=>{class qe{constructor(Pt,yt,ge,rt){this.afAuth=Pt,this.afs=yt,this.router=ge,this.ngZone=rt,this.username="Anonimo",this.user$=this.afAuth.authState.pipe((0,De.w)(it=>it?this.afs.doc(`users/${it.uid}`).valueChanges():(0,ee.of)(null)),(0,Fe.q)(1))}isLoggedIn(){var Pt=!1;return this.user$.pipe((0,Fe.q)(1),(0,te.b)(yt=>this.username=yt?.displayName),(0,fe.U)(yt=>!!yt),(0,te.b)(yt=>{yt&&(Pt=!0)})),Pt}googleSignin(){var Pt=this;return(0,p.Z)(function*(){const yt=yield Pt.afAuth.signInWithPopup(new F.V);return yt.user&&Pt.router.navigate(["/home"]),Pt.updateUserData(yt.user)})()}GoogleAuth(){return this.AuthLogin(new F.V)}AuthLogin(Pt){var yt=this;return(0,p.Z)(function*(){return yt.afAuth.signInWithPopup(Pt).then(ge=>{console.log("You have been successfully logged in!")}).catch(ge=>{console.log(ge)})})()}updateUserData(Pt){return this.afs.doc(`users/${Pt.uid}`).set({uid:Pt.uid,email:Pt.email,displayName:Pt.displayName},{merge:!0})}signOut(){var Pt=this;return(0,p.Z)(function*(){Pt.username="Anonimo",yield Pt.afAuth.signOut(),Pt.router.navigate(["/login"])})()}}return qe.\u0275fac=function(Pt){return new(Pt||qe)(Ee.LFG(Dt.zQ),Ee.LFG(at.ST),Ee.LFG(tt.F0),Ee.LFG(Ee.R0b))},qe.\u0275prov=Ee.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})()},4466:(Ht,Le,R)=>{R.d(Le,{m:()=>ce});var p=R(6895),F=R(4006),B=R(4650);let ce=(()=>{class he{}return he.\u0275fac=function(De){return new(De||he)},he.\u0275mod=B.oAB({type:he}),he.\u0275inj=B.cJS({imports:[p.ez,F.u5,F.UX,F.u5]}),he})()},2445:(Ht,Le,R)=>{var p=R(1481),F=R(4650),B=R(2827),ce=R(5698),he=R(4004),Ie=R(8505),De=R(3651);let ee=(()=>{class we{constructor(et,jt){this.auth=et,this.router=jt}canActivate(et,jt){return this.auth.user$.pipe((0,ce.q)(1),(0,he.U)(xe=>!!xe),(0,Ie.b)(xe=>{xe||(console.log("access denied"),this.router.navigate(["/login"]))}))}}return we.\u0275fac=function(et){return new(et||we)(F.LFG(De.e),F.LFG(B.F0))},we.\u0275prov=F.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const te=[{path:"clients",loadChildren:()=>Promise.all([R.e(901),R.e(737)]).then(R.bind(R,1737)).then(we=>we.ClientModule),canActivate:[ee]},{path:"materials",loadChildren:()=>Promise.all([R.e(901),R.e(282),R.e(434)]).then(R.bind(R,2434)).then(we=>we.MaterialModule),canActivate:[ee]},{path:"products",loadChildren:()=>Promise.all([R.e(901),R.e(592),R.e(596)]).then(R.bind(R,2596)).then(we=>we.ProductModule),canActivate:[ee]},{path:"orders",loadChildren:()=>Promise.all([R.e(901),R.e(282),R.e(592),R.e(227)]).then(R.bind(R,4227)).then(we=>we.OrdersModule),canActivate:[ee]},{path:"shop",loadChildren:()=>Promise.all([R.e(901),R.e(282),R.e(592),R.e(117)]).then(R.bind(R,9117)).then(we=>we.ShoppingModule),canActivate:[ee]},{path:"history",loadChildren:()=>Promise.all([R.e(901),R.e(72)]).then(R.bind(R,2072)).then(we=>we.HistoryModule),canActivate:[ee]},{path:"login",component:(()=>{class we{constructor(et){this.authService=et}ngOnInit(){}authenticate(){this.authService.googleSignin()}}return we.\u0275fac=function(et){return new(et||we)(F.Y36(De.e))},we.\u0275cmp=F.Xpm({type:we,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"d-flex","text-center","text-bg-dark","h-100",2,"background-image","url(assets/img/bg.png)"],[1,"d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"my-auto"],["type","button",1,"btn","btn-lg","btn-outline-light","fw-bold","border-white","rounded-pill",3,"click"],[1,"ms-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"]],template:function(et,jt){1&et&&(F.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),F._uU(4," IBM Furniture"),F.qZA(),F.TgZ(5,"button",3),F.NdJ("click",function(){return jt.authenticate()}),F._uU(6," Iniciar Sesion con Google "),F.TgZ(7,"span",4),F.O4$(),F.TgZ(8,"svg",5),F._UZ(9,"path",6),F.qZA()()()()()())}}),we})()},{path:"",redirectTo:"orders",pathMatch:"full"}];let fe=(()=>{class we{}return we.\u0275fac=function(et){return new(et||we)},we.\u0275mod=F.oAB({type:we}),we.\u0275inj=F.cJS({imports:[B.Bz.forRoot(te),B.Bz]}),we})();var Ee=R(2011),Dt=R(33);let at=(()=>{class we{constructor(et){this.auth=et,this.signOut=()=>this.auth.signOut()}ngOnInit(){}}return we.\u0275fac=function(et){return new(et||we)(F.Y36(De.e))},we.\u0275cmp=F.Xpm({type:we,selectors:[["app-navbar"]],decls:33,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","orders",1,"navbar-brand"],["height","30","src","/assets/img/ibmFurniture_logo.png","alt","ibmFurniture_logo","srcset","",1,"rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","products",1,"nav-link"],["routerLink","clients",1,"nav-link"],["routerLink","materials",1,"nav-link"],["routerLink","orders",1,"nav-link"],["routerLink","shop",1,"nav-link"],["routerLink","history",1,"nav-link"],[1,"navbar-nav"],[1,"fs-3","nav-link","me-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"]],template:function(et,jt){1&et&&(F.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),F._UZ(3,"img",3),F._uU(4," IBM Furniture "),F.qZA(),F.TgZ(5,"button",4),F._UZ(6,"span",5),F.qZA(),F.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),F._uU(11,"Productos"),F.qZA()(),F.TgZ(12,"li",8)(13,"a",10),F._uU(14,"Clientes"),F.qZA()(),F.TgZ(15,"li",8)(16,"a",11),F._uU(17,"Materiales"),F.qZA()(),F.TgZ(18,"li",8)(19,"a",12),F._uU(20,"Ordenes"),F.qZA()(),F.TgZ(21,"li",8)(22,"a",13),F._uU(23,"Compras"),F.qZA()(),F.TgZ(24,"li",8)(25,"a",14),F._uU(26,"Historial"),F.qZA()()(),F.TgZ(27,"ul",15)(28,"li",8)(29,"a",16),F.NdJ("click",function(){return jt.signOut()}),F.O4$(),F.TgZ(30,"svg",17),F._UZ(31,"path",18)(32,"path",19),F.qZA()()()()()()())},dependencies:[B.yS]}),we})(),tt=(()=>{class we{constructor(et){this.auth=et,this.title="IBMFurniture"}}return we.\u0275fac=function(et){return new(et||we)(F.Y36(De.e))},we.\u0275cmp=F.Xpm({type:we,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"vh-100"]],template:function(et,jt){1&et&&(F._UZ(0,"app-navbar"),F.TgZ(1,"div",0),F._UZ(2,"router-outlet"),F.qZA())},dependencies:[B.lC,at]}),we})();const Rt_firebase={apiKey:"AIzaSyCmya1htVh_wLXOc0zUSpurtnKYROqfSoU",authDomain:"ibmfurniture.firebaseapp.com",projectId:"ibmfurniture",storageBucket:"ibmfurniture.appspot.com",messagingSenderId:"313012116484",appId:"1:313012116484:web:1b535bfdb657c90b742951"};var qe=R(4466),Re=R(529),Pt=R(6895),yt=R(9770),ge=R(2843),rt=R(8421),it=R(9751),Et=R(5577),ht=R(1144),Ce=R(576),_t=R(3268);const en=["addListener","removeListener"],Tt=["addEventListener","removeEventListener"],Wt=["on","off"];function Vt(we,Ye,et,jt){if((0,Ce.m)(et)&&(jt=et,et=void 0),jt)return Vt(we,Ye,et).pipe((0,_t.Z)(jt));const[xe,G]=function Ke(we){return(0,Ce.m)(we.addEventListener)&&(0,Ce.m)(we.removeEventListener)}(we)?Tt.map(ie=>Be=>we[ie](Ye,Be,et)):function Ue(we){return(0,Ce.m)(we.addListener)&&(0,Ce.m)(we.removeListener)}(we)?en.map(nr(we,Ye)):function Ve(we){return(0,Ce.m)(we.on)&&(0,Ce.m)(we.off)}(we)?Wt.map(nr(we,Ye)):[];if(!xe&&(0,ht.z)(we))return(0,Et.z)(ie=>Vt(ie,Ye,et))((0,rt.Xf)(we));if(!xe)throw new TypeError("Invalid event target");return new it.y(ie=>{const Be=(...At)=>ie.next(1<At.length?At:At[0]);return xe(Be),()=>G(Be)})}function nr(we,Ye){return et=>jt=>we[et](Ye,jt)}var je=R(9646),Je=R(1350),pt=R(7579),Ct=R(5032);const vt=new it.y(Ct.Z);var kt=R(6451),tn=R(9300),un=R(3900),vn=R(4033),Fn=R(4482);const Xt={connector:()=>new pt.x};function fn(we,Ye=Xt){const{connector:et}=Ye;return(0,Fn.e)((jt,xe)=>{const G=et();(0,rt.Xf)(we(function ar(we){return new it.y(Ye=>we.subscribe(Ye))}(G))).subscribe(xe),xe.add(jt.subscribe(G))})}var br=R(4986),_r=R(5403),Rn=R(9718);function Un(we,Ye){return Ye?et=>(0,Je.z)(Ye.pipe((0,ce.q)(1),function xt(){return(0,Fn.e)((we,Ye)=>{we.subscribe((0,_r.x)(Ye,Ct.Z))})}()),et.pipe(Un(we))):(0,Et.z)((et,jt)=>we(et,jt).pipe((0,ce.q)(1),(0,Rn.h)(et)))}var ur=R(3532);const Ze="Service workers are disabled or not supported by this browser";class de{constructor(Ye){if(this.serviceWorker=Ye,Ye){const jt=Vt(Ye,"controllerchange").pipe((0,he.U)(()=>Ye.controller)),xe=(0,yt.P)(()=>(0,je.of)(Ye.controller)),G=(0,Je.z)(xe,jt);this.worker=G.pipe((0,tn.h)(ae=>!!ae)),this.registration=this.worker.pipe((0,un.w)(()=>Ye.getRegistration()));const le=Vt(Ye,"message").pipe((0,he.U)(ae=>ae.data)).pipe((0,tn.h)(ae=>ae&&ae.type)).pipe(function $n(we){return we?Ye=>fn(we)(Ye):Ye=>function Pn(we,Ye){const et=(0,Ce.m)(we)?we:()=>we;return(0,Ce.m)(Ye)?fn(Ye,{connector:et}):jt=>new vn.c(jt,et)}(new pt.x)(Ye)}());le.connect(),this.events=le}else this.worker=this.events=this.registration=function pe(we){return(0,yt.P)(()=>(0,ge._)(new Error(we)))}(Ze)}postMessage(Ye,et){return this.worker.pipe((0,ce.q)(1),(0,Ie.b)(jt=>{jt.postMessage({action:Ye,...et})})).toPromise().then(()=>{})}postMessageWithOperation(Ye,et,jt){const xe=this.waitForOperationCompleted(jt),G=this.postMessage(Ye,et);return Promise.all([G,xe]).then(([,ie])=>ie)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(Ye){let et;return et="string"==typeof Ye?jt=>jt.type===Ye:jt=>Ye.includes(jt.type),this.events.pipe((0,tn.h)(et))}nextEventOfType(Ye){return this.eventsOfType(Ye).pipe((0,ce.q)(1))}waitForOperationCompleted(Ye){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,tn.h)(et=>et.nonce===Ye),(0,ce.q)(1),(0,he.U)(et=>{if(void 0!==et.result)return et.result;throw new Error(et.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Xe=(()=>{class we{constructor(et){if(this.sw=et,this.subscriptionChanges=new pt.x,!et.isEnabled)return this.messages=vt,this.notificationClicks=vt,void(this.subscription=vt);this.messages=this.sw.eventsOfType("PUSH").pipe((0,he.U)(xe=>xe.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,he.U)(xe=>xe.data)),this.pushManager=this.sw.registration.pipe((0,he.U)(xe=>xe.pushManager));const jt=this.pushManager.pipe((0,un.w)(xe=>xe.getSubscription()));this.subscription=(0,kt.T)(jt,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(et){if(!this.sw.isEnabled)return Promise.reject(new Error(Ze));const jt={userVisibleOnly:!0};let xe=this.decodeBase64(et.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),G=new Uint8Array(new ArrayBuffer(xe.length));for(let ie=0;ie<xe.length;ie++)G[ie]=xe.charCodeAt(ie);return jt.applicationServerKey=G,this.pushManager.pipe((0,un.w)(ie=>ie.subscribe(jt)),(0,ce.q)(1)).toPromise().then(ie=>(this.subscriptionChanges.next(ie),ie))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,ce.q)(1),(0,un.w)(jt=>{if(null===jt)throw new Error("Not subscribed to push notifications.");return jt.unsubscribe().then(xe=>{if(!xe)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Ze))}decodeBase64(et){return atob(et)}}return we.\u0275fac=function(et){return new(et||we)(F.LFG(de))},we.\u0275prov=F.Yz7({token:we,factory:we.\u0275fac}),we})(),ot=(()=>{class we{constructor(et){if(this.sw=et,!et.isEnabled)return this.versionUpdates=vt,this.available=vt,this.activated=vt,void(this.unrecoverable=vt);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,tn.h)(jt=>"VERSION_READY"===jt.type),(0,he.U)(jt=>({type:"UPDATE_AVAILABLE",current:jt.currentVersion,available:jt.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ze));const et=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:et},et)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ze));const et=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:et},et)}}return we.\u0275fac=function(et){return new(et||we)(F.LFG(de))},we.\u0275prov=F.Yz7({token:we,factory:we.\u0275fac}),we})();class rn{}const yn=new F.OlP("NGSW_REGISTER_SCRIPT");function Tn(we,Ye,et,jt){return()=>{if(!(0,Pt.NF)(jt)||!("serviceWorker"in navigator)||!1===et.enabled)return;let xe;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof et.registrationStrategy)xe=et.registrationStrategy();else{const[ie,...Be]=(et.registrationStrategy||"registerWhenStable:30000").split(":");switch(ie){case"registerImmediately":xe=(0,je.of)(null);break;case"registerWithDelay":xe=Nt(+Be[0]||0);break;case"registerWhenStable":xe=Be[0]?(0,kt.T)(Nn(we),Nt(+Be[0])):Nn(we);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${et.registrationStrategy}`)}}we.get(F.R0b).runOutsideAngular(()=>xe.pipe((0,ce.q)(1)).subscribe(()=>navigator.serviceWorker.register(Ye,{scope:et.scope}).catch(ie=>console.error("Service worker registration failed with:",ie))))}}function Nt(we){return(0,je.of)(null).pipe(function qn(we,Ye=br.z){const et=function Bn(we=0,Ye,et=br.P){let jt=-1;return null!=Ye&&((0,ur.K)(Ye)?et=Ye:jt=Ye),new it.y(xe=>{let G=function Br(we){return we instanceof Date&&!isNaN(we)}(we)?+we-et.now():we;G<0&&(G=0);let ie=0;return et.schedule(function(){xe.closed||(xe.next(ie++),0<=jt?this.schedule(void 0,jt):xe.complete())},G)})}(we,Ye);return Un(()=>et)}(we))}function Nn(we){return we.get(F.z2F).isStable.pipe((0,tn.h)(et=>et))}function pn(we,Ye){return new de((0,Pt.NF)(Ye)&&!1!==we.enabled?navigator.serviceWorker:void 0)}let rr=(()=>{class we{static register(et,jt={}){return{ngModule:we,providers:[{provide:yn,useValue:et},{provide:rn,useValue:jt},{provide:de,useFactory:pn,deps:[rn,F.Lbi]},{provide:F.ip1,useFactory:Tn,deps:[F.zs3,yn,rn,F.Lbi],multi:!0}]}}}return we.\u0275fac=function(et){return new(et||we)},we.\u0275mod=F.oAB({type:we}),we.\u0275inj=F.cJS({providers:[Xe,ot]}),we})(),Ft=(()=>{class we{}return we.\u0275fac=function(et){return new(et||we)},we.\u0275mod=F.oAB({type:we,bootstrap:[tt]}),we.\u0275inj=F.cJS({imports:[Re.JF,p.b2,fe,Ee.hO.initializeApp(Rt_firebase),Dt.yb,qe.m,rr.register("./ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),we})();(0,F.G48)(),p.q6().bootstrapModule(Ft).catch(we=>console.error(we))},1135:(Ht,Le,R)=>{R.d(Le,{X:()=>F});var p=R(7579);class F extends p.x{constructor(ce){super(),this._value=ce}get value(){return this.getValue()}_subscribe(ce){const he=super._subscribe(ce);return!he.closed&&ce.next(this._value),he}getValue(){const{hasError:ce,thrownError:he,_value:Ie}=this;if(ce)throw he;return this._throwIfClosed(),Ie}next(ce){super.next(this._value=ce)}}},9751:(Ht,Le,R)=>{R.d(Le,{y:()=>ee});var p=R(930),F=R(727),B=R(8822),ce=R(9635),he=R(2416),Ie=R(576),De=R(2806);let ee=(()=>{class Ee{constructor(at){at&&(this._subscribe=at)}lift(at){const tt=new Ee;return tt.source=this,tt.operator=at,tt}subscribe(at,tt,Rt){const qe=function fe(Ee){return Ee&&Ee instanceof p.Lv||function te(Ee){return Ee&&(0,Ie.m)(Ee.next)&&(0,Ie.m)(Ee.error)&&(0,Ie.m)(Ee.complete)}(Ee)&&(0,F.Nn)(Ee)}(at)?at:new p.Hp(at,tt,Rt);return(0,De.x)(()=>{const{operator:Re,source:Pt}=this;qe.add(Re?Re.call(qe,Pt):Pt?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(at){try{return this._subscribe(at)}catch(tt){at.error(tt)}}forEach(at,tt){return new(tt=Fe(tt))((Rt,qe)=>{const Re=new p.Hp({next:Pt=>{try{at(Pt)}catch(yt){qe(yt),Re.unsubscribe()}},error:qe,complete:Rt});this.subscribe(Re)})}_subscribe(at){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(at)}[B.L](){return this}pipe(...at){return(0,ce.U)(at)(this)}toPromise(at){return new(at=Fe(at))((tt,Rt)=>{let qe;this.subscribe(Re=>qe=Re,Re=>Rt(Re),()=>tt(qe))})}}return Ee.create=Dt=>new Ee(Dt),Ee})();function Fe(Ee){var Dt;return null!==(Dt=Ee??he.v.Promise)&&void 0!==Dt?Dt:Promise}},7579:(Ht,Le,R)=>{R.d(Le,{x:()=>De});var p=R(9751),F=R(727);const ce=(0,R(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=R(8737),Ie=R(2806);let De=(()=>{class Fe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const Ee=new ee(this,this);return Ee.operator=fe,Ee}_throwIfClosed(){if(this.closed)throw new ce}next(fe){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ee of this.currentObservers)Ee.next(fe)}})}error(fe){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().error(fe)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:Ee,isStopped:Dt,observers:at}=this;return Ee||Dt?F.Lc:(this.currentObservers=null,at.push(fe),new F.w0(()=>{this.currentObservers=null,(0,he.P)(at,fe)}))}_checkFinalizedStatuses(fe){const{hasError:Ee,thrownError:Dt,isStopped:at}=this;Ee?fe.error(Dt):at&&fe.complete()}asObservable(){const fe=new p.y;return fe.source=this,fe}}return Fe.create=(te,fe)=>new ee(te,fe),Fe})();class ee extends De{constructor(te,fe){super(),this.destination=te,this.source=fe}next(te){var fe,Ee;null===(Ee=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===Ee||Ee.call(fe,te)}error(te){var fe,Ee;null===(Ee=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===Ee||Ee.call(fe,te)}complete(){var te,fe;null===(fe=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===fe||fe.call(te)}_subscribe(te){var fe,Ee;return null!==(Ee=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(te))&&void 0!==Ee?Ee:F.Lc}}},930:(Ht,Le,R)=>{R.d(Le,{Hp:()=>Rt,Lv:()=>Ee});var p=R(576),F=R(727),B=R(2416),ce=R(7849),he=R(5032);const Ie=Fe("C",void 0,void 0);function Fe(ge,rt,it){return{kind:ge,value:rt,error:it}}var te=R(3410),fe=R(2806);class Ee extends F.w0{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,F.Nn)(rt)&&rt.add(this)):this.destination=yt}static create(rt,it,Et){return new Rt(rt,it,Et)}next(rt){this.isStopped?Pt(function ee(ge){return Fe("N",ge,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?Pt(function De(ge){return Fe("E",void 0,ge)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?Pt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Dt=Function.prototype.bind;function at(ge,rt){return Dt.call(ge,rt)}class tt{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:it}=this;if(it.next)try{it.next(rt)}catch(Et){qe(Et)}}error(rt){const{partialObserver:it}=this;if(it.error)try{it.error(rt)}catch(Et){qe(Et)}else qe(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(it){qe(it)}}}class Rt extends Ee{constructor(rt,it,Et){let ht;if(super(),(0,p.m)(rt)||!rt)ht={next:rt??void 0,error:it??void 0,complete:Et??void 0};else{let Ce;this&&B.v.useDeprecatedNextContext?(Ce=Object.create(rt),Ce.unsubscribe=()=>this.unsubscribe(),ht={next:rt.next&&at(rt.next,Ce),error:rt.error&&at(rt.error,Ce),complete:rt.complete&&at(rt.complete,Ce)}):ht=rt}this.destination=new tt(ht)}}function qe(ge){B.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(ge):(0,ce.h)(ge)}function Pt(ge,rt){const{onStoppedNotification:it}=B.v;it&&te.z.setTimeout(()=>it(ge,rt))}const yt={closed:!0,next:he.Z,error:function Re(ge){throw ge},complete:he.Z}},727:(Ht,Le,R)=>{R.d(Le,{Lc:()=>Ie,w0:()=>he,Nn:()=>De});var p=R(576);const B=(0,R(3888).d)(Fe=>function(fe){Fe(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((Ee,Dt)=>`${Dt+1}) ${Ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var ce=R(8737);class he{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const at of fe)at.remove(this);else fe.remove(this);const{initialTeardown:Ee}=this;if((0,p.m)(Ee))try{Ee()}catch(at){te=at instanceof B?at.errors:[at]}const{_finalizers:Dt}=this;if(Dt){this._finalizers=null;for(const at of Dt)try{ee(at)}catch(tt){te=te??[],tt instanceof B?te=[...te,...tt.errors]:te.push(tt)}}if(te)throw new B(te)}}add(te){var fe;if(te&&te!==this)if(this.closed)ee(te);else{if(te instanceof he){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(te)}}_hasParent(te){const{_parentage:fe}=this;return fe===te||Array.isArray(fe)&&fe.includes(te)}_addParent(te){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(te),fe):fe?[fe,te]:te}_removeParent(te){const{_parentage:fe}=this;fe===te?this._parentage=null:Array.isArray(fe)&&(0,ce.P)(fe,te)}remove(te){const{_finalizers:fe}=this;fe&&(0,ce.P)(fe,te),te instanceof he&&te._removeParent(this)}}he.EMPTY=(()=>{const Fe=new he;return Fe.closed=!0,Fe})();const Ie=he.EMPTY;function De(Fe){return Fe instanceof he||Fe&&"closed"in Fe&&(0,p.m)(Fe.remove)&&(0,p.m)(Fe.add)&&(0,p.m)(Fe.unsubscribe)}function ee(Fe){(0,p.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(Ht,Le,R)=>{R.d(Le,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Ht,Le,R)=>{R.d(Le,{c:()=>Ie});var p=R(9751),F=R(727),B=R(8343),ce=R(5403),he=R(4482);class Ie extends p.y{constructor(ee,Fe){super(),this.source=ee,this.subjectFactory=Fe,this._subject=null,this._refCount=0,this._connection=null,(0,he.A)(ee)&&(this.lift=ee.lift)}_subscribe(ee){return this.getSubject().subscribe(ee)}getSubject(){const ee=this._subject;return(!ee||ee.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ee}=this;this._subject=this._connection=null,ee?.unsubscribe()}connect(){let ee=this._connection;if(!ee){ee=this._connection=new F.w0;const Fe=this.getSubject();ee.add(this.source.subscribe((0,ce.x)(Fe,void 0,()=>{this._teardown(),Fe.complete()},te=>{this._teardown(),Fe.error(te)},()=>this._teardown()))),ee.closed&&(this._connection=null,ee=F.w0.EMPTY)}return ee}refCount(){return(0,B.x)()(this)}}},1350:(Ht,Le,R)=>{R.d(Le,{z:()=>ce});var p=R(7886),F=R(3269),B=R(8996);function ce(...he){return(0,p.u)()((0,B.D)(he,(0,F.yG)(he)))}},9770:(Ht,Le,R)=>{R.d(Le,{P:()=>B});var p=R(9751),F=R(8421);function B(ce){return new p.y(he=>{(0,F.Xf)(ce()).subscribe(he)})}},515:(Ht,Le,R)=>{R.d(Le,{E:()=>F});const F=new(R(9751).y)(he=>he.complete())},4128:(Ht,Le,R)=>{R.d(Le,{D:()=>ee});var p=R(9751),F=R(4742),B=R(8421),ce=R(3269),he=R(5403),Ie=R(3268),De=R(1810);function ee(...Fe){const te=(0,ce.jO)(Fe),{args:fe,keys:Ee}=(0,F.D)(Fe),Dt=new p.y(at=>{const{length:tt}=fe;if(!tt)return void at.complete();const Rt=new Array(tt);let qe=tt,Re=tt;for(let Pt=0;Pt<tt;Pt++){let yt=!1;(0,B.Xf)(fe[Pt]).subscribe((0,he.x)(at,ge=>{yt||(yt=!0,Re--),Rt[Pt]=ge},()=>qe--,void 0,()=>{(!qe||!yt)&&(Re||at.next(Ee?(0,De.n)(Ee,Rt):Rt),at.complete())}))}});return te?Dt.pipe((0,Ie.Z)(te)):Dt}},8996:(Ht,Le,R)=>{R.d(Le,{D:()=>rt});var p=R(8421),F=R(5363),B=R(9468),Ie=R(9751),ee=R(2202),Fe=R(576),te=R(9672);function Ee(it,Et){if(!it)throw new Error("Iterable cannot be null");return new Ie.y(ht=>{(0,te.f)(ht,Et,()=>{const Ce=it[Symbol.asyncIterator]();(0,te.f)(ht,Et,()=>{Ce.next().then(_t=>{_t.done?ht.complete():ht.next(_t.value)})},0,!0)})})}var Dt=R(3670),at=R(8239),tt=R(1144),Rt=R(6495),qe=R(2206),Re=R(4532),Pt=R(3260);function rt(it,Et){return Et?function ge(it,Et){if(null!=it){if((0,Dt.c)(it))return function ce(it,Et){return(0,p.Xf)(it).pipe((0,B.R)(Et),(0,F.Q)(Et))}(it,Et);if((0,tt.z)(it))return function De(it,Et){return new Ie.y(ht=>{let Ce=0;return Et.schedule(function(){Ce===it.length?ht.complete():(ht.next(it[Ce++]),ht.closed||this.schedule())})})}(it,Et);if((0,at.t)(it))return function he(it,Et){return(0,p.Xf)(it).pipe((0,B.R)(Et),(0,F.Q)(Et))}(it,Et);if((0,qe.D)(it))return Ee(it,Et);if((0,Rt.T)(it))return function fe(it,Et){return new Ie.y(ht=>{let Ce;return(0,te.f)(ht,Et,()=>{Ce=it[ee.h](),(0,te.f)(ht,Et,()=>{let _t,en;try{({value:_t,done:en}=Ce.next())}catch(Tt){return void ht.error(Tt)}en?ht.complete():ht.next(_t)},0,!0)}),()=>(0,Fe.m)(Ce?.return)&&Ce.return()})}(it,Et);if((0,Pt.L)(it))return function yt(it,Et){return Ee((0,Pt.Q)(it),Et)}(it,Et)}throw(0,Re.z)(it)}(it,Et):(0,p.Xf)(it)}},8421:(Ht,Le,R)=>{R.d(Le,{Xf:()=>Dt});var p=R(7582),F=R(1144),B=R(8239),ce=R(9751),he=R(3670),Ie=R(2206),De=R(4532),ee=R(6495),Fe=R(3260),te=R(576),fe=R(7849),Ee=R(8822);function Dt(ge){if(ge instanceof ce.y)return ge;if(null!=ge){if((0,he.c)(ge))return function at(ge){return new ce.y(rt=>{const it=ge[Ee.L]();if((0,te.m)(it.subscribe))return it.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,F.z)(ge))return function tt(ge){return new ce.y(rt=>{for(let it=0;it<ge.length&&!rt.closed;it++)rt.next(ge[it]);rt.complete()})}(ge);if((0,B.t)(ge))return function Rt(ge){return new ce.y(rt=>{ge.then(it=>{rt.closed||(rt.next(it),rt.complete())},it=>rt.error(it)).then(null,fe.h)})}(ge);if((0,Ie.D)(ge))return Re(ge);if((0,ee.T)(ge))return function qe(ge){return new ce.y(rt=>{for(const it of ge)if(rt.next(it),rt.closed)return;rt.complete()})}(ge);if((0,Fe.L)(ge))return function Pt(ge){return Re((0,Fe.Q)(ge))}(ge)}throw(0,De.z)(ge)}function Re(ge){return new ce.y(rt=>{(function yt(ge,rt){var it,Et,ht,Ce;return(0,p.mG)(this,void 0,void 0,function*(){try{for(it=(0,p.KL)(ge);!(Et=yield it.next()).done;)if(rt.next(Et.value),rt.closed)return}catch(_t){ht={error:_t}}finally{try{Et&&!Et.done&&(Ce=it.return)&&(yield Ce.call(it))}finally{if(ht)throw ht.error}}rt.complete()})})(ge,rt).catch(it=>rt.error(it))})}},6451:(Ht,Le,R)=>{R.d(Le,{T:()=>Ie});var p=R(8189),F=R(8421),B=R(515),ce=R(3269),he=R(8996);function Ie(...De){const ee=(0,ce.yG)(De),Fe=(0,ce._6)(De,1/0),te=De;return te.length?1===te.length?(0,F.Xf)(te[0]):(0,p.J)(Fe)((0,he.D)(te,ee)):B.E}},9646:(Ht,Le,R)=>{R.d(Le,{of:()=>B});var p=R(3269),F=R(8996);function B(...ce){const he=(0,p.yG)(ce);return(0,F.D)(ce,he)}},2843:(Ht,Le,R)=>{R.d(Le,{_:()=>B});var p=R(9751),F=R(576);function B(ce,he){const Ie=(0,F.m)(ce)?ce:()=>ce,De=ee=>ee.error(Ie());return new p.y(he?ee=>he.schedule(De,0,ee):De)}},5403:(Ht,Le,R)=>{R.d(Le,{x:()=>F});var p=R(930);function F(ce,he,Ie,De,ee){return new B(ce,he,Ie,De,ee)}class B extends p.Lv{constructor(he,Ie,De,ee,Fe,te){super(he),this.onFinalize=Fe,this.shouldUnsubscribe=te,this._next=Ie?function(fe){try{Ie(fe)}catch(Ee){he.error(Ee)}}:super._next,this._error=ee?function(fe){try{ee(fe)}catch(Ee){he.error(Ee)}finally{this.unsubscribe()}}:super._error,this._complete=De?function(){try{De()}catch(fe){he.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},7886:(Ht,Le,R)=>{R.d(Le,{u:()=>F});var p=R(8189);function F(){return(0,p.J)(1)}},4351:(Ht,Le,R)=>{R.d(Le,{b:()=>B});var p=R(5577),F=R(576);function B(ce,he){return(0,F.m)(he)?(0,p.z)(ce,he,1):(0,p.z)(ce,1)}},6590:(Ht,Le,R)=>{R.d(Le,{d:()=>B});var p=R(4482),F=R(5403);function B(ce){return(0,p.e)((he,Ie)=>{let De=!1;he.subscribe((0,F.x)(Ie,ee=>{De=!0,Ie.next(ee)},()=>{De||Ie.next(ce),Ie.complete()}))})}},9300:(Ht,Le,R)=>{R.d(Le,{h:()=>B});var p=R(4482),F=R(5403);function B(ce,he){return(0,p.e)((Ie,De)=>{let ee=0;Ie.subscribe((0,F.x)(De,Fe=>ce.call(he,Fe,ee++)&&De.next(Fe)))})}},590:(Ht,Le,R)=>{R.d(Le,{P:()=>De});var p=R(6805),F=R(9300),B=R(5698),ce=R(6590),he=R(8068),Ie=R(4671);function De(ee,Fe){const te=arguments.length>=2;return fe=>fe.pipe(ee?(0,F.h)((Ee,Dt)=>ee(Ee,Dt,fe)):Ie.y,(0,B.q)(1),te?(0,ce.d)(Fe):(0,he.T)(()=>new p.K))}},4004:(Ht,Le,R)=>{R.d(Le,{U:()=>B});var p=R(4482),F=R(5403);function B(ce,he){return(0,p.e)((Ie,De)=>{let ee=0;Ie.subscribe((0,F.x)(De,Fe=>{De.next(ce.call(he,Fe,ee++))}))})}},9718:(Ht,Le,R)=>{R.d(Le,{h:()=>F});var p=R(4004);function F(B){return(0,p.U)(()=>B)}},8189:(Ht,Le,R)=>{R.d(Le,{J:()=>B});var p=R(5577),F=R(4671);function B(ce=1/0){return(0,p.z)(F.y,ce)}},5577:(Ht,Le,R)=>{R.d(Le,{z:()=>ee});var p=R(4004),F=R(8421),B=R(4482),ce=R(9672),he=R(5403),De=R(576);function ee(Fe,te,fe=1/0){return(0,De.m)(te)?ee((Ee,Dt)=>(0,p.U)((at,tt)=>te(Ee,at,Dt,tt))((0,F.Xf)(Fe(Ee,Dt))),fe):("number"==typeof te&&(fe=te),(0,B.e)((Ee,Dt)=>function Ie(Fe,te,fe,Ee,Dt,at,tt,Rt){const qe=[];let Re=0,Pt=0,yt=!1;const ge=()=>{yt&&!qe.length&&!Re&&te.complete()},rt=Et=>Re<Ee?it(Et):qe.push(Et),it=Et=>{at&&te.next(Et),Re++;let ht=!1;(0,F.Xf)(fe(Et,Pt++)).subscribe((0,he.x)(te,Ce=>{Dt?.(Ce),at?rt(Ce):te.next(Ce)},()=>{ht=!0},void 0,()=>{if(ht)try{for(Re--;qe.length&&Re<Ee;){const Ce=qe.shift();tt?(0,ce.f)(te,tt,()=>it(Ce)):it(Ce)}ge()}catch(Ce){te.error(Ce)}}))};return Fe.subscribe((0,he.x)(te,rt,()=>{yt=!0,ge()})),()=>{Rt?.()}}(Ee,Dt,Fe,fe)))}},5363:(Ht,Le,R)=>{R.d(Le,{Q:()=>ce});var p=R(9672),F=R(4482),B=R(5403);function ce(he,Ie=0){return(0,F.e)((De,ee)=>{De.subscribe((0,B.x)(ee,Fe=>(0,p.f)(ee,he,()=>ee.next(Fe),Ie),()=>(0,p.f)(ee,he,()=>ee.complete(),Ie),Fe=>(0,p.f)(ee,he,()=>ee.error(Fe),Ie)))})}},8343:(Ht,Le,R)=>{R.d(Le,{x:()=>B});var p=R(4482),F=R(5403);function B(){return(0,p.e)((ce,he)=>{let Ie=null;ce._refCount++;const De=(0,F.x)(he,void 0,void 0,void 0,()=>{if(!ce||ce._refCount<=0||0<--ce._refCount)return void(Ie=null);const ee=ce._connection,Fe=Ie;Ie=null,ee&&(!Fe||ee===Fe)&&ee.unsubscribe(),he.unsubscribe()});ce.subscribe(De),De.closed||(Ie=ce.connect())})}},5026:(Ht,Le,R)=>{R.d(Le,{R:()=>ce});var p=R(4482),F=R(5403);function B(he,Ie,De,ee,Fe){return(te,fe)=>{let Ee=De,Dt=Ie,at=0;te.subscribe((0,F.x)(fe,tt=>{const Rt=at++;Dt=Ee?he(Dt,tt,Rt):(Ee=!0,tt),ee&&fe.next(Dt)},Fe&&(()=>{Ee&&fe.next(Dt),fe.complete()})))}}function ce(he,Ie){return(0,p.e)(B(he,Ie,arguments.length>=2,!0))}},3099:(Ht,Le,R)=>{R.d(Le,{B:()=>he});var p=R(8421),F=R(7579),B=R(930),ce=R(4482);function he(De={}){const{connector:ee=(()=>new F.x),resetOnError:Fe=!0,resetOnComplete:te=!0,resetOnRefCountZero:fe=!0}=De;return Ee=>{let Dt,at,tt,Rt=0,qe=!1,Re=!1;const Pt=()=>{at?.unsubscribe(),at=void 0},yt=()=>{Pt(),Dt=tt=void 0,qe=Re=!1},ge=()=>{const rt=Dt;yt(),rt?.unsubscribe()};return(0,ce.e)((rt,it)=>{Rt++,!Re&&!qe&&Pt();const Et=tt=tt??ee();it.add(()=>{Rt--,0===Rt&&!Re&&!qe&&(at=Ie(ge,fe))}),Et.subscribe(it),!Dt&&Rt>0&&(Dt=new B.Hp({next:ht=>Et.next(ht),error:ht=>{Re=!0,Pt(),at=Ie(yt,Fe,ht),Et.error(ht)},complete:()=>{qe=!0,Pt(),at=Ie(yt,te),Et.complete()}}),(0,p.Xf)(rt).subscribe(Dt))})(Ee)}}function Ie(De,ee,...Fe){if(!0===ee)return void De();if(!1===ee)return;const te=new B.Hp({next:()=>{te.unsubscribe(),De()}});return ee(...Fe).subscribe(te)}},8675:(Ht,Le,R)=>{R.d(Le,{O:()=>ce});var p=R(1350),F=R(3269),B=R(4482);function ce(...he){const Ie=(0,F.yG)(he);return(0,B.e)((De,ee)=>{(Ie?(0,p.z)(he,De,Ie):(0,p.z)(he,De)).subscribe(ee)})}},9468:(Ht,Le,R)=>{R.d(Le,{R:()=>F});var p=R(4482);function F(B,ce=0){return(0,p.e)((he,Ie)=>{Ie.add(B.schedule(()=>he.subscribe(Ie),ce))})}},3900:(Ht,Le,R)=>{R.d(Le,{w:()=>ce});var p=R(8421),F=R(4482),B=R(5403);function ce(he,Ie){return(0,F.e)((De,ee)=>{let Fe=null,te=0,fe=!1;const Ee=()=>fe&&!Fe&&ee.complete();De.subscribe((0,B.x)(ee,Dt=>{Fe?.unsubscribe();let at=0;const tt=te++;(0,p.Xf)(he(Dt,tt)).subscribe(Fe=(0,B.x)(ee,Rt=>ee.next(Ie?Ie(Dt,Rt,tt,at++):Rt),()=>{Fe=null,Ee()}))},()=>{fe=!0,Ee()}))})}},5698:(Ht,Le,R)=>{R.d(Le,{q:()=>ce});var p=R(515),F=R(4482),B=R(5403);function ce(he){return he<=0?()=>p.E:(0,F.e)((Ie,De)=>{let ee=0;Ie.subscribe((0,B.x)(De,Fe=>{++ee<=he&&(De.next(Fe),he<=ee&&De.complete())}))})}},8505:(Ht,Le,R)=>{R.d(Le,{b:()=>he});var p=R(576),F=R(4482),B=R(5403),ce=R(4671);function he(Ie,De,ee){const Fe=(0,p.m)(Ie)||De||ee?{next:Ie,error:De,complete:ee}:Ie;return Fe?(0,F.e)((te,fe)=>{var Ee;null===(Ee=Fe.subscribe)||void 0===Ee||Ee.call(Fe);let Dt=!0;te.subscribe((0,B.x)(fe,at=>{var tt;null===(tt=Fe.next)||void 0===tt||tt.call(Fe,at),fe.next(at)},()=>{var at;Dt=!1,null===(at=Fe.complete)||void 0===at||at.call(Fe),fe.complete()},at=>{var tt;Dt=!1,null===(tt=Fe.error)||void 0===tt||tt.call(Fe,at),fe.error(at)},()=>{var at,tt;Dt&&(null===(at=Fe.unsubscribe)||void 0===at||at.call(Fe)),null===(tt=Fe.finalize)||void 0===tt||tt.call(Fe)}))}):ce.y}},8068:(Ht,Le,R)=>{R.d(Le,{T:()=>ce});var p=R(6805),F=R(4482),B=R(5403);function ce(Ie=he){return(0,F.e)((De,ee)=>{let Fe=!1;De.subscribe((0,B.x)(ee,te=>{Fe=!0,ee.next(te)},()=>Fe?ee.complete():ee.error(Ie())))})}function he(){return new p.K}},4408:(Ht,Le,R)=>{R.d(Le,{o:()=>he});var p=R(727);class F extends p.w0{constructor(De,ee){super()}schedule(De,ee=0){return this}}const B={setInterval(Ie,De,...ee){const{delegate:Fe}=B;return Fe?.setInterval?Fe.setInterval(Ie,De,...ee):setInterval(Ie,De,...ee)},clearInterval(Ie){const{delegate:De}=B;return(De?.clearInterval||clearInterval)(Ie)},delegate:void 0};var ce=R(8737);class he extends F{constructor(De,ee){super(De,ee),this.scheduler=De,this.work=ee,this.pending=!1}schedule(De,ee=0){var Fe;if(this.closed)return this;this.state=De;const te=this.id,fe=this.scheduler;return null!=te&&(this.id=this.recycleAsyncId(fe,te,ee)),this.pending=!0,this.delay=ee,this.id=null!==(Fe=this.id)&&void 0!==Fe?Fe:this.requestAsyncId(fe,this.id,ee),this}requestAsyncId(De,ee,Fe=0){return B.setInterval(De.flush.bind(De,this),Fe)}recycleAsyncId(De,ee,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return ee;null!=ee&&B.clearInterval(ee)}execute(De,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(De,ee);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(De,ee){let te,Fe=!1;try{this.work(De)}catch(fe){Fe=!0,te=fe||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:De,scheduler:ee}=this,{actions:Fe}=ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Fe,this),null!=De&&(this.id=this.recycleAsyncId(ee,De,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ht,Le,R)=>{R.d(Le,{v:()=>B});var p=R(6063);class F{constructor(he,Ie=F.now){this.schedulerActionCtor=he,this.now=Ie}schedule(he,Ie=0,De){return new this.schedulerActionCtor(this,he).schedule(De,Ie)}}F.now=p.l.now;class B extends F{constructor(he,Ie=F.now){super(he,Ie),this.actions=[],this._active=!1}flush(he){const{actions:Ie}=this;if(this._active)return void Ie.push(he);let De;this._active=!0;do{if(De=he.execute(he.state,he.delay))break}while(he=Ie.shift());if(this._active=!1,De){for(;he=Ie.shift();)he.unsubscribe();throw De}}}},4986:(Ht,Le,R)=>{R.d(Le,{P:()=>ce,z:()=>B});var p=R(4408);const B=new(R(7565).v)(p.o),ce=B},6063:(Ht,Le,R)=>{R.d(Le,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Ht,Le,R)=>{R.d(Le,{z:()=>p});const p={setTimeout(F,B,...ce){const{delegate:he}=p;return he?.setTimeout?he.setTimeout(F,B,...ce):setTimeout(F,B,...ce)},clearTimeout(F){const{delegate:B}=p;return(B?.clearTimeout||clearTimeout)(F)},delegate:void 0}},2202:(Ht,Le,R)=>{R.d(Le,{h:()=>F});const F=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ht,Le,R)=>{R.d(Le,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ht,Le,R)=>{R.d(Le,{K:()=>F});const F=(0,R(3888).d)(B=>function(){B(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Ht,Le,R)=>{R.d(Le,{_6:()=>Ie,jO:()=>ce,yG:()=>he});var p=R(576),F=R(3532);function B(De){return De[De.length-1]}function ce(De){return(0,p.m)(B(De))?De.pop():void 0}function he(De){return(0,F.K)(B(De))?De.pop():void 0}function Ie(De,ee){return"number"==typeof B(De)?De.pop():ee}},4742:(Ht,Le,R)=>{R.d(Le,{D:()=>he});const{isArray:p}=Array,{getPrototypeOf:F,prototype:B,keys:ce}=Object;function he(De){if(1===De.length){const ee=De[0];if(p(ee))return{args:ee,keys:null};if(function Ie(De){return De&&"object"==typeof De&&F(De)===B}(ee)){const Fe=ce(ee);return{args:Fe.map(te=>ee[te]),keys:Fe}}}return{args:De,keys:null}}},8737:(Ht,Le,R)=>{function p(F,B){if(F){const ce=F.indexOf(B);0<=ce&&F.splice(ce,1)}}R.d(Le,{P:()=>p})},3888:(Ht,Le,R)=>{function p(F){const ce=F(he=>{Error.call(he),he.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}R.d(Le,{d:()=>p})},1810:(Ht,Le,R)=>{function p(F,B){return F.reduce((ce,he,Ie)=>(ce[he]=B[Ie],ce),{})}R.d(Le,{n:()=>p})},2806:(Ht,Le,R)=>{R.d(Le,{O:()=>ce,x:()=>B});var p=R(2416);let F=null;function B(he){if(p.v.useDeprecatedSynchronousErrorHandling){const Ie=!F;if(Ie&&(F={errorThrown:!1,error:null}),he(),Ie){const{errorThrown:De,error:ee}=F;if(F=null,De)throw ee}}else he()}function ce(he){p.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=he)}},9672:(Ht,Le,R)=>{function p(F,B,ce,he=0,Ie=!1){const De=B.schedule(function(){ce(),Ie?F.add(this.schedule(null,he)):this.unsubscribe()},he);if(F.add(De),!Ie)return De}R.d(Le,{f:()=>p})},4671:(Ht,Le,R)=>{function p(F){return F}R.d(Le,{y:()=>p})},1144:(Ht,Le,R)=>{R.d(Le,{z:()=>p});const p=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(Ht,Le,R)=>{R.d(Le,{D:()=>F});var p=R(576);function F(B){return Symbol.asyncIterator&&(0,p.m)(B?.[Symbol.asyncIterator])}},576:(Ht,Le,R)=>{function p(F){return"function"==typeof F}R.d(Le,{m:()=>p})},3670:(Ht,Le,R)=>{R.d(Le,{c:()=>B});var p=R(8822),F=R(576);function B(ce){return(0,F.m)(ce[p.L])}},6495:(Ht,Le,R)=>{R.d(Le,{T:()=>B});var p=R(2202),F=R(576);function B(ce){return(0,F.m)(ce?.[p.h])}},8239:(Ht,Le,R)=>{R.d(Le,{t:()=>F});var p=R(576);function F(B){return(0,p.m)(B?.then)}},3260:(Ht,Le,R)=>{R.d(Le,{L:()=>ce,Q:()=>B});var p=R(7582),F=R(576);function B(he){return(0,p.FC)(this,arguments,function*(){const De=he.getReader();try{for(;;){const{value:ee,done:Fe}=yield(0,p.qq)(De.read());if(Fe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ee)}}finally{De.releaseLock()}})}function ce(he){return(0,F.m)(he?.getReader)}},3532:(Ht,Le,R)=>{R.d(Le,{K:()=>F});var p=R(576);function F(B){return B&&(0,p.m)(B.schedule)}},4482:(Ht,Le,R)=>{R.d(Le,{A:()=>F,e:()=>B});var p=R(576);function F(ce){return(0,p.m)(ce?.lift)}function B(ce){return he=>{if(F(he))return he.lift(function(Ie){try{return ce(Ie,this)}catch(De){this.error(De)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ht,Le,R)=>{R.d(Le,{Z:()=>ce});var p=R(4004);const{isArray:F}=Array;function ce(he){return(0,p.U)(Ie=>function B(he,Ie){return F(Ie)?he(...Ie):he(Ie)}(he,Ie))}},5032:(Ht,Le,R)=>{function p(){}R.d(Le,{Z:()=>p})},9635:(Ht,Le,R)=>{R.d(Le,{U:()=>B,z:()=>F});var p=R(4671);function F(...ce){return B(ce)}function B(ce){return 0===ce.length?p.y:1===ce.length?ce[0]:function(Ie){return ce.reduce((De,ee)=>ee(De),Ie)}}},7849:(Ht,Le,R)=>{R.d(Le,{h:()=>B});var p=R(2416),F=R(3410);function B(ce){F.z.setTimeout(()=>{const{onUnhandledError:he}=p.v;if(!he)throw ce;he(ce)})}},4532:(Ht,Le,R)=>{function p(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Le,{z:()=>p})},6895:(Ht,Le,R)=>{R.d(Le,{Do:()=>yt,EM:()=>Ys,H9:()=>as,HT:()=>he,JF:()=>bo,K0:()=>De,Mx:()=>Ns,NF:()=>vs,O5:()=>jr,PM:()=>_s,S$:()=>qe,V_:()=>te,Ye:()=>ge,b0:()=>Pt,bD:()=>qi,ez:()=>Ls,mk:()=>Qn,q:()=>B,sg:()=>Ki,w_:()=>Ie});var p=R(4650);let F=null;function B(){return F}function he(b){F||(F=b)}class Ie{}const De=new p.OlP("DocumentToken");let ee=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=p.Yz7({token:b,factory:function(){return function Fe(){return(0,p.LFG)(fe)}()},providedIn:"platform"}),b})();const te=new p.OlP("Location Initialized");let fe=(()=>{class b extends ee{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(x){const W=B().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",x,!1),()=>W.removeEventListener("popstate",x)}onHashChange(x){const W=B().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",x,!1),()=>W.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,W,_e){Ee()?this._history.pushState(x,W,_e):this.location.hash=_e}replaceState(x,W,_e){Ee()?this._history.replaceState(x,W,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(De))},b.\u0275prov=p.Yz7({token:b,factory:function(){return function Dt(){return new fe((0,p.LFG)(De))}()},providedIn:"platform"}),b})();function Ee(){return!!window.history.pushState}function at(b,V){if(0==b.length)return V;if(0==V.length)return b;let x=0;return b.endsWith("/")&&x++,V.startsWith("/")&&x++,2==x?b+V.substring(1):1==x?b+V:b+"/"+V}function tt(b){const V=b.match(/#|\?|$/),x=V&&V.index||b.length;return b.slice(0,x-("/"===b[x-1]?1:0))+b.slice(x)}function Rt(b){return b&&"?"!==b[0]?"?"+b:b}let qe=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=p.Yz7({token:b,factory:function(){return(0,p.f3M)(Pt)},providedIn:"root"}),b})();const Re=new p.OlP("appBaseHref");let Pt=(()=>{class b extends qe{constructor(x,W){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=W??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(De).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return at(this._baseHref,x)}path(x=!1){const W=this._platformLocation.pathname+Rt(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&x?`${W}${_e}`:W}pushState(x,W,_e,st){const mt=this.prepareExternalUrl(_e+Rt(st));this._platformLocation.pushState(x,W,mt)}replaceState(x,W,_e,st){const mt=this.prepareExternalUrl(_e+Rt(st));this._platformLocation.replaceState(x,W,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(ee),p.LFG(Re,8))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),yt=(()=>{class b extends qe{constructor(x,W){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(x){const W=at(this._baseHref,x);return W.length>0?"#"+W:W}pushState(x,W,_e,st){let mt=this.prepareExternalUrl(_e+Rt(st));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.pushState(x,W,mt)}replaceState(x,W,_e,st){let mt=this.prepareExternalUrl(_e+Rt(st));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.replaceState(x,W,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(ee),p.LFG(Re,8))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac}),b})(),ge=(()=>{class b{constructor(x){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const W=this._locationStrategy.getBaseHref();this._baseHref=tt(Et(W)),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,W=""){return this.path()==this.normalize(x+Rt(W))}normalize(x){return b.stripTrailingSlash(function it(b,V){return b&&V.startsWith(b)?V.substring(b.length):V}(this._baseHref,Et(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,W="",_e=null){this._locationStrategy.pushState(_e,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Rt(W)),_e)}replaceState(x,W="",_e=null){this._locationStrategy.replaceState(_e,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Rt(W)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)})),()=>{const W=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",W){this._urlChangeListeners.forEach(_e=>_e(x,W))}subscribe(x,W,_e){return this._subject.subscribe({next:x,error:W,complete:_e})}}return b.normalizeQueryParams=Rt,b.joinWithSlash=at,b.stripTrailingSlash=tt,b.\u0275fac=function(x){return new(x||b)(p.LFG(qe))},b.\u0275prov=p.Yz7({token:b,factory:function(){return function rt(){return new ge((0,p.LFG)(qe))}()},providedIn:"root"}),b})();function Et(b){return b.replace(/\/index.html$/,"")}const ht={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Ce=(()=>((Ce=Ce||{})[Ce.Decimal=0]="Decimal",Ce[Ce.Percent=1]="Percent",Ce[Ce.Currency=2]="Currency",Ce[Ce.Scientific=3]="Scientific",Ce))(),Vt=(()=>((Vt=Vt||{})[Vt.Decimal=0]="Decimal",Vt[Vt.Group=1]="Group",Vt[Vt.List=2]="List",Vt[Vt.PercentSign=3]="PercentSign",Vt[Vt.PlusSign=4]="PlusSign",Vt[Vt.MinusSign=5]="MinusSign",Vt[Vt.Exponential=6]="Exponential",Vt[Vt.SuperscriptingExponent=7]="SuperscriptingExponent",Vt[Vt.PerMille=8]="PerMille",Vt[Vt.Infinity=9]="Infinity",Vt[Vt.NaN=10]="NaN",Vt[Vt.TimeSeparator=11]="TimeSeparator",Vt[Vt.CurrencyDecimal=12]="CurrencyDecimal",Vt[Vt.CurrencyGroup=13]="CurrencyGroup",Vt))();function tn(b,V){const x=(0,p.cg1)(b),W=x[p.wAp.NumberSymbols][V];if(typeof W>"u"){if(V===Vt.CurrencyDecimal)return x[p.wAp.NumberSymbols][Vt.Decimal];if(V===Vt.CurrencyGroup)return x[p.wAp.NumberSymbols][Vt.Group]}return W}const $t=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ne(b,V,x,W,_e){const mt=function Dn(b,V="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},W=b.split(";"),_e=W[0],st=W[1],mt=-1!==_e.indexOf(".")?_e.split("."):[_e.substring(0,_e.lastIndexOf("0")+1),_e.substring(_e.lastIndexOf("0")+1)],En=mt[0],gr=mt[1]||"";x.posPre=En.substring(0,En.indexOf("#"));for(let wr=0;wr<gr.length;wr++){const Cn=gr.charAt(wr);"0"===Cn?x.minFrac=x.maxFrac=wr+1:"#"===Cn?x.maxFrac=wr+1:x.posSuf+=Cn}const tr=En.split(",");if(x.gSize=tr[1]?tr[1].length:0,x.lgSize=tr[2]||tr[1]?(tr[2]||tr[1]).length:0,st){const wr=_e.length-x.posPre.length-x.posSuf.length,Cn=st.indexOf("#");x.negPre=st.substring(0,Cn).replace(/'/g,""),x.negSuf=st.slice(Cn+wr).replace(/'/g,"")}else x.negPre=V+x.posPre,x.negSuf=x.posSuf;return x}(function un(b,V){return(0,p.cg1)(b)[p.wAp.NumberFormats][V]}(V,Ce.Currency),tn(V,Vt.MinusSign));return mt.minFrac=function Br(b){let V;const x=ht[b];return x&&(V=x[2]),"number"==typeof V?V:2}(W),mt.maxFrac=mt.minFrac,function ke(b,V,x,W,_e,st,mt=!1){let En="",gr=!1;if(isFinite(b)){let tr=function Zn(b){let W,_e,st,mt,En,V=Math.abs(b)+"",x=0;for((_e=V.indexOf("."))>-1&&(V=V.replace(".","")),(st=V.search(/e/i))>0?(_e<0&&(_e=st),_e+=+V.slice(st+1),V=V.substring(0,st)):_e<0&&(_e=V.length),st=0;"0"===V.charAt(st);st++);if(st===(En=V.length))W=[0],_e=1;else{for(En--;"0"===V.charAt(En);)En--;for(_e-=st,W=[],mt=0;st<=En;st++,mt++)W[mt]=Number(V.charAt(st))}return _e>22&&(W=W.splice(0,21),x=_e-1,_e=1),{digits:W,exponent:x,integerLen:_e}}(b);mt&&(tr=function Vn(b){if(0===b.digits[0])return b;const V=b.digits.length-b.integerLen;return b.exponent?b.exponent+=2:(0===V?b.digits.push(0,0):1===V&&b.digits.push(0),b.integerLen+=2),b}(tr));let wr=V.minInt,Cn=V.minFrac,Sr=V.maxFrac;if(st){const Lr=st.match($t);if(null===Lr)throw new Error(`${st} is not a valid digit info`);const go=Lr[1],sn=Lr[3],gn=Lr[5];null!=go&&(wr=jn(go)),null!=sn&&(Cn=jn(sn)),null!=gn?Sr=jn(gn):null!=sn&&Cn>Sr&&(Sr=Cn)}!function Tr(b,V,x){if(V>x)throw new Error(`The minimum number of digits after fraction (${V}) is higher than the maximum (${x}).`);let W=b.digits,_e=W.length-b.integerLen;const st=Math.min(Math.max(V,_e),x);let mt=st+b.integerLen,En=W[mt];if(mt>0){W.splice(Math.max(b.integerLen,mt));for(let Cn=mt;Cn<W.length;Cn++)W[Cn]=0}else{_e=Math.max(0,_e),b.integerLen=1,W.length=Math.max(1,mt=st+1),W[0]=0;for(let Cn=1;Cn<mt;Cn++)W[Cn]=0}if(En>=5)if(mt-1<0){for(let Cn=0;Cn>mt;Cn--)W.unshift(0),b.integerLen++;W.unshift(1),b.integerLen++}else W[mt-1]++;for(;_e<Math.max(0,st);_e++)W.push(0);let gr=0!==st;const tr=V+b.integerLen,wr=W.reduceRight(function(Cn,Sr,Hn,Yr){return Yr[Hn]=(Sr+=Cn)<10?Sr:Sr-10,gr&&(0===Yr[Hn]&&Hn>=tr?Yr.pop():gr=!1),Sr>=10?1:0},0);wr&&(W.unshift(wr),b.integerLen++)}(tr,Cn,Sr);let Hn=tr.digits,Yr=tr.integerLen;const fs=tr.exponent;let Mt=[];for(gr=Hn.every(Lr=>!Lr);Yr<wr;Yr++)Hn.unshift(0);for(;Yr<0;Yr++)Hn.unshift(0);Yr>0?Mt=Hn.splice(Yr,Hn.length):(Mt=Hn,Hn=[0]);const Ir=[];for(Hn.length>=V.lgSize&&Ir.unshift(Hn.splice(-V.lgSize,Hn.length).join(""));Hn.length>V.gSize;)Ir.unshift(Hn.splice(-V.gSize,Hn.length).join(""));Hn.length&&Ir.unshift(Hn.join("")),En=Ir.join(tn(x,W)),Mt.length&&(En+=tn(x,_e)+Mt.join("")),fs&&(En+=tn(x,Vt.Exponential)+"+"+fs)}else En=tn(x,Vt.Infinity);return En=b<0&&!gr?V.negPre+En+V.negSuf:V.posPre+En+V.posSuf,En}(b,mt,V,Vt.CurrencyGroup,Vt.CurrencyDecimal,_e).replace("\xa4",x).replace("\xa4","").trim()}function jn(b){const V=parseInt(b);if(isNaN(V))throw new Error("Invalid integer literal when parsing "+b);return V}function Ns(b,V){V=encodeURIComponent(V);for(const x of b.split(";")){const W=x.indexOf("="),[_e,st]=-1==W?[x,""]:[x.slice(0,W),x.slice(W+1)];if(_e.trim()===V)return decodeURIComponent(st)}return null}let Qn=(()=>{class b{constructor(x,W,_e,st){this._iterableDiffers=x,this._keyValueDiffers=W,this._ngEl=_e,this._renderer=st,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),x.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!0)):Object.keys(x).forEach(W=>this._toggleClass(W,!!x[W])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!1)):Object.keys(x).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(x,W){(x=x.trim())&&x.split(/\s+/g).forEach(_e=>{W?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),b})();class Ar{constructor(V,x,W,_e){this.$implicit=V,this.ngForOf=x,this.index=W,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ki=(()=>{class b{constructor(x,W,_e){this._viewContainer=x,this._template=W,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const W=this._viewContainer;x.forEachOperation((_e,st,mt)=>{if(null==_e.previousIndex)W.createEmbeddedView(this._template,new Ar(_e.item,this._ngForOf,-1,-1),null===mt?void 0:mt);else if(null==mt)W.remove(null===st?void 0:st);else if(null!==st){const En=W.get(st);W.move(En,mt),Kr(En,_e)}});for(let _e=0,st=W.length;_e<st;_e++){const En=W.get(_e).context;En.index=_e,En.count=st,En.ngForOf=this._ngForOf}x.forEachIdentityChange(_e=>{Kr(W.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(x,W){return!0}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),b})();function Kr(b,V){b.context.$implicit=V.item}let jr=(()=>{class b{constructor(x,W){this._viewContainer=x,this._context=new ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){qr("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){qr("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,W){return!0}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.s_b),p.Y36(p.Rgc))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),b})();class ss{constructor(){this.$implicit=null,this.ngIf=null}}function qr(b,V){if(V&&!V.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,p.AaK)(V)}'.`)}let as=(()=>{class b{constructor(x,W="USD"){this._locale=x,this._defaultCurrencyCode=W}transform(x,W=this._defaultCurrencyCode,_e="symbol",st,mt){if(!function Lo(b){return!(null==b||""===b||b!=b)}(x))return null;mt=mt||this._locale,"boolean"==typeof _e&&(_e=_e?"symbol":"code");let En=W||this._defaultCurrencyCode;"code"!==_e&&(En="symbol"===_e||"symbol-narrow"===_e?function Un(b,V,x="en"){const W=function Xt(b){return(0,p.cg1)(b)[p.wAp.Currencies]}(x)[b]||ht[b]||[],_e=W[1];return"narrow"===V&&"string"==typeof _e?_e:W[0]||b}(En,"symbol"===_e?"wide":"narrow",mt):_e);try{return Ne(function us(b){if("string"==typeof b&&!isNaN(Number(b)-parseFloat(b)))return Number(b);if("number"!=typeof b)throw new Error(`${b} is not a number`);return b}(x),mt,En,W,st)}catch(gr){throw function dr(b,V){return new p.vHH(2100,!1)}()}}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.soG,16),p.Y36(p.EJc,16))},b.\u0275pipe=p.Yjl({name:"currency",type:b,pure:!0,standalone:!0}),b})();let Ls=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=p.oAB({type:b}),b.\u0275inj=p.cJS({}),b})();const qi="browser";function vs(b){return b===qi}function _s(b){return"server"===b}let Ys=(()=>{class b{}return b.\u0275prov=(0,p.Yz7)({token:b,providedIn:"root",factory:()=>new ls((0,p.LFG)(De),window)}),b})();class ls{constructor(V,x){this.document=V,this.window=x,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const x=function hi(b,V){const x=b.getElementById(V)||b.getElementsByName(V)[0];if(x)return x;if("function"==typeof b.createTreeWalker&&b.body&&(b.body.createShadowRoot||b.body.attachShadow)){const W=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let _e=W.currentNode;for(;_e;){const st=_e.shadowRoot;if(st){const mt=st.getElementById(V)||st.querySelector(`[name="${V}"]`);if(mt)return mt}_e=W.nextNode()}}return null}(this.document,V);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=V)}}scrollToElement(V){const x=V.getBoundingClientRect(),W=x.left+this.window.pageXOffset,_e=x.top+this.window.pageYOffset,st=this.offset();this.window.scrollTo(W-st[0],_e-st[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=ji(this.window.history)||ji(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ji(b){return Object.getOwnPropertyDescriptor(b,"scrollRestoration")}class bo{}},529:(Ht,Le,R)=>{R.d(Le,{JF:()=>Br,eN:()=>Ue});var p=R(6895),F=R(4650),B=R(9646),ce=R(9751),he=R(4351),Ie=R(9300),De=R(4004);class ee{}class Fe{}class te{constructor(pe){this.normalizedNames=new Map,this.lazyUpdate=null,pe?this.lazyInit="string"==typeof pe?()=>{this.headers=new Map,pe.split("\n").forEach(de=>{const Xe=de.indexOf(":");if(Xe>0){const ot=de.slice(0,Xe),rn=ot.toLowerCase(),yn=de.slice(Xe+1).trim();this.maybeSetNormalizedName(ot,rn),this.headers.has(rn)?this.headers.get(rn).push(yn):this.headers.set(rn,[yn])}})}:()=>{this.headers=new Map,Object.keys(pe).forEach(de=>{let Xe=pe[de];const ot=de.toLowerCase();"string"==typeof Xe&&(Xe=[Xe]),Xe.length>0&&(this.headers.set(ot,Xe),this.maybeSetNormalizedName(de,ot))})}:this.headers=new Map}has(pe){return this.init(),this.headers.has(pe.toLowerCase())}get(pe){this.init();const de=this.headers.get(pe.toLowerCase());return de&&de.length>0?de[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(pe){return this.init(),this.headers.get(pe.toLowerCase())||null}append(pe,de){return this.clone({name:pe,value:de,op:"a"})}set(pe,de){return this.clone({name:pe,value:de,op:"s"})}delete(pe,de){return this.clone({name:pe,value:de,op:"d"})}maybeSetNormalizedName(pe,de){this.normalizedNames.has(de)||this.normalizedNames.set(de,pe)}init(){this.lazyInit&&(this.lazyInit instanceof te?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(pe=>this.applyUpdate(pe)),this.lazyUpdate=null))}copyFrom(pe){pe.init(),Array.from(pe.headers.keys()).forEach(de=>{this.headers.set(de,pe.headers.get(de)),this.normalizedNames.set(de,pe.normalizedNames.get(de))})}clone(pe){const de=new te;return de.lazyInit=this.lazyInit&&this.lazyInit instanceof te?this.lazyInit:this,de.lazyUpdate=(this.lazyUpdate||[]).concat([pe]),de}applyUpdate(pe){const de=pe.name.toLowerCase();switch(pe.op){case"a":case"s":let Xe=pe.value;if("string"==typeof Xe&&(Xe=[Xe]),0===Xe.length)return;this.maybeSetNormalizedName(pe.name,de);const ot=("a"===pe.op?this.headers.get(de):void 0)||[];ot.push(...Xe),this.headers.set(de,ot);break;case"d":const rn=pe.value;if(rn){let yn=this.headers.get(de);if(!yn)return;yn=yn.filter(Tn=>-1===rn.indexOf(Tn)),0===yn.length?(this.headers.delete(de),this.normalizedNames.delete(de)):this.headers.set(de,yn)}else this.headers.delete(de),this.normalizedNames.delete(de)}}forEach(pe){this.init(),Array.from(this.normalizedNames.keys()).forEach(de=>pe(this.normalizedNames.get(de),this.headers.get(de)))}}class Ee{encodeKey(pe){return Rt(pe)}encodeValue(pe){return Rt(pe)}decodeKey(pe){return decodeURIComponent(pe)}decodeValue(pe){return decodeURIComponent(pe)}}const at=/%(\d[a-f0-9])/gi,tt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Rt(Ze){return encodeURIComponent(Ze).replace(at,(pe,de)=>tt[de]??pe)}function qe(Ze){return`${Ze}`}class Re{constructor(pe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=pe.encoder||new Ee,pe.fromString){if(pe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Dt(Ze,pe){const de=new Map;return Ze.length>0&&Ze.replace(/^\?/,"").split("&").forEach(ot=>{const rn=ot.indexOf("="),[yn,Tn]=-1==rn?[pe.decodeKey(ot),""]:[pe.decodeKey(ot.slice(0,rn)),pe.decodeValue(ot.slice(rn+1))],Nt=de.get(yn)||[];Nt.push(Tn),de.set(yn,Nt)}),de}(pe.fromString,this.encoder)}else pe.fromObject?(this.map=new Map,Object.keys(pe.fromObject).forEach(de=>{const Xe=pe.fromObject[de],ot=Array.isArray(Xe)?Xe.map(qe):[qe(Xe)];this.map.set(de,ot)})):this.map=null}has(pe){return this.init(),this.map.has(pe)}get(pe){this.init();const de=this.map.get(pe);return de?de[0]:null}getAll(pe){return this.init(),this.map.get(pe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(pe,de){return this.clone({param:pe,value:de,op:"a"})}appendAll(pe){const de=[];return Object.keys(pe).forEach(Xe=>{const ot=pe[Xe];Array.isArray(ot)?ot.forEach(rn=>{de.push({param:Xe,value:rn,op:"a"})}):de.push({param:Xe,value:ot,op:"a"})}),this.clone(de)}set(pe,de){return this.clone({param:pe,value:de,op:"s"})}delete(pe,de){return this.clone({param:pe,value:de,op:"d"})}toString(){return this.init(),this.keys().map(pe=>{const de=this.encoder.encodeKey(pe);return this.map.get(pe).map(Xe=>de+"="+this.encoder.encodeValue(Xe)).join("&")}).filter(pe=>""!==pe).join("&")}clone(pe){const de=new Re({encoder:this.encoder});return de.cloneFrom=this.cloneFrom||this,de.updates=(this.updates||[]).concat(pe),de}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(pe=>this.map.set(pe,this.cloneFrom.map.get(pe))),this.updates.forEach(pe=>{switch(pe.op){case"a":case"s":const de=("a"===pe.op?this.map.get(pe.param):void 0)||[];de.push(qe(pe.value)),this.map.set(pe.param,de);break;case"d":if(void 0===pe.value){this.map.delete(pe.param);break}{let Xe=this.map.get(pe.param)||[];const ot=Xe.indexOf(qe(pe.value));-1!==ot&&Xe.splice(ot,1),Xe.length>0?this.map.set(pe.param,Xe):this.map.delete(pe.param)}}}),this.cloneFrom=this.updates=null)}}class yt{constructor(){this.map=new Map}set(pe,de){return this.map.set(pe,de),this}get(pe){return this.map.has(pe)||this.map.set(pe,pe.defaultValue()),this.map.get(pe)}delete(pe){return this.map.delete(pe),this}has(pe){return this.map.has(pe)}keys(){return this.map.keys()}}function rt(Ze){return typeof ArrayBuffer<"u"&&Ze instanceof ArrayBuffer}function it(Ze){return typeof Blob<"u"&&Ze instanceof Blob}function Et(Ze){return typeof FormData<"u"&&Ze instanceof FormData}class Ce{constructor(pe,de,Xe,ot){let rn;if(this.url=de,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=pe.toUpperCase(),function ge(Ze){switch(Ze){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ot?(this.body=void 0!==Xe?Xe:null,rn=ot):rn=Xe,rn&&(this.reportProgress=!!rn.reportProgress,this.withCredentials=!!rn.withCredentials,rn.responseType&&(this.responseType=rn.responseType),rn.headers&&(this.headers=rn.headers),rn.context&&(this.context=rn.context),rn.params&&(this.params=rn.params)),this.headers||(this.headers=new te),this.context||(this.context=new yt),this.params){const yn=this.params.toString();if(0===yn.length)this.urlWithParams=de;else{const Tn=de.indexOf("?");this.urlWithParams=de+(-1===Tn?"?":Tn<de.length-1?"&":"")+yn}}else this.params=new Re,this.urlWithParams=de}serializeBody(){return null===this.body?null:rt(this.body)||it(this.body)||Et(this.body)||function ht(Ze){return typeof URLSearchParams<"u"&&Ze instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Re?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Et(this.body)?null:it(this.body)?this.body.type||null:rt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Re?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(pe={}){const de=pe.method||this.method,Xe=pe.url||this.url,ot=pe.responseType||this.responseType,rn=void 0!==pe.body?pe.body:this.body,yn=void 0!==pe.withCredentials?pe.withCredentials:this.withCredentials,Tn=void 0!==pe.reportProgress?pe.reportProgress:this.reportProgress;let Nt=pe.headers||this.headers,Nn=pe.params||this.params;const pn=pe.context??this.context;return void 0!==pe.setHeaders&&(Nt=Object.keys(pe.setHeaders).reduce((rr,Ft)=>rr.set(Ft,pe.setHeaders[Ft]),Nt)),pe.setParams&&(Nn=Object.keys(pe.setParams).reduce((rr,Ft)=>rr.set(Ft,pe.setParams[Ft]),Nn)),new Ce(de,Xe,rn,{params:Nn,headers:Nt,context:pn,reportProgress:Tn,responseType:ot,withCredentials:yn})}}var _t=(()=>((_t=_t||{})[_t.Sent=0]="Sent",_t[_t.UploadProgress=1]="UploadProgress",_t[_t.ResponseHeader=2]="ResponseHeader",_t[_t.DownloadProgress=3]="DownloadProgress",_t[_t.Response=4]="Response",_t[_t.User=5]="User",_t))();class en{constructor(pe,de=200,Xe="OK"){this.headers=pe.headers||new te,this.status=void 0!==pe.status?pe.status:de,this.statusText=pe.statusText||Xe,this.url=pe.url||null,this.ok=this.status>=200&&this.status<300}}class Tt extends en{constructor(pe={}){super(pe),this.type=_t.ResponseHeader}clone(pe={}){return new Tt({headers:pe.headers||this.headers,status:void 0!==pe.status?pe.status:this.status,statusText:pe.statusText||this.statusText,url:pe.url||this.url||void 0})}}class Wt extends en{constructor(pe={}){super(pe),this.type=_t.Response,this.body=void 0!==pe.body?pe.body:null}clone(pe={}){return new Wt({body:void 0!==pe.body?pe.body:this.body,headers:pe.headers||this.headers,status:void 0!==pe.status?pe.status:this.status,statusText:pe.statusText||this.statusText,url:pe.url||this.url||void 0})}}class Vt extends en{constructor(pe){super(pe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${pe.url||"(unknown url)"}`:`Http failure response for ${pe.url||"(unknown url)"}: ${pe.status} ${pe.statusText}`,this.error=pe.error||null}}function nr(Ze,pe){return{body:pe,headers:Ze.headers,context:Ze.context,observe:Ze.observe,params:Ze.params,reportProgress:Ze.reportProgress,responseType:Ze.responseType,withCredentials:Ze.withCredentials}}let Ue=(()=>{class Ze{constructor(de){this.handler=de}request(de,Xe,ot={}){let rn;if(de instanceof Ce)rn=de;else{let Nt,Nn;Nt=ot.headers instanceof te?ot.headers:new te(ot.headers),ot.params&&(Nn=ot.params instanceof Re?ot.params:new Re({fromObject:ot.params})),rn=new Ce(de,Xe,void 0!==ot.body?ot.body:null,{headers:Nt,context:ot.context,params:Nn,reportProgress:ot.reportProgress,responseType:ot.responseType||"json",withCredentials:ot.withCredentials})}const yn=(0,B.of)(rn).pipe((0,he.b)(Nt=>this.handler.handle(Nt)));if(de instanceof Ce||"events"===ot.observe)return yn;const Tn=yn.pipe((0,Ie.h)(Nt=>Nt instanceof Wt));switch(ot.observe||"body"){case"body":switch(rn.responseType){case"arraybuffer":return Tn.pipe((0,De.U)(Nt=>{if(null!==Nt.body&&!(Nt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Nt.body}));case"blob":return Tn.pipe((0,De.U)(Nt=>{if(null!==Nt.body&&!(Nt.body instanceof Blob))throw new Error("Response is not a Blob.");return Nt.body}));case"text":return Tn.pipe((0,De.U)(Nt=>{if(null!==Nt.body&&"string"!=typeof Nt.body)throw new Error("Response is not a string.");return Nt.body}));default:return Tn.pipe((0,De.U)(Nt=>Nt.body))}case"response":return Tn;default:throw new Error(`Unreachable: unhandled observe type ${ot.observe}}`)}}delete(de,Xe={}){return this.request("DELETE",de,Xe)}get(de,Xe={}){return this.request("GET",de,Xe)}head(de,Xe={}){return this.request("HEAD",de,Xe)}jsonp(de,Xe){return this.request("JSONP",de,{params:(new Re).append(Xe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(de,Xe={}){return this.request("OPTIONS",de,Xe)}patch(de,Xe,ot={}){return this.request("PATCH",de,nr(ot,Xe))}post(de,Xe,ot={}){return this.request("POST",de,nr(ot,Xe))}put(de,Xe,ot={}){return this.request("PUT",de,nr(ot,Xe))}}return Ze.\u0275fac=function(de){return new(de||Ze)(F.LFG(ee))},Ze.\u0275prov=F.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();class Ve{constructor(pe,de){this.next=pe,this.interceptor=de}handle(pe){return this.interceptor.intercept(pe,this.next)}}const Ke=new F.OlP("HTTP_INTERCEPTORS");let je=(()=>{class Ze{intercept(de,Xe){return Xe.handle(de)}}return Ze.\u0275fac=function(de){return new(de||Ze)},Ze.\u0275prov=F.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();const Fn=/^\)\]\}',?\n/;let Xt=(()=>{class Ze{constructor(de){this.xhrFactory=de}handle(de){if("JSONP"===de.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ce.y(Xe=>{const ot=this.xhrFactory.build();if(ot.open(de.method,de.urlWithParams),de.withCredentials&&(ot.withCredentials=!0),de.headers.forEach((we,Ye)=>ot.setRequestHeader(we,Ye.join(","))),de.headers.has("Accept")||ot.setRequestHeader("Accept","application/json, text/plain, */*"),!de.headers.has("Content-Type")){const we=de.detectContentTypeHeader();null!==we&&ot.setRequestHeader("Content-Type",we)}if(de.responseType){const we=de.responseType.toLowerCase();ot.responseType="json"!==we?we:"text"}const rn=de.serializeBody();let yn=null;const Tn=()=>{if(null!==yn)return yn;const we=ot.statusText||"OK",Ye=new te(ot.getAllResponseHeaders()),et=function ar(Ze){return"responseURL"in Ze&&Ze.responseURL?Ze.responseURL:/^X-Request-URL:/m.test(Ze.getAllResponseHeaders())?Ze.getResponseHeader("X-Request-URL"):null}(ot)||de.url;return yn=new Tt({headers:Ye,status:ot.status,statusText:we,url:et}),yn},Nt=()=>{let{headers:we,status:Ye,statusText:et,url:jt}=Tn(),xe=null;204!==Ye&&(xe=typeof ot.response>"u"?ot.responseText:ot.response),0===Ye&&(Ye=xe?200:0);let G=Ye>=200&&Ye<300;if("json"===de.responseType&&"string"==typeof xe){const ie=xe;xe=xe.replace(Fn,"");try{xe=""!==xe?JSON.parse(xe):null}catch(Be){xe=ie,G&&(G=!1,xe={error:Be,text:xe})}}G?(Xe.next(new Wt({body:xe,headers:we,status:Ye,statusText:et,url:jt||void 0})),Xe.complete()):Xe.error(new Vt({error:xe,headers:we,status:Ye,statusText:et,url:jt||void 0}))},Nn=we=>{const{url:Ye}=Tn(),et=new Vt({error:we,status:ot.status||0,statusText:ot.statusText||"Unknown Error",url:Ye||void 0});Xe.error(et)};let pn=!1;const rr=we=>{pn||(Xe.next(Tn()),pn=!0);let Ye={type:_t.DownloadProgress,loaded:we.loaded};we.lengthComputable&&(Ye.total=we.total),"text"===de.responseType&&!!ot.responseText&&(Ye.partialText=ot.responseText),Xe.next(Ye)},Ft=we=>{let Ye={type:_t.UploadProgress,loaded:we.loaded};we.lengthComputable&&(Ye.total=we.total),Xe.next(Ye)};return ot.addEventListener("load",Nt),ot.addEventListener("error",Nn),ot.addEventListener("timeout",Nn),ot.addEventListener("abort",Nn),de.reportProgress&&(ot.addEventListener("progress",rr),null!==rn&&ot.upload&&ot.upload.addEventListener("progress",Ft)),ot.send(rn),Xe.next({type:_t.Sent}),()=>{ot.removeEventListener("error",Nn),ot.removeEventListener("abort",Nn),ot.removeEventListener("load",Nt),ot.removeEventListener("timeout",Nn),de.reportProgress&&(ot.removeEventListener("progress",rr),null!==rn&&ot.upload&&ot.upload.removeEventListener("progress",Ft)),ot.readyState!==ot.DONE&&ot.abort()}})}}return Ze.\u0275fac=function(de){return new(de||Ze)(F.LFG(p.JF))},Ze.\u0275prov=F.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})();const fn=new F.OlP("XSRF_COOKIE_NAME"),Pn=new F.OlP("XSRF_HEADER_NAME");class $n{}let br=(()=>{class Ze{constructor(de,Xe,ot){this.doc=de,this.platform=Xe,this.cookieName=ot,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const de=this.doc.cookie||"";return de!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,p.Mx)(de,this.cookieName),this.lastCookieString=de),this.lastToken}}return Ze.\u0275fac=function(de){return new(de||Ze)(F.LFG(p.K0),F.LFG(F.Lbi),F.LFG(fn))},Ze.\u0275prov=F.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),_r=(()=>{class Ze{constructor(de,Xe){this.tokenService=de,this.headerName=Xe}intercept(de,Xe){const ot=de.url.toLowerCase();if("GET"===de.method||"HEAD"===de.method||ot.startsWith("http://")||ot.startsWith("https://"))return Xe.handle(de);const rn=this.tokenService.getToken();return null!==rn&&!de.headers.has(this.headerName)&&(de=de.clone({headers:de.headers.set(this.headerName,rn)})),Xe.handle(de)}}return Ze.\u0275fac=function(de){return new(de||Ze)(F.LFG($n),F.LFG(Pn))},Ze.\u0275prov=F.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),xt=(()=>{class Ze{constructor(de,Xe){this.backend=de,this.injector=Xe,this.chain=null}handle(de){if(null===this.chain){const Xe=this.injector.get(Ke,[]);this.chain=Xe.reduceRight((ot,rn)=>new Ve(ot,rn),this.backend)}return this.chain.handle(de)}}return Ze.\u0275fac=function(de){return new(de||Ze)(F.LFG(Fe),F.LFG(F.zs3))},Ze.\u0275prov=F.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze})(),ur=(()=>{class Ze{static disable(){return{ngModule:Ze,providers:[{provide:_r,useClass:je}]}}static withOptions(de={}){return{ngModule:Ze,providers:[de.cookieName?{provide:fn,useValue:de.cookieName}:[],de.headerName?{provide:Pn,useValue:de.headerName}:[]]}}}return Ze.\u0275fac=function(de){return new(de||Ze)},Ze.\u0275mod=F.oAB({type:Ze}),Ze.\u0275inj=F.cJS({providers:[_r,{provide:Ke,useExisting:_r,multi:!0},{provide:$n,useClass:br},{provide:fn,useValue:"XSRF-TOKEN"},{provide:Pn,useValue:"X-XSRF-TOKEN"}]}),Ze})(),Br=(()=>{class Ze{}return Ze.\u0275fac=function(de){return new(de||Ze)},Ze.\u0275mod=F.oAB({type:Ze}),Ze.\u0275inj=F.cJS({providers:[Ue,{provide:ee,useClass:xt},Xt,{provide:Fe,useExisting:Xt}],imports:[ur.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Ze})()},4650:(Ht,Le,R)=>{R.d(Le,{$8M:()=>wn,$Z:()=>Uh,AFp:()=>ME,ALo:()=>Y0,AaK:()=>ee,AsE:()=>rg,CHM:()=>jo,CRH:()=>oE,CZH:()=>Dy,CqO:()=>mf,D6c:()=>OD,DdM:()=>H0,EJc:()=>qI,EpF:()=>Im,F4k:()=>Dm,FYo:()=>Cd,FiY:()=>Dr,G48:()=>gD,Gf:()=>iE,GfV:()=>Mg,Gpc:()=>fe,JOm:()=>ns,KtG:()=>Yi,LFG:()=>Vi,LSH:()=>Kl,Lbi:()=>zI,Lck:()=>Bw,MMx:()=>a_,NdJ:()=>Yp,O4$:()=>Er,OlP:()=>Mr,Oqu:()=>Jc,PXZ:()=>lD,Q6J:()=>pf,QGY:()=>Zd,QP$:()=>dt,Qsj:()=>Qy,R0b:()=>Au,RDi:()=>mg,Rgc:()=>dg,SBq:()=>ec,Sil:()=>YI,Suo:()=>sE,TTD:()=>ea,TgZ:()=>qd,Tol:()=>tg,VKq:()=>G0,X6Q:()=>pD,XFs:()=>xt,Xpm:()=>jt,Xts:()=>$f,Y36:()=>wl,YKP:()=>N0,YNc:()=>Wp,Yjl:()=>Y,Yz7:()=>Zt,Z0I:()=>vn,ZZ4:()=>P_,_Bn:()=>O0,_UZ:()=>Rs,_Vd:()=>Jl,_c5:()=>RD,_uU:()=>Hm,aQg:()=>O_,c2e:()=>WI,cJS:()=>tn,cg1:()=>cy,dDg:()=>sD,dqk:()=>ot,eFA:()=>$E,ekj:()=>_f,eoX:()=>UE,f3M:()=>Fl,g9A:()=>RE,h0i:()=>Sf,hGG:()=>PD,hij:()=>Df,iGM:()=>rE,ifc:()=>Xe,ip1:()=>SE,jDz:()=>F0,kL8:()=>dy,kcU:()=>Mo,lG2:()=>ae,lqb:()=>Zl,lri:()=>LE,n5z:()=>kn,oAB:()=>Be,oxw:()=>Qp,q4F:()=>Yf,qLn:()=>Vc,qOj:()=>Gd,qZA:()=>Ai,rWj:()=>VE,sBO:()=>mD,sIi:()=>zd,s_b:()=>Ey,soG:()=>Cy,tb:()=>PE,tp0:()=>vi,uIk:()=>Kc,vHH:()=>tt,vpe:()=>Pl,wAp:()=>Wn,xi3:()=>Q0,xp6:()=>xs,z2F:()=>by,zSh:()=>bh,zs3:()=>Qa});var p=R(7579),F=R(727),B=R(9751),ce=R(6451),he=R(3099);function Ie(n){for(let r in n)if(n[r]===Ie)return r;throw Error("Could not find renamed property on target object.")}function De(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function ee(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ee).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Fe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const te=Ie({__forward_ref__:Ie});function fe(n){return n.__forward_ref__=fe,n.toString=function(){return ee(this())},n}function Ee(n){return Dt(n)?n():n}function Dt(n){return"function"==typeof n&&n.hasOwnProperty(te)&&n.__forward_ref__===fe}class tt extends Error{constructor(r,o){super(function Rt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function qe(n){return"string"==typeof n?n:null==n?"":String(n)}function rt(n,r){throw new tt(-201,!1)}function je(n,r){null==n&&function Je(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function Zt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function un(n){return Fn(n,Pn)||Fn(n,br)}function vn(n){return null!==un(n)}function Fn(n,r){return n.hasOwnProperty(r)?n[r]:null}function fn(n){return n&&(n.hasOwnProperty($n)||n.hasOwnProperty(_r))?n[$n]:null}const Pn=Ie({\u0275prov:Ie}),$n=Ie({\u0275inj:Ie}),br=Ie({ngInjectableDef:Ie}),_r=Ie({ngInjectorDef:Ie});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let Rn;function ur(n){const r=Rn;return Rn=n,r}function Br(n,r,o){const u=un(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&xt.Optional?null:void 0!==r?r:void rt(ee(n))}function qn(n){return{toString:n}.toString()}var Ze=(()=>((Ze=Ze||{})[Ze.OnPush=0]="OnPush",Ze[Ze.Default=1]="Default",Ze))(),Xe=(()=>{return(n=Xe||(Xe={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Xe;var n})();const ot=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tn={},Nt=[],Nn=Ie({\u0275cmp:Ie}),pn=Ie({\u0275dir:Ie}),rr=Ie({\u0275pipe:Ie}),Ft=Ie({\u0275mod:Ie}),we=Ie({\u0275fac:Ie}),Ye=Ie({__NG_ELEMENT_ID__:Ie});let et=0;function jt(n){return qn(()=>{const o=!0===n.standalone,u={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ze.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Xe.Emulated,id:"c"+et++,styles:n.styles||Nt,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,m=n.features;return l.inputs=le(n.inputs,u),l.outputs=le(n.outputs),m&&m.forEach(C=>C(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(G).filter(ie):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(Te).filter(ie):null,l})}function G(n){return K(n)||H(n)}function ie(n){return null!==n}function Be(n){return qn(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function le(n,r){if(null==n)return Tn;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=u,r&&(r[l]=h)}return o}const ae=jt;function Y(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function K(n){return n[Nn]||null}function H(n){return n[pn]||null}function Te(n){return n[rr]||null}function dt(n){const r=K(n)||H(n)||Te(n);return null!==r&&r.standalone}function $t(n,r){const o=n[Ft]||null;if(!o&&!0===r)throw new Error(`Type ${ee(n)} does not have '\u0275mod' property.`);return o}function qr(n){return Array.isArray(n)&&"object"==typeof n[1]}function $r(n){return Array.isArray(n)&&!0===n[1]}function Ks(n){return 0!=(8&n.flags)}function Xr(n){return 2==(2&n.flags)}function os(n){return 1==(1&n.flags)}function Nr(n){return null!==n.template}function Bi(n){return 0!=(256&n[2])}function ci(n,r){return n.hasOwnProperty(we)?n[we]:null}class di{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ea(){return as}function as(n){return n.type.prototype.ngOnChanges&&(n.setInput=us),Lo}function Lo(){const n=Co(this),r=n?.current;if(r){const o=n.previous;if(o===Tn)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function us(n,r,o,u){const l=Co(n)||function Ls(n,r){return n[Vo]=r}(n,{previous:Tn,current:null}),h=l.current||(l.current={}),m=l.previous,C=this.declaredInputs[o],S=m[C];h[C]=new di(S&&S.currentValue,r,m===Tn),n[u]=r}ea.ngInherit=!0;const Vo="__ngSimpleChanges__";function Co(n){return n[Vo]||null}function yr(n){for(;Array.isArray(n);)n=n[0];return n}function ji(n,r){return yr(r[n])}function hi(n,r){return yr(r[n.index])}function bo(n,r){return n.data[r]}function ti(n,r){const o=r[n];return qr(o)?o:o[0]}function Uo(n){return 64==(64&n[2])}function gi(n,r){return null==r?null:n[r]}function zr(n){n[18]=0}function Es(n,r){n[5]+=r;let o=n,u=n[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const On={lFrame:fo(null),bindingsEnabled:!0};function To(){return On.bindingsEnabled}function It(){return On.lFrame.lView}function Jn(){return On.lFrame.tView}function jo(n){return On.lFrame.contextLView=n,n[8]}function Yi(n){return On.lFrame.contextLView=null,n}function Pr(){let n=k();for(;null!==n&&64===n.type;)n=n.parent;return n}function k(){return On.lFrame.currentTNode}function M(n,r){const o=On.lFrame;o.currentTNode=n,o.isParent=r}function q(){return On.lFrame.isParent}function mi(){const n=On.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Bs(){return On.lFrame.bindingIndex++}function ni(n){const r=On.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function va(n,r){const o=On.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ho(r)}function Ho(n){On.lFrame.currentDirectiveIndex=n}function Ao(){return On.lFrame.currentQueryIndex}function Fi(n){On.lFrame.currentQueryIndex=n}function js(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function _a(n,r,o){if(o&xt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||o&xt.Host||(l=js(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const u=On.lFrame=zo();return u.currentTNode=r,u.lView=n,!0}function eo(n){const r=zo(),o=n[1];On.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function zo(){const n=On.lFrame,r=null===n?null:n.child;return null===r?fo(n):r}function fo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function So(){const n=On.lFrame;return On.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xi=So;function ds(){const n=So();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function pr(){return On.lFrame.selectedIndex}function Ii(n){On.lFrame.selectedIndex=n}function vr(){const n=On.lFrame;return bo(n.tView,n.selectedIndex)}function Er(){On.lFrame.currentNamespace="svg"}function Mo(){!function Ri(){On.lFrame.currentNamespace=null}()}function Cs(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const h=n.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:L,ngOnDestroy:Z}=h;m&&(n.contentHooks||(n.contentHooks=[])).push(-o,m),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),S&&(n.viewHooks||(n.viewHooks=[])).push(-o,S),L&&((n.viewHooks||(n.viewHooks=[])).push(o,L),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,L)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Z)}}function to(n,r,o){$i(n,r,3,o)}function ia(n,r,o,u){(3&n[2])===o&&$i(n,r,o,u)}function hs(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function $i(n,r,o,u){const h=u??-1,m=r.length-1;let C=0;for(let S=void 0!==u?65535&n[18]:0;S<m;S++)if("number"==typeof r[S+1]){if(C=r[S],null!=u&&C>=u)break}else r[S]<0&&(n[18]+=65536),(C<h||-1==h)&&(Di(n,o,r,S),n[18]=(4294901760&n[18])+S+2),S++}function Di(n,r,o,u){const l=o[u]<0,h=o[u+1],C=n[l?-o[u]:o[u]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class no{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function W(n,r,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const h=o[u++],m=o[u++],C=o[u++];n.setAttribute(r,m,C,h)}else{const h=l,m=o[++u];st(h)?n.setProperty(r,h,m):n.setAttribute(r,h,m),u++}}return u}function _e(n){return 3===n||4===n||6===n}function st(n){return 64===n.charCodeAt(0)}function mt(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const l=r[u];"number"==typeof l?o=l:0===o||En(n,o,l,null,-1===o||2===o?r[++u]:null)}}return n}function En(n,r,o,u,l){let h=0,m=n.length;if(-1===r)m=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){m=-1;break}if(C>r){m=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==l&&(n[h+1]=l));if(u===n[h+1])return void(n[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(n.splice(m,0,r),h=m+1),n.splice(h++,0,o),null!==u&&n.splice(h++,0,u),null!==l&&n.splice(h++,0,l)}function gr(n){return-1!==n}function tr(n){return 32767&n}function Cn(n,r){let o=function wr(n){return n>>16}(n),u=r;for(;o>0;)u=u[15],o--;return u}let Sr=!0;function Hn(n){const r=Sr;return Sr=n,r}let Ir=0;const Lr={};function sn(n,r){const o=sa(n,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,gn(u.data,n),gn(r,null),gn(u.blueprint,null));const l=Yt(n,r),h=n.injectorIndex;if(gr(l)){const m=tr(l),C=Cn(l,r),S=C[1].data;for(let L=0;L<8;L++)r[h+L]=C[m+L]|S[m+L]}return r[h+8]=l,h}function gn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function sa(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Yt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=r;for(;null!==l;){if(u=Hr(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Qe(n,r,o){!function go(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Ye)&&(u=o[Ye]),null==u&&(u=o[Ye]=Ir++);const l=255&u;r.data[n+(l>>5)]|=1<<l}(n,r,o)}function ri(n,r,o){if(o&xt.Optional||void 0!==n)return n;rt()}function Su(n,r,o,u){if(o&xt.Optional&&void 0===u&&(u=null),0==(o&(xt.Self|xt.Host))){const l=n[9],h=ur(void 0);try{return l?l.get(r,u,o&xt.Optional):Br(r,u,o&xt.Optional)}finally{ur(h)}}return ri(u,0,o)}function Mu(n,r,o,u=xt.Default,l){if(null!==n){if(1024&r[2]){const m=function ja(n,r,o,u,l){let h=n,m=r;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const C=wa(h,m,o,u|xt.Self,Lr);if(C!==Lr)return C;let S=h.parent;if(!S){const L=m[21];if(L){const Z=L.get(o,Lr,u);if(Z!==Lr)return Z}S=Hr(m),m=m[15]}h=S}return l}(n,r,o,u,Lr);if(m!==Lr)return m}const h=wa(n,r,o,u,Lr);if(h!==Lr)return h}return Su(r,o,u,l)}function wa(n,r,o,u,l){const h=function Ol(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Ye)?n[Ye]:void 0;return"number"==typeof r?r>=0?255&r:yi:r}(o);if("function"==typeof h){if(!_a(r,n,u))return u&xt.Host?ri(l,0,u):Su(r,o,u,l);try{const m=h(u);if(null!=m||u&xt.Optional)return m;rt()}finally{xi()}}else if("number"==typeof h){let m=null,C=sa(n,r),S=-1,L=u&xt.Host?r[16][6]:null;for((-1===C||u&xt.SkipSelf)&&(S=-1===C?Yt(n,r):r[C+8],-1!==S&&Ko(u,!1)?(m=r[1],C=tr(S),r=Cn(S,r)):C=-1);-1!==C;){const Z=r[1];if(Nl(h,C,Z.data)){const se=tl(C,r,o,m,u,L);if(se!==Lr)return se}S=r[C+8],-1!==S&&Ko(u,r[1].data[C+8]===L)&&Nl(h,C,r)?(m=Z,C=tr(S),r=Cn(S,r)):C=-1}}return l}function tl(n,r,o,u,l,h){const m=r[1],C=m.data[n+8],Z=Ba(C,m,o,null==u?Xr(C)&&Sr:u!=m&&0!=(3&C.type),l&xt.Host&&h===C);return null!==Z?oa(r,m,Z,C):Lr}function Ba(n,r,o,u,l){const h=n.providerIndexes,m=r.data,C=1048575&h,S=n.directiveStart,Z=h>>20,Ae=l?C+Z:n.directiveEnd;for(let We=u?C:C+Z;We<Ae;We++){const bt=m[We];if(We<S&&o===bt||We>=S&&bt.type===o)return We}if(l){const We=m[S];if(We&&Nr(We)&&We.type===o)return S}return null}function oa(n,r,o,u){let l=n[o];const h=r.data;if(function Wo(n){return n instanceof no}(l)){const m=l;m.resolving&&function Pt(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new tt(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Re(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():qe(n)}(h[o]));const C=Hn(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?ur(m.injectImpl):null;_a(n,u,xt.Default);try{l=n[o]=m.factory(void 0,h,n,u),r.firstCreatePass&&o>=u.directiveStart&&function Ds(n,r,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(u){const m=as(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,h))}(o,h[o],r)}finally{null!==S&&ur(S),Hn(C),m.resolving=!1,xi()}}return l}function Nl(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Ko(n,r){return!(n&xt.Self||n&xt.Host&&r)}class ii{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return Mu(this._tNode,this._lView,r,u,o)}}function yi(){return new ii(Pr(),It())}function kn(n){return qn(()=>{const r=n.prototype.constructor,o=r[we]||bs(r),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const h=l[we]||bs(l);if(h&&h!==o)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function bs(n){return Dt(n)?()=>{const r=bs(Ee(n));return r&&r()}:ci(n)}function Hr(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function wn(n){return function Ot(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const h=o[l];if(_e(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(h===r)return o[l+1];l+=2}}}return null}(Pr(),n)}const Sn="__parameters__";function Ji(n,r,o){return qn(()=>{const u=function Qt(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(r);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return C.annotation=m,C;function C(S,L,Z){const se=S.hasOwnProperty(Sn)?S[Sn]:Object.defineProperty(S,Sn,{value:[]})[Sn];for(;se.length<=Z;)se.push(null);return(se[Z]=se[Z]||[]).push(m),S}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Mr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Zt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ci(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(r===n&&(r=n.slice(0,o)),Ci(u,r)):r!==n&&r.push(u)}return r}function Li(n,r){n.forEach(o=>Array.isArray(o)?Li(o,r):r(o))}function iu(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function $s(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function _(n,r,o){let u=y(n,r);return u>=0?n[1|u]=o:(u=~u,function kl(n,r,o,u){let l=n.length;if(l==r)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function E(n,r){const o=y(n,r);if(o>=0)return n[1|o]}function y(n,r){return function O(n,r,o){let u=0,l=n.length>>o;for(;l!==u;){const h=u+(l-u>>1),m=n[h<<o];if(r===m)return h<<o;m>r?l=h:u=h+1}return~(l<<o)}(n,r,1)}const fi={},oo="__NG_DI_FLAG__",Qr="ngTempTokenPath",Ta=/\n/gm,il="__source";let ou;function Ss(n){const r=ou;return ou=n,r}function au(n,r=xt.Default){if(void 0===ou)throw new tt(-203,!1);return null===ou?Br(n,void 0,r):ou.get(n,r&xt.Optional?null:void 0,r)}function Vi(n,r=xt.Default){return(function Un(){return Rn}()||au)(Ee(n),r)}function Fl(n,r=xt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Vi(n,r)}function sl(n){const r=[];for(let o=0;o<n.length;o++){const u=Ee(n[o]);if(Array.isArray(u)){if(0===u.length)throw new tt(900,!1);let l,h=xt.Default;for(let m=0;m<u.length;m++){const C=u[m],S=Hi(C);"number"==typeof S?-1===S?l=C.token:h|=S:l=C}r.push(Vi(l,h))}else r.push(Vi(u))}return r}function ua(n,r){return n[oo]=r,n.prototype[oo]=r,n}function Hi(n){return n[oo]}const Dr=ua(Ji("Optional"),8),vi=ua(Ji("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const ne=new Map;let ye=0;const _i="__ngContext__";function Ui(n,r){qr(r)?(n[_i]=r[20],function ct(n){ne.set(n[20],n)}(r)):n[_i]=r}function hl(n,r){return undefined(n,r)}function fl(n){const r=n[3];return $r(r)?r[3]:r}function Ac(n){return d(n[13])}function v(n){return d(n[4])}function d(n){for(;null!==n&&!$r(n);)n=n[4];return n}function I(n,r,o,u,l){if(null!=u){let h,m=!1;$r(u)?h=u:qr(u)&&(m=!0,u=u[0]);const C=yr(u);0===n&&null!==o?null==l?ad(r,o,C):Za(r,o,C,l||null,!0):1===n&&null!==o?Za(r,o,C,l||null,!0):2===n?function hh(n,r,o){const u=ld(n,r);u&&function ud(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}(r,C,m):3===n&&r.destroyNode(C),null!=h&&function My(n,r,o,u,l){const h=o[7];h!==yr(o)&&I(r,n,u,h,l);for(let C=10;C<o.length;C++){const S=o[C];Mc(S[1],S,n,r,u,h)}}(r,n,h,o,l)}}function lt(n,r,o){return n.createElement(r,o)}function $l(n,r){const o=n[9],u=o.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Es(l,-1)),o.splice(u,1)}function Ms(n,r){if(n.length<=10)return;const o=10+r,u=n[o];if(u){const l=u[17];null!==l&&l!==n&&$l(l,u),r>0&&(n[o-1][4]=u[4]);const h=$s(n,10+r);!function zt(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Hl(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Mc(n,r,o,3,null,null),function mr(n){let r=n[13];if(!r)return mu(n[1],n);for(;r;){let o=null;if(qr(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==n;)qr(r)&&mu(r[1],r),r=r[3];null===r&&(r=n),qr(r)&&mu(r[1],r),o=r&&r[4]}r=o}}(r)}}function mu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Xo(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=r[o[u]];if(!(l instanceof no)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const C=l[h[m]],S=h[m+1];try{S.call(C)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function od(n,r){const o=n.cleanup,u=r[7];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],C="function"==typeof m?m(r):yr(r[m]),S=u[l=o[h+2]],L=o[h+3];"boolean"==typeof L?C.removeEventListener(o[h],S,L):L>=0?u[l=L]():u[l=-L].unsubscribe(),h+=2}else{const m=u[l=o[h+1]];o[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)(0,u[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&$r(r[3])){o!==r[3]&&$l(o,r);const u=r[19];null!==u&&u.detachView(n)}!function Jt(n){ne.delete(n[20])}(r)}}function Sc(n,r,o){return function ju(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const l=n.data[u.directiveStart].encapsulation;if(l===Xe.None||l===Xe.Emulated)return null}return hi(u,o)}(n,r.parent,o)}function Za(n,r,o,u,l){n.insertBefore(r,o,u,l)}function ad(n,r,o){n.appendChild(r,o)}function lr(n,r,o,u,l){null!==u?Za(n,r,o,u,l):ad(n,r,o)}function ld(n,r){return n.parentNode(r)}let Ya,pg=function cd(n,r,o){return 40&n.type?hi(n,o):null};function $u(n,r,o,u){const l=Sc(n,u,r),h=r[11],C=function Of(n,r,o){return pg(n,r,o)}(u.parent||r[6],u,r);if(null!=l)if(Array.isArray(o))for(let S=0;S<o.length;S++)lr(h,l,o[S],C,!1);else lr(h,l,o,C,!1)}function yu(n,r){if(null!==r){const o=r.type;if(3&o)return hi(r,n);if(4&o)return Hu(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return yu(n,u);{const l=n[r.index];return $r(l)?Hu(-1,l):yr(l)}}if(32&o)return hl(r,n)()||yr(n[r.index]);{const u=Ff(n,r);return null!==u?Array.isArray(u)?u[0]:yu(fl(n[16]),u):yu(n,r.next)}}return null}function Ff(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Hu(n,r){const o=10+n+1;if(o<r.length){const u=r[o],l=u[1].firstChild;if(null!==l)return yu(u,l)}return r[7]}function pl(n,r,o,u,l,h,m){for(;null!=o;){const C=u[o.index],S=o.type;if(m&&0===r&&(C&&Ui(yr(C),u),o.flags|=4),64!=(64&o.flags))if(8&S)pl(n,r,o.child,u,l,h,!1),I(r,n,l,C,h);else if(32&S){const L=hl(o,u);let Z;for(;Z=L();)I(r,n,l,Z,h);I(r,n,l,C,h)}else 16&S?xc(n,r,u,o,l,h):I(r,n,l,C,h);o=m?o.projectionNext:o.next}}function Mc(n,r,o,u,l,h){pl(o,u,n.firstChild,r,l,h,!1)}function xc(n,r,o,u,l,h){const m=o[16],S=m[6].projection[u.projection];if(Array.isArray(S))for(let L=0;L<S.length;L++)I(r,n,l,S[L],h);else pl(n,r,S,m[3],l,h,!0)}function Ti(n,r,o){n.setAttribute(r,"style",o)}function Rc(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function mg(n){Ya=n}class yh{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Gu(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rs=(()=>((rs=rs||{})[rs.NONE=0]="NONE",rs[rs.HTML=1]="HTML",rs[rs.STYLE=2]="STYLE",rs[rs.SCRIPT=3]="SCRIPT",rs[rs.URL=4]="URL",rs[rs.RESOURCE_URL=5]="RESOURCE_URL",rs))();function Kl(n){const r=function Ed(){const n=It();return n&&n[12]}();return r?r.sanitize(rs.URL,n)||"":function Wl(n,r){const o=function vh(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?Gu(n):function Eh(n){return(n=String(n)).match(_g)?n:"unsafe:"+n}(qe(n))}const $f=new Mr("ENVIRONMENT_INITIALIZER"),zu=new Mr("INJECTOR",-1),ql=new Mr("INJECTOR_DEF_TYPES");class Hf{get(r,o=fi){if(o===fi){const u=new Error(`NullInjectorError: No provider for ${ee(r)}!`);throw u.name="NullInjectorError",u}return o}}function Gy(...n){return{\u0275providers:Gf(0,n)}}function Gf(n,...r){const o=[],u=new Set;let l;return Li(r,h=>{const m=h;Ch(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&Eu(l,o),o}function Eu(n,r){for(let o=0;o<n.length;o++){const{providers:l}=n[o];Li(l,h=>{r.push(h)})}}function Ch(n,r,o,u){if(!(n=Ee(n)))return!1;let l=null,h=fn(n);const m=!h&&K(n);if(h||m){if(m&&!m.standalone)return!1;l=n}else{const S=n.ngModule;if(h=fn(S),!h)return!1;l=S}const C=u.has(l);if(m){if(C)return!1;if(u.add(l),m.dependencies){const S="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const L of S)Ch(L,r,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let L;u.add(l);try{Li(h.imports,Z=>{Ch(Z,r,o,u)&&(L||(L=[]),L.push(Z))})}finally{}void 0!==L&&Eu(L,r)}if(!C){const L=ci(l)||(()=>new l);r.push({provide:l,useFactory:L,deps:Nt},{provide:ql,useValue:l,multi:!0},{provide:$f,useValue:()=>Vi(l),multi:!0})}const S=h.providers;null==S||C||Li(S,Z=>{r.push(Z)})}}return l!==n&&void 0!==n.providers}const bg=Ie({provide:String,useValue:Ie});function Nc(n){return null!==n&&"object"==typeof n&&bg in n}function fa(n){return"function"==typeof n}const bh=new Mr("Set Injector scope."),kc={},zf={};let Th;function Id(){return void 0===Th&&(Th=new Hf),Th}class Zl{}class Wf extends Zl{constructor(r,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yl(r,m=>this.processProvider(m)),this.records.set(zu,Fc(void 0,this)),l.has("environment")&&this.records.set(Zl,Fc(void 0,this));const h=this.records.get(bh);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(ql.multi,Nt,xt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ss(this),u=ur(void 0);try{return r()}finally{Ss(o),ur(u)}}get(r,o=fi,u=xt.Default){this.assertNotDestroyed();const l=Ss(this),h=ur(void 0);try{if(!(u&xt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const S=function Wy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Mr}(r)&&un(r);C=S&&this.injectableDefInScope(S)?Fc(Ah(r),kc):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(u&xt.Self?Id():this.parent).get(r,o=u&xt.Optional&&o===fi?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Qr]=m[Qr]||[]).unshift(ee(r)),l)throw m;return function Sa(n,r,o,u){const l=n[Qr];throw r[il]&&l.unshift(r[il]),n.message=function Wa(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=ee(r);if(Array.isArray(r))l=r.map(ee).join(" -> ");else if("object"==typeof r){let h=[];for(let m in r)if(r.hasOwnProperty(m)){let C=r[m];h.push(m+":"+("string"==typeof C?JSON.stringify(C):ee(C)))}l=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(Ta,"\n  ")}`}("\n"+n.message,l,o,u),n.ngTokenPath=l,n[Qr]=null,n}(m,r,"R3InjectorError",this.source)}throw m}finally{ur(h),Ss(l)}}resolveInjectorInitializers(){const r=Ss(this),o=ur(void 0);try{const u=this.get($f.multi,Nt,xt.Self);for(const l of u)l()}finally{Ss(r),ur(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(ee(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tt(205,!1)}processProvider(r){let o=fa(r=Ee(r))?r:Ee(r&&r.provide);const u=function Dd(n){return Nc(n)?Fc(void 0,n.useValue):Fc(_l(n),kc)}(r);if(fa(r)||!0!==r.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Fc(void 0,kc,!0),l.factory=()=>sl(l.multi),this.records.set(o,l)),o=r,l.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kc&&(o.value=zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function zy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ee(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ah(n){const r=un(n),o=null!==r?r.factory:ci(n);if(null!==o)return o;if(n instanceof Mr)throw new tt(204,!1);if(n instanceof Function)return function Sh(n){const r=n.length;if(r>0)throw function ba(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}(r,"?"),new tt(204,!1);const o=function ar(n){const r=n&&(n[Pn]||n[br]);if(r){const o=function Xt(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new tt(204,!1)}function _l(n,r,o){let u;if(fa(n)){const l=Ee(n);return ci(l)||Ah(l)}if(Nc(n))u=()=>Ee(n.useValue);else if(function vl(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...sl(n.deps||[]));else if(function yl(n){return!(!n||!n.useExisting)}(n))u=()=>Vi(Ee(n.useExisting));else{const l=Ee(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return ci(l)||Ah(l);u=()=>new l(...sl(n.deps))}return u}function Fc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ky(n){return!!n.\u0275providers}function Yl(n,r){for(const o of n)Array.isArray(o)?Yl(o,r):Ky(o)?Yl(o.\u0275providers,r):r(o)}class Wu{}class Zy{resolveComponentFactory(r){throw function Ag(n){const r=Error(`No component factory found for ${ee(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jl=(()=>{class n{}return n.NULL=new Zy,n})();function Kf(){return Xl(Pr(),It())}function Xl(n,r){return new ec(hi(n,r))}let ec=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Kf,n})();function qf(n){return n instanceof ec?n.nativeElement:n}class Cd{}let Qy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Zf(){const n=It(),o=ti(Pr().index,n);return(qr(o)?o:n)[11]}(),n})(),Mh=(()=>{class n{}return n.\u0275prov=Zt({token:n,providedIn:"root",factory:()=>null}),n})();class Mg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Yf=new Mg("14.3.0"),tc={};function xh(n){return n.ngOriginalError}class Vc{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&xh(r);for(;o&&xh(o);)o=xh(o);return o||null}}function Oo(n){return n instanceof Function?n():n}function Jf(n,r,o){let u=n.length;for(;;){const l=n.indexOf(r,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===u||n.charCodeAt(l+h)<=32)return l}o=l+1}}const Xf="ng-template";function ev(n,r,o){let u=0;for(;u<n.length;){let l=n[u++];if(o&&"class"===l){if(l=n[u],-1!==Jf(l.toLowerCase(),r,0))return!0}else if(1===l){for(;u<n.length&&"string"==typeof(l=n[u++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Td(n){return 4===n.type&&n.value!==Xf}function Pg(n,r,o){return r===(4!==n.type||o?n.value:Xf)}function tv(n,r,o){let u=4;const l=n.attrs||[],h=function Ad(n){for(let r=0;r<n.length;r++)if(_e(n[r]))return r;return n.length}(l);let m=!1;for(let C=0;C<r.length;C++){const S=r[C];if("number"!=typeof S){if(!m)if(4&u){if(u=2|1&u,""!==S&&!Pg(n,S,o)||""===S&&1===r.length){if(Na(u))return!1;m=!0}}else{const L=8&u?S:r[++C];if(8&u&&null!==n.attrs){if(!ev(n.attrs,L,o)){if(Na(u))return!1;m=!0}continue}const se=nv(8&u?"class":S,l,Td(n),o);if(-1===se){if(Na(u))return!1;m=!0;continue}if(""!==L){let Ae;Ae=se>h?"":l[se+1].toLowerCase();const We=8&u?Ae:null;if(We&&-1!==Jf(We,L,0)||2&u&&L!==Ae){if(Na(u))return!1;m=!0}}}}else{if(!m&&!Na(u)&&!Na(S))return!1;if(m&&Na(S))continue;m=!1,u=S|1&u}}return Na(u)||m}function Na(n){return 0==(1&n)}function nv(n,r,o,u){if(null===r)return-1;let l=0;if(u||!o){let h=!1;for(;l<r.length;){const m=r[l];if(m===n)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Og(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ep(n,r,o=!1){for(let u=0;u<r.length;u++)if(tv(n,r[u],o))return!0;return!1}function kg(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],o=1,u=2,l="",h=!1;for(;o<n.length;){let m=n[o];if("string"==typeof m)if(2&u){const C=n[++o];l+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Na(m)&&(r+=kg(h,l),l=""),u=m,h=h||!Na(u);o++}return""!==l&&(r+=kg(h,l)),r}const or={};function xs(n){Lg(Jn(),It(),pr()+n,!1)}function Lg(n,r,o,u){if(!u)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&to(r,h,o)}else{const h=n.preOrderHooks;null!==h&&ia(r,h,0,o)}Ii(o)}function kh(n,r=null,o=null,u){const l=Fh(n,r,o,u);return l.resolveInjectorInitializers(),l}function Fh(n,r=null,o=null,u,l=new Set){const h=[o||Nt,Gy(n)];return u=u||("object"==typeof n?void 0:ee(n)),new Wf(h,r||Id(),u||null,l)}let Qa=(()=>{class n{static create(o,u){if(Array.isArray(o))return kh({name:""},u,o,"");{const l=o.name??"";return kh({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=fi,n.NULL=new Hf,n.\u0275prov=Zt({token:n,providedIn:"any",factory:()=>Vi(zu)}),n.__NG_ELEMENT_ID__=-1,n})();function wl(n,r=xt.Default){const o=It();return null===o?Vi(n,r):Mu(Pr(),o,Ee(n),r)}function Uh(){throw new Error("invalid")}function Bh(n,r){return n<<17|r<<2}function ka(n){return n>>17&32767}function cp(n){return 2|n}function qu(n){return(131068&n)>>2}function Gs(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function Kh(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],h=o[u+1];if(-1!==h){const m=n.data[h];Fi(l),m.contentQueries(2,r[h],h)}}}function Ld(n,r,o,u,l,h,m,C,S,L,Z){const se=r.blueprint.slice();return se[0]=l,se[2]=76|u,(null!==Z||n&&1024&n[2])&&(se[2]|=1024),zr(se),se[3]=se[15]=n,se[8]=o,se[10]=m||n&&n[10],se[11]=C||n&&n[11],se[12]=S||n&&n[12]||null,se[9]=L||n&&n[9]||null,se[6]=h,se[20]=function Se(){return ye++}(),se[21]=Z,se[16]=2==r.type?n[16]:se,se}function Dl(n,r,o,u,l){let h=n.data[r];if(null===h)h=function Vd(n,r,o,u,l){const h=k(),m=q(),S=n.data[r]=function Tp(n,r,o,u,l,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,r,u,l);return null===n.firstChild&&(n.firstChild=S),null!==h&&(m?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(n,r,o,u,l),function Is(){return On.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=l;const m=function P(){const n=On.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return M(h,!0),h}function Cl(n,r,o,u){if(0===o)return-1;const l=r.length;for(let h=0;h<o;h++)r.push(u),n.blueprint.push(u),n.data.push(null);return l}function bl(n,r,o){eo(r);try{const u=n.viewQuery;null!==u&&jd(1,u,o);const l=n.template;null!==l&&qh(n,r,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kh(n,r),n.staticViewQueries&&jd(2,n.viewQuery,o);const h=n.components;null!==h&&function Dp(n,r){for(let o=0;o<r.length;o++)Mv(n,r[o])}(r,h)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,ds()}}function Ja(n,r,o,u){const l=r[2];if(128!=(128&l)){eo(r);try{zr(r),function Qi(n){return On.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&qh(n,r,o,2,u);const m=3==(3&l);if(m){const L=n.preOrderCheckHooks;null!==L&&to(r,L,null)}else{const L=n.preOrderHooks;null!==L&&ia(r,L,0,null),hs(r,0)}if(function Pp(n){for(let r=Ac(n);null!==r;r=v(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const l=o[u],h=l[3];0==(512&l[2])&&Es(h,1),l[2]|=512}}}(r),function Av(n){for(let r=Ac(n);null!==r;r=v(r))for(let o=10;o<r.length;o++){const u=r[o],l=u[1];Uo(u)&&Ja(l,u,l.template,u[8])}}(r),null!==n.contentQueries&&Kh(n,r),m){const L=n.contentCheckHooks;null!==L&&to(r,L)}else{const L=n.contentHooks;null!==L&&ia(r,L,1),hs(r,1)}!function Ev(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Ii(~l);else{const h=l,m=o[++u],C=o[++u];va(m,h),C(2,r[h])}}}finally{Ii(-1)}}(n,r);const C=n.components;null!==C&&function wv(n,r){for(let o=0;o<r.length;o++)Sv(n,r[o])}(r,C);const S=n.viewQuery;if(null!==S&&jd(2,S,u),m){const L=n.viewCheckHooks;null!==L&&to(r,L)}else{const L=n.viewHooks;null!==L&&ia(r,L,2),hs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Es(r[3],-1))}finally{ds()}}}function qh(n,r,o,u,l){const h=pr(),m=2&u;try{Ii(-1),m&&r.length>22&&Lg(n,r,22,!1),o(u,l)}finally{Ii(h)}}function Tl(n,r,o){!To()||(function Dv(n,r,o,u){const l=o.directiveStart,h=o.directiveEnd;n.firstCreatePass||sn(o,r),Ui(u,r);const m=o.initialInputs;for(let C=l;C<h;C++){const S=n.data[C],L=Nr(S);L&&Tv(r,o,S);const Z=oa(r,n,C,o);Ui(Z,r),null!==m&&Rp(0,C-l,Z,S,0,m),L&&(ti(o.index,r)[8]=Z)}}(n,r,o,hi(o,r)),128==(128&o.flags)&&function Cv(n,r,o){const u=o.directiveStart,l=o.directiveEnd,h=o.index,m=function $o(){return On.lFrame.currentDirectiveIndex}();try{Ii(h);for(let C=u;C<l;C++){const S=n.data[C],L=r[C];Ho(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&lm(S,L)}}finally{Ii(-1),Ho(m)}}(n,r,o))}function Zh(n,r,o=hi){const u=r.localNames;if(null!==u){let l=r.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],C=-1===m?o(r,n):n[m];n[l++]=C}}}function dc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cp(n,r,o,u,l,h,m,C,S,L){const Z=22+u,se=Z+l,Ae=function Iv(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:or);return o}(Z,se),We="function"==typeof L?L():L;return Ae[1]={type:n,blueprint:Ae,template:o,queries:null,viewQuery:C,declTNode:r,data:Ae.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:We,incompleteFirstPass:!1}}function Yh(n,r,o,u){const l=nf(r);null===o?l.push(u):(l.push(o),n.firstCreatePass&&Iu(n).push(u,l.length-1))}function rm(n,r,o){for(let u in n)if(n.hasOwnProperty(u)){const l=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,l):o[u]=[r,l]}return o}function im(n,r){const u=r.directiveEnd,l=n.data,h=r.attrs,m=[];let C=null,S=null;for(let L=r.directiveStart;L<u;L++){const Z=l[L],se=Z.inputs,Ae=null===h||Td(r)?null:dm(se,h);m.push(Ae),C=rm(se,L,C),S=rm(Z.outputs,L,S)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=m,r.inputs=C,r.outputs=S}function sm(n,r){const o=ti(r,n);16&o[2]||(o[2]|=32)}function Qh(n,r,o,u){let l=!1;if(To()){const h=function bv(n,r,o){const u=n.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];ep(o,m.selectors,!1)&&(l||(l=[]),Qe(sn(o,r),n,m.type),Nr(m)?(Jh(n,o),l.unshift(m)):l.push(m))}return l}(n,r,o),m=null===u?null:{"":-1};if(null!==h){l=!0,cm(o,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const se=h[Z];se.providersResolver&&se.providersResolver(se)}let C=!1,S=!1,L=Cl(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const se=h[Z];o.mergedAttrs=mt(o.mergedAttrs,se.hostAttrs),Xh(n,o,r,L,se),xp(L,se,m),null!==se.contentQueries&&(o.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(o.flags|=128);const Ae=se.type.prototype;!C&&(Ae.ngOnChanges||Ae.ngOnInit||Ae.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!S&&(Ae.ngOnChanges||Ae.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),S=!0),L++}im(n,o)}m&&function Mp(n,r,o){if(r){const u=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=o[r[l+1]];if(null==h)throw new tt(-301,!1);u.push(r[l],h)}}}(o,u,m)}return o.mergedAttrs=mt(o.mergedAttrs,o.attrs),l}function Sp(n,r,o,u,l,h){const m=h.hostBindings;if(m){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const S=~r.index;(function um(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(C)!=S&&C.push(S),C.push(u,l,m)}}function lm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Jh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;Nr(r)&&(o[""]=n)}}function cm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Xh(n,r,o,u,l){n.data[u]=l;const h=l.factory||(l.factory=ci(l.type)),m=new no(h,Nr(l),wl);n.blueprint[u]=m,o[u]=m,Sp(n,r,0,u,Cl(n,o,l.hostVars,or),l)}function Tv(n,r,o){const u=hi(r,n),l=dc(o),h=n[10],m=$c(n,Ld(n,l,null,o.onPush?32:16,u,r,h,h.createRenderer(u,o),null,null,null));n[r.index]=m}function Fa(n,r,o,u,l,h){const m=hi(n,r);!function ef(n,r,o,u,l,h,m){if(null==h)n.removeAttribute(r,l,o);else{const C=null==m?qe(h):m(h,u||"",l);n.setAttribute(r,l,C,o)}}(r[11],m,h,n.value,o,u,l)}function Rp(n,r,o,u,l,h){const m=h[r];if(null!==m){const C=u.setInput;for(let S=0;S<m.length;){const L=m[S++],Z=m[S++],se=m[S++];null!==C?u.setInput(o,se,L,Z):o[Z]=se}}}function dm(n,r){let o=null,u=0;for(;u<r.length;){const l=r[u];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,n[l],r[u+1])),u+=2}else u+=2;else u+=4}return o}function tf(n,r,o,u){return new Array(n,!0,!1,r,null,0,u,o,null,null)}function Sv(n,r){const o=ti(r,n);if(Uo(o)){const u=o[1];48&o[2]?Ja(u,o,u.template,o[8]):o[5]>0&&Ud(o)}}function Ud(n){for(let u=Ac(n);null!==u;u=v(u))for(let l=10;l<u.length;l++){const h=u[l];if(Uo(h))if(512&h[2]){const m=h[1];Ja(m,h,m.template,h[8])}else h[5]>0&&Ud(h)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=ti(o[u],n);Uo(l)&&l[5]>0&&Ud(l)}}function Mv(n,r){const o=ti(r,n),u=o[1];(function Op(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),bl(u,o,o[8])}function $c(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bd(n){for(;n;){n[2]|=32;const r=fl(n);if(Bi(n)&&!r)return n;n=r}return null}function Yu(n,r,o,u=!0){const l=r[10];l.begin&&l.begin();try{Ja(n,r,n.template,o)}catch(m){throw u&&hm(r,m),m}finally{l.end&&l.end()}}function jd(n,r,o){Fi(0),r(n,o)}function nf(n){return n[7]||(n[7]=[])}function Iu(n){return n.cleanup||(n.cleanup=[])}function hm(n,r){const o=n[9],u=o?o.get(Vc,null):null;u&&u.handleError(r)}function $d(n,r,o,u,l){for(let h=0;h<o.length;){const m=o[h++],C=o[h++],S=r[m],L=n.data[m];null!==L.setInput?L.setInput(S,l,u,C):S[C]=l}}function Qu(n,r,o){const u=ji(r,n);!function J(n,r,o){n.setValue(r,o)}(n[11],u,o)}function sf(n,r,o){let u=o?n.styles:null,l=o?n.classes:null,h=0;if(null!==r)for(let m=0;m<r.length;m++){const C=r[m];"number"==typeof C?h=C:1==h?l=Fe(l,C):2==h&&(u=Fe(u,C+": "+r[++m]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function Hc(n,r,o,u,l=!1){for(;null!==o;){const h=r[o.index];if(null!==h&&u.push(yr(h)),$r(h))for(let C=10;C<h.length;C++){const S=h[C],L=S[1].firstChild;null!==L&&Hc(S[1],S,L,u)}const m=o.type;if(8&m)Hc(n,r,o.child,u);else if(32&m){const C=hl(o,r);let S;for(;S=C();)u.push(S)}else if(16&m){const C=Ff(r,o);if(Array.isArray(C))u.push(...C);else{const S=fl(r[16]);Hc(S[1],S,C,u,!0)}}o=l?o.projectionNext:o.next}return u}class Hd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Hc(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if($r(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(Ms(r,u),$s(o,u))}this._attachedToViewContainer=!1}Hl(this._lView[1],this._lView)}onDestroy(r){Yh(this._lView[1],this._lView,null,r)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mn(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new tt(902,!1);this._appRef=r}}class Np extends Hd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Yu(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class kp extends Jl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=K(r);return new Gc(o,this.ngModule)}}function af(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Fp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const l=this.injector.get(r,tc,u);return l!==tc||o===tc?l:this.parentInjector.get(r,o,u)}}class Gc extends Wu{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return af(this.componentDef.inputs)}get outputs(){return af(this.componentDef.outputs)}create(r,o,u,l){let h=(l=l||this.ngModule)instanceof Zl?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Fp(r,h):r,C=m.get(Cd,null);if(null===C)throw new tt(407,!1);const S=m.get(Mh,null),L=C.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",se=u?function bp(n,r,o){return n.selectRootElement(r,o===Xe.ShadowDom)}(L,u,this.componentDef.encapsulation):lt(L,Z,function Rv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Ae=this.componentDef.onPush?288:272,We=Cp(0,null,null,1,0,null,null,null,null,null),bt=Ld(null,We,null,Ae,null,null,C,L,S,m,null);let qt,cn;eo(bt);try{const xn=function Vp(n,r,o,u,l,h){const m=o[1];o[22]=n;const S=Dl(m,22,2,"#host",null),L=S.mergedAttrs=r.hostAttrs;null!==L&&(sf(S,L,!0),null!==n&&(W(l,n,L),null!==S.classes&&Rc(l,n,S.classes),null!==S.styles&&Ti(l,n,S.styles)));const Z=u.createRenderer(n,r),se=Ld(o,dc(r),null,r.onPush?32:16,o[22],S,u,Z,h||null,null,null);return m.firstCreatePass&&(Qe(sn(S,o),m,r.type),Jh(m,S),cm(S,o.length,1)),$c(o,se),o[22]=se}(se,this.componentDef,bt,C,L);if(se)if(u)W(L,se,["ng-version",Yf.full]);else{const{attrs:Kn,classes:Lt}=function iv(n){const r=[],o=[];let u=1,l=2;for(;u<n.length;){let h=n[u];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++u]):8===l&&o.push(h);else{if(!Na(l))break;l=h}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Kn&&W(L,se,Kn),Lt&&Lt.length>0&&Rc(L,se,Lt.join(" "))}if(cn=bo(We,22),void 0!==o){const Kn=cn.projection=[];for(let Lt=0;Lt<this.ngContentSelectors.length;Lt++){const er=o[Lt];Kn.push(null!=er?Array.from(er):null)}}qt=function Nv(n,r,o,u){const l=o[1],h=function am(n,r,o){const u=Pr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xh(n,u,r,Cl(n,r,1,null),o),im(n,u));const l=oa(r,n,u.directiveStart,u);Ui(l,r);const h=hi(u,r);return h&&Ui(h,r),l}(l,o,r);if(n[8]=o[8]=h,null!==u)for(const C of u)C(h,r);if(r.contentQueries){const C=Pr();r.contentQueries(1,h,C.directiveStart)}const m=Pr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ii(m.index),Sp(o[1],m,0,m.directiveStart,m.directiveEnd,r),lm(r,h)),h}(xn,this.componentDef,bt,[Up]),bl(We,bt,null)}finally{ds()}return new Ov(this.componentType,qt,Xl(cn,bt),bt,cn)}}class Ov extends class Ql{}{constructor(r,o,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Np(l),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[r])){const h=this._rootLView;$d(h[1],h,l,r,o),sm(h,this._tNode.index)}}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Up(){const n=Pr();Cs(It()[1],n)}function Gd(n){let r=function uf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let l;if(Nr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new tt(903,!1);l=r.\u0275dir}if(l){if(o){u.push(l);const m=n;m.inputs=hc(n.inputs),m.declaredInputs=hc(n.declaredInputs),m.outputs=hc(n.outputs);const C=l.hostBindings;C&&fm(n,C);const S=l.viewQuery,L=l.contentQueries;if(S&&Fv(n,S),L&&Bp(n,L),De(n.inputs,l.inputs),De(n.declaredInputs,l.declaredInputs),De(n.outputs,l.outputs),Nr(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let m=0;m<h.length;m++){const C=h[m];C&&C.ngInherit&&C(n),C===Gd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function kv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const l=n[u];l.hostVars=r+=l.hostVars,l.hostAttrs=mt(l.hostAttrs,o=mt(o,l.hostAttrs))}}(u)}function hc(n){return n===Tn?{}:n===Nt?[]:n}function Fv(n,r){const o=n.viewQuery;n.viewQuery=o?(u,l)=>{r(u,l),o(u,l)}:r}function Bp(n,r){const o=n.contentQueries;n.contentQueries=o?(u,l,h)=>{r(u,l,h),o(u,l,h)}:r}function fm(n,r){const o=n.hostBindings;n.hostBindings=o?(u,l)=>{r(u,l),o(u,l)}:r}let cf=null;function fc(){if(!cf){const n=ot.Symbol;if(n&&n.iterator)cf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cf=u)}}}return cf}function zd(n){return!!Wd(n)&&(Array.isArray(n)||!(n instanceof Map)&&fc()in n)}function Wd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xa(n,r,o){return n[r]=o}function zs(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Du(n,r,o,u){const l=zs(n,r,o);return zs(n,r+1,u)||l}function Kc(n,r,o,u){const l=It();return zs(l,Bs(),r)&&(Jn(),Fa(vr(),l,n,r,o,u)),Kc}function mc(n,r,o,u,l,h){const C=Du(n,function wi(){return On.lFrame.bindingIndex}(),o,l);return ni(2),C?r+qe(o)+u+qe(l)+h:or}function Wp(n,r,o,u,l,h,m,C){const S=It(),L=Jn(),Z=n+22,se=L.firstCreatePass?function wm(n,r,o,u,l,h,m,C,S){const L=r.consts,Z=Dl(r,n,4,m||null,gi(L,C));Qh(r,o,Z,gi(L,S)),Cs(r,Z);const se=Z.tViews=Cp(2,Z,u,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L);return null!==r.queries&&(r.queries.template(r,Z),se.queries=r.queries.embeddedTView(Z)),Z}(Z,L,S,r,o,u,l,h,m):L.data[Z];M(se,!1);const Ae=S[11].createComment("");$u(L,S,Ae,se),Ui(Ae,S),$c(S,S[Z]=tf(Ae,S,Ae,se)),os(se)&&Tl(L,S,se),null!=m&&Zh(S,se,C)}function pf(n,r,o){const u=It();return zs(u,Bs(),r)&&function No(n,r,o,u,l,h,m,C){const S=hi(r,o);let Z,L=r.inputs;!C&&null!=L&&(Z=L[u])?($d(n,o,Z,u,l),Xr(r)&&sm(o,r.index)):3&r.type&&(u=function Ap(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=m?m(l,r.value||"",u):l,h.setProperty(S,u,l))}(Jn(),vr(),u,n,r,u[11],o,!1),pf}function gf(n,r,o,u,l){const m=l?"class":"style";$d(n,o,r.inputs[m],m,u)}function qd(n,r,o,u){const l=It(),h=Jn(),m=22+n,C=l[11],S=l[m]=lt(C,r,function Ea(){return On.lFrame.currentNamespace}()),L=h.firstCreatePass?function Kd(n,r,o,u,l,h,m){const C=r.consts,L=Dl(r,n,2,l,gi(C,h));return Qh(r,o,L,gi(C,m)),null!==L.attrs&&sf(L,L.attrs,!1),null!==L.mergedAttrs&&sf(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(m,h,l,0,r,o,u):h.data[m];M(L,!0);const Z=L.mergedAttrs;null!==Z&&W(C,S,Z);const se=L.classes;null!==se&&Rc(C,S,se);const Ae=L.styles;return null!==Ae&&Ti(C,S,Ae),64!=(64&L.flags)&&$u(h,l,S,L),0===function Ei(){return On.lFrame.elementDepthCount}()&&Ui(S,l),function Fr(){On.lFrame.elementDepthCount++}(),os(L)&&(Tl(h,l,L),function cc(n,r,o){if(Ks(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const m=n.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,L,l)),null!==u&&Zh(l,L),qd}function Ai(){let n=Pr();q()?function nt(){On.lFrame.isParent=!1}():(n=n.parent,M(n,!1));const r=n;!function Us(){On.lFrame.elementDepthCount--}();const o=Jn();return o.firstCreatePass&&(Cs(o,n),Ks(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ru(n){return 0!=(16&n.flags)}(r)&&gf(o,r,It(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function b(n){return 0!=(32&n.flags)}(r)&&gf(o,r,It(),r.stylesWithoutHost,!1),Ai}function Rs(n,r,o,u){return qd(n,r,o,u),Ai(),Rs}function Im(){return It()}function Zd(n){return!!n&&"function"==typeof n.then}function Dm(n){return!!n&&"function"==typeof n.subscribe}const mf=Dm;function Yp(n,r,o,u){const l=It(),h=Jn(),m=Pr();return function Lv(n,r,o,u,l,h,m,C){const S=os(u),Z=n.firstCreatePass&&Iu(n),se=r[8],Ae=nf(r);let We=!0;if(3&u.type||C){const cn=hi(u,r),xn=C?C(cn):cn,Kn=Ae.length,Lt=C?Jr=>C(yr(Jr[u.index])):u.index;let er=null;if(!C&&S&&(er=function Si(n,r,o,u){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===o&&l[h+1]===u){const C=r[7],S=l[h+2];return C.length>S?C[S]:null}"string"==typeof m&&(h+=2)}return null}(n,r,l,u.index)),null!==er)(er.__ngLastListenerFn__||er).__ngNextListenerFn__=h,er.__ngLastListenerFn__=h,We=!1;else{h=zi(u,r,se,h,!1);const Jr=o.listen(xn,l,h);Ae.push(h,Jr),Z&&Z.push(l,Lt,Kn,Kn+1)}}else h=zi(u,r,se,h,!1);const bt=u.outputs;let qt;if(We&&null!==bt&&(qt=bt[l])){const cn=qt.length;if(cn)for(let xn=0;xn<cn;xn+=2){const Wi=r[qt[xn]][qt[xn+1]].subscribe(h),uh=Ae.length;Ae.push(h,Wi),Z&&Z.push(l,u.index,uh,-(uh+1))}}}(h,l,l[11],m,n,r,0,u),Yp}function Vv(n,r,o,u){try{return!1!==o(u)}catch(l){return hm(n,l),!1}}function zi(n,r,o,u,l){return function h(m){if(m===Function)return u;Bd(2&n.flags?ti(n.index,r):r);let S=Vv(r,0,u,m),L=h.__ngNextListenerFn__;for(;L;)S=Vv(r,0,L,m)&&S,L=L.__ngNextListenerFn__;return l&&!1===S&&(m.preventDefault(),m.returnValue=!1),S}}function Qp(n=1){return function Ua(n){return(On.lFrame.contextLView=function na(n,r){for(;n>0;)r=r[15],n--;return r}(n,On.lFrame.contextLView))[8]}(n)}function xl(n,r,o,u,l){const h=n[o+1],m=null===r;let C=u?ka(h):qu(h),S=!1;for(;0!==C&&(!1===S||m);){const Z=n[C+1];yf(n[C],r)&&(S=!0,n[C+1]=u?jh(Z):cp(Z)),C=u?ka(Z):qu(Z)}S&&(n[o+1]=u?cp(h):jh(h))}function yf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&y(n,r)>=0}const Ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pm(n){return n.substring(Ps.key,Ps.keyEnd)}function Yd(n,r){const o=Ps.textEnd;return o===r?-1:(r=Ps.keyEnd=function km(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,Ps.key=r,o),bu(n,r,o))}function bu(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function _f(n,r){return function ko(n,r,o,u){const l=It(),h=Jn(),m=ni(2);h.firstUpdatePass&&Xd(h,n,m,u),r!==or&&zs(l,m,r)&&$m(h,h.data[pr()],l,l[11],n,l[m+1]=function l0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ee(Gu(n)))),n}(r,o),u,m)}(n,r,null,!0),_f}function tg(n){!function tu(n,r,o,u){const l=Jn(),h=ni(2);l.firstUpdatePass&&Xd(l,null,h,u);const m=It();if(o!==or&&zs(m,h,o)){const C=l.data[pr()];if(If(C,u)&&!Jd(l,h)){let S=u?C.classesWithoutHost:C.stylesWithoutHost;null!==S&&(o=Fe(S,o||"")),gf(l,C,m,o,u)}else!function nh(n,r,o,u,l,h,m,C){l===or&&(l=Nt);let S=0,L=0,Z=0<l.length?l[0]:null,se=0<h.length?h[0]:null;for(;null!==Z||null!==se;){const Ae=S<l.length?l[S+1]:void 0,We=L<h.length?h[L+1]:void 0;let qt,bt=null;Z===se?(S+=2,L+=2,Ae!==We&&(bt=se,qt=We)):null===se||null!==Z&&Z<se?(S+=2,bt=Z):(L+=2,bt=se,qt=We),null!==bt&&$m(n,r,o,u,bt,qt,m,C),Z=S<l.length?l[S]:null,se=L<h.length?h[L]:null}}(l,C,m,m[11],m[h+1],m[h+1]=function th(n,r,o){if(null==o||""===o)return Nt;const u=[],l=Gu(o);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(u,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(u,h,l[h]);else"string"==typeof l&&r(u,l);return u}(n,r,o),u,h)}}(_,La,n,!0)}function La(n,r){for(let o=function Nm(n){return function Qd(n){Ps.key=0,Ps.keyEnd=0,Ps.value=0,Ps.valueEnd=0,Ps.textEnd=n.length}(n),Yd(n,bu(n,0,Ps.textEnd))}(r);o>=0;o=Yd(r,o))_(n,Pm(r),!0)}function Jd(n,r){return r>=n.expandoStartIndex}function Xd(n,r,o,u){const l=n.data;if(null===l[o+1]){const h=l[pr()],m=Jd(n,o);If(h,u)&&null===r&&!m&&(r=!1),r=function Bm(n,r,o,u){const l=function Go(n){const r=On.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=u?r.residualClasses:r.residualStyles;if(null===l)0===(u?r.classBindings:r.styleBindings)&&(o=_c(o=wf(null,n,r,o,u),r.attrs,u),h=null);else{const m=r.directiveStylingLast;if(-1===m||n[m]!==l)if(o=wf(l,n,r,o,u),null===h){let S=function eh(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==qu(u))return n[ka(u)]}(n,r,u);void 0!==S&&Array.isArray(S)&&(S=wf(null,n,r,S[1],u),S=_c(S,r.attrs,u),function Gv(n,r,o,u){n[ka(o?r.classBindings:r.styleBindings)]=u}(n,r,u,S))}else h=function Ef(n,r,o){let u;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)u=_c(u,n[h].hostAttrs,o);return _c(u,r.attrs,o)}(n,r,u)}return void 0!==h&&(u?r.residualClasses=h:r.residualStyles=h),o}(l,h,r,u),function Ml(n,r,o,u,l,h){let m=h?r.classBindings:r.styleBindings,C=ka(m),S=qu(m);n[u]=o;let Z,L=!1;if(Array.isArray(o)){const se=o;Z=se[1],(null===Z||y(se,Z)>0)&&(L=!0)}else Z=o;if(l)if(0!==S){const Ae=ka(n[C+1]);n[u+1]=Bh(Ae,C),0!==Ae&&(n[Ae+1]=Gs(n[Ae+1],u)),n[C+1]=function lp(n,r){return 131071&n|r<<17}(n[C+1],u)}else n[u+1]=Bh(C,0),0!==C&&(n[C+1]=Gs(n[C+1],u)),C=u;else n[u+1]=Bh(S,0),0===C?C=u:n[S+1]=Gs(n[S+1],u),S=u;L&&(n[u+1]=cp(n[u+1])),xl(n,Z,u,!0),xl(n,Z,u,!1),function u0(n,r,o,u,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&y(h,r)>=0&&(o[u+1]=jh(o[u+1]))}(r,Z,n,u,h),m=Bh(C,S),h?r.classBindings=m:r.styleBindings=m}(l,h,r,o,m,u)}}function wf(n,r,o,u,l){let h=null;const m=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<m&&(h=r[C],u=_c(u,h.hostAttrs,l),h!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function _c(n,r,o){const u=o?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const m=r[h];"number"==typeof m?l=m:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_(n,m,!!o||r[++h]))}return void 0===n?null:n}function $m(n,r,o,u,l,h,m,C){if(!(3&r.type))return;const S=n.data,L=S[C+1];ng(function Wg(n){return 1==(1&n)}(L)?Ec(S,r,o,l,qu(L),m):void 0)||(ng(h)||function Od(n){return 2==(2&n)}(L)&&(h=Ec(S,null,o,l,C,m)),function xy(n,r,o,u,l){if(r)l?n.addClass(o,u):n.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:ns.DashCase;null==l?n.removeStyle(o,u,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=ns.Important),n.setStyle(o,u,l,h))}}(u,m,ji(pr(),o),l,h))}function Ec(n,r,o,u,l,h){const m=null===r;let C;for(;l>0;){const S=n[l],L=Array.isArray(S),Z=L?S[1]:S,se=null===Z;let Ae=o[l+1];Ae===or&&(Ae=se?Nt:void 0);let We=se?E(Ae,u):Z===u?Ae:void 0;if(L&&!ng(We)&&(We=E(S,u)),ng(We)&&(C=We,m))return C;const bt=n[l+1];l=m?ka(bt):qu(bt)}if(null!==r){let S=h?r.residualClasses:r.residualStyles;null!=S&&(C=E(S,u))}return C}function ng(n){return void 0!==n}function If(n,r){return 0!=(n.flags&(r?16:32))}function Hm(n,r=""){const o=It(),u=Jn(),l=n+22,h=u.firstCreatePass?Dl(u,l,1,r,null):u.data[l],m=o[l]=function $(n,r){return n.createText(r)}(o[11],r);$u(u,o,m,h),M(h,!1)}function Jc(n){return Df("",n,""),Jc}function Df(n,r,o){const u=It(),l=function Al(n,r,o,u){return zs(n,Bs(),o)?r+qe(o)+u:or}(u,n,r,o);return l!==or&&Qu(u,pr(),l),Df}function rg(n,r,o,u,l){const h=It(),m=mc(h,n,r,o,u,l);return m!==or&&Qu(h,pr(),m),rg}const Cc=void 0;var Zv=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let nu={};function cy(n){const r=function m0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const u=r.split("-")[0];if(o=hy(u),o)return o;if("en"===u)return Zv;throw new tt(701,!1)}function dy(n){return cy(n)[Wn.PluralCase]}function hy(n){return n in nu||(nu[n]=ot.ng&&ot.ng.common&&ot.ng.common.locales&&ot.ng.common.locales[n]),nu[n]}var Wn=(()=>((Wn=Wn||{})[Wn.LocaleId=0]="LocaleId",Wn[Wn.DayPeriodsFormat=1]="DayPeriodsFormat",Wn[Wn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Wn[Wn.DaysFormat=3]="DaysFormat",Wn[Wn.DaysStandalone=4]="DaysStandalone",Wn[Wn.MonthsFormat=5]="MonthsFormat",Wn[Wn.MonthsStandalone=6]="MonthsStandalone",Wn[Wn.Eras=7]="Eras",Wn[Wn.FirstDayOfWeek=8]="FirstDayOfWeek",Wn[Wn.WeekendRange=9]="WeekendRange",Wn[Wn.DateFormat=10]="DateFormat",Wn[Wn.TimeFormat=11]="TimeFormat",Wn[Wn.DateTimeFormat=12]="DateTimeFormat",Wn[Wn.NumberSymbols=13]="NumberSymbols",Wn[Wn.NumberFormats=14]="NumberFormats",Wn[Wn.CurrencyCode=15]="CurrencyCode",Wn[Wn.CurrencySymbol=16]="CurrencySymbol",Wn[Wn.CurrencyName=17]="CurrencyName",Wn[Wn.Currencies=18]="Currencies",Wn[Wn.Directionality=19]="Directionality",Wn[Wn.PluralCase=20]="PluralCase",Wn[Wn.ExtraData=21]="ExtraData",Wn))();const oh="en-US";let og=oh;function n_(n,r,o,u,l){if(n=Ee(n),Array.isArray(n))for(let h=0;h<n.length;h++)n_(n[h],r,o,u,l);else{const h=Jn(),m=It();let C=fa(n)?n:Ee(n.provide),S=_l(n);const L=Pr(),Z=1048575&L.providerIndexes,se=L.directiveStart,Ae=L.providerIndexes>>20;if(fa(n)||!n.multi){const We=new no(S,l,wl),bt=i_(C,r,l?Z:Z+Ae,se);-1===bt?(Qe(sn(L,m),h,C),r_(h,n,r.length),r.push(C),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),o.push(We),m.push(We)):(o[bt]=We,m[bt]=We)}else{const We=i_(C,r,Z+Ae,se),bt=i_(C,r,Z,Z+Ae),qt=We>=0&&o[We],cn=bt>=0&&o[bt];if(l&&!cn||!l&&!qt){Qe(sn(L,m),h,C);const xn=function Uw(n,r,o,u,l){const h=new no(n,o,wl);return h.multi=[],h.index=r,h.componentProviders=0,P0(h,l,u&&!o),h}(l?Vw:Lw,o.length,l,u,S);!l&&cn&&(o[bt].providerFactory=xn),r_(h,n,r.length,0),r.push(C),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),o.push(xn),m.push(xn)}else r_(h,n,We>-1?We:bt,P0(o[l?bt:We],S,!l&&u));!l&&u&&cn&&o[bt].componentProviders++}}}function r_(n,r,o,u){const l=fa(r),h=function wd(n){return!!n.useClass}(r);if(l||h){const S=(h?Ee(r.useClass):r).prototype.ngOnDestroy;if(S){const L=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=L.indexOf(o);-1===Z?L.push(o,[u,S]):L[Z+1].push(u,S)}else L.push(o,S)}}}function P0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,u){for(let l=o;l<u;l++)if(r[l]===n)return l;return-1}function Lw(n,r,o,u){return s_(this.multi,[])}function Vw(n,r,o,u){const l=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,C=oa(o,o[1],this.providerFactory.index,u);h=C.slice(0,m),s_(l,h);for(let S=m;S<C.length;S++)h.push(C[S])}else h=[],s_(l,h);return h}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function O0(n,r=[]){return o=>{o.providersResolver=(u,l)=>function Fw(n,r,o){const u=Jn();if(u.firstCreatePass){const l=Nr(n);n_(o,u.data,u.blueprint,l,!0),n_(r,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,r)}}class Sf{}class N0{}function Bw(n,r){return new k0(n,r??null)}class k0 extends Sf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kp(this);const u=$t(r);this._bootstrapComponents=Oo(u.bootstrap),this._r3Injector=Fh(r,o,[{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],ee(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class o_ extends N0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class jw extends Sf{constructor(r,o,u){super(),this.componentFactoryResolver=new kp(this),this.instance=null;const l=new Wf([...r,{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],o||Id(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function a_(n,r,o=null){return new jw(n,r,o).injector}let $w=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Gf(0,o.type),l=u.length>0?a_([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Zt({token:n,providedIn:"environment",factory:()=>new n(Vi(Zl))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get($w).getOrCreateStandaloneInjector(n)}function H0(n,r,o){const u=mi()+n,l=It();return l[u]===or?Xa(l,u,o?r.call(o):r()):function pc(n,r){return n[r]}(l,u)}function G0(n,r,o,u){return function z0(n,r,o,u,l,h){const m=r+o;return zs(n,m,l)?Xa(n,m+1,h?u.call(h,l):u(l)):lg(n,m+1)}(It(),mi(),n,r,o,u)}function lg(n,r){const o=n[r];return o===or?void 0:o}function Y0(n,r){const o=Jn();let u;const l=n+22;o.firstCreatePass?(u=function sI(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const h=u.factory||(u.factory=ci(u.type)),m=ur(wl);try{const C=Hn(!1),S=h();return Hn(C),function ff(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,It(),l,S),S}finally{ur(m)}}function Q0(n,r,o,u){const l=n+22,h=It(),m=function ki(n,r){return n[r]}(h,l);return function cg(n,r){return n[1].data[r].pure}(h,l)?function W0(n,r,o,u,l,h,m){const C=r+o;return Du(n,C,l,h)?Xa(n,C+2,m?u.call(m,l,h):u(l,h)):lg(n,C+2)}(h,mi(),r,m.transform,o,u,m):m.transform(o,u)}function l_(n){return r=>{setTimeout(n,void 0,r)}}const Pl=class cI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let l=r,h=o||(()=>null),m=u;if(r&&"object"==typeof r){const S=r;l=S.next?.bind(S),h=S.error?.bind(S),m=S.complete?.bind(S)}this.__isAsync&&(h=l_(h),l&&(l=l_(l)),m&&(m=l_(m)));const C=super.subscribe({next:l,error:h,complete:m});return r instanceof F.w0&&r.add(C),C}};function dI(){return this._results[fc()]()}class c_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=fc(),u=c_.prototype;u[o]||(u[o]=dI)}get changes(){return this._changes||(this._changes=new Pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const l=Ci(r);(this._changesDetected=!function Ga(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],h=r[u];if(o&&(l=o(l),h=o(h)),h!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=dg,fI=class extends hI{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,l=Ld(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),bl(u,l,r),new Hd(l)}};function pI(){return _y(Pr(),It())}function _y(n,r){return 4&n.type?new fI(r,n,Xl(n,r)):null}let Ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return eE(Pr(),It())}const mI=Ey,J0=class extends mI{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){const r=Yt(this._hostTNode,this._hostLView);if(gr(r)){const o=Cn(r,this._hostLView),u=tr(r);return new ii(o[1].data[u+8],o)}return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=X0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const m=r.createEmbeddedView(o||{},h);return this.insert(m,l),m}createComponent(r,o,u,l,h){const m=r&&!function io(n){return"function"==typeof n}(r);let C;if(m)C=o;else{const se=o||{};C=se.index,u=se.injector,l=se.projectableNodes,h=se.environmentInjector||se.ngModuleRef}const S=m?r:new Gc(K(r)),L=u||this.parentInjector;if(!h&&null==S.ngModule){const Ae=(m?L:this.parentInjector).get(Zl,null);Ae&&(h=Ae)}const Z=S.create(L,l,void 0,h);return this.insert(Z.hostView,C),Z}insert(r,o){const u=r._lView,l=u[1];if(function Qs(n){return $r(n[3])}(u)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const se=u[3],Ae=new J0(se,se[6],se[3]);Ae.detach(Ae.indexOf(r))}}const h=this._adjustIndex(o),m=this._lContainer;!function vo(n,r,o,u){const l=10+u,h=o.length;u>0&&(o[l-1][4]=r),u<h-10?(r[4]=o[l],iu(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const m=r[17];null!==m&&o!==m&&function Hs(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(m,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,u,m,h);const C=Hu(h,m),S=u[11],L=ld(S,m[7]);return null!==L&&function on(n,r,o,u,l,h){u[0]=l,u[6]=r,Mc(n,u,o,1,l,h)}(l,m[6],S,u,L,C),r.attachToViewContainerRef(),iu(d_(m),h,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=X0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=Ms(this._lContainer,o);u&&($s(d_(this._lContainer),o),Hl(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=Ms(this._lContainer,o);return u&&null!=$s(d_(this._lContainer),o)?new Hd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function X0(n){return n[8]}function d_(n){return n[8]||(n[8]=[])}function eE(n,r){let o;const u=r[n.index];if($r(u))o=u;else{let l;if(8&n.type)l=yr(u);else{const h=r[11];l=h.createComment("");const m=hi(n,r);Za(h,ld(h,m),l,function fg(n,r){return n.nextSibling(r)}(h,m),!1)}r[n.index]=o=tf(u,r,l,n),$c(r,o)}return new J0(o,n,r)}class h_{constructor(r){this.queryList=r,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,l=[];for(let h=0;h<u;h++){const m=o.getByIndex(h);l.push(this.queries[m.indexInDeclarationView].clone())}return new f_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==lE(r,o).matches&&this.queries[o].setDirty()}}class tE{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class p_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(r,l);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new p_(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class g_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new g_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const h=u[l];this.matchTNodeWithReadOption(r,o,_I(o,h)),this.matchTNodeWithReadOption(r,o,Ba(o,r,h,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Ba(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ec||l===Ey||l===dg&&4&o.type)this.addMatch(o.index,-2);else{const h=Ba(o,r,l,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function _I(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function wI(n,r,o,u){return-1===o?function EI(n,r){return 11&n.type?Xl(n,r):4&n.type?_y(n,r):null}(r,n):-2===o?function II(n,r,o){return o===ec?Xl(r,n):o===dg?_y(r,n):o===Ey?eE(r,n):void 0}(n,r,u):oa(n,n[1],o,r)}function nE(n,r,o,u){const l=r[19].queries[u];if(null===l.matches){const h=n.data,m=o.matches,C=[];for(let S=0;S<m.length;S+=2){const L=m[S];C.push(L<0?null:wI(r,h[L],m[S+1],o.metadata.read))}l.matches=C}return l.matches}function m_(n,r,o,u){const l=n.queries.getByIndex(o),h=l.matches;if(null!==h){const m=nE(n,r,l,o);for(let C=0;C<h.length;C+=2){const S=h[C];if(S>0)u.push(m[C/2]);else{const L=h[C+1],Z=r[-S];for(let se=10;se<Z.length;se++){const Ae=Z[se];Ae[17]===Ae[3]&&m_(Ae[1],Ae,L,u)}if(null!==Z[9]){const se=Z[9];for(let Ae=0;Ae<se.length;Ae++){const We=se[Ae];m_(We[1],We,L,u)}}}}}return u}function rE(n){const r=It(),o=Jn(),u=Ao();Fi(u+1);const l=lE(o,u);if(n.dirty&&function ya(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?m_(o,r,u,[]):nE(o,r,l,u);n.reset(h,qf),n.notifyOnChanges()}return!0}return!1}function iE(n,r,o){const u=Jn();u.firstCreatePass&&(uE(u,new tE(n,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),aE(u,It(),r)}function sE(n,r,o,u){const l=Jn();if(l.firstCreatePass){const h=Pr();uE(l,new tE(r,o,u),h.index),function CI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}aE(l,It(),o)}function oE(){return function DI(n,r){return n[19].queries[r].queryList}(It(),Ao())}function aE(n,r,o){const u=new c_(4==(4&o));Yh(n,r,u,u.destroy),null===r[19]&&(r[19]=new f_),r[19].queries.push(new h_(u))}function uE(n,r,o){null===n.queries&&(n.queries=new p_),n.queries.track(new g_(r,o))}function lE(n,r){return n.queries.getByIndex(r)}function Iy(...n){}const SE=new Mr("Application Initializer");let Dy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Iy,this.reject=Iy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Zd(h))o.push(h);else if(mf(h)){const m=new Promise((C,S)=>{h.subscribe({complete:C,error:S})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Vi(SE,8))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ME=new Mr("AppId",{providedIn:"root",factory:function xE(){return`${w_()}${w_()}${w_()}`}});function w_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RE=new Mr("Platform Initializer"),zI=new Mr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),PE=new Mr("appBootstrapListener");let WI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cy=new Mr("LocaleId",{providedIn:"root",factory:()=>Fl(Cy,xt.Optional|xt.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||oh}()}),qI=new Mr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let YI=(()=>{class n{compileModuleSync(o){return new o_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=Oo($t(o).declarations).reduce((m,C)=>{const S=K(C);return S&&m.push(new Gc(S)),m},[]);return new ZI(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function I_(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Au{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pl(!1),this.onMicrotaskEmpty=new Pl(!1),this.onStable=new Pl(!1),this.onError=new Pl(!1),typeof Zone>"u")throw new tt(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function eD(){let n=ot.requestAnimationFrame,r=ot.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rD(n){const r=()=>{!function nD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ot,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,C_(n),n.isCheckStableRunning=!0,D_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),C_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,h,m,C)=>{try{return kE(n),o.invokeTask(l,h,m,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),FE(n)}},onInvoke:(o,u,l,h,m,C,S)=>{try{return kE(n),o.invoke(l,h,m,C,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),FE(n)}},onHasTask:(o,u,l,h)=>{o.hasTask(l,h),u===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,C_(n),D_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,l,h)=>(o.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Au.isInAngularZone())throw new tt(909,!1)}static assertNotInAngularZone(){if(Au.isInAngularZone())throw new tt(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,r,tD,Iy,Iy);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const tD={};function D_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function C_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function FE(n){n._nesting--,D_(n)}class iD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pl,this.onMicrotaskEmpty=new Pl,this.onStable=new Pl,this.onError=new Pl}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,l){return r.apply(o,u)}}const LE=new Mr(""),VE=new Mr("");let b_,sD=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function oD(n){b_=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Au.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(Vi(Au),Vi(UE),Vi(VE))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac}),n})(),UE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return b_?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xc=null;const BE=new Mr("AllowMultipleToken"),T_=new Mr("PlatformDestroyListeners");class lD{constructor(r,o){this.name=r,this.token=o}}function $E(n,r,o=[]){const u=`Platform: ${r}`,l=new Mr(u);return(h=[])=>{let m=A_();if(!m||m.injector.get(BE,!1)){const C=[...o,...h,{provide:l,useValue:!0}];n?n(C):function cD(n){if(Xc&&!Xc.get(BE,!1))throw new tt(400,!1);Xc=n;const r=n.get(GE);(function jE(n){const r=n.get(RE,null);r&&r.forEach(o=>o())})(n)}(function HE(n=[],r){return Qa.create({name:r,providers:[{provide:bh,useValue:"platform"},{provide:T_,useValue:new Set([()=>Xc=null])},...n]})}(C,u))}return function hD(n){const r=A_();if(!r)throw new tt(401,!1);return r}()}}function A_(){return Xc?.get(GE)??null}let GE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function WE(n,r){let o;return o="noop"===n?new iD:("zone.js"===n?void 0:n)||new Au(r),o}(u?.ngZone,function zE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Au,useValue:l}];return l.run(()=>{const m=Qa.create({providers:h,parent:this.injector,name:o.moduleType.name}),C=o.create(m),S=C.injector.get(Vc,null);if(!S)throw new tt(402,!1);return l.runOutsideAngular(()=>{const L=l.onError.subscribe({next:Z=>{S.handleError(Z)}});C.onDestroy(()=>{Ty(this._modules,C),L.unsubscribe()})}),function KE(n,r,o){try{const u=o();return Zd(u)?u.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(S,l,()=>{const L=C.injector.get(Dy);return L.runInitializers(),L.donePromise.then(()=>(function Xu(n){je(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Cy,oh)||oh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const l=qE({},u);return function aD(n,r,o){const u=new o_(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const u=o.injector.get(by);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new tt(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(T_,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Vi(Qa))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qE(n,r){return Array.isArray(r)?r.reduce(qE,n):{...n,...r}}let by=(()=>{class n{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new B.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),m=new B.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Au.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ce.T)(h,m.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Wu;if(!this._injector.get(Dy).done)throw!l&&dt(o),new tt(405,false);let m;m=l?o:this._injector.get(Jl).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const C=function uD(n){return n.isBoundToModule}(m)?void 0:this._injector.get(Sf),L=m.create(Qa.NULL,[],u||m.selector,C),Z=L.location.nativeElement,se=L.injector.get(LE,null);return se?.registerApplication(Z),L.onDestroy(()=>{this.detachView(L.hostView),Ty(this.components,L),se?.unregisterApplication(Z)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new tt(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ty(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(PE,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ty(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new tt(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Vi(Au),Vi(Zl),Vi(Vc))},n.\u0275prov=Zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ty(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let YE=!0,QE=!1;function pD(){return QE=!0,YE}function gD(){if(QE)throw new Error("Cannot enable prod mode after platform setup.");YE=!1}let mD=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,o){if(Xr(n)&&!o){const u=ti(n.index,r);return new Hd(u,u)}return 47&n.type?new Hd(r[16],r):null}(Pr(),It(),16==(16&n))}class tw{constructor(){}supports(r){return zd(r)}create(r){return new CD(r)}}const DD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DD}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,l=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<rw(u,l,h)?o:u,C=rw(m,l,h),S=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{h||(h=[]);const L=C-l,Z=S-l;if(L!=Z){for(let Ae=0;Ae<L;Ae++){const We=Ae<h.length?h[Ae]:h[Ae]=0,bt=We+Ae;Z<=bt&&bt<L&&(h[Ae]=We+1)}h[m.previousIndex]=Z-L}}C!==S&&r(m,C,S)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!zd(r))throw new tt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,m,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],m=this._trackByFn(C,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,C)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,C),u=!0),o=o._next}else l=0,function jp(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[fc()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,C=>{m=this._trackByFn(l,C),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,C,m,l)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,l)):r=this._addAfter(new bD(o,u),h,l),r}_verifyReinsertion(r,o,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const l=null===o?this._itHead:o._next;return r._next=l,r._prev=o,null===l?this._itTail=r:l._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new nw),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class bD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class nw{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new TD,this.map.set(o,u)),u.add(r)}get(r,o){const l=this.map.get(r);return l?l.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rw(n,r,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+r+l}class iw{constructor(){}supports(r){return r instanceof Map||Wd(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Wd(r)))throw new tt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,o);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new SD(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class SD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sw(){return new P_([new tw])}let P_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||sw()),deps:[[n,new vi,new Dr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new tt(901,!1)}}return n.\u0275prov=Zt({token:n,providedIn:"root",factory:sw}),n})();function ow(){return new O_([new iw])}let O_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||ow()),deps:[[n,new vi,new Dr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new tt(901,!1)}}return n.\u0275prov=Zt({token:n,providedIn:"root",factory:ow}),n})();const RD=$E(null,"core",[]);let PD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Vi(by))},n.\u0275mod=Be({type:n}),n.\u0275inj=tn({}),n})();function OD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(Ht,Le,R)=>{R.d(Le,{EJ:()=>us,F:()=>Ni,Fj:()=>at,JJ:()=>xt,JL:()=>Rn,Kr:()=>Zi,NI:()=>Kr,On:()=>wo,Q7:()=>ho,UX:()=>Us,Wl:()=>te,YN:()=>Vo,_Y:()=>Fs,j3:()=>jo,kI:()=>ge,qQ:()=>ls,sg:()=>Ln,u:()=>di,u5:()=>Fr,wV:()=>dr});var p=R(4650),F=R(6895),B=R(8996),ce=R(4128),he=R(4004);let Ie=(()=>{class k{constructor(M,q){this._renderer=M,this._elementRef=q,this.onChange=nt=>{},this.onTouched=()=>{}}setProperty(M,q){this._renderer.setProperty(this._elementRef.nativeElement,M,q)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),De=(()=>{class k extends Ie{}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const ee=new p.OlP("NgValueAccessor"),Fe={provide:ee,useExisting:(0,p.Gpc)(()=>te),multi:!0};let te=(()=>{class k extends De{writeValue(M){this.setProperty("checked",M)}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(ln){return q.onChange(ln.target.checked)})("blur",function(){return q.onTouched()})},features:[p._Bn([Fe]),p.qOj]}),k})();const fe={provide:ee,useExisting:(0,p.Gpc)(()=>at),multi:!0},Dt=new p.OlP("CompositionEventMode");let at=(()=>{class k extends Ie{constructor(M,q,nt){super(M,q),this._compositionMode=nt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ee(){const k=(0,F.q)()?(0,F.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Dt,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,q){1&M&&p.NdJ("input",function(ln){return q._handleInput(ln.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(ln){return q._compositionEnd(ln.target.value)})},features:[p._Bn([fe]),p.qOj]}),k})();function Rt(k){return null==k||("string"==typeof k||Array.isArray(k))&&0===k.length}function qe(k){return null!=k&&"number"==typeof k.length}const Re=new p.OlP("NgValidators"),Pt=new p.OlP("NgAsyncValidators"),yt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ge{static min(P){return rt(P)}static max(P){return function it(k){return P=>{if(Rt(P.value)||Rt(k))return null;const M=parseFloat(P.value);return!isNaN(M)&&M>k?{max:{max:k,actual:P.value}}:null}}(P)}static required(P){return Et(P)}static requiredTrue(P){return function ht(k){return!0===k.value?null:{required:!0}}(P)}static email(P){return function Ce(k){return Rt(k.value)||yt.test(k.value)?null:{email:!0}}(P)}static minLength(P){return function _t(k){return P=>Rt(P.value)||!qe(P.value)?null:P.value.length<k?{minlength:{requiredLength:k,actualLength:P.value.length}}:null}(P)}static maxLength(P){return function en(k){return P=>qe(P.value)&&P.value.length>k?{maxlength:{requiredLength:k,actualLength:P.value.length}}:null}(P)}static pattern(P){return function Tt(k){if(!k)return Wt;let P,M;return"string"==typeof k?(M="","^"!==k.charAt(0)&&(M+="^"),M+=k,"$"!==k.charAt(k.length-1)&&(M+="$"),P=new RegExp(M)):(M=k.toString(),P=k),q=>{if(Rt(q.value))return null;const nt=q.value;return P.test(nt)?null:{pattern:{requiredPattern:M,actualValue:nt}}}}(P)}static nullValidator(P){return null}static compose(P){return Je(P)}static composeAsync(P){return Ct(P)}}function rt(k){return P=>{if(Rt(P.value)||Rt(k))return null;const M=parseFloat(P.value);return!isNaN(M)&&M<k?{min:{min:k,actual:P.value}}:null}}function Et(k){return Rt(k.value)?{required:!0}:null}function Wt(k){return null}function Vt(k){return null!=k}function nr(k){return(0,p.QGY)(k)?(0,B.D)(k):k}function Ue(k){let P={};return k.forEach(M=>{P=null!=M?{...P,...M}:P}),0===Object.keys(P).length?null:P}function Ve(k,P){return P.map(M=>M(k))}function je(k){return k.map(P=>function Ke(k){return!k.validate}(P)?P:M=>P.validate(M))}function Je(k){if(!k)return null;const P=k.filter(Vt);return 0==P.length?null:function(M){return Ue(Ve(M,P))}}function pt(k){return null!=k?Je(je(k)):null}function Ct(k){if(!k)return null;const P=k.filter(Vt);return 0==P.length?null:function(M){const q=Ve(M,P).map(nr);return(0,ce.D)(q).pipe((0,he.U)(Ue))}}function vt(k){return null!=k?Ct(je(k)):null}function Zt(k,P){return null===k?[P]:Array.isArray(k)?[...k,P]:[k,P]}function kt(k){return k._rawValidators}function tn(k){return k._rawAsyncValidators}function un(k){return k?Array.isArray(k)?k:[k]:[]}function vn(k,P){return Array.isArray(k)?k.includes(P):k===P}function Fn(k,P){const M=un(P);return un(k).forEach(nt=>{vn(M,nt)||M.push(nt)}),M}function ar(k,P){return un(P).filter(M=>!vn(k,M))}class Xt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=pt(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=vt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,M){return!!this.control&&this.control.hasError(P,M)}getError(P,M){return this.control?this.control.getError(P,M):null}}class fn extends Xt{get formDirective(){return null}get path(){return null}}class Pn extends Xt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $n{constructor(P){this._cd=P}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let xt=(()=>{class k extends $n{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Pn,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,q){2&M&&p.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)},features:[p.qOj]}),k})(),Rn=(()=>{class k extends $n{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(fn,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,q){2&M&&p.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)("ng-submitted",q.isSubmitted)},features:[p.qOj]}),k})();const we="VALID",Ye="INVALID",et="PENDING",jt="DISABLED";function xe(k){return(At(k)?k.validators:k)||null}function G(k){return Array.isArray(k)?pt(k):k||null}function ie(k,P){return(At(P)?P.asyncValidators:k)||null}function Be(k){return Array.isArray(k)?vt(k):k||null}function At(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}function le(k,P,M){const q=k.controls;if(!(P?Object.keys(q):q).length)throw new p.vHH(1e3,"");if(!q[M])throw new p.vHH(1001,"")}function ae(k,P,M){k._forEachChild((q,nt)=>{if(void 0===M[nt])throw new p.vHH(1002,"")})}class Y{constructor(P,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=M,this._composedValidatorFn=G(this._rawValidators),this._composedAsyncValidatorFn=Be(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===we}get invalid(){return this.status===Ye}get pending(){return this.status==et}get disabled(){return this.status===jt}get enabled(){return this.status!==jt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=G(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=Be(P)}addValidators(P){this.setValidators(Fn(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(Fn(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(ar(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(ar(P,this._rawAsyncValidators))}hasValidator(P){return vn(this._rawValidators,P)}hasAsyncValidator(P){return vn(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=et,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const M=this._parentMarkedDirty(P.onlySelf);this.status=jt,this.errors=null,this._forEachChild(q=>{q.disable({...P,onlySelf:!0})}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...P,skipPristineCheck:M}),this._onDisabledChange.forEach(q=>q(!0))}enable(P={}){const M=this._parentMarkedDirty(P.onlySelf);this.status=we,this._forEachChild(q=>{q.enable({...P,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors({...P,skipPristineCheck:M}),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}getRawValue(){return this.value}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===we||this.status===et)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jt:we}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=et,this._hasOwnPendingAsyncValidator=!0;const M=nr(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,M={}){this.errors=P,this._updateControlsErrors(!1!==M.emitEvent)}get(P){let M=P;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((q,nt)=>q&&q._find(nt),this)}getError(P,M){const q=M?this.get(M):this;return q&&q.errors?q.errors[P]:null}hasError(P,M){return!!this.getError(P,M)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?jt:this.errors?Ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(et)?et:this._anyControlsHaveStatus(Ye)?Ye:we}_anyControlsHaveStatus(P){return this._anyControls(M=>M.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){At(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(P){return null}}class K extends Y{constructor(P,M,q){super(xe(M),ie(q,M)),this.controls=P,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,M){return this.controls[P]?this.controls[P]:(this.controls[P]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(P,M,q={}){this.registerControl(P,M),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(P,M={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(P,M,q={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],M&&this.registerControl(P,M),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,M={}){ae(this,0,P),Object.keys(P).forEach(q=>{le(this,!0,q),this.controls[q].setValue(P[q],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(P,M={}){null!=P&&(Object.keys(P).forEach(q=>{const nt=this.controls[q];nt&&nt.patchValue(P[q],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(P={},M={}){this._forEachChild((q,nt)=>{q.reset(P[nt],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(P,M,q)=>(P[q]=M.getRawValue(),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(M,q)=>!!q._syncPendingControls()||M);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){Object.keys(this.controls).forEach(M=>{const q=this.controls[M];q&&P(q,M)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const[M,q]of Object.entries(this.controls))if(this.contains(M)&&P(q))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,q,nt)=>((q.enabled||this.disabled)&&(M[nt]=q.value),M))}_reduceChildren(P,M){let q=P;return this._forEachChild((nt,ln)=>{q=M(q,nt,ln)}),q}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(P){return this.controls.hasOwnProperty(P)?this.controls[P]:null}}class dt extends K{}function an(k,P){return[...P.path,k]}function re(k,P){He(k,P),P.valueAccessor.writeValue(k.value),k.disabled&&P.valueAccessor.setDisabledState?.(!0),function _n(k,P){P.valueAccessor.registerOnChange(M=>{k._pendingValue=M,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&Ne(k,P)})}(k,P),function St(k,P){const M=(q,nt)=>{P.valueAccessor.writeValue(q),nt&&P.viewToModelUpdate(q)};k.registerOnChange(M),P._registerOnDestroy(()=>{k._unregisterOnChange(M)})}(k,P),function ke(k,P){P.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&Ne(k,P),"submit"!==k.updateOn&&k.markAsTouched()})}(k,P),function Pe(k,P){if(P.valueAccessor.setDisabledState){const M=q=>{P.valueAccessor.setDisabledState(q)};k.registerOnDisabledChange(M),P._registerOnDestroy(()=>{k._unregisterOnDisabledChange(M)})}}(k,P)}function oe(k,P,M=!0){const q=()=>{};P.valueAccessor&&(P.valueAccessor.registerOnChange(q),P.valueAccessor.registerOnTouched(q)),Bt(k,P),k&&(P._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function X(k,P){k.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(P)})}function He(k,P){const M=kt(k);null!==P.validator?k.setValidators(Zt(M,P.validator)):"function"==typeof M&&k.setValidators([M]);const q=tn(k);null!==P.asyncValidator?k.setAsyncValidators(Zt(q,P.asyncValidator)):"function"==typeof q&&k.setAsyncValidators([q]);const nt=()=>k.updateValueAndValidity();X(P._rawValidators,nt),X(P._rawAsyncValidators,nt)}function Bt(k,P){let M=!1;if(null!==k){if(null!==P.validator){const nt=kt(k);if(Array.isArray(nt)&&nt.length>0){const ln=nt.filter(Yn=>Yn!==P.validator);ln.length!==nt.length&&(M=!0,k.setValidators(ln))}}if(null!==P.asyncValidator){const nt=tn(k);if(Array.isArray(nt)&&nt.length>0){const ln=nt.filter(Yn=>Yn!==P.asyncValidator);ln.length!==nt.length&&(M=!0,k.setAsyncValidators(ln))}}}const q=()=>{};return X(P._rawValidators,q),X(P._rawAsyncValidators,q),M}function Ne(k,P){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function wt(k,P){He(k,P)}function Rr(k,P){if(!k.hasOwnProperty("model"))return!1;const M=k.model;return!!M.isFirstChange()||!Object.is(P,M.currentValue)}function Wr(k,P){k._syncPendingControls(),P.forEach(M=>{const q=M.control;"submit"===q.updateOn&&q._pendingChange&&(M.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}function Or(k,P){if(!P)return null;let M,q,nt;return Array.isArray(P),P.forEach(ln=>{ln.constructor===at?M=ln:function Gr(k){return Object.getPrototypeOf(k.constructor)===De}(ln)?q=ln:nt=ln}),nt||q||M||null}const ui={provide:fn,useExisting:(0,p.Gpc)(()=>Ni)},ks=(()=>Promise.resolve())();let Ni=(()=>{class k extends fn{constructor(M,q){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new K({},pt(M),vt(q))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(M){ks.then(()=>{const q=this._findContainer(M.path);M.control=q.registerControl(M.name,M.control),re(M.control,M),M.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(M)})}getControl(M){return this.form.get(M.path)}removeControl(M){ks.then(()=>{const q=this._findContainer(M.path);q&&q.removeControl(M.name),this._directives.delete(M)})}addFormGroup(M){ks.then(()=>{const q=this._findContainer(M.path),nt=new K({});wt(nt,M),q.registerControl(M.name,nt),nt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(M){ks.then(()=>{const q=this._findContainer(M.path);q&&q.removeControl(M.name)})}getFormGroup(M){return this.form.get(M.path)}updateModel(M,q){ks.then(()=>{this.form.get(M.path).setValue(q)})}setValue(M){this.control.setValue(M)}onSubmit(M){return this.submitted=!0,Wr(this.form,this._directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(M){return M.pop(),M.length?this.form.get(M):this.form}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Re,10),p.Y36(Pt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(M,q){1&M&&p.NdJ("submit",function(ln){return q.onSubmit(ln)})("reset",function(){return q.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ui]),p.qOj]}),k})();function Ar(k,P){const M=k.indexOf(P);M>-1&&k.splice(M,1)}function Ki(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}const Kr=class extends Y{constructor(P=null,M,q){super(xe(M),ie(q,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),At(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=Ki(P)?P.value:P)}setValue(P,M={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(P,M={}){this.setValue(P,M)}reset(P=this.defaultValue,M={}){this._applyFormState(P),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){Ar(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){Ar(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){Ki(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}},Bi={provide:Pn,useExisting:(0,p.Gpc)(()=>wo)},qs=(()=>Promise.resolve())();let wo=(()=>{class k extends Pn{constructor(M,q,nt,ln,Yn){super(),this._changeDetectorRef=Yn,this.control=new Kr,this._registered=!1,this.update=new p.vpe,this._parent=M,this._setValidators(q),this._setAsyncValidators(nt),this.valueAccessor=Or(0,ln)}ngOnChanges(M){if(this._checkForErrors(),!this._registered||"name"in M){if(this._registered&&(this._checkName(),this.formDirective)){const q=M.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in M&&this._updateDisabled(M),Rr(M,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){re(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(M){qs.then(()=>{this.control.setValue(M,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(M){const q=M.isDisabled.currentValue,nt=0!==q&&(0,p.D6c)(q);qs.then(()=>{nt&&!this.control.disabled?this.control.disable():!nt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(M){return this._parent?an(M,this._parent):[M]}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(fn,9),p.Y36(Re,10),p.Y36(Pt,10),p.Y36(ee,10),p.Y36(p.sBO,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Bi]),p.qOj,p.TTD]}),k})(),Fs=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})();const ma={provide:ee,useExisting:(0,p.Gpc)(()=>dr),multi:!0};let dr=(()=>{class k extends De{writeValue(M){this.setProperty("value",M??"")}registerOnChange(M){this.onChange=q=>{M(""==q?null:parseFloat(q))}}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("input",function(ln){return q.onChange(ln.target.value)})("blur",function(){return q.onTouched()})},features:[p._Bn([ma]),p.qOj]}),k})(),lo=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const Ut=new p.OlP("NgModelWithFormControlWarning"),Xn={provide:fn,useExisting:(0,p.Gpc)(()=>Ln)};let Ln=(()=>{class k extends fn{constructor(M,q){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(M),this._setAsyncValidators(q)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const q=this.form.get(M.path);return re(q,M),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),q}getControl(M){return this.form.get(M.path)}removeControl(M){oe(M.control||null,M,!1),function Ns(k,P){const M=k.indexOf(P);M>-1&&k.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,q){this.form.get(M.path).setValue(q)}onSubmit(M){return this.submitted=!0,Wr(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const q=M.control,nt=this.form.get(M.path);q!==nt&&(oe(q||null,M),(k=>k instanceof Kr)(nt)&&(re(nt,M),M.control=nt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const q=this.form.get(M.path);wt(q,M),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const q=this.form.get(M.path);q&&function Dn(k,P){return Bt(k,P)}(q,M)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){He(this.form,this),this._oldForm&&Bt(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Re,10),p.Y36(Pt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(M,q){1&M&&p.NdJ("submit",function(ln){return q.onSubmit(ln)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Xn]),p.qOj,p.TTD]}),k})();const ci={provide:Pn,useExisting:(0,p.Gpc)(()=>di)};let di=(()=>{class k extends Pn{constructor(M,q,nt,ln,Yn){super(),this._ngModelWarningConfig=Yn,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(q),this._setAsyncValidators(nt),this.valueAccessor=Or(0,ln)}set isDisabled(M){}ngOnChanges(M){this._added||this._setUpControl(),Rr(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return an(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(M){return new(M||k)(p.Y36(fn,13),p.Y36(Re,10),p.Y36(Pt,10),p.Y36(ee,10),p.Y36(Ut,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([ci]),p.qOj,p.TTD]}),k})();const ea={provide:ee,useExisting:(0,p.Gpc)(()=>us),multi:!0};function as(k,P){return null==k?`${P}`:(P&&"object"==typeof P&&(P="Object"),`${k}: ${P}`.slice(0,50))}let us=(()=>{class k extends De{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const nt=as(this._getOptionId(M),M);this.setProperty("value",nt)}registerOnChange(M){this.onChange=q=>{this.value=this._getOptionValue(q),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q),M))return q;return null}_getOptionValue(M){const q=function Lo(k){return k.split(":")[0]}(M);return this._optionMap.has(q)?this._optionMap.get(q):M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(ln){return q.onChange(ln.target.value)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ea]),p.qOj]}),k})(),Vo=(()=>{class k{constructor(M,q,nt){this._element=M,this._renderer=q,this._select=nt,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(as(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(us,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const Co={provide:ee,useExisting:(0,p.Gpc)(()=>kr),multi:!0};function Ls(k,P){return null==k?`${P}`:("string"==typeof P&&(P=`'${P}'`),P&&"object"==typeof P&&(P="Object"),`${k}: ${P}`.slice(0,50))}let kr=(()=>{class k extends De{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let q;if(this.value=M,Array.isArray(M)){const nt=M.map(ln=>this._getOptionId(ln));q=(ln,Yn)=>{ln._setSelected(nt.indexOf(Yn.toString())>-1)}}else q=(nt,ln)=>{nt._setSelected(!1)};this._optionMap.forEach(q)}registerOnChange(M){this.onChange=q=>{const nt=[],ln=q.selectedOptions;if(void 0!==ln){const Yn=ln;for(let Xs=0;Xs<Yn.length;Xs++){const mi=this._getOptionValue(Yn[Xs].value);nt.push(mi)}}else{const Yn=q.options;for(let Xs=0;Xs<Yn.length;Xs++){const ws=Yn[Xs];if(ws.selected){const mi=this._getOptionValue(ws.value);nt.push(mi)}}}this.value=nt,M(nt)}}_registerOption(M){const q=(this._idCounter++).toString();return this._optionMap.set(q,M),q}_getOptionId(M){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q)._value,M))return q;return null}_getOptionValue(M){const q=function qi(k){return k.split(":")[0]}(M);return this._optionMap.has(q)?this._optionMap.get(q)._value:M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(ln){return q.onChange(ln.target)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Co]),p.qOj]}),k})(),Zi=(()=>{class k{constructor(M,q,nt){this._element=M,this._renderer=q,this._select=nt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue(Ls(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue(Ls(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(kr,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();let co=(()=>{class k{constructor(){this._validator=Wt}ngOnChanges(M){if(this.inputName in M){const q=this.normalizeInput(M[this.inputName].currentValue);this._enabled=this.enabled(q),this._validator=this._enabled?this.createValidator(q):Wt,this._onChange&&this._onChange()}}validate(M){return this._validator(M)}registerOnValidatorChange(M){this._onChange=M}enabled(M){return null!=M}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=p.lG2({type:k,features:[p.TTD]}),k})();const Ys={provide:Re,useExisting:(0,p.Gpc)(()=>ls),multi:!0};let ls=(()=>{class k extends co{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=M=>function _s(k){return"number"==typeof k?k:parseFloat(k)}(M),this.createValidator=M=>rt(M)}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(M,q){2&M&&p.uIk("min",q._enabled?q.min:null)},inputs:{min:"min"},features:[p._Bn([Ys]),p.qOj]}),k})();const ji={provide:Re,useExisting:(0,p.Gpc)(()=>ho),multi:!0};let ho=(()=>{class k extends co{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=M=>Et}enabled(M){return M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(M,q){2&M&&p.uIk("required",q._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([ji]),p.qOj]}),k})(),Ei=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[lo]}),k})(),Fr=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Ei]}),k})(),Us=(()=>{class k{static withConfig(M){return{ngModule:k,providers:[{provide:Ut,useValue:M.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Ei]}),k})();class To extends Y{constructor(P,M,q){super(xe(M),ie(q,M)),this.controls=P,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[this._adjustIndex(P)]}push(P,M={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(P,M,q={}){this.controls.splice(P,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(P,M={}){let q=this._adjustIndex(P);q<0&&(q=0),this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(P,M,q={}){let nt=this._adjustIndex(P);nt<0&&(nt=0),this.controls[nt]&&this.controls[nt]._registerOnCollectionChange(()=>{}),this.controls.splice(nt,1),M&&(this.controls.splice(nt,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,M={}){ae(this,0,P),P.forEach((q,nt)=>{le(this,!1,nt),this.at(nt).setValue(q,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(P,M={}){null!=P&&(P.forEach((q,nt)=>{this.at(nt)&&this.at(nt).patchValue(q,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(P=[],M={}){this._forEachChild((q,nt)=>{q.reset(P[nt],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(P=>P.getRawValue())}clear(P={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_adjustIndex(P){return P<0?P+this.length:P}_syncPendingControls(){let P=this.controls.reduce((M,q)=>!!q._syncPendingControls()||M,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){this.controls.forEach((M,q)=>{P(M,q)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(M=>M.enabled&&P(M))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}_find(P){return this.at(P)??null}}function It(k){return!!k&&(void 0!==k.asyncValidators||void 0!==k.validators||void 0!==k.updateOn)}let Jn=(()=>{class k{constructor(){this.useNonNullable=!1}get nonNullable(){const M=new k;return M.useNonNullable=!0,M}group(M,q=null){const nt=this._reduceControls(M);let ln={};return It(q)?ln=q:null!==q&&(ln.validators=q.validator,ln.asyncValidators=q.asyncValidator),new K(nt,ln)}record(M,q=null){const nt=this._reduceControls(M);return new dt(nt,q)}control(M,q,nt){let ln={};return this.useNonNullable?(It(q)?ln=q:(ln.validators=q,ln.asyncValidators=nt),new Kr(M,{...ln,nonNullable:!0})):new Kr(M,q,nt)}array(M,q,nt){const ln=M.map(Yn=>this._createControl(Yn));return new To(ln,q,nt)}_reduceControls(M){const q={};return Object.keys(M).forEach(nt=>{q[nt]=this._createControl(M[nt])}),q}_createControl(M){return M instanceof Kr||M instanceof Y?M:Array.isArray(M)?this.control(M[0],M.length>1?M[1]:null,M.length>2?M[2]:null):this.control(M)}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=p.Yz7({token:k,factory:k.\u0275fac,providedIn:Us}),k})(),jo=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=p.Yz7({token:k,factory:function(){return(0,p.f3M)(Jn).nonNullable},providedIn:Us}),k})()},1481:(Ht,Le,R)=>{R.d(Le,{Dx:()=>Ze,b2:()=>Un,q6:()=>br});var p=R(6895),F=R(4650);class B extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ce extends B{static makeCurrent(){(0,p.HT)(new ce)}onAndCancel(oe,X,Pe){return oe.addEventListener(X,Pe,!1),()=>{oe.removeEventListener(X,Pe,!1)}}dispatchEvent(oe,X){oe.dispatchEvent(X)}remove(oe){oe.parentNode&&oe.parentNode.removeChild(oe)}createElement(oe,X){return(X=X||this.getDefaultDocument()).createElement(oe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(oe){return oe.nodeType===Node.ELEMENT_NODE}isShadowRoot(oe){return oe instanceof DocumentFragment}getGlobalEventTarget(oe,X){return"window"===X?window:"document"===X?oe:"body"===X?oe.body:null}getBaseHref(oe){const X=function Ie(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==X?null:function ee(re){De=De||document.createElement("a"),De.setAttribute("href",re);const oe=De.pathname;return"/"===oe.charAt(0)?oe:`/${oe}`}(X)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(oe){return(0,p.Mx)(document.cookie,oe)}}let De,he=null;const Fe=new F.OlP("TRANSITION_ID"),fe=[{provide:F.ip1,useFactory:function te(re,oe,X){return()=>{X.get(F.CZH).donePromise.then(()=>{const Pe=(0,p.q)(),He=oe.querySelectorAll(`style[ng-transition="${re}"]`);for(let Bt=0;Bt<He.length;Bt++)Pe.remove(He[Bt])})}},deps:[Fe,p.K0,F.zs3],multi:!0}];let Dt=(()=>{class re{build(){return new XMLHttpRequest}}return re.\u0275fac=function(X){return new(X||re)},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();const at=new F.OlP("EventManagerPlugins");let tt=(()=>{class re{constructor(X,Pe){this._zone=Pe,this._eventNameToPlugin=new Map,X.forEach(He=>He.manager=this),this._plugins=X.slice().reverse()}addEventListener(X,Pe,He){return this._findPluginFor(Pe).addEventListener(X,Pe,He)}addGlobalEventListener(X,Pe,He){return this._findPluginFor(Pe).addGlobalEventListener(X,Pe,He)}getZone(){return this._zone}_findPluginFor(X){const Pe=this._eventNameToPlugin.get(X);if(Pe)return Pe;const He=this._plugins;for(let Bt=0;Bt<He.length;Bt++){const _n=He[Bt];if(_n.supports(X))return this._eventNameToPlugin.set(X,_n),_n}throw new Error(`No event manager plugin found for event ${X}`)}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(at),F.LFG(F.R0b))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();class Rt{constructor(oe){this._doc=oe}addGlobalEventListener(oe,X,Pe){const He=(0,p.q)().getGlobalEventTarget(this._doc,oe);if(!He)throw new Error(`Unsupported event target ${He} for event ${X}`);return this.addEventListener(He,X,Pe)}}let qe=(()=>{class re{constructor(){this._stylesSet=new Set}addStyles(X){const Pe=new Set;X.forEach(He=>{this._stylesSet.has(He)||(this._stylesSet.add(He),Pe.add(He))}),this.onStylesAdded(Pe)}onStylesAdded(X){}getAllStyles(){return Array.from(this._stylesSet)}}return re.\u0275fac=function(X){return new(X||re)},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})(),Re=(()=>{class re extends qe{constructor(X){super(),this._doc=X,this._hostNodes=new Map,this._hostNodes.set(X.head,[])}_addStylesToHost(X,Pe,He){X.forEach(Bt=>{const _n=this._doc.createElement("style");_n.textContent=Bt,He.push(Pe.appendChild(_n))})}addHost(X){const Pe=[];this._addStylesToHost(this._stylesSet,X,Pe),this._hostNodes.set(X,Pe)}removeHost(X){const Pe=this._hostNodes.get(X);Pe&&Pe.forEach(Pt),this._hostNodes.delete(X)}onStylesAdded(X){this._hostNodes.forEach((Pe,He)=>{this._addStylesToHost(X,He,Pe)})}ngOnDestroy(){this._hostNodes.forEach(X=>X.forEach(Pt))}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();function Pt(re){(0,p.q)().remove(re)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ge=/%COMP%/g;function en(re,oe,X){for(let Pe=0;Pe<oe.length;Pe++){let He=oe[Pe];Array.isArray(He)?en(re,He,X):(He=He.replace(ge,re),X.push(He))}return X}function Tt(re){return oe=>{if("__ngUnwrap__"===oe)return re;!1===re(oe)&&(oe.preventDefault(),oe.returnValue=!1)}}let Vt=(()=>{class re{constructor(X,Pe,He){this.eventManager=X,this.sharedStylesHost=Pe,this.appId=He,this.rendererByCompId=new Map,this.defaultRenderer=new nr(X)}createRenderer(X,Pe){if(!X||!Pe)return this.defaultRenderer;switch(Pe.encapsulation){case F.ifc.Emulated:{let He=this.rendererByCompId.get(Pe.id);return He||(He=new je(this.eventManager,this.sharedStylesHost,Pe,this.appId),this.rendererByCompId.set(Pe.id,He)),He.applyToHost(X),He}case 1:case F.ifc.ShadowDom:return new Je(this.eventManager,this.sharedStylesHost,X,Pe);default:if(!this.rendererByCompId.has(Pe.id)){const He=en(Pe.id,Pe.styles,[]);this.sharedStylesHost.addStyles(He),this.rendererByCompId.set(Pe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(tt),F.LFG(Re),F.LFG(F.AFp))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();class nr{constructor(oe){this.eventManager=oe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(oe,X){return X?document.createElementNS(yt[X]||X,oe):document.createElement(oe)}createComment(oe){return document.createComment(oe)}createText(oe){return document.createTextNode(oe)}appendChild(oe,X){(Ke(oe)?oe.content:oe).appendChild(X)}insertBefore(oe,X,Pe){oe&&(Ke(oe)?oe.content:oe).insertBefore(X,Pe)}removeChild(oe,X){oe&&oe.removeChild(X)}selectRootElement(oe,X){let Pe="string"==typeof oe?document.querySelector(oe):oe;if(!Pe)throw new Error(`The selector "${oe}" did not match any elements`);return X||(Pe.textContent=""),Pe}parentNode(oe){return oe.parentNode}nextSibling(oe){return oe.nextSibling}setAttribute(oe,X,Pe,He){if(He){X=He+":"+X;const Bt=yt[He];Bt?oe.setAttributeNS(Bt,X,Pe):oe.setAttribute(X,Pe)}else oe.setAttribute(X,Pe)}removeAttribute(oe,X,Pe){if(Pe){const He=yt[Pe];He?oe.removeAttributeNS(He,X):oe.removeAttribute(`${Pe}:${X}`)}else oe.removeAttribute(X)}addClass(oe,X){oe.classList.add(X)}removeClass(oe,X){oe.classList.remove(X)}setStyle(oe,X,Pe,He){He&(F.JOm.DashCase|F.JOm.Important)?oe.style.setProperty(X,Pe,He&F.JOm.Important?"important":""):oe.style[X]=Pe}removeStyle(oe,X,Pe){Pe&F.JOm.DashCase?oe.style.removeProperty(X):oe.style[X]=""}setProperty(oe,X,Pe){oe[X]=Pe}setValue(oe,X){oe.nodeValue=X}listen(oe,X,Pe){return"string"==typeof oe?this.eventManager.addGlobalEventListener(oe,X,Tt(Pe)):this.eventManager.addEventListener(oe,X,Tt(Pe))}}function Ke(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class je extends nr{constructor(oe,X,Pe,He){super(oe),this.component=Pe;const Bt=en(He+"-"+Pe.id,Pe.styles,[]);X.addStyles(Bt),this.contentAttr=function Ce(re){return"_ngcontent-%COMP%".replace(ge,re)}(He+"-"+Pe.id),this.hostAttr=function _t(re){return"_nghost-%COMP%".replace(ge,re)}(He+"-"+Pe.id)}applyToHost(oe){super.setAttribute(oe,this.hostAttr,"")}createElement(oe,X){const Pe=super.createElement(oe,X);return super.setAttribute(Pe,this.contentAttr,""),Pe}}class Je extends nr{constructor(oe,X,Pe,He){super(oe),this.sharedStylesHost=X,this.hostEl=Pe,this.shadowRoot=Pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Bt=en(He.id,He.styles,[]);for(let _n=0;_n<Bt.length;_n++){const ke=document.createElement("style");ke.textContent=Bt[_n],this.shadowRoot.appendChild(ke)}}nodeOrShadowRoot(oe){return oe===this.hostEl?this.shadowRoot:oe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(oe,X){return super.appendChild(this.nodeOrShadowRoot(oe),X)}insertBefore(oe,X,Pe){return super.insertBefore(this.nodeOrShadowRoot(oe),X,Pe)}removeChild(oe,X){return super.removeChild(this.nodeOrShadowRoot(oe),X)}parentNode(oe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(oe)))}}let pt=(()=>{class re extends Rt{constructor(X){super(X)}supports(X){return!0}addEventListener(X,Pe,He){return X.addEventListener(Pe,He,!1),()=>this.removeEventListener(X,Pe,He)}removeEventListener(X,Pe,He){return X.removeEventListener(Pe,He)}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();const Ct=["alt","control","meta","shift"],vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zt={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let kt=(()=>{class re extends Rt{constructor(X){super(X)}supports(X){return null!=re.parseEventName(X)}addEventListener(X,Pe,He){const Bt=re.parseEventName(Pe),_n=re.eventCallback(Bt.fullKey,He,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(X,Bt.domEventName,_n))}static parseEventName(X){const Pe=X.toLowerCase().split("."),He=Pe.shift();if(0===Pe.length||"keydown"!==He&&"keyup"!==He)return null;const Bt=re._normalizeKey(Pe.pop());let _n="",ke=Pe.indexOf("code");if(ke>-1&&(Pe.splice(ke,1),_n="code."),Ct.forEach(St=>{const wt=Pe.indexOf(St);wt>-1&&(Pe.splice(wt,1),_n+=St+".")}),_n+=Bt,0!=Pe.length||0===Bt.length)return null;const Ne={};return Ne.domEventName=He,Ne.fullKey=_n,Ne}static matchEventFullKeyCode(X,Pe){let He=vt[X.key]||X.key,Bt="";return Pe.indexOf("code.")>-1&&(He=X.code,Bt="code."),!(null==He||!He)&&(He=He.toLowerCase()," "===He?He="space":"."===He&&(He="dot"),Ct.forEach(_n=>{_n!==He&&(0,Zt[_n])(X)&&(Bt+=_n+".")}),Bt+=He,Bt===Pe)}static eventCallback(X,Pe,He){return Bt=>{re.matchEventFullKeyCode(Bt,X)&&He.runGuarded(()=>Pe(Bt))}}static _normalizeKey(X){return"esc"===X?"escape":X}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();const br=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:p.bD},{provide:F.g9A,useValue:function Xt(){ce.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function Pn(){return(0,F.RDi)(document),document},deps:[]}]),_r=new F.OlP(""),xt=[{provide:F.rWj,useClass:class Ee{addToWindow(oe){F.dqk.getAngularTestability=(Pe,He=!0)=>{const Bt=oe.findTestabilityInTree(Pe,He);if(null==Bt)throw new Error("Could not find testability for element.");return Bt},F.dqk.getAllAngularTestabilities=()=>oe.getAllTestabilities(),F.dqk.getAllAngularRootElements=()=>oe.getAllRootElements(),F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(Pe=>{const He=F.dqk.getAllAngularTestabilities();let Bt=He.length,_n=!1;const ke=function(Ne){_n=_n||Ne,Bt--,0==Bt&&Pe(_n)};He.forEach(function(Ne){Ne.whenStable(ke)})})}findTestabilityInTree(oe,X,Pe){return null==X?null:oe.getTestability(X)??(Pe?(0,p.q)().isShadowRoot(X)?this.findTestabilityInTree(oe,X.host,!0):this.findTestabilityInTree(oe,X.parentElement,!0):null)}},deps:[]},{provide:F.lri,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]}],Rn=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function fn(){return new F.qLn},deps:[]},{provide:at,useClass:pt,multi:!0,deps:[p.K0,F.R0b,F.Lbi]},{provide:at,useClass:kt,multi:!0,deps:[p.K0]},{provide:Vt,useClass:Vt,deps:[tt,Re,F.AFp]},{provide:F.FYo,useExisting:Vt},{provide:qe,useExisting:Re},{provide:Re,useClass:Re,deps:[p.K0]},{provide:tt,useClass:tt,deps:[at,F.R0b]},{provide:p.JF,useClass:Dt,deps:[]},[]];let Un=(()=>{class re{constructor(X){}static withServerTransition(X){return{ngModule:re,providers:[{provide:F.AFp,useValue:X.appId},{provide:Fe,useExisting:F.AFp},fe]}}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(_r,12))},re.\u0275mod=F.oAB({type:re}),re.\u0275inj=F.cJS({providers:[...Rn,...xt],imports:[p.ez,F.hGG]}),re})(),Ze=(()=>{class re{constructor(X){this._doc=X}getTitle(){return this._doc.title}setTitle(X){this._doc.title=X||""}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:function(X){let Pe=null;return Pe=X?new X:function qn(){return new Ze((0,F.LFG)(p.K0))}(),Pe},providedIn:"root"}),re})();typeof window<"u"&&window},2827:(Ht,Le,R)=>{R.d(Le,{F0:()=>ii,rH:()=>bs,yS:()=>ja,Bz:()=>iu,lC:()=>hi});var p=R(4650),F=R(8996),B=R(9646),ce=R(1135),he=R(6805),Ie=R(9751),De=R(4742),ee=R(4671),Fe=R(3268),te=R(3269),fe=R(1810),Ee=R(5403),Dt=R(9672);function at(..._){const E=(0,te.yG)(_),y=(0,te.jO)(_),{args:A,keys:O}=(0,De.D)(_);if(0===A.length)return(0,F.D)([],E);const z=new Ie.y(function tt(_,E,y=ee.y){return A=>{Rt(E,()=>{const{length:O}=_,z=new Array(O);let ue=O,me=O;for(let ut=0;ut<O;ut++)Rt(E,()=>{const Kt=(0,F.D)(_[ut],E);let Gn=!1;Kt.subscribe((0,Ee.x)(A,dn=>{z[ut]=dn,Gn||(Gn=!0,me--),me||A.next(y(z.slice()))},()=>{--ue||A.complete()}))},A)},A)}}(A,E,O?ue=>(0,fe.n)(O,ue):ee.y));return y?z.pipe((0,Fe.Z)(y)):z}function Rt(_,E,y){_?(0,Dt.f)(y,_,E):E()}var qe=R(1350),Re=R(9770),Pt=R(9635),yt=R(2843),ge=R(515),rt=R(4033),it=R(7579),Et=R(6895),ht=R(4004),Ce=R(3900),_t=R(5698),en=R(8675),Tt=R(9300),Wt=R(5577),Vt=R(590),nr=R(4351),Ue=R(8505),Ve=R(8421),Ke=R(4482);function je(_){return(0,Ke.e)((E,y)=>{let z,A=null,O=!1;A=E.subscribe((0,Ee.x)(y,void 0,void 0,ue=>{z=(0,Ve.Xf)(_(ue,je(_)(E))),A?(A.unsubscribe(),A=null,z.subscribe(y)):O=!0})),O&&(A.unsubscribe(),A=null,z.subscribe(y))})}var Je=R(5026);function pt(_){return _<=0?()=>ge.E:(0,Ke.e)((E,y)=>{let A=[];E.subscribe((0,Ee.x)(y,O=>{A.push(O),_<A.length&&A.shift()},()=>{for(const O of A)y.next(O);y.complete()},void 0,()=>{A=null}))})}var Ct=R(8068),vt=R(6590);function Zt(_,E){const y=arguments.length>=2;return A=>A.pipe(_?(0,Tt.h)((O,z)=>_(O,z,A)):ee.y,pt(1),y?(0,vt.d)(E):(0,Ct.T)(()=>new he.K))}var tn=R(9718);function un(_){return(0,Ke.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(_)}})}var vn=R(8343),Fn=R(8189),ar=R(1481);const Xt="primary",fn=Symbol("RouteTitle");class Pn{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function $n(_){return new Pn(_)}function br(_,E,y){const A=y.path.split("/");if(A.length>_.length||"full"===y.pathMatch&&(E.hasChildren()||A.length<_.length))return null;const O={};for(let z=0;z<A.length;z++){const ue=A[z],me=_[z];if(ue.startsWith(":"))O[ue.substring(1)]=me;else if(ue!==me.path)return null}return{consumed:_.slice(0,A.length),posParams:O}}function xt(_,E){const y=_?Object.keys(_):void 0,A=E?Object.keys(E):void 0;if(!y||!A||y.length!=A.length)return!1;let O;for(let z=0;z<y.length;z++)if(O=y[z],!Rn(_[O],E[O]))return!1;return!0}function Rn(_,E){if(Array.isArray(_)&&Array.isArray(E)){if(_.length!==E.length)return!1;const y=[..._].sort(),A=[...E].sort();return y.every((O,z)=>A[z]===O)}return _===E}function Un(_){return Array.prototype.concat.apply([],_)}function ur(_){return _.length>0?_[_.length-1]:null}function Bn(_,E){for(const y in _)_.hasOwnProperty(y)&&E(_[y],y)}function qn(_){return(0,p.CqO)(_)?_:(0,p.QGY)(_)?(0,F.D)(Promise.resolve(_)):(0,B.of)(_)}const de={exact:function yn(_,E,y){if(!et(_.segments,E.segments)||!pn(_.segments,E.segments,y)||_.numberOfChildren!==E.numberOfChildren)return!1;for(const A in E.children)if(!_.children[A]||!yn(_.children[A],E.children[A],y))return!1;return!0},subset:Nt},Xe={exact:function rn(_,E){return xt(_,E)},subset:function Tn(_,E){return Object.keys(E).length<=Object.keys(_).length&&Object.keys(E).every(y=>Rn(_[y],E[y]))},ignored:()=>!0};function ot(_,E,y){return de[y.paths](_.root,E.root,y.matrixParams)&&Xe[y.queryParams](_.queryParams,E.queryParams)&&!("exact"===y.fragment&&_.fragment!==E.fragment)}function Nt(_,E,y){return Nn(_,E,E.segments,y)}function Nn(_,E,y,A){if(_.segments.length>y.length){const O=_.segments.slice(0,y.length);return!(!et(O,y)||E.hasChildren()||!pn(O,y,A))}if(_.segments.length===y.length){if(!et(_.segments,y)||!pn(_.segments,y,A))return!1;for(const O in E.children)if(!_.children[O]||!Nt(_.children[O],E.children[O],A))return!1;return!0}{const O=y.slice(0,_.segments.length),z=y.slice(_.segments.length);return!!(et(_.segments,O)&&pn(_.segments,O,A)&&_.children[Xt])&&Nn(_.children[Xt],E,z,A)}}function pn(_,E,y){return E.every((A,O)=>Xe[y](_[O].parameters,A.parameters))}class rr{constructor(E,y,A){this.root=E,this.queryParams=y,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$n(this.queryParams)),this._queryParamMap}toString(){return ie.serialize(this)}}class Ft{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Bn(y,(A,O)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Be(this)}}class we{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=$n(this.parameters)),this._parameterMap}toString(){return dt(this)}}function et(_,E){return _.length===E.length&&_.every((y,A)=>y.path===E[A].path)}let xe=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return new G},providedIn:"root"}),_})();class G{parse(E){const y=new _n(E);return new rr(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${At(E.root,!0)}`,A=function an(_){const E=Object.keys(_).map(y=>{const A=_[y];return Array.isArray(A)?A.map(O=>`${ae(y)}=${ae(O)}`).join("&"):`${ae(y)}=${ae(A)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${A}${"string"==typeof E.fragment?`#${function Y(_){return encodeURI(_)}(E.fragment)}`:""}`}}const ie=new G;function Be(_){return _.segments.map(E=>dt(E)).join("/")}function At(_,E){if(!_.hasChildren())return Be(_);if(E){const y=_.children[Xt]?At(_.children[Xt],!1):"",A=[];return Bn(_.children,(O,z)=>{z!==Xt&&A.push(`${z}:${At(O,!1)}`)}),A.length>0?`${y}(${A.join("//")})`:y}{const y=function jt(_,E){let y=[];return Bn(_.children,(A,O)=>{O===Xt&&(y=y.concat(E(A,O)))}),Bn(_.children,(A,O)=>{O!==Xt&&(y=y.concat(E(A,O)))}),y}(_,(A,O)=>O===Xt?[At(_.children[Xt],!1)]:[`${O}:${At(A,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[Xt]?`${Be(_)}/${y[0]}`:`${Be(_)}/(${y.join("//")})`}}function le(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ae(_){return le(_).replace(/%3B/gi,";")}function K(_){return le(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H(_){return decodeURIComponent(_)}function Te(_){return H(_.replace(/\+/g,"%20"))}function dt(_){return`${K(_.path)}${function $t(_){return Object.keys(_).map(E=>`;${K(E)}=${K(_[E])}`).join("")}(_.parameters)}`}const re=/^[^\/()?;=#]+/;function oe(_){const E=_.match(re);return E?E[0]:""}const X=/^[^=?&#]+/,He=/^[^&#]+/;class _n{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(A[Xt]=new Ft(E,y)),A}parseSegment(){const E=oe(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(E),new we(H(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=oe(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const O=oe(this.remaining);O&&(A=O,this.capture(A))}E[H(y)]=H(A)}parseQueryParam(E){const y=function Pe(_){const E=_.match(X);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const ue=function Bt(_){const E=_.match(He);return E?E[0]:""}(this.remaining);ue&&(A=ue,this.capture(A))}const O=Te(y),z=Te(A);if(E.hasOwnProperty(O)){let ue=E[O];Array.isArray(ue)||(ue=[ue],E[O]=ue),ue.push(z)}else E[O]=z}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=oe(this.remaining),O=this.remaining[A.length];if("/"!==O&&")"!==O&&";"!==O)throw new p.vHH(4010,!1);let z;A.indexOf(":")>-1?(z=A.slice(0,A.indexOf(":")),this.capture(z),this.capture(":")):E&&(z=Xt);const ue=this.parseChildren();y[z]=1===Object.keys(ue).length?ue[Xt]:new Ft([],ue),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new p.vHH(4011,!1)}}function ke(_){return _.segments.length>0?new Ft([],{[Xt]:_}):_}function Ne(_){const E={};for(const A of Object.keys(_.children)){const z=Ne(_.children[A]);(z.segments.length>0||z.hasChildren())&&(E[A]=z)}return function St(_){if(1===_.numberOfChildren&&_.children[Xt]){const E=_.children[Xt];return new Ft(_.segments.concat(E.segments),E.children)}return _}(new Ft(_.segments,E))}function wt(_){return _ instanceof rr}function jn(_,E,y,A,O){if(0===y.length)return Wr(E.root,E.root,E.root,A,O);const z=function Qn(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new Ns(!0,0,_);let E=0,y=!1;const A=_.reduce((O,z,ue)=>{if("object"==typeof z&&null!=z){if(z.outlets){const me={};return Bn(z.outlets,(ut,Kt)=>{me[Kt]="string"==typeof ut?ut.split("/"):ut}),[...O,{outlets:me}]}if(z.segmentPath)return[...O,z.segmentPath]}return"string"!=typeof z?[...O,z]:0===ue?(z.split("/").forEach((me,ut)=>{0==ut&&"."===me||(0==ut&&""===me?y=!0:".."===me?E++:""!=me&&O.push(me))}),O):[...O,z]},[]);return new Ns(y,E,A)}(y);return z.toRoot()?Wr(E.root,E.root,new Ft([],{}),A,O):function ue(ut){const Kt=function Ni(_,E,y,A){if(_.isAbsolute)return new ui(E.root,!0,0);if(-1===A)return new ui(y,y===E.root,0);return function Ar(_,E,y){let A=_,O=E,z=y;for(;z>O;){if(z-=O,A=A.parent,!A)throw new p.vHH(4005,!1);O=A.segments.length}return new ui(A,!1,O-z)}(y,A+(Rr(_.commands[0])?0:1),_.numberOfDoubleDots)}(z,E,_.snapshot?._urlSegment,ut),Gn=Kt.processChildren?Mi(Kt.segmentGroup,Kt.index,z.commands):Kr(Kt.segmentGroup,Kt.index,z.commands);return Wr(E.root,Kt.segmentGroup,Gn,A,O)}(_.snapshot?._lastPathIndex)}function Rr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function Gr(_){return"object"==typeof _&&null!=_&&_.outlets}function Wr(_,E,y,A,O){let ue,z={};A&&Bn(A,(ut,Kt)=>{z[Kt]=Array.isArray(ut)?ut.map(Gn=>`${Gn}`):`${ut}`}),ue=_===E?y:Or(_,E,y);const me=ke(Ne(ue));return new rr(me,z,O)}function Or(_,E,y){const A={};return Bn(_.children,(O,z)=>{A[z]=O===E?y:Or(O,E,y)}),new Ft(_.segments,A)}class Ns{constructor(E,y,A){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=A,E&&A.length>0&&Rr(A[0]))throw new p.vHH(4003,!1);const O=A.find(Gr);if(O&&O!==ur(A))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ui{constructor(E,y,A){this.segmentGroup=E,this.processChildren=y,this.index=A}}function Kr(_,E,y){if(_||(_=new Ft([],{})),0===_.segments.length&&_.hasChildren())return Mi(_,E,y);const A=function jr(_,E,y){let A=0,O=E;const z={match:!1,pathIndex:0,commandIndex:0};for(;O<_.segments.length;){if(A>=y.length)return z;const ue=_.segments[O],me=y[A];if(Gr(me))break;const ut=`${me}`,Kt=A<y.length-1?y[A+1]:null;if(O>0&&void 0===ut)break;if(ut&&Kt&&"object"==typeof Kt&&void 0===Kt.outlets){if(!Ks(ut,Kt,ue))return z;A+=2}else{if(!Ks(ut,{},ue))return z;A++}O++}return{match:!0,pathIndex:O,commandIndex:A}}(_,E,y),O=y.slice(A.commandIndex);if(A.match&&A.pathIndex<_.segments.length){const z=new Ft(_.segments.slice(0,A.pathIndex),{});return z.children[Xt]=new Ft(_.segments.slice(A.pathIndex),_.children),Mi(z,0,O)}return A.match&&0===O.length?new Ft(_.segments,{}):A.match&&!_.hasChildren()?ss(_,E,y):A.match?Mi(_,0,O):ss(_,E,y)}function Mi(_,E,y){if(0===y.length)return new Ft(_.segments,{});{const A=function Ki(_){return Gr(_[0])?_[0].outlets:{[Xt]:_}}(y),O={};return Bn(A,(z,ue)=>{"string"==typeof z&&(z=[z]),null!==z&&(O[ue]=Kr(_.children[ue],E,z))}),Bn(_.children,(z,ue)=>{void 0===A[ue]&&(O[ue]=z)}),new Ft(_.segments,O)}}function ss(_,E,y){const A=_.segments.slice(0,E);let O=0;for(;O<y.length;){const z=y[O];if(Gr(z)){const ut=qr(z.outlets);return new Ft(A,ut)}if(0===O&&Rr(y[0])){A.push(new we(_.segments[E].path,$r(y[0]))),O++;continue}const ue=Gr(z)?z.outlets[Xt]:`${z}`,me=O<y.length-1?y[O+1]:null;ue&&me&&Rr(me)?(A.push(new we(ue,$r(me))),O+=2):(A.push(new we(ue,{})),O++)}return new Ft(A,{})}function qr(_){const E={};return Bn(_,(y,A)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[A]=ss(new Ft([],{}),0,y))}),E}function $r(_){const E={};return Bn(_,(y,A)=>E[A]=`${y}`),E}function Ks(_,E,y){return _==y.path&&xt(E,y.parameters)}class Xr{constructor(E,y){this.id=E,this.url=y}}class os extends Xr{constructor(E,y,A="imperative",O=null){super(E,y),this.type=0,this.navigationTrigger=A,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nr extends Xr{constructor(E,y,A){super(E,y),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bi extends Xr{constructor(E,y,A,O){super(E,y),this.reason=A,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qs extends Xr{constructor(E,y,A,O){super(E,y),this.error=A,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wo extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fs extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ma extends Xr{constructor(E,y,A,O,z){super(E,y),this.urlAfterRedirects=A,this.state=O,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dr extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Io extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Do{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lo{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Me{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class be{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $e{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gt{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ut{constructor(E,y,A){this.routerEvent=E,this.position=y,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ir{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=Xn(E,this._root);return y?y.children.map(A=>A.value):[]}firstChild(E){const y=Xn(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Ln(E,this._root);return y.length<2?[]:y[y.length-2].children.map(O=>O.value).filter(O=>O!==E)}pathFromRoot(E){return Ln(E,this._root).map(y=>y.value)}}function Xn(_,E){if(_===E.value)return E;for(const y of E.children){const A=Xn(_,y);if(A)return A}return null}function Ln(_,E){if(_===E.value)return[E];for(const y of E.children){const A=Ln(_,y);if(A.length)return A.unshift(E),A}return[]}class ei{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function li(_){const E={};return _&&_.children.forEach(y=>E[y.value.outlet]=y),E}class pi extends ir{constructor(E,y){super(E),this.snapshot=y,us(this,E)}toString(){return this.snapshot.toString()}}function cr(_,E){const y=function ys(_,E){const ue=new as([],{},{},"",{},Xt,E,null,_.root,-1,{});return new Lo("",new ei(ue,[]))}(_,E),A=new ce.X([new we("",{})]),O=new ce.X({}),z=new ce.X({}),ue=new ce.X({}),me=new ce.X(""),ut=new ci(A,O,ue,me,z,Xt,E,y.root);return ut.snapshot=y.root,new pi(new ei(ut,[]),y)}class ci{constructor(E,y,A,O,z,ue,me,ut){this.url=E,this.params=y,this.queryParams=A,this.fragment=O,this.data=z,this.outlet=ue,this.component=me,this.title=this.data?.pipe((0,ht.U)(Kt=>Kt[fn]))??(0,B.of)(void 0),this._futureSnapshot=ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(E=>$n(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(E=>$n(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function di(_,E="emptyOnly"){const y=_.pathFromRoot;let A=0;if("always"!==E)for(A=y.length-1;A>=1;){const O=y[A],z=y[A-1];if(O.routeConfig&&""===O.routeConfig.path)A--;else{if(z.component)break;A--}}return function ea(_){return _.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(A))}class as{constructor(E,y,A,O,z,ue,me,ut,Kt,Gn,dn,hr){this.url=E,this.params=y,this.queryParams=A,this.fragment=O,this.data=z,this.outlet=ue,this.component=me,this.title=this.data?.[fn],this.routeConfig=ut,this._urlSegment=Kt,this._lastPathIndex=Gn,this._correctedLastPathIndex=hr??Gn,this._resolve=dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$n(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$n(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lo extends ir{constructor(E,y){super(y),this.url=E,us(this,y)}toString(){return Vo(this._root)}}function us(_,E){E.value._routerState=_,E.children.forEach(y=>us(_,y))}function Vo(_){const E=_.children.length>0?` { ${_.children.map(Vo).join(", ")} } `:"";return`${_.value}${E}`}function Co(_){if(_.snapshot){const E=_.snapshot,y=_._futureSnapshot;_.snapshot=y,xt(E.queryParams,y.queryParams)||_.queryParams.next(y.queryParams),E.fragment!==y.fragment&&_.fragment.next(y.fragment),xt(E.params,y.params)||_.params.next(y.params),function _r(_,E){if(_.length!==E.length)return!1;for(let y=0;y<_.length;++y)if(!xt(_[y],E[y]))return!1;return!0}(E.url,y.url)||_.url.next(y.url),xt(E.data,y.data)||_.data.next(y.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function Ls(_,E){const y=xt(_.params,E.params)&&function Ye(_,E){return et(_,E)&&_.every((y,A)=>xt(y.parameters,E[A].parameters))}(_.url,E.url);return y&&!(!_.parent!=!E.parent)&&(!_.parent||Ls(_.parent,E.parent))}function Zs(_,E,y){if(y&&_.shouldReuseRoute(E.value,y.value.snapshot)){const A=y.value;A._futureSnapshot=E.value;const O=function kr(_,E,y){return E.children.map(A=>{for(const O of y.children)if(_.shouldReuseRoute(A.value,O.value.snapshot))return Zs(_,A,O);return Zs(_,A)})}(_,E,y);return new ei(A,O)}{if(_.shouldAttach(E.value)){const z=_.retrieve(E.value);if(null!==z){const ue=z.route;return ue.value._futureSnapshot=E.value,ue.children=E.children.map(me=>Zs(_,me)),ue}}const A=function Zi(_){return new ci(new ce.X(_.url),new ce.X(_.params),new ce.X(_.queryParams),new ce.X(_.fragment),new ce.X(_.data),_.outlet,_.component,_)}(E.value),O=E.children.map(z=>Zs(_,z));return new ei(A,O)}}const vs="ngNavigationCancelingError";function _s(_,E){const{redirectTo:y,navigationBehaviorOptions:A}=wt(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,O=co(!1,0,E);return O.url=y,O.navigationBehaviorOptions=A,O}function co(_,E,y){const A=new Error("NavigationCancelingError: "+(_||""));return A[vs]=!0,A.cancellationCode=E,y&&(A.url=y),A}function ta(_){return yr(_)&&wt(_.url)}function yr(_){return _&&_[vs]}class Ys{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ls,this.attachRef=null}}let ls=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(y,A){const O=this.getOrCreateContext(y);O.outlet=A,this.contexts.set(y,O)}onChildOutletDestroyed(y){const A=this.getContext(y);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let A=this.getContext(y);return A||(A=new Ys,this.contexts.set(y,A)),A}getContext(y){return this.contexts.get(y)||null}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const ji=!1;let hi=(()=>{class _{constructor(y,A,O,z,ue){this.parentContexts=y,this.location=A,this.changeDetector=z,this.environmentInjector=ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=O||Xt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,ji);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,ji);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,ji);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,A){this.activated=y,this._activatedRoute=A,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,A){if(this.isActivated)throw new p.vHH(4013,ji);this._activatedRoute=y;const O=this.location,ue=y._futureSnapshot.component,me=this.parentContexts.getOrCreateContext(this.name).children,ut=new ho(y,me,O.injector);if(A&&function bo(_){return!!_.resolveComponentFactory}(A)){const Kt=A.resolveComponentFactory(ue);this.activated=O.createComponent(Kt,O.length,ut)}else this.activated=O.createComponent(ue,{index:O.length,injector:ut,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(ls),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},_.\u0275dir=p.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class ho{constructor(E,y,A){this.route=E,this.childContexts=y,this.parent=A}get(E,y){return E===ci?this.route:E===ls?this.childContexts:this.parent.get(E,y)}}let ki=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(y,A){1&y&&p._UZ(0,"router-outlet")},dependencies:[hi],encapsulation:2}),_})();function ti(_,E){return _.providers&&!_._injector&&(_._injector=(0,p.MMx)(_.providers,E,`Route: ${_.path}`)),_._injector??E}function Vs(_){const E=_.children&&_.children.map(Vs),y=E?{..._,children:E}:{..._};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==Xt&&(y.component=ki),y}function Ei(_){return _.outlet||Xt}function Fr(_,E){const y=_.filter(A=>Ei(A)===E);return y.push(..._.filter(A=>Ei(A)!==E)),y}function Us(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let E=_.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class cs{constructor(E,y,A,O){this.routeReuseStrategy=E,this.futureState=y,this.currState=A,this.forwardEvent=O}activate(E){const y=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,A,E),Co(this.futureState.root),this.activateChildRoutes(y,A,E)}deactivateChildRoutes(E,y,A){const O=li(y);E.children.forEach(z=>{const ue=z.value.outlet;this.deactivateRoutes(z,O[ue],A),delete O[ue]}),Bn(O,(z,ue)=>{this.deactivateRouteAndItsChildren(z,A)})}deactivateRoutes(E,y,A){const O=E.value,z=y?y.value:null;if(O===z)if(O.component){const ue=A.getContext(O.outlet);ue&&this.deactivateChildRoutes(E,y,ue.children)}else this.deactivateChildRoutes(E,y,A);else z&&this.deactivateRouteAndItsChildren(y,A)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const A=y.getContext(E.value.outlet),O=A&&E.value.component?A.children:y,z=li(E);for(const ue of Object.keys(z))this.deactivateRouteAndItsChildren(z[ue],O);if(A&&A.outlet){const ue=A.outlet.detach(),me=A.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ue,route:E,contexts:me})}}deactivateRouteAndOutlet(E,y){const A=y.getContext(E.value.outlet),O=A&&E.value.component?A.children:y,z=li(E);for(const ue of Object.keys(z))this.deactivateRouteAndItsChildren(z[ue],O);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(E,y,A){const O=li(y);E.children.forEach(z=>{this.activateRoutes(z,O[z.value.outlet],A),this.forwardEvent(new gt(z.value.snapshot))}),E.children.length&&this.forwardEvent(new be(E.value.snapshot))}activateRoutes(E,y,A){const O=E.value,z=y?y.value:null;if(Co(O),O===z)if(O.component){const ue=A.getOrCreateContext(O.outlet);this.activateChildRoutes(E,y,ue.children)}else this.activateChildRoutes(E,y,A);else if(O.component){const ue=A.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const me=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),ue.children.onOutletReAttached(me.contexts),ue.attachRef=me.componentRef,ue.route=me.route.value,ue.outlet&&ue.outlet.attach(me.componentRef,me.route.value),Co(me.route.value),this.activateChildRoutes(E,null,ue.children)}else{const me=Us(O.snapshot),ut=me?.get(p._Vd)??null;ue.attachRef=null,ue.route=O,ue.resolver=ut,ue.injector=me,ue.outlet&&ue.outlet.activateWith(O,ue.injector),this.activateChildRoutes(E,null,ue.children)}}else this.activateChildRoutes(E,null,A)}}class Bo{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class It{constructor(E,y){this.component=E,this.route=y}}function Jn(_,E,y){const A=_._root;return Pr(A,E?E._root:null,y,[A.value])}function Yi(_,E){const y=Symbol(),A=E.get(_,y);return A===y?"function"!=typeof _||(0,p.Z0I)(_)?E.get(_):_:A}function Pr(_,E,y,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const z=li(E);return _.children.forEach(ue=>{(function k(_,E,y,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const z=_.value,ue=E?E.value:null,me=y?y.getContext(_.value.outlet):null;if(ue&&z.routeConfig===ue.routeConfig){const ut=function P(_,E,y){if("function"==typeof y)return y(_,E);switch(y){case"pathParamsChange":return!et(_.url,E.url);case"pathParamsOrQueryParamsChange":return!et(_.url,E.url)||!xt(_.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ls(_,E)||!xt(_.queryParams,E.queryParams);default:return!Ls(_,E)}}(ue,z,z.routeConfig.runGuardsAndResolvers);ut?O.canActivateChecks.push(new Bo(A)):(z.data=ue.data,z._resolvedData=ue._resolvedData),Pr(_,E,z.component?me?me.children:null:y,A,O),ut&&me&&me.outlet&&me.outlet.isActivated&&O.canDeactivateChecks.push(new It(me.outlet.component,ue))}else ue&&M(E,me,O),O.canActivateChecks.push(new Bo(A)),Pr(_,null,z.component?me?me.children:null:y,A,O)})(ue,z[ue.value.outlet],y,A.concat([ue.value]),O),delete z[ue.value.outlet]}),Bn(z,(ue,me)=>M(ue,y.getContext(me),O)),O}function M(_,E,y){const A=li(_),O=_.value;Bn(A,(z,ue)=>{M(z,O.component?E?E.children.getContext(ue):null:E,y)}),y.canDeactivateChecks.push(new It(O.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,O))}function q(_){return"function"==typeof _}function Bs(_){return _ instanceof he.K||"EmptyError"===_?.name}const ni=Symbol("INITIAL_VALUE");function Is(){return(0,Ce.w)(_=>at(_.map(E=>E.pipe((0,_t.q)(1),(0,en.O)(ni)))).pipe((0,ht.U)(E=>{for(const y of E)if(!0!==y){if(y===ni)return ni;if(!1===y||y instanceof rr)return y}return!0}),(0,Tt.h)(E=>E!==ni),(0,_t.q)(1)))}function eo(_){return(0,Pt.z)((0,Ue.b)(E=>{if(wt(E))throw _s(0,E)}),(0,ht.U)(E=>!0===E))}const fo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function So(_,E,y,A,O){const z=xi(_,E,y);return z.matched?function zo(_,E,y,A){const O=E.canMatch;if(!O||0===O.length)return(0,B.of)(!0);const z=O.map(ue=>{const me=Yi(ue,_);return qn(function mi(_){return _&&q(_.canMatch)}(me)?me.canMatch(E,y):_.runInContext(()=>me(E,y)))});return(0,B.of)(z).pipe(Is(),eo())}(A=ti(E,A),E,y).pipe((0,ht.U)(ue=>!0===ue?z:{...fo})):(0,B.of)(z)}function xi(_,E,y){if(""===E.path)return"full"===E.pathMatch&&(_.hasChildren()||y.length>0)?{...fo}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const O=(E.matcher||br)(y,_,E);if(!O)return{...fo};const z={};Bn(O.posParams,(me,ut)=>{z[ut]=me.path});const ue=O.consumed.length>0?{...z,...O.consumed[O.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:O.consumed,remainingSegments:y.slice(O.consumed.length),parameters:ue,positionalParamSegments:O.posParams??{}}}function ds(_,E,y,A,O="corrected"){if(y.length>0&&function pr(_,E,y){return y.some(A=>vr(_,E,A)&&Ei(A)!==Xt)}(_,y,A)){const ue=new Ft(E,function na(_,E,y,A){const O={};O[Xt]=A,A._sourceSegment=_,A._segmentIndexShift=E.length;for(const z of y)if(""===z.path&&Ei(z)!==Xt){const ue=new Ft([],{});ue._sourceSegment=_,ue._segmentIndexShift=E.length,O[Ei(z)]=ue}return O}(_,E,A,new Ft(y,_.children)));return ue._sourceSegment=_,ue._segmentIndexShift=E.length,{segmentGroup:ue,slicedSegments:[]}}if(0===y.length&&function Ii(_,E,y){return y.some(A=>vr(_,E,A))}(_,y,A)){const ue=new Ft(_.segments,function Ua(_,E,y,A,O,z){const ue={};for(const me of A)if(vr(_,y,me)&&!O[Ei(me)]){const ut=new Ft([],{});ut._sourceSegment=_,ut._segmentIndexShift="legacy"===z?_.segments.length:E.length,ue[Ei(me)]=ut}return{...O,...ue}}(_,E,y,A,_.children,O));return ue._sourceSegment=_,ue._segmentIndexShift=E.length,{segmentGroup:ue,slicedSegments:y}}const z=new Ft(_.segments,_.children);return z._sourceSegment=_,z._segmentIndexShift=E.length,{segmentGroup:z,slicedSegments:y}}function vr(_,E,y){return(!(_.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function Er(_,E,y,A){return!!(Ei(_)===A||A!==Xt&&vr(E,y,_))&&("**"===_.path||xi(E,_,y).matched)}function ra(_,E,y){return 0===E.length&&!_.children[y]}const Mo=!1;class Ri{constructor(E){this.segmentGroup=E||null}}class Ea{constructor(E){this.urlTree=E}}function Ds(_){return(0,yt._)(new Ri(_))}function Cs(_){return(0,yt._)(new Ea(_))}class $i{constructor(E,y,A,O,z){this.injector=E,this.configLoader=y,this.urlSerializer=A,this.urlTree=O,this.config=z,this.allowRedirects=!0}apply(){const E=ds(this.urlTree.root,[],[],this.config).segmentGroup,y=new Ft(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,Xt).pipe((0,ht.U)(z=>this.createUrlTree(Ne(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(je(z=>{if(z instanceof Ea)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof Ri?this.noMatchError(z):z}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,Xt).pipe((0,ht.U)(O=>this.createUrlTree(Ne(O),E.queryParams,E.fragment))).pipe(je(O=>{throw O instanceof Ri?this.noMatchError(O):O}))}noMatchError(E){return new p.vHH(4002,Mo)}createUrlTree(E,y,A){const O=ke(E);return new rr(O,y,A)}expandSegmentGroup(E,y,A,O){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(E,y,A).pipe((0,ht.U)(z=>new Ft([],z))):this.expandSegment(E,A,y,A.segments,O,!0)}expandChildren(E,y,A){const O=[];for(const z of Object.keys(A.children))"primary"===z?O.unshift(z):O.push(z);return(0,F.D)(O).pipe((0,nr.b)(z=>{const ue=A.children[z],me=Fr(y,z);return this.expandSegmentGroup(E,me,ue,z).pipe((0,ht.U)(ut=>({segment:ut,outlet:z})))}),(0,Je.R)((z,ue)=>(z[ue.outlet]=ue.segment,z),{}),Zt())}expandSegment(E,y,A,O,z,ue){return(0,F.D)(A).pipe((0,nr.b)(me=>this.expandSegmentAgainstRoute(E,y,A,me,O,z,ue).pipe(je(Kt=>{if(Kt instanceof Ri)return(0,B.of)(null);throw Kt}))),(0,Vt.P)(me=>!!me),je((me,ut)=>{if(Bs(me))return ra(y,O,z)?(0,B.of)(new Ft([],{})):Ds(y);throw me}))}expandSegmentAgainstRoute(E,y,A,O,z,ue,me){return Er(O,y,z,ue)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(E,y,O,z,ue):me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,A,O,z,ue):Ds(y):Ds(y)}expandSegmentAgainstRouteUsingRedirect(E,y,A,O,z,ue){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,A,O,ue):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,O,z,ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,A,O){const z=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Cs(z):this.lineralizeSegments(A,z).pipe((0,Wt.z)(ue=>{const me=new Ft(ue,{});return this.expandSegment(E,me,y,ue,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,O,z,ue){const{matched:me,consumedSegments:ut,remainingSegments:Kt,positionalParamSegments:Gn}=xi(y,O,z);if(!me)return Ds(y);const dn=this.applyRedirectCommands(ut,O.redirectTo,Gn);return O.redirectTo.startsWith("/")?Cs(dn):this.lineralizeSegments(O,dn).pipe((0,Wt.z)(hr=>this.expandSegment(E,y,A,hr.concat(Kt),ue,!1)))}matchSegmentAgainstRoute(E,y,A,O,z){return"**"===A.path?(E=ti(A,E),A.loadChildren?(A._loadedRoutes?(0,B.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(E,A)).pipe((0,ht.U)(me=>(A._loadedRoutes=me.routes,A._loadedInjector=me.injector,new Ft(O,{})))):(0,B.of)(new Ft(O,{}))):So(y,A,O,E).pipe((0,Ce.w)(({matched:ue,consumedSegments:me,remainingSegments:ut})=>ue?this.getChildConfig(E=A._injector??E,A,O).pipe((0,Wt.z)(Gn=>{const dn=Gn.injector??E,hr=Gn.routes,{segmentGroup:As,slicedSegments:fi}=ds(y,me,ut,hr),oo=new Ft(As.segments,As.children);if(0===fi.length&&oo.hasChildren())return this.expandChildren(dn,hr,oo).pipe((0,ht.U)(Aa=>new Ft(me,Aa)));if(0===hr.length&&0===fi.length)return(0,B.of)(new Ft(me,{}));const Qr=Ei(A)===z;return this.expandSegment(dn,oo,hr,fi,Qr?Xt:z,!0).pipe((0,ht.U)(Ta=>new Ft(me.concat(Ta.segments),Ta.children)))})):Ds(y)))}getChildConfig(E,y,A){return y.children?(0,B.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,B.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function _a(_,E,y,A){const O=E.canLoad;if(void 0===O||0===O.length)return(0,B.of)(!0);const z=O.map(ue=>{const me=Yi(ue,_);return qn(function ln(_){return _&&q(_.canLoad)}(me)?me.canLoad(E,y):_.runInContext(()=>me(E,y)))});return(0,B.of)(z).pipe(Is(),eo())}(E,y,A).pipe((0,Wt.z)(O=>O?this.configLoader.loadChildren(E,y).pipe((0,Ue.b)(z=>{y._loadedRoutes=z.routes,y._loadedInjector=z.injector})):function ia(_){return(0,yt._)(co(Mo,3))}())):(0,B.of)({routes:[],injector:E})}lineralizeSegments(E,y){let A=[],O=y.root;for(;;){if(A=A.concat(O.segments),0===O.numberOfChildren)return(0,B.of)(A);if(O.numberOfChildren>1||!O.children[Xt])return(0,yt._)(new p.vHH(4e3,Mo));O=O.children[Xt]}}applyRedirectCommands(E,y,A){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,A)}applyRedirectCreateUrlTree(E,y,A,O){const z=this.createSegmentGroup(E,y.root,A,O);return new rr(z,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const A={};return Bn(E,(O,z)=>{if("string"==typeof O&&O.startsWith(":")){const me=O.substring(1);A[z]=y[me]}else A[z]=O}),A}createSegmentGroup(E,y,A,O){const z=this.createSegments(E,y.segments,A,O);let ue={};return Bn(y.children,(me,ut)=>{ue[ut]=this.createSegmentGroup(E,me,A,O)}),new Ft(z,ue)}createSegments(E,y,A,O){return y.map(z=>z.path.startsWith(":")?this.findPosParam(E,z,O):this.findOrReturn(z,A))}findPosParam(E,y,A){const O=A[y.path.substring(1)];if(!O)throw new p.vHH(4001,Mo);return O}findOrReturn(E,y){let A=0;for(const O of y){if(O.path===E.path)return y.splice(A),O;A++}return E}}class no{}class po{constructor(E,y,A,O,z,ue,me,ut){this.injector=E,this.rootComponentType=y,this.config=A,this.urlTree=O,this.url=z,this.paramsInheritanceStrategy=ue,this.relativeLinkResolution=me,this.urlSerializer=ut}recognize(){const E=ds(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,Xt).pipe((0,ht.U)(y=>{if(null===y)return null;const A=new as([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new ei(A,y),z=new Lo(this.url,O);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(E){const y=E.value,A=di(y,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),E.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(E,y,A,O){return 0===A.segments.length&&A.hasChildren()?this.processChildren(E,y,A):this.processSegment(E,y,A,A.segments,O)}processChildren(E,y,A){return(0,F.D)(Object.keys(A.children)).pipe((0,nr.b)(O=>{const z=A.children[O],ue=Fr(y,O);return this.processSegmentGroup(E,ue,z,O)}),(0,Je.R)((O,z)=>O&&z?(O.push(...z),O):null),function kt(_,E=!1){return(0,Ke.e)((y,A)=>{let O=0;y.subscribe((0,Ee.x)(A,z=>{const ue=_(z,O++);(ue||E)&&A.next(z),!ue&&A.complete()}))})}(O=>null!==O),(0,vt.d)(null),Zt(),(0,ht.U)(O=>{if(null===O)return null;const z=V(O);return function xo(_){_.sort((E,y)=>E.value.outlet===Xt?-1:y.value.outlet===Xt?1:E.value.outlet.localeCompare(y.value.outlet))}(z),z}))}processSegment(E,y,A,O,z){return(0,F.D)(y).pipe((0,nr.b)(ue=>this.processSegmentAgainstRoute(ue._injector??E,ue,A,O,z)),(0,Vt.P)(ue=>!!ue),je(ue=>{if(Bs(ue))return ra(A,O,z)?(0,B.of)([]):(0,B.of)(null);throw ue}))}processSegmentAgainstRoute(E,y,A,O,z){if(y.redirectTo||!Er(y,A,O,z))return(0,B.of)(null);let ue;if("**"===y.path){const me=O.length>0?ur(O).parameters:{},ut=_e(A)+O.length,Kt=new as(O,me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mt(y),Ei(y),y.component??y._loadedComponent??null,y,W(A),ut,En(y),ut);ue=(0,B.of)({snapshot:Kt,consumedSegments:[],remainingSegments:[]})}else ue=So(A,y,O,E).pipe((0,ht.U)(({matched:me,consumedSegments:ut,remainingSegments:Kt,parameters:Gn})=>{if(!me)return null;const dn=_e(A)+ut.length;return{snapshot:new as(ut,Gn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mt(y),Ei(y),y.component??y._loadedComponent??null,y,W(A),dn,En(y),dn),consumedSegments:ut,remainingSegments:Kt}}));return ue.pipe((0,Ce.w)(me=>{if(null===me)return(0,B.of)(null);const{snapshot:ut,consumedSegments:Kt,remainingSegments:Gn}=me;E=y._injector??E;const dn=y._loadedInjector??E,hr=function ru(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(y),{segmentGroup:As,slicedSegments:fi}=ds(A,Kt,Gn,hr.filter(Qr=>void 0===Qr.redirectTo),this.relativeLinkResolution);if(0===fi.length&&As.hasChildren())return this.processChildren(dn,hr,As).pipe((0,ht.U)(Qr=>null===Qr?null:[new ei(ut,Qr)]));if(0===hr.length&&0===fi.length)return(0,B.of)([new ei(ut,[])]);const oo=Ei(y)===z;return this.processSegment(dn,hr,As,fi,oo?Xt:z).pipe((0,ht.U)(Qr=>null===Qr?null:[new ei(ut,Qr)]))}))}}function b(_){const E=_.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function V(_){const E=[],y=new Set;for(const A of _){if(!b(A)){E.push(A);continue}const O=E.find(z=>A.value.routeConfig===z.value.routeConfig);void 0!==O?(O.children.push(...A.children),y.add(O)):E.push(A)}for(const A of y){const O=V(A.children);E.push(new ei(A.value,O))}return E.filter(A=>!y.has(A))}function W(_){let E=_;for(;E._sourceSegment;)E=E._sourceSegment;return E}function _e(_){let E=_,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function mt(_){return _.data||{}}function En(_){return _.resolve||{}}function Yr(_){return"string"==typeof _.title||null===_.title}function fs(_){return(0,Ce.w)(E=>{const y=_(E);return y?(0,F.D)(y).pipe((0,ht.U)(()=>E)):(0,B.of)(E)})}let Mt=(()=>{class _{buildTitle(y){let A,O=y.root;for(;void 0!==O;)A=this.getResolvedTitleForRoute(O)??A,O=O.children.find(z=>z.outlet===Xt);return A}getResolvedTitleForRoute(y){return y.data[fn]}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(Ir)},providedIn:"root"}),_})(),Ir=(()=>{class _ extends Mt{constructor(y){super(),this.title=y}updateTitle(y){const A=this.buildTitle(y);void 0!==A&&this.title.setTitle(A)}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(ar.Dx))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class go{}class gn extends class sn{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const Yt=new p.OlP("",{providedIn:"root",factory:()=>({})}),Ot=new p.OlP("ROUTES");let ri=(()=>{class _{constructor(y,A){this.injector=y,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,B.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const A=qn(y.loadComponent()).pipe((0,Ue.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=z}),un(()=>{this.componentLoaders.delete(y)})),O=new rt.c(A,()=>new it.x).pipe((0,vn.x)());return this.componentLoaders.set(y,O),O}loadChildren(y,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,B.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const z=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,ht.U)(me=>{this.onLoadEndListener&&this.onLoadEndListener(A);let ut,Kt,Gn=!1;Array.isArray(me)?Kt=me:(ut=me.create(y).injector,Kt=Un(ut.get(Ot,[],p.XFs.Self|p.XFs.Optional)));return{routes:Kt.map(Vs),injector:ut}}),un(()=>{this.childrenLoaders.delete(A)})),ue=new rt.c(z,()=>new it.x).pipe((0,vn.x)());return this.childrenLoaders.set(A,ue),ue}loadModuleFactoryOrRoutes(y){return qn(y()).pipe((0,Wt.z)(A=>A instanceof p.YKP||Array.isArray(A)?(0,B.of)(A):(0,F.D)(this.compiler.compileModuleAsync(A))))}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(p.zs3),p.LFG(p.Sil))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Su{}class Mu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function tl(_){throw _}function Ba(_,E,y){return E.parse("/")}const oa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ol={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ko(){const _=(0,p.f3M)(xe),E=(0,p.f3M)(ls),y=(0,p.f3M)(Et.Ye),A=(0,p.f3M)(p.zs3),O=(0,p.f3M)(p.Sil),z=(0,p.f3M)(Ot,{optional:!0})??[],ue=(0,p.f3M)(Yt,{optional:!0})??{},me=(0,p.f3M)(Ir),ut=(0,p.f3M)(Mt,{optional:!0}),Kt=(0,p.f3M)(Su,{optional:!0}),Gn=(0,p.f3M)(go,{optional:!0}),dn=new ii(null,_,E,y,A,O,Un(z));return Kt&&(dn.urlHandlingStrategy=Kt),Gn&&(dn.routeReuseStrategy=Gn),dn.titleStrategy=ut??me,function Nl(_,E){_.errorHandler&&(E.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(E.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(E.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(E.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(E.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(E.canceledNavigationResolution=_.canceledNavigationResolution)}(ue,dn),dn}let ii=(()=>{class _{constructor(y,A,O,z,ue,me,ut){this.rootComponentType=y,this.urlSerializer=A,this.rootContexts=O,this.location=z,this.config=ut,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new it.x,this.errorHandler=tl,this.malformedUriErrorHandler=Ba,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,B.of)(void 0),this.urlHandlingStrategy=new Mu,this.routeReuseStrategy=new gn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ue.get(ri),this.configLoader.onLoadEndListener=hr=>this.triggerEvent(new lo(hr)),this.configLoader.onLoadStartListener=hr=>this.triggerEvent(new Do(hr)),this.ngModule=ue.get(p.h0i),this.console=ue.get(p.c2e);const dn=ue.get(p.R0b);this.isNgZoneEnabled=dn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(ut),this.currentUrlTree=function pe(){return new rr(new Ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=cr(this.currentUrlTree,this.rootComponentType),this.transitions=new ce.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(y){const A=this.events;return y.pipe((0,Tt.h)(O=>0!==O.id),(0,ht.U)(O=>({...O,extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Ce.w)(O=>{let z=!1,ue=!1;return(0,B.of)(O).pipe((0,Ue.b)(me=>{this.currentNavigation={id:me.id,initialUrl:me.rawUrl,extractedUrl:me.extractedUrl,trigger:me.source,extras:me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ce.w)(me=>{const ut=this.browserUrlTree.toString(),Kt=!this.navigated||me.extractedUrl.toString()!==ut||ut!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Kt)&&this.urlHandlingStrategy.shouldProcessUrl(me.rawUrl))return kn(me.source)&&(this.browserUrlTree=me.extractedUrl),(0,B.of)(me).pipe((0,Ce.w)(dn=>{const hr=this.transitions.getValue();return A.next(new os(dn.id,this.serializeUrl(dn.extractedUrl),dn.source,dn.restoredState)),hr!==this.transitions.getValue()?ge.E:Promise.resolve(dn)}),function Di(_,E,y,A){return(0,Ce.w)(O=>function hs(_,E,y,A,O){return new $i(_,E,y,A,O).apply()}(_,E,y,O.extractedUrl,A).pipe((0,ht.U)(z=>({...O,urlAfterRedirects:z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ue.b)(dn=>{this.currentNavigation={...this.currentNavigation,finalUrl:dn.urlAfterRedirects},O.urlAfterRedirects=dn.urlAfterRedirects}),function gr(_,E,y,A,O,z){return(0,Wt.z)(ue=>function ro(_,E,y,A,O,z,ue="emptyOnly",me="legacy"){return new po(_,E,y,A,O,ue,me,z).recognize().pipe((0,Ce.w)(ut=>null===ut?function Wo(_){return new Ie.y(E=>E.error(_))}(new no):(0,B.of)(ut)))}(_,E,y,ue.urlAfterRedirects,A.serialize(ue.urlAfterRedirects),A,O,z).pipe((0,ht.U)(me=>({...ue,targetSnapshot:me}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ue.b)(dn=>{if(O.targetSnapshot=dn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!dn.extras.skipLocationChange){const As=this.urlHandlingStrategy.merge(dn.urlAfterRedirects,dn.rawUrl);this.setBrowserUrl(As,dn)}this.browserUrlTree=dn.urlAfterRedirects}const hr=new wo(dn.id,this.serializeUrl(dn.extractedUrl),this.serializeUrl(dn.urlAfterRedirects),dn.targetSnapshot);A.next(hr)}));if(Kt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:hr,extractedUrl:As,source:fi,restoredState:oo,extras:Qr}=me,Ou=new os(hr,this.serializeUrl(As),fi,oo);A.next(Ou);const Ta=cr(As,this.rootComponentType).snapshot;return O={...me,targetSnapshot:Ta,urlAfterRedirects:As,extras:{...Qr,skipLocationChange:!1,replaceUrl:!1}},(0,B.of)(O)}return this.rawUrlTree=me.rawUrl,me.resolve(null),ge.E}),(0,Ue.b)(me=>{const ut=new Fs(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot);this.triggerEvent(ut)}),(0,ht.U)(me=>O={...me,guards:Jn(me.targetSnapshot,me.currentSnapshot,this.rootContexts)}),function Va(_,E){return(0,Wt.z)(y=>{const{targetSnapshot:A,currentSnapshot:O,guards:{canActivateChecks:z,canDeactivateChecks:ue}}=y;return 0===ue.length&&0===z.length?(0,B.of)({...y,guardsResult:!0}):function va(_,E,y,A){return(0,F.D)(_).pipe((0,Wt.z)(O=>function js(_,E,y,A,O){const z=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,B.of)(!0);const ue=z.map(me=>{const ut=Us(E)??O,Kt=Yi(me,ut);return qn(function ws(_){return _&&q(_.canDeactivate)}(Kt)?Kt.canDeactivate(_,E,y,A):ut.runInContext(()=>Kt(_,E,y,A))).pipe((0,Vt.P)())});return(0,B.of)(ue).pipe(Is())}(O.component,O.route,y,E,A)),(0,Vt.P)(O=>!0!==O,!0))}(ue,A,O,_).pipe((0,Wt.z)(me=>me&&function nt(_){return"boolean"==typeof _}(me)?function $o(_,E,y,A){return(0,F.D)(E).pipe((0,nr.b)(O=>(0,qe.z)(function Go(_,E){return null!==_&&E&&E(new Me(_)),(0,B.of)(!0)}(O.route.parent,A),function Ho(_,E){return null!==_&&E&&E(new $e(_)),(0,B.of)(!0)}(O.route,A),function Fi(_,E,y){const A=E[E.length-1],z=E.slice(0,E.length-1).reverse().map(ue=>function jo(_){const E=_.routeConfig?_.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:_,guards:E}:null}(ue)).filter(ue=>null!==ue).map(ue=>(0,Re.P)(()=>{const me=ue.guards.map(ut=>{const Kt=Us(ue.node)??y,Gn=Yi(ut,Kt);return qn(function Xs(_){return _&&q(_.canActivateChild)}(Gn)?Gn.canActivateChild(A,_):Kt.runInContext(()=>Gn(A,_))).pipe((0,Vt.P)())});return(0,B.of)(me).pipe(Is())}));return(0,B.of)(z).pipe(Is())}(_,O.path,y),function Ao(_,E,y){const A=E.routeConfig?E.routeConfig.canActivate:null;if(!A||0===A.length)return(0,B.of)(!0);const O=A.map(z=>(0,Re.P)(()=>{const ue=Us(E)??y,me=Yi(z,ue);return qn(function Yn(_){return _&&q(_.canActivate)}(me)?me.canActivate(E,_):ue.runInContext(()=>me(E,_))).pipe((0,Vt.P)())}));return(0,B.of)(O).pipe(Is())}(_,O.route,y))),(0,Vt.P)(O=>!0!==O,!0))}(A,z,_,E):(0,B.of)(me)),(0,ht.U)(me=>({...y,guardsResult:me})))})}(this.ngModule.injector,me=>this.triggerEvent(me)),(0,Ue.b)(me=>{if(O.guardsResult=me.guardsResult,wt(me.guardsResult))throw _s(0,me.guardsResult);const ut=new ma(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot,!!me.guardsResult);this.triggerEvent(ut)}),(0,Tt.h)(me=>!!me.guardsResult||(this.restoreHistory(me),this.cancelNavigationTransition(me,"",3),!1)),fs(me=>{if(me.guards.canActivateChecks.length)return(0,B.of)(me).pipe((0,Ue.b)(ut=>{const Kt=new dr(ut.id,this.serializeUrl(ut.extractedUrl),this.serializeUrl(ut.urlAfterRedirects),ut.targetSnapshot);this.triggerEvent(Kt)}),(0,Ce.w)(ut=>{let Kt=!1;return(0,B.of)(ut).pipe(function tr(_,E){return(0,Wt.z)(y=>{const{targetSnapshot:A,guards:{canActivateChecks:O}}=y;if(!O.length)return(0,B.of)(y);let z=0;return(0,F.D)(O).pipe((0,nr.b)(ue=>function wr(_,E,y,A){const O=_.routeConfig,z=_._resolve;return void 0!==O?.title&&!Yr(O)&&(z[fn]=O.title),function Cn(_,E,y,A){const O=function Sr(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===O.length)return(0,B.of)({});const z={};return(0,F.D)(O).pipe((0,Wt.z)(ue=>function Hn(_,E,y,A){const O=Us(E)??A,z=Yi(_,O);return qn(z.resolve?z.resolve(E,y):O.runInContext(()=>z(E,y)))}(_[ue],E,y,A).pipe((0,Vt.P)(),(0,Ue.b)(me=>{z[ue]=me}))),pt(1),(0,tn.h)(z),je(ue=>Bs(ue)?ge.E:(0,yt._)(ue)))}(z,_,E,A).pipe((0,ht.U)(ue=>(_._resolvedData=ue,_.data=di(_,y).resolve,O&&Yr(O)&&(_.data[fn]=O.title),null)))}(ue.route,A,_,E)),(0,Ue.b)(()=>z++),pt(1),(0,Wt.z)(ue=>z===O.length?(0,B.of)(y):ge.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ue.b)({next:()=>Kt=!0,complete:()=>{Kt||(this.restoreHistory(ut),this.cancelNavigationTransition(ut,"",2))}}))}),(0,Ue.b)(ut=>{const Kt=new Io(ut.id,this.serializeUrl(ut.extractedUrl),this.serializeUrl(ut.urlAfterRedirects),ut.targetSnapshot);this.triggerEvent(Kt)}))}),fs(me=>{const ut=Kt=>{const Gn=[];Kt.routeConfig?.loadComponent&&!Kt.routeConfig._loadedComponent&&Gn.push(this.configLoader.loadComponent(Kt.routeConfig).pipe((0,Ue.b)(dn=>{Kt.component=dn}),(0,ht.U)(()=>{})));for(const dn of Kt.children)Gn.push(...ut(dn));return Gn};return at(ut(me.targetSnapshot.root)).pipe((0,vt.d)(),(0,_t.q)(1))}),fs(()=>this.afterPreactivation()),(0,ht.U)(me=>{const ut=function qi(_,E,y){const A=Zs(_,E._root,y?y._root:void 0);return new pi(A,E)}(this.routeReuseStrategy,me.targetSnapshot,me.currentRouterState);return O={...me,targetRouterState:ut}}),(0,Ue.b)(me=>{this.currentUrlTree=me.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(me.urlAfterRedirects,me.rawUrl),this.routerState=me.targetRouterState,"deferred"===this.urlUpdateStrategy&&(me.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,me),this.browserUrlTree=me.urlAfterRedirects)}),((_,E,y)=>(0,ht.U)(A=>(new cs(E,A.targetRouterState,A.currentRouterState,y).activate(_),A)))(this.rootContexts,this.routeReuseStrategy,me=>this.triggerEvent(me)),(0,Ue.b)({next(){z=!0},complete(){z=!0}}),un(()=>{z||ue||this.cancelNavigationTransition(O,"",1),this.currentNavigation?.id===O.id&&(this.currentNavigation=null)}),je(me=>{if(ue=!0,yr(me)){ta(me)||(this.navigated=!0,this.restoreHistory(O,!0));const ut=new Bi(O.id,this.serializeUrl(O.extractedUrl),me.message,me.cancellationCode);if(A.next(ut),ta(me)){const Kt=this.urlHandlingStrategy.merge(me.url,this.rawUrlTree),Gn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kn(O.source)};this.scheduleNavigation(Kt,"imperative",null,Gn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{this.restoreHistory(O,!0);const ut=new qs(O.id,this.serializeUrl(O.extractedUrl),me,O.targetSnapshot??void 0);A.next(ut);try{O.resolve(this.errorHandler(me))}catch(Kt){O.reject(Kt)}}return ge.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next({...this.transitions.value,...y})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const A="popstate"===y.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const O={replaceUrl:!0},z=y.state?.navigationId?y.state:null;if(z){const me={...z};delete me.navigationId,delete me.\u0275routerPageId,0!==Object.keys(me).length&&(O.state=me)}const ue=this.parseUrl(y.url);this.scheduleNavigation(ue,A,z,O)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map(Vs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,A={}){const{relativeTo:O,queryParams:z,fragment:ue,queryParamsHandling:me,preserveFragment:ut}=A,Kt=O||this.routerState.root,Gn=ut?this.currentUrlTree.fragment:ue;let dn=null;switch(me){case"merge":dn={...this.currentUrlTree.queryParams,...z};break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=z||null}return null!==dn&&(dn=this.removeEmptyProps(dn)),jn(Kt,this.currentUrlTree,y,dn,Gn??null)}navigateByUrl(y,A={skipLocationChange:!1}){const O=wt(y)?y:this.parseUrl(y),z=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,A)}navigate(y,A={skipLocationChange:!1}){return function yi(_){for(let E=0;E<_.length;E++){if(null==_[E])throw new p.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,A),A)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let A;try{A=this.urlSerializer.parse(y)}catch(O){A=this.malformedUriErrorHandler(O,this.urlSerializer,y)}return A}isActive(y,A){let O;if(O=!0===A?{...oa}:!1===A?{...Ol}:A,wt(y))return ot(this.currentUrlTree,y,O);const z=this.parseUrl(y);return ot(this.currentUrlTree,z,O)}removeEmptyProps(y){return Object.keys(y).reduce((A,O)=>{const z=y[O];return null!=z&&(A[O]=z),A},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Nr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,A,O,z,ue){if(this.disposed)return Promise.resolve(!1);let me,ut,Kt;ue?(me=ue.resolve,ut=ue.reject,Kt=ue.promise):Kt=new Promise((hr,As)=>{me=hr,ut=As});const Gn=++this.navigationId;let dn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(O=this.location.getState()),dn=O&&O.\u0275routerPageId?O.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):dn=0,this.setTransition({id:Gn,targetPageId:dn,source:A,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:z,resolve:me,reject:ut,promise:Kt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Kt.catch(hr=>Promise.reject(hr))}setBrowserUrl(y,A){const O=this.urlSerializer.serialize(y),z={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(O)||A.extras.replaceUrl?this.location.replaceState(O,"",z):this.location.go(O,"",z)}restoreHistory(y,A=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===O?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===O&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,A,O){const z=new Bi(y.id,this.serializeUrl(y.extractedUrl),A,O);this.triggerEvent(z),y.resolve(!1)}generateNgRouterState(y,A){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:A}:{navigationId:y}}}return _.\u0275fac=function(y){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:function(){return Ko()},providedIn:"root"}),_})();function kn(_){return"imperative"!==_}let bs=(()=>{class _{constructor(y,A,O,z,ue){this.router=y,this.route=A,this.tabIndexAttribute=O,this.renderer=z,this.el=ue,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new it.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const A=this.renderer,O=this.el.nativeElement;null!==y?A.setAttribute(O,"tabindex",y):A.removeAttribute(O,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(ii),p.Y36(ci),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},_.\u0275dir=p.lG2({type:_,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,A){1&y&&p.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})(),ja=(()=>{class _{constructor(y,A,O){this.router=y,this.route=A,this.locationStrategy=O,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new it.x,this.subscription=y.events.subscribe(z=>{z instanceof Nr&&this.updateTargetUrlAndHref()})}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,A,O,z,ue){return!!(0!==y||A||O||z||ue||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(ii),p.Y36(ci),p.Y36(Et.S$))},_.\u0275dir=p.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,A){1&y&&p.NdJ("click",function(z){return A.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&y&&p.uIk("target",A.target)("href",A.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})();class Ts{}let sr=(()=>{class _{constructor(y,A,O,z,ue){this.router=y,this.injector=O,this.preloadingStrategy=z,this.loader=ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,Tt.h)(y=>y instanceof Nr),(0,nr.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,A){const O=[];for(const z of A){z.providers&&!z._injector&&(z._injector=(0,p.MMx)(z.providers,y,`Route: ${z.path}`));const ue=z._injector??y,me=z._loadedInjector??ue;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?O.push(this.preloadConfig(ue,z)):(z.children||z._loadedRoutes)&&O.push(this.processRoutes(me,z.children??z._loadedRoutes))}return(0,F.D)(O).pipe((0,Fn.J)())}preloadConfig(y,A){return this.preloadingStrategy.preload(A,()=>{let O;O=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(y,A):(0,B.of)(null);const z=O.pipe((0,Wt.z)(ue=>null===ue?(0,B.of)(void 0):(A._loadedRoutes=ue.routes,A._loadedInjector=ue.injector,this.processRoutes(ue.injector??y,ue.routes))));if(A.loadComponent&&!A._loadedComponent){const ue=this.loader.loadComponent(A);return(0,F.D)([z,ue]).pipe((0,Fn.J)())}return z})}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(ii),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Ts),p.LFG(ri))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Qt=new p.OlP("");let Ji=(()=>{class _{constructor(y,A,O={}){this.router=y,this.viewportScroller=A,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Nr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Ut&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,A){this.router.triggerEvent(new Ut(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(y){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac}),_})();function Ro(_,E){return{\u0275kind:_,\u0275providers:E}}function Da(_){return[{provide:Ot,multi:!0,useValue:_}]}function Ca(){const _=(0,p.f3M)(p.zs3);return E=>{const y=_.get(p.z2F);if(E!==y.components[0])return;const A=_.get(ii),O=_.get(Ru);1===_.get(ps)&&A.initialNavigation(),_.get(Zo,null,p.XFs.Optional)?.setUpPreloading(),_.get(Qt,null,p.XFs.Optional)?.init(),A.resetRootComponentType(y.componentTypes[0]),O.closed||(O.next(),O.unsubscribe())}}const Ru=new p.OlP("",{factory:()=>new it.x}),ps=new p.OlP("",{providedIn:"root",factory:()=>1});const Zo=new p.OlP("");function si(_){return Ro(0,[{provide:Zo,useExisting:sr},{provide:Ts,useExisting:_}])}const Ga=new p.OlP("ROUTER_FORROOT_GUARD"),Ci=[Et.Ye,{provide:xe,useClass:G},{provide:ii,useFactory:Ko},ls,{provide:ci,useFactory:function Mr(_){return _.routerState.root},deps:[ii]},ri];function Li(){return new p.PXZ("Router",ii)}let iu=(()=>{class _{constructor(y){}static forRoot(y,A){return{ngModule:_,providers:[Ci,[],Da(y),{provide:Ga,useFactory:Pu,deps:[[ii,new p.FiY,new p.tp0]]},{provide:Yt,useValue:A||{}},A?.useHash?{provide:Et.S$,useClass:Et.Do}:{provide:Et.S$,useClass:Et.b0},{provide:Qt,useFactory:()=>{const _=(0,p.f3M)(ii),E=(0,p.f3M)(Et.EM),y=(0,p.f3M)(Yt);return y.scrollOffset&&E.setOffset(y.scrollOffset),new Ji(_,E,y)}},A?.preloadingStrategy?si(A.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Li},A?.initialNavigation?kl(A):[],[{provide:Xi,useFactory:Ca},{provide:p.tb,multi:!0,useExisting:Xi}]]}}static forChild(y){return{ngModule:_,providers:[Da(y)]}}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(Ga,8))},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[ki]}),_})();function Pu(_){return"guarded"}function kl(_){return["disabled"===_.initialNavigation?Ro(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const E=(0,p.f3M)(ii);return()=>{E.setUpLocationChangeListener()}}},{provide:ps,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?Ro(2,[{provide:ps,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:E=>{const y=E.get(Et.V_,Promise.resolve());let A=!1;return()=>y.then(()=>new Promise(z=>{const ue=E.get(ii),me=E.get(Ru);(function O(z){E.get(ii).events.pipe((0,Tt.h)(me=>me instanceof Nr||me instanceof Bi||me instanceof qs),(0,ht.U)(me=>me instanceof Nr||me instanceof Bi&&(0===me.code||1===me.code)&&null),(0,Tt.h)(me=>null!==me),(0,_t.q)(1)).subscribe(()=>{z()})})(()=>{z(!0),A=!0}),ue.afterPreactivation=()=>(z(!0),A||me.closed?(0,B.of)(void 0):me),ue.initialNavigation()}))}}]).\u0275providers:[]]}const Xi=new p.OlP("")},3942:(Ht,Le,R)=>{R.d(Le,{Z:()=>tt});var p=R(2090),F=R(4859),B=R(6881),ce=R(1877);class he{constructor(qe,Re){this._delegate=qe,this.firebase=Re,(0,B._addComponent)(qe,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(qe,Re=B._DEFAULT_ENTRY_NAME){var Pt;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(qe);return!yt.isInitialized()&&"EXPLICIT"===(null===(Pt=yt.getComponent())||void 0===Pt?void 0:Pt.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:Re})}_removeServiceInstance(qe,Re=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Re)}_addComponent(qe){(0,B._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,B._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const De=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function Fe(){const Rt=function ee(Rt){const qe={},Re={__esModule:!0,initializeApp:function ge(ht,Ce={}){const _t=B.initializeApp(ht,Ce);if((0,p.r3)(qe,_t.name))return qe[_t.name];const en=new Rt(_t,Re);return qe[_t.name]=en,en},app:yt,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function it(ht){const Ce=ht.name,_t=Ce.replace("-compat","");if(B._registerComponent(ht)&&"PUBLIC"===ht.type){const en=(Tt=yt())=>{if("function"!=typeof Tt[_t])throw De.create("invalid-app-argument",{appName:Ce});return Tt[_t]()};void 0!==ht.serviceProps&&(0,p.ZB)(en,ht.serviceProps),Re[_t]=en,Rt.prototype[_t]=function(...Tt){return this._getService.bind(this,Ce).apply(this,ht.multipleInstances?Tt:[])}}return"PUBLIC"===ht.type?Re[_t]:null},removeApp:function Pt(ht){delete qe[ht]},useAsService:function Et(ht,Ce){return"serverAuth"===Ce?null:Ce},modularAPIs:B}};function yt(ht){if(!(0,p.r3)(qe,ht=ht||B._DEFAULT_ENTRY_NAME))throw De.create("no-app",{appName:ht});return qe[ht]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function rt(){return Object.keys(qe).map(ht=>qe[ht])}}),yt.App=Rt,Re}(he);return Rt.INTERNAL=Object.assign(Object.assign({},Rt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function qe(Re){(0,p.ZB)(Rt,Re)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Rt}(),fe=new ce.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Rt=self.firebase.SDK_VERSION;Rt&&Rt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=te;!function at(Rt){(0,B.registerVersion)("@firebase/app-compat","0.2.13",Rt)}()},6881:(Ht,Le,R)=>{R.r(Le),R.d(Le,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>rr,_DEFAULT_ENTRY_NAME:()=>Bn,_addComponent:()=>de,_addOrOverwriteComponent:()=>Xe,_apps:()=>Ze,_clearComponents:()=>Tn,_components:()=>pe,_getProvider:()=>rn,_registerComponent:()=>ot,_removeServiceInstance:()=>yn,deleteApp:()=>et,getApp:()=>we,getApps:()=>Ye,initializeApp:()=>Ft,onLog:()=>G,registerVersion:()=>xe,setLogLevel:()=>ie});var p=R(5861),F=R(4859),B=R(1877),ce=R(2090);let Ie,De;const te=new WeakMap,fe=new WeakMap,Ee=new WeakMap,Dt=new WeakMap,at=new WeakMap;let qe={get(ke,Ne,St){if(ke instanceof IDBTransaction){if("done"===Ne)return fe.get(ke);if("objectStoreNames"===Ne)return ke.objectStoreNames||Ee.get(ke);if("store"===Ne)return St.objectStoreNames[1]?void 0:St.objectStore(St.objectStoreNames[0])}return ge(ke[Ne])},set:(ke,Ne,St)=>(ke[Ne]=St,!0),has:(ke,Ne)=>ke instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in ke};function yt(ke){return"function"==typeof ke?function Pt(ke){return ke!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fe(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ke)?function(...Ne){return ke.apply(rt(this),Ne),ge(te.get(this))}:function(...Ne){return ge(ke.apply(rt(this),Ne))}:function(Ne,...St){const wt=ke.call(rt(this),Ne,...St);return Ee.set(wt,Ne.sort?Ne.sort():[Ne]),ge(wt)}}(ke):(ke instanceof IDBTransaction&&function Rt(ke){if(fe.has(ke))return;const Ne=new Promise((St,wt)=>{const Dn=()=>{ke.removeEventListener("complete",Vn),ke.removeEventListener("error",Zn),ke.removeEventListener("abort",Zn)},Vn=()=>{St(),Dn()},Zn=()=>{wt(ke.error||new DOMException("AbortError","AbortError")),Dn()};ke.addEventListener("complete",Vn),ke.addEventListener("error",Zn),ke.addEventListener("abort",Zn)});fe.set(ke,Ne)}(ke),((ke,Ne)=>Ne.some(St=>ke instanceof St))(ke,function ee(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ke,qe):ke)}function ge(ke){if(ke instanceof IDBRequest)return function tt(ke){const Ne=new Promise((St,wt)=>{const Dn=()=>{ke.removeEventListener("success",Vn),ke.removeEventListener("error",Zn)},Vn=()=>{St(ge(ke.result)),Dn()},Zn=()=>{wt(ke.error),Dn()};ke.addEventListener("success",Vn),ke.addEventListener("error",Zn)});return Ne.then(St=>{St instanceof IDBCursor&&te.set(St,ke)}).catch(()=>{}),at.set(Ne,ke),Ne}(ke);if(Dt.has(ke))return Dt.get(ke);const Ne=yt(ke);return Ne!==ke&&(Dt.set(ke,Ne),at.set(Ne,ke)),Ne}const rt=ke=>at.get(ke),ht=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],_t=new Map;function en(ke,Ne){if(!(ke instanceof IDBDatabase)||Ne in ke||"string"!=typeof Ne)return;if(_t.get(Ne))return _t.get(Ne);const St=Ne.replace(/FromIndex$/,""),wt=Ne!==St,Dn=Ce.includes(St);if(!(St in(wt?IDBIndex:IDBObjectStore).prototype)||!Dn&&!ht.includes(St))return;const Vn=function(){var Zn=(0,p.Z)(function*(Tr,...jn){const Rr=this.transaction(Tr,Dn?"readwrite":"readonly");let Gr=Rr.store;return wt&&(Gr=Gr.index(jn.shift())),(yield Promise.all([Gr[St](...jn),Dn&&Rr.done]))[0]});return function(jn){return Zn.apply(this,arguments)}}();return _t.set(Ne,Vn),Vn}!function Re(ke){qe=ke(qe)}(ke=>({...ke,get:(Ne,St,wt)=>en(Ne,St)||ke.get(Ne,St,wt),has:(Ne,St)=>!!en(Ne,St)||ke.has(Ne,St)}));class Tt{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function Wt(ke){return"VERSION"===ke.getComponent()?.type}(St)){const wt=St.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(St=>St).join(" ")}}const Vt="@firebase/app",Ue=new B.Yd("@firebase/app"),Bn="[DEFAULT]",qn={[Vt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ze=new Map,pe=new Map;function de(ke,Ne){try{ke.container.addComponent(Ne)}catch(St){Ue.debug(`Component ${Ne.name} failed to register with FirebaseApp ${ke.name}`,St)}}function Xe(ke,Ne){ke.container.addOrOverwriteComponent(Ne)}function ot(ke){const Ne=ke.name;if(pe.has(Ne))return Ue.debug(`There were multiple attempts to register component ${Ne}.`),!1;pe.set(Ne,ke);for(const St of Ze.values())de(St,ke);return!0}function rn(ke,Ne){const St=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return St&&St.triggerHeartbeat(),ke.container.getProvider(Ne)}function yn(ke,Ne,St=Bn){rn(ke,Ne).clearInstance(St)}function Tn(){pe.clear()}const Nn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(Ne,St,wt){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const rr="9.23.0";function Ft(ke,Ne={}){let St=ke;"object"!=typeof Ne&&(Ne={name:Ne});const wt=Object.assign({name:Bn,automaticDataCollectionEnabled:!1},Ne),Dn=wt.name;if("string"!=typeof Dn||!Dn)throw Nn.create("bad-app-name",{appName:String(Dn)});if(St||(St=(0,ce.aH)()),!St)throw Nn.create("no-options");const Vn=Ze.get(Dn);if(Vn){if((0,ce.vZ)(St,Vn.options)&&(0,ce.vZ)(wt,Vn.config))return Vn;throw Nn.create("duplicate-app",{appName:Dn})}const Zn=new F.H0(Dn);for(const jn of pe.values())Zn.addComponent(jn);const Tr=new pn(St,wt,Zn);return Ze.set(Dn,Tr),Tr}function we(ke=Bn){const Ne=Ze.get(ke);if(!Ne&&ke===Bn&&(0,ce.aH)())return Ft();if(!Ne)throw Nn.create("no-app",{appName:ke});return Ne}function Ye(){return Array.from(Ze.values())}function et(ke){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(ke){const Ne=ke.name;Ze.has(Ne)&&(Ze.delete(Ne),yield Promise.all(ke.container.getProviders().map(St=>St.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function xe(ke,Ne,St){var wt;let Dn=null!==(wt=qn[ke])&&void 0!==wt?wt:ke;St&&(Dn+=`-${St}`);const Vn=Dn.match(/\s|\//),Zn=Ne.match(/\s|\//);if(Vn||Zn){const Tr=[`Unable to register library "${Dn}" with version "${Ne}":`];return Vn&&Tr.push(`library name "${Dn}" contains illegal characters (whitespace or "/")`),Vn&&Zn&&Tr.push("and"),Zn&&Tr.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void Ue.warn(Tr.join(" "))}ot(new F.wA(`${Dn}-version`,()=>({library:Dn,version:Ne}),"VERSION"))}function G(ke,Ne){if(null!==ke&&"function"!=typeof ke)throw Nn.create("invalid-log-argument");(0,B.Am)(ke,Ne)}function ie(ke){(0,B.Ub)(ke)}const le="firebase-heartbeat-store";let ae=null;function Y(){return ae||(ae=function it(ke,Ne,{blocked:St,upgrade:wt,blocking:Dn,terminated:Vn}={}){const Zn=indexedDB.open(ke,Ne),Tr=ge(Zn);return wt&&Zn.addEventListener("upgradeneeded",jn=>{wt(ge(Zn.result),jn.oldVersion,jn.newVersion,ge(Zn.transaction),jn)}),St&&Zn.addEventListener("blocked",jn=>St(jn.oldVersion,jn.newVersion,jn)),Tr.then(jn=>{Vn&&jn.addEventListener("close",()=>Vn()),Dn&&jn.addEventListener("versionchange",Rr=>Dn(Rr.oldVersion,Rr.newVersion,Rr))}).catch(()=>{}),Tr}("firebase-heartbeat-database",1,{upgrade:(ke,Ne)=>{0===Ne&&ke.createObjectStore(le)}}).catch(ke=>{throw Nn.create("idb-open",{originalErrorMessage:ke.message})})),ae}function H(){return(H=(0,p.Z)(function*(ke){try{return yield(yield Y()).transaction(le).objectStore(le).get($t(ke))}catch(Ne){if(Ne instanceof ce.ZR)Ue.warn(Ne.message);else{const St=Nn.create("idb-get",{originalErrorMessage:Ne?.message});Ue.warn(St.message)}}})).apply(this,arguments)}function Te(ke,Ne){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(ke,Ne){try{const wt=(yield Y()).transaction(le,"readwrite");yield wt.objectStore(le).put(Ne,$t(ke)),yield wt.done}catch(St){if(St instanceof ce.ZR)Ue.warn(St.message);else{const wt=Nn.create("idb-set",{originalErrorMessage:St?.message});Ue.warn(wt.message)}}})).apply(this,arguments)}function $t(ke){return`${ke.name}!${ke.options.appId}`}class oe{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const St=this.container.getProvider("app").getImmediate();this._storage=new He(St),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Ne=this;return(0,p.Z)(function*(){const wt=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dn=X();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==Dn&&!Ne._heartbeatsCache.heartbeats.some(Vn=>Vn.date===Dn))return Ne._heartbeatsCache.heartbeats.push({date:Dn,agent:wt}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Vn=>{const Zn=new Date(Vn.date).valueOf();return Date.now()-Zn<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,p.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const St=X(),{heartbeatsToSend:wt,unsentEntries:Dn}=function Pe(ke,Ne=1024){const St=[];let wt=ke.slice();for(const Dn of ke){const Vn=St.find(Zn=>Zn.agent===Dn.agent);if(Vn){if(Vn.dates.push(Dn.date),Bt(St)>Ne){Vn.dates.pop();break}}else if(St.push({agent:Dn.agent,dates:[Dn.date]}),Bt(St)>Ne){St.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:St,unsentEntries:wt}}(Ne._heartbeatsCache.heartbeats),Vn=(0,ce.L)(JSON.stringify({version:2,heartbeats:wt}));return Ne._heartbeatsCache.lastSentHeartbeatDate=St,Dn.length>0?(Ne._heartbeatsCache.heartbeats=Dn,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Vn})()}}function X(){return(new Date).toISOString().substring(0,10)}class He{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,p.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function K(ke){return H.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var St=this;return(0,p.Z)(function*(){var wt;if(yield St._canUseIndexedDBPromise){const Vn=yield St.read();return Te(St.app,{lastSentHeartbeatDate:null!==(wt=Ne.lastSentHeartbeatDate)&&void 0!==wt?wt:Vn.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var St=this;return(0,p.Z)(function*(){var wt;if(yield St._canUseIndexedDBPromise){const Vn=yield St.read();return Te(St.app,{lastSentHeartbeatDate:null!==(wt=Ne.lastSentHeartbeatDate)&&void 0!==wt?wt:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...Ne.heartbeats]})}})()}}function Bt(ke){return(0,ce.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function _n(ke){ot(new F.wA("platform-logger",Ne=>new Tt(Ne),"PRIVATE")),ot(new F.wA("heartbeat",Ne=>new oe(Ne),"PRIVATE")),xe(Vt,"0.9.13",ke),xe(Vt,"0.9.13","esm2017"),xe("fire-js","")}("")},4859:(Ht,Le,R)=>{R.d(Le,{H0:()=>ee,wA:()=>B});var p=R(5861),F=R(2090);class B{constructor(te,fe,Ee){this.name=te,this.instanceFactory=fe,this.type=Ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const ce="[DEFAULT]";class he{constructor(te,fe){this.name=te,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const fe=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(fe)){const Ee=new F.BH;if(this.instancesDeferred.set(fe,Ee),this.isInitialized(fe)||this.shouldAutoInitialize())try{const Dt=this.getOrInitializeService({instanceIdentifier:fe});Dt&&Ee.resolve(Dt)}catch{}}return this.instancesDeferred.get(fe).promise}getImmediate(te){var fe;const Ee=this.normalizeInstanceIdentifier(te?.identifier),Dt=null!==(fe=te?.optional)&&void 0!==fe&&fe;if(!this.isInitialized(Ee)&&!this.shouldAutoInitialize()){if(Dt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ee})}catch(at){if(Dt)return null;throw at}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function De(Fe){return"EAGER"===Fe.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[fe,Ee]of this.instancesDeferred.entries()){const Dt=this.normalizeInstanceIdentifier(fe);try{const at=this.getOrInitializeService({instanceIdentifier:Dt});Ee.resolve(at)}catch{}}}}clearInstance(te=ce){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,p.Z)(function*(){const fe=Array.from(te.instances.values());yield Promise.all([...fe.filter(Ee=>"INTERNAL"in Ee).map(Ee=>Ee.INTERNAL.delete()),...fe.filter(Ee=>"_delete"in Ee).map(Ee=>Ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=ce){return this.instances.has(te)}getOptions(te=ce){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:fe={}}=te,Ee=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(Ee))throw Error(`${this.name}(${Ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Dt=this.getOrInitializeService({instanceIdentifier:Ee,options:fe});for(const[at,tt]of this.instancesDeferred.entries())Ee===this.normalizeInstanceIdentifier(at)&&tt.resolve(Dt);return Dt}onInit(te,fe){var Ee;const Dt=this.normalizeInstanceIdentifier(fe),at=null!==(Ee=this.onInitCallbacks.get(Dt))&&void 0!==Ee?Ee:new Set;at.add(te),this.onInitCallbacks.set(Dt,at);const tt=this.instances.get(Dt);return tt&&te(tt,Dt),()=>{at.delete(te)}}invokeOnInitCallbacks(te,fe){const Ee=this.onInitCallbacks.get(fe);if(Ee)for(const Dt of Ee)try{Dt(te,fe)}catch{}}getOrInitializeService({instanceIdentifier:te,options:fe={}}){let Ee=this.instances.get(te);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=te,Fe===ce?void 0:Fe),options:fe}),this.instances.set(te,Ee),this.instancesOptions.set(te,fe),this.invokeOnInitCallbacks(Ee,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,Ee)}catch{}var Fe;return Ee||null}normalizeInstanceIdentifier(te=ce){return this.component?this.component.multipleInstances?te:ce:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const fe=this.getProvider(te.name);if(fe.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);fe.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const fe=new he(te,this);return this.providers.set(te,fe),fe}getProviders(){return Array.from(this.providers.values())}}},1877:(Ht,Le,R)=>{R.d(Le,{Am:()=>Fe,Ub:()=>ee,Yd:()=>De,in:()=>F});const p=[];var F=(()=>{return(te=F||(F={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",F;var te})();const B={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},ce=F.INFO,he={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Ie=(te,fe,...Ee)=>{if(fe<te.logLevel)return;const Dt=(new Date).toISOString(),at=he[fe];if(!at)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[at](`[${Dt}]  ${te.name}:`,...Ee)};class De{constructor(fe){this.name=fe,this._logLevel=ce,this._logHandler=Ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in F))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?B[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...fe),this._logHandler(this,F.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...fe),this._logHandler(this,F.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,F.INFO,...fe),this._logHandler(this,F.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,F.WARN,...fe),this._logHandler(this,F.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...fe),this._logHandler(this,F.ERROR,...fe)}}function ee(te){p.forEach(fe=>{fe.setLogLevel(te)})}function Fe(te,fe){for(const Ee of p){let Dt=null;fe&&fe.level&&(Dt=B[fe.level]),Ee.userLogHandler=null===te?null:(at,tt,...Rt)=>{const qe=Rt.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");tt>=(Dt??at.logLevel)&&te({level:F[tt].toLowerCase(),message:qe,args:Rt,type:at.name})}}}},259:(Ht,Le,R)=>{R.d(Le,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=R(6881);(0,p.registerVersion)("firebase","9.23.0","app")},9260:(Ht,Le,R)=>{R.d(Le,{Z:()=>p.Z});var p=R(3942);p.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Ht,Le,R)=>{R.r(Le);var p=R(5861),F=R(3942),B=R(1389),ce=R(2090),De=(R(6881),R(1877),R(4859));function ee(){return window}function fe(){return(fe=(0,p.Z)(function*(Y,K,H){var Te;const{BuildInfo:dt}=ee();(0,B.as)(K.sessionId,"AuthEvent did not contain a session ID");const $t=yield Re(K.sessionId),an={};return(0,B.at)()?an.ibi=dt.packageName:(0,B.au)()?an.apn=dt.packageName:(0,B.av)(Y,"operation-not-supported-in-this-environment"),dt.displayName&&(an.appDisplayName=dt.displayName),an.sessionId=$t,(0,B.aw)(Y,H,K.type,void 0,null!==(Te=K.eventId)&&void 0!==Te?Te:void 0,an)})).apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(Y){const{BuildInfo:K}=ee(),H={};(0,B.at)()?H.iosBundleId=K.packageName:(0,B.au)()?H.androidPackageName=K.packageName:(0,B.av)(Y,"operation-not-supported-in-this-environment"),yield(0,B.ax)(Y,H)})).apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(Y,K,H){const{cordova:Te}=ee();let dt=()=>{};try{yield new Promise(($t,an)=>{let re=null;function oe(){var He;$t();const Bt=null===(He=Te.plugins.browsertab)||void 0===He?void 0:He.close;"function"==typeof Bt&&Bt(),"function"==typeof H?.close&&H.close()}function X(){re||(re=window.setTimeout(()=>{an((0,B.az)(Y,"redirect-cancelled-by-user"))},2e3))}function Pe(){"visible"===document?.visibilityState&&X()}K.addPassiveListener(oe),document.addEventListener("resume",X,!1),(0,B.au)()&&document.addEventListener("visibilitychange",Pe,!1),dt=()=>{K.removePassiveListener(oe),document.removeEventListener("resume",X,!1),document.removeEventListener("visibilitychange",Pe,!1),re&&window.clearTimeout(re)}})}finally{dt()}})).apply(this,arguments)}function Re(Y){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(Y){const K=yt(Y),H=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(H)).map(dt=>dt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yt(Y){if((0,B.as)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const K=new ArrayBuffer(Y.length),H=new Uint8Array(K);for(let Te=0;Te<Y.length;Te++)H[Te]=Y.charCodeAt(Te);return H}class rt extends B.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(K)),super.onEvent(K)}initialized(){var K=this;return(0,p.Z)(function*(){yield K.initPromise})()}}function ht(Y){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,p.Z)(function*(Y){const K=yield Tt()._get(Wt(Y));return K&&(yield Tt()._remove(Wt(Y))),K})).apply(this,arguments)}function en(){const Y=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const Te=Math.floor(Math.random()*K.length);Y.push(K.charAt(Te))}return Y.join("")}function Tt(){return(0,B.aC)(B.b)}function Wt(Y){return(0,B.aD)("authEvent",Y.config.apiKey,Y.name)}function Ue(Y){if(!Y?.includes("?"))return{};const[K,...H]=Y.split("?");return(0,ce.zd)(H.join("?"))}function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,B.az)("no-auth-event")}}function kt(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function un(Y=(0,ce.z$)()){return!("file:"!==kt()&&"ionic:"!==kt()&&"capacitor:"!==kt()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function fn(){try{const Y=self.localStorage,K=B.aL();if(Y)return Y.setItem(K,"1"),Y.removeItem(K),!function Xt(Y=(0,ce.z$)()){return function Fn(){return(0,ce.w1)()&&11===document?.documentMode}()||function ar(Y=(0,ce.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,ce.hl)()}catch{return Pn()&&(0,ce.hl)()}return!1}function Pn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $n(){return(function tn(){return"http:"===kt()||"https:"===kt()}()||(0,ce.ru)()||un())&&!function vn(){return(0,ce.b$)()||(0,ce.UG)()}()&&fn()&&!Pn()}function br(){return un()&&typeof document<"u"}function xt(){return(xt=(0,p.Z)(function*(){return!!br()&&new Promise(Y=>{const K=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),Y(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},ur=B.aA,Br="persistence";function qn(Y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(Y){yield Y._initializationPromise;const K=de(),H=B.aD(Br,Y.config.apiKey,Y.name);K&&K.setItem(H,Y._getPersistence())})).apply(this,arguments)}function de(){var Y;try{return(null===(Y=function Rn(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const Xe=B.aA;class ot{constructor(){this.browserResolver=B.aC(B.k),this.cordovaResolver=B.aC(class Ke{constructor(){this._redirectPersistence=B.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(K){var H=this;return(0,p.Z)(function*(){const Te=K._key();let dt=H.eventManagers.get(Te);return dt||(dt=new rt(K),H.eventManagers.set(Te,dt),H.attachCallbackListeners(K,dt)),dt})()}_openPopup(K){(0,B.av)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,H,Te,dt){var $t=this;return(0,p.Z)(function*(){!function qe(Y){var K,H,Te,dt,$t,an,re,oe,X,Pe;const He=ee();(0,B.aA)("function"==typeof(null===(K=He?.universalLinks)||void 0===K?void 0:K.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,B.aA)(typeof(null===(H=He?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,B.aA)("function"==typeof(null===($t=null===(dt=null===(Te=He?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===dt?void 0:dt.browsertab)||void 0===$t?void 0:$t.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(oe=null===(re=null===(an=He?.cordova)||void 0===an?void 0:an.plugins)||void 0===re?void 0:re.browsertab)||void 0===oe?void 0:oe.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(Pe=null===(X=He?.cordova)||void 0===X?void 0:X.InAppBrowser)||void 0===Pe?void 0:Pe.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const an=yield $t._initialize(K);yield an.initialized(),an.resetRedirect(),(0,B.aG)(),yield $t._originValidation(K);const re=function it(Y,K,H=null){return{type:K,eventId:H,urlResponse:null,sessionId:en(),postBody:null,tenantId:Y.tenantId,error:(0,B.az)(Y,"no-auth-event")}}(K,Te,dt);yield function Et(Y,K){return Tt()._set(Wt(Y),K)}(K,re);const oe=yield function te(Y,K,H){return fe.apply(this,arguments)}(K,re,H),X=yield function at(Y){const{cordova:K}=ee();return new Promise(H=>{K.plugins.browsertab.isAvailable(Te=>{let dt=null;Te?K.plugins.browsertab.openUrl(Y):dt=K.InAppBrowser.open(Y,(0,B.ay)()?"_blank":"_system","location=yes"),H(dt)})})}(oe);return function tt(Y,K,H){return Rt.apply(this,arguments)}(K,an,X)})()}_isIframeWebStorageSupported(K,H){throw new Error("Method not implemented.")}_originValidation(K){const H=K._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function Ee(Y){return Dt.apply(this,arguments)}(K)),this.originValidationPromises[H]}attachCallbackListeners(K,H){const{universalLinks:Te,handleOpenURL:dt,BuildInfo:$t}=ee(),an=setTimeout((0,p.Z)(function*(){yield ht(K),H.onEvent(Je())}),500),re=function(){var Pe=(0,p.Z)(function*(He){clearTimeout(an);const Bt=yield ht(K);let _n=null;Bt&&He?.url&&(_n=function _t(Y,K){var H,Te;const dt=function nr(Y){const K=Ue(Y),H=K.link?decodeURIComponent(K.link):void 0,Te=Ue(H).link,dt=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Ue(dt).link||dt||Te||H||Y}(K);if(dt.includes("/__/auth/callback")){const $t=Ue(dt),an=$t.firebaseError?function Vt(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent($t.firebaseError)):null,re=null===(Te=null===(H=an?.code)||void 0===H?void 0:H.split("auth/"))||void 0===Te?void 0:Te[1],oe=re?(0,B.az)(re):null;return oe?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:oe,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:dt,postBody:null}}return null}(Bt,He.url)),H.onEvent(_n||Je())});return function(Bt){return Pe.apply(this,arguments)}}();typeof Te<"u"&&"function"==typeof Te.subscribe&&Te.subscribe(null,re);const oe=dt,X=`${$t.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var Pe=(0,p.Z)(function*(He){if(He.toLowerCase().startsWith(X)&&re({url:He}),"function"==typeof oe)try{oe(He)}catch(Bt){console.error(Bt)}});return function(He){return Pe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=B.a,this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(K){var H=this;return(0,p.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,H,Te,dt){var $t=this;return(0,p.Z)(function*(){return yield $t.selectUnderlyingResolver(),$t.assertedUnderlyingResolver._openPopup(K,H,Te,dt)})()}_openRedirect(K,H,Te,dt){var $t=this;return(0,p.Z)(function*(){return yield $t.selectUnderlyingResolver(),$t.assertedUnderlyingResolver._openRedirect(K,H,Te,dt)})()}_isIframeWebStorageSupported(K,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,H)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,p.Z)(function*(){if(K.underlyingResolver)return;const H=yield function _r(){return xt.apply(this,arguments)}();K.underlyingResolver=H?K.cordovaResolver:K.browserResolver})()}}function rn(Y){return Y.unwrap()}function Tn(Y){return Nn(Y)}function Nn(Y){const{_tokenResponse:K}=Y instanceof ce.ZR?Y.customData:Y;if(!K)return null;if(!(Y instanceof ce.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return B.P.credentialFromResult(Y);const H=K.providerId;if(!H||H===B.p.PASSWORD)return null;let Te;switch(H){case B.p.GOOGLE:Te=B.V;break;case B.p.FACEBOOK:Te=B.U;break;case B.p.GITHUB:Te=B.W;break;case B.p.TWITTER:Te=B.Z;break;default:const{oauthIdToken:dt,oauthAccessToken:$t,oauthTokenSecret:an,pendingToken:re,nonce:oe}=K;return $t||an||dt||re?re?H.startsWith("saml.")?B.aO._create(H,re):B.L._fromParams({providerId:H,signInMethod:H,pendingToken:re,idToken:dt,accessToken:$t}):new B.X(H).credential({idToken:dt,accessToken:$t,rawNonce:oe}):null}return Y instanceof ce.ZR?Te.credentialFromError(Y):Te.credentialFromResult(Y)}function pn(Y,K){return K.catch(H=>{throw H instanceof ce.ZR&&function Nt(Y,K){var H;const Te=null===(H=K.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===K?.code)K.resolver=new we(Y,B.aq(Y,K));else if(Te){const dt=Nn(K),$t=K;dt&&($t.credential=dt,$t.tenantId=Te.tenantId||void 0,$t.email=Te.email||void 0,$t.phoneNumber=Te.phoneNumber||void 0)}}(Y,H),H}).then(H=>{const dt=H.user;return{operationType:H.operationType,credential:Tn(H),additionalUserInfo:B.ao(H),user:Ye.getOrCreate(dt)}})}function rr(Y,K){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(Y,K){const H=yield K;return{verificationId:H.verificationId,confirm:Te=>pn(Y,H.confirm(Te))}})).apply(this,arguments)}class we{constructor(K,H){this.resolver=H,this.auth=function yn(Y){return Y.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return pn(rn(this.auth),this.resolver.resolveSignIn(K))}}class Ye{constructor(K){this._delegate=K,this.multiFactor=B.ar(K)}static getOrCreate(K){return Ye.USER_MAP.has(K)||Ye.USER_MAP.set(K,new Ye(K)),Ye.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var H=this;return(0,p.Z)(function*(){return pn(H.auth,B.a0(H._delegate,K))})()}linkWithPhoneNumber(K,H){var Te=this;return(0,p.Z)(function*(){return rr(Te.auth,B.l(Te._delegate,K,H))})()}linkWithPopup(K){var H=this;return(0,p.Z)(function*(){return pn(H.auth,B.d(H._delegate,K,ot))})()}linkWithRedirect(K){var H=this;return(0,p.Z)(function*(){return yield qn(B.aH(H.auth)),B.g(H._delegate,K,ot)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var H=this;return(0,p.Z)(function*(){return pn(H.auth,B.a1(H._delegate,K))})()}reauthenticateWithPhoneNumber(K,H){return rr(this.auth,B.r(this._delegate,K,H))}reauthenticateWithPopup(K){return pn(this.auth,B.e(this._delegate,K,ot))}reauthenticateWithRedirect(K){var H=this;return(0,p.Z)(function*(){return yield qn(B.aH(H.auth)),B.h(H._delegate,K,ot)})()}sendEmailVerification(K){return B.ae(this._delegate,K)}unlink(K){var H=this;return(0,p.Z)(function*(){return yield B.an(H._delegate,K),H})()}updateEmail(K){return B.aj(this._delegate,K)}updatePassword(K){return B.ak(this._delegate,K)}updatePhoneNumber(K){return B.u(this._delegate,K)}updateProfile(K){return B.ai(this._delegate,K)}verifyBeforeUpdateEmail(K,H){return B.af(this._delegate,K,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ye.USER_MAP=new WeakMap;const et=B.aA;let jt=(()=>{class Y{constructor(H,Te){if(this.app=H,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:dt}=H.options;et(dt,"invalid-api-key",{appName:H.name}),et(dt,"invalid-api-key",{appName:H.name});const $t=typeof window<"u"?ot:void 0;this._delegate=Te.initialize({options:{persistence:G(dt,H.name),popupRedirectResolver:$t}}),this._delegate._updateErrorMap(B.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ye.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,Te){B.I(this._delegate,H,Te)}applyActionCode(H){return B.a5(this._delegate,H)}checkActionCode(H){return B.a6(this._delegate,H)}confirmPasswordReset(H,Te){return B.a4(this._delegate,H,Te)}createUserWithEmailAndPassword(H,Te){var dt=this;return(0,p.Z)(function*(){return pn(dt._delegate,B.a8(dt._delegate,H,Te))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return B.ad(this._delegate,H)}isSignInWithEmailLink(H){return B.ab(this._delegate,H)}getRedirectResult(){var H=this;return(0,p.Z)(function*(){et($n(),H._delegate,"operation-not-supported-in-this-environment");const Te=yield B.j(H._delegate,ot);return Te?pn(H._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function pt(Y,K){(0,B.aH)(Y)._logFramework(K)}(this._delegate,H)}onAuthStateChanged(H,Te,dt){const{next:$t,error:an,complete:re}=xe(H,Te,dt);return this._delegate.onAuthStateChanged($t,an,re)}onIdTokenChanged(H,Te,dt){const{next:$t,error:an,complete:re}=xe(H,Te,dt);return this._delegate.onIdTokenChanged($t,an,re)}sendSignInLinkToEmail(H,Te){return B.aa(this._delegate,H,Te)}sendPasswordResetEmail(H,Te){return B.a3(this._delegate,H,Te||void 0)}setPersistence(H){var Te=this;return(0,p.Z)(function*(){let dt;switch(function Bn(Y,K){ur(Object.values(Un).includes(K),Y,"invalid-persistence-type"),(0,ce.b$)()?ur(K!==Un.SESSION,Y,"unsupported-persistence-type"):(0,ce.UG)()?ur(K===Un.NONE,Y,"unsupported-persistence-type"):Pn()?ur(K===Un.NONE||K===Un.LOCAL&&(0,ce.hl)(),Y,"unsupported-persistence-type"):ur(K===Un.NONE||fn(),Y,"unsupported-persistence-type")}(Te._delegate,H),H){case Un.SESSION:dt=B.a;break;case Un.LOCAL:dt=(yield B.aC(B.i)._isAvailable())?B.i:B.b;break;case Un.NONE:dt=B.N;break;default:return B.av("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(dt)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return pn(this._delegate,B._(this._delegate))}signInWithCredential(H){return pn(this._delegate,B.$(this._delegate,H))}signInWithCustomToken(H){return pn(this._delegate,B.a2(this._delegate,H))}signInWithEmailAndPassword(H,Te){return pn(this._delegate,B.a9(this._delegate,H,Te))}signInWithEmailLink(H,Te){return pn(this._delegate,B.ac(this._delegate,H,Te))}signInWithPhoneNumber(H,Te){return rr(this._delegate,B.s(this._delegate,H,Te))}signInWithPopup(H){var Te=this;return(0,p.Z)(function*(){return et($n(),Te._delegate,"operation-not-supported-in-this-environment"),pn(Te._delegate,B.c(Te._delegate,H,ot))})()}signInWithRedirect(H){var Te=this;return(0,p.Z)(function*(){return et($n(),Te._delegate,"operation-not-supported-in-this-environment"),yield qn(Te._delegate),B.f(Te._delegate,H,ot)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return B.a7(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=Un,Y})();function xe(Y,K,H){let Te=Y;"function"!=typeof Y&&({next:Te,error:K,complete:H}=Y);const dt=Te;return{next:an=>dt(an&&Ye.getOrCreate(an)),error:K,complete:H}}function G(Y,K){const H=function pe(Y,K){const H=de();if(!H)return[];const Te=B.aD(Br,Y,K);switch(H.getItem(Te)){case Un.NONE:return[B.N];case Un.LOCAL:return[B.i,B.a];case Un.SESSION:return[B.a];default:return[]}}(Y,K);if(typeof self<"u"&&!H.includes(B.i)&&H.push(B.i),typeof window<"u")for(const Te of[B.b,B.a])H.includes(Te)||H.push(Te);return H.includes(B.N)||H.push(B.N),H}class ie{constructor(){this.providerId="phone",this._delegate=new B.P(rn(F.Z.auth()))}static credential(K,H){return B.P.credential(K,H)}verifyPhoneNumber(K,H){return this._delegate.verifyPhoneNumber(K,H)}unwrap(){return this._delegate}}ie.PHONE_SIGN_IN_METHOD=B.P.PHONE_SIGN_IN_METHOD,ie.PROVIDER_ID=B.P.PROVIDER_ID;const Be=B.aA;class At{constructor(K,H,Te=F.Z.app()){var dt;Be(null===(dt=Te.options)||void 0===dt?void 0:dt.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new B.R(K,H,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ae(Y){Y.INTERNAL.registerComponent(new De.wA("auth-compat",K=>{const H=K.getProvider("app-compat").getImmediate(),Te=K.getProvider("auth");return new jt(H,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:B.A.EMAIL_SIGNIN,PASSWORD_RESET:B.A.PASSWORD_RESET,RECOVER_EMAIL:B.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:B.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:B.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:B.A.VERIFY_EMAIL}},EmailAuthProvider:B.Q,FacebookAuthProvider:B.U,GithubAuthProvider:B.W,GoogleAuthProvider:B.V,OAuthProvider:B.X,SAMLAuthProvider:B.Y,PhoneAuthProvider:ie,PhoneMultiFactorGenerator:B.m,RecaptchaVerifier:At,TwitterAuthProvider:B.Z,Auth:jt,AuthCredential:B.J,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.4.2")}(F.Z)},5861:(Ht,Le,R)=>{function p(B,ce,he,Ie,De,ee,Fe){try{var te=B[ee](Fe),fe=te.value}catch(Ee){return void he(Ee)}te.done?ce(fe):Promise.resolve(fe).then(Ie,De)}function F(B){return function(){var ce=this,he=arguments;return new Promise(function(Ie,De){var ee=B.apply(ce,he);function Fe(fe){p(ee,Ie,De,Fe,te,"next",fe)}function te(fe){p(ee,Ie,De,Fe,te,"throw",fe)}Fe(void 0)})}}R.d(Le,{Z:()=>F})},7582:(Ht,Le,R)=>{function ce(Ue,Ve){var Ke={};for(var je in Ue)Object.prototype.hasOwnProperty.call(Ue,je)&&Ve.indexOf(je)<0&&(Ke[je]=Ue[je]);if(null!=Ue&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(je=Object.getOwnPropertySymbols(Ue);Je<je.length;Je++)Ve.indexOf(je[Je])<0&&Object.prototype.propertyIsEnumerable.call(Ue,je[Je])&&(Ke[je[Je]]=Ue[je[Je]])}return Ke}function Ee(Ue,Ve,Ke,je){return new(Ke||(Ke=Promise))(function(pt,Ct){function vt(tn){try{kt(je.next(tn))}catch(un){Ct(un)}}function Zt(tn){try{kt(je.throw(tn))}catch(un){Ct(un)}}function kt(tn){tn.done?pt(tn.value):function Je(pt){return pt instanceof Ke?pt:new Ke(function(Ct){Ct(pt)})}(tn.value).then(vt,Zt)}kt((je=je.apply(Ue,Ve||[])).next())})}function ge(Ue){return this instanceof ge?(this.v=Ue,this):new ge(Ue)}function rt(Ue,Ve,Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,je=Ke.apply(Ue,Ve||[]),pt=[];return Je={},Ct("next"),Ct("throw"),Ct("return"),Je[Symbol.asyncIterator]=function(){return this},Je;function Ct(vn){je[vn]&&(Je[vn]=function(Fn){return new Promise(function(ar,Xt){pt.push([vn,Fn,ar,Xt])>1||vt(vn,Fn)})})}function vt(vn,Fn){try{!function Zt(vn){vn.value instanceof ge?Promise.resolve(vn.value.v).then(kt,tn):un(pt[0][2],vn)}(je[vn](Fn))}catch(ar){un(pt[0][3],ar)}}function kt(vn){vt("next",vn)}function tn(vn){vt("throw",vn)}function un(vn,Fn){vn(Fn),pt.shift(),pt.length&&vt(pt[0][0],pt[0][1])}}function Et(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Ve=Ue[Symbol.asyncIterator];return Ve?Ve.call(Ue):(Ue=function Rt(Ue){var Ve="function"==typeof Symbol&&Symbol.iterator,Ke=Ve&&Ue[Ve],je=0;if(Ke)return Ke.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&je>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[je++],done:!Ue}}};throw new TypeError(Ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ue),Ke={},je("next"),je("throw"),je("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke);function je(pt){Ke[pt]=Ue[pt]&&function(Ct){return new Promise(function(vt,Zt){!function Je(pt,Ct,vt,Zt){Promise.resolve(Zt).then(function(kt){pt({value:kt,done:vt})},Ct)}(vt,Zt,(Ct=Ue[pt](Ct)).done,Ct.value)})}}}R.d(Le,{FC:()=>rt,KL:()=>Et,_T:()=>ce,mG:()=>Ee,qq:()=>ge})}},Ht=>{Ht(Ht.s=2445)}]);