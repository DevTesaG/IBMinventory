"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[592],{9898:(P,f,o)=>{o.d(f,{L:()=>i});var l=o(5861),u=o(4004),_=o(8179),s=o(4650),h=o(33);let i=(()=>{class e{constructor(t){this.db=t,this.dbPath="/FPreport",this.invFinishedProductsRef=t.collection(this.dbPath)}getNextBatch(t,d){return this.db.collection(this.dbPath,d?n=>n.orderBy("timestamp","desc").startAfter(d.timestamp).limit(t):n=>n.orderBy("timestamp","desc").limit(t))}getStock(t){var d=this;return(0,l.Z)(function*(){return t?new Promise(function(){var a=(0,l.Z)(function*(m){d.invFinishedProductsRef.doc(t).get().pipe((0,u.U)(c=>({id:c.id,prod:c.data()}))).subscribe(c=>{!c||m({id:c.id,available:c.prod.available,wating:c.prod.wating,commited:c.prod.commited})})});return function(m){return a.apply(this,arguments)}}()):{}})()}getAll(){return this.invFinishedProductsRef}create(t){return this.invFinishedProductsRef.add({...t})}update(t,d){return this.invFinishedProductsRef.doc(t).update({timestamp:_.EK.fromDate(new Date),...d})}delete(t){return this.invFinishedProductsRef.doc(t).delete()}filterByNameBatch(t,d,n){return this.db.collection(this.dbPath,n?a=>a.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").startAfter(n.name).limit(d):a=>a.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").limit(d))}filterByCodeBatch(t,d,n){return this.db.collection(this.dbPath,n?a=>a.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").startAfter(n.code).limit(d):a=>a.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").limit(d))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(h.ST))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8132:(P,f,o)=>{o.d(f,{p:()=>s});var l=o(8996),u=o(4650),_=o(33);let s=(()=>{class h{constructor(e){this.db=e,this.dbPath="/orders",this.ordersRef=e.collection(this.dbPath)}getNextBatch(e,r){return this.db.collection(this.dbPath,r?t=>t.orderBy("timestamp","desc").startAfter(r).limit(e):t=>t.orderBy("timestamp","desc").limit(e))}getPrevBatch(e,r,t){return this.db.collection(this.dbPath,d=>d.orderBy("timestamp","desc").startAt(r).endBefore(t).limit(e))}getBatch(e){return this.db.collection(this.dbPath,r=>r.limit(e).orderBy("timestamp","desc"))}getAll(){return this.ordersRef}getById(e){return this.db.collection(this.dbPath,r=>r.where("product_id","==",e))}create(e){return(0,l.D)(this.ordersRef.add({...e}))}update(e,r){return this.ordersRef.doc(e).update(r)}delete(e){return this.ordersRef.doc(e).delete()}filterByName(e){return this.db.collection(this.dbPath,r=>r.where("name",">=",e).where("name","<=",e+"\uf8ff"))}filterByCode(e){return this.db.collection(this.dbPath,r=>r.where("code",">=",e).where("code","<=",e+"\uf8ff"))}}return h.\u0275fac=function(e){return new(e||h)(u.LFG(_.ST))},h.\u0275prov=u.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},5561:(P,f,o)=>{o.d(f,{l:()=>_});var l=o(4650),u=o(33);let _=(()=>{class s{constructor(i){this.db=i,this.dbPath="/shopOrder",this.InvRawMaterialsRef=i.collection(this.dbPath)}getNextBatch(i,e){return this.db.collection(this.dbPath,e?r=>r.orderBy("emissionDate","asc").startAfter(e).limit(i):r=>r.orderBy("emissionDate","asc").limit(i))}create(i,e,r,t,d,n,a,m){var c={materialId:i,price:a,name:e,stockId:n,requiredMaterial:r,requestedAmount:t,orderDeadline:d,emissionDate:new Date,timestamp:new Date};return m&&(c.orderId=m),this.InvRawMaterialsRef.add(c)}update(i,e){return this.InvRawMaterialsRef.doc(i).update(e)}delete(i){return this.InvRawMaterialsRef.doc(i).delete()}filterUrgentatch(i,e,r){return this.db.collection(this.dbPath,r?t=>t.where("orderDeadline","<=",i).orderBy("orderDeadline","asc").startAfter(r.name).limit(e):t=>t.where("orderDeadline","<=",i).orderBy("orderDeadline","asc").limit(e))}}return s.\u0275fac=function(i){return new(i||s)(l.LFG(u.ST))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);