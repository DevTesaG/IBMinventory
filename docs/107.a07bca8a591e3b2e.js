"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[107],{4245:(M,v,l)=>{l.d(v,{U:()=>d});var e=l(4650),p=l(4985),g=l(6895),f=l(433);let b=(()=>{class r{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.continue=new e.vpe}ngOnInit(){}modalContinue(i){this.continue.emit(i)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage"},outputs:{continue:"continue"},decls:17,vars:2,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","rounded-pill"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","rounded-pill",3,"click"]],template:function(i,c){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),e._uU(8,"PRECAUCION"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return c.modalContinue(!1)}),e.qZA()(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return c.modalContinue(!1)}),e._uU(14,"Abortar"),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return c.modalContinue(!0)}),e._uU(16,"Continuar"),e.qZA()()()()()()),2&i&&(e.xp6(2),e.hij(" ",c.btnMessage," "),e.xp6(9),e.hij(" ",c.modalMessage," "))}}),r})();function u(r,_){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const i=e.oxw(2).$implicit;e.xp6(1),e.hij("",i.placeholder," es obligatorio")}}function a(r,_){if(1&r&&(e.TgZ(0,"div",12),e.YNc(1,u,2,1,"div",13),e.qZA()),2&r){e.oxw();const i=e.MAs(2);e.xp6(1),e.Q6J("ngIf",i.errors.required)}}function t(r,_){1&r&&e._UZ(0,"div",14)}const o=function(r){return{"is-invalid":r}};function n(r,_){if(1&r){const i=e.EpF();e.TgZ(0,"div",6)(1,"input",7,8),e.NdJ("ngModelChange",function(m){const y=e.CHM(i).$implicit;return e.KtG(y.value=m)}),e.qZA(),e.YNc(3,a,2,1,"div",9),e.TgZ(4,"label",10),e._uU(5),e.qZA(),e.YNc(6,t,1,0,"div",11),e.qZA()}if(2&r){const i=_.$implicit,c=e.MAs(2),m=e.oxw(2),C=e.MAs(1);e.xp6(1),e.Tol("form-control"+i.classlist),e.Q6J("id",i.label)("name",i.label)("type",i.type)("placeholder",i.placeholder)("ngModel",i.value)("value",i.valueCallback?i.getValue():i.value)("ngClass",e.VKq(14,o,C.submitted&&c.errors))("readonly",m.mode),e.xp6(2),e.Q6J("ngIf",C.submitted&&c.errors),e.xp6(1),e.Q6J("for",i.label),e.xp6(1),e.Oqu(i.placeholder),e.xp6(1),e.Q6J("ngIf","radio"==i.type)}}function s(r,_){if(1&r&&(e.TgZ(0,"div",4),e.YNc(1,n,7,16,"div",5),e.qZA()),2&r){const i=_.$implicit;e.xp6(1),e.Q6J("ngForOf",i)}}function h(r,_){if(1&r){const i=e.EpF();e.TgZ(0,"div",15)(1,"app-warn-modal",16),e.NdJ("continue",function(m){e.CHM(i);const C=e.oxw();return e.KtG(C.onSubmit(m))}),e.qZA(),e.TgZ(2,"button",17),e.NdJ("click",function(){e.CHM(i);const m=e.oxw(),C=e.MAs(1);return e.KtG(m.onReset(C))}),e._uU(3," Reset "),e.qZA()()}if(2&r){const i=e.oxw();e.xp6(1),e.Q6J("btnMessage",i.btnMes)}}let d=(()=>{class r{constructor(i){this.cdref=i,this.formModel=new e.vpe,this.mode=!1,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new p.O("Nombre Completo","fullname","text"),new p.O("Nombre de Usuario","username","text")],[new p.O("Correo Electronico","email","text")],[new p.O("Password","password","password"),new p.O("Confirmar Password","Confirm Password","password")],[new p.O("Aceptar los Terminos","Accept Terms","radio","form-check-input",!1)]],this.continue=!1}ngOnInit(){}onContinue(i){this.continue=i}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(i){if(this.continue&&i){var c={};this.formObj.flat(2).forEach(m=>c[m.label]=m.value),this.formModel.emit(c)}}onReset(i){this.continue=!1,i.reset()}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-form"]],inputs:{mode:"mode",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel"},decls:4,vars:2,consts:[["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["required","",3,"id","name","type","placeholder","ngModel","value","ngClass","readonly","ngModelChange"],["input","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"",3,"for"],["class","mb-4",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["type","submit","modalMessage","\xbfSeguro que desea crear una nueva orden?",3,"btnMessage","continue"],["type","button",1,"ms-2","btn","btn-outline-danger","rounded-pill",3,"click"]],template:function(i,c){if(1&i){const m=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(m);const y=e.MAs(1);return e.KtG(y.form.valid&&c.onContinue(!0))}),e.YNc(2,s,2,1,"div",2),e.YNc(3,h,4,1,"div",3),e.qZA()}2&i&&(e.xp6(2),e.Q6J("ngForOf",c.formObj),e.xp6(1),e.Q6J("ngIf",!c.mode))},dependencies:[g.mk,g.sg,g.O5,f._Y,f.Fj,f.JJ,f.JL,f.Q7,f.On,f.F,b]}),r})()},798:(M,v,l)=>{l.d(v,{C:()=>f});var e=l(8179),p=l(4650),g=l(33);let f=(()=>{class b{constructor(a){this.db=a,this.dbPath="/audit",this.objectsRef=a.collection(this.dbPath)}getNextBatch(a,t){return this.db.collection(this.dbPath,t?o=>o.orderBy("timestamp","desc").startAfter(t.timestamp).limit(a):o=>o.orderBy("timestamp","desc").limit(a))}create(a,t,o){var n={operation:a,process:t,timestamp:e.EK.fromDate(new Date),user:o};return console.log(n),this.objectsRef.add({...n})}update(a,t){return this.objectsRef.doc(a).update(t)}delete(a){return this.objectsRef.doc(a).delete()}filterByDateBatch(a,t,o,n,s){return console.log(o),this.db.collection(this.dbPath,h=>h.where("timestamp",">=",a).where("timestamp","<=",t).where("name","==",o).orderBy("timestamp","desc").limit(n))}filterByNameBatch(a,t,o){return this.db.collection(this.dbPath,o?n=>n.where("name",">=",a).where("name","<=",a+"\uf8ff").orderBy("name","desc").startAfter(o.name).limit(t):n=>n.where("name",">=",a).where("name","<=",a+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(a,t,o){return this.db.collection(this.dbPath,o?n=>n.where("code",">=",a).where("code","<=",a+"\uf8ff").orderBy("code","desc").startAfter(o.code).limit(t):n=>n.where("code",">=",a).where("code","<=",a+"\uf8ff").orderBy("code","desc").limit(t))}}return b.\u0275fac=function(a){return new(a||b)(p.LFG(g.ST))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},6535:(M,v,l)=>{l.d(v,{U:()=>b});var e=l(5861),p=l(4004),g=l(4650),f=l(33);let b=(()=>{class u{constructor(t,o){this.db=t,this.path=o,this.objectRef=t.collection(this.path),this.pagination={query:void 0,filterType:!1,filterKey:"",productsPerCall:2,disableNext:!1,disablePrev:!0,lastInResponses:[],requestDataArray:[]}}pathSetter(t){this.path=t,this.objectRef=this.db.collection(this.path)}paginationSetter(t){return this.pagination=t,this}paginationGetter(){return this.pagination}nextPage(t){var o=this;return(0,e.Z)(function*(){var n,s;if(console.log(o.pagination.disablePrev),t){if(o.pagination.disableNext)return;o.pagination.requestDataArray.length&&o.pagination.lastInResponses?.push(o.pagination.requestDataArray[o.pagination.requestDataArray.length-1]),n=o.pagination.lastInResponses?.length?o.pagination.lastInResponses[o.pagination.lastInResponses?.length-1]:void 0,console.log(n)}else{if(o.pagination.disablePrev)return;o.pagination.lastInResponses?.pop(),n=o.pagination.lastInResponses?.pop()}return console.log("Info:",n,o.pagination.lastInResponses,o.pagination.productsPerCall,o.pagination.query),s=o.pagination.query?o.filterByNameBatch(o.pagination.query,o.pagination.productsPerCall,n):o.getNextBatch(o.pagination.productsPerCall,n),new Promise(h=>{s.snapshotChanges().pipe((0,p.U)(d=>d.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe({next:d=>{if(!d.length)return o.pagination.disableNext=!0,void o.pagination.lastInResponses.pop();console.log(d),o.pagination.requestDataArray=d,o.pagination.disableNext=d.length<o.pagination.productsPerCall,o.pagination.disablePrev=!n,h(o.pagination)},error:d=>{o.pagination.disableNext=!1}})})})()}getNextBatch(t,o){return this.db.collection(this.path,o?n=>n.orderBy("timestamp","desc").startAfter(o.timestamp).limit(t):n=>n.orderBy("timestamp","desc").limit(t))}getAll(){return this.objectRef}getByKey(t,o){return this.db.collection(this.path,n=>n.where(t,"==",o))}create(t){return this.objectRef.add({...t})}update(t,o){return this.objectRef.doc(t).update(o)}delete(t){return this.objectRef.doc(t).delete()}filterByNameBatch(t,o,n){return n?this.db.collection(this.path,s=>s.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").startAfter(n.name).limit(o)):(this.pagination.lastInResponses=[],this.pagination.requestDataArray=[],this.pagination.disableNext=!1,this.pagination.disablePrev=!0,this.db.collection(this.path,s=>s.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").limit(o)))}filterByKeyBatch(t,o,n,s){return console.log(t,o),s?(console.log(s[t]),this.db.collection(this.path,h=>h.where(t,">=",o).where(t,"<=",o+"\uf8ff").orderBy(t,"desc").startAfter(s[t]).limit(n))):this.db.collection(this.path,h=>h.where(t,">=",o).where(t,"<=",o+"\uf8ff").orderBy(t,"desc").limit(n))}}return u.\u0275fac=function(t){return new(t||u)(g.LFG(f.ST),g.LFG("path"))},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},490:(M,v,l)=>{l.d(v,{y:()=>b});var e=l(5861),p=l(4004),g=l(4650),f=l(33);let b=(()=>{class u{constructor(t){this.db=t,this.dbPath="/RMreport",this.InvRawMaterialsRef=t.collection(this.dbPath)}getNextBatch(t,o){return this.db.collection(this.dbPath,o?n=>n.orderBy("timestamp","desc").startAfter(o.timestamp).limit(t):n=>n.orderBy("timestamp","desc").limit(t))}getAll(){return this.InvRawMaterialsRef}create(t){return this.InvRawMaterialsRef.add({...t})}update(t,o){return console.log("Update",t,o),this.InvRawMaterialsRef.doc(t).update(o)}delete(t){return this.InvRawMaterialsRef.doc(t).delete()}getStock(t){var o=this;return(0,e.Z)(function*(){if(!t)return{};var n={};return new Promise(function(){var s=(0,e.Z)(function*(h){o.db.collection(o.dbPath,d=>d.where("materialId","==",t)).snapshotChanges().pipe((0,p.U)(d=>d.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(d=>{n={id:d.at(0)?.id,available:d.at(0)?.available,wating:d.at(0)?.wating,watingCommited:d.at(0)?.watingCommited,commited:d.at(0)?.commited},h(n)})});return function(h){return s.apply(this,arguments)}}())})()}filterByDateBatch(t,o,n,s,h){return console.log(n),this.db.collection(this.dbPath,d=>d.where("timestamp",">=",t).where("timestamp","<=",o).where("name","==",n).orderBy("timestamp","desc").limit(s))}filterByNameBatch(t,o,n){return this.db.collection(this.dbPath,n?s=>s.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").startAfter(n.name).limit(o):s=>s.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").limit(o))}filterByCodeBatch(t,o,n){return this.db.collection(this.dbPath,n?s=>s.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").startAfter(n.code).limit(o):s=>s.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").limit(o))}}return u.\u0275fac=function(t){return new(t||u)(g.LFG(f.ST))},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},8179:(M,v,l)=>{l.d(v,{EK:()=>e.EK});var e=l(2810)}}]);