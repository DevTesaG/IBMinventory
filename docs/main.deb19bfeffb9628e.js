"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[179],{6217:(Lt,ze,N)=>{N.d(ze,{nm:()=>gi});var d=N(4976);N(4650),N(259);var Ce=N(5861),ut=N(6881),st=N(4859),It=N(2090),vt=N(1877);const we=new Map,_t={activated:!1,tokenObservers:[]},xe={initialized:!1,enabled:!1};function Ae(Fe){return we.get(Fe)||Object.assign({},_t)}function Le(){return xe}class Ee{constructor(Pe,Qe,wt,Nt,Sn){if(this.operation=Pe,this.retryPolicy=Qe,this.getWaitDuration=wt,this.lowerBound=Nt,this.upperBound=Sn,this.pending=null,this.nextErrorWaitInterval=Nt,Nt>Sn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Pe){var Qe=this;return(0,Ce.Z)(function*(){Qe.stop();try{Qe.pending=new It.BH,yield function ie(Fe){return new Promise(Pe=>{setTimeout(Pe,Fe)})}(Qe.getNextRun(Pe)),Qe.pending.resolve(),yield Qe.pending.promise,Qe.pending=new It.BH,yield Qe.operation(),Qe.pending.resolve(),yield Qe.pending.promise,Qe.process(!0).catch(()=>{})}catch(wt){Qe.retryPolicy(wt)?Qe.process(!1).catch(()=>{}):Qe.stop()}})()}getNextRun(Pe){if(Pe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Qe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Qe}}}const se=new It.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function We(Fe){if(!Ae(Fe).activated)throw se.create("use-before-activation",{appName:Fe.name})}function Gn(Fe,Pe){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,Ce.Z)(function*({url:Fe,body:Pe},Qe){const wt={"Content-Type":"application/json"},Nt=Qe.getImmediate({optional:!0});if(Nt){const kr=yield Nt.getHeartbeatsHeader();kr&&(wt["X-Firebase-Client"]=kr)}const Sn={method:"POST",body:JSON.stringify(Pe),headers:wt};let Jn,Qn;try{Jn=yield fetch(Fe,Sn)}catch(kr){throw se.create("fetch-network-error",{originalErrorMessage:kr?.message})}if(200!==Jn.status)throw se.create("fetch-status-error",{httpStatus:Jn.status});try{Qn=yield Jn.json()}catch(kr){throw se.create("fetch-parse-error",{originalErrorMessage:kr?.message})}const Ln=Qn.ttl.match(/^([\d.]+)(s)$/);if(!Ln||!Ln[2]||isNaN(Number(Ln[1])))throw se.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Qn.ttl}`});const $i=1e3*Number(Ln[1]),Ri=Date.now();return{token:Qn.token,expireTimeMillis:Ri+$i,issuedAtTimeMillis:Ri}})).apply(this,arguments)}function Ht(Fe,Pe){const{projectId:Qe,appId:wt,apiKey:Nt}=Fe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Qe}/apps/${wt}:exchangeDebugToken?key=${Nt}`,body:{debug_token:Pe}}}const ir="firebase-app-check-store";let Mn=null;function pn(){return Mn||(Mn=new Promise((Fe,Pe)=>{try{const Qe=indexedDB.open("firebase-app-check-database",1);Qe.onsuccess=wt=>{Fe(wt.target.result)},Qe.onerror=wt=>{var Nt;Pe(se.create("storage-open",{originalErrorMessage:null===(Nt=wt.target.error)||void 0===Nt?void 0:Nt.message}))},Qe.onupgradeneeded=wt=>{0===wt.oldVersion&&wt.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(Qe){Pe(se.create("storage-open",{originalErrorMessage:Qe?.message}))}}),Mn)}function cn(){return(cn=(0,Ce.Z)(function*(Fe,Pe){const wt=(yield pn()).transaction(ir,"readwrite"),Sn=wt.objectStore(ir).put({compositeKey:Fe,value:Pe});return new Promise((Jn,Qn)=>{Sn.onsuccess=Ln=>{Jn()},wt.onerror=Ln=>{var $i;Qn(se.create("storage-set",{originalErrorMessage:null===($i=Ln.target.error)||void 0===$i?void 0:$i.message}))}})})).apply(this,arguments)}const pr=new vt.Yd("@firebase/app-check");function dn(Fe,Pe){return(0,It.hl)()?function jr(Fe,Pe){return function wn(Fe,Pe){return cn.apply(this,arguments)}(function Nn(Fe){return`${Fe.options.appId}-${Fe.name}`}(Fe),Pe)}(Fe,Pe).catch(Qe=>{pr.warn(`Failed to write token to IndexedDB. Error: ${Qe}`)}):Promise.resolve()}function Zr(){return Le().enabled}function xn(){return An.apply(this,arguments)}function An(){return(An=(0,Ce.Z)(function*(){const Fe=Le();if(Fe.enabled&&Fe.token)return Fe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const or={error:"UNKNOWN_ERROR"};function ur(Fe){return It.US.encodeString(JSON.stringify(Fe),!1)}function ht(Fe){return J.apply(this,arguments)}function J(){return(J=(0,Ce.Z)(function*(Fe,Pe=!1){const Qe=Fe.app;We(Qe);const wt=Ae(Qe);let Sn,Nt=wt.token;if(Nt&&!q(Nt)&&(wt.token=void 0,Nt=void 0),!Nt){const Ln=yield wt.cachedTokenPromise;Ln&&(q(Ln)?Nt=Ln:yield dn(Qe,void 0))}if(!Pe&&Nt&&q(Nt))return{token:Nt.token};let Qn,Jn=!1;if(Zr()){wt.exchangeTokenPromise||(wt.exchangeTokenPromise=Gn(Ht(Qe,yield xn()),Fe.heartbeatServiceProvider).finally(()=>{wt.exchangeTokenPromise=void 0}),Jn=!0);const Ln=yield wt.exchangeTokenPromise;return yield dn(Qe,Ln),wt.token=Ln,{token:Ln.token}}try{wt.exchangeTokenPromise||(wt.exchangeTokenPromise=wt.provider.getToken().finally(()=>{wt.exchangeTokenPromise=void 0}),Jn=!0),Nt=yield Ae(Qe).exchangeTokenPromise}catch(Ln){"appCheck/throttled"===Ln.code?pr.warn(Ln.message):pr.error(Ln),Sn=Ln}return Nt?Sn?Qn=q(Nt)?{token:Nt.token,internalError:Sn}:Re(Sn):(Qn={token:Nt.token},wt.token=Nt,yield dn(Qe,Nt)):Qn=Re(Sn),Jn&&Q(Qe,Qn),Qn})).apply(this,arguments)}function Xe(){return(Xe=(0,Ce.Z)(function*(Fe){const Pe=Fe.app;We(Pe);const{provider:Qe}=Ae(Pe);if(Zr()){const wt=yield xn(),{token:Nt}=yield Gn(Ht(Pe,wt),Fe.heartbeatServiceProvider);return{token:Nt}}{const{token:wt}=yield Qe.getToken();return{token:wt}}})).apply(this,arguments)}function ge(Fe,Pe){const Qe=Ae(Fe),wt=Qe.tokenObservers.filter(Nt=>Nt.next!==Pe);0===wt.length&&Qe.tokenRefresher&&Qe.tokenRefresher.isRunning()&&Qe.tokenRefresher.stop(),Qe.tokenObservers=wt}function ye(Fe){const{app:Pe}=Fe,Qe=Ae(Pe);let wt=Qe.tokenRefresher;wt||(wt=function ee(Fe){const{app:Pe}=Fe;return new Ee((0,Ce.Z)(function*(){let wt;if(wt=Ae(Pe).token?yield ht(Fe,!0):yield ht(Fe),wt.error)throw wt.error;if(wt.internalError)throw wt.internalError}),()=>!0,()=>{const Qe=Ae(Pe);if(Qe.token){let wt=Qe.token.issuedAtTimeMillis+.5*(Qe.token.expireTimeMillis-Qe.token.issuedAtTimeMillis)+3e5;return wt=Math.min(wt,Qe.token.expireTimeMillis-3e5),Math.max(0,wt-Date.now())}return 0},3e4,96e4)}(Fe),Qe.tokenRefresher=wt),!wt.isRunning()&&Qe.isTokenAutoRefreshEnabled&&wt.start()}function Q(Fe,Pe){const Qe=Ae(Fe).tokenObservers;for(const wt of Qe)try{"EXTERNAL"===wt.type&&null!=Pe.error?wt.error(Pe.error):wt.next(Pe)}catch{}}function q(Fe){return Fe.expireTimeMillis-Date.now()>0}function Re(Fe){return{token:ur(or),error:Fe}}class gt{constructor(Pe,Qe){this.app=Pe,this.heartbeatServiceProvider=Qe}_delete(){const{tokenObservers:Pe}=Ae(this.app);for(const Qe of Pe)ge(this.app,Qe.next);return Promise.resolve()}}const Bi="app-check-internal";!function Ii(){(0,ut._registerComponent)(new st.wA("app-check",Fe=>function kt(Fe,Pe){return new gt(Fe,Pe)}(Fe.getProvider("app").getImmediate(),Fe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Fe,Pe,Qe)=>{Fe.getProvider(Bi).initialize()})),(0,ut._registerComponent)(new st.wA(Bi,Fe=>function Qt(Fe){return{getToken:Pe=>ht(Fe,Pe),getLimitedUseToken:()=>function _e(Fe){return Xe.apply(this,arguments)}(Fe),addTokenListener:Pe=>function xt(Fe,Pe,Qe,wt){const{app:Nt}=Fe,Sn=Ae(Nt);if(Sn.tokenObservers=[...Sn.tokenObservers,{next:Qe,error:wt,type:Pe}],Sn.token&&q(Sn.token)){const Qn=Sn.token;Promise.resolve().then(()=>{Qe({token:Qn.token}),ye(Fe)}).catch(()=>{})}Sn.cachedTokenPromise.then(()=>ye(Fe))}(Fe,"INTERNAL",Pe),removeTokenListener:Pe=>ge(Fe.app,Pe)}}(Fe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ut.registerVersion)("@firebase/app-check","0.8.0")}();class gi{constructor(){return(0,d.vb)("app-check")}}typeof window<"u"&&window},1205:(Lt,ze,N)=>{N.d(ze,{zQ:()=>Ut,rT:()=>xe,f7:()=>Ze,L6:()=>we,_Q:()=>_t,lh:()=>Ae,Qv:()=>vt,nw:()=>Le});var d=N(4650),U=N(7579),j=N(9646),m=N(9751),de=N(8996),b=N(6451),ae=N(5363),A=N(3900),le=N(4004),ne=N(6063);class ue extends U.x{constructor(Ye=1/0,Je=1/0,Me=ne.l){super(),this._bufferSize=Ye,this._windowTime=Je,this._timestampProvider=Me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Je===1/0,this._bufferSize=Math.max(1,Ye),this._windowTime=Math.max(1,Je)}next(Ye){const{isStopped:Je,_buffer:Me,_infiniteTimeWindow:Ee,_timestampProvider:ie,_windowTime:z}=this;Je||(Me.push(Ye),!Ee&&Me.push(ie.now()+z)),this._trimBuffer(),super.next(Ye)}_subscribe(Ye){this._throwIfClosed(),this._trimBuffer();const Je=this._innerSubscribe(Ye),{_infiniteTimeWindow:Me,_buffer:Ee}=this,ie=Ee.slice();for(let z=0;z<ie.length&&!Ye.closed;z+=Me?1:2)Ye.next(ie[z]);return this._checkFinalizedStatuses(Ye),Je}_trimBuffer(){const{_bufferSize:Ye,_timestampProvider:Je,_buffer:Me,_infiniteTimeWindow:Ee}=this,ie=(Ee?1:2)*Ye;if(Ye<1/0&&ie<Me.length&&Me.splice(0,Me.length-ie),!Ee){const z=Je.now();let se=0;for(let pe=1;pe<Me.length&&Me[pe]<=z;pe+=2)se=pe;se&&Me.splice(0,se+1)}}}var Te=N(3099);function at(Oe,Ye,Je){let Me,Ee=!1;return Oe&&"object"==typeof Oe?({bufferSize:Me=1/0,windowTime:Ye=1/0,refCount:Ee=!1,scheduler:Je}=Oe):Me=Oe??1/0,(0,Te.B)({connector:()=>new ue(Me,Ye,Je),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ee})}var qe=N(590),Ke=N(576);function ot(Oe,Ye){return(0,Ke.m)(Ye)?(0,A.w)(()=>Oe,Ye):(0,A.w)(()=>Oe)}var je=N(9468),$e=N(9300),Et=N(4976),mt=N(2011),Ce=N(6895),ut=N(6217);N(9260);const vt=new d.OlP("angularfire2.auth.use-emulator"),we=new d.OlP("angularfire2.auth.settings"),_t=new d.OlP("angularfire2.auth.tenant-id"),xe=new d.OlP("angularfire2.auth.langugage-code"),Ae=new d.OlP("angularfire2.auth.use-device-language"),Ze=new d.OlP("angularfire.auth.persistence"),Le=(Oe,Ye,Je,Me,Ee,ie,z,se)=>(0,mt.cc)(`${Oe.name}.auth`,"AngularFireAuth",Oe.name,()=>{const pe=Ye.runOutsideAngular(()=>Oe.auth());if(Je&&pe.useEmulator(...Je),Me&&(pe.tenantId=Me),pe.languageCode=Ee,ie&&pe.useDeviceLanguage(),z)for(const[We,Ot]of Object.entries(z))pe.settings[We]=Ot;return se&&pe.setPersistence(se),pe},[Je,Me,Ee,ie,z,se]);let Ut=(()=>{class Oe{constructor(Je,Me,Ee,ie,z,se,pe,We,Ot,Xt,Gn,Kn){const kn=new U.x,On=(0,j.of)(void 0).pipe((0,ae.Q)(z.outsideAngular),(0,A.w)(()=>ie.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,9568)))),(0,le.U)(()=>(0,mt.on)(Je,ie,Me)),(0,le.U)(Ht=>Le(Ht,ie,se,We,Ot,Xt,pe,Gn)),at({bufferSize:1,refCount:!1}));if((0,Ce.PM)(Ee))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,j.of)(null);else{On.pipe((0,qe.P)()).subscribe();const En=On.pipe((0,A.w)(Pt=>Pt.getRedirectResult().then(Mn=>Mn,()=>null)),Et.iC,at({bufferSize:1,refCount:!1})),Yn=On.pipe((0,A.w)(Pt=>new m.y(Mn=>({unsubscribe:ie.runOutsideAngular(()=>Pt.onAuthStateChanged(pn=>Mn.next(pn),pn=>Mn.error(pn),()=>Mn.complete()))})))),ir=On.pipe((0,A.w)(Pt=>new m.y(Mn=>({unsubscribe:ie.runOutsideAngular(()=>Pt.onIdTokenChanged(pn=>Mn.next(pn),pn=>Mn.error(pn),()=>Mn.complete()))}))));this.authState=En.pipe(ot(Yn),(0,je.R)(z.outsideAngular),(0,ae.Q)(z.insideAngular)),this.user=En.pipe(ot(ir),(0,je.R)(z.outsideAngular),(0,ae.Q)(z.insideAngular)),this.idToken=this.user.pipe((0,A.w)(Pt=>Pt?(0,de.D)(Pt.getIdToken()):(0,j.of)(null))),this.idTokenResult=this.user.pipe((0,A.w)(Pt=>Pt?(0,de.D)(Pt.getIdTokenResult()):(0,j.of)(null))),this.credential=(0,b.T)(En,kn,this.authState.pipe((0,$e.h)(Pt=>!Pt))).pipe((0,le.U)(Pt=>Pt?.user?Pt:null),(0,je.R)(z.outsideAngular),(0,ae.Q)(z.insideAngular))}return(0,mt.pX)(this,On,ie,{spy:{apply:(Ht,En,Yn)=>{(Ht.startsWith("signIn")||Ht.startsWith("createUser"))&&Yn.then(ir=>kn.next(ir))}}})}}return Oe.\u0275fac=function(Je){return new(Je||Oe)(d.LFG(mt.Dh),d.LFG(mt.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Et.HU),d.LFG(vt,8),d.LFG(we,8),d.LFG(_t,8),d.LFG(xe,8),d.LFG(Ae,8),d.LFG(Ze,8),d.LFG(ut.nm,8))},Oe.\u0275prov=d.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"any"}),Oe})()},33:(Lt,ze,N)=>{N.d(ze,{ST:()=>or,yb:()=>ur});var d=N(4650),U=N(4986),j=N(9751),m=N(8996),de=N(9646),b=N(4976),ae=N(8675),A=N(4482),le=N(5403);function ne(){return(0,A.e)((ht,J)=>{let _e,Xe=!1;ht.subscribe((0,le.x)(J,xt=>{const ge=_e;_e=xt,Xe&&J.next([ge,xt]),Xe=!0}))})}var ue=N(4004),Te=N(5026),at=N(4671);function Ke(ht,J){return ht===J}var ot=N(9300),je=N(2011),$e=N(6895),mt=(N(9568),N(3942)),Ce=N(2810),ut=N(2090),st=N(4859);function we(ht,J){if(void 0===J)return{merge:!1};if(void 0!==J.mergeFields&&void 0!==J.merge)throw new Ce.WA("invalid-argument",`Invalid options passed to function ${ht}(): You cannot specify both "merge" and "mergeFields".`);return J}function _t(){if(typeof Uint8Array>"u")throw new Ce.WA("unimplemented","Uint8Arrays are not available in this environment.")}function xe(){if(!(0,Ce.Me)())throw new Ce.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ae{constructor(J){this._delegate=J}static fromBase64String(J){return xe(),new Ae(Ce.Jj.fromBase64String(J))}static fromUint8Array(J){return _t(),new Ae(Ce.Jj.fromUint8Array(J))}toBase64(){return xe(),this._delegate.toBase64()}toUint8Array(){return _t(),this._delegate.toUint8Array()}isEqual(J){return this._delegate.isEqual(J._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ze(ht){return function Le(ht,J){if("object"!=typeof ht||null===ht)return!1;const _e=ht;for(const Xe of J)if(Xe in _e&&"function"==typeof _e[Xe])return!0;return!1}(ht,["next","error","complete"])}class Ut{enableIndexedDbPersistence(J,_e){return(0,Ce.ST)(J._delegate,{forceOwnership:_e})}enableMultiTabIndexedDbPersistence(J){return(0,Ce.fH)(J._delegate)}clearIndexedDbPersistence(J){return(0,Ce.Fc)(J._delegate)}}class Ve{constructor(J,_e,Xe){this._delegate=_e,this._persistenceProvider=Xe,this.INTERNAL={delete:()=>this.terminate()},J instanceof Ce.l7||(this._appCompat=J)}get _databaseId(){return this._delegate._databaseId}settings(J){const _e=this._delegate._getSettings();!J.merge&&_e.host!==J.host&&(0,Ce.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),J.merge&&delete(J=Object.assign(Object.assign({},_e),J)).merge,this._delegate._setSettings(J)}useEmulator(J,_e,Xe={}){(0,Ce.at)(this._delegate,J,_e,Xe)}enableNetwork(){return(0,Ce.Ix)(this._delegate)}disableNetwork(){return(0,Ce.TF)(this._delegate)}enablePersistence(J){let _e=!1,Xe=!1;return J&&(_e=!!J.synchronizeTabs,Xe=!!J.experimentalForceOwningTab,(0,Ce.Wi)("synchronizeTabs",_e,"experimentalForceOwningTab",Xe)),_e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Xe)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Ce.Mx)(this._delegate)}onSnapshotsInSync(J){return(0,Ce.sc)(this._delegate,J)}get app(){if(!this._appCompat)throw new Ce.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(J){try{return new kn(this,(0,Ce.hJ)(this._delegate,J))}catch(_e){throw z(_e,"collection()","Firestore.collection()")}}doc(J){try{return new ie(this,(0,Ce.JU)(this._delegate,J))}catch(_e){throw z(_e,"doc()","Firestore.doc()")}}collectionGroup(J){try{return new Xt(this,(0,Ce.B$)(this._delegate,J))}catch(_e){throw z(_e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(J){return(0,Ce.i3)(this._delegate,_e=>J(new Je(this,_e)))}batch(){return(0,Ce.qY)(this._delegate),new Me(new Ce.PU(this._delegate,J=>(0,Ce.GL)(this._delegate,J)))}loadBundle(J){return(0,Ce.Pb)(this._delegate,J)}namedQuery(J){return(0,Ce.L$)(this._delegate,J).then(_e=>_e?new Xt(this,_e):null)}}class Oe extends Ce.u7{constructor(J){super(),this.firestore=J}convertBytes(J){return new Ae(new Ce.Jj(J))}convertReference(J){const _e=this.convertDocumentKey(J,this.firestore._databaseId);return ie.forKey(_e,this.firestore,null)}}class Je{constructor(J,_e){this._firestore=J,this._delegate=_e,this._userDataWriter=new Oe(J)}get(J){const _e=On(J);return this._delegate.get(_e).then(Xe=>new We(this._firestore,new Ce.xU(this._firestore._delegate,this._userDataWriter,Xe._key,Xe._document,Xe.metadata,_e.converter)))}set(J,_e,Xe){const xt=On(J);return Xe?(we("Transaction.set",Xe),this._delegate.set(xt,_e,Xe)):this._delegate.set(xt,_e),this}update(J,_e,Xe,...xt){const ge=On(J);return 2===arguments.length?this._delegate.update(ge,_e):this._delegate.update(ge,_e,Xe,...xt),this}delete(J){const _e=On(J);return this._delegate.delete(_e),this}}class Me{constructor(J){this._delegate=J}set(J,_e,Xe){const xt=On(J);return Xe?(we("WriteBatch.set",Xe),this._delegate.set(xt,_e,Xe)):this._delegate.set(xt,_e),this}update(J,_e,Xe,...xt){const ge=On(J);return 2===arguments.length?this._delegate.update(ge,_e):this._delegate.update(ge,_e,Xe,...xt),this}delete(J){const _e=On(J);return this._delegate.delete(_e),this}commit(){return this._delegate.commit()}}class Ee{constructor(J,_e,Xe){this._firestore=J,this._userDataWriter=_e,this._delegate=Xe}fromFirestore(J,_e){const Xe=new Ce.$q(this._firestore._delegate,this._userDataWriter,J._key,J._document,J.metadata,null);return this._delegate.fromFirestore(new Ot(this._firestore,Xe),_e??{})}toFirestore(J,_e){return _e?this._delegate.toFirestore(J,_e):this._delegate.toFirestore(J)}static getInstance(J,_e){const Xe=Ee.INSTANCES;let xt=Xe.get(J);xt||(xt=new WeakMap,Xe.set(J,xt));let ge=xt.get(_e);return ge||(ge=new Ee(J,new Oe(J),_e),xt.set(_e,ge)),ge}}Ee.INSTANCES=new WeakMap;class ie{constructor(J,_e){this.firestore=J,this._delegate=_e,this._userDataWriter=new Oe(J)}static forPath(J,_e,Xe){if(J.length%2!=0)throw new Ce.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${J.canonicalString()} has ${J.length}`);return new ie(_e,new Ce.my(_e._delegate,Xe,new Ce.Ky(J)))}static forKey(J,_e,Xe){return new ie(_e,new Ce.my(_e._delegate,Xe,J))}get id(){return this._delegate.id}get parent(){return new kn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(J){try{return new kn(this.firestore,(0,Ce.hJ)(this._delegate,J))}catch(_e){throw z(_e,"collection()","DocumentReference.collection()")}}isEqual(J){return(J=(0,ut.m9)(J))instanceof Ce.my&&(0,Ce.Eo)(this._delegate,J)}set(J,_e){_e=we("DocumentReference.set",_e);try{return _e?(0,Ce.pl)(this._delegate,J,_e):(0,Ce.pl)(this._delegate,J)}catch(Xe){throw z(Xe,"setDoc()","DocumentReference.set()")}}update(J,_e,...Xe){try{return 1===arguments.length?(0,Ce.r7)(this._delegate,J):(0,Ce.r7)(this._delegate,J,_e,...Xe)}catch(xt){throw z(xt,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Ce.oe)(this._delegate)}onSnapshot(...J){const _e=se(J),Xe=pe(J,xt=>new We(this.firestore,new Ce.xU(this.firestore._delegate,this._userDataWriter,xt._key,xt._document,xt.metadata,this._delegate.converter)));return(0,Ce.cf)(this._delegate,_e,Xe)}get(J){let _e;return _e="cache"===J?.source?(0,Ce.kl)(this._delegate):"server"===J?.source?(0,Ce.Xk)(this._delegate):(0,Ce.QT)(this._delegate),_e.then(Xe=>new We(this.firestore,new Ce.xU(this.firestore._delegate,this._userDataWriter,Xe._key,Xe._document,Xe.metadata,this._delegate.converter)))}withConverter(J){return new ie(this.firestore,this._delegate.withConverter(J?Ee.getInstance(this.firestore,J):null))}}function z(ht,J,_e){return ht.message=ht.message.replace(J,_e),ht}function se(ht){for(const J of ht)if("object"==typeof J&&!Ze(J))return J;return{}}function pe(ht,J){var _e,Xe;let xt;return xt=Ze(ht[0])?ht[0]:Ze(ht[1])?ht[1]:"function"==typeof ht[0]?{next:ht[0],error:ht[1],complete:ht[2]}:{next:ht[1],error:ht[2],complete:ht[3]},{next:ge=>{xt.next&&xt.next(J(ge))},error:null===(_e=xt.error)||void 0===_e?void 0:_e.bind(xt),complete:null===(Xe=xt.complete)||void 0===Xe?void 0:Xe.bind(xt)}}class We{constructor(J,_e){this._firestore=J,this._delegate=_e}get ref(){return new ie(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(J){return this._delegate.data(J)}get(J,_e){return this._delegate.get(J,_e)}isEqual(J){return(0,Ce.qK)(this._delegate,J._delegate)}}class Ot extends We{data(J){const _e=this._delegate.data(J);return(0,Ce.K9)(void 0!==_e,"Document in a QueryDocumentSnapshot should exist"),_e}}class Xt{constructor(J,_e){this.firestore=J,this._delegate=_e,this._userDataWriter=new Oe(J)}where(J,_e,Xe){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.ar)(J,_e,Xe)))}catch(xt){throw z(xt,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(J,_e){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.Xo)(J,_e)))}catch(Xe){throw z(Xe,/(orderBy|where)\(\)/,"Query.$1()")}}limit(J){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.b9)(J)))}catch(_e){throw z(_e,"limit()","Query.limit()")}}limitToLast(J){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.vh)(J)))}catch(_e){throw z(_e,"limitToLast()","Query.limitToLast()")}}startAt(...J){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.e0)(...J)))}catch(_e){throw z(_e,"startAt()","Query.startAt()")}}startAfter(...J){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.TQ)(...J)))}catch(_e){throw z(_e,"startAfter()","Query.startAfter()")}}endBefore(...J){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.Lx)(...J)))}catch(_e){throw z(_e,"endBefore()","Query.endBefore()")}}endAt(...J){try{return new Xt(this.firestore,(0,Ce.IO)(this._delegate,(0,Ce.Wu)(...J)))}catch(_e){throw z(_e,"endAt()","Query.endAt()")}}isEqual(J){return(0,Ce.iE)(this._delegate,J._delegate)}get(J){let _e;return _e="cache"===J?.source?(0,Ce.UQ)(this._delegate):"server"===J?.source?(0,Ce.zN)(this._delegate):(0,Ce.PL)(this._delegate),_e.then(Xe=>new Kn(this.firestore,new Ce.W(this.firestore._delegate,this._userDataWriter,this._delegate,Xe._snapshot)))}onSnapshot(...J){const _e=se(J),Xe=pe(J,xt=>new Kn(this.firestore,new Ce.W(this.firestore._delegate,this._userDataWriter,this._delegate,xt._snapshot)));return(0,Ce.cf)(this._delegate,_e,Xe)}withConverter(J){return new Xt(this.firestore,this._delegate.withConverter(J?Ee.getInstance(this.firestore,J):null))}}class Gn{constructor(J,_e){this._firestore=J,this._delegate=_e}get type(){return this._delegate.type}get doc(){return new Ot(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kn{constructor(J,_e){this._firestore=J,this._delegate=_e}get query(){return new Xt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(J=>new Ot(this._firestore,J))}docChanges(J){return this._delegate.docChanges(J).map(_e=>new Gn(this._firestore,_e))}forEach(J,_e){this._delegate.forEach(Xe=>{J.call(_e,new Ot(this._firestore,Xe))})}isEqual(J){return(0,Ce.qK)(this._delegate,J._delegate)}}class kn extends Xt{constructor(J,_e){super(J,_e),this.firestore=J,this._delegate=_e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const J=this._delegate.parent;return J?new ie(this.firestore,J):null}doc(J){try{return new ie(this.firestore,void 0===J?(0,Ce.JU)(this._delegate):(0,Ce.JU)(this._delegate,J))}catch(_e){throw z(_e,"doc()","CollectionReference.doc()")}}add(J){return(0,Ce.ET)(this._delegate,J).then(_e=>new ie(this.firestore,_e))}isEqual(J){return(0,Ce.Eo)(this._delegate,J._delegate)}withConverter(J){return new kn(this.firestore,this._delegate.withConverter(J?Ee.getInstance(this.firestore,J):null))}}function On(ht){return(0,Ce.Cf)(ht,Ce.my)}class Ht{constructor(...J){this._delegate=new Ce.Lz(...J)}static documentId(){return new Ht(Ce.Xb.keyField().canonicalString())}isEqual(J){return(J=(0,ut.m9)(J))instanceof Ce.Lz&&this._delegate._internalPath.isEqual(J._internalPath)}}class En{constructor(J){this._delegate=J}static serverTimestamp(){const J=(0,Ce.Bt)();return J._methodName="FieldValue.serverTimestamp",new En(J)}static delete(){const J=(0,Ce.AK)();return J._methodName="FieldValue.delete",new En(J)}static arrayUnion(...J){const _e=(0,Ce.vr)(...J);return _e._methodName="FieldValue.arrayUnion",new En(_e)}static arrayRemove(...J){const _e=(0,Ce.Ab)(...J);return _e._methodName="FieldValue.arrayRemove",new En(_e)}static increment(J){const _e=(0,Ce.nP)(J);return _e._methodName="FieldValue.increment",new En(_e)}isEqual(J){return this._delegate.isEqual(J._delegate)}}const Yn={Firestore:Ve,GeoPoint:Ce.F8,Timestamp:Ce.EK,Blob:Ae,Transaction:Je,WriteBatch:Me,DocumentReference:ie,DocumentSnapshot:We,Query:Xt,QueryDocumentSnapshot:Ot,QuerySnapshot:Kn,CollectionReference:kn,FieldPath:Ht,FieldValue:En,setLogLevel:function Ye(ht){(0,Ce.Ub)(ht)},CACHE_SIZE_UNLIMITED:Ce.IX};!function Pt(ht){(function ir(ht,J){ht.INTERNAL.registerComponent(new st.wA("firestore-compat",_e=>{const Xe=_e.getProvider("app-compat").getImmediate(),xt=_e.getProvider("firestore").getImmediate();return J(Xe,xt)},"PUBLIC").setServiceProps(Object.assign({},Yn)))})(ht,(J,_e)=>new Ve(J,_e,new Ut)),ht.registerVersion("@firebase/firestore-compat","0.3.12")}(mt.Z);var Mn=N(1205),pn=N(6217),tr=N(9260);function $r(ht,J){return function jr(ht,J=U.z){return new j.y(_e=>{let Xe;return null!=J?J.schedule(()=>{Xe=ht.onSnapshot({includeMetadataChanges:!0},_e)}):Xe=ht.onSnapshot({includeMetadataChanges:!0},_e),()=>{Xe?.()}})}(ht,J)}function wn(ht,J){return $r(ht,J).pipe((0,ue.U)(_e=>({payload:_e,type:"query"})))}function cn(ht,J){return wn(ht,J).pipe((0,ae.O)(void 0),ne(),(0,ue.U)(([_e,Xe])=>{const xt=Xe.payload.docChanges(),ge=xt.map(ye=>({type:ye.type,payload:ye}));return _e&&JSON.stringify(_e.payload.metadata)!==JSON.stringify(Xe.payload.metadata)&&Xe.payload.docs.forEach((ye,ee)=>{const Q=xt.find(Re=>Re.doc.ref.isEqual(ye.ref)),q=_e?.payload.docs.find(Re=>Re.ref.isEqual(ye.ref));Q&&JSON.stringify(Q.doc.metadata)===JSON.stringify(ye.metadata)||!Q&&q&&JSON.stringify(q.metadata)===JSON.stringify(ye.metadata)||ge.push({type:"modified",payload:{oldIndex:ee,newIndex:ee,type:"modified",doc:ye}})}),ge}))}function Wt(ht,J,_e){return cn(ht,_e).pipe((0,Te.R)((Xe,xt)=>function tn(ht,J,_e){return J.forEach(Xe=>{_e.indexOf(Xe.type)>-1&&(ht=function pr(ht,J){switch(J.type){case"added":if(!ht[J.newIndex]||!ht[J.newIndex].doc.ref.isEqual(J.doc.ref))return Nn(ht,J.newIndex,0,J);break;case"modified":if(null==ht[J.oldIndex]||ht[J.oldIndex].doc.ref.isEqual(J.doc.ref)){if(J.oldIndex!==J.newIndex){const _e=ht.slice();return _e.splice(J.oldIndex,1),_e.splice(J.newIndex,0,J),_e}return Nn(ht,J.newIndex,1,J)}break;case"removed":if(ht[J.oldIndex]&&ht[J.oldIndex].doc.ref.isEqual(J.doc.ref))return Nn(ht,J.oldIndex,1)}return ht}(ht,Xe))}),ht}(Xe,xt.map(ge=>ge.payload),J),[]),function qe(ht,J=at.y){return ht=ht??Ke,(0,A.e)((_e,Xe)=>{let xt,ge=!0;_e.subscribe((0,le.x)(Xe,ye=>{const ee=J(ye);(ge||!ht(xt,ee))&&(ge=!1,xt=ee,Xe.next(ye))}))})}(),(0,ue.U)(Xe=>Xe.map(xt=>({type:xt.type,payload:xt}))))}function Nn(ht,J,_e,...Xe){const xt=ht.slice();return xt.splice(J,_e,...Xe),xt}function sr(ht){return(!ht||0===ht.length)&&(ht=["added","removed","modified"]),ht}class gr{constructor(J,_e,Xe){this.ref=J,this.query=_e,this.afs=Xe}stateChanges(J){let _e=cn(this.query,this.afs.schedulers.outsideAngular);return J&&J.length>0&&(_e=_e.pipe((0,ue.U)(Xe=>Xe.filter(xt=>J.indexOf(xt.type)>-1)))),_e.pipe((0,ae.O)(void 0),ne(),(0,ot.h)(([Xe,xt])=>xt.length>0||!Xe),(0,ue.U)(([Xe,xt])=>xt),b.iC)}auditTrail(J){return this.stateChanges(J).pipe((0,Te.R)((_e,Xe)=>[..._e,...Xe],[]))}snapshotChanges(J){const _e=sr(J);return Wt(this.query,_e,this.afs.schedulers.outsideAngular).pipe(b.iC)}valueChanges(J={}){return wn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(_e=>_e.payload.docs.map(Xe=>J.idField?Object.assign(Object.assign({},Xe.data()),{[J.idField]:Xe.id}):Xe.data())),b.iC)}get(J){return(0,m.D)(this.query.get(J)).pipe(b.iC)}add(J){return this.ref.add(J)}doc(J){return new dn(this.ref.doc(J),this.afs)}}class dn{constructor(J,_e){this.ref=J,this.afs=_e}set(J,_e){return this.ref.set(J,_e)}update(J){return this.ref.update(J)}delete(){return this.ref.delete()}collection(J,_e){const Xe=this.ref.collection(J),{ref:xt,query:ge}=Vt(Xe,_e);return new gr(xt,ge,this.afs)}snapshotChanges(){return function fr(ht,J){return $r(ht,J).pipe((0,ae.O)(void 0),ne(),(0,ue.U)(([_e,Xe])=>Xe.exists?_e?.exists?{payload:Xe,type:"modified"}:{payload:Xe,type:"added"}:{payload:Xe,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(b.iC)}valueChanges(J={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:_e})=>J.idField?Object.assign(Object.assign({},_e.data()),{[J.idField]:_e.id}):_e.data()))}get(J){return(0,m.D)(this.ref.get(J)).pipe(b.iC)}}class yr{constructor(J,_e){this.query=J,this.afs=_e}stateChanges(J){return J&&0!==J.length?cn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(_e=>_e.filter(Xe=>J.indexOf(Xe.type)>-1)),(0,ot.h)(_e=>_e.length>0),b.iC):cn(this.query,this.afs.schedulers.outsideAngular).pipe(b.iC)}auditTrail(J){return this.stateChanges(J).pipe((0,Te.R)((_e,Xe)=>[..._e,...Xe],[]))}snapshotChanges(J){const _e=sr(J);return Wt(this.query,_e,this.afs.schedulers.outsideAngular).pipe(b.iC)}valueChanges(J={}){return wn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(Xe=>Xe.payload.docs.map(xt=>J.idField?Object.assign({[J.idField]:xt.id},xt.data()):xt.data())),b.iC)}get(J){return(0,m.D)(this.query.get(J)).pipe(b.iC)}}const In=new d.OlP("angularfire2.enableFirestorePersistence"),Zr=new d.OlP("angularfire2.firestore.persistenceSettings"),xn=new d.OlP("angularfire2.firestore.settings"),An=new d.OlP("angularfire2.firestore.use-emulator");function Vt(ht,J=(_e=>_e)){return{query:J(ht),ref:ht}}let or=(()=>{class ht{constructor(_e,Xe,xt,ge,ye,ee,Q,q,Re,gt,kt,Qt,he,me,oe,Ue,nt){this.schedulers=Q;const Ft=(0,je.on)(_e,ee,Xe),sn=Re;gt&&(0,Mn.nw)(Ft,ee,kt,he,me,oe,Qt,Ue),[this.firestore,this.persistenceEnabled$]=(0,je.cc)(`${Ft.name}.firestore`,"AngularFirestore",Ft.name,()=>{const He=ee.runOutsideAngular(()=>Ft.firestore());if(ge&&He.settings(ge),sn&&He.useEmulator(...sn),xt&&!(0,$e.PM)(ye)){const Ge=()=>{try{return(0,m.D)(He.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(bt){return typeof console<"u"&&console.warn(bt),(0,de.of)(!1)}};return[He,ee.runOutsideAngular(Ge)]}return[He,(0,de.of)(!1)]},[ge,sn,xt])}collection(_e,Xe){let xt;xt="string"==typeof _e?this.firestore.collection(_e):_e;const{ref:ge,query:ye}=Vt(xt,Xe),ee=this.schedulers.ngZone.run(()=>ge);return new gr(ee,ye,this)}collectionGroup(_e,Xe){const xt=Xe||(ye=>ye),ge=this.firestore.collectionGroup(_e);return new yr(xt(ge),this)}doc(_e){let Xe;Xe="string"==typeof _e?this.firestore.doc(_e):_e;const xt=this.schedulers.ngZone.run(()=>Xe);return new dn(xt,this)}createId(){return this.firestore.collection("_").doc().id}}return ht.\u0275fac=function(_e){return new(_e||ht)(d.LFG(je.Dh),d.LFG(je.xv,8),d.LFG(In,8),d.LFG(xn,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(b.HU),d.LFG(Zr,8),d.LFG(An,8),d.LFG(Mn.zQ,8),d.LFG(Mn.Qv,8),d.LFG(Mn.L6,8),d.LFG(Mn._Q,8),d.LFG(Mn.rT,8),d.LFG(Mn.lh,8),d.LFG(Mn.f7,8),d.LFG(pn.nm,8))},ht.\u0275prov=d.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"any"}),ht})(),ur=(()=>{class ht{constructor(){tr.Z.registerVersion("angularfire",b.q4.full,"fst-compat")}static enablePersistence(_e){return{ngModule:ht,providers:[{provide:In,useValue:!0},{provide:Zr,useValue:_e}]}}}return ht.\u0275fac=function(_e){return new(_e||ht)},ht.\u0275mod=d.oAB({type:ht}),ht.\u0275inj=d.cJS({providers:[or]}),ht})()},2011:(Lt,ze,N)=>{N.d(ze,{Dh:()=>A,GT:()=>b,cc:()=>qe,hO:()=>at,on:()=>ne,pX:()=>de,xv:()=>le});var d=N(4650),U=N(9260),j=N(4976);Lt=N.hmd(Lt);const m=["ngOnDestroy"],de=($e,Et,mt,Ce={})=>new Proxy($e,{get:(ut,st)=>mt.runOutsideAngular(()=>{var It;if($e[st])return!(null===(It=Ce?.spy)||void 0===It)&&It.get&&Ce.spy.get(st,$e[st]),$e[st];if(m.indexOf(st)>-1)return()=>{};const vt=Et.toPromise().then(we=>{const _t=we&&we[st];return"function"==typeof _t?_t.bind(we):_t&&_t.then?_t.then(xe=>mt.run(()=>xe)):mt.run(()=>_t)});return new Proxy(()=>{},{get:(we,_t)=>vt[_t],apply:(we,_t,xe)=>vt.then(Ae=>{var Ze;const Le=Ae&&Ae(...xe);return!(null===(Ze=Ce?.spy)||void 0===Ze)&&Ze.apply&&Ce.spy.apply(st,xe,Le),Le})})})}),b=($e,Et)=>{Et.forEach(mt=>{Object.getOwnPropertyNames(mt.prototype||mt).forEach(Ce=>{Object.defineProperty($e.prototype,Ce,Object.getOwnPropertyDescriptor(mt.prototype||mt,Ce))})})};class ae{constructor(Et){return Et}}const A=new d.OlP("angularfire2.app.options"),le=new d.OlP("angularfire2.app.name");function ne($e,Et,mt){const ut="object"==typeof mt&&mt||{};ut.name=ut.name||"string"==typeof mt&&mt||"[DEFAULT]";const It=U.Z.apps.filter(vt=>vt&&vt.name===ut.name)[0]||Et.runOutsideAngular(()=>U.Z.initializeApp($e,ut));try{JSON.stringify($e)!==JSON.stringify(It.options)&&ue("error",`${It.name} Firebase App already initialized with different options${Lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(It)}const ue=($e,...Et)=>{(0,d.X6Q)()&&typeof console<"u"&&console[$e](...Et)},Te={provide:ae,useFactory:ne,deps:[A,d.R0b,[new d.FiY,le]]};let at=(()=>{class $e{constructor(mt){U.Z.registerVersion("angularfire",j.q4.full,"core"),U.Z.registerVersion("angularfire",j.q4.full,"app-compat"),U.Z.registerVersion("angular",d.q4F.full,mt.toString())}static initializeApp(mt,Ce){return{ngModule:$e,providers:[{provide:A,useValue:mt},{provide:le,useValue:Ce}]}}}return $e.\u0275fac=function(mt){return new(mt||$e)(d.LFG(d.Lbi))},$e.\u0275mod=d.oAB({type:$e}),$e.\u0275inj=d.cJS({providers:[Te]}),$e})();function qe($e,Et,mt,Ce,ut){const[,st,It]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===$e)||[];if(st)return function Ke($e,Et){try{return $e.toString()===Et.toString()}catch{return $e===Et}}(ut,It)||(je("error",`${Et} was already initialized on the ${mt} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),je("warn",{is:ut,was:It})),st;{const vt=Ce();return globalThis.\u0275AngularfireInstanceCache.push([$e,vt,ut]),vt}}const ot=!!Lt.hot,je=($e,...Et)=>{(0,d.X6Q)()&&typeof console<"u"&&console[$e](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Lt,ze,N)=>{N.d(ze,{q4:()=>ka,iC:()=>ll,HU:()=>td,vb:()=>pu,JM:()=>al});var d=N(4650),U=N(259),j=N(5861),m=N(6881),de=N(2090),b=N(4859),ae=N(1877);let le,ne;const at=new WeakMap,qe=new WeakMap,Ke=new WeakMap,ot=new WeakMap,je=new WeakMap;let mt={get(E,x,G){if(E instanceof IDBTransaction){if("done"===x)return qe.get(E);if("objectStoreNames"===x)return E.objectStoreNames||Ke.get(E);if("store"===x)return G.objectStoreNames[1]?void 0:G.objectStore(G.objectStoreNames[0])}return It(E[x])},set:(E,x,G)=>(E[x]=G,!0),has:(E,x)=>E instanceof IDBTransaction&&("done"===x||"store"===x)||x in E};function st(E){return"function"==typeof E?function ut(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...x){return E.apply(vt(this),x),It(at.get(this))}:function(...x){return It(E.apply(vt(this),x))}:function(x,...G){const ce=E.call(vt(this),x,...G);return Ke.set(ce,x.sort?x.sort():[x]),It(ce)}}(E):(E instanceof IDBTransaction&&function Et(E){if(qe.has(E))return;const x=new Promise((G,ce)=>{const be=()=>{E.removeEventListener("complete",ke),E.removeEventListener("error",pt),E.removeEventListener("abort",pt)},ke=()=>{G(),be()},pt=()=>{ce(E.error||new DOMException("AbortError","AbortError")),be()};E.addEventListener("complete",ke),E.addEventListener("error",pt),E.addEventListener("abort",pt)});qe.set(E,x)}(E),((E,x)=>x.some(G=>E instanceof G))(E,function ue(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,mt):E)}function It(E){if(E instanceof IDBRequest)return function $e(E){const x=new Promise((G,ce)=>{const be=()=>{E.removeEventListener("success",ke),E.removeEventListener("error",pt)},ke=()=>{G(It(E.result)),be()},pt=()=>{ce(E.error),be()};E.addEventListener("success",ke),E.addEventListener("error",pt)});return x.then(G=>{G instanceof IDBCursor&&at.set(G,E)}).catch(()=>{}),je.set(x,E),x}(E);if(ot.has(E))return ot.get(E);const x=st(E);return x!==E&&(ot.set(E,x),je.set(x,E)),x}const vt=E=>je.get(E),xe=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Ze=new Map;function Le(E,x){if(!(E instanceof IDBDatabase)||x in E||"string"!=typeof x)return;if(Ze.get(x))return Ze.get(x);const G=x.replace(/FromIndex$/,""),ce=x!==G,be=Ae.includes(G);if(!(G in(ce?IDBIndex:IDBObjectStore).prototype)||!be&&!xe.includes(G))return;const ke=function(){var pt=(0,j.Z)(function*(Kt,...Zt){const gn=this.transaction(Kt,be?"readwrite":"readonly");let vn=gn.store;return ce&&(vn=vn.index(Zt.shift())),(yield Promise.all([vn[G](...Zt),be&&gn.done]))[0]});return function(Zt){return pt.apply(this,arguments)}}();return Ze.set(x,ke),ke}!function Ce(E){mt=E(mt)}(E=>({...E,get:(x,G,ce)=>Le(x,G)||E.get(x,G,ce),has:(x,G)=>!!Le(x,G)||E.has(x,G)}));const Ut="@firebase/installations",Ye="w:0.6.4",Je="FIS_v2",pe=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(E){return E instanceof de.ZR&&E.code.includes("request-failed")}function Ot({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function Xt(E){return{token:E.token,requestStatus:2,expiresIn:Yn(E.expiresIn),creationTime:Date.now()}}function Gn(E,x){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,j.Z)(function*(E,x){const ce=(yield x.json()).error;return pe.create("request-failed",{requestName:E,serverCode:ce.code,serverMessage:ce.message,serverStatus:ce.status})})).apply(this,arguments)}function kn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function On(E,{refreshToken:x}){const G=kn(E);return G.append("Authorization",function ir(E){return`${Je} ${E}`}(x)),G}function Ht(E){return En.apply(this,arguments)}function En(){return(En=(0,j.Z)(function*(E){const x=yield E();return x.status>=500&&x.status<600?E():x})).apply(this,arguments)}function Yn(E){return Number(E.replace("s","000"))}function Pt(E,x){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,j.Z)(function*({appConfig:E,heartbeatServiceProvider:x},{fid:G}){const ce=Ot(E),be=kn(E),ke=x.getImmediate({optional:!0});if(ke){const gn=yield ke.getHeartbeatsHeader();gn&&be.append("x-firebase-client",gn)}const Kt={method:"POST",headers:be,body:JSON.stringify({fid:G,authVersion:Je,appId:E.appId,sdkVersion:Ye})},Zt=yield Ht(()=>fetch(ce,Kt));if(Zt.ok){const gn=yield Zt.json();return{fid:gn.fid||G,registrationStatus:2,refreshToken:gn.refreshToken,authToken:Xt(gn.authToken)}}throw yield Gn("Create Installation",Zt)})).apply(this,arguments)}function pn(E){return new Promise(x=>{setTimeout(x,E)})}const jr=/^[cdef][\w-]{21}$/;function fr(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const G=function wn(E){return function tr(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return jr.test(G)?G:""}catch{return""}}function cn(E){return`${E.appName}!${E.appId}`}const Wt=new Map;function tn(E,x){const G=cn(E);sr(G,x),function gr(E,x){const G=function yr(){return!dn&&"BroadcastChannel"in self&&(dn=new BroadcastChannel("[Firebase] FID Change"),dn.onmessage=E=>{sr(E.data.key,E.data.fid)}),dn}();G&&G.postMessage({key:E,fid:x}),function In(){0===Wt.size&&dn&&(dn.close(),dn=null)}()}(G,x)}function sr(E,x){const G=Wt.get(E);if(G)for(const ce of G)ce(x)}let dn=null;const An="firebase-installations-store";let Vt=null;function or(){return Vt||(Vt=function we(E,x,{blocked:G,upgrade:ce,blocking:be,terminated:ke}={}){const pt=indexedDB.open(E,x),Kt=It(pt);return ce&&pt.addEventListener("upgradeneeded",Zt=>{ce(It(pt.result),Zt.oldVersion,Zt.newVersion,It(pt.transaction))}),G&&pt.addEventListener("blocked",()=>G()),Kt.then(Zt=>{ke&&Zt.addEventListener("close",()=>ke()),be&&Zt.addEventListener("versionchange",()=>be())}).catch(()=>{}),Kt}("firebase-installations-database",1,{upgrade:(E,x)=>{0===x&&E.createObjectStore(An)}})),Vt}function ur(E,x){return ht.apply(this,arguments)}function ht(){return(ht=(0,j.Z)(function*(E,x){const G=cn(E),be=(yield or()).transaction(An,"readwrite"),ke=be.objectStore(An),pt=yield ke.get(G);return yield ke.put(x,G),yield be.done,(!pt||pt.fid!==x.fid)&&tn(E,x.fid),x})).apply(this,arguments)}function J(E){return _e.apply(this,arguments)}function _e(){return(_e=(0,j.Z)(function*(E){const x=cn(E),ce=(yield or()).transaction(An,"readwrite");yield ce.objectStore(An).delete(x),yield ce.done})).apply(this,arguments)}function Xe(E,x){return xt.apply(this,arguments)}function xt(){return(xt=(0,j.Z)(function*(E,x){const G=cn(E),be=(yield or()).transaction(An,"readwrite"),ke=be.objectStore(An),pt=yield ke.get(G),Kt=x(pt);return void 0===Kt?yield ke.delete(G):yield ke.put(Kt,G),yield be.done,Kt&&(!pt||pt.fid!==Kt.fid)&&tn(E,Kt.fid),Kt})).apply(this,arguments)}function ge(E){return ye.apply(this,arguments)}function ye(){return(ye=(0,j.Z)(function*(E){let x;const G=yield Xe(E.appConfig,ce=>{const be=ee(ce),ke=Q(E,be);return x=ke.registrationPromise,ke.installationEntry});return""===G.fid?{installationEntry:yield x}:{installationEntry:G,registrationPromise:x}})).apply(this,arguments)}function ee(E){return he(E||{fid:fr(),registrationStatus:0})}function Q(E,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(pe.create("app-offline"))};const G={fid:x.fid,registrationStatus:1,registrationTime:Date.now()},ce=function q(E,x){return Re.apply(this,arguments)}(E,G);return{installationEntry:G,registrationPromise:ce}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:gt(E)}:{installationEntry:x}}function Re(){return(Re=(0,j.Z)(function*(E,x){try{const G=yield Pt(E,x);return ur(E.appConfig,G)}catch(G){throw We(G)&&409===G.customData.serverCode?yield J(E.appConfig):yield ur(E.appConfig,{fid:x.fid,registrationStatus:0}),G}})).apply(this,arguments)}function gt(E){return kt.apply(this,arguments)}function kt(){return(kt=(0,j.Z)(function*(E){let x=yield Qt(E.appConfig);for(;1===x.registrationStatus;)yield pn(100),x=yield Qt(E.appConfig);if(0===x.registrationStatus){const{installationEntry:G,registrationPromise:ce}=yield ge(E);return ce||G}return x})).apply(this,arguments)}function Qt(E){return Xe(E,x=>{if(!x)throw pe.create("installation-not-found");return he(x)})}function he(E){return function me(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function oe(E,x){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,j.Z)(function*({appConfig:E,heartbeatServiceProvider:x},G){const ce=nt(E,G),be=On(E,G),ke=x.getImmediate({optional:!0});if(ke){const gn=yield ke.getHeartbeatsHeader();gn&&be.append("x-firebase-client",gn)}const Kt={method:"POST",headers:be,body:JSON.stringify({installation:{sdkVersion:Ye,appId:E.appId}})},Zt=yield Ht(()=>fetch(ce,Kt));if(Zt.ok)return Xt(yield Zt.json());throw yield Gn("Generate Auth Token",Zt)})).apply(this,arguments)}function nt(E,{fid:x}){return`${Ot(E)}/${x}/authTokens:generate`}function Ft(E){return sn.apply(this,arguments)}function sn(){return(sn=(0,j.Z)(function*(E,x=!1){let G;const ce=yield Xe(E.appConfig,ke=>{if(!_n(ke))throw pe.create("not-registered");const pt=ke.authToken;if(!x&&Fn(pt))return ke;if(1===pt.requestStatus)return G=He(E,x),ke;{if(!navigator.onLine)throw pe.create("app-offline");const Kt=Rn(ke);return G=Dt(E,Kt),Kt}});return G?yield G:ce.authToken})).apply(this,arguments)}function He(E,x){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,j.Z)(function*(E,x){let G=yield bt(E.appConfig);for(;1===G.authToken.requestStatus;)yield pn(100),G=yield bt(E.appConfig);const ce=G.authToken;return 0===ce.requestStatus?Ft(E,x):ce})).apply(this,arguments)}function bt(E){return Xe(E,x=>{if(!_n(x))throw pe.create("not-registered");return function Kr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function Dt(E,x){return mn.apply(this,arguments)}function mn(){return(mn=(0,j.Z)(function*(E,x){try{const G=yield oe(E,x),ce=Object.assign(Object.assign({},x),{authToken:G});return yield ur(E.appConfig,ce),G}catch(G){if(!We(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const ce=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield ur(E.appConfig,ce)}else yield J(E.appConfig);throw G}})).apply(this,arguments)}function _n(E){return void 0!==E&&2===E.registrationStatus}function Fn(E){return 2===E.requestStatus&&!function Rr(E){const x=Date.now();return x<E.creationTime||E.creationTime+E.expiresIn<x+36e5}(E)}function Rn(E){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:x})}function Jr(){return(Jr=(0,j.Z)(function*(E){const x=E,{installationEntry:G,registrationPromise:ce}=yield ge(x);return ce?ce.catch(console.error):Ft(x).catch(console.error),G.fid})).apply(this,arguments)}function Vi(){return(Vi=(0,j.Z)(function*(E,x=!1){const G=E;return yield $n(G),(yield Ft(G,x)).token})).apply(this,arguments)}function $n(E){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,j.Z)(function*(E){const{registrationPromise:x}=yield ge(E);x&&(yield x)})).apply(this,arguments)}function Lr(E){return pe.create("missing-app-config-values",{valueName:E})}const Tr="installations",Pi=E=>{const x=E.getProvider("app").getImmediate(),G=function gi(E){if(!E||!E.options)throw Lr("App Configuration");if(!E.name)throw Lr("App Name");const x=["projectId","apiKey","appId"];for(const G of x)if(!E.options[G])throw Lr(G);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(x);return{app:x,appConfig:G,heartbeatServiceProvider:(0,m._getProvider)(x,"heartbeat"),_delete:()=>Promise.resolve()}},Os=E=>{const x=E.getProvider("app").getImmediate(),G=(0,m._getProvider)(x,Tr).getImmediate();return{getId:()=>function Yr(E){return Jr.apply(this,arguments)}(G),getToken:be=>function Fr(E){return Vi.apply(this,arguments)}(G,be)}};(function Nr(){(0,m._registerComponent)(new b.wA(Tr,Pi,"PUBLIC")),(0,m._registerComponent)(new b.wA("installations-internal",Os,"PRIVATE"))})(),(0,m.registerVersion)(Ut,"0.6.4"),(0,m.registerVersion)(Ut,"0.6.4","esm2017");const ji="@firebase/remote-config",cr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ws{constructor(x,G,ce,be){this.client=x,this.storage=G,this.storageCache=ce,this.logger=be}isCachedDataFresh(x,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ce=Date.now()-G,be=ce<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${be}.`),be}fetch(x){var G=this;return(0,j.Z)(function*(){const[ce,be]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(be&&G.isCachedDataFresh(x.cacheMaxAgeMillis,ce))return be;x.eTag=be&&be.eTag;const ke=yield G.client.fetch(x),pt=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ke.status&&pt.push(G.storage.setLastSuccessfulFetchResponse(ke)),yield Promise.all(pt),ke})()}}function Ns(E=navigator){return E.languages&&E.languages[0]||E.language}class sa{constructor(x,G,ce,be,ke,pt){this.firebaseInstallations=x,this.sdkVersion=G,this.namespace=ce,this.projectId=be,this.apiKey=ke,this.appId=pt}fetch(x){var G=this;return(0,j.Z)(function*(){const[ce,be]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,Kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},Zt={sdk_version:G.sdkVersion,app_instance_id:ce,app_instance_id_token:be,app_id:G.appId,language_code:Ns()},gn={method:"POST",headers:Kt,body:JSON.stringify(Zt)},vn=fetch(pt,gn),Un=new Promise((co,La)=>{x.signal.addEventListener(()=>{const yu=new Error("The operation was aborted.");yu.name="AbortError",La(yu)})});let vs;try{yield Promise.race([vn,Un]),vs=yield vn}catch(co){let La="fetch-client-network";throw"AbortError"===co?.name&&(La="fetch-timeout"),cr.create(La,{originalErrorMessage:co?.message})}let fi=vs.status;const Li=vs.headers.get("ETag")||void 0;let Da,mu;if(200===vs.status){let co;try{co=yield vs.json()}catch(La){throw cr.create("fetch-client-parse",{originalErrorMessage:La?.message})}Da=co.entries,mu=co.state}if("INSTANCE_STATE_UNSPECIFIED"===mu?fi=500:"NO_CHANGE"===mu?fi=304:("NO_TEMPLATE"===mu||"EMPTY_CONFIG"===mu)&&(Da={}),304!==fi&&200!==fi)throw cr.create("fetch-status",{httpStatus:fi});return{status:fi,eTag:Li,config:Da}})()}}class Po{constructor(x,G){this.client=x,this.storage=G}fetch(x){var G=this;return(0,j.Z)(function*(){const ce=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(x,ce)})()}attemptFetch(x,{throttleEndTimeMillis:G,backoffCount:ce}){var be=this;return(0,j.Z)(function*(){yield function ds(E,x){return new Promise((G,ce)=>{const be=Math.max(x-Date.now(),0),ke=setTimeout(G,be);E.addEventListener(()=>{clearTimeout(ke),ce(cr.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,G);try{const ke=yield be.client.fetch(x);return yield be.storage.deleteThrottleMetadata(),ke}catch(ke){if(!function Zo(E){if(!(E instanceof de.ZR&&E.customData))return!1;const x=Number(E.customData.httpStatus);return 429===x||500===x||503===x||504===x}(ke))throw ke;const pt={throttleEndTimeMillis:Date.now()+(0,de.$s)(ce),backoffCount:ce+1};return yield be.storage.setThrottleMetadata(pt),be.attemptFetch(x,pt)}})()}}class Qs{constructor(x,G,ce,be,ke){this.app=x,this._client=G,this._storageCache=ce,this._storage=be,this._logger=ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hr(E,x){const G=E.target.error||void 0;return cr.create(x,{originalErrorMessage:G&&G?.message})}const ci="app_namespace_store";class oa{constructor(x,G,ce,be=function Ma(){return new Promise((E,x)=>{try{const G=indexedDB.open("firebase_remote_config",1);G.onerror=ce=>{x(Hr(ce,"storage-open"))},G.onsuccess=ce=>{E(ce.target.result)},G.onupgradeneeded=ce=>{0===ce.oldVersion&&ce.target.result.createObjectStore(ci,{keyPath:"compositeKey"})}}catch(G){x(cr.create("storage-open",{originalErrorMessage:G?.message}))}})}()){this.appId=x,this.appName=G,this.namespace=ce,this.openDbPromise=be}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var G=this;return(0,j.Z)(function*(){const ce=yield G.openDbPromise;return new Promise((be,ke)=>{const Kt=ce.transaction([ci],"readonly").objectStore(ci),Zt=G.createCompositeKey(x);try{const gn=Kt.get(Zt);gn.onerror=vn=>{ke(Hr(vn,"storage-get"))},gn.onsuccess=vn=>{const Un=vn.target.result;be(Un?Un.value:void 0)}}catch(gn){ke(cr.create("storage-get",{originalErrorMessage:gn?.message}))}})})()}set(x,G){var ce=this;return(0,j.Z)(function*(){const be=yield ce.openDbPromise;return new Promise((ke,pt)=>{const Zt=be.transaction([ci],"readwrite").objectStore(ci),gn=ce.createCompositeKey(x);try{const vn=Zt.put({compositeKey:gn,value:G});vn.onerror=Un=>{pt(Hr(Un,"storage-set"))},vn.onsuccess=()=>{ke()}}catch(vn){pt(cr.create("storage-set",{originalErrorMessage:vn?.message}))}})})()}delete(x){var G=this;return(0,j.Z)(function*(){const ce=yield G.openDbPromise;return new Promise((be,ke)=>{const Kt=ce.transaction([ci],"readwrite").objectStore(ci),Zt=G.createCompositeKey(x);try{const gn=Kt.delete(Zt);gn.onerror=vn=>{ke(Hr(vn,"storage-delete"))},gn.onsuccess=()=>{be()}}catch(gn){ke(cr.create("storage-delete",{originalErrorMessage:gn?.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Er{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,j.Z)(function*(){const G=x.storage.getLastFetchStatus(),ce=x.storage.getLastSuccessfulFetchTimestampMillis(),be=x.storage.getActiveConfig(),ke=yield G;ke&&(x.lastFetchStatus=ke);const pt=yield ce;pt&&(x.lastSuccessfulFetchTimestampMillis=pt);const Kt=yield be;Kt&&(x.activeConfig=Kt)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function zr(){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,j.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}let Zi,di;!function hs(){(0,m._registerComponent)(new b.wA("remote-config",function E(x,{instanceIdentifier:G}){const ce=x.getProvider("app").getImmediate(),be=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw cr.create("registration-window");if(!(0,de.hl)())throw cr.create("indexed-db-unavailable");const{projectId:ke,apiKey:pt,appId:Kt}=ce.options;if(!ke)throw cr.create("registration-project-id");if(!pt)throw cr.create("registration-api-key");if(!Kt)throw cr.create("registration-app-id");const Zt=new oa(Kt,ce.name,G=G||"firebase"),gn=new Er(Zt),vn=new ae.Yd(ji);vn.logLevel=ae.in.ERROR;const Un=new sa(be,m.SDK_VERSION,G,ke,pt,Kt),vs=new Po(Un,Zt),fi=new ws(vs,Zt,gn,vn),Li=new Qs(ce,fi,gn,Zt,vn);return function Jn(E){const x=(0,de.m9)(E);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(Li),Li},"PUBLIC").setMultipleInstances(!0)),(0,m.registerVersion)(ji,"0.4.4"),(0,m.registerVersion)(ji,"0.4.4","esm2017")}();const eo=new WeakMap,Xr=new WeakMap,qr=new WeakMap,to=new WeakMap,Cn=new WeakMap;let aa={get(E,x,G){if(E instanceof IDBTransaction){if("done"===x)return Xr.get(E);if("objectStoreNames"===x)return E.objectStoreNames||qr.get(E);if("store"===x)return G.objectStoreNames[1]?void 0:G.objectStore(G.objectStoreNames[0])}return bi(E[x])},set:(E,x,G)=>(E[x]=G,!0),has:(E,x)=>E instanceof IDBTransaction&&("done"===x||"store"===x)||x in E};function _o(E){return"function"==typeof E?function Ni(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ro(){return di||(di=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...x){return E.apply(ua(this),x),bi(eo.get(this))}:function(...x){return bi(E.apply(ua(this),x))}:function(x,...G){const ce=E.call(ua(this),x,...G);return qr.set(ce,x.sort?x.sort():[x]),bi(ce)}}(E):(E instanceof IDBTransaction&&function Fs(E){if(Xr.has(E))return;const x=new Promise((G,ce)=>{const be=()=>{E.removeEventListener("complete",ke),E.removeEventListener("error",pt),E.removeEventListener("abort",pt)},ke=()=>{G(),be()},pt=()=>{ce(E.error||new DOMException("AbortError","AbortError")),be()};E.addEventListener("complete",ke),E.addEventListener("error",pt),E.addEventListener("abort",pt)});Xr.set(E,x)}(E),((E,x)=>x.some(G=>E instanceof G))(E,function vo(){return Zi||(Zi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,aa):E)}function bi(E){if(E instanceof IDBRequest)return function ks(E){const x=new Promise((G,ce)=>{const be=()=>{E.removeEventListener("success",ke),E.removeEventListener("error",pt)},ke=()=>{G(bi(E.result)),be()},pt=()=>{ce(E.error),be()};E.addEventListener("success",ke),E.addEventListener("error",pt)});return x.then(G=>{G instanceof IDBCursor&&eo.set(G,E)}).catch(()=>{}),Cn.set(x,E),x}(E);if(to.has(E))return to.get(E);const x=_o(E);return x!==E&&(to.set(E,x),Cn.set(x,E)),x}const ua=E=>Cn.get(E);function At(E,x,{blocked:G,upgrade:ce,blocking:be,terminated:ke}={}){const pt=indexedDB.open(E,x),Kt=bi(pt);return ce&&pt.addEventListener("upgradeneeded",Zt=>{ce(bi(pt.result),Zt.oldVersion,Zt.newVersion,bi(pt.transaction))}),G&&pt.addEventListener("blocked",()=>G()),Kt.then(Zt=>{ke&&Zt.addEventListener("close",()=>ke()),be&&Zt.addEventListener("versionchange",()=>be())}).catch(()=>{}),Kt}function Hn(E,{blocked:x}={}){const G=indexedDB.deleteDatabase(E);return x&&G.addEventListener("blocked",()=>x()),bi(G).then(()=>{})}const no=["get","getKey","getAll","getAllKeys","count"],ro=["put","add","delete","clear"],Gr=new Map;function ei(E,x){if(!(E instanceof IDBDatabase)||x in E||"string"!=typeof x)return;if(Gr.get(x))return Gr.get(x);const G=x.replace(/FromIndex$/,""),ce=x!==G,be=ro.includes(G);if(!(G in(ce?IDBIndex:IDBObjectStore).prototype)||!be&&!no.includes(G))return;const ke=function(){var pt=(0,j.Z)(function*(Kt,...Zt){const gn=this.transaction(Kt,be?"readwrite":"readonly");let vn=gn.store;return ce&&(vn=vn.index(Zt.shift())),(yield Promise.all([vn[G](...Zt),be&&gn.done]))[0]});return function(Zt){return pt.apply(this,arguments)}}();return Gr.set(x,ke),ke}!function Ar(E){aa=E(aa)}(E=>({...E,get:(x,G,ce)=>ei(x,G)||E.get(x,G,ce),has:(x,G)=>!!ei(x,G)||E.has(x,G)}));const zi="/firebase-messaging-sw.js",es="/firebase-cloud-messaging-push-scope",Oo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Es="google.c.a.c_id",Br="google.c.a.c_l",V="google.c.a.ts",k="google.c.a.e";var X=(()=>{return(E=X||(X={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",X;var E})();function lt(E){const x=new Uint8Array(E);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rn(E){const G=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ce=atob(G),be=new Uint8Array(ce.length);for(let ke=0;ke<ce.length;++ke)be[ke]=ce.charCodeAt(ke);return be}const Zn="fcm_token_details_db",qi="fcm_token_object_Store";function Di(E){return Is.apply(this,arguments)}function Is(){return Is=(0,j.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(Zn))return null;let x=null;return(yield At(Zn,5,{upgrade:(ce=(0,j.Z)(function*(be,ke,pt,Kt){var Zt;if(ke<2||!be.objectStoreNames.contains(qi))return;const gn=Kt.objectStore(qi),vn=yield gn.index("fcmSenderId").get(E);if(yield gn.clear(),vn)if(2===ke){const Un=vn;if(!Un.auth||!Un.p256dh||!Un.endpoint)return;x={token:Un.fcmToken,createTime:null!==(Zt=Un.createTime)&&void 0!==Zt?Zt:Date.now(),subscriptionOptions:{auth:Un.auth,p256dh:Un.p256dh,endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:"string"==typeof Un.vapidKey?Un.vapidKey:lt(Un.vapidKey)}}}else if(3===ke){const Un=vn;x={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:lt(Un.auth),p256dh:lt(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:lt(Un.vapidKey)}}}else if(4===ke){const Un=vn;x={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:lt(Un.auth),p256dh:lt(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:lt(Un.vapidKey)}}}}),function(ke,pt,Kt,Zt){return ce.apply(this,arguments)})})).close(),yield Hn(Zn),yield Hn("fcm_vapid_details_db"),yield Hn("undefined"),Ls(x)?x:null;var ce}),Is.apply(this,arguments)}function Ls(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:x}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const ki="firebase-messaging-store";let Vs=null;function xa(){return Vs||(Vs=At("firebase-messaging-database",1,{upgrade:(E,x)=>{0===x&&E.createObjectStore(ki)}})),Vs}function Co(E){return zo.apply(this,arguments)}function zo(){return(zo=(0,j.Z)(function*(E){const x=la(E),ce=yield(yield xa()).transaction(ki).objectStore(ki).get(x);if(ce)return ce;{const be=yield Di(E.appConfig.senderId);if(be)return yield ko(E,be),be}})).apply(this,arguments)}function ko(E,x){return qo.apply(this,arguments)}function qo(){return(qo=(0,j.Z)(function*(E,x){const G=la(E),be=(yield xa()).transaction(ki,"readwrite");return yield be.objectStore(ki).put(x,G),yield be.done,x})).apply(this,arguments)}function Ti(E){return Us.apply(this,arguments)}function Us(){return(Us=(0,j.Z)(function*(E){const x=la(E),ce=(yield xa()).transaction(ki,"readwrite");yield ce.objectStore(ki).delete(x),yield ce.done})).apply(this,arguments)}function la({appConfig:E}){return E.appId}const dr=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function mi(E,x){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,j.Z)(function*(E,x){const G=yield Bs(E),ce=ts(x),be={method:"POST",headers:G,body:JSON.stringify(ce)};let ke;try{ke=yield(yield fetch(Wo(E.appConfig),be)).json()}catch(pt){throw dr.create("token-subscribe-failed",{errorInfo:pt?.toString()})}if(ke.error)throw dr.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw dr.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function Ir(E,x){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,j.Z)(function*(E,x){const G=yield Bs(E),ce=ts(x.subscriptionOptions),be={method:"PATCH",headers:G,body:JSON.stringify(ce)};let ke;try{ke=yield(yield fetch(`${Wo(E.appConfig)}/${x.token}`,be)).json()}catch(pt){throw dr.create("token-update-failed",{errorInfo:pt?.toString()})}if(ke.error)throw dr.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw dr.create("token-update-no-token");return ke.token})).apply(this,arguments)}function ca(E,x){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,j.Z)(function*(E,x){const ce={method:"DELETE",headers:yield Bs(E)};try{const ke=yield(yield fetch(`${Wo(E.appConfig)}/${x}`,ce)).json();if(ke.error)throw dr.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(be){throw dr.create("token-unsubscribe-failed",{errorInfo:be?.toString()})}})).apply(this,arguments)}function Wo({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Bs(E){return bs.apply(this,arguments)}function bs(){return(bs=(0,j.Z)(function*({appConfig:E,installations:x}){const G=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function ts({p256dh:E,auth:x,endpoint:G,vapidKey:ce}){const be={web:{endpoint:G,auth:x,p256dh:E}};return ce!==Oo&&(be.web.applicationPubKey=ce),be}const Ko=6048e5;function ps(E){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,j.Z)(function*(E){const x=yield Lo(E.swRegistration,E.vapidKey),G={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:x.endpoint,auth:lt(x.getKey("auth")),p256dh:lt(x.getKey("p256dh"))},ce=yield Co(E.firebaseDependencies);if(ce){if(S(ce.subscriptionOptions,G))return Date.now()>=ce.createTime+Ko?io(E,{token:ce.token,createTime:Date.now(),subscriptionOptions:G}):ce.token;try{yield ca(E.firebaseDependencies,ce.token)}catch(be){console.warn(be)}return oo(E.firebaseDependencies,G)}return oo(E.firebaseDependencies,G)})).apply(this,arguments)}function yi(E){return ns.apply(this,arguments)}function ns(){return(ns=(0,j.Z)(function*(E){const x=yield Co(E.firebaseDependencies);x&&(yield ca(E.firebaseDependencies,x.token),yield Ti(E.firebaseDependencies));const G=yield E.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function io(E,x){return so.apply(this,arguments)}function so(){return(so=(0,j.Z)(function*(E,x){try{const G=yield Ir(E.firebaseDependencies,x),ce=Object.assign(Object.assign({},x),{token:G,createTime:Date.now()});return yield ko(E.firebaseDependencies,ce),G}catch(G){throw yield yi(E),G}})).apply(this,arguments)}function oo(E,x){return Io.apply(this,arguments)}function Io(){return(Io=(0,j.Z)(function*(E,x){const ce={token:yield mi(E,x),createTime:Date.now(),subscriptionOptions:x};return yield ko(E,ce),ce.token})).apply(this,arguments)}function Lo(E,x){return ou.apply(this,arguments)}function ou(){return(ou=(0,j.Z)(function*(E,x){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rn(x)})})).apply(this,arguments)}function S(E,x){return x.vapidKey===E.vapidKey&&x.endpoint===E.endpoint&&x.auth===E.auth&&x.p256dh===E.p256dh}function $(E){const x={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function R(E,x){if(!x.notification)return;E.notification={};const G=x.notification.title;G&&(E.notification.title=G);const ce=x.notification.body;ce&&(E.notification.body=ce);const be=x.notification.image;be&&(E.notification.image=be);const ke=x.notification.icon;ke&&(E.notification.icon=ke)}(x,E),function K(E,x){!x.data||(E.data=x.data)}(x,E),function Se(E,x){var G,ce,be,ke,pt;if(!(x.fcmOptions||null!==(G=x.notification)&&void 0!==G&&G.click_action))return;E.fcmOptions={};const Kt=null!==(be=null===(ce=x.fcmOptions)||void 0===ce?void 0:ce.link)&&void 0!==be?be:null===(ke=x.notification)||void 0===ke?void 0:ke.click_action;Kt&&(E.fcmOptions.link=Kt);const Zt=null===(pt=x.fcmOptions)||void 0===pt?void 0:pt.analytics_label;Zt&&(E.fcmOptions.analyticsLabel=Zt)}(x,E),x}function ct(E){return"object"==typeof E&&!!E&&Es in E}function Ct(E,x){const G=[];for(let ce=0;ce<E.length;ce++)G.push(E.charAt(ce)),ce<x.length&&G.push(x.charAt(ce));return G.join("")}function lr(E){return dr.create("missing-app-config-values",{valueName:E})}Ct("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ct("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zn{constructor(x,G,ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const be=function hn(E){if(!E||!E.options)throw lr("App Configuration Object");if(!E.name)throw lr("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:G}=E;for(const ce of x)if(!G[ce])throw lr(ce);return{appName:E.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:be,installations:G,analyticsProvider:ce}}_delete(){return Promise.resolve()}}function vr(E){return yn.apply(this,arguments)}function yn(){return(yn=(0,j.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(zi,{scope:es}),E.swRegistration.update().catch(()=>{})}catch(x){throw dr.create("failed-service-worker-registration",{browserErrorMessage:x?.message})}})).apply(this,arguments)}function Mr(E,x){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,j.Z)(function*(E,x){if(!x&&!E.swRegistration&&(yield vr(E)),x||!E.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw dr.create("invalid-sw-registration");E.swRegistration=x}})).apply(this,arguments)}function ni(E,x){return js.apply(this,arguments)}function js(){return(js=(0,j.Z)(function*(E,x){x?E.vapidKey=x:E.vapidKey||(E.vapidKey=Oo)})).apply(this,arguments)}function mr(){return(mr=(0,j.Z)(function*(E,x){if(!navigator)throw dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dr.create("permission-blocked");return yield ni(E,x?.vapidKey),yield Mr(E,x?.serviceWorkerRegistration),ps(E)})).apply(this,arguments)}function xr(E,x,G){return ao.apply(this,arguments)}function ao(){return(ao=(0,j.Z)(function*(E,x,G){const ce=Yt(x);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(ce,{message_id:G[Es],message_name:G[Br],message_time:G[V],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yt(E){switch(E){case X.NOTIFICATION_CLICKED:return"notification_open";case X.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function da(){return(da=(0,j.Z)(function*(E,x){const G=x.data;if(!G.isFirebaseMessaging)return;E.onMessageHandler&&G.messageType===X.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler($(G)):E.onMessageHandler.next($(G)));const ce=G.data;ct(ce)&&"1"===ce[k]&&(yield xr(E,G.messageType,ce))})).apply(this,arguments)}const zt="@firebase/messaging",Mt=E=>{const x=new zn(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function on(E,x){return da.apply(this,arguments)}(x,G)),x},oi=E=>{const x=E.getProvider("messaging").getImmediate();return{getToken:ce=>function St(E,x){return mr.apply(this,arguments)}(x,ce)}};function Za(){return xu.apply(this,arguments)}function xu(){return(xu=(0,j.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ga(){(0,m._registerComponent)(new b.wA("messaging",Mt,"PUBLIC")),(0,m._registerComponent)(new b.wA("messaging-internal",oi,"PRIVATE")),(0,m.registerVersion)(zt,"0.12.4"),(0,m.registerVersion)(zt,"0.12.4","esm2017")}();const an="analytics",bo="firebase_id",fn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$s="https://www.googletagmanager.com/gtag/js",bn=new ae.Yd("@firebase/analytics"),nr=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function qt(E){if(!E.startsWith($s)){const x=nr.create("invalid-gtag-resource",{gtagURL:E});return bn.warn(x.message),""}return E}function gs(E){return Promise.all(E.map(x=>x.catch(G=>G)))}function Jo(E,x){const G=function ga(E,x){let G;return window.trustedTypes&&(G=window.trustedTypes.createPolicy(E,x)),G}("firebase-js-sdk-policy",{createScriptURL:qt}),ce=document.createElement("script"),be=`${$s}?l=${E}&id=${x}`;ce.src=G?G?.createScriptURL(be):be,ce.async=!0,document.head.appendChild(ce)}function Ru(E,x,G,ce,be,ke){return qa.apply(this,arguments)}function qa(){return(qa=(0,j.Z)(function*(E,x,G,ce,be,ke){const pt=ce[be];try{if(pt)yield x[pt];else{const Zt=(yield gs(G)).find(gn=>gn.measurementId===be);Zt&&(yield x[Zt.appId])}}catch(Kt){bn.error(Kt)}E("config",be,ke)})).apply(this,arguments)}function Vo(E,x,G,ce,be){return ma.apply(this,arguments)}function ma(){return(ma=(0,j.Z)(function*(E,x,G,ce,be){try{let ke=[];if(be&&be.send_to){let pt=be.send_to;Array.isArray(pt)||(pt=[pt]);const Kt=yield gs(G);for(const Zt of pt){const gn=Kt.find(Un=>Un.measurementId===Zt),vn=gn&&x[gn.appId];if(!vn){ke=[];break}ke.push(vn)}}0===ke.length&&(ke=Object.values(x)),yield Promise.all(ke),E("event",ce,be||{})}catch(ke){bn.error(ke)}})).apply(this,arguments)}function Ou(E){const x=window.document.getElementsByTagName("script");for(const G of Object.values(x))if(G.src&&G.src.includes($s)&&G.src.includes(E))return G;return null}const ri=new class va{constructor(x={},G=1e3){this.throttleMetadata=x,this.intervalMillis=G}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,G){this.throttleMetadata[x]=G}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function et(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Qo(E){return uo.apply(this,arguments)}function uo(){return(uo=(0,j.Z)(function*(E){var x;const{appId:G,apiKey:ce}=E,be={method:"GET",headers:et(ce)},ke=fn.replace("{app-id}",G),pt=yield fetch(ke,be);if(200!==pt.status&&304!==pt.status){let Kt="";try{const Zt=yield pt.json();null!==(x=Zt.error)&&void 0!==x&&x.message&&(Kt=Zt.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:pt.status,responseMessage:Kt})}return pt.json()})).apply(this,arguments)}function _a(E){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,j.Z)(function*(E,x=ri,G){const{appId:ce,apiKey:be,measurementId:ke}=E.options;if(!ce)throw nr.create("no-app-id");if(!be){if(ke)return{measurementId:ke,appId:ce};throw nr.create("no-api-key")}const pt=x.getThrottleMetadata(ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Kt=new uu;return setTimeout((0,j.Z)(function*(){Kt.abort()}),void 0!==G?G:6e4),Si({appId:ce,apiKey:be,measurementId:ke},pt,Kt,x)})).apply(this,arguments)}function Si(E,x,G){return au.apply(this,arguments)}function au(){return(au=(0,j.Z)(function*(E,{throttleEndTimeMillis:x,backoffCount:G},ce,be=ri){var ke;const{appId:pt,measurementId:Kt}=E;try{yield Hs(ce,x)}catch(Zt){if(Kt)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${Zt?.message}]`),{appId:pt,measurementId:Kt};throw Zt}try{const Zt=yield Qo(E);return be.deleteThrottleMetadata(pt),Zt}catch(Zt){const gn=Zt;if(!Pa(gn)){if(be.deleteThrottleMetadata(pt),Kt)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${gn?.message}]`),{appId:pt,measurementId:Kt};throw Zt}const vn=503===Number(null===(ke=gn?.customData)||void 0===ke?void 0:ke.httpStatus)?(0,de.$s)(G,be.intervalMillis,30):(0,de.$s)(G,be.intervalMillis),Un={throttleEndTimeMillis:Date.now()+vn,backoffCount:G+1};return be.setThrottleMetadata(pt,Un),bn.debug(`Calling attemptFetch again in ${vn} millis`),Si(E,Un,ce,be)}})).apply(this,arguments)}function Hs(E,x){return new Promise((G,ce)=>{const be=Math.max(x-Date.now(),0),ke=setTimeout(G,be);E.addEventListener(()=>{clearTimeout(ke),ce(nr.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function Pa(E){if(!(E instanceof de.ZR&&E.customData))return!1;const x=Number(E.customData.httpStatus);return 429===x||500===x||503===x||504===x}class uu{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}let Nu,ve;function ms(){return(ms=(0,j.Z)(function*(E,x,G,ce,be){if(be&&be.global)E("event",G,ce);else{const ke=yield x;E("event",G,Object.assign(Object.assign({},ce),{send_to:ke}))}})).apply(this,arguments)}function Ie(E){ve=E}function ft(E){Nu=E}function Gt(){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,j.Z)(function*(){if(!(0,de.hl)())return bn.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(E){return bn.warn(nr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wn(){return(Wn=(0,j.Z)(function*(E,x,G,ce,be,ke,pt){var Kt;const Zt=_a(E);Zt.then(fi=>{G[fi.measurementId]=fi.appId,E.options.measurementId&&fi.measurementId!==E.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${fi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fi=>bn.error(fi)),x.push(Zt);const gn=Gt().then(fi=>{if(fi)return ce.getId()}),[vn,Un]=yield Promise.all([Zt,gn]);Ou(ke)||Jo(ke,vn.measurementId),ve&&(be("consent","default",ve),Ie(void 0)),be("js",new Date);const vs=null!==(Kt=pt?.config)&&void 0!==Kt?Kt:{};return vs.origin="firebase",vs.update=!0,null!=Un&&(vs[bo]=Un),be("config",vn.measurementId,vs),Nu&&(be("set",Nu),ft(void 0)),vn.measurementId})).apply(this,arguments)}class Mi{constructor(x){this.app=x}_delete(){return delete ui[this.app.options.appId],Promise.resolve()}}let ui={},Xo=[];const Gs={};let Ra,Ts,wa="dataLayer",lu=!1;function Fl(E,x,G){!function ku(){const E=[];if((0,de.ru)()&&E.push("This is a browser extension environment."),(0,de.zI)()||E.push("Cookies are not available."),E.length>0){const x=E.map((ce,be)=>`(${be+1}) ${ce}`).join(" "),G=nr.create("invalid-analytics-context",{errorInfo:x});bn.warn(G.message)}}();const ce=E.options.appId;if(!ce)throw nr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw nr.create("no-api-key");bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ui[ce])throw nr.create("already-exists",{id:ce});if(!lu){!function _r(E){let x=[];Array.isArray(window[E])?x=window[E]:window[E]=x}(wa);const{wrappedGtag:ke,gtagCore:pt}=function Ds(E,x,G,ce,be){let ke=function(...pt){window[ce].push(arguments)};return window[be]&&"function"==typeof window[be]&&(ke=window[be]),window[be]=function Nl(E,x,G,ce){function ke(){return(ke=(0,j.Z)(function*(pt,...Kt){try{if("event"===pt){const[Zt,gn]=Kt;yield Vo(E,x,G,Zt,gn)}else if("config"===pt){const[Zt,gn]=Kt;yield Ru(E,x,G,ce,Zt,gn)}else if("consent"===pt){const[Zt]=Kt;E("consent","update",Zt)}else if("get"===pt){const[Zt,gn,vn]=Kt;E("get",Zt,gn,vn)}else if("set"===pt){const[Zt]=Kt;E("set",Zt)}else E(pt,...Kt)}catch(Zt){bn.error(Zt)}})).apply(this,arguments)}return function be(pt){return ke.apply(this,arguments)}}(ke,E,x,G),{gtagCore:ke,wrappedGtag:window[be]}}(ui,Xo,Gs,wa,"gtag");Ts=ke,Ra=pt,lu=!0}return ui[ce]=function un(E,x,G,ce,be,ke,pt){return Wn.apply(this,arguments)}(E,Xo,Gs,x,Ra,wa,G),new Mi(E)}function Yi(){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,j.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const sl="@firebase/analytics";!function _i(){(0,m._registerComponent)(new b.wA(an,(x,{options:G})=>Fl(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,m._registerComponent)(new b.wA("analytics-internal",function E(x){try{const G=x.getProvider(an).getImmediate();return{logEvent:(ce,be,ke)=>function Bo(E,x,G,ce){E=(0,de.m9)(E),function kl(E,x,G,ce,be){return ms.apply(this,arguments)}(Ts,ui[E.app.options.appId],x,G,ce).catch(be=>bn.error(be))}(G,ce,be,ke)}}catch(G){throw nr.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,m.registerVersion)(sl,"0.10.0"),(0,m.registerVersion)(sl,"0.10.0","esm2017")}();var du=N(4408),si=N(7565);const Fu=new class Na extends si.v{}(class Do extends du.o{constructor(x,G){super(x,G),this.scheduler=x,this.work=G}schedule(x,G=0){return G>0?super.schedule(x,G):(this.delay=G,this.state=x,this.scheduler.flush(this),this)}execute(x,G){return G>0||this.closed?super.execute(x,G):this._execute(x,G)}requestAsyncId(x,G,ce=0){return null!=ce&&ce>0||null==ce&&this.delay>0?super.requestAsyncId(x,G,ce):(x.flush(this),0)}});var ol=N(4986),Ul=N(8505),ta=N(9468),na=N(5363);const ka=new d.GfV("7.6.1"),lo="__angularfire_symbol__analyticsIsSupportedValue",To="__angularfire_symbol__analyticsIsSupported",Ea="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",hu="__angularfire_symbol__messagingIsSupportedValue",Ya="__angularfire_symbol__messagingIsSupported";function al(E,x,G){if(x){if(1===x.length)return x[0];const ke=x.filter(pt=>pt.app===G);if(1===ke.length)return ke[0]}return G.container.getProvider(E).getImmediate({optional:!0})}globalThis[To]||(globalThis[To]=Yi().then(E=>globalThis[lo]=E).catch(()=>globalThis[lo]=!1)),globalThis[Ya]||(globalThis[Ya]=Za().then(E=>globalThis[hu]=E).catch(()=>globalThis[hu]=!1)),globalThis[ra]||(globalThis[ra]=zr().then(E=>globalThis[Ea]=E).catch(()=>globalThis[Ea]=!1));const pu=(E,x)=>{const G=x?[x]:(0,U.C6)(),ce=[];return G.forEach(be=>{be.container.getProvider(E).instances.forEach(pt=>{ce.includes(pt)||ce.push(pt)})}),ce};function gu(){}class ul{constructor(x,G=Fu){this.zone=x,this.delegate=G}now(){return this.delegate.now()}schedule(x,G,ce){const be=this.zone;return this.delegate.schedule(function(pt){be.runGuarded(()=>{x.apply(this,[pt])})},G,ce)}}class Uu{constructor(x){this.zone=x,this.task=null}call(x,G){const ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gu,{},gu,gu)),G.pipe((0,Ul.b)({next:ce,complete:ce,error:ce})).subscribe(x).add(ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let td=(()=>{class E{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new ul(Zone.current)),this.insideAngular=G.run(()=>new ul(Zone.current,ol.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(G){return new(G||E)(d.LFG(d.R0b))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Ia(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function ll(E){return Ia(),function Wr(E){return function(G){return(G=G.lift(new Uu(E.ngZone))).pipe((0,ta.R)(E.outsideAngular),(0,na.Q)(E.insideAngular))}}(Ia())(E)}},1389:(Lt,ze,N)=>{N.d(ze,{$:()=>zi,A:()=>ue,D:()=>qe,I:()=>Or,J:()=>Pi,L:()=>li,N:()=>Xe,P:()=>un,Q:()=>oa,R:()=>ys,U:()=>fs,V:()=>zr,W:()=>Gi,X:()=>mo,Y:()=>vo,Z:()=>Ro,_:()=>Cn,a:()=>ha,a0:()=>Oo,a1:()=>Es,a2:()=>O,a3:()=>qi,a4:()=>Is,a5:()=>wo,a6:()=>ki,a7:()=>xa,a8:()=>zo,a9:()=>qo,aA:()=>we,aB:()=>Ea,aC:()=>J,aD:()=>xt,aE:()=>ta,aF:()=>Vl,aG:()=>ii,aH:()=>Dr,aL:()=>fa,aO:()=>Zi,aa:()=>Ti,ab:()=>la,ac:()=>Eo,ad:()=>Ir,ae:()=>ca,af:()=>Wo,ai:()=>Ko,aj:()=>Ki,ak:()=>yi,an:()=>Ni,ao:()=>R,aq:()=>js,ar:()=>zt,as:()=>xe,at:()=>he,au:()=>gt,av:()=>Ce,aw:()=>vs,ax:()=>fu,ay:()=>me,az:()=>ut,b:()=>nl,c:()=>Ts,d:()=>Fl,e:()=>Fi,f:()=>sl,g:()=>Na,h:()=>du,i:()=>rl,j:()=>ol,k:()=>co,l:()=>M,m:()=>Pf,p:()=>A,r:()=>W,s:()=>C,u:()=>Gt});var d=N(5861),U=N(2090),j=N(6881),m=N(7582),de=N(1877),b=N(4859);const A={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ke=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$e=new de.Yd("@firebase/auth");function mt(w,...h){$e.logLevel<=de.in.ERROR&&$e.error(`Auth (${j.SDK_VERSION}): ${w}`,...h)}function Ce(w,...h){throw vt(w,...h)}function ut(w,...h){return vt(w,...h)}function st(w,h,g){const I=Object.assign(Object.assign({},Ke()),{[h]:g});return new U.LL("auth","Firebase",I).create(h,{appName:w.name})}function It(w,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Ce(w,"argument-error"),st(w,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(w,...h){if("string"!=typeof w){const g=h[0],I=[...h.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(g,...I)}return ot.create(w,...h)}function we(w,h,...g){if(!w)throw vt(h,...g)}function _t(w){const h="INTERNAL ASSERTION FAILED: "+w;throw mt(h),new Error(h)}function xe(w,h){w||_t(h)}function Ae(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ze(){return"http:"===Le()||"https:"===Le()}function Le(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Oe{constructor(h,g){this.shortDelay=h,this.longDelay=g,xe(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ze()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ye(w,h){xe(w.emulator,"Emulator should always be set here");const{url:g}=w.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Je{static initialize(h,g,I){this.fetchImpl=h,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new Oe(3e4,6e4);function ie(w,h){return w.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:w.tenantId}):h}function z(w,h,g,I){return se.apply(this,arguments)}function se(){return(se=(0,d.Z)(function*(w,h,g,I,Z={}){return pe(w,Z,(0,d.Z)(function*(){let re={},Be={};I&&("GET"===h?Be=I:re={body:JSON.stringify(I)});const dt=(0,U.xO)(Object.assign({key:w.config.apiKey},Be)).slice(1),jt=yield w._getAdditionalHeaders();return jt["Content-Type"]="application/json",w.languageCode&&(jt["X-Firebase-Locale"]=w.languageCode),Je.fetch()(Gn(w,w.config.apiHost,g,dt),Object.assign({method:h,headers:jt,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function pe(w,h,g){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(w,h,g){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},Me),h);try{const Z=new Kn(w),re=yield Promise.race([g(),Z.promise]);Z.clearNetworkTimeout();const Be=yield re.json();if("needConfirmation"in Be)throw kn(w,"account-exists-with-different-credential",Be);if(re.ok&&!("errorMessage"in Be))return Be;{const dt=re.ok?Be.errorMessage:Be.error.message,[jt,Jt]=dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw kn(w,"credential-already-in-use",Be);if("EMAIL_EXISTS"===jt)throw kn(w,"email-already-in-use",Be);if("USER_DISABLED"===jt)throw kn(w,"user-disabled",Be);const Dn=I[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(Jt)throw st(w,Dn,Jt);Ce(w,Dn)}}catch(Z){if(Z instanceof U.ZR)throw Z;Ce(w,"network-request-failed",{message:String(Z)})}})).apply(this,arguments)}function Ot(w,h,g,I){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(w,h,g,I,Z={}){const re=yield z(w,h,g,I,Z);return"mfaPendingCredential"in re&&Ce(w,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function Gn(w,h,g,I){const Z=`${h}${g}?${I}`;return w.config.emulator?Ye(w.config,Z):`${w.config.apiScheme}://${Z}`}class Kn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(ut(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(w,h,g){const I={appName:w.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const Z=ut(w,h,I);return Z.customData._tokenResponse=g,Z}function Ht(){return(Ht=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function En(w,h){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ir(w,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Mn(w){if(w)try{const h=new Date(Number(w));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function jr(){return(jr=(0,d.Z)(function*(w,h=!1){const g=(0,U.m9)(w),I=yield g.getIdToken(h),Z=fr(I);we(Z&&Z.exp&&Z.auth_time&&Z.iat,g.auth,"internal-error");const re="object"==typeof Z.firebase?Z.firebase:void 0,Be=re?.sign_in_provider;return{claims:Z,token:I,authTime:Mn($r(Z.auth_time)),issuedAtTime:Mn($r(Z.iat)),expirationTime:Mn($r(Z.exp)),signInProvider:Be||null,signInSecondFactor:re?.sign_in_second_factor||null}})).apply(this,arguments)}function $r(w){return 1e3*Number(w)}function fr(w){const[h,g,I]=w.split(".");if(void 0===h||void 0===g||void 0===I)return mt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,U.tV)(g);return Z?JSON.parse(Z):(mt("Failed to decode base64 JWT payload"),null)}catch(Z){return mt("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function cn(w,h){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(w,h,g=!1){if(g)return h;try{return yield h}catch(I){throw I instanceof U.ZR&&tn(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function tn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Nn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const Z=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(h);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),I)}iteration(){var h=this;return(0,d.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class pr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mn(this.lastLoginAt),this.creationTime=Mn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(w){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(w){var h;const g=w.auth,I=yield w.getIdToken(),Z=yield cn(w,ir(g,{idToken:I}));we(Z?.users.length,g,"internal-error");const re=Z.users[0];w._notifyReloadListener(re);const Be=null!==(h=re.providerUserInfo)&&void 0!==h&&h.length?Zr(re.providerUserInfo):[],dt=In(w.providerData,Be),Dn=!!w.isAnonymous&&!(w.email&&re.passwordHash||dt?.length),hr={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:dt,metadata:new pr(re.createdAt,re.lastLoginAt),isAnonymous:Dn};Object.assign(w,hr)})).apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(w){const h=(0,U.m9)(w);yield sr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function In(w,h){return[...w.filter(I=>!h.some(Z=>Z.providerId===I.providerId)),...h]}function Zr(w){return w.map(h=>{var{providerId:g}=h,I=(0,m._T)(h,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function An(){return(An=(0,d.Z)(function*(w,h){const g=yield pe(w,{},(0,d.Z)(function*(){const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:Z,apiKey:re}=w.config,Be=Gn(w,Z,"/v1/token",`key=${re}`),dt=yield w._getAdditionalHeaders();return dt["Content-Type"]="application/x-www-form-urlencoded",Je.fetch()(Be,{method:"POST",headers:dt,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){we(h.idToken,"internal-error"),we(typeof h.idToken<"u","internal-error"),we(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function wn(w){const h=fr(w);return we(h,"internal-error"),we(typeof h.exp<"u","internal-error"),we(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var I=this;return(0,d.Z)(function*(){return we(!I.accessToken||I.refreshToken,h,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(h,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var I=this;return(0,d.Z)(function*(){const{accessToken:Z,refreshToken:re,expiresIn:Be}=yield function xn(w,h){return An.apply(this,arguments)}(h,g);I.updateTokensAndExpiration(Z,re,Number(Be))})()}updateTokensAndExpiration(h,g,I){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(h,g){const{refreshToken:I,accessToken:Z,expirationTime:re}=g,Be=new Vt;return I&&(we("string"==typeof I,"internal-error",{appName:h}),Be.refreshToken=I),Z&&(we("string"==typeof Z,"internal-error",{appName:h}),Be.accessToken=Z),re&&(we("number"==typeof re,"internal-error",{appName:h}),Be.expirationTime=re),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return _t("not implemented")}}function or(w,h){we("string"==typeof w||typeof w>"u","internal-error",{appName:h})}class ur{constructor(h){var{uid:g,auth:I,stsTokenManager:Z}=h,re=(0,m._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new pr(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,d.Z)(function*(){const I=yield cn(g,g.stsTokenManager.getToken(g.auth,h));return we(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(h){return function tr(w){return jr.apply(this,arguments)}(this,h)}reload(){return function dn(w){return yr.apply(this,arguments)}(this)}_assign(h){this!==h&&(we(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new ur(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var I=this;return(0,d.Z)(function*(){let Z=!1;h.idToken&&h.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(h),Z=!0),g&&(yield sr(I)),yield I.auth._persistUserIfCurrent(I),Z&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var h=this;return(0,d.Z)(function*(){const g=yield h.getIdToken();return yield cn(h,function On(w,h){return Ht.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var I,Z,re,Be,dt,jt,Jt,Dn;const hr=null!==(I=g.displayName)&&void 0!==I?I:void 0,Ao=null!==(Z=g.email)&&void 0!==Z?Z:void 0,Zs=null!==(re=g.phoneNumber)&&void 0!==re?re:void 0,$l=null!==(Be=g.photoURL)&&void 0!==Be?Be:void 0,As=null!==(dt=g.tenantId)&&void 0!==dt?dt:void 0,Hl=null!==(jt=g._redirectEventId)&&void 0!==jt?jt:void 0,vu=null!==(Jt=g.createdAt)&&void 0!==Jt?Jt:void 0,od=null!==(Dn=g.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:ia,emailVerified:Sc,isAnonymous:$u,providerData:Qa,stsTokenManager:ad}=g;we(ia&&ad,h,"internal-error");const rr=Vt.fromJSON(this.name,ad);we("string"==typeof ia,h,"internal-error"),or(hr,h.name),or(Ao,h.name),we("boolean"==typeof Sc,h,"internal-error"),we("boolean"==typeof $u,h,"internal-error"),or(Zs,h.name),or($l,h.name),or(As,h.name),or(Hl,h.name),or(vu,h.name),or(od,h.name);const ud=new ur({uid:ia,auth:h,email:Ao,emailVerified:Sc,displayName:hr,isAnonymous:$u,photoURL:$l,phoneNumber:Zs,tenantId:As,stsTokenManager:rr,createdAt:vu,lastLoginAt:od});return Qa&&Array.isArray(Qa)&&(ud.providerData=Qa.map(dh=>Object.assign({},dh))),Hl&&(ud._redirectEventId=Hl),ud}static _fromIdTokenResponse(h,g,I=!1){return(0,d.Z)(function*(){const Z=new Vt;Z.updateFromServerResponse(g);const re=new ur({uid:g.localId,auth:h,stsTokenManager:Z,isAnonymous:I});return yield sr(re),re})()}}const ht=new Map;function J(w){xe(w instanceof Function,"Expected a class definition");let h=ht.get(w);return h?(xe(h instanceof w,"Instance stored in cache mismatched with class"),h):(h=new w,ht.set(w,h),h)}const Xe=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,I){var Z=this;return(0,d.Z)(function*(){Z.storage[g]=I})()}_get(g){var I=this;return(0,d.Z)(function*(){const Z=I.storage[g];return void 0===Z?null:Z})()}_remove(g){var I=this;return(0,d.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return w.type="NONE",w})();function xt(w,h,g){return`firebase:${w}:${h}:${g}`}class ge{constructor(h,g,I){this.persistence=h,this.auth=g,this.userKey=I;const{config:Z,name:re}=this.auth;this.fullUserKey=xt(this.userKey,Z.apiKey,re),this.fullPersistenceKey=xt("persistence",Z.apiKey,re),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,d.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?ur._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,d.Z)(function*(){if(g.persistence===h)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,I="authUser"){return(0,d.Z)(function*(){if(!g.length)return new ge(J(Xe),h,I);const Z=(yield Promise.all(g.map(function(){var Jt=(0,d.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return Jt.apply(this,arguments)}}()))).filter(Jt=>Jt);let re=Z[0]||J(Xe);const Be=xt(I,h.config.apiKey,h.name);let dt=null;for(const Jt of g)try{const Dn=yield Jt._get(Be);if(Dn){const hr=ur._fromJSON(h,Dn);Jt!==re&&(dt=hr),re=Jt;break}}catch{}const jt=Z.filter(Jt=>Jt._shouldAllowMigration);return re._shouldAllowMigration&&jt.length?(re=jt[0],dt&&(yield re._set(Be,dt.toJSON())),yield Promise.all(g.map(function(){var Jt=(0,d.Z)(function*(Dn){if(Dn!==re)try{yield Dn._remove(Be)}catch{}});return function(Dn){return Jt.apply(this,arguments)}}())),new ge(re,h,I)):new ge(re,h,I)})()}}function ye(w){const h=w.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Re(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ee(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(kt(h))return"Blackberry";if(Qt(h))return"Webos";if(Q(h))return"Safari";if((h.includes("chrome/")||q(h))&&!h.includes("edge/"))return"Chrome";if(gt(h))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function ee(w=(0,U.z$)()){return/firefox\//i.test(w)}function Q(w=(0,U.z$)()){const h=w.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function q(w=(0,U.z$)()){return/crios\//i.test(w)}function Re(w=(0,U.z$)()){return/iemobile/i.test(w)}function gt(w=(0,U.z$)()){return/android/i.test(w)}function kt(w=(0,U.z$)()){return/blackberry/i.test(w)}function Qt(w=(0,U.z$)()){return/webos/i.test(w)}function he(w=(0,U.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function me(w=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function nt(w=(0,U.z$)()){return he(w)||gt(w)||Qt(w)||kt(w)||/windows phone/i.test(w)||Re(w)}function sn(w,h=[]){let g;switch(w){case"Browser":g=ye((0,U.z$)());break;case"Worker":g=`${ye((0,U.z$)())}-${w}`;break;default:g=w}const I=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${j.SDK_VERSION}/${I}`}function Ge(){return(Ge=(0,d.Z)(function*(w){return(yield z(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bt(w,h){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(w,h){return z(w,"GET","/v2/recaptchaConfig",ie(w,h))})).apply(this,arguments)}function mn(w){return void 0!==w&&void 0!==w.getResponse}function _n(w){return void 0!==w&&void 0!==w.enterprise}class Fn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Rn(w){return new Promise((h,g)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=h,I.onerror=Z=>{const re=ut("internal-error");re.customData=Z,g(re)},I.type="text/javascript",I.charset="UTF-8",function Rr(){var w,h;return null!==(h=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==h?h:document}().appendChild(I)})}function Kr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Vi{constructor(h){this.type="recaptcha-enterprise",this.auth=Dr(h)}verify(h="verify",g=!1){var I=this;return(0,d.Z)(function*(){function re(){return re=(0,d.Z)(function*(dt){if(!g){if(null==dt.tenantId&&null!=dt._agentRecaptchaConfig)return dt._agentRecaptchaConfig.siteKey;if(null!=dt.tenantId&&void 0!==dt._tenantRecaptchaConfigs[dt.tenantId])return dt._tenantRecaptchaConfigs[dt.tenantId].siteKey}return new Promise(function(){var jt=(0,d.Z)(function*(Jt,Dn){bt(dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(hr=>{if(void 0!==hr.recaptchaKey){const Ao=new Fn(hr);return null==dt.tenantId?dt._agentRecaptchaConfig=Ao:dt._tenantRecaptchaConfigs[dt.tenantId]=Ao,Jt(Ao.siteKey)}Dn(new Error("recaptcha Enterprise site key undefined"))}).catch(hr=>{Dn(hr)})});return function(Jt,Dn){return jt.apply(this,arguments)}}())}),re.apply(this,arguments)}function Be(dt,jt,Jt){const Dn=window.grecaptcha;_n(Dn)?Dn.enterprise.ready(()=>{Dn.enterprise.execute(dt,{action:h}).then(hr=>{jt(hr)}).catch(()=>{jt("NO_RECAPTCHA")})}):Jt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((dt,jt)=>{(function Z(dt){return re.apply(this,arguments)})(I.auth).then(Jt=>{if(!g&&_n(window.grecaptcha))Be(Jt,dt,jt);else{if(typeof window>"u")return void jt(new Error("RecaptchaVerifier is only supported in browser"));Rn("https://www.google.com/recaptcha/enterprise.js?render="+Jt).then(()=>{Be(Jt,dt,jt)}).catch(Dn=>{jt(Dn)})}}).catch(Jt=>{jt(Jt)})})})()}}function $n(w,h,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,d.Z)(function*(w,h,g,I=!1){const Z=new Vi(w);let re;try{re=yield Z.verify(g)}catch{re=yield Z.verify(g,!0)}const Be=Object.assign({},h);return Object.assign(Be,I?{captchaResp:re}:{captchaResponse:re}),Object.assign(Be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Be})).apply(this,arguments)}class Ks{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const I=re=>new Promise((Be,dt)=>{try{Be(h(re))}catch(jt){dt(jt)}});I.onAbort=g,this.queue.push(I);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,d.Z)(function*(){if(g.auth.currentUser===h)return;const I=[];try{for(const Z of g.queue)yield Z(h),Z.onAbort&&I.push(Z.onAbort)}catch(Z){I.reverse();for(const re of I)try{re()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}class pi{constructor(h,g,I,Z){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=Z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bi(this),this.idTokenSubscription=new Bi(this),this.beforeStateQueue=new Ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=Z.sdkClientVersion}_initializeWithPersistence(h,g){var I=this;return g&&(this._popupRedirectResolver=J(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var Z,re;if(!I._deleted&&(I.persistenceManager=yield ge.create(I,h),!I._deleted)){if(null!==(Z=I._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(re=I.currentUser)||void 0===re?void 0:re.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,d.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,d.Z)(function*(){var I;const Z=yield g.assertedPersistence.getCurrentUser();let re=Z,Be=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const dt=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,jt=re?._redirectEventId,Jt=yield g.tryRedirectSignIn(h);(!dt||dt===jt)&&Jt?.user&&(re=Jt.user,Be=!0)}if(!re)return g.directlySetCurrentUser(null);if(!re._redirectEventId){if(Be)try{yield g.beforeStateQueue.runMiddleware(re)}catch(dt){re=Z,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(dt))}return re?g.reloadAndSetCurrentUserOrClear(re):g.directlySetCurrentUser(null)}return we(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===re._redirectEventId?g.directlySetCurrentUser(re):g.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(h){var g=this;return(0,d.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,d.Z)(function*(){try{yield sr(h)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ve(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var h=this;return(0,d.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,d.Z)(function*(){const I=h?(0,U.m9)(h):null;return I&&we(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(h,g=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return h&&we(I.tenantId===h.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(h)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(h),I.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,d.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(J(h))}))}initializeRecaptchaConfig(){var h=this;return(0,d.Z)(function*(){const g=yield bt(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Fn(g);null==h.tenantId?h._agentRecaptchaConfig=I:h._tenantRecaptchaConfigs[h.tenantId]=I,I.emailPasswordEnabled&&new Vi(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new U.LL("auth","Firebase",h())}onAuthStateChanged(h,g,I){return this.registerStateListener(this.authStateSubscription,h,g,I)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,I){return this.registerStateListener(this.idTokenSubscription,h,g,I)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var I=this;return(0,d.Z)(function*(){const Z=yield I.getOrInitRedirectPersistenceManager(g);return null===h?Z.removeCurrentUser():Z.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const I=h&&J(h)||g._popupRedirectResolver;we(I,g,"argument-error"),g.redirectPersistenceManager=yield ge.create(g,[J(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,d.Z)(function*(){var I,Z;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===h?g._currentUser:(null===(Z=g.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,d.Z)(function*(){if(h===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,I,Z){if(this._deleted)return()=>{};const re="function"==typeof g?g:g.next.bind(g),Be=this._isInitialized?Promise.resolve():this._initializationPromise;return we(Be,this,"internal-error"),Be.then(()=>re(this.currentUser)),"function"==typeof g?h.addObserver(g,I,Z):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=sn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,d.Z)(function*(){var g;const I={"X-Client-Version":h.clientVersion};h.app.options.appId&&(I["X-Firebase-gmpid"]=h.app.options.appId);const Z=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();Z&&(I["X-Firebase-Client"]=Z);const re=yield h._getAppCheckToken();return re&&(I["X-Firebase-AppCheck"]=re),I})()}_getAppCheckToken(){var h=this;return(0,d.Z)(function*(){var g;const I=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function Et(w,...h){$e.logLevel<=de.in.WARN&&$e.warn(`Auth (${j.SDK_VERSION}): ${w}`,...h)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Dr(w){return(0,U.m9)(w)}class Bi{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,U.ne)(g=>this.observer=g)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Or(w,h,g){const I=Dr(w);we(I._canInitEmulator,I,"emulator-config-failed"),we(/^https?:\/\//.test(h),I,"invalid-emulator-scheme");const Z=!!g?.disableWarnings,re=gi(h),{host:Be,port:dt}=function Lr(w){const h=gi(w),g=/(\/\/)?([^?#/]+)/.exec(w.substr(h.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(I);if(Z){const re=Z[1];return{host:re,port:Tr(I.substr(re.length+1))}}{const[re,Be]=I.split(":");return{host:re,port:Tr(Be)}}}(h);I.config.emulator={url:`${re}//${Be}${null===dt?"":`:${dt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Be,port:dt,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function Rs(){function w(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function gi(w){const h=w.indexOf(":");return h<0?"":w.substr(0,h+1)}function Tr(w){if(!w)return null;const h=Number(w);return isNaN(h)?null:h}class Pi{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _t("not implemented")}_getIdTokenResponse(h){return _t("not implemented")}_linkToIdToken(h,g){return _t("not implemented")}_getReauthenticationResolver(h){return _t("not implemented")}}function Os(w,h){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:resetPassword",ie(w,h))})).apply(this,arguments)}function ji(w,h){return ls.apply(this,arguments)}function ls(){return(ls=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xo(w,h){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:update",ie(w,h))})).apply(this,arguments)}function Ha(w,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithPassword",ie(w,h))})).apply(this,arguments)}function ho(w,h){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:sendOobCode",ie(w,h))})).apply(this,arguments)}function po(w,h){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,d.Z)(function*(w,h){return ho(w,h)})).apply(this,arguments)}function Pe(w,h){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(w,h){return ho(w,h)})).apply(this,arguments)}function wt(w,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(w,h){return ho(w,h)})).apply(this,arguments)}function Sn(w,h){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(w,h){return ho(w,h)})).apply(this,arguments)}function Ln(){return(Ln=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithEmailLink",ie(w,h))})).apply(this,arguments)}function Ri(){return(Ri=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithEmailLink",ie(w,h))})).apply(this,arguments)}class kr extends Pi{constructor(h,g,I,Z=null){super("password",I),this._email=h,this._password=g,this._tenantId=Z}static _fromEmailAndPassword(h,g){return new kr(h,g,"password")}static _fromEmailAndCode(h,g,I=null){return new kr(h,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,d.Z)(function*(){var I;switch(g.signInMethod){case"password":const Z={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=h._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const re=yield $n(h,Z,"signInWithPassword");return Ha(h,re)}return Ha(h,Z).catch(function(){var re=(0,d.Z)(function*(Be){if("auth/missing-recaptcha-token"===Be.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const dt=yield $n(h,Z,"signInWithPassword");return Ha(h,dt)}return Promise.reject(Be)});return function(Be){return re.apply(this,arguments)}}());case"emailLink":return function Qn(w,h){return Ln.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,g){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return ji(h,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function $i(w,h){return Ri.apply(this,arguments)}(h,{idToken:g,email:I._email,oobCode:I._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Xn(w,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithIdp",ie(w,h))})).apply(this,arguments)}class li extends Pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new li(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:Z}=g,re=(0,m._T)(g,["providerId","signInMethod"]);if(!I||!Z)return null;const Be=new li(I,Z);return Be.idToken=re.idToken||void 0,Be.accessToken=re.accessToken||void 0,Be.secret=re.secret,Be.nonce=re.nonce,Be.pendingToken=re.pendingToken||null,Be}_getIdTokenResponse(h){return Xn(h,this.buildRequest())}_linkToIdToken(h,g){const I=this.buildRequest();return I.idToken=g,Xn(h,I)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Xn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,U.xO)(g)}return h}}function ws(w,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:sendVerificationCode",ie(w,h))})).apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithPhoneNumber",ie(w,h))})).apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(w,h){const g=yield Ot(w,"POST","/v1/accounts:signInWithPhoneNumber",ie(w,h));if(g.temporaryProof)throw kn(w,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Js={USER_NOT_FOUND:"user-not-found"};function Qs(){return(Qs=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithPhoneNumber",ie(w,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Js)})).apply(this,arguments)}class Hr extends Pi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Hr({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Hr({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function sa(w,h){return ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Zo(w,h){return Po.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Oi(w,h){return Qs.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:I,verificationCode:Z}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:I,code:Z}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:I,phoneNumber:Z,temporaryProof:re}=h;return I||g||Z||re?new Hr({verificationId:g,verificationCode:I,phoneNumber:Z,temporaryProof:re}):null}}class Xs{constructor(h){var g,I,Z,re,Be,dt;const jt=(0,U.zd)((0,U.pd)(h)),Jt=null!==(g=jt.apiKey)&&void 0!==g?g:null,Dn=null!==(I=jt.oobCode)&&void 0!==I?I:null,hr=function ci(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=jt.mode)&&void 0!==Z?Z:null);we(Jt&&Dn&&hr,"argument-error"),this.apiKey=Jt,this.operation=hr,this.code=Dn,this.continueUrl=null!==(re=jt.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(Be=jt.languageCode)&&void 0!==Be?Be:null,this.tenantId=null!==(dt=jt.tenantId)&&void 0!==dt?dt:null}static parseLink(h){const g=function go(w){const h=(0,U.zd)((0,U.pd)(w)).link,g=h?(0,U.zd)((0,U.pd)(h)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(w)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||g||h||w}(h);try{return new Xs(g)}catch{return null}}}let oa=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(g,I){return kr._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const Z=Xs.parseLink(I);return we(Z,"argument-error"),kr._fromEmailAndCode(g,Z.code,Z.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Er{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class hs extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class mo extends hs{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return we("providerId"in g&&"signInMethod"in g,"argument-error"),li._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return we(h.idToken||h.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return mo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return mo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:Z,pendingToken:re,nonce:Be,providerId:dt}=h;if(!I&&!Z&&!g&&!re||!dt)return null;try{return new mo(dt)._credential({idToken:g,accessToken:I,nonce:Be,pendingToken:re})}catch{return null}}}let fs=(()=>{class w extends hs{constructor(){super("facebook.com")}static credential(g){return li._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),zr=(()=>{class w extends hs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return li._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:Z}=g;if(!I&&!Z)return null;try{return w.credential(I,Z)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Gi=(()=>{class w extends hs{constructor(){super("github.com")}static credential(g){return li._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Zi extends Pi{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Xn(h,this.buildRequest())}_linkToIdToken(h,g){const I=this.buildRequest();return I.idToken=g,Xn(h,I)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Xn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:Z,pendingToken:re}=g;return I&&Z&&re&&I===Z?new Zi(I,re):null}static _create(h,g){return new Zi(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vo extends Er{constructor(h){we(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return vo.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return vo.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Zi.fromJSON(h);return we(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:I}=h;if(!g||!I)return null;try{return Zi._create(I,g)}catch{return null}}}let Ro=(()=>{class w extends hs{constructor(){super("twitter.com")}static credential(g,I){return li._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:Z}=g;if(!I||!Z)return null;try{return w.credential(I,Z)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function eo(w,h){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signUp",ie(w,h))})).apply(this,arguments)}class qr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,I,Z=!1){return(0,d.Z)(function*(){const re=yield ur._fromIdTokenResponse(h,I,Z),Be=to(I);return new qr({user:re,providerId:Be,_tokenResponse:I,operationType:g})})()}static _forOperation(h,g,I){return(0,d.Z)(function*(){yield h._updateTokensIfNecessary(I,!0);const Z=to(I);return new qr({user:h,providerId:Z,_tokenResponse:I,operationType:g})})()}}function to(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Cn(w){return ks.apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(w){var h;const g=Dr(w);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new qr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield eo(g,{returnSecureToken:!0}),Z=yield qr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Fs extends U.ZR{constructor(h,g,I,Z){var re;super(g.code,g.message),this.operationType=I,this.user=Z,Object.setPrototypeOf(this,Fs.prototype),this.customData={appName:h.name,tenantId:null!==(re=h.tenantId)&&void 0!==re?re:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(h,g,I,Z){return new Fs(h,g,I,Z)}}function aa(w,h,g,I){return("reauthenticate"===h?g._getReauthenticationResolver(w):g._getIdTokenResponse(w)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?Fs._fromErrorAndOperation(w,re,h,I):re})}function Ar(w){return new Set(w.map(({providerId:h})=>h).filter(h=>!!h))}function Ni(w,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(w,h){const g=(0,U.m9)(w);yield At(!0,g,h);const{providerUserInfo:I}=yield En(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),Z=Ar(I||[]);return g.providerData=g.providerData.filter(re=>Z.has(re.providerId)),Z.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function bi(w,h){return ua.apply(this,arguments)}function ua(){return(ua=(0,d.Z)(function*(w,h,g=!1){const I=yield cn(w,h._linkToIdToken(w.auth,yield w.getIdToken()),g);return qr._forOperation(w,"link",I)})).apply(this,arguments)}function At(w,h,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(w,h,g){yield sr(h);const Z=!1===w?"provider-already-linked":"no-such-provider";we(Ar(h.providerData).has(g)===w,h.auth,Z)})).apply(this,arguments)}function no(w,h){return ro.apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(w,h,g=!1){const{auth:I}=w,Z="reauthenticate";try{const re=yield cn(w,aa(I,Z,h,w),g);we(re.idToken,I,"internal-error");const Be=fr(re.idToken);we(Be,I,"internal-error");const{sub:dt}=Be;return we(w.uid===dt,I,"user-mismatch"),qr._forOperation(w,Z,re)}catch(re){throw"auth/user-not-found"===re?.code&&Ce(I,"user-mismatch"),re}})).apply(this,arguments)}function Gr(w,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(w,h,g=!1){const I="signIn",Z=yield aa(w,I,h),re=yield qr._fromIdTokenResponse(w,I,Z);return g||(yield w._updateCurrentUser(re.user)),re})).apply(this,arguments)}function zi(w,h){return es.apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(w,h){return Gr(Dr(w),h)})).apply(this,arguments)}function Oo(w,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(w,h){const g=(0,U.m9)(w);return yield At(!1,g,h.providerId),bi(g,h)})).apply(this,arguments)}function Es(w,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(w,h){return no((0,U.m9)(w),h)})).apply(this,arguments)}function V(w,h){return k.apply(this,arguments)}function k(){return(k=(0,d.Z)(function*(w,h){return Ot(w,"POST","/v1/accounts:signInWithCustomToken",ie(w,h))})).apply(this,arguments)}function O(w,h){return X.apply(this,arguments)}function X(){return(X=(0,d.Z)(function*(w,h){const g=Dr(w),I=yield V(g,{token:h,returnSecureToken:!0}),Z=yield qr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class lt{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?rn._fromServerResponse(h,g):"totpInfo"in g?Zn._fromServerResponse(h,g):Ce(h,"internal-error")}}class rn extends lt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new rn(g)}}class Zn extends lt{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new Zn(g)}}function ti(w,h,g){var I;we((null===(I=g.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),we(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(we(g.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(we(g.android.packageName.length>0,w,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function qi(w,h,g){return Di.apply(this,arguments)}function Di(){return Di=(0,d.Z)(function*(w,h,g){var I;const Z=Dr(w),re={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=Z._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Be=yield $n(Z,re,"getOobCode",!0);g&&ti(Z,Be,g),yield Pe(Z,Be)}else g&&ti(Z,re,g),yield Pe(Z,re).catch(function(){var Be=(0,d.Z)(function*(dt){if("auth/missing-recaptcha-token"!==dt.code)return Promise.reject(dt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const jt=yield $n(Z,re,"getOobCode",!0);g&&ti(Z,jt,g),yield Pe(Z,jt)}});return function(dt){return Be.apply(this,arguments)}}())}),Di.apply(this,arguments)}function Is(w,h,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(w,h,g){yield Os((0,U.m9)(w),{oobCode:h,newPassword:g})})).apply(this,arguments)}function wo(w,h){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(w,h){yield xo((0,U.m9)(w),{oobCode:h})})).apply(this,arguments)}function ki(w,h){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(w,h){const g=(0,U.m9)(w),I=yield Os(g,{oobCode:h}),Z=I.requestType;switch(we(Z,g,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":we(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":we(I.mfaInfo,g,"internal-error");default:we(I.email,g,"internal-error")}let re=null;return I.mfaInfo&&(re=lt._fromServerResponse(Dr(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:re},operation:Z}})).apply(this,arguments)}function xa(w,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(w,h){const{data:g}=yield ki((0,U.m9)(w),h);return g.email})).apply(this,arguments)}function zo(w,h,g){return ko.apply(this,arguments)}function ko(){return ko=(0,d.Z)(function*(w,h,g){var I;const Z=Dr(w),re={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let Be;if(null!==(I=Z._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Jt=yield $n(Z,re,"signUpPassword");Be=eo(Z,Jt)}else Be=eo(Z,re).catch(function(){var Jt=(0,d.Z)(function*(Dn){if("auth/missing-recaptcha-token"===Dn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const hr=yield $n(Z,re,"signUpPassword");return eo(Z,hr)}return Promise.reject(Dn)});return function(Dn){return Jt.apply(this,arguments)}}());const dt=yield Be.catch(Jt=>Promise.reject(Jt)),jt=yield qr._fromIdTokenResponse(Z,"signIn",dt);return yield Z._updateCurrentUser(jt.user),jt}),ko.apply(this,arguments)}function qo(w,h,g){return zi((0,U.m9)(w),oa.credential(h,g))}function Ti(w,h,g){return Us.apply(this,arguments)}function Us(){return Us=(0,d.Z)(function*(w,h,g){var I;const Z=Dr(w),re={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function Be(dt,jt){we(jt.handleCodeInApp,Z,"argument-error"),jt&&ti(Z,dt,jt)}if(null!==(I=Z._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const dt=yield $n(Z,re,"getOobCode",!0);Be(dt,g),yield wt(Z,dt)}else Be(re,g),yield wt(Z,re).catch(function(){var dt=(0,d.Z)(function*(jt){if("auth/missing-recaptcha-token"!==jt.code)return Promise.reject(jt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Jt=yield $n(Z,re,"getOobCode",!0);Be(Jt,g),yield wt(Z,Jt)}});return function(jt){return dt.apply(this,arguments)}}())}),Us.apply(this,arguments)}function la(w,h){return"EMAIL_SIGNIN"===Xs.parseLink(h)?.operation}function Eo(w,h,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w),Z=oa.credentialWithLink(h,g||Ae());return we(Z._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),zi(I,Z)})).apply(this,arguments)}function mi(w,h){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:createAuthUri",ie(w,h))})).apply(this,arguments)}function Ir(w,h){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(w,h){const I={identifier:h,continueUri:Ze()?Ae():"http://localhost"},{signinMethods:Z}=yield mi((0,U.m9)(w),I);return Z||[]})).apply(this,arguments)}function ca(w,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(w,h){const g=(0,U.m9)(w),Z={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};h&&ti(g.auth,Z,h);const{email:re}=yield po(g.auth,Z);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function Wo(w,h,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:h};g&&ti(I.auth,re,g);const{email:Be}=yield Sn(I.auth,re);Be!==w.email&&(yield w.reload())})).apply(this,arguments)}function bs(w,h){return ts.apply(this,arguments)}function ts(){return(ts=(0,d.Z)(function*(w,h){return z(w,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ko(w,h){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(w,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const I=(0,U.m9)(w),re={idToken:yield I.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},Be=yield cn(I,bs(I.auth,re));I.displayName=Be.displayName||null,I.photoURL=Be.photoUrl||null;const dt=I.providerData.find(({providerId:jt})=>"password"===jt);dt&&(dt.displayName=I.displayName,dt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Be)})).apply(this,arguments)}function Ki(w,h){return ns((0,U.m9)(w),h,null)}function yi(w,h){return ns((0,U.m9)(w),null,h)}function ns(w,h,g){return io.apply(this,arguments)}function io(){return(io=(0,d.Z)(function*(w,h,g){const{auth:I}=w,re={idToken:yield w.getIdToken(),returnSecureToken:!0};h&&(re.email=h),g&&(re.password=g);const Be=yield cn(w,ji(I,re));yield w._updateTokensIfNecessary(Be,!0)})).apply(this,arguments)}class oo{constructor(h,g,I={}){this.isNewUser=h,this.providerId=g,this.profile=I}}class Io extends oo{constructor(h,g,I,Z){super(h,g,I),this.username=Z}}class Lo extends oo{constructor(h,g){super(h,"facebook.com",g)}}class ou extends Io{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class S extends oo{constructor(h,g){super(h,"google.com",g)}}class $ extends Io{constructor(h,g,I){super(h,"twitter.com",g,I)}}function R(w){const{user:h,_tokenResponse:g}=w;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function so(w){var h,g;if(!w)return null;const{providerId:I}=w,Z=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},re=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const Be=null===(g=null===(h=fr(w.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(Be)return new oo(re,"anonymous"!==Be&&"custom"!==Be?Be:null)}if(!I)return null;switch(I){case"facebook.com":return new Lo(re,Z);case"github.com":return new ou(re,Z);case"google.com":return new S(re,Z);case"twitter.com":return new $(re,Z,w.screenName||null);case"custom":case"anonymous":return new oo(re,null);default:return new oo(re,I,Z)}}(g)}class Vn{constructor(h,g,I){this.type=h,this.credential=g,this.auth=I}static _fromIdtoken(h,g){return new Vn("enroll",h,g)}static _fromMfaPendingCredential(h){return new Vn("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,I;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Vn._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(I=h.multiFactorSession)&&void 0!==I&&I.idToken)return Vn._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ni{constructor(h,g,I){this.session=h,this.hints=g,this.signInResolver=I}static _fromError(h,g){const I=Dr(h),Z=g.customData._serverResponse,re=(Z.mfaInfo||[]).map(dt=>lt._fromServerResponse(I,dt));we(Z.mfaPendingCredential,I,"internal-error");const Be=Vn._fromMfaPendingCredential(Z.mfaPendingCredential);return new ni(Be,re,function(){var dt=(0,d.Z)(function*(jt){const Jt=yield jt._process(I,Be);delete Z.mfaInfo,delete Z.mfaPendingCredential;const Dn=Object.assign(Object.assign({},Z),{idToken:Jt.idToken,refreshToken:Jt.refreshToken});switch(g.operationType){case"signIn":const hr=yield qr._fromIdTokenResponse(I,g.operationType,Dn);return yield I._updateCurrentUser(hr.user),hr;case"reauthenticate":return we(g.user,I,"internal-error"),qr._forOperation(g.user,g.operationType,Dn);default:Ce(I,"internal-error")}});return function(jt){return dt.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,d.Z)(function*(){return g.signInResolver(h)})()}}function js(w,h){var g;const I=(0,U.m9)(w),Z=h;return we(h.customData.operationType,I,"argument-error"),we(null===(g=Z.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),ni._fromError(I,Z)}function St(w,h){return z(w,"POST","/v2/accounts/mfaEnrollment:start",ie(w,h))}class on{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>lt._fromServerResponse(h.auth,I)))})}static _fromUser(h){return new on(h)}getSession(){var h=this;return(0,d.Z)(function*(){return Vn._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var I=this;return(0,d.Z)(function*(){const Z=h,re=yield I.getSession(),Be=yield cn(I.user,Z._process(I.user.auth,re,g));return yield I.user._updateTokensIfNecessary(Be),I.user.reload()})()}unenroll(h){var g=this;return(0,d.Z)(function*(){const I="string"==typeof h?h:h.uid,Z=yield g.user.getIdToken();try{const re=yield cn(g.user,function Yt(w,h){return z(w,"POST","/v2/accounts/mfaEnrollment:withdraw",ie(w,h))}(g.user.auth,{idToken:Z,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Be})=>Be!==I),yield g.user._updateTokensIfNecessary(re),yield g.user.reload()}catch(re){throw re}})()}}const da=new WeakMap;function zt(w){const h=(0,U.m9)(w);return da.has(h)||da.set(h,on._fromUser(h)),da.get(h)}const it="__sak";class Mt{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(it,"1"),this.storage.removeItem(it),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const nl=(()=>{class w extends Mt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oi(){const w=(0,U.z$)();return Q(w)||he(w)}()&&function Ft(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=nt(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const Z=this.storage.getItem(I),re=this.localCache[I];Z!==re&&g(I,re,Z)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((dt,jt,Jt)=>{this.notifyListeners(dt,Jt)});const Z=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const dt=this.storage.getItem(Z);if(g.newValue!==dt)null!==g.newValue?this.storage.setItem(Z,g.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===g.newValue&&!I)return}const re=()=>{const dt=this.storage.getItem(Z);!I&&this.localCache[Z]===dt||this.notifyListeners(Z,dt)},Be=this.storage.getItem(Z);!function Ue(){return(0,U.w1)()&&10===document.documentMode}()||Be===g.newValue||g.newValue===g.oldValue?re():setTimeout(re,10)}notifyListeners(g,I){this.localCache[g]=I;const Z=this.listeners[g];if(Z)for(const re of Array.from(Z))re(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var Z=()=>super._set,re=this;return(0,d.Z)(function*(){yield Z().call(re,g,I),re.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,Z=this;return(0,d.Z)(function*(){const re=yield I().call(Z,g);return Z.localCache[g]=JSON.stringify(re),re})()}_remove(g){var I=()=>super._remove,Z=this;return(0,d.Z)(function*(){yield I().call(Z,g),delete Z.localCache[g]})()}}return w.type="LOCAL",w})(),ha=(()=>{class w extends Mt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return w.type="SESSION",w})();let Ol=(()=>{class w{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(re=>re.isListeningto(g));if(I)return I;const Z=new w(g);return this.receivers.push(Z),Z}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,d.Z)(function*(){const Z=g,{eventId:re,eventType:Be,data:dt}=Z.data,jt=I.handlersMap[Be];if(!jt?.size)return;Z.ports[0].postMessage({status:"ack",eventId:re,eventType:Be});const Jt=Array.from(jt).map(function(){var hr=(0,d.Z)(function*(Ao){return Ao(Z.origin,dt)});return function(Ao){return hr.apply(this,arguments)}}()),Dn=yield function Rl(w){return Promise.all(w.map(function(){var h=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return h.apply(this,arguments)}}()))}(Jt);Z.ports[0].postMessage({status:"done",eventId:re,eventType:Be,response:Dn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function fa(w="",h=10){let g="";for(let I=0;I<h;I++)g+=Math.floor(10*Math.random());return w+g}class za{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,I=50){var Z=this;return(0,d.Z)(function*(){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let Be,dt;return new Promise((jt,Jt)=>{const Dn=fa("",20);re.port1.start();const hr=setTimeout(()=>{Jt(new Error("unsupported_event"))},I);dt={messageChannel:re,onMessage(Ao){const Zs=Ao;if(Zs.data.eventId===Dn)switch(Zs.data.status){case"ack":clearTimeout(hr),Be=setTimeout(()=>{Jt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Be),jt(Zs.data.response);break;default:clearTimeout(hr),clearTimeout(Be),Jt(new Error("invalid_response"))}}},Z.handlers.add(dt),re.port1.addEventListener("message",dt.onMessage),Z.target.postMessage({eventType:h,eventId:Dn,data:g},[re.port2])}).finally(()=>{dt&&Z.removeMessageHandler(dt)})})()}}function ai(){return window}function bo(){return typeof ai().WorkerGlobalScope<"u"&&"function"==typeof ai().importScripts}function Pr(){return(Pr=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bn="firebaseLocalStorageDb",nr="firebaseLocalStorage",qt="fbase_key";class gs{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ga(w,h){return w.transaction([nr],h?"readwrite":"readonly").objectStore(nr)}function _r(){const w=indexedDB.open(bn,1);return new Promise((h,g)=>{w.addEventListener("error",()=>{g(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(nr,{keyPath:qt})}catch(Z){g(Z)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains(nr)?h(I):(I.close(),yield function Jo(){const w=indexedDB.deleteDatabase(bn);return new gs(w).toPromise()}(),h(yield _r()))}))})}function Ru(w,h,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(w,h,g){const I=ga(w,!0).put({[qt]:h,value:g});return new gs(I).toPromise()})).apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(w,h){const g=ga(w,!1).get(h),I=yield new gs(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Nl(w,h){const g=ga(w,!0).delete(h);return new gs(g).toPromise()}const rl=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield _r()),g.db})()}_withRetries(g){var I=this;return(0,d.Z)(function*(){let Z=0;for(;;)try{const re=yield I._openDb();return yield g(re)}catch(re){if(Z++>3)throw re;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return bo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Ol._getInstance(function $s(){return bo()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(Z,re){return{keyProcessed:(yield g._poll()).includes(re.key)}});return function(Z,re){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(Z,re){return["keyChanged"]});return function(Z,re){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var I,Z;if(g.activeServiceWorker=yield function Pu(){return Pr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new za(g.activeServiceWorker);const re=yield g.sender._send("ping",{},800);!re||(null===(I=re[0])||void 0===I?void 0:I.fulfilled)&&(null===(Z=re[0])||void 0===Z?void 0:Z.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function fn(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield _r();return yield Ru(g,it,"1"),yield Nl(g,it),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var Z=this;return(0,d.Z)(function*(){return Z._withPendingWrite((0,d.Z)(function*(){return yield Z._withRetries(re=>Ru(re,g,I)),Z.localCache[g]=I,Z.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,d.Z)(function*(){const Z=yield I._withRetries(re=>function Vo(w,h){return ma.apply(this,arguments)}(re,g));return I.localCache[g]=Z,Z})()}_remove(g){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(Z=>Nl(Z,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const I=yield g._withRetries(Be=>{const dt=ga(Be,!1).getAll();return new gs(dt).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const Z=[],re=new Set;for(const{fbase_key:Be,value:dt}of I)re.add(Be),JSON.stringify(g.localCache[Be])!==JSON.stringify(dt)&&(g.notifyListeners(Be,dt),Z.push(Be));for(const Be of Object.keys(g.localCache))g.localCache[Be]&&!re.has(Be)&&(g.notifyListeners(Be,null),Z.push(Be));return Z})()}notifyListeners(g,I){this.localCache[g]=I;const Z=this.listeners[g];if(Z)for(const re of Array.from(Z))re(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function va(w,h){return z(w,"POST","/v2/accounts/mfaSignIn:start",ie(w,h))}const _a=1e12;class Ai{constructor(h){this.auth=h,this.counter=_a,this._widgets=new Map}render(h,g){const I=this.counter;return this._widgets.set(I,new Si(h,this.auth.name,g||{})),this.counter++,I}reset(h){var g;const I=h||_a;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(h){var g;return(null===(g=this._widgets.get(h||_a))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,d.Z)(function*(){var I;return null===(I=g._widgets.get(h||_a))||void 0===I||I.execute(),""})()}}class Si{constructor(h,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof h?document.getElementById(h):h;we(Z,"argument-error",{appName:g}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function au(w){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hs=Kr("rcb"),Pa=new Oe(3e4,6e4);class Nu{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=ai().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return we(function kl(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&mn(ai().grecaptcha)?Promise.resolve(ai().grecaptcha):new Promise((I,Z)=>{const re=ai().setTimeout(()=>{Z(ut(h,"network-request-failed"))},Pa.get());ai()[Hs]=()=>{ai().clearTimeout(re),delete ai()[Hs];const dt=ai().grecaptcha;if(!dt||!mn(dt))return void Z(ut(h,"internal-error"));const jt=dt.render;dt.render=(Jt,Dn)=>{const hr=jt(Jt,Dn);return this.counter++,hr},this.hostLanguage=g,I(dt)},Rn(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Hs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(re),Z(ut(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=ai().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ms{load(h){return(0,d.Z)(function*(){return new Ai(h)})()}clearedOneInstance(){}}const Wa="recaptcha",Uo={theme:"light",type:"image"};class ys{constructor(h,g=Object.assign({},Uo),I){this.parameters=g,this.type=Wa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dr(I),this.isInvisible="invisible"===this.parameters.size,we(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof h?document.getElementById(h):h;we(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ms:new Nu,this.validateStartingState()}verify(){var h=this;return(0,d.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),I=h.getAssertedRecaptcha();return I.getResponse(g)||new Promise(re=>{const Be=dt=>{!dt||(h.tokenChangeListeners.delete(Be),re(dt))};h.tokenChangeListeners.add(Be),h.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){we(!this.parameters.sitekey,this.auth,"argument-error"),we(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),we(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof h)h(g);else if("string"==typeof h){const I=ai()[h];"function"==typeof I&&I(g)}}}assertNotDestroyed(){we(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,d.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,d.Z)(function*(){we(Ze()&&!bo(),h.auth,"internal-error"),yield function vi(){let w=null;return new Promise(h=>{"complete"!==document.readyState?(w=()=>h(),window.addEventListener("load",w)):h()}).catch(h=>{throw w&&window.removeEventListener("load",w),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function He(w){return Ge.apply(this,arguments)}(h.auth);we(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return we(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Hr._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function C(w,h,g){return v.apply(this,arguments)}function v(){return(v=(0,d.Z)(function*(w,h,g){const I=Dr(w),Z=yield Ie(I,h,(0,U.m9)(g));return new _(Z,re=>zi(I,re))})).apply(this,arguments)}function M(w,h,g){return F.apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w);yield At(!1,I,"phone");const Z=yield Ie(I.auth,h,(0,U.m9)(g));return new _(Z,re=>Oo(I,re))})).apply(this,arguments)}function W(w,h,g){return ve.apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w),Z=yield Ie(I.auth,h,(0,U.m9)(g));return new _(Z,re=>Es(I,re))})).apply(this,arguments)}function Ie(w,h,g){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(w,h,g){var I;const Z=yield g.verify();try{let re;if(we("string"==typeof Z,w,"argument-error"),we(g.type===Wa,w,"argument-error"),re="string"==typeof h?{phoneNumber:h}:h,"session"in re){const Be=re.session;if("phoneNumber"in re)return we("enroll"===Be.type,w,"internal-error"),(yield St(w,{idToken:Be.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{we("signin"===Be.type,w,"internal-error");const dt=(null===(I=re.multiFactorHint)||void 0===I?void 0:I.uid)||re.multiFactorUid;return we(dt,w,"missing-multi-factor-info"),(yield va(w,{mfaPendingCredential:Be.credential,mfaEnrollmentId:dt,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Be}=yield ws(w,{phoneNumber:re.phoneNumber,recaptchaToken:Z});return Be}}finally{g._reset()}})).apply(this,arguments)}function Gt(w,h){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(w,h){yield bi((0,U.m9)(w),h)})).apply(this,arguments)}let un=(()=>{class w{constructor(g){this.providerId=w.PROVIDER_ID,this.auth=Dr(g)}verifyPhoneNumber(g,I){return Ie(this.auth,g,(0,U.m9)(I))}static credential(g,I){return Hr._fromVerification(g,I)}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:Z}=g;return I&&Z?Hr._fromTokenResponse(I,Z):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Wn(w,h){return h?J(h):(we(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Mi extends Pi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Xn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Xn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Xn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function ui(w){return Gr(w.auth,new Mi(w),w.bypassAuthState)}function Xo(w){const{auth:h,user:g}=w;return we(g,h,"internal-error"),no(g,new Mi(w),w.bypassAuthState)}function Gs(w){return wa.apply(this,arguments)}function wa(){return(wa=(0,d.Z)(function*(w){const{auth:h,user:g}=w;return we(g,h,"internal-error"),bi(g,new Mi(w),w.bypassAuthState)})).apply(this,arguments)}class ea{constructor(h,g,I,Z,re=!1){this.auth=h,this.resolver=I,this.user=Z,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,d.Z)(function*(I,Z){h.pendingPromise={resolve:I,reject:Z};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(re){h.reject(re)}});return function(I,Z){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:Z,postBody:re,tenantId:Be,error:dt,type:jt}=h;if(dt)return void g.reject(dt);const Jt={auth:g.auth,requestUri:I,sessionId:Z,tenantId:Be||void 0,postBody:re||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(jt)(Jt))}catch(Dn){g.reject(Dn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ui;case"linkViaPopup":case"linkViaRedirect":return Gs;case"reauthViaPopup":case"reauthViaRedirect":return Xo;default:Ce(this.auth,"internal-error")}}resolve(h){xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ra=new Oe(2e3,1e4);function Ts(w,h,g){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(w,h,g){const I=Dr(w);It(w,h,Er);const Z=Wn(I,g);return new Ca(I,"signInViaPopup",h,Z).executeNotNull()})).apply(this,arguments)}function Fi(w,h,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w);It(I.auth,h,Er);const Z=Wn(I.auth,g);return new Ca(I.auth,"reauthViaPopup",h,Z,I).executeNotNull()})).apply(this,arguments)}function Fl(w,h,g){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w);It(I.auth,h,Er);const Z=Wn(I.auth,g);return new Ca(I.auth,"linkViaPopup",h,Z,I).executeNotNull()})).apply(this,arguments)}let Ca=(()=>{class w extends ea{constructor(g,I,Z,re,Be){super(g,I,re,Be),this.provider=Z,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const I=yield g.execute();return we(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,d.Z)(function*(){xe(1===g.filter.length,"Popup operations only handle one event");const I=fa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(Z=>{g.reject(Z)}),g.resolver._isIframeWebStorageSupported(g.auth,Z=>{Z||g.reject(ut(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,Z;this.pollId=null!==(Z=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ut(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Ra.get())};g()}}return w.currentPopupAction=null,w})();const Oa=new Map;class Ka extends ea{constructor(h,g,I=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,d.Z)(function*(){let I=Oa.get(g.auth._key());if(!I){try{const re=(yield function Ll(w,h){return wr.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;I=()=>Promise.resolve(re)}catch(Z){I=()=>Promise.reject(Z)}Oa.set(g.auth._key(),I)}return g.bypassAuthState||Oa.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(I,h);if("unknown"!==h.type){if(h.eventId){const Z=yield I.auth._redirectUserForId(h.eventId);if(Z)return I.user=Z,g().call(I,h);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function wr(){return(wr=(0,d.Z)(function*(w,h){const g=rs(h),I=Bo(w);if(!(yield I._isAvailable()))return!1;const Z="true"===(yield I._get(g));return yield I._remove(g),Z})).apply(this,arguments)}function cu(w,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(w,h){return Bo(w)._set(rs(h),"true")})).apply(this,arguments)}function ii(){Oa.clear()}function Vl(w,h){Oa.set(w._key(),h)}function Bo(w){return J(w._redirectPersistence)}function rs(w){return xt("pendingRedirect",w.config.apiKey,w.name)}function sl(w,h,g){return function Tc(w,h,g){return _i.apply(this,arguments)}(w,h,g)}function _i(){return(_i=(0,d.Z)(function*(w,h,g){const I=Dr(w);It(w,h,Er),yield I._initializationPromise;const Z=Wn(I,g);return yield cu(Z,I),Z._openRedirect(I,h,"signInViaRedirect")})).apply(this,arguments)}function du(w,h,g){return function Do(w,h,g){return si.apply(this,arguments)}(w,h,g)}function si(){return(si=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w);It(I.auth,h,Er),yield I.auth._initializationPromise;const Z=Wn(I.auth,g);yield cu(Z,I.auth);const re=yield ka(I);return Z._openRedirect(I.auth,h,"reauthViaRedirect",re)})).apply(this,arguments)}function Na(w,h,g){return function Fu(w,h,g){return Lu.apply(this,arguments)}(w,h,g)}function Lu(){return(Lu=(0,d.Z)(function*(w,h,g){const I=(0,U.m9)(w);It(I.auth,h,Er),yield I.auth._initializationPromise;const Z=Wn(I.auth,g);yield At(!1,I,h.providerId),yield cu(Z,I.auth);const re=yield ka(I);return Z._openRedirect(I.auth,h,"linkViaRedirect",re)})).apply(this,arguments)}function ol(w,h){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(w,h){return yield Dr(w)._initializationPromise,ta(w,h,!1)})).apply(this,arguments)}function ta(w,h){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(w,h,g=!1){const I=Dr(w),Z=Wn(I,h),Be=yield new Ka(I,Z,g).execute();return Be&&!g&&(delete Be.user._redirectEventId,yield I._persistUserIfCurrent(Be.user),yield I._setRedirectUser(null,h)),Be})).apply(this,arguments)}function ka(w){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(w){const h=fa(`${w.uid}:::`);return w._redirectEventId=h,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),h})).apply(this,arguments)}class Ea{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(h,I)&&(g=!0,this.sendToConsumer(h,I),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ya(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hu(w);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var I;if(h.error&&!hu(h)){const Z=(null===(I=h.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(ut(this.auth,Z))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const I=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&I}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ra(h))}saveEventToCache(h){this.cachedEventUids.add(ra(h)),this.lastProcessedEventTime=Date.now()}}function ra(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(h=>h).join("-")}function hu({type:w,error:h}){return"unknown"===w&&"auth/no-auth-event"===h?.code}function fu(w){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,d.Z)(function*(w,h={}){return z(w,"GET","/v1/projects",h)})).apply(this,arguments)}const Fa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function pu(){return(pu=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:h}=yield fu(w);for(const g of h)try{if(gu(g))return}catch{}Ce(w,"unauthorized-domain")})).apply(this,arguments)}function gu(w){const h=Ae(),{protocol:g,hostname:I}=new URL(h);if(w.startsWith("chrome-extension://")){const Be=new URL(w);return""===Be.hostname&&""===I?"chrome-extension:"===g&&w.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&Be.hostname===I}if(!ed.test(g))return!1;if(Fa.test(w))return I===w;const Z=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(I)}const ul=new Oe(3e4,6e4);function Uu(){const w=ai().___jsl;if(w?.H)for(const h of Object.keys(w.H))if(w.H[h].r=w.H[h].r||[],w.H[h].L=w.H[h].L||[],w.H[h].r=[...w.H[h].L],w.CP)for(let g=0;g<w.CP.length;g++)w.CP[g]=null}let Ia=null;function nd(w){return Ia=Ia||function td(w){return new Promise((h,g)=>{var I,Z,re;function Be(){Uu(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Uu(),g(ut(w,"network-request-failed"))},timeout:ul.get()})}if(null!==(Z=null===(I=ai().gapi)||void 0===I?void 0:I.iframes)&&void 0!==Z&&Z.Iframe)h(gapi.iframes.getContext());else{if(null===(re=ai().gapi)||void 0===re||!re.load){const dt=Kr("iframefcb");return ai()[dt]=()=>{gapi.load?Be():g(ut(w,"network-request-failed"))},Rn(`https://apis.google.com/js/api.js?onload=${dt}`).catch(jt=>g(jt))}Be()}}).catch(h=>{throw Ia=null,h})}(w),Ia}const ba=new Oe(5e3,15e3),ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ss(w){const h=w.config;we(h.authDomain,w,"auth-domain-config-required");const g=h.emulator?Ye(h,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:h.apiKey,appName:w.name,v:j.SDK_VERSION},Z=Wr.get(w.config.apiHost);Z&&(I.eid=Z);const re=w._getFrameworks();return re.length&&(I.fw=re.join(",")),`${g}?${(0,U.xO)(I).slice(1)}`}function E(){return E=(0,d.Z)(function*(w){const h=yield nd(w),g=ai().gapi;return we(g,w,"internal-error"),h.open({where:document.body,url:ss(w),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ll,dontclear:!0},I=>new Promise(function(){var Z=(0,d.Z)(function*(re,Be){yield I.restyle({setHideOnLeave:!1});const dt=ut(w,"network-request-failed"),jt=ai().setTimeout(()=>{Be(dt)},ba.get());function Jt(){ai().clearTimeout(jt),re(I)}I.ping(Jt).then(Jt,()=>{Be(dt)})});return function(re,Be){return Z.apply(this,arguments)}}()))}),E.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pt{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Un=encodeURIComponent("fac");function vs(w,h,g,I,Z,re){return fi.apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(w,h,g,I,Z,re){we(w.config.authDomain,w,"auth-domain-config-required"),we(w.config.apiKey,w,"invalid-api-key");const Be={apiKey:w.config.apiKey,appName:w.name,authType:g,redirectUrl:I,v:j.SDK_VERSION,eventId:Z};if(h instanceof Er){h.setDefaultLanguage(w.languageCode),Be.providerId=h.providerId||"",(0,U.xb)(h.getCustomParameters())||(Be.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Dn,hr]of Object.entries(re||{}))Be[Dn]=hr}if(h instanceof hs){const Dn=h.getScopes().filter(hr=>""!==hr);Dn.length>0&&(Be.scopes=Dn.join(","))}w.tenantId&&(Be.tid=w.tenantId);const dt=Be;for(const Dn of Object.keys(dt))void 0===dt[Dn]&&delete dt[Dn];const jt=yield w._getAppCheckToken(),Jt=jt?`#${Un}=${encodeURIComponent(jt)}`:"";return`${Li(w)}?${(0,U.xO)(dt).slice(1)}${Jt}`})).apply(this,arguments)}function Li({config:w}){return w.emulator?Ye(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}const Da="webStorageSupport",co=class mu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ha,this._completeRedirectFn=ta,this._overrideRedirectResult=Vl}_openPopup(h,g,I,Z){var re=this;return(0,d.Z)(function*(){var Be;xe(null===(Be=re.eventManagers[h._key()])||void 0===Be?void 0:Be.manager,"_initialize() not called before _openPopup()");const dt=yield vs(h,g,I,Ae(),Z);return function Kt(w,h,g,I=500,Z=600){const re=Math.max((window.screen.availHeight-Z)/2,0).toString(),Be=Math.max((window.screen.availWidth-I)/2,0).toString();let dt="";const jt=Object.assign(Object.assign({},x),{width:I.toString(),height:Z.toString(),top:re,left:Be}),Jt=(0,U.z$)().toLowerCase();g&&(dt=q(Jt)?"_blank":g),ee(Jt)&&(h=h||"http://localhost",jt.scrollbars="yes");const Dn=Object.entries(jt).reduce((Ao,[Zs,$l])=>`${Ao}${Zs}=${$l},`,"");if(function oe(w=(0,U.z$)()){var h;return he(w)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Jt)&&"_self"!==dt)return function Zt(w,h){const g=document.createElement("a");g.href=w,g.target=h;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(h||"",dt),new pt(null);const hr=window.open(h||"",dt,Dn);we(hr,w,"popup-blocked");try{hr.focus()}catch{}return new pt(hr)}(h,dt,fa())})()}_openRedirect(h,g,I,Z){var re=this;return(0,d.Z)(function*(){return yield re._originValidation(h),function an(w){ai().location.href=w}(yield vs(h,g,I,Ae(),Z)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:Z,promise:re}=this.eventManagers[g];return Z?Promise.resolve(Z):(xe(re,"If manager is not set, promise should be"),re)}const I=this.initAndGetManager(h);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(h){var g=this;return(0,d.Z)(function*(){const I=yield function rd(w){return E.apply(this,arguments)}(h),Z=new Ea(h);return I.register("authEvent",re=>(we(re?.authEvent,h,"invalid-auth-event"),{status:Z.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:Z},g.iframes[h._key()]=I,Z})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Da,{type:Da},Z=>{var re;const Be=null===(re=Z?.[0])||void 0===re?void 0:re[Da];void 0!==Be&&g(!!Be),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function al(w){return pu.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return nt()||Q()||he()}};class yu extends class La{constructor(h){this.factorId=h}_process(h,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,I);case"signin":return this._finalizeSignIn(h,g.credential);default:return _t("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new yu(h)}_finalizeEnroll(h,g,I){return function mr(w,h){return z(w,"POST","/v2/accounts/mfaEnrollment:finalize",ie(w,h))}(h,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function ri(w,h){return z(w,"POST","/v2/accounts/mfaSignIn:finalize",ie(w,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pf=(()=>{class w{constructor(){}static assertion(g){return yu._fromCredential(g)}}return w.FACTOR_ID="phone",w})();var cl="@firebase/auth";class dl{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(I=>{h(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function sd(w){(0,j._registerComponent)(new b.wA("auth",(h,{options:g})=>{const I=h.getProvider("app").getImmediate(),Z=h.getProvider("heartbeat"),re=h.getProvider("app-check-internal"),{apiKey:Be,authDomain:dt}=I.options;we(Be&&!Be.includes(":"),"invalid-api-key",{appName:I.name});const jt={apiKey:Be,authDomain:dt,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sn(w)},Jt=new pi(I,Z,re,jt);return function us(w,h){const g=h?.persistence||[],I=(Array.isArray(g)?g:[g]).map(J);h?.errorMap&&w._updateErrorMap(h.errorMap),w._initializeWithPersistence(I,h?.popupRedirectResolver)}(Jt,g),Jt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,I)=>{h.getProvider("auth-internal").initialize()})),(0,j._registerComponent)(new b.wA("auth-internal",h=>{const g=Dr(h.getProvider("auth").getImmediate());return new dl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,j.registerVersion)(cl,"0.23.2",function lh(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,j.registerVersion)(cl,"0.23.2","esm2017")}("Browser")},2810:(Lt,ze,N)=>{N.d(ze,{u7:()=>sg,Jj:()=>vc,IX:()=>bm,my:()=>Ci,xU:()=>Ec,Lz:()=>Sl,WA:()=>Mt,F8:()=>yf,$q:()=>sh,W:()=>Ic,EK:()=>Pr,PU:()=>og,l7:()=>ta,Ky:()=>qt,Xb:()=>nr,Cf:()=>br,K9:()=>da,Me:()=>Tc,yq:()=>xr,Wi:()=>wm,ET:()=>bc,Ab:()=>Qv,vr:()=>my,Fc:()=>Tm,hJ:()=>qp,B$:()=>Wp,at:()=>Wd,oe:()=>uy,AK:()=>py,TF:()=>Sm,JU:()=>Kp,ST:()=>Uv,fH:()=>Bv,Ix:()=>Am,Wu:()=>qm,Lx:()=>zm,qY:()=>Qi,GL:()=>su,QT:()=>ey,kl:()=>ty,Xk:()=>ny,PL:()=>ry,UQ:()=>iy,zN:()=>sy,nP:()=>Xv,b9:()=>If,vh:()=>rg,Pb:()=>Mm,L$:()=>xm,cf:()=>Wv,sc:()=>Kv,Xo:()=>Hm,IO:()=>jm,iE:()=>Kd,Eo:()=>Em,i3:()=>fy,Bt:()=>gy,pl:()=>oy,Ub:()=>js,qK:()=>Xm,TQ:()=>Zm,e0:()=>Gm,r7:()=>ay,Mx:()=>Qp,ar:()=>$m});var A,d=N(5861),U=N(6881),j=N(4859),m=N(1877),de=N(2090),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae={},le=le||{},ne=b||self;function ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Te(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var qe="closure_uid_"+(1e9*Math.random()>>>0),Ke=0;function ot(i,e,t){return i.call.apply(i.bind,arguments)}function je(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function $e(i,e,t){return($e=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ot:je).apply(null,arguments)}function Et(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function mt(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(s,a,c){for(var p=Array(arguments.length-2),D=2;D<arguments.length;D++)p[D-2]=arguments[D];return e.prototype[a].apply(s,p)}}function Ce(){this.s=this.s,this.o=this.o}Ce.prototype.s=!1,Ce.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function at(i){Object.prototype.hasOwnProperty.call(i,qe)&&i[qe]||(i[qe]=++Ke)}(this)},Ce.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const st=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function It(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function vt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ue(s)){const a=i.length||0,c=s.length||0;i.length=a+c;for(let p=0;p<c;p++)i[a+p]=s[p]}else i.push(s)}}function we(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ne.addEventListener("test",()=>{},e),ne.removeEventListener("test",()=>{},e)}catch{}return i}();function xe(i){return/^[\s\xa0]*$/.test(i)}function Ae(){var i=ne.navigator;return i&&(i=i.userAgent)?i:""}function Ze(i){return-1!=Ae().indexOf(i)}function Le(i){return Le[" "](i),i}Le[" "]=function(){};var z,i,Ve=Ze("Opera"),Oe=Ze("Trident")||Ze("MSIE"),Ye=Ze("Edge"),Je=Ye||Oe,Me=Ze("Gecko")&&!(-1!=Ae().toLowerCase().indexOf("webkit")&&!Ze("Edge"))&&!(Ze("Trident")||Ze("MSIE"))&&!Ze("Edge"),Ee=-1!=Ae().toLowerCase().indexOf("webkit")&&!Ze("Edge");function ie(){var i=ne.document;return i?i.documentMode:void 0}e:{var se="",pe=(i=Ae(),Me?/rv:([^\);]+)(\)|;)/.exec(i):Ye?/Edge\/([\d\.]+)/.exec(i):Oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ee?/WebKit\/(\S+)/.exec(i):Ve?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(pe&&(se=pe?pe[1]:""),Oe){var We=ie();if(null!=We&&We>parseFloat(se)){z=String(We);break e}}z=se}var Gn=ne.document&&Oe&&(ie()||parseInt(z,10))||void 0;function Kn(i,e){if(we.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Me){e:{try{Le(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:kn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Kn.$.h.call(this)}}mt(Kn,we);var kn={2:"touch",3:"pen",4:"mouse"};Kn.prototype.h=function(){Kn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var On="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function En(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Ht,this.fa=this.ia=!1}function Yn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function ir(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Mn(i){const e={};for(const t in i)e[t]=i[t];return e}const pn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tr(i,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)i[t]=s[t];for(let c=0;c<pn.length;c++)t=pn[c],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function jr(i){this.src=i,this.g={},this.h=0}function $r(i,e){var t=e.type;if(t in i.g){var c,s=i.g[t],a=st(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(Yn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function fr(i,e,t,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}jr.prototype.add=function(i,e,t,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var p=fr(i,e,s,a);return-1<p?(e=i[p],t||(e.ia=!1)):((e=new En(e,this.src,c,!!s,a)).ia=t,i.push(e)),e};var wn="closure_lm_"+(1e6*Math.random()|0),cn={};function Wt(i,e,t,s,a){if(s&&s.once)return pr(i,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Wt(i,e[c],t,s,a);return null}return t=xn(t),i&&i[On]?i.O(e,t,Te(s)?!!s.capture:!!s,a):tn(i,e,t,!1,s,a)}function tn(i,e,t,s,a,c){if(!e)throw Error("Invalid event type");var p=Te(a)?!!a.capture:!!a,D=In(i);if(D||(i[wn]=D=new jr(i)),(t=D.add(e,t,s,p,c)).proxy)return t;if(s=function Nn(){const e=yr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)_t||(a=p),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(dn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function pr(i,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)pr(i,e[c],t,s,a);return null}return t=xn(t),i&&i[On]?i.P(e,t,Te(s)?!!s.capture:!!s,a):tn(i,e,t,!0,s,a)}function sr(i,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)sr(i,e[c],t,s,a);else s=Te(s)?!!s.capture:!!s,t=xn(t),i&&i[On]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=fr(c=i.g[e],t,s,a))&&(Yn(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=In(i))&&(e=i.g[e.toString()],i=-1,e&&(i=fr(e,t,s,a)),(t=-1<i?e[i]:null)&&gr(t))}function gr(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[On])$r(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(dn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=In(e))?($r(t,i),0==t.h&&(t.src=null,e[wn]=null)):Yn(i)}}}function dn(i){return i in cn?cn[i]:cn[i]="on"+i}function yr(i,e){if(i.fa)i=!0;else{e=new Kn(e,this);var t=i.listener,s=i.la||i.src;i.ia&&gr(i),i=t.call(s,e)}return i}function In(i){return(i=i[wn])instanceof jr?i:null}var Zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function xn(i){return"function"==typeof i?i:(i[Zr]||(i[Zr]=function(e){return i.handleEvent(e)}),i[Zr])}function An(){Ce.call(this),this.i=new jr(this),this.S=this,this.J=null}function Vt(i,e){var t,s=i.J;if(s)for(t=[];s;s=s.J)t.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new we(e,i);else if(e instanceof we)e.target=e.target||i;else{var a=e;tr(e=new we(s,i),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=or(p,s,!0,e)&&a}if(a=or(p=e.g=i,s,!0,e)&&a,a=or(p,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=or(p=e.g=t[c],s,!1,e)&&a}function or(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.fa&&p.capture==t){var D=p.listener,L=p.la||p.src;p.ia&&$r(i.i,p),a=!1!==D.call(L,s)&&a}}return a&&!s.defaultPrevented}mt(An,Ce),An.prototype[On]=!0,An.prototype.removeEventListener=function(i,e,t,s){sr(this,i,e,t,s)},An.prototype.N=function(){if(An.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Yn(t[s]);delete i.g[e],i.h--}}this.J=null},An.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},An.prototype.P=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var ur=ne.JSON.stringify;function J(){var i=q;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Xe=new class ht{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new xt,i=>i.reset());class xt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ge(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function ye(i){ne.setTimeout(()=>{throw i},0)}let ee,Q=!1,q=new class _e{constructor(){this.h=this.g=null}add(e,t){const s=Xe.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Re=()=>{const i=ne.Promise.resolve(void 0);ee=()=>{i.then(gt)}};var gt=()=>{for(var i;i=J();){try{i.h.call(i.g)}catch(t){ye(t)}var e=Xe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Q=!1};function kt(i,e){An.call(this),this.h=i||1,this.g=e||ne,this.j=$e(this.qb,this),this.l=Date.now()}function Qt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function he(i,e,t){if("function"==typeof i)t&&(i=$e(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=$e(i.handleEvent,i)}return 2147483647<Number(e)?-1:ne.setTimeout(i,e||0)}function me(i){i.g=he(()=>{i.g=null,i.i&&(i.i=!1,me(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}mt(kt,An),(A=kt.prototype).ga=!1,A.T=null,A.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vt(this,"tick"),this.ga&&(Qt(this),this.start()))}},A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},A.N=function(){kt.$.N.call(this),Qt(this),delete this.g};class oe extends Ce{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:me(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(i){Ce.call(this),this.h=i,this.g={}}mt(Ue,Ce);var nt=[];function Ft(i,e,t,s){Array.isArray(t)||(t&&(nt[0]=t.toString()),t=nt);for(var a=0;a<t.length;a++){var c=Wt(e,t[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function sn(i){ir(i.g,function(e,t){this.g.hasOwnProperty(t)&&gr(e)},i),i.g={}}function He(){this.g=!0}function Dt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _n(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return ur(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Ue.prototype.N=function(){Ue.$.N.call(this),sn(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},He.prototype.Ea=function(){this.g=!1},He.prototype.info=function(){};var Fn={},Rr=null;function Rn(){return Rr=Rr||new An}function Kr(i){we.call(this,Fn.Ta,i)}function Yr(i){const e=Rn();Vt(e,new Kr(e))}function Jr(i,e){we.call(this,Fn.STAT_EVENT,i),this.stat=e}function Fr(i){const e=Rn();Vt(e,new Jr(e,i))}function Vi(i,e){we.call(this,Fn.Ua,i),this.size=e}function $n(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){i()},e)}Fn.Ta="serverreachability",mt(Kr,we),Fn.STAT_EVENT="statevent",mt(Jr,we),Fn.Ua="timingevent",mt(Vi,we);var Ui={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ks={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pi(){}function Bi(){}pi.prototype.h=null;var gi,Ii={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function us(){we.call(this,"d")}function Or(){we.call(this,"c")}function Lr(){}function Tr(i,e,t,s){this.l=i,this.j=e,this.m=t,this.W=s||1,this.U=new Ue(this),this.P=Pi,this.V=new kt(i=Je?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Rs}function Rs(){this.i=null,this.g="",this.h=!1}mt(us,we),mt(Or,we),mt(Lr,pi),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},gi=new Lr;var Pi=45e3,Os={},Nr={};function ji(i,e,t){i.L=1,i.v=cs(Ln(e)),i.s=t,i.S=!0,ls(i,null)}function ls(i,e){i.G=Date.now(),cr(i),i.A=Ln(i.v);var t=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),ci(t.i,"t",s),i.C=0,t=i.l.J,i.h=new Rs,i.g=zo(i.l,t?e:null,!i.s),0<i.O&&(i.M=new oe($e(i.Pa,i,i.g),i.O)),Ft(i.U,i.g,"readystatechange",i.nb),e=i.I?Mn(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Yr(),function Ge(i,e,t,s,a,c){i.info(function(){if(i.g)if(c)for(var p="",D=c.split("&"),L=0;L<D.length;L++){var H=D[L].split("=");if(1<H.length){var te=H[0];H=H[1];var De=te.split("_");p=2<=De.length&&"type"==De[1]?p+(te+"=")+H+"&":p+(te+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(i.j,i.u,i.A,i.m,i.W,i.s)}function xo(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ys(i,e,t){let a,s=!0;for(;!i.J&&i.C<t.length;){if(a=Ha(i,t),a==Nr){4==e&&(i.o=4,Fr(14),s=!1),Dt(i.j,i.m,null,"[Incomplete Response]");break}if(a==Os){i.o=4,Fr(15),Dt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Dt(i.j,i.m,a,null),Pe(i,a)}xo(i)&&a!=Nr&&a!=Os&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Fr(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Is(e),e.M=!0,Fr(11))):(Dt(i.j,i.m,t,"[Invalid Chunked Response]"),Fe(i),po(i))}function Ha(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Nr:(t=Number(e.substring(t,s)),isNaN(t)?Os:(s+=1)+t>e.length?Nr:(e=e.slice(s,s+t),i.C=s+t,e))}function cr(i){i.Y=Date.now()+i.P,ho(i,i.P)}function ho(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=$n($e(i.lb,i),e)}function fo(i){i.B&&(ne.clearTimeout(i.B),i.B=null)}function po(i){0==i.l.H||i.J||No(i.l,i)}function Fe(i){fo(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Qt(i.V),sn(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Pe(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||fs(t.i,i)))if(!i.K&&fs(t.i,i)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;wo(t),k(t)}Di(t),Fr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=$n($e(t.ib,t),6e3));if(1>=mo(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Vs(t,11)}else if((i.K||t.g==i)&&wo(t),!xe(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let H=a[e];if(t.V=H[0],H=H[1],2==t.H)if("c"==H[0]){t.K=H[1],t.pa=H[2];const te=H[3];null!=te&&(t.ra=te,t.l.info("VER="+t.ra));const De=H[4];null!=De&&(t.Ga=De,t.l.info("SVER="+t.Ga));const tt=H[5];null!=tt&&"number"==typeof tt&&0<tt&&(t.L=s=1.5*tt,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const yt=i.g;if(yt){const Bt=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bt){var c=s.i;c.g||-1==Bt.indexOf("spdy")&&-1==Bt.indexOf("quic")&&-1==Bt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(zr(c,c.h),c.h=null))}if(s.F){const nn=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;nn&&(s.Da=nn,Xn(s.I,s.F,nn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var p=i;if((s=t).wa=Co(s,s.J?s.pa:null,s.Y),p.K){Gi(s.i,p);var D=p,L=s.L;L&&D.setTimeout(L),D.B&&(fo(D),cr(D)),s.g=p}else qi(s);0<t.j.length&&X(t)}else"stop"!=H[0]&&"close"!=H[0]||Vs(t,7);else 3==t.H&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?Vs(t,7):V(t):"noop"!=H[0]&&t.h&&t.h.Aa(H),t.A=0)}Yr()}catch{}}function Nt(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ue(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function wt(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ue(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Qe(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ue(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],i)}(A=Tr.prototype).setTimeout=function(i){this.P=i},A.nb=function(i){i=i.target;const e=this.M;e&&3==ei(i)?e.l():this.Pa(i)},A.Pa=function(i){try{if(i==this.g)e:{const te=ei(this.g);var e=this.g.Ia();if(this.g.da(),!(3>te)&&(3!=te||Je||this.g&&(this.h.h||this.g.ja()||zi(this.g)))){this.J||4!=te||7==e||Yr(),fo(this);var t=this.g.da();this.ca=t;t:if(xo(this)){var s=zi(this.g);i="";var a=s.length,c=4==ei(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),po(this);var p="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=i,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==t,function bt(i,e,t,s,a,c,p){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.W,te,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,L=this.g;if((D=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xe(D)){var H=D;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,Fr(12),Fe(this),po(this);break e}Dt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pe(this,t)}this.S?(Ys(this,te,p),Je&&this.i&&3==te&&(Ft(this.U,this.V,"tick",this.mb),this.V.start())):(Dt(this.j,this.m,p,null),Pe(this,p)),4==te&&Fe(this),this.i&&!this.J&&(4==te?No(this.l,this):(this.i=!1,cr(this)))}else(function es(i){const e={};i=(i.g&&2<=ei(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(xe(i[s]))continue;var t=ge(i[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function Pt(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),Fe(this),po(this)}}}catch{}},A.mb=function(){if(this.g){var i=ei(this.g),e=this.g.ja();this.C<e.length&&(fo(this),Ys(this,i,e),this.i&&4!=i&&cr(this))}},A.cancel=function(){this.J=!0,Fe(this)},A.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function mn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Yr(),Fr(17)),Fe(this),this.o=2,po(this)):ho(this,this.Y-i)};var Sn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Qn){this.h=i.h,$i(this,i.j),this.s=i.s,this.g=i.g,Ri(this,i.m),this.l=i.l;var e=i.i,t=new Js;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),kr(this,t),this.o=i.o}else i&&(e=String(i).match(Sn))?(this.h=!1,$i(this,e[1]||"",!0),this.s=Hi(e[2]||""),this.g=Hi(e[3]||"",!0),Ri(this,e[4]),this.l=Hi(e[5]||"",!0),kr(this,e[6]||"",!0),this.o=Hi(e[7]||"")):(this.h=!1,this.i=new Js(null,this.h))}function Ln(i){return new Qn(i)}function $i(i,e,t){i.j=t?Hi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ri(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function kr(i,e,t){e instanceof Js?(i.i=e,function Xs(i,e){e&&!i.j&&(Oi(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Qs(this,s),ci(this,a,t))},i)),i.j=e}(i.i,i.h)):(t||(e=li(e,Zo)),i.i=new Js(e,i.h))}function Xn(i,e,t){i.i.set(e,t)}function cs(i){return Xn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Hi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function li(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ws),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ws(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Qn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(li(e,Ns,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(li(e,Ns,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(li(t,"/"==t.charAt(0)?ds:sa,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",li(t,Po)),i.join("")};var Ns=/[#\/\?@]/g,sa=/[#\?:]/g,ds=/[#\?]/g,Zo=/[#\?@]/g,Po=/#/g;function Js(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Oi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Jn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var c=i[t].substring(0,s);a=i[t].substring(s+1)}else c=i[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qs(i,e){Oi(i),e=go(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Hr(i,e){return Oi(i),e=go(i,e),i.g.has(e)}function ci(i,e,t){Qs(i,e),0<t.length&&(i.i=null,i.g.set(go(i,e),It(t)),i.h+=t.length)}function go(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function oa(i){this.l=i||Er,i=ne.PerformanceNavigationTiming?0<(i=ne.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(A=Js.prototype).add=function(i,e){Oi(this),this.i=null,i=go(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},A.forEach=function(i,e){Oi(this),this.g.forEach(function(t,s){t.forEach(function(a){i.call(e,a,s,this)},this)},this)},A.ta=function(){Oi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=i[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},A.Z=function(i){Oi(this);let e=[];if("string"==typeof i)Hr(this,i)&&(e=e.concat(this.g.get(go(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},A.set=function(i,e){return Oi(this),this.i=null,Hr(this,i=go(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},A.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},A.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var a=c;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),i.push(a)}}return this.i=i.join("&")};var Er=10;function hs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function mo(i){return i.h?1:i.g?i.g.size:0}function fs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function zr(i,e){i.g?i.g.add(e):i.h=e}function Gi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function yo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return It(i.i)}function di(){this.g=new class{stringify(i){return ne.JSON.stringify(i,void 0)}parse(i){return ne.JSON.parse(i,void 0)}}}function vo(i,e,t){const s=t||"";try{Nt(i,function(a,c){let p=a;Te(a)&&(p=ur(a)),e.push(s+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function eo(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Xr(i){this.l=i.fc||null,this.j=i.ob||!1}function qr(i,e){An.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=to,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oa.prototype.cancel=function(){if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},mt(Xr,pi),Xr.prototype.g=function(){return new qr(this.l,this.j)},Xr.prototype.i=function(i){return function(){return i}}({}),mt(qr,An);var to=0;function Cn(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function ks(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Fs(i)}function Fs(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(A=qr.prototype).open=function(i,e){if(this.readyState!=to)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Fs(this)},A.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ks(this)),this.readyState=to},A.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cn(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},A.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ks(this):Fs(this),3==this.readyState&&Cn(this)}},A.Za=function(i){this.g&&(this.response=this.responseText=i,ks(this))},A.Ya=function(i){this.g&&(this.response=i,ks(this))},A.ka=function(){this.g&&ks(this)},A.setRequestHeader=function(i,e){this.v.append(i,e)},A.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},A.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var aa=ne.JSON.parse;function Ar(i){An.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ni,this.L=this.M=!1}mt(Ar,An);var Ni="",_o=/^https?$/i,bi=["POST","PUT"];function At(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Hn(i),ro(i)}function Hn(i){i.F||(i.F=!0,Vt(i,"complete"),Vt(i,"error"))}function no(i){if(i.h&&typeof le<"u"&&(!i.C[1]||4!=ei(i)||2!=i.da()))if(i.v&&4==ei(i))he(i.La,0,i);else if(Vt(i,"readystatechange"),4==ei(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===p){var a=String(i.I).match(Sn)[1]||null;!a&&ne.self&&ne.self.location&&(a=ne.self.location.protocol.slice(0,-1)),s=!_o.test(a?a.toLowerCase():"")}t=s}if(t)Vt(i,"complete"),Vt(i,"success");else{i.m=6;try{var c=2<ei(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Hn(i)}}finally{ro(i)}}}function ro(i,e){if(i.g){Gr(i);const t=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Vt(i,"ready");try{t.onreadystatechange=s}catch{}}}function Gr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(ne.clearTimeout(i.A),i.A=null)}function ei(i){return i.g?i.g.readyState:0}function zi(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Ni:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Oo(i){let e="";return ir(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Cs(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Oo(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Xn(i,e,t))}function Es(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Br(i){this.Ga=0,this.j=[],this.l=new He,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Es("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Es("baseRetryDelayMs",5e3,i),this.hb=Es("retryDelaySeedMs",1e4,i),this.eb=Es("forwardChannelMaxRetries",2,i),this.xa=Es("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new oa(i&&i.concurrentRequestLimit),this.Ja=new di,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function V(i){if(O(i),3==i.H){var e=i.W++,t=Ln(i.I);if(Xn(t,"SID",i.K),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),Zn(i,t),(e=new Tr(i,i.l,e)).L=2,e.v=cs(Ln(t)),t=!1,ne.navigator&&ne.navigator.sendBeacon)try{t=ne.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&ne.Image&&((new Image).src=e.v,t=!0),t||(e.g=zo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),cr(e)}xa(i)}function k(i){i.g&&(Is(i),i.g.cancel(),i.g=null)}function O(i){k(i),i.u&&(ne.clearTimeout(i.u),i.u=null),wo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ne.clearTimeout(i.m),i.m=null)}function X(i){if(!hs(i.i)&&!i.m){i.m=!0;var e=i.Na;ee||Re(),Q||(ee(),Q=!0),q.add(e,i),i.C=0}}function rn(i,e){var t;t=e?e.m:i.W++;const s=Ln(i.I);Xn(s,"SID",i.K),Xn(s,"RID",t),Xn(s,"AID",i.V),Zn(i,s),i.o&&i.s&&Cs(s,i.o,i.s),t=new Tr(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=ti(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),zr(i.i,t),ji(t,s,e)}function Zn(i,e){i.na&&ir(i.na,function(t,s){Xn(e,s,t)}),i.h&&Nt({},function(t,s){Xn(e,s,t)})}function ti(i,e,t){t=Math.min(i.j.length,t);var s=i.h?$e(i.h.Va,i.h,i):null;e:{var a=i.j;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].g,p.push("ofs="+c)):c=0:p.push("ofs="+c);let D=!0;for(let L=0;L<t;L++){let H=a[L].g;const te=a[L].map;if(H-=c,0>H)c=Math.max(0,a[L].g-100),D=!1;else try{vo(te,p,"req"+H+"_")}catch{s&&s(te)}}if(D){s=p.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,s}function qi(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;ee||Re(),Q||(ee(),Q=!0),q.add(e,i),i.A=0}}function Di(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=$n($e(i.Ma,i),ki(i,i.A)),i.A++,0))}function Is(i){null!=i.B&&(ne.clearTimeout(i.B),i.B=null)}function Ls(i){i.g=new Tr(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Ln(i.wa);Xn(e,"RID","rpc"),Xn(e,"SID",i.K),Xn(e,"AID",i.V),Xn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Xn(e,"TO",i.qa),Xn(e,"TYPE","xmlhttp"),Zn(i,e),i.o&&i.s&&Cs(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=cs(Ln(e)),t.s=null,t.S=!0,ls(t,i)}function wo(i){null!=i.v&&(ne.clearTimeout(i.v),i.v=null)}function No(i,e){var t=null;if(i.g==e){wo(i),Is(i),i.g=null;var s=2}else{if(!fs(i.i,e))return;t=e.F,Gi(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=i.C;Vt(s=Rn(),new Vi(s,t)),X(i)}else qi(i);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function lt(i,e){return!(mo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=$n($e(i.Na,i,e),ki(i,i.C)),i.C++,0)))}(i,e)||2==s&&Di(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:Vs(i,5);break;case 4:Vs(i,10);break;case 3:Vs(i,6);break;default:Vs(i,2)}}function ki(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function Vs(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var s=$e(i.pb,i);t||(t=new Qn("//www.google.com/images/cleardot.gif"),ne.location&&"http"==ne.location.protocol||$i(t,"https"),cs(t)),function Ro(i,e){const t=new He;if(ne.Image){const s=new Image;s.onload=Et(eo,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Et(eo,t,s,"TestLoadImage: error",!1,e),s.onabort=Et(eo,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Et(eo,t,s,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Fr(2);i.H=0,i.h&&i.h.za(e),xa(i),O(i)}function xa(i){if(i.H=0,i.ma=[],i.h){const e=yo(i.i);(0!=e.length||0!=i.j.length)&&(vt(i.ma,e),vt(i.ma,i.j),i.i.i.length=0,It(i.j),i.j.length=0),i.h.ya()}}function Co(i,e,t){var s=t instanceof Qn?Ln(t):new Qn(t);if(""!=s.g)e&&(s.g=e+"."+s.g),Ri(s,s.m);else{var a=ne.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Qn(null);s&&$i(c,s),e&&(c.g=e),a&&Ri(c,a),t&&(c.l=t),s=c}return e=i.Da,(t=i.F)&&e&&Xn(s,t,e),Xn(s,"VER",i.ra),Zn(i,s),s}function zo(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&i.Ha&&!i.va?new Xr({ob:!0}):i.va)).Oa(i.J),e}function ko(){}function qo(){if(Oe&&!(10<=Number(Gn)))throw Error("Environmental error: no available transport.")}function Ti(i,e){An.call(this),this.g=new Br(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!xe(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xe(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Eo(this)}function Us(i){us.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function la(){Or.call(this),this.status=1}function Eo(i){this.g=i}function mi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sr(i,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=i.g[3],p=(e=i.g[0])+(c^(t=i.g[1])&((a=i.g[2])^c))+s[0]+3614090360&4294967295;p=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(p<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((c=(e=t+((p=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((a=c+((p=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+c&4294967295}function Ir(i,e){this.h=e;for(var t=[],s=!0,a=i.length-1;0<=a;a--){var c=0|i[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(A=Ar.prototype).Oa=function(i){this.M=i},A.ha=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gi.g(),this.C=function Dr(i){return i.h||(i.h=i.i())}(this.u?this.u:gi),this.g.onreadystatechange=$e(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void At(this,c)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=ne.FormData&&i instanceof ne.FormData,!(0<=st(bi,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gr(this),0<this.B&&((this.L=function ua(i){return Oe&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$e(this.ua,this)):this.A=he(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){At(this,c)}},A.ua=function(){typeof le<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vt(this,"timeout"),this.abort(8))},A.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Vt(this,"complete"),Vt(this,"abort"),ro(this))},A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ro(this,!0)),Ar.$.N.call(this)},A.La=function(){this.s||(this.G||this.v||this.l?no(this):this.kb())},A.kb=function(){no(this)},A.isActive=function(){return!!this.g},A.da=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},A.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),aa(e)}},A.Ia=function(){return this.m},A.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(A=Br.prototype).ra=8,A.H=1,A.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new Tr(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Mn(c),tr(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ti(this,a,e),Xn(t=Ln(this.I),"RID",i),Xn(t,"CVER",22),this.F&&Xn(t,"X-HTTP-Session-Id",this.F),Zn(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(Oo(c)))+"&"+e:this.o&&Cs(t,this.o,c)),zr(this.i,a),this.bb&&Xn(t,"TYPE","init"),this.P?(Xn(t,"$req",e),Xn(t,"SID","null"),a.aa=!0,ji(a,t,null)):ji(a,t,e),this.H=2}}else 3==this.H&&(i?rn(this,i):0==this.j.length||hs(this.i)||rn(this))},A.Ma=function(){if(this.u=null,Ls(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=$n($e(this.jb,this),i)}},A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fr(10),k(this),Ls(this))},A.ib=function(){null!=this.v&&(this.v=null,k(this),Di(this),Fr(19))},A.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Fr(2)):(this.l.info("Failed to ping google.com"),Fr(1))},A.isActive=function(){return!!this.h&&this.h.isActive(this)},(A=ko.prototype).Ba=function(){},A.Aa=function(){},A.za=function(){},A.ya=function(){},A.isActive=function(){return!0},A.Va=function(){},qo.prototype.g=function(i,e){return new Ti(i,e)},mt(Ti,An),Ti.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Fr(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=Co(i,null,i.Y),X(i)},Ti.prototype.close=function(){V(this.g)},Ti.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=ur(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&X(e)},Ti.prototype.N=function(){this.g.h=null,delete this.j,V(this.g),delete this.g,Ti.$.N.call(this)},mt(Us,us),mt(la,Or),mt(Eo,ko),Eo.prototype.Ba=function(){Vt(this.g,"a")},Eo.prototype.Aa=function(i){Vt(this.g,new Us(i))},Eo.prototype.za=function(i){Vt(this.g,new la)},Eo.prototype.ya=function(){Vt(this.g,"b")},mt(mi,function dr(){this.blockSize=-1}),mi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)Sr(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(s[a++]=i.charCodeAt(c++),a==this.blockSize){Sr(this,s),a=0;break}}else for(;c<e;)if(s[a++]=i[c++],a==this.blockSize){Sr(this,s),a=0;break}}this.h=a,this.i+=e},mi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)i[t++]=this.g[e]>>>s&255;return i};var Fo={};function ca(i){return-128<=i&&128>i?function Ut(i,e){var t=Fo;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new Ir([0|e],0>e?-1:0)}):new Ir([0|i],0>i?-1:0)}function Wi(i){if(isNaN(i)||!isFinite(i))return bs;if(0>i)return yi(Wi(-i));for(var e=[],t=1,s=0;i>=t;s++)e[s]=i/t|0,t*=Bs;return new Ir(e,0)}var Bs=4294967296,bs=ca(0),ts=ca(1),Ko=ca(16777216);function ps(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Ki(i){return-1==i.h}function yi(i){for(var e=i.g.length,t=[],s=0;s<e;s++)t[s]=~i.g[s];return new Ir(t,~i.h).add(ts)}function ns(i,e){return i.add(yi(e))}function io(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function so(i,e){this.g=i,this.h=e}function oo(i,e){if(ps(e))throw Error("division by zero");if(ps(i))return new so(bs,bs);if(Ki(i))return e=oo(yi(i),e),new so(yi(e.g),yi(e.h));if(Ki(e))return e=oo(i,yi(e)),new so(yi(e.g),e.h);if(30<i.g.length){if(Ki(i)||Ki(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ts,s=e;0>=s.X(i);)t=Io(t),s=Io(s);var a=Lo(t,1),c=Lo(s,1);for(s=Lo(s,2),t=Lo(t,2);!ps(s);){var p=c.add(s);0>=p.X(i)&&(a=a.add(t),c=p),s=Lo(s,1),t=Lo(t,1)}return e=ns(i,a.R(e)),new so(a,e)}for(a=bs;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),p=(c=Wi(t)).R(e);Ki(p)||0<p.X(i);)p=(c=Wi(t-=s)).R(e);ps(c)&&(c=ts),a=a.add(c),i=ns(i,p)}return new so(a,i)}function Io(i){for(var e=i.g.length+1,t=[],s=0;s<e;s++)t[s]=i.D(s)<<1|i.D(s-1)>>>31;return new Ir(t,i.h)}function Lo(i,e){var t=e>>5;e%=32;for(var s=i.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?i.D(c+t)>>>e|i.D(c+t+1)<<32-e:i.D(c+t);return new Ir(a,i.h)}(A=Ir.prototype).ea=function(){if(Ki(this))return-yi(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);i+=(0<=s?s:Bs+s)*e,e*=Bs}return i},A.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(ps(this))return"0";if(Ki(this))return"-"+yi(this).toString(i);for(var e=Wi(Math.pow(i,6)),t=this,s="";;){var a=oo(t,e).g,c=((0<(t=ns(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(ps(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},A.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},A.X=function(i){return Ki(i=ns(this,i))?-1:ps(i)?0:1},A.abs=function(){return Ki(this)?yi(this):this},A.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&i.D(a)),p=(c>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=p>>>16,t[a]=(p&=65535)<<16|(c&=65535)}return new Ir(t,-2147483648&t[t.length-1]?-1:0)},A.R=function(i){if(ps(this)||ps(i))return bs;if(Ki(this))return Ki(i)?yi(this).R(yi(i)):yi(yi(this).R(i));if(Ki(i))return yi(this.R(yi(i)));if(0>this.X(Ko)&&0>i.X(Ko))return Wi(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var c=this.D(s)>>>16,p=65535&this.D(s),D=i.D(a)>>>16,L=65535&i.D(a);t[2*s+2*a]+=p*L,io(t,2*s+2*a),t[2*s+2*a+1]+=c*L,io(t,2*s+2*a+1),t[2*s+2*a+1]+=p*D,io(t,2*s+2*a+1),t[2*s+2*a+2]+=c*D,io(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Ir(t,0)},A.gb=function(i){return oo(this,i).h},A.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&i.D(s);return new Ir(t,this.h&i.h)},A.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|i.D(s);return new Ir(t,this.h|i.h)},A.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^i.D(s);return new Ir(t,this.h^i.h)},qo.prototype.createWebChannel=qo.prototype.g,Ti.prototype.send=Ti.prototype.u,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,Ks.COMPLETE="complete",Bi.EventType=Ii,Ii.OPEN="a",Ii.CLOSE="b",Ii.ERROR="c",Ii.MESSAGE="d",An.prototype.listen=An.prototype.O,Ar.prototype.listenOnce=Ar.prototype.P,Ar.prototype.getLastError=Ar.prototype.Sa,Ar.prototype.getLastErrorCode=Ar.prototype.Ia,Ar.prototype.getStatus=Ar.prototype.da,Ar.prototype.getResponseJson=Ar.prototype.Wa,Ar.prototype.getResponseText=Ar.prototype.ja,Ar.prototype.send=Ar.prototype.ha,Ar.prototype.setWithCredentials=Ar.prototype.Oa,mi.prototype.digest=mi.prototype.l,mi.prototype.reset=mi.prototype.reset,mi.prototype.update=mi.prototype.j,Ir.prototype.add=Ir.prototype.add,Ir.prototype.multiply=Ir.prototype.R,Ir.prototype.modulo=Ir.prototype.gb,Ir.prototype.compare=Ir.prototype.X,Ir.prototype.toNumber=Ir.prototype.ea,Ir.prototype.toString=Ir.prototype.toString,Ir.prototype.getBits=Ir.prototype.D,Ir.fromNumber=Wi,Ir.fromString=function Wo(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return yi(Wo(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Wi(Math.pow(e,8)),s=bs,a=0;a<i.length;a+=8){var c=Math.min(8,i.length-a),p=parseInt(i.substring(a,a+c),e);8>c?(c=Wi(Math.pow(e,c)),s=s.R(c).add(Wi(p))):s=(s=s.R(t)).add(Wi(p))}return s};var ou=ae.createWebChannelTransport=function(){return new qo},S=ae.getStatEventTarget=function(){return Rn()},$=ae.ErrorCode=Ui,R=ae.EventType=Ks,K=ae.Event=Fn,Se=ae.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ct=ae.FetchXmlHttpFactory=Xr,Ct=ae.WebChannel=Bi,hn=ae.XhrIo=Ar,lr=ae.Md5=mi,zn=ae.Integer=Ir;const vr="@firebase/firestore";class yn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let Mr="9.23.0";const Vn=new m.Yd("@firebase/firestore");function ni(){return Vn.logLevel}function js(i){Vn.setLogLevel(i)}function St(i,...e){if(Vn.logLevel<=m.in.DEBUG){const t=e.map(ao);Vn.debug(`Firestore (${Mr}): ${i}`,...t)}}function mr(i,...e){if(Vn.logLevel<=m.in.ERROR){const t=e.map(ao);Vn.error(`Firestore (${Mr}): ${i}`,...t)}}function xr(i,...e){if(Vn.logLevel<=m.in.WARN){const t=e.map(ao);Vn.warn(`Firestore (${Mr}): ${i}`,...t)}}function ao(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Yt(i="Unexpected state"){const e=`FIRESTORE (${Mr}) INTERNAL ASSERTION FAILED: `+i;throw mr(e),new Error(e)}function on(i,e){i||Yt()}function da(i,e){i||Yt()}function zt(i,e){return i}const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends de.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ga{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Za{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}}class xu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nl{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=H=>this.i!==a?(a=this.i,t(H)):Promise.resolve();let p=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new oi,e.enqueueRetryable(()=>c(this.currentUser))};const D=()=>{const H=p;e.enqueueRetryable((0,d.Z)(function*(){yield H.promise,yield c(s.currentUser)}))},L=H=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(H=>L(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?L(H):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new oi)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(on("string"==typeof s.accessToken),new Ga(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return on(null===e||"string"==typeof e),new yn(e)}}class Yo{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ha{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Yo(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ol{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=c=>{null!=c.error&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.T;return this.T=c.token,St("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(on("string"==typeof t.token),this.T=t.token,new Rl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function za(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class ai{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=za(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function an(i,e){return i<e?-1:i>e?1:0}function bo(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}function Pu(i){return i+"\0"}class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Mt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Pr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?an(this.nanoseconds,e.nanoseconds):an(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new Pr(0,0))}static max(){return new fn(new Pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $s{constructor(e,t,s){void 0===t?t=0:t>e.length&&Yt(),void 0===s?s=e.length-t:s>e.length-t&&Yt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===$s.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $s?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends $s{construct(e,t,s){return new bn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Mt(it.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const pa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends $s{construct(e,t,s){return new nr(e,t,s)}static isValidIdentifier(e){return pa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new Mt(it.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new Mt(it.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[a+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new Mt(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=L,a+=2}else"`"===D?(p=!p,a++):"."!==D||p?(s+=D,a++):(c(),a++)}if(c(),p)throw new Mt(it.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}class qt{constructor(e){this.path=e}static fromPath(e){return new qt(bn.fromString(e))}static fromName(e){return new qt(bn.fromString(e).popFirst(5))}static empty(){return new qt(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new bn(e.slice()))}}class gs{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ga(i){return i.fields.find(e=>2===e.kind)}function Jo(i){return i.fields.filter(e=>2!==e.kind)}gs.UNKNOWN_ID=-1;class Ru{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vo(0,Ds.min())}}function ma(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=fn.fromTimestamp(1e9===s?new Pr(t+1,0):new Pr(t,s));return new Ds(a,qt.empty(),e)}function Nl(i){return new Ds(i.readTime,i.key,-1)}class Ds{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ds(fn.min(),qt.empty(),-1)}static max(){return new Ds(fn.max(),qt.empty(),-1)}}function Ou(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=qt.comparator(i.documentKey,e.documentKey),0!==t?t:an(i.largestBatchId,e.largestBatchId))}const ya="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function va(i){return ri.apply(this,arguments)}function ri(){return ri=(0,d.Z)(function*(i){if(i.code!==it.FAILED_PRECONDITION||i.message!==ya)throw i;St("LocalStore","Unexpectedly lost primary lease")}),ri.apply(this,arguments)}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,s)=>{t(e)})}static reject(e){return new et((t,s)=>{s(e)})}static waitFor(e){return new et((t,s)=>{let a=0,c=0,p=!1;e.forEach(D=>{++a,D.next(()=>{++c,p&&c===a&&t()},L=>s(L))}),p=!0,c===a&&t()})}static or(e){let t=et.resolve(!1);for(const s of e)t=t.next(a=>a?et.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new et((s,a)=>{const c=e.length,p=new Array(c);let D=0;for(let L=0;L<c;L++){const H=L;t(e[H]).next(te=>{p[H]=te,++D,D===c&&s(p)},te=>a(te))}})}static doWhile(e,t){return new et((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class Qo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new oi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ai(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=uu(s.target.error);this.v.reject(new Ai(e,a))}}static open(e,t,s,a){try{return new Qo(t,e.transaction(a,s))}catch(c){throw new Ai(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(St("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new au(t)}}class uo{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===uo.S((0,de.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return St("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,de.hl)())return!1;if(uo.C())return!0;const e=(0,de.z$)(),t=uo.S(e),s=0<t&&t<10,a=uo.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,d.Z)(function*(){return t.db||(St("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{s(p.target.result)},c.onblocked=()=>{a(new Ai(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const D=p.target.error;a("VersionError"===D.name?new Mt(it.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Mt(it.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ai(e,D))},c.onupgradeneeded=p=>{St("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.O(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{St("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,d.Z)(function*(){const p="readonly"===t;let D=0;for(;;){++D;try{c.db=yield c.$(e);const L=Qo.open(c.db,e,p?"readonly":"readwrite",s),H=a(L).next(te=>(L.P(),te)).catch(te=>(L.abort(te),et.reject(te))).toPromise();return H.catch(()=>{}),yield L.R,H}catch(L){const H=L,te="FirebaseError"!==H.name&&D<3;if(St("SimpleDb","Transaction failed with error:",H.message,"Retrying:",te),c.close(),!te)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _a{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Hs(this.L.delete())}}class Ai extends Mt{constructor(e,t){super(it.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Si(i){return"IndexedDbTransactionError"===i.name}class au{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(St("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(St("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Hs(s)}add(e){return St("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(t=>(void 0===t&&(t=null),St("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return St("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return St("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.W(a,(p,D)=>{c.push(D)}).next(()=>c)}{const a=this.store.getAll(s.range);return new et((c,p)=>{a.onerror=D=>{p(D.target.error)},a.onsuccess=D=>{c(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new et((a,c)=>{s.onerror=p=>{c(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){St("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(c,p,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new et((s,a)=>{t.onerror=c=>{const p=uu(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(D=>{D?p.continue():s()}):s()}})}W(e,t){const s=[];return new et((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const D=p.target.result;if(!D)return void a();const L=new _a(D),H=t(D.primaryKey,D.value,L);if(H instanceof et){const te=H.catch(De=>(L.done(),et.reject(De)));s.push(te)}L.isDone?a():null===L.K?D.continue():D.continue(L.K)}}).next(()=>et.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hs(i){return new et((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const a=uu(s.target.error);t(a)}})}let Pa=!1;function uu(i){const e=uo.S((0,de.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pa||(Pa=!0,setTimeout(()=>{throw s},0)),s}}return i}class Nu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;St("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,d.Z)(function*(){t.task=null;try{St("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Si(s)?St("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield va(s)}yield t.et(6e4)}))}}class kl{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,d.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,c=!0;return et.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return St("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(D=>{a-=D,s.add(p)});c=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,c)).next(D=>(St("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,c)=>{const p=Nl(c);Ou(p,s)>0&&(s=p)}),new Ds(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ms=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function Wa(i){return null==i}function Uo(i){return 0===i&&1/i==-1/0}function ys(i){return"number"==typeof i&&Number.isInteger(i)&&!Uo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function vi(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=C(e)),e=_(i.get(t),e);return C(e)}function _(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function C(i){return i+"\x01\x01"}function v(i){const e=i.length;if(on(e>=2),2===e)return on("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),bn.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const p=i.indexOf("\x01",c);switch((p<0||p>t)&&Yt(),i.charAt(p+1)){case"\x01":const D=i.substring(c,p);let L;0===a.length?L=D:(a+=D,L=a,a=""),s.push(L);break;case"\x10":a+=i.substring(c,p),a+="\0";break;case"\x11":a+=i.substring(c,p+1);break;default:Yt()}c=p+2}return new bn(s)}const M=["userId","batchId"];function F(i,e){return[i,vi(e)]}function W(i,e,t){return[i,vi(e),t]}const ve={},Ie=["prefixPath","collectionGroup","readTime","documentId"],ft=["prefixPath","collectionGroup","documentId"],Gt=["collectionGroup","readTime","prefixPath","documentId"],Pn=["canonicalId","targetId"],un=["targetId","path"],Wn=["path","targetId"],Mi=["collectionId","parent"],ui=["indexId","uid"],Xo=["uid","sequenceNumber"],Gs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wa=["indexId","uid","orderedDocumentKey"],ea=["userId","collectionPath","documentId"],Ra=["userId","collectionPath","largestBatchId"],Ts=["userId","collectionGroup","largestBatchId"],lu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fi=[...lu,"documentOverlays"],ku=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=ku,il=[...Fl,"indexConfiguration","indexState","indexEntries"];class Ca extends rl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Yi(i,e){const t=zt(i);return uo.M(t.ht,e)}function Oa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ka(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ll(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class wr{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??hi.RED,this.left=a??hi.EMPTY,this.right=c??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new hi(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return hi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const e=this.left.check();if(e!==this.right.check())throw Yt();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1,hi.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(i,e,t,s,a){return this}insert(i,e,t){return new hi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ii{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(e){return new Vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ii(this.comparator);return t.data=e,t}}class Vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bo(i){return i.hasNext()?i.getNext():void 0}class rs{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new rs([])}unionWith(e){let t=new ii(nr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class sl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tc(){return typeof atob<"u"}class _i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sl("Invalid base64 string: "+a):a}}(e);return new _i(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new _i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return an(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const du=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(i){if(on(!!i),"string"==typeof i){let e=0;const t=du.exec(i);if(on(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:si(i.seconds),nanos:si(i.nanos)}}function si(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Na(i){return"string"==typeof i?_i.fromBase64String(i):_i.fromUint8Array(i)}function Fu(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lu(i){const e=i.mapValue.fields.__previous_value__;return Fu(e)?Lu(e):e}function ol(i){const e=Do(i.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}class Ul{constructor(e,t,s,a,c,p,D,L,H){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=D,this.longPollingOptions=L,this.useFetchStreams=H}}class ta{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}const na={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ka={nullValue:"NULL_VALUE"};function lo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fu(i)?4:td(i)?9007199254740991:10:Yt()}function To(i,e){if(i===e)return!0;const t=lo(i);if(t!==lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ol(i).isEqual(ol(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Do(s.timestampValue),p=Do(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,Na(i.bytesValue).isEqual(Na(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return si(s.geoPointValue.latitude)===si(a.geoPointValue.latitude)&&si(s.geoPointValue.longitude)===si(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return si(s.integerValue)===si(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=si(s.doubleValue),p=si(a.doubleValue);return c===p?Uo(c)===Uo(p):isNaN(c)&&isNaN(p)}return!1}(i,e);case 9:return bo(i.arrayValue.values||[],e.arrayValue.values||[],To);case 10:return function(s,a){const c=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Oa(c)!==Oa(p))return!1;for(const D in c)if(c.hasOwnProperty(D)&&(void 0===p[D]||!To(c[D],p[D])))return!1;return!0}(i,e);default:return Yt()}var a}function Ea(i,e){return void 0!==(i.values||[]).find(t=>To(t,e))}function ra(i,e){if(i===e)return 0;const t=lo(i),s=lo(e);if(t!==s)return an(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return an(i.booleanValue,e.booleanValue);case 2:return function(a,c){const p=si(a.integerValue||a.doubleValue),D=si(c.integerValue||c.doubleValue);return p<D?-1:p>D?1:p===D?0:isNaN(p)?isNaN(D)?0:-1:1}(i,e);case 3:return hu(i.timestampValue,e.timestampValue);case 4:return hu(ol(i),ol(e));case 5:return an(i.stringValue,e.stringValue);case 6:return function(a,c){const p=Na(a),D=Na(c);return p.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),D=c.split("/");for(let L=0;L<p.length&&L<D.length;L++){const H=an(p[L],D[L]);if(0!==H)return H}return an(p.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const p=an(si(a.latitude),si(c.latitude));return 0!==p?p:an(si(a.longitude),si(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],D=c.values||[];for(let L=0;L<p.length&&L<D.length;++L){const H=ra(p[L],D[L]);if(H)return H}return an(p.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===na.mapValue&&c===na.mapValue)return 0;if(a===na.mapValue)return 1;if(c===na.mapValue)return-1;const p=a.fields||{},D=Object.keys(p),L=c.fields||{},H=Object.keys(L);D.sort(),H.sort();for(let te=0;te<D.length&&te<H.length;++te){const De=an(D[te],H[te]);if(0!==De)return De;const tt=ra(p[D[te]],L[H[te]]);if(0!==tt)return tt}return an(D.length,H.length)}(i.mapValue,e.mapValue);default:throw Yt()}}function hu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return an(i,e);const t=Do(i),s=Do(e),a=an(t.seconds,s.seconds);return 0!==a?a:an(t.nanos,s.nanos)}function Ya(i){return fu(i)}function fu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=Do(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Na(i.bytesValue).toBase64():"referenceValue"in i?qt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let a="[",c=!0;for(const p of s.values||[])c?c=!1:a+=",",a+=fu(p);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",p=!0;for(const D of a)p?p=!1:c+=",",c+=`${D}:${fu(s.fields[D])}`;return c+"}"}(i.mapValue):Yt();var e}function Fa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ed(i){return!!i&&"integerValue"in i}function al(i){return!!i&&"arrayValue"in i}function pu(i){return!!i&&"nullValue"in i}function gu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ul(i){return!!i&&"mapValue"in i}function Uu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ka(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Uu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ia(i){return"nullValue"in i?ka:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Fa(ta.empty(),qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Yt()}function nd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Fa(ta.empty(),qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?na:Yt()}function ba(i,e){const t=ra(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bl(i,e){const t=ra(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ul(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=nr.emptyPath(),s={},a=[];e.forEach((p,D)=>{if(!t.isImmediateParentOf(D)){const L=this.getFieldsMap(t);this.applyChanges(L,s,a),s={},a=[],t=D.popLast()}p?s[D.lastSegment()]=Uu(p):a.push(D.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ul(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ul(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ka(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new is(Uu(this.value))}}function ll(i){const e=[];return Ka(i.fields,(t,s)=>{const a=new nr([t]);if(ul(s)){const c=ll(s.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new rs(e)}class Wr{constructor(e,t,s,a,c,p,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=p,this.documentState=D}static newInvalidDocument(e){return new Wr(e,0,fn.min(),fn.min(),fn.min(),is.empty(),0)}static newFoundDocument(e,t,s,a){return new Wr(e,1,t,fn.min(),s,a,0)}static newNoDocument(e,t){return new Wr(e,2,t,fn.min(),fn.min(),is.empty(),0)}static newUnknownDocument(e,t){return new Wr(e,3,t,fn.min(),fn.min(),is.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ss{constructor(e,t){this.position=e,this.inclusive=t}}function rd(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],p=i.position[a];if(s=c.field.isKeyField()?qt.comparator(qt.fromName(p.referenceValue),t.key):ra(p,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function E(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!To(i.position[t],e.position[t]))return!1;return!0}class x{constructor(e,t="asc"){this.field=e,this.dir=t}}function G(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ce{}class be extends ce{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Li(e,t,s):"array-contains"===t?new La(e,s):"in"===t?new yu(e,s):"not-in"===t?new Pf(e,s):"array-contains-any"===t?new Rf(e,s):new be(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Da(e,s):new mu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ra(t,this.value)):null!==t&&lo(this.value)===lo(t)&&this.matchesComparison(ra(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ke extends ce{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ke(e,t)}matches(e){return pt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function pt(i){return"and"===i.op}function Kt(i){return"or"===i.op}function Zt(i){return gn(i)&&pt(i)}function gn(i){for(const e of i.filters)if(e instanceof ke)return!1;return!0}function vn(i){if(i instanceof be)return i.field.canonicalString()+i.op.toString()+Ya(i.value);if(Zt(i))return i.filters.map(e=>vn(e)).join(",");{const e=i.filters.map(t=>vn(t)).join(",");return`${i.op}(${e})`}}function Un(i,e){return i instanceof be?(t=i,(s=e)instanceof be&&t.op===s.op&&t.field.isEqual(s.field)&&To(t.value,s.value)):i instanceof ke?function(t,s){return s instanceof ke&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,c,p)=>a&&Un(c,s.filters[p]),!0)}(i,e):void Yt();var t,s}function vs(i,e){const t=i.filters.concat(e);return ke.create(t,i.op)}function fi(i){return i instanceof be?`${(e=i).field.canonicalString()} ${e.op} ${Ya(e.value)}`:i instanceof ke?function(e){return e.op.toString()+" {"+e.getFilters().map(fi).join(" ,")+"}"}(i):"Filter";var e}class Li extends be{constructor(e,t,s){super(e,t,s),this.key=qt.fromName(s.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Da extends be{constructor(e,t){super(e,"in",t),this.keys=co(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mu extends be{constructor(e,t){super(e,"not-in",t),this.keys=co(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function co(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>qt.fromName(s.referenceValue))}class La extends be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return al(t)&&Ea(t.arrayValue,this.value)}}class yu extends be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ea(this.value.arrayValue,t)}}class Pf extends be{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ea(this.value.arrayValue,t)}}class Rf extends be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ea(this.value.arrayValue,s))}}class id{constructor(e,t=null,s=[],a=[],c=null,p=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=p,this.endAt=D,this.dt=null}}function jl(i,e=null,t=[],s=[],a=null,c=null,p=null){return new id(i,e,t,s,a,c,p)}function Va(i){const e=zt(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>vn(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Wa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ya(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ya(s)).join(",")),e.dt=t}return e.dt}function cl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!G(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Un(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!E(i.startAt,e.startAt)&&E(i.endAt,e.endAt)}function Bu(i){return qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function dl(i,e){return i.filters.filter(t=>t instanceof be&&t.field.isEqual(e))}function lh(i,e,t){let s=ka,a=!0;for(const c of dl(i,e)){let p=ka,D=!0;switch(c.op){case"<":case"<=":p=Ia(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,D=!1;break;case"!=":case"not-in":p=ka}ba({value:s,inclusive:a},{value:p,inclusive:D})<0&&(s=p,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=t.position[c];ba({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function sd(i,e,t){let s=na,a=!0;for(const c of dl(i,e)){let p=na,D=!0;switch(c.op){case">=":case">":p=nd(c.value),D=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,D=!1;break;case"!=":case"not-in":p=na}Bl({value:s,inclusive:a},{value:p,inclusive:D})>0&&(s=p,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=t.position[c];Bl({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Ja{constructor(e,t=null,s=[],a=[],c=null,p="F",D=null,L=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=p,this.startAt=D,this.endAt=L,this.wt=null,this._t=null}}function hl(i,e,t,s,a,c,p,D){return new Ja(i,e,t,s,a,c,p,D)}function ju(i){return new Ja(i)}function ch(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ac(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function w(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(i){return null!==i.collectionGroup}function g(i){const e=zt(i);if(null===e.wt){e.wt=[];const t=w(e),s=Ac(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new x(t)),e.wt.push(new x(nr.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new x(nr.keyField(),c))}}}return e.wt}function I(i){const e=zt(i);if(!e._t)if("F"===e.limitType)e._t=jl(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of g(e))t.push(new x(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new ss(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ss(e.startAt.position,e.startAt.inclusive):null;e._t=jl(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function Z(i,e){e.getFirstInequalityField(),w(i);const t=i.filters.concat([e]);return new Ja(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function re(i,e,t){return new Ja(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Be(i,e){return cl(I(i),I(e))&&i.limitType===e.limitType}function dt(i){return`${Va(I(i))}|lt:${i.limitType}`}function jt(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>fi(s)).join(", ")}]`),Wa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ya(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ya(s)).join(",")),`Target(${t})`}(I(i))}; limitType=${i.limitType})`}function Jt(i,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):qt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(i,e)&&function(t,s){for(const a of g(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(a,c,p){const D=rd(a,c,p);return a.inclusive?D<=0:D<0}(t.startAt,g(t),s)||t.endAt&&!function(a,c,p){const D=rd(a,c,p);return a.inclusive?D>=0:D>0}(t.endAt,g(t),s)));var t,s}function Dn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hr(i){return(e,t)=>{let s=!1;for(const a of g(i)){const c=Ao(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function Ao(i,e,t){const s=i.field.isKeyField()?qt.comparator(e.key,t.key):function(a,c,p){const D=c.data.field(a),L=p.data.field(a);return null!==D&&null!==L?ra(D,L):Yt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Yt()}}class Zs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const $l=new wr(qt.comparator);function As(){return $l}const Hl=new wr(qt.comparator);function vu(...i){let e=Hl;for(const t of i)e=e.insert(t.key,t);return e}function od(i){let e=Hl;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ia(){return $u()}function Sc(){return $u()}function $u(){return new Zs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Qa=new wr(qt.comparator),ad=new ii(qt.comparator);function rr(...i){let e=ad;for(const t of i)e=e.add(t);return e}const ud=new ii(an);function dh(){return ud}function ld(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uo(e)?"-0":e}}function fg(i){return{integerValue:""+i}}function Of(i,e){return ys(e)?fg(e):ld(i,e)}class cd{constructor(){this._=void 0}}function pg(i,e,t){return i instanceof Hu?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fu(a)&&(a=Lu(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):i instanceof _u?Ff(i,e):i instanceof Gu?hh(i,e):function(s,a){const c=kf(s,a),p=Mc(c)+Mc(s.gt);return ed(c)&&ed(s.gt)?fg(p):ld(s.serializer,p)}(i,e)}function Nf(i,e,t){return i instanceof _u?Ff(i,e):i instanceof Gu?hh(i,e):t}function kf(i,e){return i instanceof fl?ed(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Hu extends cd{}class _u extends cd{constructor(e){super(),this.elements=e}}function Ff(i,e){const t=gg(e);for(const s of i.elements)t.some(a=>To(a,s))||t.push(s);return{arrayValue:{values:t}}}class Gu extends cd{constructor(e){super(),this.elements=e}}function hh(i,e){let t=gg(e);for(const s of i.elements)t=t.filter(a=>!To(a,s));return{arrayValue:{values:t}}}class fl extends cd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Mc(i){return si(i.integerValue||i.doubleValue)}function gg(i){return al(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xc{constructor(e,t){this.field=e,this.transform=t}}class xy{constructor(e,t){this.version=e,this.transformResults=t}}class wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Gl{}function fh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new pl(i.key,wi.none()):new Rc(i.key,i.data,wi.none());{const t=i.data,s=is.empty();let a=new ii(nr.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?s.delete(c):s.set(c,p),a=a.add(c)}return new Xa(i.key,s,new rs(a.toArray()),wi.none())}}function Zl(i,e,t){i instanceof Rc?function(s,a,c){const p=s.value.clone(),D=Lf(s.fieldTransforms,a,c.transformResults);p.setAll(D),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):i instanceof Xa?function(s,a,c){if(!Pc(s.precondition,a))return void a.convertToUnknownDocument(c.version);const p=Lf(s.fieldTransforms,a,c.transformResults),D=a.data;D.setAll(mg(s)),D.setAll(p),a.convertToFoundDocument(c.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dd(i,e,t,s){return i instanceof Rc?function(a,c,p,D){if(!Pc(a.precondition,c))return p;const L=a.value.clone(),H=hd(a.fieldTransforms,D,c);return L.setAll(H),c.convertToFoundDocument(c.version,L).setHasLocalMutations(),null}(i,e,t,s):i instanceof Xa?function(a,c,p,D){if(!Pc(a.precondition,c))return p;const L=hd(a.fieldTransforms,D,c),H=c.data;return H.setAll(mg(a)),H.setAll(L),c.convertToFoundDocument(c.version,H).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(te=>te.field))}(i,e,t,s):(p=t,Pc(i.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function Py(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=kf(s.transform,a||null);null!=c&&(null===t&&(t=is.empty()),t.set(s.field,c))}return t||null}function Ry(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&bo(t,s,(a,c)=>function My(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof _u&&s instanceof _u||t instanceof Gu&&s instanceof Gu?bo(t.elements,s.elements,To):t instanceof fl&&s instanceof fl?To(t.gt,s.gt):t instanceof Hu&&s instanceof Hu);var t,s}(a,c))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Rc extends Gl{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Xa extends Gl{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function mg(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Lf(i,e,t){const s=new Map;on(i.length===t.length);for(let a=0;a<t.length;a++){const c=i[a],p=c.transform,D=e.data.field(c.field);s.set(c.field,Nf(p,D,t[a]))}return s}function hd(i,e,t){const s=new Map;for(const a of i){const c=a.transform,p=t.data.field(a.field);s.set(a.field,pg(c,p,e))}return s}class pl extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ph extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Zl(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Sc();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let D=this.applyToLocalView(p,c.mutatedFields);D=t.has(a.key)?null:D;const L=fh(p,D);null!==L&&s.set(a.key,L),p.isValidDocument()||p.convertToNoDocument(fn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rr())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,(t,s)=>Ry(t,s))&&bo(this.baseMutations,e.baseMutations,(t,s)=>Ry(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){on(e.mutations.length===s.length);let a=Qa;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,s[p].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,t){this.count=e,this.unchangedNames=t}}var _s,Vr;function yg(i){switch(i){default:return Yt();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function Zu(i){if(void 0===i)return mr("GRPC error has no .code"),it.UNKNOWN;switch(i){case _s.OK:return it.OK;case _s.CANCELLED:return it.CANCELLED;case _s.UNKNOWN:return it.UNKNOWN;case _s.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case _s.INTERNAL:return it.INTERNAL;case _s.UNAVAILABLE:return it.UNAVAILABLE;case _s.UNAUTHENTICATED:return it.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case _s.NOT_FOUND:return it.NOT_FOUND;case _s.ALREADY_EXISTS:return it.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return it.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case _s.ABORTED:return it.ABORTED;case _s.OUT_OF_RANGE:return it.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return it.UNIMPLEMENTED;case _s.DATA_LOSS:return it.DATA_LOSS;default:return Yt()}}(Vr=_s||(_s={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class zl{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vh}static getOrCreateInstance(){return null===vh&&(vh=new zl),vh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vh=null;function ky(){return new TextEncoder}const H_=new zn([4294967295,4294967295],0);function Fy(i){const e=ky().encode(i),t=new lr;return t.update(e),new Uint8Array(t.digest())}function Ly(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new zn([t,s],0),new zn([a,c],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(s<0)throw new Oc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Oc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=zn.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(zn.fromNumber(s)));return 1===a.compare(H_)&&(a=new zn([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const p=this.Et(s,a,c);if(!this.At(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new vg(c,a,t);return s.forEach(D=>p.insert(D)),p}insert(e){if(0===this.It)return;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const p=this.Et(s,a,c);this.Rt(p)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fd(fn.min(),a,new wr(an),As(),rr())}}class pd{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pd(s,t,rr(),rr(),rr())}}class _h{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _g{constructor(e,t){this.targetId=e,this.Vt=t}}class wh{constructor(e,t,s=_i.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class wu{constructor(){this.St=0,this.Dt=Uf(),this.Ct=_i.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=rr(),t=rr(),s=rr();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Yt()}}),new pd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Uf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=As(),this.zt=Vf(),this.Wt=new wr(an)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,c=this.se(s);if(c){const p=c.target;if(Bu(p))if(0===a){const D=new qt(p.path);this.Yt(s,D,Wr.newNoDocument(D,fn.min()))}else on(1===a);else{const D=this.ie(s);if(D!==a){const L=this.re(e,D);0!==L&&(this.ee(s),this.Wt=this.Wt.insert(s,2===L?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=zl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(H,te,De){var tt,yt,Bt,nn,ln,ar;const Ur={localCacheCount:te,existenceFilterCount:De.count},Cr=De.unchangedNames;return Cr&&(Ur.bloomFilter={applied:0===H,hashCount:null!==(tt=Cr?.hashCount)&&void 0!==tt?tt:0,bitmapLength:null!==(nn=null===(Bt=null===(yt=Cr?.bits)||void 0===yt?void 0:yt.bitmap)||void 0===Bt?void 0:Bt.length)&&void 0!==nn?nn:0,padding:null!==(ar=null===(ln=Cr?.bits)||void 0===ln?void 0:ln.padding)&&void 0!==ar?ar:0}),Ur}(L,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:c="",padding:p=0},hashCount:D=0}=s;let L,H;try{L=Na(c).toUint8Array()}catch(te){if(te instanceof sl)return xr("Decoding the base64 bloom filter in existence filter failed ("+te.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw te}try{H=new vg(L,p,D)}catch(te){return xr(te instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",te),1}return 0===H.It?1:a!==t-this.oe(e.targetId,H)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(c=>{const p=this.Gt.ue(),D=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;t.vt(D)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,p)=>{const D=this.se(p);if(D){if(c.current&&Bu(D.target)){const L=new qt(D.target.path);null!==this.jt.get(L)||this.ae(p,L)||this.Yt(p,L,Wr.newNoDocument(L,e))}c.Mt&&(t.set(p,c.Ot()),c.Ft())}});let s=rr();this.zt.forEach((c,p)=>{let D=!0;p.forEachWhile(L=>{const H=this.se(L);return!H||"TargetPurposeLimboResolution"===H.purpose||(D=!1,!1)}),D&&(s=s.add(c))}),this.jt.forEach((c,p)=>p.setReadTime(e));const a=new fd(e,t,this.Wt,this.jt,s);return this.jt=As(),this.zt=Vf(),this.Wt=new wr(an),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new wu,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ii(an),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||St("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new wu),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new wr(qt.comparator)}function Uf(){return new wr(qt.comparator)}const wg={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z_={and:"AND",or:"OR"};class z_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(i,e){return i.useProto3Json||Wa(e)?e:{value:e}}function gl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function q_(i,e){return gl(i,e.toTimestamp())}function Ji(i){return on(!!i),fn.fromTimestamp(function(e){const t=Do(e);return new Pr(t.seconds,t.nanos)}(i))}function Bf(i,e){return(t=i,new bn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cg(i){const e=bn.fromString(i);return on(Gf(e)),e}function yd(i,e){return Bf(i.databaseId,e.path)}function Cu(i,e){const t=Cg(e);if(t.get(1)!==i.databaseId.projectId)throw new Mt(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Mt(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new qt(Eh(t))}function Ch(i,e){return Bf(i.databaseId,e)}function vd(i){const e=Cg(i);return 4===e.length?bn.emptyPath():Eh(e)}function _d(i){return new bn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Eh(i){return on(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Eg(i,e,t){return{name:yd(i,e),fields:t.value.mapValue.fields}}function os(i,e,t){const s=Cu(i,e.name),a=Ji(e.updateTime),c=e.createTime?Ji(e.createTime):fn.min(),p=new is({mapValue:{fields:e.fields}}),D=Wr.newFoundDocument(s,a,c,p);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function ql(i,e){let t;if(e instanceof Rc)t={update:Eg(i,e.key,e.value)};else if(e instanceof pl)t={delete:yd(i,e.key)};else if(e instanceof Xa)t={update:Eg(i,e.key,e.data),updateMask:Gy(e.fieldMask)};else{if(!(e instanceof ph))return Yt();t={verify:yd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const p=c.transform;if(p instanceof Hu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof _u)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fl)return{fieldPath:c.field.canonicalString(),increment:p.gt};throw Yt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:q_(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Yt()),t;var a}function Ih(i,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?wi.updateTime(Ji(a.updateTime)):void 0!==a.exists?wi.exists(a.exists):wi.none():wi.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let D=null;"setToServerValue"in p?(on("REQUEST_TIME"===p.setToServerValue),D=new Hu):"appendMissingElements"in p?D=new _u(p.appendMissingElements.values||[]):"removeAllFromArray"in p?D=new Gu(p.removeAllFromArray.values||[]):"increment"in p?D=new fl(c,p.increment):Yt();const L=nr.fromServerFormat(p.fieldPath);return new xc(L,D)}(i,a)):[];var a;if(e.update){const a=Cu(i,e.update.name),c=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new rs((e.updateMask.fieldPaths||[]).map(H=>nr.fromServerFormat(H)));return new Xa(a,c,p,t,s)}return new Rc(a,c,t,s)}if(e.delete){const a=Cu(i,e.delete);return new pl(a,t)}if(e.verify){const a=Cu(i,e.verify);return new ph(a,t)}return Yt()}function Ig(i,e){return{documents:[Ch(i,e.path)]}}function jf(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Ch(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ch(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(L){if(0!==L.length)return Hf(ke.create(L,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(L){if(0!==L.length)return L.map(H=>{return{field:zu((te=H).field),direction:W_(te.dir)};var te})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=md(i,e.limit);var D,L;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(L=e.endAt).inclusive,values:L.position}),t}function bg(i){let e=vd(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){on(1===s);const te=t.from[0];te.allDescendants?a=te.collectionId:e=e.child(te.collectionId)}let c=[];t.where&&(c=function(te){const De=Hy(te);return De instanceof ke&&Zt(De)?De.getFilters():[De]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(te=>{return new x(Wl((De=te).field),function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(De.direction));var De}));let D=null;t.limit&&(D=function(te){let De;return De="object"==typeof te?te.value:te,Wa(De)?null:De}(t.limit));let L=null;var te;t.startAt&&(L=new ss((te=t.startAt).values||[],!!te.before));let H=null;return t.endAt&&(H=function(te){return new ss(te.values||[],!te.before)}(t.endAt)),hl(e,a,p,c,D,"F",L,H)}function Hy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Wl(e.unaryFilter.field);return be.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Wl(e.unaryFilter.field);return be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Wl(e.unaryFilter.field);return be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Wl(e.unaryFilter.field);return be.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(i):void 0!==i.fieldFilter?be.create(Wl((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ke.create(e.compositeFilter.filters.map(t=>Hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Yt()}}(e.compositeFilter.op))}(i):Yt();var e}function W_(i){return wg[i]}function wd(i){return G_[i]}function $f(i){return Z_[i]}function zu(i){return{fieldPath:i.canonicalString()}}function Wl(i){return nr.fromServerFormat(i.fieldPath)}function Hf(i){return i instanceof be?function(e){if("=="===e.op){if(gu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NAN"}};if(pu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NAN"}};if(pu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(e.field),op:wd(e.op),value:e.value}}}(i):i instanceof ke?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:$f(e.op),filters:t}}}(i):Yt()}function Gy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Eu{constructor(e,t,s,a,c=fn.min(),p=fn.min(),D=_i.EMPTY_BYTE_STRING,L=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=D,this.expectedCount=L}withSequenceNumber(e){return new Eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bh{constructor(e){this.fe=e}}function Dg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yd(a=i.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:gl(a,c.version.toTimestamp()),createTime:gl(a,c.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:ml(e.version)};else{if(!e.isUnknownDocument())return Yt();s.unknownDocument={path:t.path.toArray(),version:ml(e.version)}}var a,c;return s}function Nc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ml(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yl(i){const e=new Pr(i.seconds,i.nanoseconds);return fn.fromTimestamp(e)}function Ta(i,e){const t=(e.baseMutations||[]).map(c=>Ih(i.fe,c));for(let c=0;c<e.mutations.length-1;++c){const p=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(p.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const s=e.mutations.map(c=>Ih(i.fe,c)),a=Pr.fromMillis(e.localWriteTimeMs);return new gh(e.batchId,a,t,s)}function Cd(i){const e=yl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?yl(i.lastLimboFreeSnapshotVersion):fn.min();let s;var a;return void 0!==i.query.documents?(on(1===(a=i.query).documents.length),s=I(ju(vd(a.documents[0])))):s=I(bg(i.query)),new Eu(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,_i.fromBase64String(i.resumeToken))}function Dh(i,e){const t=ml(e.snapshotVersion),s=ml(e.lastLimboFreeSnapshotVersion);let a;a=Bu(e.target)?Ig(i.fe,e.target):jf(i.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Va(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function kc(i){const e=bg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?re(e,e.limit,"L"):e}function Zf(i,e){return new yh(e.largestBatchId,Ih(i.fe,e.overlayMutation))}function Th(i,e){const t=e.path.lastSegment();return[i,vi(e.path.popLast()),t]}function Ed(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:ml(s.readTime),documentKey:vi(s.documentKey.path),largestBatchId:s.largestBatchId}}class Kl{getBundleMetadata(e,t){return zf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:yl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return zf(e).put({bundleId:(s=t).id,createTime:ml(Ji(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ah(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:kc(a.bundledQuery),readTime:yl(a.readTime)};var a})}saveNamedQuery(e,t){return Ah(e).put({name:(s=t).name,readTime:ml(Ji(s.readTime)),bundledQuery:s.bundledQuery});var s}}function zf(i){return Yi(i,"bundles")}function Ah(i){return Yi(i,"namedQueries")}class Sh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sh(e,t.uid||"")}getOverlay(e,t){return Id(e).get(Th(this.userId,t)).next(s=>s?Zf(this.serializer,s):null)}getOverlays(e,t){const s=ia();return et.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,p)=>{const D=new yh(t,p);a.push(this.we(e,D))}),et.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(vi(p.getCollectionPath())));const c=[];return a.forEach(p=>{const D=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);c.push(Id(e).J("collectionPathOverlayIndex",D))}),et.waitFor(c)}getOverlaysForCollection(e,t,s){const a=ia(),c=vi(t),p=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Id(e).j("collectionPathOverlayIndex",p).next(D=>{for(const L of D){const H=Zf(this.serializer,L);a.set(H.getKey(),H)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=ia();let p;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Id(e).X({index:"collectionGroupOverlayIndex",range:D},(L,H,te)=>{const De=Zf(this.serializer,H);c.size()<a||De.largestBatchId===p?(c.set(De.getKey(),De),p=De.largestBatchId):te.done()}).next(()=>c)}we(e,t){return Id(e).put(function(s,a,c){const[p,D,L]=Th(a,c.mutation.key);return{userId:a,collectionPath:D,documentId:L,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:ql(s.fe,c.mutation)}}(this.serializer,this.userId,t))}}function Id(i){return Yi(i,"documentOverlays")}class vl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(si(e.integerValue));else if("doubleValue"in e){const s=si(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Uo(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Na(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Yt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),qt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Fc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tg(i){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=Fc(255&t[a]);if(s+=c,8!==c)break}return s}(i);return Math.ceil(e/8)}vl.Ve=new vl;class Zy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class zy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class qy{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yl{constructor(){this.je=new Zy,this.ze=new zy(this.je),this.We=new qy(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Jl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Jl(this.indexId,this.documentKey,this.arrayValue,s)}}function qu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ag(i.arrayValue,e.arrayValue),0!==t?t:(t=Ag(i.directionalValue,e.directionalValue),0!==t?t:qt.comparator(i.documentKey,e.documentKey)))}function Ag(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Sg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){on(e.collectionGroup===this.collectionId);const t=ga(e);if(void 0!==t&&!this.en(t))return!1;const s=Jo(e);let a=new Set,c=0,p=0;for(;c<s.length&&this.en(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const D=s[c];if(!this.nn(this.Ze,D)||!this.sn(this.Ye[p++],D))return!1}++c}for(;c<s.length;++c){const D=s[c];if(p>=this.Ye.length||!this.sn(this.Ye[p++],D))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Wy(i){var e,t;if(on(i instanceof be||i instanceof ke),i instanceof be){if(i instanceof yu){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>be.create(i.field,"==",c)))||[];return ke.create(a,"or")}return i}const s=i.filters.map(a=>Wy(a));return ke.create(s,i.op)}function Ky(i){if(0===i.getFilters().length)return[];const e=ec(Wy(i));return on(Xl(e)),Ql(e)||qf(e)?[e]:e.getFilters()}function Ql(i){return i instanceof be}function qf(i){return i instanceof ke&&Zt(i)}function Xl(i){return Ql(i)||qf(i)||function(e){if(e instanceof ke&&Kt(e)){for(const t of e.getFilters())if(!Ql(t)&&!qf(t))return!1;return!0}return!1}(i)}function ec(i){if(on(i instanceof be||i instanceof ke),i instanceof be)return i;if(1===i.filters.length)return ec(i.filters[0]);const e=i.filters.map(s=>ec(s));let t=ke.create(e,i.op);return t=bd(t),Xl(t)?t:(on(t instanceof ke),on(pt(t)),on(t.filters.length>1),t.filters.reduce((s,a)=>Wf(s,a)))}function Wf(i,e){let t;return on(i instanceof be||i instanceof ke),on(e instanceof be||e instanceof ke),t=i instanceof be?e instanceof be?ke.create([i,e],"and"):Yy(i,e):e instanceof be?Yy(e,i):function(s,a){if(on(s.filters.length>0&&a.filters.length>0),pt(s)&&pt(a))return vs(s,a.getFilters());const c=Kt(s)?s:a,p=Kt(s)?a:s,D=c.filters.map(L=>Wf(L,p));return ke.create(D,"or")}(i,e),bd(t)}function Yy(i,e){if(pt(e))return vs(e,i.getFilters());{const t=e.filters.map(s=>Wf(i,s));return ke.create(t,"or")}}function bd(i){if(on(i instanceof be||i instanceof ke),i instanceof be)return i;const e=i.getFilters();if(1===e.length)return bd(e[0]);if(gn(i))return i;const t=e.map(a=>bd(a)),s=[];return t.forEach(a=>{a instanceof be?s.push(a):a instanceof ke&&(a.op===i.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:ke.create(s,i.op)}class Jy{constructor(){this.rn=new Kf}addToCollectionParentIndex(e,t){return this.rn.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(Ds.min())}updateCollectionGroup(e,t,s){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class Kf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new ii(bn.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new ii(bn.comparator)).toArray()}}const Mh=new Uint8Array(0);class Mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Kf,this.un=new Zs(s=>Va(s),(s,a)=>cl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:s,parent:vi(a)};return Yf(e).put(c)}return et.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Pu(t),""],!1,!0);return Yf(e).j(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;s.push(v(p.parent))}return s})}addFieldIndex(e,t){const s=Lc(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var p;delete a.indexId;const c=s.add(a);if(t.indexState){const p=Dd(e);return c.next(D=>{p.put(Ed(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Lc(e),a=Dd(e),c=tc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=tc(e);let a=!0;const c=new Map;return et.forEach(this.cn(t),p=>this.an(e,p).next(D=>{a&&(a=!!D),c.set(p,D)})).next(()=>{if(a){let p=rr();const D=[];return et.forEach(c,(L,H)=>{var te;St("IndexedDbIndexManager",`Using index ${te=L,`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(Cr=>`${Cr.fieldPath}:${Cr.kind}`).join(",")}`} to execute ${Va(t)}`);const De=function(Cr,Ws){const Ps=ga(Ws);if(void 0===Ps)return null;for(const xi of dl(Cr,Ps.fieldPath))switch(xi.op){case"array-contains-any":return xi.value.arrayValue.values||[];case"array-contains":return[xi.value]}return null}(H,L),tt=function(Cr,Ws){const Ps=new Map;for(const xi of Jo(Ws))for(const Go of dl(Cr,xi.fieldPath))switch(Go.op){case"==":case"in":Ps.set(xi.fieldPath.canonicalString(),Go.value);break;case"not-in":case"!=":return Ps.set(xi.fieldPath.canonicalString(),Go.value),Array.from(Ps.values())}return null}(H,L),yt=function(Cr,Ws){const Ps=[];let xi=!0;for(const Go of Jo(Ws)){const Su=0===Go.kind?lh(Cr,Go.fieldPath,Cr.startAt):sd(Cr,Go.fieldPath,Cr.startAt);Ps.push(Su.value),xi&&(xi=Su.inclusive)}return new ss(Ps,xi)}(H,L),Bt=function(Cr,Ws){const Ps=[];let xi=!0;for(const Go of Jo(Ws)){const Su=0===Go.kind?sd(Cr,Go.fieldPath,Cr.endAt):lh(Cr,Go.fieldPath,Cr.endAt);Ps.push(Su.value),xi&&(xi=Su.inclusive)}return new ss(Ps,xi)}(H,L),nn=this.hn(L,H,yt),ln=this.hn(L,H,Bt),ar=this.ln(L,H,tt),Ur=this.fn(L.indexId,De,nn,yt.inclusive,ln,Bt.inclusive,ar);return et.forEach(Ur,Cr=>s.H(Cr,t.limit).next(Ws=>{Ws.forEach(Ps=>{const xi=qt.fromSegments(Ps.documentKey);p.has(xi)||(p=p.add(xi),D.push(xi))})}))}).next(()=>D)}return et.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ky(ke.create(e.filters,"and")).map(s=>jl(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,c,p,D){const L=(null!=t?t.length:1)*Math.max(s.length,c.length),H=L/(null!=t?t.length:1),te=[];for(let De=0;De<L;++De){const tt=t?this.dn(t[De/H]):Mh,yt=this.wn(e,tt,s[De%H],a),Bt=this._n(e,tt,c[De%H],p),nn=D.map(ln=>this.wn(e,tt,ln,!0));te.push(...this.createRange(yt,Bt,nn))}return te}wn(e,t,s,a){const c=new Jl(e,qt.empty(),t,s);return a?c:c.Je()}_n(e,t,s,a){const c=new Jl(e,qt.empty(),t,s);return a?c.Je():c}an(e,t){const s=new Sg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const D of c)s.tn(D)&&(!p||D.fields.length>p.fields.length)&&(p=D);return p})}getIndexType(e,t){let s=2;const a=this.cn(t);return et.forEach(a,c=>this.an(e,c).next(p=>{p?0!==s&&p.fields.length<function(D){let L=new ii(nr.comparator),H=!1;for(const te of D.filters)for(const De of te.getFlattenedFilters())De.field.isKeyField()||("array-contains"===De.op||"array-contains-any"===De.op?H=!0:L=L.add(De.field));for(const te of D.orderBy)te.field.isKeyField()||(L=L.add(te.field));return L.size+(H?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Yl;for(const a of Jo(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=s.He(a.kind);vl.Ve._e(c,p)}return s.Qe()}dn(e){const t=new Yl;return vl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Yl;return vl.Ve._e(Fa(this.databaseId,t),s.He(function(a){const c=Jo(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Yl);let c=0;for(const p of Jo(e)){const D=s[c++];for(const L of a)if(this.yn(t,p.fieldPath)&&al(D))a=this.pn(a,p,D);else{const H=L.He(p.kind);vl.Ve._e(D,H)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],c=[];for(const p of s.arrayValue.values||[])for(const D of a){const L=new Yl;L.seed(D.Qe()),vl.Ve._e(p,L.He(t.kind)),c.push(L)}return c}yn(e,t){return!!e.filters.find(s=>s instanceof be&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Lc(e),a=Dd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(c=>{const p=[];return et.forEach(c,D=>a.get([D.indexId,this.uid]).next(L=>{p.push(function(H,te){const De=te?new Vo(te.sequenceNumber,new Ds(yl(te.readTime),new qt(v(te.documentKey)),te.largestBatchId)):Vo.empty(),tt=H.fields.map(([yt,Bt])=>new Ru(nr.fromServerFormat(yt),Bt));return new gs(H.indexId,H.collectionGroup,tt,De)}(D,L))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:an(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Lc(e),c=Dd(e);return this.Tn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>et.forEach(D,L=>c.put(Ed(L.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return et.forEach(t,(a,c)=>{const p=s.get(a.collectionGroup);return(p?et.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),et.forEach(D,L=>this.En(e,a,L).next(H=>{const te=this.An(c,L);return H.isEqual(te)?et.resolve():this.vn(e,c,L,H,te)}))))})}Rn(e,t,s,a){return tc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return tc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=tc(e);let c=new ii(qu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(p,D)=>{c=c.add(new Jl(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>c)}An(e,t){let s=new ii(qu);const a=this.mn(t,e);if(null==a)return s;const c=ga(t);if(null!=c){const p=e.data.field(c.fieldPath);if(al(p))for(const D of p.arrayValue.values||[])s=s.add(new Jl(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Jl(t.indexId,e.key,Mh,a));return s}vn(e,t,s,a,c){St("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(D,L,H,te,De){const tt=D.getIterator(),yt=L.getIterator();let Bt=Bo(tt),nn=Bo(yt);for(;Bt||nn;){let ln=!1,ar=!1;if(Bt&&nn){const Ur=H(Bt,nn);Ur<0?ar=!0:Ur>0&&(ln=!0)}else null!=Bt?ar=!0:ln=!0;ln?(te(nn),nn=Bo(yt)):ar?(De(Bt),Bt=Bo(tt)):(Bt=Bo(tt),nn=Bo(yt))}}(a,c,qu,D=>{p.push(this.Rn(e,t,s,D))},D=>{p.push(this.Pn(e,t,s,D))}),et.waitFor(p)}Tn(e){let t=1;return Dd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,D)=>qu(p,D)).filter((p,D,L)=>!D||0!==qu(p,L[D-1]));const a=[];a.push(e);for(const p of s){const D=qu(p,e),L=qu(p,t);if(0===D)a[0]=e.Je();else if(D>0&&L<0)a.push(p),a.push(p.Je());else if(L>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2){if(this.bn(a[p],a[p+1]))return[];c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Mh,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Mh,[]]))}return c}bn(e,t){return qu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return et.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Yt())).next(xh)}}function Yf(i){return Yi(i,"collectionParents")}function tc(i){return Yi(i,"indexEntries")}function Lc(i){return Yi(i,"indexConfiguration")}function Dd(i){return Yi(i,"indexState")}function xh(i){on(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const a=i[s].indexState.offset;Ou(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ds(e.readTime,e.documentKey,t)}const Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class So{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new So(e,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),a=i.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let D=0;const L=s.X({range:p},(te,De,tt)=>(D++,tt.delete()));c.push(L.next(()=>{on(1===D)}));const H=[];for(const te of t.mutations){const De=W(e,te.key.path,t.batchId);c.push(a.delete(De)),H.push(te.key)}return et.waitFor(c).next(()=>H)}function Ph(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Yt();e=i.noDocument}return JSON.stringify(e).length}So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(41943040,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);class Rh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){on(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Rh(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).X({index:"userMutationsIndex",range:s},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Uc(e),p=_l(e);return p.add({}).next(D=>{on("number"==typeof D);const L=new gh(D,t,s,a),H=function(tt,yt,Bt){const nn=Bt.baseMutations.map(ar=>ql(tt.fe,ar)),ln=Bt.mutations.map(ar=>ql(tt.fe,ar));return{userId:yt,batchId:Bt.batchId,localWriteTimeMs:Bt.localWriteTime.toMillis(),baseMutations:nn,mutations:ln}}(this.serializer,this.userId,L),te=[];let De=new ii((tt,yt)=>an(tt.canonicalString(),yt.canonicalString()));for(const tt of a){const yt=W(this.userId,tt.key.path,D);De=De.add(tt.key.path.popLast()),te.push(p.put(H)),te.push(c.put(yt,ve))}return De.forEach(tt=>{te.push(this.indexManager.addToCollectionParentIndex(e,tt))}),e.addOnCommittedListener(()=>{this.Vn[D]=L.keys()}),et.waitFor(te).next(()=>L)})}lookupMutationBatch(e,t){return _l(e).get(t).next(s=>s?(on(s.userId===this.userId),Ta(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?et.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return _l(e).X({index:"userMutationsIndex",range:a},(p,D,L)=>{D.userId===this.userId&&(on(D.batchId>=s),c=Ta(this.serializer,D)),L.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return _l(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{s=c.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).j("userMutationsIndex",t).next(s=>s.map(a=>Ta(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=F(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Uc(e).X({range:a},(p,D,L)=>{const[H,te,De]=p,tt=v(te);if(H===this.userId&&t.path.isEqual(tt))return _l(e).get(De).next(yt=>{if(!yt)throw Yt();on(yt.userId===this.userId),c.push(Ta(this.serializer,yt))});L.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ii(an);const a=[];return t.forEach(c=>{const p=F(this.userId,c.path),D=IDBKeyRange.lowerBound(p),L=Uc(e).X({range:D},(H,te,De)=>{const[tt,yt,Bt]=H,nn=v(yt);tt===this.userId&&c.path.isEqual(nn)?s=s.add(Bt):De.done()});a.push(L)}),et.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=F(this.userId,s),p=IDBKeyRange.lowerBound(c);let D=new ii(an);return Uc(e).X({range:p},(L,H,te)=>{const[De,tt,yt]=L,Bt=v(tt);De===this.userId&&s.isPrefixOf(Bt)?Bt.length===a&&(D=D.add(yt)):te.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(_l(e).get(c).next(p=>{if(null===p)throw Yt();on(p.userId===this.userId),s.push(Ta(this.serializer,p))}))}),et.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return xg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),et.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return et.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Uc(e).X({range:s},(c,p,D)=>{if(c[0]===this.userId){const L=v(c[1]);a.push(L)}else D.done()}).next(()=>{on(0===a.length)})})}containsKey(e,t){return Pg(e,this.userId,t)}xn(e){return nc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Pg(i,e,t){const s=F(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let p=!1;return Uc(i).X({range:c,Y:!0},(D,L,H)=>{const[te,De,tt]=D;te===e&&De===a&&(p=!0),H.done()}).next(()=>p)}function _l(i){return Yi(i,"mutations")}function Uc(i){return Yi(i,"documentMutations")}function nc(i){return Yi(i,"mutationQueues")}class jo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new jo(0)}static Mn(){return new jo(-1)}}class Qy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new jo(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>fn.fromTimestamp(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(on(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Bc(e).X((p,D)=>{const L=Cd(D);L.sequenceNumber<=t&&null===s.get(L.targetId)&&(a++,c.push(this.removeTargetData(e,L)))}).next(()=>et.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Bc(e).X((s,a)=>{const c=Cd(a);t(c)})}$n(e){return Xy(e).get("targetGlobalKey").next(t=>(on(null!==t),t))}On(e,t){return Xy(e).put("targetGlobalKey",t)}Fn(e,t){return Bc(e).put(Dh(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Va(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Bc(e).X({range:a,index:"queryTargetsIndex"},(p,D,L)=>{const H=Cd(D);cl(t,H.target)&&(c=H,L.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=rc(e);return t.forEach(p=>{const D=vi(p.path);a.push(c.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,p))}),et.waitFor(a)}removeMatchingKeys(e,t,s){const a=rc(e);return et.forEach(t,c=>{const p=vi(c.path);return et.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=rc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=rc(e);let c=rr();return a.X({range:s,Y:!0},(p,D,L)=>{const H=v(p[1]),te=new qt(H);c=c.add(te)}).next(()=>c)}containsKey(e,t){const s=vi(t.path),a=IDBKeyRange.bound([s],[Pu(s)],!1,!0);let c=0;return rc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([p,D],L,H)=>{0!==p&&(c++,H.done())}).next(()=>c>0)}le(e,t){return Bc(e).get(t).next(s=>s?Cd(s):null)}}function Bc(i){return Yi(i,"targets")}function Xy(i){return Yi(i,"targetGlobal")}function rc(i){return Yi(i,"targetDocuments")}function Jf([i,e],[t,s]){const a=an(i,t);return 0===a?an(e,s):a}class Y_{constructor(e){this.Ln=e,this.buffer=new ii(Jf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Jf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qf{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;St("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,d.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Si(s)?St("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield va(s)}yield t.Qn(3e5)}))}}class J_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return et.resolve(ms.ct);const s=new Y_(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(Vc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vc):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,c,p,D,L,H;const te=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(De=>(De>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${De}`),a=this.params.maximumSequenceNumbersToCollect):a=De,p=Date.now(),this.nthSequenceNumber(e,a))).next(De=>(s=De,D=Date.now(),this.removeTargets(e,s,t))).next(De=>(c=De,L=Date.now(),this.removeOrphanedDocuments(e,s))).next(De=>(H=Date.now(),ni()<=m.in.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-te}ms\n\tDetermined least recently used ${a} in `+(D-p)+`ms\n\tRemoved ${c} targets in `+(L-D)+`ms\n\tRemoved ${De} documents in `+(H-L)+`ms\nTotal Duration: ${H-te}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:De})))}}class ev{constructor(e,t){this.db=e,this.garbageCollector=function Xf(i,e){return new J_(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Td(e,s)}removeReference(e,t,s){return Td(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Td(e,t)}Xn(e,t){return function(s,a){let c=!1;return nc(s).Z(p=>Pg(s,p,a).next(D=>(D&&(c=!0),et.resolve(!D)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(p,D)=>{if(D<=t){const L=this.Xn(e,p).next(H=>{if(!H)return c++,s.getEntry(e,p).next(()=>(s.removeEntry(p,fn.min()),rc(e).delete([0,vi(p.path)])))});a.push(L)}}).next(()=>et.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Td(e,t)}Yn(e,t){const s=rc(e);let a,c=ms.ct;return s.X({index:"documentTargetsIndex"},([p,D],{path:L,sequenceNumber:H})=>{0===p?(c!==ms.ct&&t(new qt(v(a)),c),c=H,a=L):c=ms.ct}).next(()=>{c!==ms.ct&&t(new qt(v(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return rc(i).put((s=i.currentSequenceNumber,{targetId:0,path:vi(e.path),sequenceNumber:s}));var s}class Rg{constructor(){this.changes=new Zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?et.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ic(e).put(s)}removeEntry(e,t,s){return ic(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Nc(c),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Wr.newInvalidDocument(t);return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s=this.ts(t,c)}).next(()=>s)}es(e,t){let s={size:0,document:Wr.newInvalidDocument(t)};return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s={document:this.ts(t,c),size:Ph(c)}}).next(()=>s)}getEntries(e,t){let s=As();return this.ns(e,t,(a,c)=>{const p=this.ts(a,c);s=s.insert(a,p)}).next(()=>s)}ss(e,t){let s=As(),a=new wr(qt.comparator);return this.ns(e,t,(c,p)=>{const D=this.ts(c,p);s=s.insert(c,D),a=a.insert(c,Ph(p))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return et.resolve();let a=new ii(Ng);t.forEach(L=>a=a.add(L));const c=IDBKeyRange.bound(Ad(a.first()),Ad(a.last())),p=a.getIterator();let D=p.getNext();return ic(e).X({index:"documentKeyIndex",range:c},(L,H,te)=>{const De=qt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;D&&Ng(D,De)<0;)s(D,null),D=p.getNext();D&&D.isEqual(De)&&(s(D,H),D=p.hasNext()?p.getNext():null),D?te.G(Ad(D)):te.done()}).next(()=>{for(;D;)s(D,null),D=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const c=t.path,p=[c.popLast().toArray(),c.lastSegment(),Nc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ic(e).j(IDBKeyRange.bound(p,D,!0)).next(L=>{let H=As();for(const te of L){const De=this.ts(qt.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);De.isFoundDocument()&&(Jt(t,De)||a.has(De.key))&&(H=H.insert(De.key,De))}return H})}getAllFromCollectionGroup(e,t,s,a){let c=As();const p=Og(t,s),D=Og(t,Ds.max());return ic(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,D,!0)},(L,H,te)=>{const De=this.ts(qt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);c=c.insert(De.key,De),c.size===a&&te.done()}).next(()=>c)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(on(!!t),t))}Zn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function K_(i,e){let t;if(e.document)t=os(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=qt.fromSegments(e.noDocument.path),a=yl(e.noDocument.readTime);t=Wr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Yt();{const s=qt.fromSegments(e.unknownDocument.path),a=yl(e.unknownDocument.version);t=Wr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Pr(s[0],s[1]);return fn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(fn.min()))return s}return Wr.newInvalidDocument(e)}}function Ua(i){return new tv(i)}class nv extends Rg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Zs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new ii((c,p)=>an(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const D=this.us.get(c);if(t.push(this.os.removeEntry(e,c,D.readTime)),p.isValidDocument()){const L=Dg(this.os.serializer,p);a=a.add(c.path.popLast()),s+=Ph(L)-D.size,t.push(this.os.addEntry(e,c,L))}else if(s-=D.size,this.trackRemovals){const L=Dg(this.os.serializer,p.convertToNoDocument(fn.min()));t.push(this.os.addEntry(e,c,L))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,s)),et.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((c,p)=>{this.us.set(c,{size:p,readTime:s.get(c).readTime})}),s))}}function ep(i){return Yi(i,"remoteDocumentGlobal")}function ic(i){return Yi(i,"remoteDocumentsV14")}function Ad(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Og(i,e){const t=e.documentKey.path.toArray();return[i,Nc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ng(i,e){const t=i.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=an(t[c],s[c]),a)return a;return a=an(t.length,s.length),a||(a=an(t[t.length-2],s[s.length-2]),a||an(t[t.length-1],s[s.length-1]))}class kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&dd(s.mutation,a,rs.empty(),Pr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,rr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=rr()){const a=ia();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let p=vu();return c.forEach((D,L)=>{p=p.insert(D,L.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,rr()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,D)=>{t.set(p,D)})})}computeViews(e,t,s,a){let c=As();const p=$u(),D=$u();return t.forEach((L,H)=>{const te=s.get(H.key);a.has(H.key)&&(void 0===te||te.mutation instanceof Xa)?c=c.insert(H.key,H):void 0!==te?(p.set(H.key,te.mutation.getFieldMask()),dd(te.mutation,H,te.mutation.getFieldMask(),Pr.now())):p.set(H.key,rs.empty())}),this.recalculateAndSaveOverlays(e,c).next(L=>(L.forEach((H,te)=>p.set(H,te)),t.forEach((H,te)=>{var De;return D.set(H,new kg(te,null!==(De=p.get(H))&&void 0!==De?De:null))}),D))}recalculateAndSaveOverlays(e,t){const s=$u();let a=new wr((p,D)=>p-D),c=rr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const D of p)D.keys().forEach(L=>{const H=t.get(L);if(null===H)return;let te=s.get(L)||rs.empty();te=D.applyToLocalView(H,te),s.set(L,te);const De=(a.get(D.batchId)||rr()).add(L);a=a.insert(D.batchId,De)})}).next(()=>{const p=[],D=a.getReverseIterator();for(;D.hasNext();){const L=D.getNext(),H=L.key,te=L.value,De=Sc();te.forEach(tt=>{if(!c.has(tt)){const yt=fh(t.get(tt),s.get(tt));null!==yt&&De.set(tt,yt),c=c.add(tt)}}),p.push(this.documentOverlayCache.saveOverlays(e,H,De))}return et.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return qt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):et.resolve(ia());let D=-1,L=c;return p.next(H=>et.forEach(H,(te,De)=>(D<De.largestBatchId&&(D=De.largestBatchId),c.get(te)?et.resolve():this.remoteDocumentCache.getEntry(e,te).next(tt=>{L=L.insert(te,tt)}))).next(()=>this.populateOverlays(e,H,c)).next(()=>this.computeViews(e,L,H,rr())).next(te=>({batchId:D,changes:od(te)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next(s=>{let a=vu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let c=vu();return this.indexManager.getCollectionParents(e,a).next(p=>et.forEach(p,D=>{const L=(H=t,te=D.child(a),new Ja(te,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,te;return this.getDocumentsMatchingCollectionQuery(e,L,s).next(H=>{H.forEach((te,De)=>{c=c.insert(te,De)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(c=>{a.forEach((D,L)=>{const H=L.getKey();null===c.get(H)&&(c=c.insert(H,Wr.newInvalidDocument(H)))});let p=vu();return c.forEach((D,L)=>{const H=a.get(D);void 0!==H&&dd(H.mutation,L,rs.empty(),Pr.now()),Jt(t,L)&&(p=p.insert(D,L))}),p})}}class rv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return et.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Ji(s.createTime)}),et.resolve()}getNamedQuery(e,t){return et.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:kc(s.bundledQuery),readTime:Ji(s.readTime)}),et.resolve();var s}}class iv{constructor(){this.overlays=new wr(qt.comparator),this.ls=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ia();return et.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.we(e,t,c)}),et.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(s)),et.resolve()}getOverlaysForCollection(e,t,s){const a=ia(),c=t.length+1,p=new qt(t.child("")),D=this.overlays.getIteratorFrom(p);for(;D.hasNext();){const L=D.getNext().value,H=L.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===c&&L.largestBatchId>s&&a.set(L.getKey(),L)}return et.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new wr((H,te)=>H-te);const p=this.overlays.getIterator();for(;p.hasNext();){const H=p.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>s){let te=c.get(H.largestBatchId);null===te&&(te=ia(),c=c.insert(H.largestBatchId,te)),te.set(H.getKey(),H)}}const D=ia(),L=c.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((H,te)=>D.set(H,te)),!(D.size()>=a)););return et.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let c=this.ls.get(t);void 0===c&&(c=rr(),this.ls.set(t,c)),this.ls.set(t,c.add(s.key))}}class er{constructor(){this.fs=new ii(Ss.ds),this.ws=new ii(Ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new Ss(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new Ss(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new qt(new bn([])),s=new Ss(t,e),a=new Ss(t,e+1),c=[];return this.ws.forEachInRange([s,a],p=>{this.ys(p),c.push(p.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qt(new bn([])),s=new Ss(t,e),a=new Ss(t,e+1);let c=rr();return this.ws.forEachInRange([s,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new Ss(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ss{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qt.comparator(e.key,t.key)||an(e.As,t.As)}static _s(e,t){return an(e.As,t.As)||qt.comparator(e.key,t.key)}}class Lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ii(Ss.ds)}checkEmpty(e){return et.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.vs;this.vs++;const p=new gh(c,t,s,a);this.mutationQueue.push(p);for(const D of a)this.Rs=this.Rs.add(new Ss(D.key,c)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return et.resolve(p)}lookupMutationBatch(e,t){return et.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return et.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ss(t,0),a=new Ss(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([s,a],p=>{const D=this.Ps(p.As);c.push(D)}),et.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ii(an);return t.forEach(a=>{const c=new Ss(a,0),p=new Ss(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,p],D=>{s=s.add(D.As)})}),et.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;qt.isDocumentKey(c)||(c=c.child(""));const p=new Ss(new qt(c),0);let D=new ii(an);return this.Rs.forEachWhile(L=>{const H=L.key.path;return!!s.isPrefixOf(H)&&(H.length===a&&(D=D.add(L.As)),!0)},p),et.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){on(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return et.forEach(t.mutations,a=>{const c=new Ss(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new Ss(t,0),a=this.Rs.firstAfterOrEqual(s);return et.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return et.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vg{constructor(e){this.Ds=e,this.docs=new wr(qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,p=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return et.resolve(s?s.document.mutableCopy():Wr.newInvalidDocument(t))}getEntries(e,t){let s=As();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Wr.newInvalidDocument(a))}),et.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=As();const p=t.path,D=new qt(p.child("")),L=this.docs.getIteratorFrom(D);for(;L.hasNext();){const{key:H,value:{document:te}}=L.getNext();if(!p.isPrefixOf(H.path))break;H.path.length>p.length+1||Ou(Nl(te),s)<=0||(a.has(te.key)||Jt(t,te))&&(c=c.insert(te.key,te.mutableCopy()))}return et.resolve(c)}getAllFromCollectionGroup(e,t,s,a){Yt()}Cs(e,t){return et.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new sv(this)}getSize(e){return et.resolve(this.size)}}class sv extends Rg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),et.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ov{constructor(e){this.persistence=e,this.xs=new Zs(t=>Va(t),cl),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new er,this.targetCount=0,this.Ms=jo.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),et.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Fn(t),et.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.xs.forEach((p,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),et.waitFor(c).next(()=>a)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return et.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),et.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),et.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),et.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return et.resolve(s)}containsKey(e,t){return et.resolve(this.ks.containsKey(t))}}class Oh{constructor(e,t){this.$s={},this.overlays={},this.Os=new ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ov(this),this.indexManager=new Jy,this.remoteDocumentCache=new Vg(s=>this.referenceDelegate.Ls(s)),this.serializer=new bh(t),this.qs=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Lg(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){St("MemoryPersistence","Starting transaction:",e);const a=new av(this.Os.next());return this.referenceDelegate.Us(),s(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return et.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class av extends rl{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Qs=new er,this.js=null}static zs(e){return new Sd(e)}get Ws(){if(this.js)return this.js;throw Yt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),et.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),et.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Ws,s=>{const a=qt.fromPath(s);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,fn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return et.or([()=>et.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uv{constructor(e){this.serializer=e}O(e,t,s,a){const c=new Qo("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",M,{unique:!0}),D.createObjectStore("documentMutations"),lv(e),function(D){D.createObjectStore("remoteDocuments")}(e));let p=et.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),lv(e)),p=p.next(()=>function(D){const L=D.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fn.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",H)}(c))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(D,L){return L.store("mutations").j().next(H=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",M,{unique:!0});const te=L.store("mutations"),De=H.map(tt=>te.put(tt));return et.waitFor(De)})}(e,c))),p=p.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ys(c))),s<6&&a>=6&&(p=p.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),s<7&&a>=7&&(p=p.next(()=>this.Zs(c))),s<8&&a>=8&&(p=p.next(()=>this.ti(e,c))),s<9&&a>=9&&(p=p.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.ei(c))),s<11&&a>=11&&(p=p.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(D){const L=D.createObjectStore("documentOverlays",{keyPath:ea});L.createIndex("collectionPathOverlayIndex",Ra,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",Ts,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(D){const L=D.createObjectStore("remoteDocumentsV14",{keyPath:Ie});L.createIndex("documentKeyIndex",ft),L.createIndex("collectionGroupIndex",Gt)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.si(e,c))),s<15&&a>=15&&(p=p.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:ui}).createIndex("sequenceNumberIndex",Xo,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Gs}).createIndex("documentKeyIndex",wa,{unique:!1})}(e))),p}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Ph(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>et.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(D=>et.forEach(D,L=>{on(L.userId===c.userId);const H=Ta(this.serializer,L);return xg(e,c.userId,H).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.X((p,D)=>{const L=new bn(p),H=[0,vi(L)];c.push(t.get(H).next(te=>te?et.resolve():t.put({targetId:0,path:vi(L),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>et.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Mi});const s=t.store("collectionParents"),a=new Kf,c=p=>{if(a.add(p)){const D=p.lastSegment(),L=p.popLast();return s.put({collectionId:D,parent:vi(L)})}};return t.store("remoteDocuments").X({Y:!0},(p,D)=>{const L=new bn(p);return c(L.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([p,D,L],H)=>{const te=v(D);return c(te.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const c=Cd(a),p=Dh(this.serializer,c);return t.put(p)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((c,p)=>{const D=t.store("remoteDocumentsV14"),L=(H=p,H.document?new qt(bn.fromString(H.document.name).popFirst(5)):H.noDocument?qt.fromSegments(H.noDocument.path):H.unknownDocument?qt.fromSegments(H.unknownDocument.path):Yt()).path.toArray();var H;const te={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(D.put(te))}).next(()=>et.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Ua(this.serializer),c=new Oh(Sd.zs,this.serializer.fe);return s.j().next(p=>{const D=new Map;return p.forEach(L=>{var H;let te=null!==(H=D.get(L.userId))&&void 0!==H?H:rr();Ta(this.serializer,L).keys().forEach(De=>te=te.add(De)),D.set(L.userId,te)}),et.forEach(D,(L,H)=>{const te=new yn(H),De=Sh.de(this.serializer,te),tt=c.getIndexManager(te),yt=Rh.de(te,this.serializer,tt,c.referenceDelegate);return new Fg(a,yt,De,tt).recalculateAndSaveOverlaysForDocumentKeys(new Ca(t,ms.ct),L).next()})})}}function lv(i){i.createObjectStore("targetDocuments",{keyPath:un}).createIndex("documentTargetsIndex",Wn,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pn,{unique:!0}),i.createObjectStore("targetGlobal")}const kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,t,s,a,c,p,D,L,H,te,De=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=c,this.window=p,this.document=D,this.ri=H,this.oi=te,this.ui=De,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=tt=>Promise.resolve(),!Fh.D())throw new Mt(it.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,a),this.di=t+"main",this.serializer=new bh(L),this.wi=new uo(this.di,this.ui,new uv(this.serializer)),this.Bs=new Qy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ua(this.serializer),this.qs=new Kl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===te&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mt(it.FAILED_PRECONDITION,kh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,d.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,d.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,d.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Si(e))return St("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return St("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return eu(e).get("owner").next(t=>et.resolve(this.Ri(t)))}Pi(e){return Lh(e).delete(this.clientId)}bi(){var e=this;return(0,d.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Yi(s,"clientMetadata");return a.j().next(c=>{const p=e.Si(c,18e5),D=c.filter(L=>-1===p.indexOf(L));return et.forEach(D,L=>a.delete(L.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?et.resolve(!0):eu(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Mt(it.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&St("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,d.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Ca(t,ms.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Rh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){St("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.ui)?il:14===p?Fl:13===p?ku:12===p?Fi:11===p?lu:void Yt();var p;let D;return this.wi.runTransaction(e,a,c,L=>(D=new Ca(L,this.Os?this.Os.next():ms.ct),"readwrite-primary"===t?this.Ti(D).next(H=>!!H||this.Ei(D)).next(H=>{if(!H)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Mt(it.FAILED_PRECONDITION,ya);return s(D)}).next(H=>this.vi(D).next(()=>H)):this.Oi(D).next(()=>s(D)))).then(L=>(D.raiseOnCommittedEvent(),L))}Oi(e){return eu(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Mt(it.FAILED_PRECONDITION,kh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eu(e).put("owner",t)}static D(){return uo.D()}Ai(e){const t=eu(e);return t.get("owner").next(s=>this.Ri(s)?(St("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):et.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(mr(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,de.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return St("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return mr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eu(i){return Yi(i,"owner")}function Lh(i){return Yi(i,"clientMetadata")}function Md(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class xd{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=rr(),a=rr();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xd(e,t.fromCache,s,a)}}class Ug{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,s)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(ch(t))return et.resolve(null);let s=I(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=re(t,null,"F"),s=I(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const p=rr(...c);return this.Ui.getDocuments(e,p).next(D=>this.indexManager.getMinOffset(e,s).next(L=>{const H=this.ji(t,D);return this.zi(t,H,p,L.readTime)?this.Ki(e,re(t,null,"F")):this.Wi(e,H,t,L)}))})))}Gi(e,t,s,a){return ch(t)||a.isEqual(fn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(c=>{const p=this.ji(t,c);return this.zi(t,p,s,a)?this.Qi(e,t):(ni()<=m.in.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jt(t)),this.Wi(e,p,t,ma(a,-1)))})}ji(e,t){let s=new ii(hr(e));return t.forEach((a,c)=>{Jt(e,c)&&(s=s.add(c))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return ni()<=m.in.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",jt(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ds.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class Q_{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new wr(an),this.Yi=new Zs(c=>Va(c),cl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function cv(i,e,t,s){return new Q_(i,e,t,s)}function dv(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,d.Z)(function*(i,e){const t=zt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const p=[],D=[];let L=rr();for(const H of a){p.push(H.batchId);for(const te of H.mutations)L=L.add(te.key)}for(const H of c){D.push(H.batchId);for(const te of H.mutations)L=L.add(te.key)}return t.localDocuments.getDocuments(s,L).next(H=>({er:H,removedBatchIds:p,addedBatchIds:D}))})})}),tp.apply(this,arguments)}function Bg(i,e){const t=zt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(p,D,L,H){const te=L.batch,De=te.keys();let tt=et.resolve();return De.forEach(yt=>{tt=tt.next(()=>H.getEntry(D,yt)).next(Bt=>{const nn=L.docVersions.get(yt);on(null!==nn),Bt.version.compareTo(nn)<0&&(te.applyToRemoteDocument(Bt,L),Bt.isValidDocument()&&(Bt.setReadTime(L.commitVersion),H.addEntry(Bt)))})}),tt.next(()=>p.mutationQueue.removeMutationBatch(D,te))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let D=rr();for(let L=0;L<p.mutationResults.length;++L)p.mutationResults[L].transformResults.length>0&&(D=D.add(p.batch.mutations[L].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hv(i){const e=zt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fv(i,e){const t=zt(i),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((te,De)=>{const tt=a.get(De);if(!tt)return;D.push(t.Bs.removeMatchingKeys(c,te.removedDocuments,De).next(()=>t.Bs.addMatchingKeys(c,te.addedDocuments,De)));let yt=tt.withSequenceNumber(c.currentSequenceNumber);var Bt,nn,ln;null!==e.targetMismatches.get(De)?yt=yt.withResumeToken(_i.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):te.resumeToken.approximateByteSize()>0&&(yt=yt.withResumeToken(te.resumeToken,s)),a=a.insert(De,yt),nn=yt,ln=te,(0===(Bt=tt).resumeToken.approximateByteSize()||nn.snapshotVersion.toMicroseconds()-Bt.snapshotVersion.toMicroseconds()>=3e8||ln.addedDocuments.size+ln.modifiedDocuments.size+ln.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(c,yt))});let L=As(),H=rr();if(e.documentUpdates.forEach(te=>{e.resolvedLimboDocuments.has(te)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(c,te))}),D.push(sc(c,p,e.documentUpdates).next(te=>{L=te.nr,H=te.sr})),!s.isEqual(fn.min())){const te=t.Bs.getLastRemoteSnapshotVersion(c).next(De=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,s));D.push(te)}return et.waitFor(D).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,L,H)).next(()=>L)}).then(c=>(t.Ji=a,c))}function sc(i,e,t){let s=rr(),a=rr();return t.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let p=As();return t.forEach((D,L)=>{const H=c.get(D);L.isFoundDocument()!==H.isFoundDocument()&&(a=a.add(D)),L.isNoDocument()&&L.version.isEqual(fn.min())?(e.removeEntry(D,L.readTime),p=p.insert(D,L)):!H.isValidDocument()||L.version.compareTo(H.version)>0||0===L.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(L),p=p.insert(D,L)):St("LocalStore","Ignoring outdated watch update for ",D,". Current version:",H.version," Watch version:",L.version)}),{nr:p,sr:a}})}function pv(i,e){const t=zt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oc(i,e){const t=zt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(c=>c?(a=c,et.resolve(a)):t.Bs.allocateTargetId(s).next(p=>(a=new Eu(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Wu(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,d.Z)(function*(i,e,t){const s=zt(i),a=s.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Si(p))throw p;St("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),np.apply(this,arguments)}function Pd(i,e,t){const s=zt(i);let a=fn.min(),c=rr();return s.persistence.runTransaction("Execute query","readonly",p=>function(D,L,H){const te=zt(D),De=te.Yi.get(H);return void 0!==De?et.resolve(te.Ji.get(De)):te.Bs.getTargetData(L,H)}(s,p,I(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,D.targetId).next(L=>{c=L})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,t?a:fn.min(),t?c:rr())).next(D=>(Hg(s,Dn(e),D),{documents:D,ir:c})))}function jg(i,e){const t=zt(i),s=zt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.le(c,e).next(p=>p?p.target:null))}function $g(i,e){const t=zt(i),s=t.Xi.get(e)||fn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,ma(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hg(t,e,a),a))}function Hg(i,e,t){let s=i.Xi.get(e)||fn.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Xi.set(e,s)}function rp(){return rp=(0,d.Z)(function*(i,e,t,s){const a=zt(i);let c=rr(),p=As();for(const H of t){const te=e.rr(H.metadata.name);H.document&&(c=c.add(te));const De=e.ur(H);De.setReadTime(e.cr(H.metadata.readTime)),p=p.insert(te,De)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),L=yield oc(a,(H=s,I(ju(bn.fromString(`__bundle__/docs/${H}`)))));var H;return a.persistence.runTransaction("Apply bundle documents","readwrite",H=>sc(H,D,p).next(te=>(D.apply(H),te)).next(te=>a.Bs.removeMatchingKeysForTargetId(H,L.targetId).next(()=>a.Bs.addMatchingKeys(H,c,L.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(H,te.nr,te.sr)).next(()=>te.nr)))}),rp.apply(this,arguments)}function Gg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,d.Z)(function*(i,e,t=rr()){const s=yield oc(i,I(kc(e.bundledQuery))),a=zt(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=Ji(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.qs.saveNamedQuery(c,e);const D=s.withResumeToken(_i.EMPTY_BYTE_STRING,p);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(c,D).next(()=>a.Bs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,s.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),ip.apply(this,arguments)}function sp(i,e){return`firestore_clients_${i}_${e}`}function op(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Rd(i,e){return`firestore_targets_${i}_${e}`}class ap{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new Mt(a.error.code,a.error.message))),p?new ap(e,t,a.state,c):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new Mt(s.error.code,s.error.message))),c?new ac(e,s.state,a):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=dh();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=ys(s.activeTargetIds[p]),c=c.add(s.activeTargetIds[p]);return a?new Vh(e,c):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Zg(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wl{constructor(){this.activeTargetIds=dh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,s,a,c){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new wr(an),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=sp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wl),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,d.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(sp(e.persistenceKey,a));if(c){const p=Vh.ar(a,c);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Rd(this.persistenceKey,e));if(s){const a=ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return St("SharedClientState","READ",e,t),t}setItem(e,t){St("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){St("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(St("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,d.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(c){let p=ms.ct;if(null!=c)try{const D=JSON.parse(c);on("number"==typeof D),p=D}catch(D){mr("SharedClientState","Failed to read sequence number from WebStorage",D)}return p}(s.newValue);a!==ms.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ap(this.currentUser,e,t,s),c=op(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Rd(this.persistenceKey,e),c=new ac(e,t,s);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Vh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ap.ar(new yn(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return ac.ar(a,t)}br(e){return Zg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,d.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);St("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(s),p=[],D=[];return c.forEach(L=>{a.has(L)||p.push(L)}),a.forEach(L=>{c.has(L)||D.push(L)}),this.syncEngine.Wr(p,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class up{constructor(){this.Hr=new wl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wl,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bh{Yr(e){}shutdown(){}}class Ba{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){St("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){St("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Od=null;function lp(){return null===Od?Od=268435456+Math.round(2147483648*Math.random()):Od++,"0x"+Od.toString(16)}const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ku{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const zs="WebChannelConnection";class zg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,c){const p=lp(),D=this.To(e,t);St("RestConnection",`Sending RPC '${e}' ${p}:`,D,s);const L={};return this.Eo(L,a,c),this.Ao(e,D,L,s).then(H=>(St("RestConnection",`Received RPC '${e}' ${p}: `,H),H),H=>{throw xr("RestConnection",`RPC '${e}' ${p} failed with error: `,H,"url: ",D,"request:",s),H})}vo(e,t,s,a,c,p){return this.Io(e,t,s,a,c)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${cp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const c=lp();return new Promise((p,D)=>{const L=new hn;L.setWithCredentials(!0),L.listenOnce(R.COMPLETE,()=>{try{switch(L.getLastErrorCode()){case $.NO_ERROR:const te=L.getResponseJson();St(zs,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(te)),p(te);break;case $.TIMEOUT:St(zs,`RPC '${e}' ${c} timed out`),D(new Mt(it.DEADLINE_EXCEEDED,"Request time out"));break;case $.HTTP_ERROR:const De=L.getStatus();if(St(zs,`RPC '${e}' ${c} failed with status:`,De,"response text:",L.getResponseText()),De>0){let tt=L.getResponseJson();Array.isArray(tt)&&(tt=tt[0]);const yt=tt?.error;if(yt&&yt.status&&yt.message){const Bt=function(nn){const ln=nn.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(ln)>=0?ln:it.UNKNOWN}(yt.status);D(new Mt(Bt,yt.message))}else D(new Mt(it.UNKNOWN,"Server responded with status "+L.getStatus()))}else D(new Mt(it.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{St(zs,`RPC '${e}' ${c} completed.`)}});const H=JSON.stringify(a);St(zs,`RPC '${e}' ${c} sending request:`,a),L.send(t,"POST",H,s,15)})}Ro(e,t,s){const a=lp(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=ou(),D=S(),L={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},H=this.longPollingOptions.timeoutSeconds;void 0!==H&&(L.longPollingTimeout=Math.round(1e3*H)),this.useFetchStreams&&(L.xmlHttpFactory=new ct({})),this.Eo(L.initMessageHeaders,t,s),L.encodeInitMessageHeaders=!0;const te=c.join("");St(zs,`Creating RPC '${e}' stream ${a}: ${te}`,L);const De=p.createWebChannel(te,L);let tt=!1,yt=!1;const Bt=new Ku({ro:ln=>{yt?St(zs,`Not sending because RPC '${e}' stream ${a} is closed:`,ln):(tt||(St(zs,`Opening RPC '${e}' stream ${a} transport.`),De.open(),tt=!0),St(zs,`RPC '${e}' stream ${a} sending:`,ln),De.send(ln))},oo:()=>De.close()}),nn=(ln,ar,Ur)=>{ln.listen(ar,Cr=>{try{Ur(Cr)}catch(Ws){setTimeout(()=>{throw Ws},0)}})};return nn(De,Ct.EventType.OPEN,()=>{yt||St(zs,`RPC '${e}' stream ${a} transport opened.`)}),nn(De,Ct.EventType.CLOSE,()=>{yt||(yt=!0,St(zs,`RPC '${e}' stream ${a} transport closed`),Bt.wo())}),nn(De,Ct.EventType.ERROR,ln=>{yt||(yt=!0,xr(zs,`RPC '${e}' stream ${a} transport errored:`,ln),Bt.wo(new Mt(it.UNAVAILABLE,"The operation could not be completed")))}),nn(De,Ct.EventType.MESSAGE,ln=>{var ar;if(!yt){const Ur=ln.data[0];on(!!Ur);const Cr=Ur,Ws=Cr.error||(null===(ar=Cr[0])||void 0===ar?void 0:ar.error);if(Ws){St(zs,`RPC '${e}' stream ${a} received error:`,Ws);const Ps=Ws.status;let xi=function(Su){const vy=_s[Su];if(void 0!==vy)return Zu(vy)}(Ps),Go=Ws.message;void 0===xi&&(xi=it.INTERNAL,Go="Unknown error status: "+Ps+" with message "+Ws.message),yt=!0,Bt.wo(new Mt(xi,Go)),De.close()}else St(zs,`RPC '${e}' stream ${a} received:`,Ur),Bt._o(Ur)}}),nn(D,K.STAT_EVENT,ln=>{ln.stat===Se.PROXY?St(zs,`RPC '${e}' stream ${a} detected buffering proxy`):ln.stat===Se.NOPROXY&&St(zs,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Bt.fo()},0),Bt}}function jh(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function jc(i){return new z_(i,!0)}class qg{constructor(e,t,s=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&St("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Nd{constructor(e,t,s,a,c,p,D,L){this.ii=e,this.$o=s,this.Oo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=D,this.listener=L,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new qg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,d.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,d.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,d.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===it.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===it.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Mt(it.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,d.Z)(function*(){e.state=0,e.start()}))}tu(e){return St("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(St("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Nd{constructor(e,t,s,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function By(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:Yt(),a=e.targetChange.targetIds||[],c=function(L,H){return L.useProto3Json?(on(void 0===H||"string"==typeof H),_i.fromBase64String(H||"")):(on(void 0===H||H instanceof Uint8Array),_i.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,D=p&&function(L){const H=void 0===L.code?it.UNKNOWN:Zu(L.code);return new Mt(H,L.message||"")}(p);t=new wh(s,a,c,D||null)}else if("documentChange"in e){const s=e.documentChange,a=Cu(i,s.document.name),c=Ji(s.document.updateTime),p=s.document.createTime?Ji(s.document.createTime):fn.min(),D=new is({mapValue:{fields:s.document.fields}}),L=Wr.newFoundDocument(a,c,p,D);t=new _h(s.targetIds||[],s.removedTargetIds||[],L.key,L)}else if("documentDelete"in e){const s=e.documentDelete,a=Cu(i,s.document),c=s.readTime?Ji(s.readTime):fn.min(),p=Wr.newNoDocument(a,c);t=new _h([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=Cu(i,s.document);t=new _h([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Yt();{const s=e.filter,{count:a=0,unchangedNames:c}=s,p=new Ny(a,c);t=new _g(s.targetId,p)}}var L;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return fn.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?fn.min():c.readTime?Ji(c.readTime):fn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(a,c){let p;const D=c.target;if(p=Bu(D)?{documents:Ig(a,D)}:{query:jf(a,D)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=Vy(a,c.resumeToken);const L=md(a,c.expectedCount);null!==L&&(p.expectedCount=L)}else if(c.snapshotVersion.compareTo(fn.min())>0){p.readTime=gl(a,c.snapshotVersion.toTimestamp());const L=md(a,c.expectedCount);null!==L&&(p.expectedCount=L)}return p}(this.serializer,e);const s=function $y(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class hp extends Nd{constructor(e,t,s,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(on(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jy(i,e){return i&&i.length>0?(on(void 0!==e),i.map(t=>function(s,a){let c=Ji(s.updateTime?s.updateTime:a);return c.isEqual(fn.min())&&(c=Ji(a)),new xy(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ji(e.commitTime);return this.listener.cu(s,t)}return on(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ql(this.serializer,s))};this.Wo(t)}}class fp extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Mt(it.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Mt(it.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.vo(e,t,s,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Mt(it.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class mv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(mr(t),this.mu=!1):St("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yv{constructor(e,t,s,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(D=>{s.enqueueAndForget((0,d.Z)(function*(){var L;lc(p)&&(St("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,d.Z)(function*(H){const te=zt(H);te.vu.add(4),yield uc(te),te.bu.set("Unknown"),te.vu.delete(4),yield kd(te)}),function(H){return L.apply(this,arguments)})(p))}))}),this.bu=new mv(s,a)}}function kd(i){return gp.apply(this,arguments)}function gp(){return gp=(0,d.Z)(function*(i){if(lc(i))for(const e of i.Ru)yield e(!0)}),gp.apply(this,arguments)}function uc(i){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,d.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Kg.apply(this,arguments)}function Hh(i,e){const t=zt(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Fd(t)?yp(t):bl(t).Ko()&&Zh(t,e))}function Gh(i,e){const t=zt(i),s=bl(t);t.Au.delete(e),s.Ko()&&mp(t,e),0===t.Au.size&&(s.Ko()?s.jo():lc(t)&&t.bu.set("Unknown"))}function Zh(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(i).su(e)}function mp(i,e){i.Vu.qt(e),bl(i).iu(e)}function yp(i){i.Vu=new gd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),bl(i).start(),i.bu.gu()}function Fd(i){return lc(i)&&!bl(i).Uo()&&i.Au.size>0}function lc(i){return 0===zt(i).vu.size}function vv(i){i.Vu=void 0}function X_(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,d.Z)(function*(i){i.Au.forEach((e,t)=>{Zh(i,e)})}),Yg.apply(this,arguments)}function e0(i,e){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,d.Z)(function*(i,e){vv(i),Fd(i)?(i.bu.Iu(e),yp(i)):i.bu.set("Unknown")}),Jg.apply(this,arguments)}function t0(i,e,t){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,d.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof wh&&2===e.state&&e.cause)try{yield(s=(0,d.Z)(function*(a,c){const p=c.cause;for(const D of c.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,p),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,c){return s.apply(this,arguments)})(i,e)}catch(s){St("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vp(i,s)}else if(e instanceof _h?i.Vu.Ht(e):e instanceof _g?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(fn.min()))try{const s=yield hv(i.localStore);t.compareTo(s)>=0&&(yield function(a,c){const p=a.Vu.ce(c);return p.targetChanges.forEach((D,L)=>{if(D.resumeToken.approximateByteSize()>0){const H=a.Au.get(L);H&&a.Au.set(L,H.withResumeToken(D.resumeToken,c))}}),p.targetMismatches.forEach((D,L)=>{const H=a.Au.get(D);if(!H)return;a.Au.set(D,H.withResumeToken(_i.EMPTY_BYTE_STRING,H.snapshotVersion)),mp(a,D);const te=new Eu(H.target,D,L,H.sequenceNumber);Zh(a,te)}),a.remoteSyncer.applyRemoteEvent(p)}(i,t))}catch(s){St("RemoteStore","Failed to raise snapshot:",s),yield vp(i,s)}var s}),Qg.apply(this,arguments)}function vp(i,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,d.Z)(function*(i,e,t){if(!Si(e))throw e;i.vu.add(1),yield uc(i),i.bu.set("Offline"),t||(t=()=>hv(i.localStore)),i.asyncQueue.enqueueRetryable((0,d.Z)(function*(){St("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield kd(i)}))}),Xg.apply(this,arguments)}function Yu(i,e){return e().catch(t=>vp(i,t,e))}function Cl(i){return _p.apply(this,arguments)}function _p(){return _p=(0,d.Z)(function*(i){const e=zt(i),t=tu(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;em(e);)try{const a=yield pv(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,wp(e,a)}catch(a){yield vp(e,a)}Cp(e)&&zh(e)}),_p.apply(this,arguments)}function em(i){return lc(i)&&i.Eu.length<10}function wp(i,e){i.Eu.push(e);const t=tu(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function Cp(i){return lc(i)&&!tu(i).Uo()&&i.Eu.length>0}function zh(i){tu(i).start()}function _v(i){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,d.Z)(function*(i){tu(i).hu()}),Iu.apply(this,arguments)}function tm(i){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,d.Z)(function*(i){const e=tu(i);for(const t of i.Eu)e.uu(t.mutations)}),Ep.apply(this,arguments)}function wv(i,e,t){return qh.apply(this,arguments)}function qh(){return qh=(0,d.Z)(function*(i,e,t){const s=i.Eu.shift(),a=mh.from(s,e,t);yield Yu(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield Cl(i)}),qh.apply(this,arguments)}function Cv(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,d.Z)(function*(i,e){var t;e&&tu(i).ou&&(yield(t=(0,d.Z)(function*(s,a){if(yg(c=a.code)&&c!==it.ABORTED){const p=s.Eu.shift();tu(s).Qo(),yield Yu(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Cl(s)}var c}),function(s,a){return t.apply(this,arguments)})(i,e)),Cp(i)&&zh(i)}),Ip.apply(this,arguments)}function Ld(i,e){return El.apply(this,arguments)}function El(){return El=(0,d.Z)(function*(i,e){const t=zt(i);t.asyncQueue.verifyOperationInProgress(),St("RemoteStore","RemoteStore received new credentials");const s=lc(t);t.vu.add(3),yield uc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kd(t)}),El.apply(this,arguments)}function Vd(i,e){return Il.apply(this,arguments)}function Il(){return Il=(0,d.Z)(function*(i,e){const t=zt(i);e?(t.vu.delete(2),yield kd(t)):e||(t.vu.add(2),yield uc(t),t.bu.set("Unknown"))}),Il.apply(this,arguments)}function bl(i){return i.Su||(i.Su=function(e,t,s){const a=zt(e);return a.fu(),new $h(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:X_.bind(null,i),ao:e0.bind(null,i),nu:t0.bind(null,i)}),i.Ru.push(function(){var e=(0,d.Z)(function*(t){t?(i.Su.Qo(),Fd(i)?yp(i):i.bu.set("Unknown")):(yield i.Su.stop(),vv(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function tu(i){return i.Du||(i.Du=function(e,t,s){const a=zt(e);return a.fu(),new hp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:_v.bind(null,i),ao:Cv.bind(null,i),au:tm.bind(null,i),cu:wv.bind(null,i)}),i.Ru.push(function(){var e=(0,d.Z)(function*(t){t?(i.Du.Qo(),yield Cl(i)):(yield i.Du.stop(),i.Eu.length>0&&(St("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class Wh{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,c){const p=Date.now()+s,D=new Wh(e,t,p,a,c);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mt(it.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(i,e){if(mr("AsyncQueue",`${e}: ${i}`),Si(i))return new Mt(it.UNAVAILABLE,`${e}: ${i}`);throw i}class Dl{constructor(e){this.comparator=e?(t,s)=>e(t,s)||qt.comparator(t.key,s.key):(t,s)=>qt.comparator(t.key,s.key),this.keyedMap=vu(),this.sortedSet=new wr(this.comparator)}static emptySet(e){return new Dl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Dl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Kh{constructor(){this.Cu=new wr(qt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Yt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class dc{constructor(e,t,s,a,c,p,D,L,H){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=D,this.excludesMetadataChanges=L,this.hasCachedResults=H}static fromInitialDocuments(e,t,s,a,c){const p=[];return t.forEach(D=>{p.push({type:0,doc:D})}),new dc(e,t,Dl.emptySet(t),p,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Be(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class bp{constructor(){this.Nu=void 0,this.listeners=[]}}class Ev{constructor(){this.queries=new Zs(e=>dt(e),Be),this.onlineState="Unknown",this.ku=new Set}}function nm(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,d.Z)(function*(i,e){const t=zt(i),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new bp),a)try{c.Nu=yield t.onListen(s)}catch(p){const D=cc(p,`Initialization of query '${jt(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&Ap(t)}),Dp.apply(this,arguments)}function Yh(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,d.Z)(function*(i,e){const t=zt(i),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Tp.apply(this,arguments)}function rm(i,e){const t=zt(i);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const D of p.listeners)D.$u(a)&&(s=!0);p.Nu=a}}s&&Ap(t)}function im(i,e,t){const s=zt(i),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function Ap(i){i.ku.forEach(e=>{e.next()})}class $o{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class om{constructor(e){this.serializer=e}rr(e){return Cu(this.serializer,e)}ur(e){return e.metadata.exists?os(this.serializer,e.document,!1):Wr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ji(e)}}class n0{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=am(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=bn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new om(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.rr(a.metadata.name);for(const p of a.metadata.queries){const D=(t.get(p)||rr()).add(c);t.set(p,D)}}return t}complete(){var e=this;return(0,d.Z)(function*(){const t=yield function gv(i,e,t,s){return rp.apply(this,arguments)}(e.localStore,new om(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Gg(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function am(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Jh{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=rr(),this.mutatedKeys=rr(),this.tc=hr(e),this.ec=new Dl(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Kh,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,D=!1;const L="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,H="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((te,De)=>{const tt=a.get(te),yt=Jt(this.query,De)?De:null,Bt=!!tt&&this.mutatedKeys.has(tt.key),nn=!!yt&&(yt.hasLocalMutations||this.mutatedKeys.has(yt.key)&&yt.hasCommittedMutations);let ln=!1;tt&&yt?tt.data.isEqual(yt.data)?Bt!==nn&&(s.track({type:3,doc:yt}),ln=!0):this.rc(tt,yt)||(s.track({type:2,doc:yt}),ln=!0,(L&&this.tc(yt,L)>0||H&&this.tc(yt,H)<0)&&(D=!0)):!tt&&yt?(s.track({type:0,doc:yt}),ln=!0):tt&&!yt&&(s.track({type:1,doc:tt}),ln=!0,(L||H)&&(D=!0)),ln&&(yt?(p=p.add(yt),c=nn?c.add(te):c.delete(te)):(p=p.delete(te),c=c.delete(te)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const te="F"===this.query.limitType?p.last():p.first();p=p.delete(te.key),c=c.delete(te.key),s.track({type:1,doc:te})}return{ec:p,ic:s,zi:D,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((H,te)=>function(De,tt){const yt=Bt=>{switch(Bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return yt(De)-yt(tt)}(H.type,te.type)||this.tc(H.doc,te.doc)),this.oc(s);const p=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,L=D!==this.Xu;return this.Xu=D,0!==c.length||L?{snapshot:new dc(this.query,e.ec,a,c,e.mutatedKeys,0===D,L,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Kh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=rr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Sp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Jh(s))}),t}hc(e){this.Yu=e.ir,this.Zu=rr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Iv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class bv{constructor(e){this.key=e,this.fc=!1}}class lm{constructor(e,t,s,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new Zs(D=>dt(D),Be),this._c=new Map,this.mc=new Set,this.gc=new wr(qt.comparator),this.yc=new Map,this.Ic=new er,this.Tc={},this.Ec=new Map,this.Ac=jo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Dv(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,d.Z)(function*(i,e){const t=uf(i);let s,a;const c=t.wc.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.lc();else{const p=yield oc(t.localStore,I(e)),D=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Mp(t,e,s,"current"===D,p.resumeToken),t.isPrimaryClient&&Hh(t.remoteStore,p)}return a}),Qh.apply(this,arguments)}function Mp(i,e,t,s,a){return xp.apply(this,arguments)}function xp(){return xp=(0,d.Z)(function*(i,e,t,s,a){i.Rc=(De,tt,yt)=>{return(Bt=(0,d.Z)(function*(nn,ln,ar,Ur){let Cr=ln.view.sc(ar);Cr.zi&&(Cr=yield Pd(nn.localStore,ln.query,!1).then(({documents:xi})=>ln.view.sc(xi,Cr)));const Ws=Ur&&Ur.targetChanges.get(ln.targetId),Ps=ln.view.applyChanges(Cr,nn.isPrimaryClient,Ws);return jd(nn,ln.targetId,Ps.cc),Ps.snapshot}),function(nn,ln,ar,Ur){return Bt.apply(this,arguments)})(i,De,tt,yt);var Bt};const c=yield Pd(i.localStore,e,!0),p=new um(e,c.ir),D=p.sc(c.documents),L=pd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,a),H=p.applyChanges(D,i.isPrimaryClient,L);jd(i,t,H.cc);const te=new Iv(e,t,p);return i.wc.set(e,te),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),H.snapshot}),xp.apply(this,arguments)}function cm(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,d.Z)(function*(i,e){const t=zt(i),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(c=>!Be(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Wu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Gh(t.remoteStore,s.targetId),Ju(t,s.targetId)}).catch(va))):(Ju(t,s.targetId),yield Wu(t.localStore,s.targetId,!0))}),Xh.apply(this,arguments)}function ja(){return ja=(0,d.Z)(function*(i,e,t){const s=Gd(i);try{const a=yield function(c,p){const D=zt(c),L=Pr.now(),H=p.reduce((tt,yt)=>tt.add(yt.key),rr());let te,De;return D.persistence.runTransaction("Locally write mutations","readwrite",tt=>{let yt=As(),Bt=rr();return D.Zi.getEntries(tt,H).next(nn=>{yt=nn,yt.forEach((ln,ar)=>{ar.isValidDocument()||(Bt=Bt.add(ln))})}).next(()=>D.localDocuments.getOverlayedDocuments(tt,yt)).next(nn=>{te=nn;const ln=[];for(const ar of p){const Ur=Py(ar,te.get(ar.key).overlayedDocument);null!=Ur&&ln.push(new Xa(ar.key,Ur,ll(Ur.value.mapValue),wi.exists(!0)))}return D.mutationQueue.addMutationBatch(tt,L,ln,p)}).next(nn=>{De=nn;const ln=nn.applyToLocalDocumentSet(te,Bt);return D.documentOverlayCache.saveOverlays(tt,nn.batchId,ln)})}).then(()=>({batchId:De.batchId,changes:od(te)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,p,D){let L=c.Tc[c.currentUser.toKey()];L||(L=new wr(an)),L=L.insert(p,D),c.Tc[c.currentUser.toKey()]=L}(s,a.batchId,t),yield bu(s,a.changes),yield Cl(s.remoteStore)}catch(a){const c=cc(a,"Failed to persist write");t.reject(c)}}),ja.apply(this,arguments)}function ef(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,d.Z)(function*(i,e){const t=zt(i);try{const s=yield fv(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.yc.get(c);p&&(on(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.fc=!0:a.modifiedDocuments.size>0?on(p.fc):a.removedDocuments.size>0&&(on(p.fc),p.fc=!1))}),yield bu(t,s,e)}catch(s){yield va(s)}}),Pp.apply(this,arguments)}function dm(i,e,t){const s=zt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((c,p)=>{const D=p.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(c,p){const D=zt(c);D.onlineState=p;let L=!1;D.queries.forEach((H,te)=>{for(const De of te.listeners)De.Mu(p)&&(L=!0)}),L&&Ap(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function r0(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,d.Z)(function*(i,e,t){const s=zt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),c=a&&a.key;if(c){let p=new wr(qt.comparator);p=p.insert(c,Wr.newNoDocument(c,fn.min()));const D=rr().add(c),L=new fd(fn.min(),new Map,new wr(an),p,D);yield ef(s,L),s.gc=s.gc.remove(c),s.yc.delete(e),nf(s)}else yield Wu(s.localStore,e,!1).then(()=>Ju(s,e,t)).catch(va)}),tf.apply(this,arguments)}function Av(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,d.Z)(function*(i,e){const t=zt(i),s=e.batch.batchId;try{const a=yield Bg(t.localStore,e);Bd(t,s,null),$c(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield bu(t,a)}catch(a){yield va(a)}}),Rp.apply(this,arguments)}function Sv(i,e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,d.Z)(function*(i,e,t){const s=zt(i);try{const a=yield function(c,p){const D=zt(c);return D.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let H;return D.mutationQueue.lookupMutationBatch(L,p).next(te=>(on(null!==te),H=te.keys(),D.mutationQueue.removeMutationBatch(L,te))).next(()=>D.mutationQueue.performConsistencyCheck(L)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(L,H,p)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,H)).next(()=>D.localDocuments.getDocuments(L,H))})}(s.localStore,e);Bd(s,e,t),$c(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield bu(s,a)}catch(a){yield va(a)}}),Ud.apply(this,arguments)}function Op(){return Op=(0,d.Z)(function*(i,e){const t=zt(i);lc(t.remoteStore)||St("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const p=zt(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>p.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=cc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Op.apply(this,arguments)}function $c(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Bd(i,e,t){const s=zt(i);let a=s.Tc[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Ju(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),t&&i.dc.Pc(s,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||xv(i,s)})}function xv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Gh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),nf(i))}function jd(i,e,t){for(const s of t)s instanceof Jh?(i.Ic.addReference(s.key,e),s0(i,s)):s instanceof Sp?(St("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||xv(i,s.key)):Yt()}function s0(i,e){const t=e.key,s=t.path.canonicalString();i.gc.get(t)||i.mc.has(s)||(St("SyncEngine","New document in limbo: "+t),i.mc.add(s),nf(i))}function nf(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new qt(bn.fromString(e)),s=i.Ac.next();i.yc.set(s,new bv(t)),i.gc=i.gc.insert(t,s),Hh(i.remoteStore,new Eu(I(ju(t.path)),s,"TargetPurposeLimboResolution",ms.ct))}}function bu(i,e,t){return rf.apply(this,arguments)}function rf(){return rf=(0,d.Z)(function*(i,e,t){const s=zt(i),a=[],c=[],p=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,L)=>{p.push(s.Rc(L,e,t).then(H=>{if((H||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(L.targetId,H?.fromCache?"not-current":"current"),H){a.push(H);const te=xd.Li(L.targetId,H);c.push(te)}}))}),yield Promise.all(p),s.dc.nu(a),yield(D=(0,d.Z)(function*(L,H){const te=zt(L);try{yield te.persistence.runTransaction("notifyLocalViewChanges","readwrite",De=>et.forEach(H,tt=>et.forEach(tt.Fi,yt=>te.persistence.referenceDelegate.addReference(De,tt.targetId,yt)).next(()=>et.forEach(tt.Bi,yt=>te.persistence.referenceDelegate.removeReference(De,tt.targetId,yt)))))}catch(De){if(!Si(De))throw De;St("LocalStore","Failed to update sequence numbers: "+De)}for(const De of H){const tt=De.targetId;if(!De.fromCache){const yt=te.Ji.get(tt),nn=yt.withLastLimboFreeSnapshotVersion(yt.snapshotVersion);te.Ji=te.Ji.insert(tt,nn)}}}),function(L,H){return D.apply(this,arguments)})(s.localStore,c))}),rf.apply(this,arguments)}function hm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,d.Z)(function*(i,e){const t=zt(i);if(!t.currentUser.isEqual(e)){St("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(p=>{p.forEach(D=>{D.reject(new Mt(it.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield bu(t,s.er)}var a}),$d.apply(this,arguments)}function Qu(i,e){const t=zt(i),s=t.yc.get(e);if(s&&s.fc)return rr().add(s.key);{let a=rr();const c=t._c.get(e);if(!c)return a;for(const p of c){const D=t.wc.get(p);a=a.unionWith(D.view.nc)}return a}}function sf(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,d.Z)(function*(i,e){const t=zt(i),s=yield Pd(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&jd(t,e.targetId,a.cc),a}),Hc.apply(this,arguments)}function Hd(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,d.Z)(function*(i,e){const t=zt(i);return $g(t.localStore,e).then(s=>bu(t,s))}),Np.apply(this,arguments)}function kp(i,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,d.Z)(function*(i,e,t,s){const a=zt(i),c=yield function(p,D){const L=zt(p),H=zt(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",te=>H.Sn(te,D).next(De=>De?L.localDocuments.getDocuments(te,De):et.resolve(null)))}(a.localStore,e);var D;null!==c?("pending"===t?yield Cl(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),$c(a,e),D=e,zt(zt(a.localStore).mutationQueue).Cn(D)):Yt(),yield bu(a,c)):St("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function Fp(){return Fp=(0,d.Z)(function*(i,e){const t=zt(i);if(uf(t),Gd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Gc(t,s.toArray());t.vc=!0,yield Vd(t.remoteStore,!0);for(const c of a)Hh(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Ju(t,p),Wu(t.localStore,p,!0))),Gh(t.remoteStore,p)}),yield a,yield Gc(t,s),function(c){const p=zt(c);p.yc.forEach((D,L)=>{Gh(p.remoteStore,L)}),p.Ic.Ts(),p.yc=new Map,p.gc=new wr(qt.comparator)}(t),t.vc=!1,yield Vd(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function Gc(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,d.Z)(function*(i,e,t){const s=zt(i),a=[],c=[];for(const p of e){let D;const L=s._c.get(p);if(L&&0!==L.length){D=yield oc(s.localStore,I(L[0]));for(const H of L){const te=s.wc.get(H),De=yield sf(s,te);De.snapshot&&c.push(De.snapshot)}}else{const H=yield jg(s.localStore,p);D=yield oc(s.localStore,H),yield Mp(s,Rv(H),p,!1,D.resumeToken)}a.push(D)}return s.dc.nu(c),a}),Lp.apply(this,arguments)}function Rv(i){return hl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Ov(i){const e=zt(i);return zt(zt(e.localStore).persistence).$i()}function o0(i,e,t,s){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,d.Z)(function*(i,e,t,s){const a=zt(i);if(a.vc)return void St("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield $g(a.localStore,Dn(c[0])),D=fd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_i.EMPTY_BYTE_STRING);yield bu(a,p,D);break}case"rejected":yield Wu(a.localStore,e,!0),Ju(a,e,s);break;default:Yt()}}),Vp.apply(this,arguments)}function Nv(i,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,d.Z)(function*(i,e,t){const s=uf(i);if(s.vc){for(const a of e){if(s._c.has(a)){St("SyncEngine","Adding an already active target "+a);continue}const c=yield jg(s.localStore,a),p=yield oc(s.localStore,c);yield Mp(s,Rv(c),p.targetId,!1,p.resumeToken),Hh(s.remoteStore,p)}for(const a of t)s._c.has(a)&&(yield Wu(s.localStore,a,!1).then(()=>{Gh(s.remoteStore,a),Ju(s,a)}).catch(va))}}),Up.apply(this,arguments)}function uf(i){const e=zt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r0.bind(null,e),e.dc.nu=rm.bind(null,e.eventManager),e.dc.Pc=im.bind(null,e.eventManager),e}function Gd(i){const e=zt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sv.bind(null,e),e}class hc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,d.Z)(function*(){t.serializer=jc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new Oh(Sd.zs,this.serializer)}createSharedClientState(e){return new up}terminate(){var e=this;return(0,d.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends hc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,d.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gd(s.Vc.syncEngine),yield Cl(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Qf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new kl(t,this.persistence);return new Nu(e.asyncQueue,s)}createPersistence(e){const t=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new Fh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jh(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new up}}class fm extends Bp{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,d.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Uh&&(s.sharedClientState.syncEngine={jr:kp.bind(null,a),zr:o0.bind(null,a),Wr:Nv.bind(null,a),$i:Ov.bind(null,a),Qr:Hd.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var c=(0,d.Z)(function*(p){yield function Pv(i,e){return Fp.apply(this,arguments)}(s.Vc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jh();if(!Uh.D(t))throw new Mt(it.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Zc{initialize(e,t){var s=this;return(0,d.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>dm(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=hm.bind(null,s.syncEngine),yield Vd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ev}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=new zg(e.databaseInfo);return new fp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=D=>dm(this.syncEngine,D,0),p=Ba.D()?new Ba:new Bh,new yv(t,s,a,c,p);var t,s,a,c,p}createSyncEngine(e,t){return function(s,a,c,p,D,L,H){const te=new lm(s,a,c,p,D,L);return H&&(te.vc=!0),te}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,d.Z)(function*(t){const s=zt(t);St("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield uc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pm(i,e=10240){let t=0;return{read:()=>(0,d.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,d.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new oi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,d.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,d.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,d.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const c=yield e.$c(a);return new sm(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,d.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,d.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,d.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,d.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Mt(it.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,d.Z)(function*(c,p){const D=zt(c),L=_d(D.serializer)+"/documents",H={documents:p.map(yt=>yd(D.serializer,yt))},te=yield D.vo("BatchGetDocuments",L,H,p.length),De=new Map;te.forEach(yt=>{const Bt=function Uy(i,e){return"found"in e?function(t,s){on(!!s.found);const a=Cu(t,s.found.name),c=Ji(s.found.updateTime),p=s.found.createTime?Ji(s.found.createTime):fn.min(),D=new is({mapValue:{fields:s.found.fields}});return Wr.newFoundDocument(a,c,p,D)}(i,e):"missing"in e?function(t,s){on(!!s.missing),on(!!s.readTime);const a=Cu(t,s.missing),c=Ji(s.readTime);return Wr.newNoDocument(a,c)}(i,e):Yt()}(D.serializer,yt);De.set(Bt.key.toString(),Bt)});const tt=[];return p.forEach(yt=>{const Bt=De.get(yt.toString());on(!!Bt),tt.push(Bt)}),tt}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new pl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,d.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=qt.fromPath(a);e.mutations.push(new ph(c,e.precondition(c)))}),yield(s=(0,d.Z)(function*(a,c){const p=zt(a),D=_d(p.serializer)+"/documents",L={writes:c.map(H=>ql(p.serializer,H))};yield p.Io("Commit",D,L)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yt();t=fn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Mt(it.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fn.min())?wi.exists(!1):wi.updateTime(t):wi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fn.min()))throw new Mt(it.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(t)}return wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a0{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.Bc=s.maxAttempts,this.qo=new qg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,d.Z)(function*(){const t=new fc(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Wa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yg(t)}return!1}}class Zd{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=yn.UNAUTHENTICATED,this.clientId=ai.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,d.Z)(function*(D){St("FirestoreClient","Received user=",D.uid),yield c.authCredentialListener(D),c.user=D});return function(D){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(St("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,d.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mt(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,d.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=cc(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,d.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),St("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,d.Z)(function*(c){s.isEqual(c)||(yield dv(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jp.apply(this,arguments)}function zd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,d.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield pc(i);St("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(a=>Ld(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>Ld(e.remoteStore,c)),i._onlineComponents=e}),$p.apply(this,arguments)}function nu(i){return"FirebaseError"===i.name?i.code===it.FAILED_PRECONDITION||i.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function pc(i){return qs.apply(this,arguments)}function qs(){return qs=(0,d.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){St("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!nu(t))throw t;xr("Error using user provided cache. Falling back to memory cache: "+t),yield df(i,new hc)}}else St("FirestoreClient","Using default OfflineComponentProvider"),yield df(i,new hc);return i._offlineComponents}),qs.apply(this,arguments)}function Du(i){return zc.apply(this,arguments)}function zc(){return zc=(0,d.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(St("FirestoreClient","Using user provided OnlineComponentProvider"),yield zd(i,i._uninitializedComponentsProvider._online)):(St("FirestoreClient","Using default OnlineComponentProvider"),yield zd(i,new Zc))),i._onlineComponents}),zc.apply(this,arguments)}function Aa(i){return pc(i).then(e=>e.persistence)}function qc(i){return pc(i).then(e=>e.localStore)}function gc(i){return Du(i).then(e=>e.remoteStore)}function Tl(i){return Du(i).then(e=>e.syncEngine)}function ru(i){return Al.apply(this,arguments)}function Al(){return Al=(0,d.Z)(function*(i){const e=yield Du(i),t=e.eventManager;return t.onListen=Dv.bind(null,e.syncEngine),t.onUnlisten=cm.bind(null,e.syncEngine),t}),Al.apply(this,arguments)}function yc(i,e,t={}){const s=new oi;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function(a,c,p,D,L){const H=new lf({next:De=>{c.enqueueAndForget(()=>Yh(a,te));const tt=De.docs.has(p);!tt&&De.fromCache?L.reject(new Mt(it.UNAVAILABLE,"Failed to get document because the client is offline.")):tt&&De.fromCache&&D&&"server"===D.source?L.reject(new Mt(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(De)},error:De=>L.reject(De)}),te=new $o(ju(p.path),H,{includeMetadataChanges:!0,Ku:!0});return nm(a,te)}(yield ru(i),i.asyncQueue,e,t,s)})),s.promise}function Hp(i,e,t={}){const s=new oi;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function(a,c,p,D,L){const H=new lf({next:De=>{c.enqueueAndForget(()=>Yh(a,te)),De.fromCache&&"server"===D.source?L.reject(new Mt(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(De)},error:De=>L.reject(De)}),te=new $o(p,H,{includeMetadataChanges:!0,Ku:!0});return nm(a,te)}(yield ru(i),i.asyncQueue,e,t,s)})),s.promise}function Gp(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Zp=new Map;function hf(i,e,t){if(!t)throw new Mt(it.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function wm(i,e,t,s){if(!0===e&&!0===s)throw new Mt(it.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Cm(i){if(!qt.isDocumentKey(i))throw new Mt(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function zp(i){if(qt.isDocumentKey(i))throw new Mt(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Yt()}function br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Mt(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new Mt(it.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pf(i,e){if(e<=0)throw new Mt(it.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class gf{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Mt(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Mt(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gp(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Mt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Mt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Mt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mt(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Mt(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Za;switch(t.type){case"firstParty":return new ha(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Mt(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zp.get(e);t&&(St("ComponentProvider","Removing Datastore"),Zp.delete(e),t.terminate())}(this),Promise.resolve()}}function Wd(i,e,t,s={}){var a;const c=(i=br(i,qd))._getSettings(),p=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==p&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:p,ssl:!1})),s.mockUserToken){let D,L;if("string"==typeof s.mockUserToken)D=s.mockUserToken,L=yn.MOCK_USER;else{D=(0,de.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const H=s.mockUserToken.sub||s.mockUserToken.user_id;if(!H)throw new Mt(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");L=new yn(H)}i._authCredentials=new xu(new Ga(D,L))}}class Ci{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ci(this.firestore,e,this._key)}}class Ms{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class Tu extends Ms{constructor(e,t,s){super(e,t,ju(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ci(this.firestore,null,new qt(e))}withConverter(e){return new Tu(this.firestore,e,this._path)}}function qp(i,e,...t){if(i=(0,de.m9)(i),hf("collection","path",e),i instanceof qd){const s=bn.fromString(e,...t);return zp(s),new Tu(i,null,s)}{if(!(i instanceof Ci||i instanceof Tu))throw new Mt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(bn.fromString(e,...t));return zp(s),new Tu(i.firestore,null,s)}}function Wp(i,e){if(i=br(i,qd),hf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Mt(it.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ms(i,null,(t=e,new Ja(bn.emptyPath(),t)));var t}function Kp(i,e,...t){if(i=(0,de.m9)(i),1===arguments.length&&(e=ai.A()),hf("doc","path",e),i instanceof qd){const s=bn.fromString(e,...t);return Cm(s),new Ci(i,null,new qt(s))}{if(!(i instanceof Ci||i instanceof Tu))throw new Mt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(bn.fromString(e,...t));return Cm(s),new Ci(i.firestore,i instanceof Tu?i.converter:null,new qt(s))}}function Em(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),(i instanceof Ci||i instanceof Tu)&&(e instanceof Ci||e instanceof Tu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Kd(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),i instanceof Ms&&e instanceof Ms&&i.firestore===e.firestore&&Be(i._query,e._query)&&i.converter===e.converter}class Im{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new qg(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&St("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new oi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,d.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Si(t))throw t;St("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,mr("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Wh.createAndSchedule(this,e,t,s,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&Yt()}verifyOperationInProgress(){}sa(){var e=this;return(0,d.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class Yp{constructor(){this._progressObserver={},this._taskCompletionResolver=new oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const bm=-1;class Ei extends qd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Im,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Jp(this),this._firestoreClient.terminate()}}function Qi(i){return i._firestoreClient||Jp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Jp(i){var e,t,s;const a=i._freezeSettings(),c=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ul(i._databaseId,D,i._persistenceKey,(H=a).host,H.ssl,H.experimentalForceLongPolling,H.experimentalAutoDetectLongPolling,Gp(H.experimentalLongPollingOptions),H.useFetchStreams));var D,H;i._firestoreClient=new Zd(i._authCredentials,i._appCheckCredentials,i._queue,c),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Uv(i,e){Xp(i=br(i,Ei));const t=Qi(i);if(t._uninitializedComponentsProvider)throw new Mt(it.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),a=new Zc;return Dm(t,a,new Bp(a,s.cacheSizeBytes,e?.forceOwnership))}function Bv(i){Xp(i=br(i,Ei));const e=Qi(i);if(e._uninitializedComponentsProvider)throw new Mt(it.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new Zc;return Dm(e,s,new fm(s,t.cacheSizeBytes))}function Dm(i,e,t){const s=new oi;return i.asyncQueue.enqueue((0,d.Z)(function*(){try{yield df(i,t),yield zd(i,e),s.resolve()}catch(a){const c=a;if(!nu(c))throw c;xr("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Tm(i){if(i._initialized&&!i._terminated)throw new Mt(it.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new oi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,d.Z)(function*(){try{yield(t=(0,d.Z)(function*(s){if(!uo.D())return Promise.resolve();const a=s+"main";yield uo.delete(a)}),function(s){return t.apply(this,arguments)})(Md(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Qp(i){return function(e){const t=new oi;return e.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function Mv(i,e){return Op.apply(this,arguments)}(yield Tl(e),t)})),t.promise}(Qi(i=br(i,Ei)))}function Am(i){return function Wc(i){return i.asyncQueue.enqueue((0,d.Z)(function*(){const e=yield Aa(i),t=yield gc(i);return e.setNetworkEnabled(!0),function(s){const a=zt(s);return a.vu.delete(0),kd(a)}(t)}))}(Qi(i=br(i,Ei)))}function Sm(i){return function Kc(i){return i.asyncQueue.enqueue((0,d.Z)(function*(){const e=yield Aa(i),t=yield gc(i);return e.setNetworkEnabled(!1),(s=(0,d.Z)(function*(a){const c=zt(a);c.vu.add(0),yield uc(c),c.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Qi(i=br(i,Ei)))}function Mm(i,e){const t=Qi(i=br(i,Ei)),s=new Yp;return function ym(i,e,t,s){const a=function(c,p){let D;return D="string"==typeof c?ky().encode(c):c,L=function(L,H){if(L instanceof Uint8Array)return pm(L,H);if(L instanceof ArrayBuffer)return pm(new Uint8Array(L),H);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new cf(L,p);var L}(t,jc(e));i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){!function kv(i,e,t){const s=zt(i);var a;(a=(0,d.Z)(function*(c,p,D){try{const L=yield p.getMetadata();if(yield function(tt,yt){const Bt=zt(tt),nn=Ji(yt.createTime);return Bt.persistence.runTransaction("hasNewerBundle","readonly",ln=>Bt.qs.getBundleMetadata(ln,yt.id)).then(ln=>!!ln&&ln.createTime.compareTo(nn)>=0)}(c.localStore,L))return yield p.close(),D._completeWith({taskState:"Success",documentsLoaded:(tt=L).totalDocuments,bytesLoaded:tt.totalBytes,totalDocuments:tt.totalDocuments,totalBytes:tt.totalBytes}),Promise.resolve(new Set);D._updateProgress(am(L));const H=new n0(L,c.localStore,p.serializer);let te=yield p.bc();for(;te;){const tt=yield H.zu(te);tt&&D._updateProgress(tt),te=yield p.bc()}const De=yield H.complete();return yield bu(c,De.Ju,void 0),yield function(tt,yt){const Bt=zt(tt);return Bt.persistence.runTransaction("Save bundle","readwrite",nn=>Bt.qs.saveBundleMetadata(nn,yt))}(c.localStore,L),D._completeWith(De.progress),Promise.resolve(De.Hu)}catch(L){return xr("SyncEngine",`Loading bundle failed with ${L}`),D._failWith(L),Promise.resolve(new Set)}var tt}),function(c,p,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Tl(i),a,s)}))}(t,i._databaseId,e,s),s}function xm(i,e){return function vm(i,e){return i.asyncQueue.enqueue((0,d.Z)(function*(){return function(t,s){const a=zt(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,s))}(yield qc(i),e)}))}(Qi(i=br(i,Ei)),e).then(t=>t?new Ms(i,null,t.query):null)}function Xp(i){if(i._initialized||i._terminated)throw new Mt(it.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(_i.fromBase64String(e))}catch(t){throw new Mt(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Mt(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ml{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mt(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mt(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return an(this._lat,e._lat)||an(this._long,e._long)}}const xs=/^__.*__$/;class Rm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class Om{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class Yd{constructor(e,t,s,a,c,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Nm(this.ca)&&xs.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $v{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}ya(e,t,s,a=!1){return new Yd({ca:e,methodName:t,ga:s,path:nr.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(i){const e=i._freezeSettings(),t=jc(i._databaseId);return new $v(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Jd(i,e,t,s,a,c={}){const p=i.ya(c.merge||c.mergeFields?2:0,e,t,a);$a("Data must be an object, but it was:",p,s);const D=Um(s,p);let L,H;if(c.merge)L=new rs(p.fieldMask),H=p.fieldTransforms;else if(c.mergeFields){const te=[];for(const De of c.mergeFields){const tt=Ho(e,De,t);if(!p.contains(tt))throw new Mt(it.INVALID_ARGUMENT,`Field '${tt}' is specified in your field mask but missing from your input data.`);Bm(te,tt)||te.push(tt)}L=new rs(te),H=p.fieldTransforms.filter(De=>L.covers(De.field))}else L=null,H=p.fieldTransforms;return new Rm(new is(D),L,H)}class Au extends Ml{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Au}}function km(i,e,t){return new Yd({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends Ml{_toFieldTransform(e){return new xc(e.path,new Hu)}isEqual(e){return e instanceof eg}}class Fm extends Ml{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Mo(c,t)),a=new _u(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Hv extends Ml{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Mo(c,t)),a=new Gu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Lm extends Ml{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fl(e.serializer,Of(e.serializer,this.Ia));return new xc(e.path,t)}isEqual(e){return this===e}}function Vm(i,e,t,s){const a=i.ya(1,e,t);$a("Data must be an object, but it was:",a,s);const c=[],p=is.empty();Ka(s,(L,H)=>{const te=Qd(e,L,t);H=(0,de.m9)(H);const De=a.da(te);if(H instanceof Au)c.push(te);else{const tt=Mo(H,De);null!=tt&&(c.push(te),p.set(te,tt))}});const D=new rs(c);return new Om(p,D,a.fieldTransforms)}function vf(i,e,t,s,a,c){const p=i.ya(1,e,t),D=[Ho(e,s,t)],L=[a];if(c.length%2!=0)throw new Mt(it.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let tt=0;tt<c.length;tt+=2)D.push(Ho(e,c[tt])),L.push(c[tt+1]);const H=[],te=is.empty();for(let tt=D.length-1;tt>=0;--tt)if(!Bm(H,D[tt])){const yt=D[tt];let Bt=L[tt];Bt=(0,de.m9)(Bt);const nn=p.da(yt);if(Bt instanceof Au)H.push(yt);else{const ln=Mo(Bt,nn);null!=ln&&(H.push(yt),te.set(yt,ln))}}const De=new rs(H);return new Om(te,De,p.fieldTransforms)}function _f(i,e,t,s=!1){return Mo(t,i.ya(s?4:3,e))}function Mo(i,e){if(tg(i=(0,de.m9)(i)))return $a("Unsupported field value:",e,i),Um(i,e);if(i instanceof Ml)return function(t,s){if(!Nm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const p of t){let D=Mo(p,s.wa(c));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),c++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,de.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Of(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Pr.fromDate(t);return{timestampValue:gl(s.serializer,a)}}if(t instanceof Pr){const a=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gl(s.serializer,a)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:Vy(s.serializer,t._byteString)};if(t instanceof Ci){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ff(t)}`)}(i,e)}function Um(i,e){const t={};return Ll(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(i,(s,a)=>{const c=Mo(a,e.ha(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pr||i instanceof yf||i instanceof vc||i instanceof Ci||i instanceof Ml)}function $a(i,e,t){if(!tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ff(t);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function Ho(i,e,t){if((e=(0,de.m9)(e))instanceof Sl)return e._internalPath;if("string"==typeof e)return Qd(i,e);throw Xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const iu=new RegExp("[~\\*/\\[\\]]");function Qd(i,e,t){if(e.search(iu)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xd(i,e,t,s,a){const c=s&&!s.isEmpty(),p=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let L="";return(c||p)&&(L+=" (found",c&&(L+=` in field ${s}`),p&&(L+=` in document ${a}`),L+=")"),new Mt(it.INVALID_ARGUMENT,D+i+L)}function Bm(i,e){return i.some(t=>t.isEqual(e))}class eh{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ci(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends eh{data(){return super.data()}}function wf(i,e){return"string"==typeof e?Qd(i,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function Cf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Mt(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _c{}class th extends _c{}function jm(i,e,...t){let s=[];e instanceof _c&&s.push(e),s=s.concat(t),function(a){const c=a.filter(D=>D instanceof wc).length,p=a.filter(D=>D instanceof nh).length;if(c>1||c>0&&p>0)throw new Mt(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class nh extends th{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Ms(e.firestore,e.converter,Z(e._query,t))}_parse(e){const t=xl(e.firestore);return function(a,c,p,D,L,H,te){let De;if(L.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new Mt(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Km(te,H);const tt=[];for(const yt of te)tt.push(Wm(D,a,yt));De={arrayValue:{values:tt}}}else De=Wm(D,a,te)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Km(te,H),De=_f(p,"where",te,"in"===H||"not-in"===H);return be.create(L,H,De)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $m(i,e,t){const s=e,a=wf("where",i);return nh._create(a,s,t)}class wc extends _c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:ke.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let c=s;const p=a.getFlattenedFilters();for(const D of p)Ym(c,D),c=Z(c,D)}(e._query,t),new Ms(e.firestore,e.converter,Z(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ef extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ef(e,t)}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new Mt(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Mt(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new x(a,c);return function(D,L){if(null===Ac(D)){const H=w(D);null!==H&&Jm(0,H,L.field)}}(s,p),p}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Ja(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Hm(i,e="asc"){const t=e,s=wf("orderBy",i);return Ef._create(s,t)}class Qc extends th{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Qc(e,t,s)}_apply(e){return new Ms(e.firestore,e.converter,re(e._query,this._limit,this._limitType))}}function If(i){return pf("limit",i),Qc._create("limit",i,"F")}function rg(i){return pf("limitToLast",i),Qc._create("limitToLast",i,"L")}class rh extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Ms(e.firestore,e.converter,(a=t,new Ja((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Gm(...i){return rh._create("startAt",i,!0)}function Zm(...i){return rh._create("startAfter",i,!1)}class ih extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Ms(e.firestore,e.converter,(a=t,new Ja((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function zm(...i){return ih._create("endBefore",i,!1)}function qm(...i){return ih._create("endAt",i,!0)}function ig(i,e,t,s){if(t[0]=(0,de.m9)(t[0]),t[0]instanceof eh)return function(a,c,p,D,L){if(!D)throw new Mt(it.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const H=[];for(const te of g(a))if(te.field.isKeyField())H.push(Fa(c,D.key));else{const De=D.data.field(te.field);if(Fu(De))throw new Mt(it.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+te.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===De){const tt=te.field.canonicalString();throw new Mt(it.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${tt}' (used as the orderBy) does not exist.`)}H.push(De)}return new ss(H,L)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const a=xl(i.firestore);return function(c,p,D,L,H,te){const De=c.explicitOrderBy;if(H.length>De.length)throw new Mt(it.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const tt=[];for(let yt=0;yt<H.length;yt++){const Bt=H[yt];if(De[yt].field.isKeyField()){if("string"!=typeof Bt)throw new Mt(it.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof Bt}`);if(!h(c)&&-1!==Bt.indexOf("/"))throw new Mt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${Bt}' contains a slash.`);const nn=c.path.child(bn.fromString(Bt));if(!qt.isDocumentKey(nn))throw new Mt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${nn}' is not because it contains an odd number of segments.`);const ln=new qt(nn);tt.push(Fa(p,ln))}else{const nn=_f(D,L,Bt);tt.push(nn)}}return new ss(tt,te)}(i._query,i.firestore._databaseId,a,e,t,s)}}function Wm(i,e,t){if("string"==typeof(t=(0,de.m9)(t))){if(""===t)throw new Mt(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new Mt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(bn.fromString(t));if(!qt.isDocumentKey(s))throw new Mt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fa(i,new qt(s))}if(t instanceof Ci)return Fa(i,t._key);throw new Mt(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function Km(i,e){if(!Array.isArray(i)||0===i.length)throw new Mt(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ym(i,e){if(e.isInequality()){const s=w(i),a=e.field;if(null!==s&&!s.isEqual(a))throw new Mt(it.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const c=Ac(i);null!==c&&Jm(0,a,c)}const t=function(s,a){for(const c of s)for(const p of c.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Mt(it.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Jm(i,e,t){if(!t.isEqual(e))throw new Mt(it.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sg{convertValue(e,t="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ka(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new yf(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Lu(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=Do(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=bn.fromString(e);on(Gf(s));const a=new ta(s.get(1),s.get(3)),c=new qt(s.popFirst(5));return a.isEqual(t)||mr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function bf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class Zv extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,t)}}class Cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ec extends eh{constructor(e,t,s,a,c,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(wf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class sh extends Ec{data(e={}){return super.data(e)}}class Ic{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Cc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new Cc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Mt(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new sh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Cc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const D=new sh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Cc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let L=-1,H=-1;return 0!==p.type&&(L=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),H=c.indexOf(p.doc.key)),{type:qv(p.type),doc:D,oldIndex:L,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}function Xm(i,e){return i instanceof Ec&&e instanceof Ec?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ic&&e instanceof Ic&&i._firestore===e._firestore&&Kd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ey(i){i=br(i,Ci);const e=br(i.firestore,Ei);return yc(Qi(e),i._key).then(t=>ly(e,i,t))}class Xu extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,t)}}function ty(i){i=br(i,Ci);const e=br(i.firestore,Ei),t=Qi(e),s=new Xu(e);return function Yc(i,e){const t=new oi;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return(s=(0,d.Z)(function*(a,c,p){try{const D=yield function(L,H){const te=zt(L);return te.persistence.runTransaction("read document","readonly",De=>te.localDocuments.getDocument(De,H))}(a,c);D.isFoundDocument()?p.resolve(D):D.isNoDocument()?p.resolve(null):p.reject(new Mt(it.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const L=cc(D,`Failed to get document '${c} from cache`);p.reject(L)}}),function(a,c,p){return s.apply(this,arguments)})(yield qc(i),e,t);var s})),t.promise}(t,i._key).then(a=>new Ec(e,s,i._key,a,new Cc(null!==a&&a.hasLocalMutations,!0),i.converter))}function ny(i){i=br(i,Ci);const e=br(i.firestore,Ei);return yc(Qi(e),i._key,{source:"server"}).then(t=>ly(e,i,t))}function ry(i){i=br(i,Ms);const e=br(i.firestore,Ei),t=Qi(e),s=new Xu(e);return Cf(i._query),Hp(t,i._query).then(a=>new Ic(e,s,i,a))}function iy(i){i=br(i,Ms);const e=br(i.firestore,Ei),t=Qi(e),s=new Xu(e);return function gm(i,e){const t=new oi;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return(s=(0,d.Z)(function*(a,c,p){try{const D=yield Pd(a,c,!0),L=new um(c,D.ir),H=L.sc(D.documents),te=L.applyChanges(H,!1);p.resolve(te.snapshot)}catch(D){const L=cc(D,`Failed to execute query '${c} against cache`);p.reject(L)}}),function(a,c,p){return s.apply(this,arguments)})(yield qc(i),e,t);var s})),t.promise}(t,i._query).then(a=>new Ic(e,s,i,a))}function sy(i){i=br(i,Ms);const e=br(i.firestore,Ei),t=Qi(e),s=new Xu(e);return Hp(t,i._query,{source:"server"}).then(a=>new Ic(e,s,i,a))}function oy(i,e,t){i=br(i,Ci);const s=br(i.firestore,Ei),a=bf(i.converter,e,t);return su(s,[Jd(xl(s),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,wi.none())])}function ay(i,e,t,...s){i=br(i,Ci);const a=br(i.firestore,Ei),c=xl(a);let p;return p="string"==typeof(e=(0,de.m9)(e))||e instanceof Sl?vf(c,"updateDoc",i._key,e,t,s):Vm(c,"updateDoc",i._key,e),su(a,[p.toMutation(i._key,wi.exists(!0))])}function uy(i){return su(br(i.firestore,Ei),[new pl(i._key,wi.none())])}function bc(i,e){const t=br(i.firestore,Ei),s=Kp(i),a=bf(i.converter,e);return su(t,[Jd(xl(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,wi.exists(!1))]).then(()=>s)}function Wv(i,...e){var t,s,a;i=(0,de.m9)(i);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||mf(e[p])||(c=e[p],p++);const D={includeMetadataChanges:c.includeMetadataChanges};if(mf(e[p])){const De=e[p];e[p]=null===(t=De.next)||void 0===t?void 0:t.bind(De),e[p+1]=null===(s=De.error)||void 0===s?void 0:s.bind(De),e[p+2]=null===(a=De.complete)||void 0===a?void 0:a.bind(De)}let L,H,te;if(i instanceof Ci)H=br(i.firestore,Ei),te=ju(i._key.path),L={next:De=>{e[p]&&e[p](ly(H,i,De))},error:e[p+1],complete:e[p+2]};else{const De=br(i,Ms);H=br(De.firestore,Ei),te=De._query;const tt=new Xu(H);L={next:yt=>{e[p]&&e[p](new Ic(H,tt,De,yt))},error:e[p+1],complete:e[p+2]},Cf(i._query)}return function(De,tt,yt,Bt){const nn=new lf(Bt),ln=new $o(tt,nn,yt);return De.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return nm(yield ru(De),ln)})),()=>{nn.Dc(),De.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return Yh(yield ru(De),ln)}))}}(Qi(H),te,D,L)}function Kv(i,e){return function mm(i,e){const t=new lf(e);return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return s=yield ru(i),a=t,zt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return s=yield ru(i),a=t,void zt(s).ku.delete(a);var s,a}))}}(Qi(i=br(i,Ei)),mf(e)?e:{next:e})}function su(i,e){return function(t,s){const a=new oi;return t.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function Tv(i,e,t){return ja.apply(this,arguments)}(yield Tl(t),s,a)})),a.promise}(Qi(i),e)}function ly(i,e,t){const s=t.docs.get(e._key),a=new Xu(i);return new Ec(i,a,e._key,s,new Cc(t.hasPendingWrites,t.fromCache),e.converter)}const _0={maxAttempts:5};class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,t,s){this._verifyNotCommitted();const a=el(e,this._firestore),c=bf(a.converter,t,s),p=Jd(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,wi.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=el(e,this._firestore);let p;return p="string"==typeof(t=(0,de.m9)(t))||t instanceof Sl?vf(this._dataReader,"WriteBatch.update",c._key,t,s,a):Vm(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=el(e,this._firestore);return this._mutations=this._mutations.concat(new pl(t._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function el(i,e){if((i=(0,de.m9)(i)).firestore!==e)throw new Mt(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Jv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xl(e)}get(e){const t=el(e,this._firestore),s=new Zv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Yt();const c=a[0];if(c.isFoundDocument())return new eh(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new eh(this._firestore,s,t._key,null,t.converter);throw Yt()})}set(e,t,s){const a=el(e,this._firestore),c=bf(a.converter,t,s),p=Jd(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const c=el(e,this._firestore);let p;return p="string"==typeof(t=(0,de.m9)(t))||t instanceof Sl?vf(this._dataReader,"Transaction.update",c._key,t,s,a):Vm(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=el(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=el(e,this._firestore),s=new Xu(this._firestore);return super.get(e).then(a=>new Ec(this._firestore,s,t._key,a._document,new Cc(!1,!1),t.converter))}}function fy(i,e,t){i=br(i,Ei);const s=Object.assign(Object.assign({},_0),t);return function(a){if(a.maxAttempts<1)throw new Mt(it.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,c,p){const D=new oi;return a.asyncQueue.enqueueAndForget((0,d.Z)(function*(){const L=yield function mc(i){return Du(i).then(e=>e.datastore)}(a);new a0(a.asyncQueue,L,p,c,D).run()})),D.promise}(Qi(i),a=>e(new Jv(i,a)),s)}function py(){return new Au("deleteField")}function gy(){return new eg("serverTimestamp")}function my(...i){return new Fm("arrayUnion",i)}function Qv(...i){return new Hv("arrayRemove",i)}function Xv(i){return new Lm("increment",i)}!function(i,e=!0){Mr=U.SDK_VERSION,(0,U._registerComponent)(new j.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new Ei(new nl(t.getProvider("auth-internal")),new Ol(t.getProvider("app-check-internal")),function(D,L){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Mt(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(D.options.projectId,L)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,U.registerVersion)(vr,"3.13.0",i),(0,U.registerVersion)(vr,"3.13.0","esm2017")}()},2090:(Lt,ze,N)=>{N.d(ze,{$s:()=>J,BH:()=>st,G6:()=>Ye,L:()=>le,LL:()=>se,Pz:()=>ut,Sg:()=>It,UG:()=>_t,US:()=>b,ZB:()=>Te,ZR:()=>z,aH:()=>Ce,b$:()=>Ze,eu:()=>Me,hl:()=>Je,jU:()=>xe,m9:()=>xt,ne:()=>cn,pd:()=>fr,r3:()=>En,ru:()=>Ae,tV:()=>ne,uI:()=>we,vZ:()=>Mn,w1:()=>Ut,xO:()=>jr,xb:()=>ir,z$:()=>vt,zI:()=>Ee,zd:()=>$r});const m=function(ge){const ye=[];let ee=0;for(let Q=0;Q<ge.length;Q++){let q=ge.charCodeAt(Q);q<128?ye[ee++]=q:q<2048?(ye[ee++]=q>>6|192,ye[ee++]=63&q|128):55296==(64512&q)&&Q+1<ge.length&&56320==(64512&ge.charCodeAt(Q+1))?(q=65536+((1023&q)<<10)+(1023&ge.charCodeAt(++Q)),ye[ee++]=q>>18|240,ye[ee++]=q>>12&63|128,ye[ee++]=q>>6&63|128,ye[ee++]=63&q|128):(ye[ee++]=q>>12|224,ye[ee++]=q>>6&63|128,ye[ee++]=63&q|128)}return ye},b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,ye){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=ye?this.byteToCharMapWebSafe_:this.byteToCharMap_,Q=[];for(let q=0;q<ge.length;q+=3){const Re=ge[q],gt=q+1<ge.length,kt=gt?ge[q+1]:0,Qt=q+2<ge.length,he=Qt?ge[q+2]:0;let Ue=(15&kt)<<2|he>>6,nt=63&he;Qt||(nt=64,gt||(Ue=64)),Q.push(ee[Re>>2],ee[(3&Re)<<4|kt>>4],ee[Ue],ee[nt])}return Q.join("")},encodeString(ge,ye){return this.HAS_NATIVE_SUPPORT&&!ye?btoa(ge):this.encodeByteArray(m(ge),ye)},decodeString(ge,ye){return this.HAS_NATIVE_SUPPORT&&!ye?atob(ge):function(ge){const ye=[];let ee=0,Q=0;for(;ee<ge.length;){const q=ge[ee++];if(q<128)ye[Q++]=String.fromCharCode(q);else if(q>191&&q<224){const Re=ge[ee++];ye[Q++]=String.fromCharCode((31&q)<<6|63&Re)}else if(q>239&&q<365){const Qt=((7&q)<<18|(63&ge[ee++])<<12|(63&ge[ee++])<<6|63&ge[ee++])-65536;ye[Q++]=String.fromCharCode(55296+(Qt>>10)),ye[Q++]=String.fromCharCode(56320+(1023&Qt))}else{const Re=ge[ee++],gt=ge[ee++];ye[Q++]=String.fromCharCode((15&q)<<12|(63&Re)<<6|63&gt)}}return ye.join("")}(this.decodeStringToByteArray(ge,ye))},decodeStringToByteArray(ge,ye){this.init_();const ee=ye?this.charToByteMapWebSafe_:this.charToByteMap_,Q=[];for(let q=0;q<ge.length;){const Re=ee[ge.charAt(q++)],kt=q<ge.length?ee[ge.charAt(q)]:0;++q;const he=q<ge.length?ee[ge.charAt(q)]:64;++q;const oe=q<ge.length?ee[ge.charAt(q)]:64;if(++q,null==Re||null==kt||null==he||null==oe)throw new ae;Q.push(Re<<2|kt>>4),64!==he&&(Q.push(kt<<4&240|he>>2),64!==oe&&Q.push(he<<6&192|oe))}return Q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const le=function(ge){return function(ge){const ye=m(ge);return b.encodeByteArray(ye,!0)}(ge).replace(/\./g,"")},ne=function(ge){try{return b.decodeString(ge,!0)}catch(ye){console.error("base64Decode failed: ",ye)}return null};function Te(ge,ye){if(!(ye instanceof Object))return ye;switch(ye.constructor){case Date:return new Date(ye.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return ye}for(const ee in ye)!ye.hasOwnProperty(ee)||!at(ee)||(ge[ee]=Te(ge[ee],ye[ee]));return ge}function at(ge){return"__proto__"!==ge}const $e=()=>{try{return function qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ye=ge&&ne(ge[1]);return ye&&JSON.parse(ye)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},Ce=()=>{var ge;return null===(ge=$e())||void 0===ge?void 0:ge.config},ut=ge=>{var ye;return null===(ye=$e())||void 0===ye?void 0:ye[`_${ge}`]};class st{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ye,ee)=>{this.resolve=ye,this.reject=ee})}wrapCallback(ye){return(ee,Q)=>{ee?this.reject(ee):this.resolve(Q),"function"==typeof ye&&(this.promise.catch(()=>{}),1===ye.length?ye(ee):ye(ee,Q))}}}function It(ge,ye){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Q=ye||"demo-project",q=ge.iat||0,Re=ge.sub||ge.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${Q}`,aud:Q,iat:q,exp:q+3600,auth_time:q,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(gt)),""].join(".")}function vt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function _t(){var ge;const ye=null===(ge=$e())||void 0===ge?void 0:ge.forceEnvironment;if("node"===ye)return!0;if("browser"===ye)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xe(){return"object"==typeof self&&self.self===self}function Ae(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ut(){const ge=vt();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Ye(){return!_t()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Je(){try{return"object"==typeof indexedDB}catch{return!1}}function Me(){return new Promise((ge,ye)=>{try{let ee=!0;const Q="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Q);q.onsuccess=()=>{q.result.close(),ee||self.indexedDB.deleteDatabase(Q),ge(!0)},q.onupgradeneeded=()=>{ee=!1},q.onerror=()=>{var Re;ye((null===(Re=q.error)||void 0===Re?void 0:Re.message)||"")}}catch(ee){ye(ee)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class z extends Error{constructor(ye,ee,Q){super(ee),this.code=ye,this.customData=Q,this.name="FirebaseError",Object.setPrototypeOf(this,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(ye,ee,Q){this.service=ye,this.serviceName=ee,this.errors=Q}create(ye,...ee){const Q=ee[0]||{},q=`${this.service}/${ye}`,Re=this.errors[ye],gt=Re?function pe(ge,ye){return ge.replace(We,(ee,Q)=>{const q=ye[Q];return null!=q?String(q):`<${Q}?>`})}(Re,Q):"Error";return new z(q,`${this.serviceName}: ${gt} (${q}).`,Q)}}const We=/\{\$([^}]+)}/g;function En(ge,ye){return Object.prototype.hasOwnProperty.call(ge,ye)}function ir(ge){for(const ye in ge)if(Object.prototype.hasOwnProperty.call(ge,ye))return!1;return!0}function Mn(ge,ye){if(ge===ye)return!0;const ee=Object.keys(ge),Q=Object.keys(ye);for(const q of ee){if(!Q.includes(q))return!1;const Re=ge[q],gt=ye[q];if(pn(Re)&&pn(gt)){if(!Mn(Re,gt))return!1}else if(Re!==gt)return!1}for(const q of Q)if(!ee.includes(q))return!1;return!0}function pn(ge){return null!==ge&&"object"==typeof ge}function jr(ge){const ye=[];for(const[ee,Q]of Object.entries(ge))Array.isArray(Q)?Q.forEach(q=>{ye.push(encodeURIComponent(ee)+"="+encodeURIComponent(q))}):ye.push(encodeURIComponent(ee)+"="+encodeURIComponent(Q));return ye.length?"&"+ye.join("&"):""}function $r(ge){const ye={};return ge.replace(/^\?/,"").split("&").forEach(Q=>{if(Q){const[q,Re]=Q.split("=");ye[decodeURIComponent(q)]=decodeURIComponent(Re)}}),ye}function fr(ge){const ye=ge.indexOf("?");if(!ye)return"";const ee=ge.indexOf("#",ye);return ge.substring(ye,ee>0?ee:void 0)}function cn(ge,ye){const ee=new Wt(ge,ye);return ee.subscribe.bind(ee)}class Wt{constructor(ye,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{ye(this)}).catch(Q=>{this.error(Q)})}next(ye){this.forEachObserver(ee=>{ee.next(ye)})}error(ye){this.forEachObserver(ee=>{ee.error(ye)}),this.close(ye)}complete(){this.forEachObserver(ye=>{ye.complete()}),this.close()}subscribe(ye,ee,Q){let q;if(void 0===ye&&void 0===ee&&void 0===Q)throw new Error("Missing Observer.");q=function Nn(ge,ye){if("object"!=typeof ge||null===ge)return!1;for(const ee of ye)if(ee in ge&&"function"==typeof ge[ee])return!0;return!1}(ye,["next","error","complete"])?ye:{next:ye,error:ee,complete:Q},void 0===q.next&&(q.next=pr),void 0===q.error&&(q.error=pr),void 0===q.complete&&(q.complete=pr);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Re}unsubscribeOne(ye){void 0===this.observers||void 0===this.observers[ye]||(delete this.observers[ye],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ye){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,ye)}sendOne(ye,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ye])try{ee(this.observers[ye])}catch(Q){typeof console<"u"&&console.error&&console.error(Q)}})}close(ye){this.finalized||(this.finalized=!0,void 0!==ye&&(this.finalError=ye),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}function J(ge,ye=1e3,ee=2){const Q=ye*Math.pow(ee,ge),q=Math.round(.5*Q*(Math.random()-.5)*2);return Math.min(144e5,Q+q)}function xt(ge){return ge&&ge._delegate?ge._delegate:ge}},9783:(Lt,ze,N)=>{N.r(ze),N.d(ze,{ClientModule:()=>vt});var d=N(6895),U=N(9051),j=N(4004),m=N(4650),de=N(2425),b=N(433);function ae(we,_t){if(1&we){const xe=m.EpF();m.TgZ(0,"div",2)(1,"h4"),m._uU(2,"Cliente"),m.qZA(),m.TgZ(3,"form")(4,"div",3)(5,"input",4),m.NdJ("ngModelChange",function(Ze){m.CHM(xe);const Le=m.oxw();return m.KtG(Le.currentClient.name=Ze)}),m.qZA(),m.TgZ(6,"label",5),m._uU(7,"Nombre"),m.qZA()(),m.TgZ(8,"div",3)(9,"input",6),m.NdJ("ngModelChange",function(Ze){m.CHM(xe);const Le=m.oxw();return m.KtG(Le.currentClient.code=Ze)}),m.qZA(),m.TgZ(10,"label",7),m._uU(11,"Numero de Cliente"),m.qZA()(),m.TgZ(12,"div",3)(13,"input",8),m.NdJ("ngModelChange",function(Ze){m.CHM(xe);const Le=m.oxw();return m.KtG(Le.currentClient.phone=Ze)}),m.qZA(),m.TgZ(14,"label",9),m._uU(15,"Numero de Telefono"),m.qZA()(),m.TgZ(16,"div",10)(17,"input",11),m.NdJ("ngModelChange",function(Ze){m.CHM(xe);const Le=m.oxw();return m.KtG(Le.currentClient.address=Ze)}),m.qZA(),m.TgZ(18,"label",12),m._uU(19,"Direccion"),m.qZA()()(),m.TgZ(20,"button",13),m.NdJ("click",function(){m.CHM(xe);const Ze=m.oxw();return m.KtG(Ze.deleteClient())}),m._uU(21," Eliminar "),m.qZA(),m.TgZ(22,"button",14),m.NdJ("click",function(){m.CHM(xe);const Ze=m.oxw();return m.KtG(Ze.updateClient())}),m._uU(23," Editar "),m.qZA(),m.TgZ(24,"button",15),m._uU(25," Editar "),m.qZA(),m.TgZ(26,"p"),m._uU(27),m.qZA()()}if(2&we){const xe=m.oxw();m.xp6(5),m.Q6J("ngModel",xe.currentClient.name),m.xp6(4),m.Q6J("ngModel",xe.currentClient.code),m.xp6(4),m.Q6J("ngModel",xe.currentClient.phone),m.xp6(4),m.Q6J("ngModel",xe.currentClient.address),m.xp6(10),m.Oqu(xe.message)}}function A(we,_t){1&we&&(m.TgZ(0,"div"),m._UZ(1,"br"),m.TgZ(2,"p"),m._uU(3,"No fue posible acceder a este cliente..."),m.qZA()())}let le=(()=>{class we{constructor(xe){this.ClientService=xe,this.refreshList=new m.vpe,this.currentClient={name:"",code:"",phone:0,address:""},this.message=""}ngOnInit(){this.message=""}ngOnChanges(){this.message="",this.currentClient={...this.client}}updateClient(){this.currentClient.id&&this.ClientService.update(this.currentClient.id,{name:this.currentClient.name,code:this.currentClient.code,phone:this.currentClient.phone,address:this.currentClient.address}).then(()=>this.message="The Client was updated successfully!").catch(Ae=>console.log(Ae))}deleteClient(){this.currentClient.id&&this.ClientService.delete(this.currentClient.id).then(()=>{this.refreshList.emit(),this.message="The Client was updated successfully!"}).catch(xe=>console.log(xe))}}return we.\u0275fac=function(xe){return new(xe||we)(m.Y36(de.y))},we.\u0275cmp=m.Xpm({type:we,selectors:[["app-client-details"]],inputs:{client:"client"},outputs:{refreshList:"refreshList"},features:[m.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-floating","mb-2"],["type","text","id","name","required","","name","name","placeholder","Nombre","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],["type","text","id","code","required","","name","code","placeholder","Codigo","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","code"],["id","phone","required","","placeholder","description","name","phone","type","tel",1,"form-control",3,"ngModel","ngModelChange"],["for","phone"],[1,"form-floating","mb-3"],["id","address","required","","placeholder","description","name","address","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],[1,"btn","btn-danger","rounded-pill","mx-2",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill",3,"click"],[1,"btn","btn-success","rounded-pill"]],template:function(xe,Ae){1&xe&&(m.YNc(0,ae,28,5,"div",0),m.YNc(1,A,4,0,"div",1)),2&xe&&(m.Q6J("ngIf",Ae.currentClient),m.xp6(1),m.Q6J("ngIf",!Ae.currentClient))},dependencies:[d.O5,b._Y,b.Fj,b.wV,b.JJ,b.JL,b.Q7,b.On,b.F]}),we})();function ne(we,_t){if(1&we){const xe=m.EpF();m.TgZ(0,"li",20),m.NdJ("click",function(){const Ze=m.CHM(xe),Le=Ze.$implicit,Ut=Ze.index,Ve=m.oxw();return m.KtG(Ve.setActiveClient(Le,Ut))}),m._uU(1),m.qZA()}if(2&we){const xe=_t.$implicit,Ae=_t.index,Ze=m.oxw();m.ekj("active",Ae==Ze.currentIndex),m.xp6(1),m.AsE(" ",xe.name," - ",xe.code," ")}}function ue(we,_t){if(1&we){const xe=m.EpF();m.TgZ(0,"div")(1,"app-client-details",21),m.NdJ("refreshList",function(){m.CHM(xe);const Ze=m.oxw();return m.KtG(Ze.refreshList())}),m.qZA()()}if(2&we){const xe=m.oxw();m.xp6(1),m.Q6J("client",xe.currentClient)}}function Te(we,_t){1&we&&(m.TgZ(0,"div"),m._UZ(1,"br"),m.TgZ(2,"p"),m._uU(3,"Seleccione un cliente..."),m.qZA()())}let at=(()=>{class we{constructor(xe){this.ClientService=xe,this.Clients=[],this.currentIndex=-1,this.title="",this.query="",this.codeFilter=!1}ngOnInit(){history.state.id?this.retrieveClientById(history.state.id):this.retrieveClientClients()}refreshList(){this.currentClient=void 0,this.currentIndex=-1,this.retrieveClientClients()}retrieveClientById(xe){this.ClientService.getById(xe).pipe((0,j.U)(Ae=>({id:Ae.id,...Ae.data()}))).subscribe(Ae=>{console.log(Ae),this.Clients?.push(Ae),this.setActiveClient(Ae,0)})}retrieveClientClients(){this.ClientService.getAll().snapshotChanges().pipe((0,j.U)(xe=>xe.map(Ae=>({id:Ae.payload.doc.id,...Ae.payload.doc.data()})))).subscribe(xe=>{this.Clients=xe})}filterClients(){this.query?(this.codeFilter?this.ClientService.filterByCode(this.query):this.ClientService.filterByName(this.query)).snapshotChanges().pipe((0,j.U)(Ae=>Ae.map(Ze=>({id:Ze.payload.doc.id,...Ze.payload.doc.data()})))).subscribe(Ae=>{this.Clients=Ae,console.log(Ae)}):this.retrieveClientClients()}setActiveClient(xe,Ae){this.currentClient=xe,this.currentIndex=Ae}}return we.\u0275fac=function(xe){return new(xe||we)(m.Y36(de.y))},we.\u0275cmp=m.Xpm({type:we,selectors:[["app-client-list"]],decls:27,vars:5,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],[1,"ms-5","form-check"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault","name","codeFilter",1,"form-check-input",3,"ngModel","ngModelChange"],["type","search","name","query","placeholder","Buscar por Nombre o Numero de Cliente","aria-label","Search",1,"form-control","ms-2","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"position-fixed","bottom-0","end-0",2,"margin","6rem","z-index","1070"],["routerLink","add",1,"btn","btn-success","btn-lg","rounded-pill"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","4vh","height","4vh","viewBox","0 0 47 47",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141 c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27 c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435 c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"client","refreshList"]],template:function(xe,Ae){1&xe&&(m.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),m._uU(3,"Lista de clientes"),m.qZA(),m.TgZ(4,"div",3)(5,"label",4),m._uU(6," Filtro por No. Cliente "),m.qZA(),m.TgZ(7,"input",5),m.NdJ("ngModelChange",function(Le){return Ae.codeFilter=Le}),m.qZA()(),m.TgZ(8,"input",6),m.NdJ("ngModelChange",function(Le){return Ae.query=Le}),m.qZA(),m.TgZ(9,"button",7),m.NdJ("click",function(){return Ae.filterClients()}),m._uU(10,"Buscar"),m.qZA()(),m._UZ(11,"hr"),m.TgZ(12,"div",8)(13,"button",9),m.O4$(),m.TgZ(14,"svg",10),m._UZ(15,"g",11)(16,"g",12),m.TgZ(17,"g",13)(18,"g"),m._UZ(19,"path",14),m.qZA()()()()(),m.kcU(),m.TgZ(20,"div",15)(21,"div",16)(22,"ul",17),m.YNc(23,ne,2,4,"li",18),m.qZA()(),m.TgZ(24,"div",16),m.YNc(25,ue,2,1,"div",19),m.YNc(26,Te,4,0,"div",19),m.qZA()()()),2&xe&&(m.xp6(7),m.Q6J("ngModel",Ae.codeFilter),m.xp6(1),m.Q6J("ngModel",Ae.query),m.xp6(15),m.Q6J("ngForOf",Ae.Clients),m.xp6(2),m.Q6J("ngIf",Ae.currentClient),m.xp6(1),m.Q6J("ngIf",!Ae.currentClient))},dependencies:[d.sg,d.O5,U.rH,b._Y,b.Fj,b.Wl,b.JJ,b.JL,b.On,b.F,le]}),we})();class qe{}var Ke=N(4985),ot=N(6535),je=N(798),$e=N(4245);function Et(we,_t){if(1&we){const xe=m.EpF();m.TgZ(0,"div")(1,"div",4)(2,"div",5)(3,"app-form",6),m.NdJ("formModel",function(Ze){m.CHM(xe);const Le=m.oxw();return m.KtG(Le.submit(Ze))}),m.qZA()()()()}if(2&we){const xe=m.oxw();m.xp6(3),m.Q6J("formObj",xe.formObj)}}function mt(we,_t){if(1&we){const xe=m.EpF();m.TgZ(0,"div",7)(1,"h4"),m._uU(2,"El material a sido registrado Satisfactoriamente!"),m.qZA(),m.TgZ(3,"button",8),m.NdJ("click",function(){m.CHM(xe);const Ze=m.oxw();return m.KtG(Ze.newClient())}),m._uU(4,"A\xf1adir Otro"),m.qZA()()}}const ut=[{path:"",component:at},{path:"add",component:(()=>{class we{constructor(xe,Ae,Ze){this.ClientService=xe,this.auditService=Ae,this.fos=Ze,this.client=new qe,this.submitted=!1,this.formObj=[[new Ke.O("Nombre","name","text"),new Ke.O("Numero de Cliente","code","text")],[new Ke.O("Direccion","address","text")],[new Ke.O("Telefono","phone","number")]]}submit(xe){this.client=xe,this.saveClient()}saveClient(){this.fos.create(this.client).then(()=>{console.log("Created new Client successfully!"),this.auditService.create(de.y.name,"Crear Cliente","Jonny123"),this.submitted=!0})}newClient(){this.submitted=!1,this.client=new qe}}return we.\u0275fac=function(xe){return new(xe||we)(m.Y36(de.y),m.Y36(je.C),m.Y36(ot.U))},we.\u0275cmp=m.Xpm({type:we,selectors:[["app-add-client"]],features:[m._Bn([ot.U,{provide:"path",useValue:"/clients"}])],decls:6,vars:2,consts:[[1,"container","vh-100"],[1,"text-muted","mt-5"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"card","mt-4","bg-light","shadow-lg","border-0"],[1,"card-body"],["btnMes","Crear Cliente","modalMessage","\xbfDesea continuar con la creacion del cliente?",3,"formObj","formModel"],[1,"mt-3"],[1,"btn","btn-outline-success","mt-2",3,"click"]],template:function(xe,Ae){1&xe&&(m.TgZ(0,"div",0)(1,"h5",1),m._uU(2," Registro del Cliente"),m.qZA(),m._UZ(3,"hr"),m.YNc(4,Et,4,1,"div",2),m.YNc(5,mt,5,0,"div",3),m.qZA()),2&xe&&(m.xp6(4),m.Q6J("ngIf",!Ae.submitted),m.xp6(1),m.Q6J("ngIf",Ae.submitted))},dependencies:[d.O5,$e.U]}),we})()}];let st=(()=>{class we{}return we.\u0275fac=function(xe){return new(xe||we)},we.\u0275mod=m.oAB({type:we}),we.\u0275inj=m.cJS({imports:[U.Bz.forChild(ut),U.Bz]}),we})();var It=N(4466);let vt=(()=>{class we{}return we.\u0275fac=function(xe){return new(xe||we)},we.\u0275mod=m.oAB({type:we}),we.\u0275inj=m.cJS({imports:[d.ez,st,b.u5,It.m]}),we})()},4245:(Lt,ze,N)=>{N.d(ze,{U:()=>at});var d=N(4650),U=N(4985),j=N(6895),m=N(433);let de=(()=>{class qe{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.continue=new d.vpe}ngOnInit(){}modalContinue(ot){this.continue.emit(ot)}}return qe.\u0275fac=function(ot){return new(ot||qe)},qe.\u0275cmp=d.Xpm({type:qe,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage"},outputs:{continue:"continue"},decls:17,vars:2,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","rounded-pill"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","rounded-pill",3,"click"]],template:function(ot,je){1&ot&&(d.TgZ(0,"div",0)(1,"button",1),d._uU(2),d.qZA(),d.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),d._uU(8,"PRECAUCION"),d.qZA(),d.TgZ(9,"button",7),d.NdJ("click",function(){return je.modalContinue(!1)}),d.qZA()(),d.TgZ(10,"div",8),d._uU(11),d.qZA(),d.TgZ(12,"div",9)(13,"button",10),d.NdJ("click",function(){return je.modalContinue(!1)}),d._uU(14,"Abortar"),d.qZA(),d.TgZ(15,"button",11),d.NdJ("click",function(){return je.modalContinue(!0)}),d._uU(16,"Continuar"),d.qZA()()()()()()),2&ot&&(d.xp6(2),d.hij(" ",je.btnMessage," "),d.xp6(9),d.hij(" ",je.modalMessage," "))}}),qe})();function b(qe,Ke){if(1&qe&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&qe){const ot=d.oxw(2).$implicit;d.xp6(1),d.hij("",ot.placeholder," es obligatorio")}}function ae(qe,Ke){if(1&qe&&(d.TgZ(0,"div",12),d.YNc(1,b,2,1,"div",13),d.qZA()),2&qe){d.oxw();const ot=d.MAs(2);d.xp6(1),d.Q6J("ngIf",ot.errors.required)}}function A(qe,Ke){1&qe&&d._UZ(0,"div",14)}const le=function(qe){return{"is-invalid":qe}};function ne(qe,Ke){if(1&qe){const ot=d.EpF();d.TgZ(0,"div",6)(1,"input",7,8),d.NdJ("ngModelChange",function($e){const mt=d.CHM(ot).$implicit;return d.KtG(mt.value=$e)}),d.qZA(),d.YNc(3,ae,2,1,"div",9),d.TgZ(4,"label",10),d._uU(5),d.qZA(),d.YNc(6,A,1,0,"div",11),d.qZA()}if(2&qe){const ot=Ke.$implicit,je=d.MAs(2),$e=d.oxw(2),Et=d.MAs(1);d.xp6(1),d.Tol("form-control"+ot.classlist),d.Q6J("id",ot.label)("name",ot.label)("type",ot.type)("placeholder",ot.placeholder)("ngModel",ot.value)("value",ot.valueCallback?ot.getValue():ot.value)("ngClass",d.VKq(14,le,Et.submitted&&je.errors))("readonly",$e.mode),d.xp6(2),d.Q6J("ngIf",Et.submitted&&je.errors),d.xp6(1),d.Q6J("for",ot.label),d.xp6(1),d.Oqu(ot.placeholder),d.xp6(1),d.Q6J("ngIf","radio"==ot.type)}}function ue(qe,Ke){if(1&qe&&(d.TgZ(0,"div",4),d.YNc(1,ne,7,16,"div",5),d.qZA()),2&qe){const ot=Ke.$implicit;d.xp6(1),d.Q6J("ngForOf",ot)}}function Te(qe,Ke){if(1&qe){const ot=d.EpF();d.TgZ(0,"div",15)(1,"app-warn-modal",16),d.NdJ("continue",function($e){d.CHM(ot);const Et=d.oxw();return d.KtG(Et.onSubmit($e))}),d.qZA(),d.TgZ(2,"button",17),d.NdJ("click",function(){d.CHM(ot);const $e=d.oxw(),Et=d.MAs(1);return d.KtG($e.onReset(Et))}),d._uU(3," Reset "),d.qZA()()}if(2&qe){const ot=d.oxw();d.xp6(1),d.Q6J("btnMessage",ot.btnMes)}}let at=(()=>{class qe{constructor(ot){this.cdref=ot,this.formModel=new d.vpe,this.mode=!1,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new U.O("Nombre Completo","fullname","text"),new U.O("Nombre de Usuario","username","text")],[new U.O("Correo Electronico","email","text")],[new U.O("Password","password","password"),new U.O("Confirmar Password","Confirm Password","password")],[new U.O("Aceptar los Terminos","Accept Terms","radio","form-check-input",!1)]],this.continue=!1}ngOnInit(){}onContinue(ot){this.continue=ot}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(ot){if(this.continue&&ot){var je={};this.formObj.flat(2).forEach($e=>je[$e.label]=$e.value),this.formModel.emit(je)}}onReset(ot){this.continue=!1,ot.reset()}}return qe.\u0275fac=function(ot){return new(ot||qe)(d.Y36(d.sBO))},qe.\u0275cmp=d.Xpm({type:qe,selectors:[["app-form"]],inputs:{mode:"mode",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel"},decls:4,vars:2,consts:[["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["required","",3,"id","name","type","placeholder","ngModel","value","ngClass","readonly","ngModelChange"],["input","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"",3,"for"],["class","mb-4",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["type","submit","modalMessage","\xbfSeguro que desea crear una nueva orden?",3,"btnMessage","continue"],["type","button",1,"ms-2","btn","btn-outline-danger","rounded-pill",3,"click"]],template:function(ot,je){if(1&ot){const $e=d.EpF();d.TgZ(0,"form",0,1),d.NdJ("ngSubmit",function(){d.CHM($e);const mt=d.MAs(1);return d.KtG(mt.form.valid&&je.onContinue(!0))}),d.YNc(2,ue,2,1,"div",2),d.YNc(3,Te,4,1,"div",3),d.qZA()}2&ot&&(d.xp6(2),d.Q6J("ngForOf",je.formObj),d.xp6(1),d.Q6J("ngIf",!je.mode))},dependencies:[j.mk,j.sg,j.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.On,m.F,de]}),qe})()},8783:(Lt,ze,N)=>{N.r(ze),N.d(ze,{MaterialModule:()=>xe});var d=N(6895),U=N(9051);class j{}var m=N(8179),de=N(6535),b=N(4985);class ae{}var A=N(4650),le=N(798),ne=N(490),ue=N(4245);function Te(Ae,Ze){if(1&Ae){const Le=A.EpF();A.TgZ(0,"div")(1,"div",4)(2,"div",5)(3,"app-form",6),A.NdJ("formModel",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.submit(Ve))}),A.qZA()()()()}if(2&Ae){const Le=A.oxw();A.xp6(3),A.Q6J("formObj",Le.formObj)}}function at(Ae,Ze){if(1&Ae){const Le=A.EpF();A.TgZ(0,"div",7)(1,"h4"),A._uU(2,"El material a sido registrado Satisfactoriamente!"),A.qZA(),A.TgZ(3,"button",8),A.NdJ("click",function(){A.CHM(Le);const Ve=A.oxw();return A.KtG(Ve.newMaterial())}),A._uU(4,"A\xf1adir Otro"),A.qZA()()}}let qe=(()=>{class Ae{constructor(Le,Ut,Ve){this.fos=Le,this.auditService=Ut,this.invRMService=Ve,this.material=new j,this.invMaterial=new ae,this.submitted=!1,this.Deps=["Corte y Ensamble","Carpinteria","Detallado y Pintura","Piel","Consumible","Almacen General","Empaque"],this.formObj=[[new b.O("Nombre","name","text"),new b.O("Lote Minimo","minBatch","number")],[new b.O("Descripcion","description","text")],[new b.O("Precio","price","number")],[new b.O("Cantidad en Inventario","available","number")],[new b.O("Tiempo de Entrega","deliveryTime","number")],[new b.O("Area","area","text"),new b.O("Zona","zone","text"),new b.O("Posicion","position","text")]]}submit(Le){this.material=Le,this.invMaterial={name:Le.name,available:+Le.available,commited:0,watingCommited:0,wating:0},this.saveMaterial()}saveMaterial(){this.material.timestamp=m.EK.fromDate(new Date),this.fos.create(this.material).then(Le=>{this.invRMService.create({materialId:Le.id,...this.invMaterial}),console.log("Created new material successfully!"),this.submitted=!0})}newMaterial(){this.submitted=!1,this.material=new j}}return Ae.\u0275fac=function(Le){return new(Le||Ae)(A.Y36(de.U),A.Y36(le.C),A.Y36(ne.y))},Ae.\u0275cmp=A.Xpm({type:Ae,selectors:[["app-add-material"]],features:[A._Bn([de.U,{provide:"path",useValue:"/materials"}])],decls:6,vars:2,consts:[[1,"container","vh-100"],[1,"text-muted","mt-5"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"card","mt-4","bg-light","shadow-lg","border-0"],[1,"card-body"],["btnMes","Crear Material","modalMessage","\xbfDesea continuar con la creacion del material?",3,"formObj","formModel"],[1,"mt-3"],[1,"btn","btn-outline-success","mt-2",3,"click"]],template:function(Le,Ut){1&Le&&(A.TgZ(0,"div",0)(1,"h5",1),A._uU(2," Registro del Material"),A.qZA(),A._UZ(3,"hr"),A.YNc(4,Te,4,1,"div",2),A.YNc(5,at,5,0,"div",3),A.qZA()),2&Le&&(A.xp6(4),A.Q6J("ngIf",!Ut.submitted),A.xp6(1),A.Q6J("ngIf",Ut.submitted))},dependencies:[d.O5,ue.U]}),Ae})();var Ke=N(4004),ot=N(3985),je=N(433);function $e(Ae,Ze){if(1&Ae){const Le=A.EpF();A.TgZ(0,"div",2)(1,"h4"),A._uU(2,"Material"),A.qZA(),A.TgZ(3,"form")(4,"div",3)(5,"input",4),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.currentMaterial.name=Ve)}),A.qZA(),A.TgZ(6,"label",5),A._uU(7,"Nombre"),A.qZA()(),A.TgZ(8,"div",6)(9,"div",3)(10,"input",7),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.currentMaterial.available=Ve)}),A.qZA(),A.TgZ(11,"label",8),A._uU(12,"Unidades Disponibles"),A.qZA()(),A.TgZ(13,"div",3)(14,"input",9),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.currentMaterial.commited=Ve)}),A.qZA(),A.TgZ(15,"label",10),A._uU(16,"Unidades Comprometidas"),A.qZA()()(),A.TgZ(17,"div",6)(18,"div",3)(19,"input",11),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.currentMaterial.watingCommited=Ve)}),A.qZA(),A.TgZ(20,"label",12),A._uU(21,"Unidades Esperando Comprometidas"),A.qZA()(),A.TgZ(22,"div",3)(23,"input",13),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.currentMaterial.wating=Ve)}),A.qZA(),A.TgZ(24,"label",14),A._uU(25,"Unidades Esperando"),A.qZA()()(),A.TgZ(26,"div",3)(27,"input",15),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.currentMaterial.description=Ve)}),A.qZA(),A.TgZ(28,"label",16),A._uU(29,"Descripcion"),A.qZA()(),A.TgZ(30,"div",17)(31,"input",18),A.NdJ("ngModelChange",function(Ve){A.CHM(Le);const Oe=A.oxw();return A.KtG(Oe.material.deliveryTime=Ve)}),A.qZA(),A.TgZ(32,"span",19),A._uU(33,"Unidades"),A.qZA(),A.TgZ(34,"label",20),A._uU(35,"Tiempo de Entrega en Dias"),A.qZA()()(),A.TgZ(36,"button",21),A.NdJ("click",function(){A.CHM(Le);const Ve=A.oxw();return A.KtG(Ve.deleteMaterial())}),A._uU(37," Eliminar "),A.qZA(),A.TgZ(38,"button",22),A.NdJ("click",function(){A.CHM(Le);const Ve=A.oxw();return A.KtG(Ve.updateMaterial())}),A._uU(39," Editar "),A.qZA(),A.TgZ(40,"p"),A._uU(41),A.qZA()()}if(2&Ae){const Le=A.oxw();A.xp6(5),A.Q6J("ngModel",Le.currentMaterial.name),A.xp6(5),A.Q6J("ngModel",Le.currentMaterial.available),A.xp6(4),A.Q6J("ngModel",Le.currentMaterial.commited),A.xp6(5),A.Q6J("ngModel",Le.currentMaterial.watingCommited),A.xp6(4),A.Q6J("ngModel",Le.currentMaterial.wating),A.xp6(4),A.Q6J("ngModel",Le.currentMaterial.description),A.xp6(4),A.Q6J("ngModel",Le.material.deliveryTime),A.xp6(10),A.Oqu(Le.message)}}function Et(Ae,Ze){1&Ae&&(A.TgZ(0,"div"),A._UZ(1,"br"),A.TgZ(2,"p"),A._uU(3,"No fue posible acceder a este material..."),A.qZA()())}let mt=(()=>{class Ae{constructor(Le,Ut){this.materialService=Le,this.reportService=Ut,this.material=new j,this.refreshList=new A.vpe,this.currentMaterial={},this.income=0,this.outflow=0,this.message=""}ngOnInit(){this.currentMaterial=this.material,this.message=""}ngOnChanges(){this.message="",this.currentMaterial={...this.material}}updateMaterial(){this.currentMaterial.id&&this.materialService.update(this.currentMaterial.id,{name:this.currentMaterial.name,description:this.currentMaterial.description})?.then(()=>this.message="The Material was updated successfully!").catch(Ut=>console.log(Ut))}deleteMaterial(){this.currentMaterial.id&&this.materialService.delete(this.currentMaterial.id).then(()=>{this.refreshList.emit(),this.message="The Material was updated successfully!"}).catch(Le=>console.log(Le))}}return Ae.\u0275fac=function(Le){return new(Le||Ae)(A.Y36(ot.U),A.Y36(ne.y))},Ae.\u0275cmp=A.Xpm({type:Ae,selectors:[["app-material-details"]],inputs:{material:"material"},outputs:{refreshList:"refreshList"},features:[A.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-floating","mb-2"],["type","text","id","name","placeholder","name","name","name",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],[1,"input-group"],["readonly","","type","number","id","available","placeholder","available","name","available",1,"form-control",3,"ngModel","ngModelChange"],["for","available"],["readonly","","type","number","id","commited","placeholder","commited","name","commited",1,"form-control",3,"ngModel","ngModelChange"],["for","commited"],["readonly","","type","number","id","watingCommited","placeholder","watingCommited","name","watingCommited",1,"form-control",3,"ngModel","ngModelChange"],["for","watingCommited"],["readonly","","type","number","id","wating","placeholder","wating","name","wating",1,"form-control",3,"ngModel","ngModelChange"],["for","wating"],["type","text","id","description","placeholder","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],[1,"form-floating","input-group","mb-2"],["readonly","","type","text","id","deliveryTime","placeholder","deliveryTime","name","deliveryTime","readonly","readonly",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text"],["for","deliveryTime"],[1,"btn","btn-danger","rounded-pill","mx-2","mt-2",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","mt-2",3,"click"]],template:function(Le,Ut){1&Le&&(A.YNc(0,$e,42,8,"div",0),A.YNc(1,Et,4,0,"div",1)),2&Le&&(A.Q6J("ngIf",Ut.material),A.xp6(1),A.Q6J("ngIf",!Ut.material))},dependencies:[d.O5,je._Y,je.Fj,je.wV,je.JJ,je.JL,je.On,je.F]}),Ae})();function Ce(Ae,Ze){if(1&Ae){const Le=A.EpF();A.TgZ(0,"li",24),A.NdJ("click",function(){const Ve=A.CHM(Le),Oe=Ve.$implicit,Ye=Ve.index,Je=A.oxw();return A.KtG(Je.setActiveMaterial(Oe,Ye))}),A._uU(1),A.qZA()}if(2&Ae){const Le=Ze.$implicit,Ut=Ze.index,Ve=A.oxw();A.ekj("active",Ut==Ve.currentIndex),A.xp6(1),A.hij(" ",Le.name," ")}}function ut(Ae,Ze){if(1&Ae){const Le=A.EpF();A.TgZ(0,"div")(1,"app-material-details",25),A.NdJ("refreshList",function(){A.CHM(Le);const Ve=A.oxw();return A.KtG(Ve.refreshList())}),A.qZA()()}if(2&Ae){const Le=A.oxw();A.xp6(1),A.Q6J("material",Le.currentMaterial)}}function st(Ae,Ze){1&Ae&&(A.TgZ(0,"div"),A._UZ(1,"br"),A.TgZ(2,"p"),A._uU(3,"Seleccione un material..."),A.qZA()())}const vt=[{path:"",component:(()=>{class Ae{constructor(Le,Ut){this.fos=Le,this.mats=Ut,this.Materials=[],this.currentIndex=-1,this.title="",this.query="",this.productsPerCall=2,this.lastInResponses=[],this.disableNext=!1,this.disablePrev=!0}ngOnInit(){this.nextPage(!0)}nextPage(Le){var Ve,Ut=void 0;if(Le){if(this.disableNext)return;Ut=this.Materials.at(-1),this.lastInResponses.push(Ut)}else{if(this.disablePrev)return;this.lastInResponses?.pop(),Ut=this.lastInResponses?.at(-1)}console.log(Ut),Ve=this.queryChange?this.fos.filterByKeyBatch("name",this.queryChange,this.productsPerCall,Ut):this.fos.getNextBatch(this.productsPerCall,Ut),console.log("Last in response: ",this.lastInResponses,"Anchor",Ut),Ve.snapshotChanges().pipe((0,Ke.U)(Oe=>Oe.map(Ye=>({id:Ye.payload.doc.id,...Ye.payload.doc.data()})))).subscribe(Oe=>{if(!Oe.length)return this.disableNext=!0,void this.lastInResponses?.pop();this.Materials=Oe,this.disableNext=Oe.length<this.productsPerCall,this.disablePrev=!Ut})}refreshList(){this.currentMaterial=void 0,this.currentIndex=-1}filterMaterials(){this.Materials=[],this.lastInResponses=[],this.disableNext=!1,this.disablePrev=!0,this.queryChange=""==this.query?void 0:this.query,console.log("Last in response: ",this.lastInResponses),this.nextPage(!0)}setActiveMaterial(Le,Ut){this.currentMaterial=Le,this.currentIndex=Ut}}return Ae.\u0275fac=function(Le){return new(Le||Ae)(A.Y36(de.U),A.Y36(ot.U))},Ae.\u0275cmp=A.Xpm({type:Ae,selectors:[["app-material-list"]],features:[A._Bn([de.U,{provide:"path",useValue:"/materials"}])],decls:36,vars:4,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],["type","search","name","query","placeholder","Busqueda por Nombre","aria-label","Search",1,"form-control","ms-5","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"position-fixed","bottom-0","end-0",2,"margin","6rem","z-index","1070"],["routerLink","add",1,"btn","btn-success","btn-lg","rounded-pill"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","4vh","height","4vh","viewBox","0 0 47 47",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141 c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27 c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435 c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],["aria-label","Page navigation",1,"mt-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],[1,"list-group-item",3,"click"],[3,"material","refreshList"]],template:function(Le,Ut){1&Le&&(A.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),A._uU(3,"Lista de Materiales"),A.qZA(),A.TgZ(4,"input",3),A.NdJ("ngModelChange",function(Oe){return Ut.query=Oe}),A.qZA(),A.TgZ(5,"button",4),A.NdJ("click",function(){return Ut.filterMaterials()}),A._uU(6,"Buscar"),A.qZA()(),A._UZ(7,"hr"),A.TgZ(8,"div",5)(9,"button",6),A.O4$(),A.TgZ(10,"svg",7),A._UZ(11,"g",8)(12,"g",9),A.TgZ(13,"g",10)(14,"g"),A._UZ(15,"path",11),A.qZA()()()()(),A.kcU(),A.TgZ(16,"div",12)(17,"div",13)(18,"ul",14),A.YNc(19,Ce,2,3,"li",15),A.qZA()(),A.TgZ(20,"div",13),A.YNc(21,ut,2,1,"div",16),A.YNc(22,st,4,0,"div",16),A.qZA()(),A.TgZ(23,"nav",17)(24,"ul",18)(25,"li",19)(26,"button",20),A.NdJ("click",function(){return Ut.nextPage(!1)}),A.TgZ(27,"span",21),A._uU(28,"\xab"),A.qZA()()(),A.TgZ(29,"li",19)(30,"span",22),A._uU(31," Anterior/Siguiente Registro"),A.qZA()(),A.TgZ(32,"li",19)(33,"button",23),A.NdJ("click",function(){return Ut.nextPage(!0)}),A.TgZ(34,"span",21),A._uU(35,"\xbb"),A.qZA()()()()()()),2&Le&&(A.xp6(4),A.Q6J("ngModel",Ut.query),A.xp6(15),A.Q6J("ngForOf",Ut.Materials),A.xp6(2),A.Q6J("ngIf",Ut.currentMaterial),A.xp6(1),A.Q6J("ngIf",!Ut.currentMaterial))},dependencies:[d.sg,d.O5,U.rH,je._Y,je.Fj,je.JJ,je.JL,je.On,je.F,mt]}),Ae})()},{path:"add",component:qe}];let we=(()=>{class Ae{}return Ae.\u0275fac=function(Le){return new(Le||Ae)},Ae.\u0275mod=A.oAB({type:Ae}),Ae.\u0275inj=A.cJS({imports:[U.Bz.forChild(vt),U.Bz]}),Ae})();var _t=N(4466);let xe=(()=>{class Ae{}return Ae.\u0275fac=function(Le){return new(Le||Ae)},Ae.\u0275mod=A.oAB({type:Ae}),Ae.\u0275inj=A.cJS({imports:[d.ez,we,je.u5,_t.m]}),Ae})()},4985:(Lt,ze,N)=>{N.d(ze,{O:()=>d});class d{constructor(j,m,de,b,ae,A,le){this.value=le,this.label=m,this.type=de,this.placeholder=j,this.classlist=b||" ",this.ref=A||void 0,this.valueCallback=ae}constructor2(j){Object.assign(this,j)}getValue(){this.value=this.ref?this.valueCallback(...this.ref.map(j=>j.value)):this.valueCallback()}}},6993:(Lt,ze,N)=>{N.r(ze),N.d(ze,{OrdersModule:()=>Je});var d=N(6895),U=N(9051),j=N(4004),m=N(4650),de=N(33);let b=(()=>{class Me{constructor(ie){this.db=ie,this.dbPath="/orders",this.ordersRef=ie.collection(this.dbPath)}getNextBatch(ie,z){return this.db.collection(this.dbPath,z?se=>se.orderBy("timestamp","desc").startAfter(z).limit(ie):se=>se.orderBy("timestamp","desc").limit(ie))}getPrevBatch(ie,z,se){return this.db.collection(this.dbPath,pe=>pe.orderBy("timestamp","desc").startAt(z).endBefore(se).limit(ie))}getBatch(ie){return this.db.collection(this.dbPath,z=>z.limit(ie).orderBy("timestamp","desc"))}getAll(){return this.ordersRef}getById(ie){return this.db.collection(this.dbPath,z=>z.where("product_id","==",ie))}create(ie){return this.ordersRef.add({...ie})}update(ie,z){return this.ordersRef.doc(ie).update(z)}delete(ie){return this.ordersRef.doc(ie).delete()}filterByName(ie){return this.db.collection(this.dbPath,z=>z.where("name",">=",ie).where("name","<=",ie+"\uf8ff"))}filterByCode(ie){return this.db.collection(this.dbPath,z=>z.where("code",">=",ie).where("code","<=",ie+"\uf8ff"))}}return Me.\u0275fac=function(ie){return new(ie||Me)(m.LFG(de.ST))},Me.\u0275prov=m.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})();var ae=N(6082),A=N(433);function le(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"input",30),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.query=se)}),m.qZA()}if(2&Me){const ie=m.oxw();m.Q6J("ngModel",ie.query)}}function ne(Me,Ee){1&Me&&(m.TgZ(0,"select",31)(1,"option",32),m._uU(2,"ESPRANDO MATERIAL"),m.qZA(),m.TgZ(3,"option",33),m._uU(4,"INACTIVA"),m.qZA(),m.TgZ(5,"option",34),m._uU(6,"ACTIVA"),m.qZA(),m.TgZ(7,"option",35),m._uU(8,"TERMINADA"),m.qZA()())}function ue(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"li",36),m.NdJ("click",function(){const se=m.CHM(ie),pe=se.$implicit,We=se.index,Ot=m.oxw();return m.KtG(Ot.setActiveProduct(pe,We))}),m._uU(1),m.qZA()}if(2&Me){const ie=Ee.$implicit,z=Ee.index,se=m.oxw();m.ekj("active",z==se.currentIndex),m.xp6(1),m.AsE(" ",ie.name," - ",ie.shipDate," ")}}function Te(Me,Ee){1&Me&&(m.TgZ(0,"div"),m._UZ(1,"br"),m.TgZ(2,"p"),m._uU(3,"Seleccione una orden..."),m.qZA()())}function at(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"li",74)(1,"div",75)(2,"div",76),m._uU(3),m.qZA(),m.TgZ(4,"div",77)(5,"input",78),m.NdJ("ngModelChange",function(se){const We=m.CHM(ie).$implicit;return m.KtG(We.quantity=se)}),m.qZA(),m.TgZ(6,"span",43),m._uU(7,"U"),m.qZA(),m.TgZ(8,"input",79),m.NdJ("ngModelChange",function(se){const We=m.CHM(ie).$implicit;return m.KtG(We.stock=se)}),m.qZA(),m.TgZ(9,"span",43),m._uU(10,"U"),m.qZA(),m.TgZ(11,"div",80)(12,"label",4),m._uU(13," Uso PT"),m.qZA(),m.TgZ(14,"input",81),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw(2);return m.KtG(pe.codeFilter=se)}),m.qZA()()(),m.TgZ(15,"button",82),m.NdJ("click",function(){const pe=m.CHM(ie).index,We=m.oxw(2);return m.KtG(We.removeProductFromOrder(pe))}),m.qZA()()()}if(2&Me){const ie=Ee.$implicit,z=m.oxw(2);m.xp6(3),m.hij(" ",ie.name," "),m.xp6(2),m.Q6J("ngModel",ie.quantity),m.xp6(3),m.Q6J("ngModel",ie.stock),m.xp6(6),m.Q6J("ngModel",z.codeFilter)}}const qe=function(Me){return{id:Me}};function Ke(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"div",37)(1,"h4"),m._uU(2,"Orden"),m.qZA(),m.TgZ(3,"div",38)(4,"input",39),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.name=se)}),m.qZA(),m.TgZ(5,"label",40),m._uU(6,"Numero de Orden de Pedido"),m.qZA()(),m.TgZ(7,"div",41)(8,"input",42),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.clientName=se)}),m.qZA(),m.TgZ(9,"span",43)(10,"a",44),m.O4$(),m.TgZ(11,"svg",45),m._UZ(12,"path",46)(13,"path",47),m.qZA()()(),m.kcU(),m.TgZ(14,"label",48),m._uU(15,"Nombre del Cliente"),m.qZA()(),m.TgZ(16,"div",49)(17,"div",50)(18,"div",51)(19,"input",52),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.shipDate=se)}),m.qZA(),m.TgZ(20,"label",53),m._uU(21,"Fecha de Embarque"),m.qZA()(),m.TgZ(22,"div",54)(23,"input",55),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.state=se)}),m.qZA(),m.TgZ(24,"label",56),m._uU(25,"Estado"),m.qZA()()(),m.TgZ(26,"div",57)(27,"div",41)(28,"input",58),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.productionDays=se)}),m.qZA(),m.TgZ(29,"span",43),m._uU(30,"dias"),m.qZA(),m.TgZ(31,"label",59),m._uU(32,"Dias de Produccion"),m.qZA()(),m.TgZ(33,"div",41)(34,"input",60),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.orderInput=se)}),m.qZA(),m.TgZ(35,"span",43),m._uU(36,"d\xedas"),m.qZA(),m.TgZ(37,"label",61),m._uU(38,"Pedido de Insumos"),m.qZA()()(),m.TgZ(39,"div",57)(40,"div",62)(41,"input",63),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.rmOrderDeadline=se)}),m.qZA(),m.TgZ(42,"label",64),m._uU(43,"Pedido Materia Prima"),m.qZA()(),m.TgZ(44,"div",65)(45,"input",66),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.startProductionDeadline=se)}),m.qZA(),m.TgZ(46,"label",67),m._uU(47,"Limite inicio de Produccion"),m.qZA()()(),m.TgZ(48,"div",62)(49,"input",68),m.NdJ("ngModelChange",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.currentOrder.notes=se)}),m.qZA(),m.TgZ(50,"label",69),m._uU(51,"notas"),m.qZA()()(),m.TgZ(52,"p"),m._uU(53,"productos de la Orden: "),m.qZA(),m.TgZ(54,"ul",70),m.YNc(55,at,16,4,"li",71),m.qZA(),m.TgZ(56,"button",72),m.NdJ("click",function(){m.CHM(ie);const se=m.oxw();return m.KtG(se.editProducts())}),m._uU(57,"Editar Orden"),m.qZA(),m.TgZ(58,"button",73),m.NdJ("click",function(){m.CHM(ie);const se=m.oxw();return m.KtG(se.completeOrder())}),m._uU(59,"Completar Orden"),m.qZA()()}if(2&Me){const ie=m.oxw();m.xp6(4),m.Q6J("ngModel",ie.currentOrder.name),m.xp6(4),m.Q6J("ngModel",ie.currentOrder.clientName),m.xp6(2),m.Q6J("state",m.VKq(11,qe,ie.currentOrder.clientId)),m.xp6(9),m.Q6J("ngModel",ie.currentOrder.shipDate),m.xp6(4),m.Q6J("ngModel",ie.currentOrder.state),m.xp6(5),m.Q6J("ngModel",ie.currentOrder.productionDays),m.xp6(6),m.Q6J("ngModel",ie.currentOrder.orderInput),m.xp6(7),m.Q6J("ngModel",ie.currentOrder.rmOrderDeadline),m.xp6(4),m.Q6J("ngModel",ie.currentOrder.startProductionDeadline),m.xp6(4),m.Q6J("ngModel",ie.currentOrder.notes),m.xp6(6),m.Q6J("ngForOf",ie.currentOrder.orderProducts)}}let ot=(()=>{class Me{constructor(ie,z){this.OrderService=ie,this.productService=z,this.currentIndex=-1,this.title="",this.query="",this.queryChange=void 0,this.codeFilter=!1,this.productsPerCall=2,this.disableNext=!1,this.disablePrev=!1,this.lastInResponses=[]}ngOnInit(){this.nextPage(!0)}refreshList(){this.currentOrder=void 0,this.currentIndex=-1,this.lastInResponses=[],this.Products=[],this.nextPage(!0)}nextPage(ie){var z;if(ie){if(this.disableNext)return;this.Products?.length&&this.lastInResponses?.push(this.Products[this.Products.length-1]),z=this.lastInResponses?.length?this.lastInResponses[this.lastInResponses?.length-1]:void 0}else{if(this.disablePrev)return;this.lastInResponses?.pop(),z=this.lastInResponses?.pop()}this.OrderService.getNextBatch(this.productsPerCall,z).snapshotChanges().pipe((0,j.U)(pe=>pe.map(We=>({id:We.payload.doc.id,...We.payload.doc.data()})))).subscribe(pe=>{pe.length?(this.Products=pe,this.disableNext=pe.length<this.productsPerCall,this.disablePrev=!z):this.disableNext=!0},pe=>{this.disableNext=!1})}removeProductFromOrder(ie){}editProducts(){}useFP(ie,z){this.codeFilter?this.productService.getById(ie).pipe((0,j.U)(se=>({id:se.id,...se.data()}))).subscribe(se=>{this.currentOrder?.orderProducts&&(this.currentOrder.orderProducts[z].stock=se.stock?se.stock:0)}):this.currentOrder?.orderProducts&&(this.currentOrder.orderProducts[z].stock="")}fullfillOrder(){this.currentOrder?.id&&this.OrderService.update(this.currentOrder.id,{fulfilled:!0}).then(()=>this.refreshList()).catch(ie=>console.log(ie))}filterProducts(){this.queryChange=this.query,this.Products=[],this.lastInResponses=[],this.nextPage(!0)}setActiveProduct(ie,z){this.currentOrder=ie,this.currentIndex=z}completeOrder(){this.OrderService.delete(this.currentOrder?.id).then(()=>this.refreshList())}readableDate(ie){var z=new Date(ie);return z.getDate()+"/"+z.getMonth()+"/"+z.getFullYear()}}return Me.\u0275fac=function(ie){return new(ie||Me)(m.Y36(b),m.Y36(ae.M))},Me.\u0275cmp=m.Xpm({type:Me,selectors:[["app-orders-list"]],decls:41,vars:6,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],[1,"ms-5","form-check"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault","name","codeFilter",1,"form-check-input",3,"ngModel","ngModelChange"],["id","query","class","form-control mx-2 float-end","type","search","name","query","placeholder","Buscar por Nombre o Codigo","aria-label","Search",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-select mx-2","aria-label","Default select example",4,"ngIf"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"position-fixed","bottom-0","end-0",2,"margin","6rem","z-index","1070"],["routerLink","add",1,"btn","btn-success","btn-lg","rounded-pill"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","4vh","height","4vh","viewBox","0 0 47 47",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141 c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27 c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435 c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[1,"col-lg-6"],[4,"ngIf"],["class","edit-form",4,"ngIf"],["aria-label","Page navigation",1,"mt-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],["id","query","type","search","name","query","placeholder","Buscar por Nombre o Codigo","aria-label","Search",1,"form-control","mx-2","float-end",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-select","mx-2"],["selected","","value","1"],["value","2"],["value","3"],["value","4"],[1,"list-group-item",3,"click"],[1,"edit-form"],[1,"form-floating","mb-2"],["id","name","required","","placeholder","name","name","name","readonly","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],[1,"form-floating","input-group","mb-2"],["id","clientName","required","","placeholder","description","name","clientName","type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text"],["routerLink","/clients",3,"state"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-info-circle"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"],["for","clientName"],[1,"submit-form"],[1,"input-group","mb-2"],[1,"form-floating"],["id","shipDate","name","shipDate","readonly","","required","","type","date",1,"form-control",3,"ngModel","ngModelChange"],["for","shipDate"],[1,"form-floating","input-group-append"],["id","state","name","state","readonly","","required","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","state"],[1,"input-group"],["id","productionDays","required","","placeholder","description","name","productionDays","type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","productionDays"],["id","orderInput","required","","placeholder","Precio","name","orderInput","type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","orderInput"],[1,"form-floating","mb-3"],["id","rmOrderDeadline","name","rmOrderDeadline","required","","type","date","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","rmOrderDeadline"],[1,"form-floating","input-group","mb-3"],["id","startProductionDeadline","name","startProductionDeadline","readonly","","required","","type","date",1,"form-control",3,"ngModel","ngModelChange"],["for","startProductionDeadline"],["id","notes","required","","placeholder","notes","name","notes","type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","notes"],[1,"list-group","mt-1","mb-3"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"btn","btn-outline-success","mx-auto","mb-3",3,"click"],[1,"btn","btn-outline-primary","ms-2","mb-3",3,"click"],[1,"list-group-item"],[1,"d-flex","flex-row","mx-auto"],[1,"my-auto","text-nowrap"],[1,"input-group","h-25","my-auto","ms-2"],["type","number","placeholder","Unidades","name","UP","readonly","","aria-label","quantity",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","number","placeholder","Uso de PT","name","stock","readonly","","aria-label","stock",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"form-check","input-group-append","mx-2","my-auto"],["disabled","","type","checkbox","id","flexCheckDefault","name","codeFilter",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"btn-close","my-auto","btn-sm","rounded-pill","float-end",3,"click"]],template:function(ie,z){1&ie&&(m.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),m._uU(3,"Lista de Ordenes"),m.qZA(),m.TgZ(4,"div",3)(5,"label",4),m._uU(6," Filtrar por Estado "),m.qZA(),m.TgZ(7,"input",5),m.NdJ("ngModelChange",function(pe){return z.codeFilter=pe}),m.qZA()(),m.YNc(8,le,1,1,"input",6),m.YNc(9,ne,9,0,"select",7),m.TgZ(10,"button",8),m.NdJ("click",function(){return z.filterProducts()}),m._uU(11,"Buscar"),m.qZA()(),m._UZ(12,"hr"),m.TgZ(13,"div",9)(14,"button",10),m.O4$(),m.TgZ(15,"svg",11),m._UZ(16,"g",12)(17,"g",13),m.TgZ(18,"g",14)(19,"g"),m._UZ(20,"path",15),m.qZA()()()()(),m.kcU(),m.TgZ(21,"div",16)(22,"div",17)(23,"ul",18),m.YNc(24,ue,2,4,"li",19),m.qZA()(),m.TgZ(25,"div",20),m.YNc(26,Te,4,0,"div",21),m.YNc(27,Ke,60,13,"div",22),m.qZA()(),m.TgZ(28,"nav",23)(29,"ul",24)(30,"li",25)(31,"button",26),m.NdJ("click",function(){return z.nextPage(!1)}),m.TgZ(32,"span",27),m._uU(33,"\xab"),m.qZA()()(),m.TgZ(34,"li",25)(35,"span",28),m._uU(36," Anterior/Siguiente Registro"),m.qZA()(),m.TgZ(37,"li",25)(38,"button",29),m.NdJ("click",function(){return z.nextPage(!0)}),m.TgZ(39,"span",27),m._uU(40,"\xbb"),m.qZA()()()()()()),2&ie&&(m.xp6(7),m.Q6J("ngModel",z.codeFilter),m.xp6(1),m.Q6J("ngIf",!z.codeFilter),m.xp6(1),m.Q6J("ngIf",z.codeFilter),m.xp6(15),m.Q6J("ngForOf",z.Products),m.xp6(2),m.Q6J("ngIf",!z.currentOrder),m.xp6(1),m.Q6J("ngIf",z.currentOrder))},dependencies:[d.sg,d.O5,U.rH,U.yS,A._Y,A.YN,A.Kr,A.Fj,A.wV,A.Wl,A.JJ,A.JL,A.Q7,A.On,A.F]}),Me})();var je=N(5861),$e=N(8179),Et=N(4985),mt=N(6535),Ce=N(5561),ut=N(490),st=N(3985),It=N(2425),vt=N(798),we=N(4245);function _t(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"button",24),m.NdJ("click",function(){m.CHM(ie);const se=m.oxw().$implicit,pe=m.oxw();return m.KtG(pe.addProductToOrder(se))}),m.TgZ(1,"span"),m.O4$(),m.TgZ(2,"svg",25),m._UZ(3,"g",26)(4,"g",27),m.TgZ(5,"g",28)(6,"g")(7,"g"),m._UZ(8,"path",29),m.qZA()()()()()()}}function xe(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"li",22),m.NdJ("click",function(){const se=m.CHM(ie),pe=se.$implicit,We=se.index,Ot=m.oxw();return m.KtG(Ot.setActiveProduct(pe,We))}),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.YNc(3,_t,9,0,"button",23),m.qZA()}if(2&Me){const ie=Ee.$implicit,z=Ee.index,se=m.oxw();m.ekj("active",z==se.currentIndex),m.xp6(2),m.hij(" ",ie.name," "),m.xp6(1),m.Q6J("ngIf",!se.displayClients)}}function Ae(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"li",33)(1,"div",34)(2,"span",35),m._uU(3),m.qZA(),m.TgZ(4,"div",36)(5,"input",37),m.NdJ("ngModelChange",function(se){const We=m.CHM(ie).$implicit;return m.KtG(We.quantity=se)}),m.qZA(),m.TgZ(6,"span",38),m._uU(7,"U"),m.qZA(),m.TgZ(8,"input",39),m.NdJ("ngModelChange",function(se){const We=m.CHM(ie).$implicit;return m.KtG(We.stock=se)}),m.qZA(),m.TgZ(9,"span",38),m._uU(10,"U"),m.qZA(),m.TgZ(11,"div",40)(12,"label",4),m._uU(13," Usar PT"),m.qZA(),m._UZ(14,"input",41),m.qZA()(),m.TgZ(15,"button",42),m.NdJ("click",function(){const pe=m.CHM(ie).index,We=m.oxw(2);return m.KtG(We.removeProductFromOrder(pe))}),m.qZA()()()}if(2&Me){const ie=Ee.$implicit;m.xp6(3),m.hij(" ",ie.name," "),m.xp6(2),m.Q6J("ngModel",ie.quantity),m.xp6(3),m.Q6J("ngModel",ie.stock),m.xp6(6),m.Q6J("ngModel",ie.useFP)}}function Ze(Me,Ee){if(1&Me){const ie=m.EpF();m.TgZ(0,"div",30)(1,"h4"),m._uU(2,"Nueva Orden"),m.qZA(),m.TgZ(3,"app-form",31),m.NdJ("formModel",function(se){m.CHM(ie);const pe=m.oxw();return m.KtG(pe.submit(se))}),m.qZA(),m.TgZ(4,"p"),m._uU(5,"productos de la Orden: "),m.qZA(),m.TgZ(6,"ul",11),m.YNc(7,Ae,16,4,"li",32),m.qZA()()}if(2&Me){const ie=m.oxw();m.xp6(3),m.Q6J("formObj",ie.formObj),m.xp6(4),m.Q6J("ngForOf",ie.orderProducts)}}function Le(Me,Ee){1&Me&&(m.TgZ(0,"div"),m._UZ(1,"br"),m.TgZ(2,"p"),m._uU(3,"Seleccione un producto..."),m.qZA()())}const Ve=[{path:"",component:ot},{path:"add",component:(()=>{class Me{constructor(ie,z,se,pe,We,Ot,Xt,Gn,Kn){this.Productservice=ie,this.shopService=z,this.invrmService=se,this.materialService=pe,this.orderService=We,this.fos=Ot,this.clientService=Xt,this.router=Gn,this.auditService=Kn,this.rL=new m.vpe,this.submitted=!1,this.currentIndex=-1,this.currentProduct={},this.id="",this.query="",this.codeFilter=!1,this.disableNext=!1,this.disablePrev=!0,this.productsPerCall=2,this.displayClients=!1,this.queryChange=void 0,this.lastInResponses=[],this.clientName="",this.updateProducts=!1,this.orderProducts=[],this.getClientName=()=>this.clientName,this.getProductionDays=()=>Math.ceil(this.orderProducts.map(En=>En.leadTime*En.quantity).reduce((En,Yn)=>En+Yn,0)),this.getOrderInput=()=>{var En=Math.max(...this.orderProducts.map(Yn=>Yn.materialWaitMaxTime));return En!=-1/0?En:0},this.getRmOrderDeadline=(En,Yn,ir)=>{if(!(En&&Yn&&ir))return;const Pt=new Date(En);return Pt.setDate(new Date(En).getDate()-ir-Yn),this.formatDateString(Pt.toLocaleDateString())},this.getStartProductionDeadline=(En,Yn,ir)=>{if(!(En&&Yn&&ir))return;const Pt=new Date(En);return Pt.setDate(new Date(En).getDate()-Yn),this.formatDateString(Pt.toLocaleDateString())},this.order=history.state;var kn=new Et.O("Fecha de Embarque","shipDate","date"),On=new Et.O("Dias de Produccion","productionDays","number",void 0,this.getProductionDays),Ht=new Et.O("Pedido de Insumos","orderInput","number",void 0,this.getOrderInput);this.formObj=[[new Et.O("Numero de Orden de Pedido","name","text")],[new Et.O("Nombre del Client","clientName","text",void 0,this.getClientName)],[kn],[On,Ht],[new Et.O("Pedido Materia Prima","rmOrderDeadline","date",void 0,this.getRmOrderDeadline,[kn,On,Ht]),new Et.O("Limite inicio de Produccion","startProductionDeadline","date",void 0,this.getStartProductionDeadline,[kn,On,Ht])]]}ngOnInit(){this.getOrderProducts(),this.nextPage(!0)}getOrderProducts(){!this.order.id||this.orderService.getById(this.order?.id).snapshotChanges().pipe((0,j.U)(ie=>ie.map(z=>({id:z.payload.doc.id,intel:z.payload.doc.data()})))).subscribe(ie=>{if(!ie.length)return;const z=ie;this.orderProducts=z[0].intel.Products,this.id=z[0].id,this.updateProducts=!!this.orderProducts})}nextPage(ie){var z,se;if(ie){if(this.disableNext)return;this.Products?.length&&this.lastInResponses?.push(this.Products[this.Products.length-1]),z=this.lastInResponses?.length?this.lastInResponses[this.lastInResponses?.length-1]:void 0}else{if(this.disablePrev)return;this.lastInResponses?.pop(),z=this.lastInResponses?.pop()}console.log("Info:",z,this.lastInResponses,this.queryChange),this.queryChange?this.codeFilter?se=this.getService().filterByCodeBatch(this.queryChange,this.productsPerCall,z):(console.log(this.queryChange),se=this.getService().filterByNameBatch(this.queryChange,this.productsPerCall,z)):se=this.getService().getNextBatch(this.productsPerCall,z),se.snapshotChanges().pipe((0,j.U)(pe=>pe.map(We=>({id:We.payload.doc.id,...We.payload.doc.data()})))).subscribe(pe=>{pe.length?(console.log(pe),this.Products=pe,this.disableNext=pe.length<this.productsPerCall,this.disablePrev=!z):this.disableNext=!0},pe=>{this.disableNext=!1})}filterProducts(){this.queryChange=this.query,this.disableNext=!1,this.Products=[],this.lastInResponses=[],this.nextPage(!0)}setActiveProduct(ie,z){this.currentProduct=ie,this.currentIndex=z,this.displayClients&&(this.clientName=ie.name,this.order.clientId=ie.id)}addProductToOrder(ie){this.orderProducts.find(se=>se.id==ie.id)||this.orderProducts.push({name:ie.name,id:ie.id,leadTime:ie.leadTime,materialWaitMaxTime:ie.materialWaitMaxTime,materials:ie.materials})}validateForm(){return new Date(this.order.rmOrderDeadline)>new Date}removeProductFromOrder(ie){this.orderProducts.splice(ie,1)}getService(){return this.displayClients?this.clientService:this.Productservice}showClientList(){this.queryChange=void 0,this.disableNext=!1,this.disablePrev=!0,this.Products=[],this.lastInResponses=[],this.nextPage(!0)}submit(ie){this.order=ie,this.editProducts()}getTotalMaterials(){return this.orderProducts?(this.orderProducts.forEach(ie=>ie.materials.forEach(z=>z.quantity*=ie.quantity)),this.orderProducts.flatMap(ie=>ie.materials).reduce((ie,z)=>(ie[z.id]=ie[z.id]?{name:z.name,quantity:ie[z.id].quantity+z.quantity,minBatch:z.minBatch}:{name:z.name,quantity:z.quantity,minBatch:z.minBatch},ie),{})):[]}updateMaterialStock(){var ie=this;Object.entries(this.getTotalMaterials()).forEach(function(){var z=(0,je.Z)(function*(se){var We,pe=(yield ie.invrmService.getStock(se[0]))||0;if(null!=pe.available&&null!=pe.commited&&null!=pe.wating&&null!=pe.watingCommited){if(se[1].quantity<=pe.available)We={commited:+pe.commited+se[1].quantity,available:+pe.available-se[1].quantity};else if(We={watingCommited:+pe.watingCommited+se[1].quantity-+pe.available,commited:+pe.commited+ +pe.available,available:0},se[1].quantity-pe.available<=pe.wating)We={wating:+pe.wating+ +pe.available-se[1].quantity,...We};else{var Ot=se[1].quantity-+pe.available-+pe.wating,Xt=Ot<se[1].minBatch?se[1].minBatch-Ot:0;We={wating:pe.wating+Xt,...We},ie.shopService.create(se[0],se[1].name,Ot+Xt,Xt,$e.EK.fromDate(new Date(ie.order.rmOrderDeadline)),pe.id)}ie.invrmService.update(pe.id,We),ie.makeStockReport(se[0],se[1].name,pe,We)}});return function(se){return z.apply(this,arguments)}}()),alert("Orden Creada satisfactoriamente"),this.router.navigate(["/orders"])}makeStockReport(ie,z,se,pe){}editProducts(){if(this.validateForm()){var ie=this.orderProducts.map(z=>({id:z.id,name:z.name,quantity:z.quantity}));this.orderService.create({orderProducts:ie,state:"Esperando Material",timestamp:$e.EK.fromDate(new Date),...this.order}).then(()=>{this.updateMaterialStock()})}else alert("La fecha de Limite del Pedido de material debe ser almenos 2 dias despu\xe9s del dia actual")}useFP(ie,z){this.codeFilter?this.Productservice.getById(ie).pipe((0,j.U)(se=>({id:se.id,...se.data()}))).subscribe(se=>{this.orderProducts&&(this.orderProducts[z].stock=se.stock?se.stock:0)}):this.orderProducts&&(this.orderProducts[z].stock="")}formatDateString(ie){return ie.split("/").reverse().join("/").replace(/\//g,"-")}}return Me.\u0275fac=function(ie){return new(ie||Me)(m.Y36(ae.M),m.Y36(Ce.l),m.Y36(ut.y),m.Y36(st.U),m.Y36(b),m.Y36(mt.U),m.Y36(It.y),m.Y36(U.F0),m.Y36(vt.C))},Me.\u0275cmp=m.Xpm({type:Me,selectors:[["app-add-order"]],inputs:{order:"order"},outputs:{rL:"rL"},features:[m._Bn([mt.U,{provide:"path",useValue:"/products"}])],decls:34,vars:5,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap","my-auto"],[1,"ms-5","form-check"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault","name","displayClients",1,"form-check-input",3,"ngModel","ngModelChange","change"],["type","search","name","query","placeholder","Buscar por Nombre","aria-label","Search",1,"form-control","ms-2","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"text-muted","mt-1"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],["class","edit-form",4,"ngIf"],[4,"ngIf"],["aria-label","Page navigation",1,"mt-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],[1,"list-group-item",3,"click"],["class","btn btn-success btn-sm rounded-pill float-end",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm","rounded-pill","float-end",3,"click"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","20px","height","20px","viewBox","0 0 533.973 533.973",0,"xml","space","preserve"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M477.931,52.261c-12.821-12.821-33.605-12.821-46.427,0l-266.96,266.954l-62.075-62.069 c-12.821-12.821-33.604-12.821-46.426,0L9.616,303.572c-12.821,12.821-12.821,33.604,0,46.426l85.289,85.289l46.426,46.426 c12.821,12.821,33.611,12.821,46.426,0l46.426-46.426l290.173-290.174c12.821-12.821,12.821-33.605,0-46.426L477.931,52.261z"],[1,"edit-form"],["btnMes","Crear Orden","modalMessage","\xbfDesea continuar con la creacion de la Orden?",3,"formObj","formModel"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","flex-row","justify-content-between"],[1,"my-auto"],[1,"input-group"],["type","number","placeholder","Unidades","name","UP","aria-label","quantity",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"input-group-text"],["type","number","readonly","","placeholder","Disponible en PT","name","stock","aria-label","stock",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"form-check","input-group-append","mx-2","my-auto"],["readonlys","","type","checkbox","id","flexCheckDefault","name","codeFilter",1,"form-check-input",3,"ngModel"],[1,"btn-close","my-auto","btn-sm","rounded-pill","float-end",3,"click"]],template:function(ie,z){1&ie&&(m.TgZ(0,"div",0)(1,"form",1)(2,"h3",2),m._uU(3,"Registrar orden"),m.qZA(),m.TgZ(4,"div",3)(5,"label",4),m._uU(6," Lista de Clientes "),m.qZA(),m.TgZ(7,"input",5),m.NdJ("ngModelChange",function(pe){return z.displayClients=pe})("change",function(){return z.showClientList()}),m.qZA()(),m.TgZ(8,"input",6),m.NdJ("ngModelChange",function(pe){return z.query=pe}),m.qZA(),m.TgZ(9,"button",7),m.NdJ("click",function(){return z.filterProducts()}),m._uU(10,"Buscar"),m.qZA()(),m._UZ(11,"hr"),m.TgZ(12,"div",8)(13,"div",9)(14,"h5",10),m._uU(15,"Productos disponibles:"),m.qZA(),m.TgZ(16,"ul",11),m.YNc(17,xe,4,4,"li",12),m.qZA()(),m.TgZ(18,"div",9),m.YNc(19,Ze,8,2,"div",13),m.YNc(20,Le,4,0,"div",14),m.qZA(),m.TgZ(21,"nav",15)(22,"ul",16)(23,"li",17)(24,"button",18),m.NdJ("click",function(){return z.nextPage(!1)}),m.TgZ(25,"span",19),m._uU(26,"\xab"),m.qZA()()(),m.TgZ(27,"li",17)(28,"span",20),m._uU(29," Anterior/Siguiente Registro"),m.qZA()(),m.TgZ(30,"li",17)(31,"button",21),m.NdJ("click",function(){return z.nextPage(!0)}),m.TgZ(32,"span",19),m._uU(33,"\xbb"),m.qZA()()()()()()()),2&ie&&(m.xp6(7),m.Q6J("ngModel",z.displayClients),m.xp6(1),m.Q6J("ngModel",z.query),m.xp6(9),m.Q6J("ngForOf",z.Products),m.xp6(2),m.Q6J("ngIf",z.order),m.xp6(1),m.Q6J("ngIf",!z.order))},dependencies:[d.sg,d.O5,A._Y,A.Fj,A.wV,A.Wl,A.JJ,A.JL,A.On,A.F,we.U]}),Me})()},{path:"details",component:ot}];let Oe=(()=>{class Me{}return Me.\u0275fac=function(ie){return new(ie||Me)},Me.\u0275mod=m.oAB({type:Me}),Me.\u0275inj=m.cJS({imports:[U.Bz.forChild(Ve),U.Bz]}),Me})();var Ye=N(4466);let Je=(()=>{class Me{}return Me.\u0275fac=function(ie){return new(ie||Me)},Me.\u0275mod=m.oAB({type:Me}),Me.\u0275inj=m.cJS({imports:[d.ez,Oe,A.u5,Ye.m]}),Me})()},22:(Lt,ze,N)=>{N.r(ze),N.d(ze,{ProductModule:()=>Me});var d=N(6895),U=N(9051),j=N(5861),m=N(4004),de=N(6535),b=N(4650),ae=N(6082),A=N(433),le=N(8179),ne=N(33);let ue=(()=>{class Ee{constructor(z){this.db=z,this.dbPath="/FPreport",this.invFinishedProductsRef=z.collection(this.dbPath)}getNextBatch(z,se){return console.log("hi"),this.db.collection(this.dbPath,se?pe=>pe.orderBy("timestamp","desc").startAfter(se.timestamp).limit(z):pe=>pe.orderBy("timestamp","desc").limit(z))}getAll(){return this.invFinishedProductsRef}create(z){return this.invFinishedProductsRef.add({...z})}update(z,se){return this.invFinishedProductsRef.doc(z).update(se)}delete(z){return this.invFinishedProductsRef.doc(z).delete()}filterByNameBatch(z,se,pe){return this.db.collection(this.dbPath,pe?We=>We.where("name",">=",z).where("name","<=",z+"\uf8ff").orderBy("name","desc").startAfter(pe.name).limit(se):We=>We.where("name",">=",z).where("name","<=",z+"\uf8ff").orderBy("name","desc").limit(se))}filterByCodeBatch(z,se,pe){return this.db.collection(this.dbPath,pe?We=>We.where("code",">=",z).where("code","<=",z+"\uf8ff").orderBy("code","desc").startAfter(pe.code).limit(se):We=>We.where("code",">=",z).where("code","<=",z+"\uf8ff").orderBy("code","desc").limit(se))}}return Ee.\u0275fac=function(z){return new(z||Ee)(b.LFG(ne.ST))},Ee.\u0275prov=b.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function Te(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"div",2)(1,"h4"),b._uU(2,"Producto"),b.qZA(),b.TgZ(3,"form")(4,"div",3)(5,"input",4),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.name=pe)}),b.qZA(),b.TgZ(6,"label",5),b._uU(7,"Nombre"),b.qZA()(),b.TgZ(8,"div",3)(9,"input",6),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.code=pe)}),b.qZA(),b.TgZ(10,"label",7),b._uU(11,"Codigo"),b.qZA()(),b.TgZ(12,"div",3)(13,"input",8),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.description=pe)}),b.qZA(),b.TgZ(14,"label",9),b._uU(15,"Descripcion"),b.qZA()(),b.TgZ(16,"div",3)(17,"input",10),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.leadTime=pe)}),b.qZA(),b.TgZ(18,"label",11),b._uU(19,"Tiempo"),b.qZA()(),b.TgZ(20,"div",3)(21,"input",12),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.price=pe)}),b.qZA(),b.TgZ(22,"label",13),b._uU(23,"Precio"),b.qZA()(),b.TgZ(24,"div",14)(25,"input",15),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.capacityByTurn=pe)}),b.qZA(),b.TgZ(26,"label",16),b._uU(27,"Capacidad por turno"),b.qZA()(),b.TgZ(28,"div",14)(29,"input",17),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.income=pe)}),b.qZA(),b.TgZ(30,"label",18),b._uU(31,"Ingreso"),b.qZA()(),b.TgZ(32,"div",14)(33,"input",19),b.NdJ("ngModelChange",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.currentProduct.stock=pe)}),b.qZA(),b.TgZ(34,"label",20),b._uU(35,"Cantidad en Inventario"),b.qZA()()(),b.TgZ(36,"button",21),b.NdJ("click",function(){b.CHM(z);const pe=b.oxw();return b.KtG(pe.deleteProduct())}),b._uU(37," Eliminar "),b.qZA(),b.TgZ(38,"button",22),b.NdJ("click",function(){b.CHM(z);const pe=b.oxw();return b.KtG(pe.updateProduct())}),b._uU(39," Editar "),b.qZA(),b.TgZ(40,"button",23),b.NdJ("click",function(){b.CHM(z);const pe=b.oxw();return b.KtG(pe.updateProduct())}),b._uU(41," Materiales "),b.qZA(),b.TgZ(42,"p"),b._uU(43),b.qZA()()}if(2&Ee){const z=b.oxw();b.xp6(5),b.Q6J("ngModel",z.currentProduct.name),b.xp6(4),b.Q6J("ngModel",z.currentProduct.code),b.xp6(4),b.Q6J("ngModel",z.currentProduct.description),b.xp6(4),b.Q6J("ngModel",z.currentProduct.leadTime),b.xp6(4),b.Q6J("ngModel",z.currentProduct.price),b.xp6(4),b.Q6J("ngModel",z.currentProduct.capacityByTurn),b.xp6(4),b.Q6J("ngModel",z.income),b.xp6(4),b.Q6J("ngModel",z.currentProduct.stock),b.xp6(7),b.Q6J("state",z.currentProduct),b.xp6(3),b.Oqu(z.message)}}function at(Ee,ie){1&Ee&&(b.TgZ(0,"div"),b._UZ(1,"br"),b.TgZ(2,"p"),b._uU(3,"No fue posible acceder a este producto..."),b.qZA()())}let qe=(()=>{class Ee{constructor(z,se){this.productService=z,this.reportService=se,this.refreshList=new b.vpe,this.currentProduct={name:"",description:"",code:"",price:0,leadTime:0,stock:0,capacityByTurn:0},this.message="",this.income=0,this.outflow=0}ngOnInit(){this.message=""}ngOnChanges(){this.message="",this.currentProduct={...this.product}}createInventoryReport(){if(!this.income)return;const z={product_id:this.currentProduct.id,name:this.currentProduct.name,income:this.income,outcome:this.outflow,timestamp:le.EK.fromDate(new Date)};this.reportService.create(z)}updateProduct(){const z={name:this.currentProduct.name,code:this.currentProduct.code,description:this.currentProduct.description,price:this.currentProduct.price,leadTime:this.currentProduct.leadTime,stock:this.currentProduct.stock?this.currentProduct.stock+this.income:this.income,capacityByTurn:this.currentProduct.capacityByTurn};this.currentProduct.id&&this.productService.update(this.currentProduct.id,z).then(()=>{this.refreshList.emit(),this.message="The product was updated successfully!",this.currentProduct.stock=z.stock}).catch(se=>console.log(se))}deleteProduct(){this.currentProduct.id&&this.productService.delete(this.currentProduct.id).then(()=>{this.refreshList.emit(),this.message="The product was deleted successfully!"}).catch(z=>console.log(z))}}return Ee.\u0275fac=function(z){return new(z||Ee)(b.Y36(ae.M),b.Y36(ue))},Ee.\u0275cmp=b.Xpm({type:Ee,selectors:[["app-product-details"]],inputs:{product:"product"},outputs:{refreshList:"refreshList"},features:[b.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-floating","mb-2"],["type","text","id","name","required","","name","name","placeholder","Nombre","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","name"],["type","text","id","code","required","","name","code","placeholder","Codigo","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","code"],["id","description","required","","placeholder","description","name","description","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","leadTime","required","","placeholder","description","name","leadTime","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","leadTime"],["id","price","required","","placeholder","description","name","price","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","price"],[1,"form-floating","mb-3"],["id","capacityByTurn","required","","placeholder","description","name","capacityByTurn","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","capacityByTurn"],["id","income","required","","placeholder","description","name","income","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","income"],["id","stock","required","","placeholder","description","name","stock","type","number","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","stock"],[1,"btn","btn-danger","rounded-pill",3,"click"],["type","submit",1,"btn","btn-success","rounded-pill","mx-2",3,"click"],["routerLink","material",1,"btn","btn-secondary","rounded-pill",3,"state","click"]],template:function(z,se){1&z&&(b.YNc(0,Te,44,10,"div",0),b.YNc(1,at,4,0,"div",1)),2&z&&(b.Q6J("ngIf",se.currentProduct),b.xp6(1),b.Q6J("ngIf",!se.currentProduct))},dependencies:[d.O5,U.rH,A._Y,A.Fj,A.wV,A.JJ,A.JL,A.Q7,A.On,A.F]}),Ee})();function Ke(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"li",27),b.NdJ("click",function(){const pe=b.CHM(z),We=pe.$implicit,Ot=pe.index,Xt=b.oxw();return b.KtG(Xt.setActiveProduct(We,Ot))}),b._uU(1),b.qZA()}if(2&Ee){const z=ie.$implicit,se=ie.index,pe=b.oxw();b.ekj("active",se==pe.currentIndex),b.xp6(1),b.AsE(" ",z.name," - ",z.code," ")}}function ot(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"div")(1,"app-product-details",28),b.NdJ("refreshList",function(){b.CHM(z);const pe=b.oxw();return b.KtG(pe.refreshList())}),b.qZA()()}if(2&Ee){const z=b.oxw();b.xp6(1),b.Q6J("product",z.currentProduct)}}function je(Ee,ie){1&Ee&&(b.TgZ(0,"div"),b._UZ(1,"br"),b.TgZ(2,"p"),b._uU(3,"Seleccione un producto..."),b.qZA()())}let $e=(()=>{class Ee{constructor(z,se){var pe=this;this.ProductService=z,this.fos=se,this.currentIndex=-1,this.title="",this.query="",this.queryChange=void 0,this.codeFilter=!1,this.productsPerCall=2,this.disableNext=!1,this.disablePrev=!1,this.lastInResponses=[],this.data=function(){var We=(0,j.Z)(function*(Ot){const Xt=yield pe.fos.nextPage(Ot);!Xt||(pe.pagination=Xt,pe.Products=pe.pagination.requestDataArray,pe.disableNext=pe.pagination.disableNext,pe.disablePrev=pe.pagination.disablePrev,console.log(pe.Products))});return function(Ot){return We.apply(this,arguments)}}(),this.pagination={query:void 0,filterType:!1,filterKey:"",productsPerCall:2,disableNext:!1,disablePrev:!0,lastInResponses:[],requestDataArray:[]}}ngOnInit(){this.fos.paginationSetter(this.pagination),this.nextPage(!0)}refreshList(){this.currentProduct=void 0,this.currentIndex=-1;var z=this.lastInResponses.splice(0,this.lastInResponses.length);this.nextPage(!0),console.log(this.lastInResponses,z)}nextPage(z){var se;if(z){if(this.disableNext)return;this.Products?.length&&this.pagination.lastInResponses?.push(this.Products[this.Products.length-1]),se=this.pagination.lastInResponses?.length?this.pagination.lastInResponses[this.pagination.lastInResponses?.length-1]:void 0}else{if(this.disablePrev)return;this.pagination.lastInResponses?.pop(),se=this.pagination.lastInResponses?.pop()}(this.pagination.query?this.fos.filterByKeyBatch(this.pagination.filterKey,this.pagination.query,this.pagination.productsPerCall,se):this.fos.getNextBatch(this.pagination.productsPerCall,se)).snapshotChanges().pipe((0,m.U)(We=>We.map(Ot=>({id:Ot.payload.doc.id,...Ot.payload.doc.data()})))).subscribe(We=>{if(!We.length)return this.disableNext=!0,void this.pagination.lastInResponses.pop();this.Products=We,this.disableNext=We.length<this.productsPerCall,this.disablePrev=!se})}filterProducts(){this.Products=[],this.lastInResponses=[],this.disableNext=!1,this.disablePrev=!0,this.pagination={query:this.query,filterKey:this.codeFilter?"code":"name",productsPerCall:2,disableNext:!1,disablePrev:!0,lastInResponses:[],requestDataArray:[]},this.nextPage(!0)}setActiveProduct(z,se){this.currentProduct=z,this.currentIndex=se}readableDate(z){var se=new Date(z);return se.getDate()+"/"+se.getMonth()+"/"+se.getFullYear()}}return Ee.\u0275fac=function(z){return new(z||Ee)(b.Y36(ae.M),b.Y36(de.U))},Ee.\u0275cmp=b.Xpm({type:Ee,selectors:[["app-product-list"]],features:[b._Bn([de.U,{provide:"path",useValue:"/products"}])],decls:40,vars:5,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],[1,"ms-5","form-check"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault","name","codeFilter",1,"form-check-input",3,"ngModel","ngModelChange"],["id","query","type","search","name","query","placeholder","Buscar por Nombre o Codigo","aria-label","Search",1,"form-control","ms-2","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"position-fixed","bottom-0","end-0",2,"margin","6rem","z-index","1070"],["routerLink","add",1,"btn","btn-success","btn-lg","rounded-pill"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","4vh","height","4vh","viewBox","0 0 47 47",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141 c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27 c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435 c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],["aria-label","Page navigation",1,"mt-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],[1,"list-group-item",3,"click"],[3,"product","refreshList"]],template:function(z,se){1&z&&(b.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),b._uU(3,"Lista de Productos"),b.qZA(),b.TgZ(4,"div",3)(5,"label",4),b._uU(6," Filtro por Codigo "),b.qZA(),b.TgZ(7,"input",5),b.NdJ("ngModelChange",function(We){return se.codeFilter=We}),b.qZA()(),b.TgZ(8,"input",6),b.NdJ("ngModelChange",function(We){return se.query=We}),b.qZA(),b.TgZ(9,"button",7),b.NdJ("click",function(){return se.filterProducts()}),b._uU(10,"Buscar"),b.qZA()(),b._UZ(11,"hr"),b.TgZ(12,"div",8)(13,"button",9),b.O4$(),b.TgZ(14,"svg",10),b._UZ(15,"g",11)(16,"g",12),b.TgZ(17,"g",13)(18,"g"),b._UZ(19,"path",14),b.qZA()()()()(),b.kcU(),b.TgZ(20,"div",15)(21,"div",16)(22,"ul",17),b.YNc(23,Ke,2,4,"li",18),b.qZA()(),b.TgZ(24,"div",16),b.YNc(25,ot,2,1,"div",19),b.YNc(26,je,4,0,"div",19),b.qZA()(),b.TgZ(27,"nav",20)(28,"ul",21)(29,"li",22)(30,"button",23),b.NdJ("click",function(){return se.nextPage(!1)}),b.TgZ(31,"span",24),b._uU(32,"\xab"),b.qZA()()(),b.TgZ(33,"li",22)(34,"span",25),b._uU(35," Anterior/Siguiente Registro"),b.qZA()(),b.TgZ(36,"li",22)(37,"button",26),b.NdJ("click",function(){return se.nextPage(!0)}),b.TgZ(38,"span",24),b._uU(39,"\xbb"),b.qZA()()()()()()),2&z&&(b.xp6(7),b.Q6J("ngModel",se.codeFilter),b.xp6(1),b.Q6J("ngModel",se.query),b.xp6(15),b.Q6J("ngForOf",se.Products),b.xp6(2),b.Q6J("ngIf",se.currentProduct),b.xp6(1),b.Q6J("ngIf",!se.currentProduct))},dependencies:[d.sg,d.O5,U.rH,A._Y,A.Fj,A.Wl,A.JJ,A.JL,A.On,A.F,qe]}),Ee})();class Et{}var mt=N(4985),Ce=N(798),ut=N(4245);function st(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"div")(1,"div",4)(2,"div",5)(3,"app-form",6),b.NdJ("formModel",function(pe){b.CHM(z);const We=b.oxw();return b.KtG(We.submit(pe))}),b.qZA()()()()}if(2&Ee){const z=b.oxw();b.xp6(3),b.Q6J("formObj",z.formObj)}}function It(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"div",7)(1,"h4"),b._uU(2,"El producto a sido registrado Satisfactoriamente!"),b.qZA(),b.TgZ(3,"button",8),b.NdJ("click",function(){b.CHM(z);const pe=b.oxw();return b.KtG(pe.newProduct())}),b._uU(4,"A\xf1adir Otro"),b.qZA()()}}let vt=(()=>{class Ee{constructor(z,se,pe){this.ProductService=z,this.auditService=se,this.fos=pe,this.product=new Et,this.submitted=!1,this.round=Ot=>Math.round(100*Ot)/100;var We=new mt.O("Capacidad por turno","capacityByTurn","number");this.formObj=[[new mt.O("Nombre","name","text"),new mt.O("Codigo","code","text")],[new mt.O("Descripcion","description","text")],[new mt.O("Precio","price","number")],[new mt.O("Cantidad en Inventario","stock","number")],[We,new mt.O("Tiempo de Produccion","leadTime","number","",Ot=>Ot?this.round(1/Ot):0,[We],0)]]}submit(z){this.product=z,this.saveProduct()}saveProduct(){this.product.timestamp=le.EK.fromDate(new Date),this.fos.create(this.product).then(()=>{this.submitted=!0})}newProduct(){this.submitted=!1,this.product=new Et}}return Ee.\u0275fac=function(z){return new(z||Ee)(b.Y36(ae.M),b.Y36(Ce.C),b.Y36(de.U))},Ee.\u0275cmp=b.Xpm({type:Ee,selectors:[["app-add-product"]],features:[b._Bn([de.U,{provide:"path",useValue:"/products"}])],decls:6,vars:2,consts:[[1,"container","vh-100"],[1,"text-muted","mt-5"],[4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"card","mt-4","bg-light","shadow-lg","border-0"],[1,"card-body"],["btnMes","Crear Producto","modalMessage","\xbfDesea continuar con la creacion del producto?",3,"formObj","formModel"],[1,"mt-3"],[1,"btn","btn-outline-success","mt-2",3,"click"]],template:function(z,se){1&z&&(b.TgZ(0,"div",0)(1,"h5",1),b._uU(2," Registro del Producto"),b.qZA(),b._UZ(3,"hr"),b.YNc(4,st,4,1,"div",2),b.YNc(5,It,5,0,"div",3),b.qZA()),2&z&&(b.xp6(4),b.Q6J("ngIf",!se.submitted),b.xp6(1),b.Q6J("ngIf",se.submitted))},dependencies:[d.O5,ut.U]}),Ee})();var we=N(3985);let _t=(()=>{class Ee{constructor(z){this.db=z,this.dbPath="/bom",this.bomRef=z.collection(this.dbPath)}getNextBatch(z,se){return this.db.collection(this.dbPath,se?pe=>pe.orderBy("timestamp","desc").startAfter(se).limit(z):pe=>pe.orderBy("timestamp","desc").limit(z))}getPrevBatch(z,se,pe){return this.db.collection(this.dbPath,We=>We.orderBy("timestamp","desc").startAt(se).endBefore(pe).limit(z))}getBatch(z){return this.db.collection(this.dbPath,se=>se.limit(z).orderBy("timestamp","desc"))}getAll(){return this.bomRef}getById(z){return this.db.collection(this.dbPath,se=>se.where("product_id","==",z))}create(z){return this.bomRef.add({...z})}update(z,se){return this.bomRef.doc(z).update(se)}delete(z){return this.bomRef.doc(z).delete()}filterByName(z){return this.db.collection(this.dbPath,se=>se.where("name",">=",z).where("name","<=",z+"\uf8ff"))}filterByCode(z){return this.db.collection(this.dbPath,se=>se.where("code",">=",z).where("code","<=",z+"\uf8ff"))}filterByCodeBatch(z,se,pe){return this.db.collection(this.dbPath,pe?We=>We.where("code",">=",z).where("code","<=",z+"\uf8ff").orderBy("code","desc").startAfter(pe.code).limit(se):We=>We.where("code",">=",z).where("code","<=",z+"\uf8ff").orderBy("code","desc").limit(se))}filterByNameBatch(z,se,pe){return this.db.collection(this.dbPath,pe?We=>We.where("name",">=",z).where("name","<=",z+"\uf8ff").orderBy("name","desc").startAfter(pe.name).limit(se):We=>We.where("name",">=",z).where("name","<=",z+"\uf8ff").orderBy("name","desc").limit(se))}}return Ee.\u0275fac=function(z){return new(z||Ee)(b.LFG(ne.ST))},Ee.\u0275prov=b.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function xe(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"li",21),b.NdJ("click",function(){const pe=b.CHM(z),We=pe.$implicit,Ot=pe.index,Xt=b.oxw();return b.KtG(Xt.setActiveMaterial(We,Ot))}),b._uU(1),b.TgZ(2,"button",22),b.NdJ("click",function(){const We=b.CHM(z).$implicit,Ot=b.oxw();return b.KtG(Ot.addMaterialToProduct(We))}),b.TgZ(3,"span"),b.O4$(),b.TgZ(4,"svg",23),b._UZ(5,"g",24)(6,"g",25),b.TgZ(7,"g",26)(8,"g")(9,"g"),b._UZ(10,"path",27),b.qZA()()()()()()()}if(2&Ee){const z=ie.$implicit,se=ie.index,pe=b.oxw();b.ekj("active",se==pe.currentIndex),b.xp6(1),b.hij(" ",z.name," ")}}function Ae(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"li",32)(1,"div",33)(2,"div",34),b._uU(3),b.qZA(),b.TgZ(4,"div",35)(5,"input",36),b.NdJ("ngModelChange",function(pe){const Ot=b.CHM(z).$implicit;return b.KtG(Ot.quantity=pe)}),b.qZA(),b.TgZ(6,"span",37),b._uU(7,"U"),b.qZA()(),b.TgZ(8,"button",38),b.NdJ("click",function(){const We=b.CHM(z).index,Ot=b.oxw(2);return b.KtG(Ot.removeMaterialToProduct(We))}),b.qZA()()()}if(2&Ee){const z=ie.$implicit;b.xp6(3),b.hij(" ",z.name," "),b.xp6(2),b.Q6J("ngModel",z.quantity)}}function Ze(Ee,ie){if(1&Ee){const z=b.EpF();b.TgZ(0,"div",28)(1,"h4"),b._uU(2,"Producto"),b.qZA(),b.TgZ(3,"h3",29),b._uU(4),b.qZA(),b.TgZ(5,"p"),b._uU(6,"Materiales del Producto: "),b.qZA(),b.TgZ(7,"ul",10),b.YNc(8,Ae,9,2,"li",30),b.qZA(),b.TgZ(9,"button",31),b.NdJ("click",function(){b.CHM(z);const pe=b.oxw();return b.KtG(pe.editMaterials())}),b._uU(10," Agregar Matriales "),b.qZA()()}if(2&Ee){const z=b.oxw();b.xp6(4),b.AsE("",z.product.name," - ",z.product.code,""),b.xp6(4),b.Q6J("ngForOf",z.productMaterials)}}function Le(Ee,ie){1&Ee&&(b.TgZ(0,"div"),b._UZ(1,"br"),b.TgZ(2,"p"),b._uU(3,"No fue posible acceder a este producto..."),b.qZA()())}function Ut(Ee,ie){1&Ee&&(b.TgZ(0,"div"),b._UZ(1,"br"),b.TgZ(2,"p"),b._uU(3,"Seleccione un producto..."),b.qZA()())}const Oe=[{path:"",component:$e},{path:"add",component:vt},{path:"material",component:(()=>{class Ee{constructor(z,se,pe,We){this.MaterialService=z,this.bomService=se,this.productService=pe,this.router=We,this.rL=new b.vpe,this.currentIndex=-1,this.title="",this.query="",this.queryChange=void 0,this.areaFilter="",this.id="",this.productsPerCall=2,this.lastInResponses=[],this.disableNext=!1,this.disablePrev=!0,this.updateMaterials=!1,this.productMaterials=[]}ngOnInit(){this.product=history.state,this.getProductMaterials(),this.nextPage(!0)}getProductMaterials(){!this.product?.id||this.productService.getById(this.product?.id).pipe((0,m.U)(z=>({id:z.id,prod:z.data()}))).subscribe(z=>{!z||(console.log(z,z.prod,z.id),this.product=z.prod,this.product.id=z.id,this.productMaterials=z.prod?.productMaterials?z.prod?.productMaterials:[])})}nextPage(z){var se,pe;if(console.log(this.disablePrev),z){if(this.disableNext)return;this.Materials?.length&&this.lastInResponses?.push(this.Materials[this.Materials.length-1]),se=this.lastInResponses?.length?this.lastInResponses[this.lastInResponses?.length-1]:void 0}else{if(this.disablePrev)return;this.lastInResponses?.pop(),se=this.lastInResponses?.pop()}console.log("Info:",se,this.lastInResponses,this.queryChange),this.queryChange?this.areaFilter?pe=this.MaterialService.filterByAreaBatch(this.queryChange,this.productsPerCall,se):(console.log(this.queryChange),pe=this.MaterialService.filterByNameBatch(this.queryChange,this.productsPerCall,se)):pe=this.MaterialService.getNextBatch(this.productsPerCall,se),pe.snapshotChanges().pipe((0,m.U)(We=>We.map(Ot=>({id:Ot.payload.doc.id,...Ot.payload.doc.data()})))).subscribe(We=>{We.length?(console.log(We),this.Materials=We,this.disableNext=We.length<this.productsPerCall,this.disablePrev=!se):this.disableNext=!0},We=>{this.disableNext=!1})}refreshList(){this.currentMaterial=void 0,this.currentIndex=-1,this.retrieveMaterials()}retrieveMaterials(){this.MaterialService.getAll().snapshotChanges().pipe((0,m.U)(z=>z.map(se=>({id:se.payload.doc.id,...se.payload.doc.data()})))).subscribe(z=>{this.Materials=z})}filterMaterials(){this.queryChange=this.query,this.Materials=[],this.lastInResponses=[],this.nextPage(!0)}setActiveMaterial(z,se){this.currentMaterial=z,this.currentIndex=se}addMaterialToProduct(z){this.productMaterials.find(pe=>pe.id==z.id)||this.productMaterials.push({name:z.name,id:z.id,deliveryTime:z.deliveryTime,minBatch:z.minBatch})}removeMaterialToProduct(z){this.productMaterials.splice(z,1)}getMaterialWaitMaxTime(){return Math.max(...this.productMaterials.map(z=>z.deliveryTime))}editMaterials(){if(this.product&&this.productMaterials){var z={MaxWaitTime:this.getMaterialWaitMaxTime(),materials:this.productMaterials.map(se=>({id:se.id,name:se.name,quantity:se.quantity,minBatch:se.minBatch}))};this.productService.update(this.product?.id,z).then(()=>{alert("Materiales Actualizados Satisfactoriamente"),this.router.navigate(["products"])})}}}return Ee.\u0275fac=function(z){return new(z||Ee)(b.Y36(we.U),b.Y36(_t),b.Y36(ae.M),b.Y36(U.F0))},Ee.\u0275cmp=b.Xpm({type:Ee,selectors:[["app-product-materials"]],inputs:{product:"product"},outputs:{rL:"rL"},decls:33,vars:6,consts:[[1,"container","mt-5","vh-100"],["role","search",1,"d-flex"],[1,"text-muted","text-nowrap"],[1,"ms-5","form-check"],["for","flexCheckDefault",1,"form-check-label"],["type","checkbox","id","flexCheckDefault","name","areaFilter",1,"form-check-input",3,"ngModel","ngModelChange"],["type","search","name","query","placeholder","Buscar por Nombre o Area","aria-label","Search",1,"form-control","ms-2","me-2","float-end",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-success","float-end",3,"click"],[1,"list","row","shadow-sm"],[1,"col-md-6"],[1,"list-group","mt-3","mb-3"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],["class","edit-form",4,"ngIf"],[4,"ngIf"],["aria-label","Page navigation",1,"mt-3"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],[1,"page-link","text-black"],["aria-label","Next",1,"page-link",3,"click"],[1,"list-group-item",3,"click"],[1,"btn","btn-success","btn-sm","rounded-pill","float-end",3,"click"],["fill","#ffffff","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","20px","height","20px","viewBox","0 0 533.973 533.973",0,"xml","space","preserve"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M477.931,52.261c-12.821-12.821-33.605-12.821-46.427,0l-266.96,266.954l-62.075-62.069 c-12.821-12.821-33.604-12.821-46.426,0L9.616,303.572c-12.821,12.821-12.821,33.604,0,46.426l85.289,85.289l46.426,46.426 c12.821,12.821,33.611,12.821,46.426,0l46.426-46.426l290.173-290.174c12.821-12.821,12.821-33.605,0-46.426L477.931,52.261z"],[1,"edit-form"],[1,"text-muted"],["class","list-group-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","mb-2","rounded-pill",3,"click"],[1,"list-group-item"],[1,"d-flex","flex-row","justify-content-between"],[1,"my-auto"],[1,"input-group","mx-auto","h-25","w-50"],["type","number","placeholder","Unidades por Producto","name","UP","aria-label","quantity",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"input-group-text"],[1,"btn-close","my-auto","btn-sm","rounded-pill","float-end",3,"click"]],template:function(z,se){1&z&&(b.TgZ(0,"div",0)(1,"form",1)(2,"h4",2),b._uU(3,"Lista de Materiales del Producto"),b.qZA(),b.TgZ(4,"div",3)(5,"label",4),b._uU(6," Filtro por Area "),b.qZA(),b.TgZ(7,"input",5),b.NdJ("ngModelChange",function(We){return se.areaFilter=We}),b.qZA()(),b.TgZ(8,"input",6),b.NdJ("ngModelChange",function(We){return se.query=We}),b.qZA(),b.TgZ(9,"button",7),b.NdJ("click",function(){return se.filterMaterials()}),b._uU(10,"Buscar"),b.qZA()(),b._UZ(11,"hr"),b.TgZ(12,"div",8)(13,"div",9)(14,"ul",10),b.YNc(15,xe,11,3,"li",11),b.qZA()(),b.TgZ(16,"div",9),b.YNc(17,Ze,11,3,"div",12),b.YNc(18,Le,4,0,"div",13),b.YNc(19,Ut,4,0,"div",13),b.qZA()(),b.TgZ(20,"nav",14)(21,"ul",15)(22,"li",16)(23,"button",17),b.NdJ("click",function(){return se.nextPage(!1)}),b.TgZ(24,"span",18),b._uU(25,"\xab"),b.qZA()()(),b.TgZ(26,"li",16)(27,"span",19),b._uU(28," Anterior/Siguiente Registro"),b.qZA()(),b.TgZ(29,"li",16)(30,"button",20),b.NdJ("click",function(){return se.nextPage(!0)}),b.TgZ(31,"span",18),b._uU(32,"\xbb"),b.qZA()()()()()()),2&z&&(b.xp6(7),b.Q6J("ngModel",se.areaFilter),b.xp6(1),b.Q6J("ngModel",se.query),b.xp6(7),b.Q6J("ngForOf",se.Materials),b.xp6(2),b.Q6J("ngIf",se.product),b.xp6(1),b.Q6J("ngIf",!se.product),b.xp6(1),b.Q6J("ngIf",!se.product))},dependencies:[d.sg,d.O5,A._Y,A.Fj,A.wV,A.Wl,A.JJ,A.JL,A.On,A.F]}),Ee})()}];let Ye=(()=>{class Ee{}return Ee.\u0275fac=function(z){return new(z||Ee)},Ee.\u0275mod=b.oAB({type:Ee}),Ee.\u0275inj=b.cJS({imports:[U.Bz.forChild(Oe),U.Bz]}),Ee})();var Je=N(4466);let Me=(()=>{class Ee{}return Ee.\u0275fac=function(z){return new(z||Ee)},Ee.\u0275mod=b.oAB({type:Ee}),Ee.\u0275inj=b.cJS({imports:[d.ez,Ye,A.u5,Je.m]}),Ee})()},798:(Lt,ze,N)=>{N.d(ze,{C:()=>m});var d=N(8179),U=N(4650),j=N(33);let m=(()=>{class de{constructor(ae){this.db=ae,this.dbPath="/audit",this.objectsRef=ae.collection(this.dbPath)}getNextBatch(ae,A){return this.db.collection(this.dbPath,A?le=>le.orderBy("timestamp","desc").startAfter(A.timestamp).limit(ae):le=>le.orderBy("timestamp","desc").limit(ae))}create(ae,A,le){var ne={operation:ae,process:A,timestamp:d.EK.fromDate(new Date),user:le};return console.log(ne),this.objectsRef.add({...ne})}update(ae,A){return this.objectsRef.doc(ae).update(A)}delete(ae){return this.objectsRef.doc(ae).delete()}filterByDateBatch(ae,A,le,ne,ue){return console.log(le),this.db.collection(this.dbPath,Te=>Te.where("timestamp",">=",ae).where("timestamp","<=",A).where("name","==",le).orderBy("timestamp","desc").limit(ne))}filterByNameBatch(ae,A,le){return this.db.collection(this.dbPath,le?ne=>ne.where("name",">=",ae).where("name","<=",ae+"\uf8ff").orderBy("name","desc").startAfter(le.name).limit(A):ne=>ne.where("name",">=",ae).where("name","<=",ae+"\uf8ff").orderBy("name","desc").limit(A))}filterByCodeBatch(ae,A,le){return this.db.collection(this.dbPath,le?ne=>ne.where("code",">=",ae).where("code","<=",ae+"\uf8ff").orderBy("code","desc").startAfter(le.code).limit(A):ne=>ne.where("code",">=",ae).where("code","<=",ae+"\uf8ff").orderBy("code","desc").limit(A))}}return de.\u0275fac=function(ae){return new(ae||de)(U.LFG(j.ST))},de.\u0275prov=U.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})()},3651:(Lt,ze,N)=>{N.d(ze,{e:()=>ot});var d=N(5861),U=N(1389),ae=(N(2090),N(6881),N(1877),N(4859),N(3900)),A=N(9646),le=N(5698),ne=N(4004),ue=N(8505),Te=N(4650),at=N(1205),qe=N(33),Ke=N(9051);let ot=(()=>{class je{constructor(Et,mt,Ce,ut){this.afAuth=Et,this.afs=mt,this.router=Ce,this.ngZone=ut,this.user$=this.afAuth.authState.pipe((0,ae.w)(st=>st?this.afs.doc(`users/${st.uid}`).valueChanges():(0,A.of)(null)))}isLoggedIn(){var Et=!1;return this.user$.pipe((0,le.q)(1),(0,ne.U)(mt=>!!mt),(0,ue.b)(mt=>{mt&&(Et=!0)})),Et}googleSignin(){var Et=this;return(0,d.Z)(function*(){const mt=yield Et.afAuth.signInWithPopup(new U.V);return mt.user&&Et.router.navigate(["/home"]),Et.updateUserData(mt.user)})()}GoogleAuth(){return this.AuthLogin(new U.V)}AuthLogin(Et){var mt=this;return(0,d.Z)(function*(){return mt.afAuth.signInWithPopup(Et).then(Ce=>{console.log("You have been successfully logged in!")}).catch(Ce=>{console.log(Ce)})})()}updateUserData(Et){return this.afs.doc(`users/${Et.uid}`).set({uid:Et.uid,email:Et.email,displayName:Et.displayName},{merge:!0})}signOut(){var Et=this;return(0,d.Z)(function*(){yield Et.afAuth.signOut(),Et.router.navigate(["/login"])})()}}return je.\u0275fac=function(Et){return new(Et||je)(Te.LFG(at.zQ),Te.LFG(qe.ST),Te.LFG(Ke.F0),Te.LFG(Te.R0b))},je.\u0275prov=Te.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"}),je})()},2425:(Lt,ze,N)=>{N.d(ze,{y:()=>j});var d=N(4650),U=N(33);let j=(()=>{class m{constructor(b){this.db=b,this.dbPath="/clients",this.clientsRef=b.collection(this.dbPath)}getAll(){return this.clientsRef}getById(b){return this.clientsRef.doc(b).get()}getNextBatch(b,ae){return this.db.collection(this.dbPath,ae?A=>A.orderBy("timestamp","desc").startAfter(ae.timestamp).limit(b):A=>A.orderBy("timestamp","desc").limit(b))}create(b){return this.clientsRef.add({...b})}update(b,ae){return this.clientsRef.doc(b).update(ae)}delete(b){return this.clientsRef.doc(b).delete()}filterByName(b){return this.db.collection(this.dbPath,ae=>ae.where("name",">=",b).where("name","<=",b+"\uf8ff"))}filterByCode(b){return this.db.collection(this.dbPath,ae=>ae.where("code",">=",b).where("code","<=",b+"\uf8ff"))}filterByCodeBatch(){}filterByNameBatch(){}}return m.\u0275fac=function(b){return new(b||m)(d.LFG(U.ST))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6535:(Lt,ze,N)=>{N.d(ze,{U:()=>de});var d=N(5861),U=N(4004),j=N(4650),m=N(33);let de=(()=>{class b{constructor(A,le){this.db=A,this.path=le,this.objectRef=A.collection(this.path),this.pagination={query:void 0,filterType:!1,filterKey:"",productsPerCall:2,disableNext:!1,disablePrev:!0,lastInResponses:[],requestDataArray:[]}}pathSetter(A){this.path=A,this.objectRef=this.db.collection(this.path)}paginationSetter(A){return this.pagination=A,this}paginationGetter(){return this.pagination}nextPage(A){var le=this;return(0,d.Z)(function*(){var ne,ue;if(console.log(le.pagination.disablePrev),A){if(le.pagination.disableNext)return;le.pagination.requestDataArray.length&&le.pagination.lastInResponses?.push(le.pagination.requestDataArray[le.pagination.requestDataArray.length-1]),ne=le.pagination.lastInResponses?.length?le.pagination.lastInResponses[le.pagination.lastInResponses?.length-1]:void 0,console.log(ne)}else{if(le.pagination.disablePrev)return;le.pagination.lastInResponses?.pop(),ne=le.pagination.lastInResponses?.pop()}return console.log("Info:",ne,le.pagination.lastInResponses,le.pagination.productsPerCall,le.pagination.query),ue=le.pagination.query?le.filterByNameBatch(le.pagination.query,le.pagination.productsPerCall,ne):le.getNextBatch(le.pagination.productsPerCall,ne),new Promise(Te=>{ue.snapshotChanges().pipe((0,U.U)(at=>at.map(qe=>({id:qe.payload.doc.id,...qe.payload.doc.data()})))).subscribe({next:at=>{if(!at.length)return le.pagination.disableNext=!0,void le.pagination.lastInResponses.pop();console.log(at),le.pagination.requestDataArray=at,le.pagination.disableNext=at.length<le.pagination.productsPerCall,le.pagination.disablePrev=!ne,Te(le.pagination)},error:at=>{le.pagination.disableNext=!1}})})})()}getNextBatch(A,le){return this.db.collection(this.path,le?ne=>ne.orderBy("timestamp","desc").startAfter(le.timestamp).limit(A):ne=>ne.orderBy("timestamp","desc").limit(A))}getAll(){return this.objectRef}getByKey(A,le){return this.db.collection(this.path,ne=>ne.where(A,"==",le))}create(A){return this.objectRef.add({...A})}update(A,le){return this.objectRef.doc(A).update(le)}delete(A){return this.objectRef.doc(A).delete()}filterByNameBatch(A,le,ne){return ne?this.db.collection(this.path,ue=>ue.where("name",">=",A).where("name","<=",A+"\uf8ff").orderBy("name","desc").startAfter(ne.name).limit(le)):(this.pagination.lastInResponses=[],this.pagination.requestDataArray=[],this.pagination.disableNext=!1,this.pagination.disablePrev=!0,this.db.collection(this.path,ue=>ue.where("name",">=",A).where("name","<=",A+"\uf8ff").orderBy("name","desc").limit(le)))}filterByKeyBatch(A,le,ne,ue){return console.log(A,le),ue?(console.log(ue[A]),this.db.collection(this.path,Te=>Te.where(A,">=",le).where(A,"<=",le+"\uf8ff").orderBy(A,"desc").startAfter(ue[A]).limit(ne))):this.db.collection(this.path,Te=>Te.where(A,">=",le).where(A,"<=",le+"\uf8ff").orderBy(A,"desc").limit(ne))}}return b.\u0275fac=function(A){return new(A||b)(j.LFG(m.ST),j.LFG("path"))},b.\u0275prov=j.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},490:(Lt,ze,N)=>{N.d(ze,{y:()=>de});var d=N(5861),U=N(4004),j=N(4650),m=N(33);let de=(()=>{class b{constructor(A){this.db=A,this.dbPath="/RMreport",this.InvRawMaterialsRef=A.collection(this.dbPath)}getNextBatch(A,le){return this.db.collection(this.dbPath,le?ne=>ne.orderBy("timestamp","desc").startAfter(le.timestamp).limit(A):ne=>ne.orderBy("timestamp","desc").limit(A))}getAll(){return this.InvRawMaterialsRef}create(A){return this.InvRawMaterialsRef.add({...A})}update(A,le){return console.log("Update",A,le),this.InvRawMaterialsRef.doc(A).update(le)}delete(A){return this.InvRawMaterialsRef.doc(A).delete()}getStock(A){var le=this;return(0,d.Z)(function*(){if(!A)return{};var ne={};return new Promise(function(){var ue=(0,d.Z)(function*(Te){le.db.collection(le.dbPath,at=>at.where("materialId","==",A)).snapshotChanges().pipe((0,U.U)(at=>at.map(qe=>({id:qe.payload.doc.id,...qe.payload.doc.data()})))).subscribe(at=>{ne={id:at.at(0)?.id,available:at.at(0)?.available,wating:at.at(0)?.wating,watingCommited:at.at(0)?.watingCommited,commited:at.at(0)?.commited},Te(ne)})});return function(Te){return ue.apply(this,arguments)}}())})()}filterByDateBatch(A,le,ne,ue,Te){return console.log(ne),this.db.collection(this.dbPath,at=>at.where("timestamp",">=",A).where("timestamp","<=",le).where("name","==",ne).orderBy("timestamp","desc").limit(ue))}filterByNameBatch(A,le,ne){return this.db.collection(this.dbPath,ne?ue=>ue.where("name",">=",A).where("name","<=",A+"\uf8ff").orderBy("name","desc").startAfter(ne.name).limit(le):ue=>ue.where("name",">=",A).where("name","<=",A+"\uf8ff").orderBy("name","desc").limit(le))}filterByCodeBatch(A,le,ne){return this.db.collection(this.dbPath,ne?ue=>ue.where("code",">=",A).where("code","<=",A+"\uf8ff").orderBy("code","desc").startAfter(ne.code).limit(le):ue=>ue.where("code",">=",A).where("code","<=",A+"\uf8ff").orderBy("code","desc").limit(le))}}return b.\u0275fac=function(A){return new(A||b)(j.LFG(m.ST))},b.\u0275prov=j.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},3985:(Lt,ze,N)=>{N.d(ze,{U:()=>j});var d=N(4650),U=N(33);let j=(()=>{class m{constructor(b){this.db=b,this.dbPath="/materials",this.materialsRef=b.collection(this.dbPath)}getAll(){return this.materialsRef}getNextBatch(b,ae){return this.db.collection(this.dbPath,ae?A=>A.orderBy("timestamp","desc").startAfter(ae.timestamp).limit(b):A=>A.orderBy("timestamp","desc").limit(b))}create(b){return this.materialsRef.add({...b})}update(b,ae){if(b)return this.materialsRef.doc(b).update(ae)}delete(b){return this.materialsRef.doc(b).delete()}filterByNameBatchP(b,ae,A){return this.db.collection("/products",A?le=>le.where("name",">=",b).where("name","<=",b+"\uf8ff").orderBy("name","desc").startAfter(A.name).limit(ae):le=>le.where("name",">=",b).where("name","<=",b+"\uf8ff").orderBy("name","desc").limit(ae))}filterByNameBatch(b,ae,A){return this.db.collection(this.dbPath,A?le=>le.where("name",">=",b).where("name","<=",b+"\uf8ff").orderBy("name","desc").startAfter(A.name).limit(ae):le=>le.where("name",">=",b).where("name","<=",b+"\uf8ff").orderBy("name","desc").limit(ae))}filterByAreaBatch(b,ae,A){return this.db.collection(this.dbPath,A?le=>le.where("area",">=",b).where("area","<=",b+"\uf8ff").orderBy("area","desc").startAfter(A.area).limit(ae):le=>le.where("area",">=",b).where("area","<=",b+"\uf8ff").orderBy("area","desc").limit(ae))}filterByName(b){return this.db.collection(this.dbPath,ae=>ae.where("name",">=",b).where("name","<=",b+"\uf8ff"))}}return m.\u0275fac=function(b){return new(b||m)(d.LFG(U.ST))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6082:(Lt,ze,N)=>{N.d(ze,{M:()=>j});var d=N(4650),U=N(33);let j=(()=>{class m{constructor(b){this.db=b,this.dbPath="/products",this.productsRef=b.collection(this.dbPath)}getById(b){return this.productsRef.doc(b).get()}getNextBatch(b,ae){return this.db.collection(this.dbPath,ae?A=>A.orderBy("timestamp","desc").startAfter(ae.timestamp).limit(b):A=>A.orderBy("timestamp","desc").limit(b))}getPrevBatch(b,ae,A){return this.db.collection(this.dbPath,le=>le.orderBy("timestamp","desc").startAt(ae).endBefore(A).limit(b))}getBatch(b){return this.db.collection(this.dbPath,ae=>ae.limit(b).orderBy("timestamp","desc"))}getAll(){return this.productsRef}create(b){return this.productsRef.add({...b})}update(b,ae){return this.productsRef.doc(b).update(ae)}delete(b){return this.productsRef.doc(b).delete()}filterByNameBatch(b,ae,A){return this.db.collection(this.dbPath,A?le=>le.where("name",">=",b).where("name","<=",b+"\uf8ff").orderBy("name","desc").startAfter(A.name).limit(ae):le=>le.where("name",">=",b).where("name","<=",b+"\uf8ff").orderBy("name","desc").limit(ae))}filterByCodeBatch(b,ae,A){return this.db.collection(this.dbPath,A?le=>le.where("code",">=",b).where("code","<=",b+"\uf8ff").orderBy("code","desc").startAfter(A.code).limit(ae):le=>le.where("code",">=",b).where("code","<=",b+"\uf8ff").orderBy("code","desc").limit(ae))}filterByName(b){return this.db.collection(this.dbPath,ae=>ae.where("name",">=",b).where("name","<=",b+"\uf8ff"))}filterByCode(b){return this.db.collection(this.dbPath,ae=>ae.where("code",">=",b).where("code","<=",b+"\uf8ff"))}}return m.\u0275fac=function(b){return new(b||m)(d.LFG(U.ST))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5561:(Lt,ze,N)=>{N.d(ze,{l:()=>j});var d=N(4650),U=N(33);let j=(()=>{class m{constructor(b){this.db=b,this.dbPath="/shopOrder",this.InvRawMaterialsRef=b.collection(this.dbPath)}getNextBatch(b,ae){return this.db.collection(this.dbPath,ae?A=>A.orderBy("emissionDate","asc").startAfter(ae).limit(b):A=>A.orderBy("emissionDate","asc").limit(b))}create(b,ae,A,le,ne,ue){return this.InvRawMaterialsRef.add({materialId:b,name:ae,stockId:ue,requiredMaterial:A,requestedAmount:le,orderDeadline:ne,emissionDate:new Date,timestamp:new Date})}update(b,ae){return this.InvRawMaterialsRef.doc(b).update(ae)}delete(b){return this.InvRawMaterialsRef.doc(b).delete()}filterUrgentatch(b,ae,A){return this.db.collection(this.dbPath,A?le=>le.where("orderDeadline","<=",b).orderBy("orderDeadline","asc").startAfter(A.name).limit(ae):le=>le.where("orderDeadline","<=",b).orderBy("orderDeadline","asc").limit(ae))}}return m.\u0275fac=function(b){return new(b||m)(d.LFG(U.ST))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},4466:(Lt,ze,N)=>{N.d(ze,{m:()=>m});var d=N(6895),U=N(433),j=N(4650);let m=(()=>{class de{}return de.\u0275fac=function(ae){return new(ae||de)},de.\u0275mod=j.oAB({type:de}),de.\u0275inj=j.cJS({imports:[d.ez,U.u5,U.UX,U.u5]}),de})()},2955:(Lt,ze,N)=>{var d=N(1481),U=N(4650),j=N(9051),m=N(4985),de=N(4245);let b=(()=>{class xe{constructor(){this.formObj=[[new m.O("Nombre","fullname","text"),new m.O("Nombre de Usuario","username","text")],[new m.O("Correo Electronico","email","text")],[new m.O("Password","password","password"),new m.O("Confirmar Password","Confirm Password","password")]]}ngOnInit(){}submit(Ze){console.log(Ze)}}return xe.\u0275fac=function(Ze){return new(Ze||xe)},xe.\u0275cmp=U.Xpm({type:xe,selectors:[["app-home"]],decls:1,vars:1,consts:[[3,"formObj","formModel"]],template:function(Ze,Le){1&Ze&&(U.TgZ(0,"app-form",0),U.NdJ("formModel",function(Ve){return Le.submit(Ve)}),U.qZA()),2&Ze&&U.Q6J("formObj",Le.formObj)},dependencies:[de.U]}),xe})();var ae=N(5698),A=N(4004),le=N(8505),ne=N(3651);const at=[{path:"login",component:(()=>{class xe{constructor(Ze){this.authService=Ze}ngOnInit(){}authenticate(){this.authService.googleSignin()}}return xe.\u0275fac=function(Ze){return new(Ze||xe)(U.Y36(ne.e))},xe.\u0275cmp=U.Xpm({type:xe,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"d-flex","text-center","text-bg-dark","h-100",2,"background-image","url(assets/img/bg.png)"],[1,"d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"my-auto"],["type","button",1,"btn","btn-lg","btn-outline-light","fw-bold","border-white","rounded-pill",3,"click"],[1,"ms-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"]],template:function(Ze,Le){1&Ze&&(U.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),U._uU(4," IBM Furniture"),U.qZA(),U.TgZ(5,"button",3),U.NdJ("click",function(){return Le.authenticate()}),U._uU(6," Iniciar Sesion con Google "),U.TgZ(7,"span",4),U.O4$(),U.TgZ(8,"svg",5),U._UZ(9,"path",6),U.qZA()()()()()())}}),xe})()},{path:"home",component:b},{path:"clients",loadChildren:()=>Promise.resolve().then(N.bind(N,9783)).then(xe=>xe.ClientModule),canActivate:[(()=>{class xe{constructor(Ze,Le){this.auth=Ze,this.router=Le}canActivate(Ze,Le){return this.auth.user$.pipe((0,ae.q)(1),(0,A.U)(Ut=>!!Ut),(0,le.b)(Ut=>{Ut||(console.log("access denied"),this.router.navigate(["/login"]))}))}}return xe.\u0275fac=function(Ze){return new(Ze||xe)(U.LFG(ne.e),U.LFG(j.F0))},xe.\u0275prov=U.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})()]},{path:"materials",loadChildren:()=>Promise.resolve().then(N.bind(N,8783)).then(xe=>xe.MaterialModule)},{path:"products",loadChildren:()=>Promise.resolve().then(N.bind(N,22)).then(xe=>xe.ProductModule)},{path:"orders",loadChildren:()=>Promise.resolve().then(N.bind(N,6993)).then(xe=>xe.OrdersModule)},{path:"shop",loadChildren:()=>N.e(932).then(N.bind(N,2932)).then(xe=>xe.ShoppingModule)},{path:"history",loadChildren:()=>N.e(72).then(N.bind(N,2072)).then(xe=>xe.HistoryModule)}];let qe=(()=>{class xe{}return xe.\u0275fac=function(Ze){return new(Ze||xe)},xe.\u0275mod=U.oAB({type:xe}),xe.\u0275inj=U.cJS({imports:[j.Bz.forRoot(at),j.Bz]}),xe})();var Ke=N(8783),ot=N(22),je=N(9783),$e=N(6993),Et=N(4466),mt=N(2011),Ce=N(33),ut=N(6895);let st=(()=>{class xe{constructor(Ze){this.auth=Ze,this.signOut=()=>this.auth.signOut()}ngOnInit(){}}return xe.\u0275fac=function(Ze){return new(Ze||xe)(U.Y36(ne.e))},xe.\u0275cmp=U.Xpm({type:xe,selectors:[["app-navbar"]],decls:36,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["height","30","src","/assets/img/ibmFurniture_logo.png","alt","","srcset","",1,"rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["routerLink","products",1,"nav-link"],["routerLink","clients",1,"nav-link"],["routerLink","materials",1,"nav-link"],["routerLink","orders",1,"nav-link"],["routerLink","shop",1,"nav-link"],["routerLink","history",1,"nav-link"],[1,"navbar-nav"],[1,"fs-3","nav-link","me-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"]],template:function(Ze,Le){1&Ze&&(U.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),U._UZ(3,"img",3),U._uU(4," IBM Furniture "),U.qZA(),U.TgZ(5,"button",4),U._UZ(6,"span",5),U.qZA(),U.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),U._uU(11,"Inicio"),U.qZA()(),U.TgZ(12,"li",8)(13,"a",10),U._uU(14,"Productos"),U.qZA()(),U.TgZ(15,"li",8)(16,"a",11),U._uU(17,"Clientes"),U.qZA()(),U.TgZ(18,"li",8)(19,"a",12),U._uU(20,"Materiales"),U.qZA()(),U.TgZ(21,"li",8)(22,"a",13),U._uU(23,"Ordenes"),U.qZA()(),U.TgZ(24,"li",8)(25,"a",14),U._uU(26,"Compras"),U.qZA()(),U.TgZ(27,"li",8)(28,"a",15),U._uU(29,"Historial"),U.qZA()()(),U.TgZ(30,"ul",16)(31,"li",8)(32,"a",17),U.NdJ("click",function(){return Le.signOut()}),U.O4$(),U.TgZ(33,"svg",18),U._UZ(34,"path",19)(35,"path",20),U.qZA()()()()()()())},dependencies:[j.yS]}),xe})();function It(xe,Ae){1&xe&&U._UZ(0,"app-navbar")}let vt=(()=>{class xe{constructor(Ze){this.auth=Ze,this.title="IBMFurniture"}}return xe.\u0275fac=function(Ze){return new(Ze||xe)(U.Y36(ne.e))},xe.\u0275cmp=U.Xpm({type:xe,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"vh-100"]],template:function(Ze,Le){1&Ze&&(U.YNc(0,It,1,0,"app-navbar",0),U.ALo(1,"async"),U.TgZ(2,"div",1),U._UZ(3,"router-outlet"),U.qZA()),2&Ze&&U.Q6J("ngIf",U.lcZ(1,1,Le.auth.user$))},dependencies:[ut.O5,j.lC,st,ut.Ov]}),xe})();const we_firebase={apiKey:"AIzaSyCmya1htVh_wLXOc0zUSpurtnKYROqfSoU",authDomain:"ibmfurniture.firebaseapp.com",projectId:"ibmfurniture",storageBucket:"ibmfurniture.appspot.com",messagingSenderId:"313012116484",appId:"1:313012116484:web:1b535bfdb657c90b742951"};let _t=(()=>{class xe{}return xe.\u0275fac=function(Ze){return new(Ze||xe)},xe.\u0275mod=U.oAB({type:xe,bootstrap:[vt]}),xe.\u0275inj=U.cJS({imports:[d.b2,qe,mt.hO.initializeApp(we_firebase),Ce.yb,Ke.MaterialModule,ot.ProductModule,je.ClientModule,$e.OrdersModule,Et.m]}),xe})();(0,U.G48)(),d.q6().bootstrapModule(_t).catch(xe=>console.error(xe))},9751:(Lt,ze,N)=>{N.d(ze,{y:()=>A});var d=N(2961),U=N(727),j=N(8822),m=N(9635),de=N(2416),b=N(576),ae=N(2806);let A=(()=>{class Te{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const Ke=new Te;return Ke.source=this,Ke.operator=qe,Ke}subscribe(qe,Ke,ot){const je=function ue(Te){return Te&&Te instanceof d.Lv||function ne(Te){return Te&&(0,b.m)(Te.next)&&(0,b.m)(Te.error)&&(0,b.m)(Te.complete)}(Te)&&(0,U.Nn)(Te)}(qe)?qe:new d.Hp(qe,Ke,ot);return(0,ae.x)(()=>{const{operator:$e,source:Et}=this;je.add($e?$e.call(je,Et):Et?this._subscribe(je):this._trySubscribe(je))}),je}_trySubscribe(qe){try{return this._subscribe(qe)}catch(Ke){qe.error(Ke)}}forEach(qe,Ke){return new(Ke=le(Ke))((ot,je)=>{const $e=new d.Hp({next:Et=>{try{qe(Et)}catch(mt){je(mt),$e.unsubscribe()}},error:je,complete:ot});this.subscribe($e)})}_subscribe(qe){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(qe)}[j.L](){return this}pipe(...qe){return(0,m.U)(qe)(this)}toPromise(qe){return new(qe=le(qe))((Ke,ot)=>{let je;this.subscribe($e=>je=$e,$e=>ot($e),()=>Ke(je))})}}return Te.create=at=>new Te(at),Te})();function le(Te){var at;return null!==(at=Te??de.v.Promise)&&void 0!==at?at:Promise}},7579:(Lt,ze,N)=>{N.d(ze,{x:()=>ae});var d=N(9751),U=N(727);const m=(0,N(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=N(8737),b=N(2806);let ae=(()=>{class le extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Te=new A(this,this);return Te.operator=ue,Te}_throwIfClosed(){if(this.closed)throw new m}next(ue){(0,b.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Te of this.currentObservers)Te.next(ue)}})}error(ue){(0,b.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Te}=this;for(;Te.length;)Te.shift().error(ue)}})}complete(){(0,b.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Te,isStopped:at,observers:qe}=this;return Te||at?U.Lc:(this.currentObservers=null,qe.push(ue),new U.w0(()=>{this.currentObservers=null,(0,de.P)(qe,ue)}))}_checkFinalizedStatuses(ue){const{hasError:Te,thrownError:at,isStopped:qe}=this;Te?ue.error(at):qe&&ue.complete()}asObservable(){const ue=new d.y;return ue.source=this,ue}}return le.create=(ne,ue)=>new A(ne,ue),le})();class A extends ae{constructor(ne,ue){super(),this.destination=ne,this.source=ue}next(ne){var ue,Te;null===(Te=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Te||Te.call(ue,ne)}error(ne){var ue,Te;null===(Te=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Te||Te.call(ue,ne)}complete(){var ne,ue;null===(ue=null===(ne=this.destination)||void 0===ne?void 0:ne.complete)||void 0===ue||ue.call(ne)}_subscribe(ne){var ue,Te;return null!==(Te=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(ne))&&void 0!==Te?Te:U.Lc}}},2961:(Lt,ze,N)=>{N.d(ze,{Hp:()=>ot,Lv:()=>Te});var d=N(576),U=N(727),j=N(2416),m=N(7849);function de(){}const b=le("C",void 0,void 0);function le(Ce,ut,st){return{kind:Ce,value:ut,error:st}}var ne=N(3410),ue=N(2806);class Te extends U.w0{constructor(ut){super(),this.isStopped=!1,ut?(this.destination=ut,(0,U.Nn)(ut)&&ut.add(this)):this.destination=mt}static create(ut,st,It){return new ot(ut,st,It)}next(ut){this.isStopped?Et(function A(Ce){return le("N",Ce,void 0)}(ut),this):this._next(ut)}error(ut){this.isStopped?Et(function ae(Ce){return le("E",void 0,Ce)}(ut),this):(this.isStopped=!0,this._error(ut))}complete(){this.isStopped?Et(b,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ut){this.destination.next(ut)}_error(ut){try{this.destination.error(ut)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function qe(Ce,ut){return at.call(Ce,ut)}class Ke{constructor(ut){this.partialObserver=ut}next(ut){const{partialObserver:st}=this;if(st.next)try{st.next(ut)}catch(It){je(It)}}error(ut){const{partialObserver:st}=this;if(st.error)try{st.error(ut)}catch(It){je(It)}else je(ut)}complete(){const{partialObserver:ut}=this;if(ut.complete)try{ut.complete()}catch(st){je(st)}}}class ot extends Te{constructor(ut,st,It){let vt;if(super(),(0,d.m)(ut)||!ut)vt={next:ut??void 0,error:st??void 0,complete:It??void 0};else{let we;this&&j.v.useDeprecatedNextContext?(we=Object.create(ut),we.unsubscribe=()=>this.unsubscribe(),vt={next:ut.next&&qe(ut.next,we),error:ut.error&&qe(ut.error,we),complete:ut.complete&&qe(ut.complete,we)}):vt=ut}this.destination=new Ke(vt)}}function je(Ce){j.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(Ce):(0,m.h)(Ce)}function Et(Ce,ut){const{onStoppedNotification:st}=j.v;st&&ne.z.setTimeout(()=>st(Ce,ut))}const mt={closed:!0,next:de,error:function $e(Ce){throw Ce},complete:de}},727:(Lt,ze,N)=>{N.d(ze,{Lc:()=>b,w0:()=>de,Nn:()=>ae});var d=N(576);const j=(0,N(3888).d)(le=>function(ue){le(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Te,at)=>`${at+1}) ${Te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var m=N(8737);class de{constructor(ne){this.initialTeardown=ne,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ne;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const qe of ue)qe.remove(this);else ue.remove(this);const{initialTeardown:Te}=this;if((0,d.m)(Te))try{Te()}catch(qe){ne=qe instanceof j?qe.errors:[qe]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const qe of at)try{A(qe)}catch(Ke){ne=ne??[],Ke instanceof j?ne=[...ne,...Ke.errors]:ne.push(Ke)}}if(ne)throw new j(ne)}}add(ne){var ue;if(ne&&ne!==this)if(this.closed)A(ne);else{if(ne instanceof de){if(ne.closed||ne._hasParent(this))return;ne._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(ne)}}_hasParent(ne){const{_parentage:ue}=this;return ue===ne||Array.isArray(ue)&&ue.includes(ne)}_addParent(ne){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(ne),ue):ue?[ue,ne]:ne}_removeParent(ne){const{_parentage:ue}=this;ue===ne?this._parentage=null:Array.isArray(ue)&&(0,m.P)(ue,ne)}remove(ne){const{_finalizers:ue}=this;ue&&(0,m.P)(ue,ne),ne instanceof de&&ne._removeParent(this)}}de.EMPTY=(()=>{const le=new de;return le.closed=!0,le})();const b=de.EMPTY;function ae(le){return le instanceof de||le&&"closed"in le&&(0,d.m)(le.remove)&&(0,d.m)(le.add)&&(0,d.m)(le.unsubscribe)}function A(le){(0,d.m)(le)?le():le.unsubscribe()}},2416:(Lt,ze,N)=>{N.d(ze,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Lt,ze,N)=>{N.d(ze,{z:()=>de});var d=N(8189),j=N(7669),m=N(8996);function de(...b){return function U(){return(0,d.J)(1)}()((0,m.D)(b,(0,j.yG)(b)))}},515:(Lt,ze,N)=>{N.d(ze,{E:()=>U});const U=new(N(9751).y)(de=>de.complete())},8996:(Lt,ze,N)=>{N.d(ze,{D:()=>ut});var d=N(8421),U=N(5363),j=N(9468),b=N(9751),A=N(2202),le=N(576),ne=N(9672);function Te(st,It){if(!st)throw new Error("Iterable cannot be null");return new b.y(vt=>{(0,ne.f)(vt,It,()=>{const we=st[Symbol.asyncIterator]();(0,ne.f)(vt,It,()=>{we.next().then(_t=>{_t.done?vt.complete():vt.next(_t.value)})},0,!0)})})}var at=N(3670),qe=N(8239),Ke=N(1144),ot=N(6495),je=N(2206),$e=N(4532),Et=N(3260);function ut(st,It){return It?function Ce(st,It){if(null!=st){if((0,at.c)(st))return function m(st,It){return(0,d.Xf)(st).pipe((0,j.R)(It),(0,U.Q)(It))}(st,It);if((0,Ke.z)(st))return function ae(st,It){return new b.y(vt=>{let we=0;return It.schedule(function(){we===st.length?vt.complete():(vt.next(st[we++]),vt.closed||this.schedule())})})}(st,It);if((0,qe.t)(st))return function de(st,It){return(0,d.Xf)(st).pipe((0,j.R)(It),(0,U.Q)(It))}(st,It);if((0,je.D)(st))return Te(st,It);if((0,ot.T)(st))return function ue(st,It){return new b.y(vt=>{let we;return(0,ne.f)(vt,It,()=>{we=st[A.h](),(0,ne.f)(vt,It,()=>{let _t,xe;try{({value:_t,done:xe}=we.next())}catch(Ae){return void vt.error(Ae)}xe?vt.complete():vt.next(_t)},0,!0)}),()=>(0,le.m)(we?.return)&&we.return()})}(st,It);if((0,Et.L)(st))return function mt(st,It){return Te((0,Et.Q)(st),It)}(st,It)}throw(0,$e.z)(st)}(st,It):(0,d.Xf)(st)}},8421:(Lt,ze,N)=>{N.d(ze,{Xf:()=>at});var d=N(7582),U=N(1144),j=N(8239),m=N(9751),de=N(3670),b=N(2206),ae=N(4532),A=N(6495),le=N(3260),ne=N(576),ue=N(7849),Te=N(8822);function at(Ce){if(Ce instanceof m.y)return Ce;if(null!=Ce){if((0,de.c)(Ce))return function qe(Ce){return new m.y(ut=>{const st=Ce[Te.L]();if((0,ne.m)(st.subscribe))return st.subscribe(ut);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,U.z)(Ce))return function Ke(Ce){return new m.y(ut=>{for(let st=0;st<Ce.length&&!ut.closed;st++)ut.next(Ce[st]);ut.complete()})}(Ce);if((0,j.t)(Ce))return function ot(Ce){return new m.y(ut=>{Ce.then(st=>{ut.closed||(ut.next(st),ut.complete())},st=>ut.error(st)).then(null,ue.h)})}(Ce);if((0,b.D)(Ce))return $e(Ce);if((0,A.T)(Ce))return function je(Ce){return new m.y(ut=>{for(const st of Ce)if(ut.next(st),ut.closed)return;ut.complete()})}(Ce);if((0,le.L)(Ce))return function Et(Ce){return $e((0,le.Q)(Ce))}(Ce)}throw(0,ae.z)(Ce)}function $e(Ce){return new m.y(ut=>{(function mt(Ce,ut){var st,It,vt,we;return(0,d.mG)(this,void 0,void 0,function*(){try{for(st=(0,d.KL)(Ce);!(It=yield st.next()).done;)if(ut.next(It.value),ut.closed)return}catch(_t){vt={error:_t}}finally{try{It&&!It.done&&(we=st.return)&&(yield we.call(st))}finally{if(vt)throw vt.error}}ut.complete()})})(Ce,ut).catch(st=>ut.error(st))})}},6451:(Lt,ze,N)=>{N.d(ze,{T:()=>b});var d=N(8189),U=N(8421),j=N(515),m=N(7669),de=N(8996);function b(...ae){const A=(0,m.yG)(ae),le=(0,m._6)(ae,1/0),ne=ae;return ne.length?1===ne.length?(0,U.Xf)(ne[0]):(0,d.J)(le)((0,de.D)(ne,A)):j.E}},9646:(Lt,ze,N)=>{N.d(ze,{of:()=>j});var d=N(7669),U=N(8996);function j(...m){const de=(0,d.yG)(m);return(0,U.D)(m,de)}},5403:(Lt,ze,N)=>{N.d(ze,{x:()=>U});var d=N(2961);function U(m,de,b,ae,A){return new j(m,de,b,ae,A)}class j extends d.Lv{constructor(de,b,ae,A,le,ne){super(de),this.onFinalize=le,this.shouldUnsubscribe=ne,this._next=b?function(ue){try{b(ue)}catch(Te){de.error(Te)}}:super._next,this._error=A?function(ue){try{A(ue)}catch(Te){de.error(Te)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(ue){de.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:b}=this;super.unsubscribe(),!b&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},6590:(Lt,ze,N)=>{N.d(ze,{d:()=>j});var d=N(4482),U=N(5403);function j(m){return(0,d.e)((de,b)=>{let ae=!1;de.subscribe((0,U.x)(b,A=>{ae=!0,b.next(A)},()=>{ae||b.next(m),b.complete()}))})}},9300:(Lt,ze,N)=>{N.d(ze,{h:()=>j});var d=N(4482),U=N(5403);function j(m,de){return(0,d.e)((b,ae)=>{let A=0;b.subscribe((0,U.x)(ae,le=>m.call(de,le,A++)&&ae.next(le)))})}},590:(Lt,ze,N)=>{N.d(ze,{P:()=>ae});var d=N(6805),U=N(9300),j=N(5698),m=N(6590),de=N(8068),b=N(4671);function ae(A,le){const ne=arguments.length>=2;return ue=>ue.pipe(A?(0,U.h)((Te,at)=>A(Te,at,ue)):b.y,(0,j.q)(1),ne?(0,m.d)(le):(0,de.T)(()=>new d.K))}},4004:(Lt,ze,N)=>{N.d(ze,{U:()=>j});var d=N(4482),U=N(5403);function j(m,de){return(0,d.e)((b,ae)=>{let A=0;b.subscribe((0,U.x)(ae,le=>{ae.next(m.call(de,le,A++))}))})}},8189:(Lt,ze,N)=>{N.d(ze,{J:()=>j});var d=N(5577),U=N(4671);function j(m=1/0){return(0,d.z)(U.y,m)}},5577:(Lt,ze,N)=>{N.d(ze,{z:()=>A});var d=N(4004),U=N(8421),j=N(4482),m=N(9672),de=N(5403),ae=N(576);function A(le,ne,ue=1/0){return(0,ae.m)(ne)?A((Te,at)=>(0,d.U)((qe,Ke)=>ne(Te,qe,at,Ke))((0,U.Xf)(le(Te,at))),ue):("number"==typeof ne&&(ue=ne),(0,j.e)((Te,at)=>function b(le,ne,ue,Te,at,qe,Ke,ot){const je=[];let $e=0,Et=0,mt=!1;const Ce=()=>{mt&&!je.length&&!$e&&ne.complete()},ut=It=>$e<Te?st(It):je.push(It),st=It=>{qe&&ne.next(It),$e++;let vt=!1;(0,U.Xf)(ue(It,Et++)).subscribe((0,de.x)(ne,we=>{at?.(we),qe?ut(we):ne.next(we)},()=>{vt=!0},void 0,()=>{if(vt)try{for($e--;je.length&&$e<Te;){const we=je.shift();Ke?(0,m.f)(ne,Ke,()=>st(we)):st(we)}Ce()}catch(we){ne.error(we)}}))};return le.subscribe((0,de.x)(ne,ut,()=>{mt=!0,Ce()})),()=>{ot?.()}}(Te,at,le,ue)))}},5363:(Lt,ze,N)=>{N.d(ze,{Q:()=>m});var d=N(9672),U=N(4482),j=N(5403);function m(de,b=0){return(0,U.e)((ae,A)=>{ae.subscribe((0,j.x)(A,le=>(0,d.f)(A,de,()=>A.next(le),b),()=>(0,d.f)(A,de,()=>A.complete(),b),le=>(0,d.f)(A,de,()=>A.error(le),b)))})}},5026:(Lt,ze,N)=>{N.d(ze,{R:()=>m});var d=N(4482),U=N(5403);function j(de,b,ae,A,le){return(ne,ue)=>{let Te=ae,at=b,qe=0;ne.subscribe((0,U.x)(ue,Ke=>{const ot=qe++;at=Te?de(at,Ke,ot):(Te=!0,Ke),A&&ue.next(at)},le&&(()=>{Te&&ue.next(at),ue.complete()})))}}function m(de,b){return(0,d.e)(j(de,b,arguments.length>=2,!0))}},3099:(Lt,ze,N)=>{N.d(ze,{B:()=>de});var d=N(8421),U=N(7579),j=N(2961),m=N(4482);function de(ae={}){const{connector:A=(()=>new U.x),resetOnError:le=!0,resetOnComplete:ne=!0,resetOnRefCountZero:ue=!0}=ae;return Te=>{let at,qe,Ke,ot=0,je=!1,$e=!1;const Et=()=>{qe?.unsubscribe(),qe=void 0},mt=()=>{Et(),at=Ke=void 0,je=$e=!1},Ce=()=>{const ut=at;mt(),ut?.unsubscribe()};return(0,m.e)((ut,st)=>{ot++,!$e&&!je&&Et();const It=Ke=Ke??A();st.add(()=>{ot--,0===ot&&!$e&&!je&&(qe=b(Ce,ue))}),It.subscribe(st),!at&&ot>0&&(at=new j.Hp({next:vt=>It.next(vt),error:vt=>{$e=!0,Et(),qe=b(mt,le,vt),It.error(vt)},complete:()=>{je=!0,Et(),qe=b(mt,ne),It.complete()}}),(0,d.Xf)(ut).subscribe(at))})(Te)}}function b(ae,A,...le){if(!0===A)return void ae();if(!1===A)return;const ne=new j.Hp({next:()=>{ne.unsubscribe(),ae()}});return A(...le).subscribe(ne)}},8675:(Lt,ze,N)=>{N.d(ze,{O:()=>m});var d=N(7272),U=N(7669),j=N(4482);function m(...de){const b=(0,U.yG)(de);return(0,j.e)((ae,A)=>{(b?(0,d.z)(de,ae,b):(0,d.z)(de,ae)).subscribe(A)})}},9468:(Lt,ze,N)=>{N.d(ze,{R:()=>U});var d=N(4482);function U(j,m=0){return(0,d.e)((de,b)=>{b.add(j.schedule(()=>de.subscribe(b),m))})}},3900:(Lt,ze,N)=>{N.d(ze,{w:()=>m});var d=N(8421),U=N(4482),j=N(5403);function m(de,b){return(0,U.e)((ae,A)=>{let le=null,ne=0,ue=!1;const Te=()=>ue&&!le&&A.complete();ae.subscribe((0,j.x)(A,at=>{le?.unsubscribe();let qe=0;const Ke=ne++;(0,d.Xf)(de(at,Ke)).subscribe(le=(0,j.x)(A,ot=>A.next(b?b(at,ot,Ke,qe++):ot),()=>{le=null,Te()}))},()=>{ue=!0,Te()}))})}},5698:(Lt,ze,N)=>{N.d(ze,{q:()=>m});var d=N(515),U=N(4482),j=N(5403);function m(de){return de<=0?()=>d.E:(0,U.e)((b,ae)=>{let A=0;b.subscribe((0,j.x)(ae,le=>{++A<=de&&(ae.next(le),de<=A&&ae.complete())}))})}},8505:(Lt,ze,N)=>{N.d(ze,{b:()=>de});var d=N(576),U=N(4482),j=N(5403),m=N(4671);function de(b,ae,A){const le=(0,d.m)(b)||ae||A?{next:b,error:ae,complete:A}:b;return le?(0,U.e)((ne,ue)=>{var Te;null===(Te=le.subscribe)||void 0===Te||Te.call(le);let at=!0;ne.subscribe((0,j.x)(ue,qe=>{var Ke;null===(Ke=le.next)||void 0===Ke||Ke.call(le,qe),ue.next(qe)},()=>{var qe;at=!1,null===(qe=le.complete)||void 0===qe||qe.call(le),ue.complete()},qe=>{var Ke;at=!1,null===(Ke=le.error)||void 0===Ke||Ke.call(le,qe),ue.error(qe)},()=>{var qe,Ke;at&&(null===(qe=le.unsubscribe)||void 0===qe||qe.call(le)),null===(Ke=le.finalize)||void 0===Ke||Ke.call(le)}))}):m.y}},8068:(Lt,ze,N)=>{N.d(ze,{T:()=>m});var d=N(6805),U=N(4482),j=N(5403);function m(b=de){return(0,U.e)((ae,A)=>{let le=!1;ae.subscribe((0,j.x)(A,ne=>{le=!0,A.next(ne)},()=>le?A.complete():A.error(b())))})}function de(){return new d.K}},4408:(Lt,ze,N)=>{N.d(ze,{o:()=>de});var d=N(727);class U extends d.w0{constructor(ae,A){super()}schedule(ae,A=0){return this}}const j={setInterval(b,ae,...A){const{delegate:le}=j;return le?.setInterval?le.setInterval(b,ae,...A):setInterval(b,ae,...A)},clearInterval(b){const{delegate:ae}=j;return(ae?.clearInterval||clearInterval)(b)},delegate:void 0};var m=N(8737);class de extends U{constructor(ae,A){super(ae,A),this.scheduler=ae,this.work=A,this.pending=!1}schedule(ae,A=0){var le;if(this.closed)return this;this.state=ae;const ne=this.id,ue=this.scheduler;return null!=ne&&(this.id=this.recycleAsyncId(ue,ne,A)),this.pending=!0,this.delay=A,this.id=null!==(le=this.id)&&void 0!==le?le:this.requestAsyncId(ue,this.id,A),this}requestAsyncId(ae,A,le=0){return j.setInterval(ae.flush.bind(ae,this),le)}recycleAsyncId(ae,A,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return A;null!=A&&j.clearInterval(A)}execute(ae,A){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ae,A);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,A){let ne,le=!1;try{this.work(ae)}catch(ue){le=!0,ne=ue||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),ne}unsubscribe(){if(!this.closed){const{id:ae,scheduler:A}=this,{actions:le}=A;this.work=this.state=this.scheduler=null,this.pending=!1,(0,m.P)(le,this),null!=ae&&(this.id=this.recycleAsyncId(A,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Lt,ze,N)=>{N.d(ze,{v:()=>j});var d=N(6063);class U{constructor(de,b=U.now){this.schedulerActionCtor=de,this.now=b}schedule(de,b=0,ae){return new this.schedulerActionCtor(this,de).schedule(ae,b)}}U.now=d.l.now;class j extends U{constructor(de,b=U.now){super(de,b),this.actions=[],this._active=!1}flush(de){const{actions:b}=this;if(this._active)return void b.push(de);let ae;this._active=!0;do{if(ae=de.execute(de.state,de.delay))break}while(de=b.shift());if(this._active=!1,ae){for(;de=b.shift();)de.unsubscribe();throw ae}}}},4986:(Lt,ze,N)=>{N.d(ze,{z:()=>j});var d=N(4408);const j=new(N(7565).v)(d.o)},6063:(Lt,ze,N)=>{N.d(ze,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Lt,ze,N)=>{N.d(ze,{z:()=>d});const d={setTimeout(U,j,...m){const{delegate:de}=d;return de?.setTimeout?de.setTimeout(U,j,...m):setTimeout(U,j,...m)},clearTimeout(U){const{delegate:j}=d;return(j?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(Lt,ze,N)=>{N.d(ze,{h:()=>U});const U=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Lt,ze,N)=>{N.d(ze,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Lt,ze,N)=>{N.d(ze,{K:()=>U});const U=(0,N(3888).d)(j=>function(){j(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Lt,ze,N)=>{N.d(ze,{_6:()=>b,jO:()=>m,yG:()=>de});var d=N(576);function j(ae){return ae[ae.length-1]}function m(ae){return(0,d.m)(j(ae))?ae.pop():void 0}function de(ae){return function U(ae){return ae&&(0,d.m)(ae.schedule)}(j(ae))?ae.pop():void 0}function b(ae,A){return"number"==typeof j(ae)?ae.pop():A}},4742:(Lt,ze,N)=>{N.d(ze,{D:()=>de});const{isArray:d}=Array,{getPrototypeOf:U,prototype:j,keys:m}=Object;function de(ae){if(1===ae.length){const A=ae[0];if(d(A))return{args:A,keys:null};if(function b(ae){return ae&&"object"==typeof ae&&U(ae)===j}(A)){const le=m(A);return{args:le.map(ne=>A[ne]),keys:le}}}return{args:ae,keys:null}}},8737:(Lt,ze,N)=>{function d(U,j){if(U){const m=U.indexOf(j);0<=m&&U.splice(m,1)}}N.d(ze,{P:()=>d})},3888:(Lt,ze,N)=>{function d(U){const m=U(de=>{Error.call(de),de.stack=(new Error).stack});return m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m}N.d(ze,{d:()=>d})},1810:(Lt,ze,N)=>{function d(U,j){return U.reduce((m,de,b)=>(m[de]=j[b],m),{})}N.d(ze,{n:()=>d})},2806:(Lt,ze,N)=>{N.d(ze,{O:()=>m,x:()=>j});var d=N(2416);let U=null;function j(de){if(d.v.useDeprecatedSynchronousErrorHandling){const b=!U;if(b&&(U={errorThrown:!1,error:null}),de(),b){const{errorThrown:ae,error:A}=U;if(U=null,ae)throw A}}else de()}function m(de){d.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=de)}},9672:(Lt,ze,N)=>{function d(U,j,m,de=0,b=!1){const ae=j.schedule(function(){m(),b?U.add(this.schedule(null,de)):this.unsubscribe()},de);if(U.add(ae),!b)return ae}N.d(ze,{f:()=>d})},4671:(Lt,ze,N)=>{function d(U){return U}N.d(ze,{y:()=>d})},1144:(Lt,ze,N)=>{N.d(ze,{z:()=>d});const d=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(Lt,ze,N)=>{N.d(ze,{D:()=>U});var d=N(576);function U(j){return Symbol.asyncIterator&&(0,d.m)(j?.[Symbol.asyncIterator])}},576:(Lt,ze,N)=>{function d(U){return"function"==typeof U}N.d(ze,{m:()=>d})},3670:(Lt,ze,N)=>{N.d(ze,{c:()=>j});var d=N(8822),U=N(576);function j(m){return(0,U.m)(m[d.L])}},6495:(Lt,ze,N)=>{N.d(ze,{T:()=>j});var d=N(2202),U=N(576);function j(m){return(0,U.m)(m?.[d.h])}},8239:(Lt,ze,N)=>{N.d(ze,{t:()=>U});var d=N(576);function U(j){return(0,d.m)(j?.then)}},3260:(Lt,ze,N)=>{N.d(ze,{L:()=>m,Q:()=>j});var d=N(7582),U=N(576);function j(de){return(0,d.FC)(this,arguments,function*(){const ae=de.getReader();try{for(;;){const{value:A,done:le}=yield(0,d.qq)(ae.read());if(le)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(A)}}finally{ae.releaseLock()}})}function m(de){return(0,U.m)(de?.getReader)}},4482:(Lt,ze,N)=>{N.d(ze,{A:()=>U,e:()=>j});var d=N(576);function U(m){return(0,d.m)(m?.lift)}function j(m){return de=>{if(U(de))return de.lift(function(b){try{return m(b,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Lt,ze,N)=>{N.d(ze,{Z:()=>m});var d=N(4004);const{isArray:U}=Array;function m(de){return(0,d.U)(b=>function j(de,b){return U(b)?de(...b):de(b)}(de,b))}},9635:(Lt,ze,N)=>{N.d(ze,{U:()=>j,z:()=>U});var d=N(4671);function U(...m){return j(m)}function j(m){return 0===m.length?d.y:1===m.length?m[0]:function(b){return m.reduce((ae,A)=>A(ae),b)}}},7849:(Lt,ze,N)=>{N.d(ze,{h:()=>j});var d=N(2416),U=N(3410);function j(m){U.z.setTimeout(()=>{const{onUnhandledError:de}=d.v;if(!de)throw m;de(m)})}},4532:(Lt,ze,N)=>{function d(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(ze,{z:()=>d})},6895:(Lt,ze,N)=>{N.d(ze,{Do:()=>mt,EM:()=>hs,HT:()=>de,JF:()=>yo,K0:()=>ae,Mx:()=>Vi,O5:()=>Or,Ov:()=>Pe,PM:()=>Xs,S$:()=>je,V_:()=>ne,Ye:()=>Ce,b0:()=>Et,bD:()=>Oi,ez:()=>Js,mk:()=>$n,q:()=>j,sg:()=>Bi,w_:()=>b});var d=N(4650);let U=null;function j(){return U}function de(S){U||(U=S)}class b{}const ae=new d.OlP("DocumentToken");let A=(()=>{class S{historyGo(R){throw new Error("Not implemented")}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=d.Yz7({token:S,factory:function(){return function le(){return(0,d.LFG)(ue)}()},providedIn:"platform"}),S})();const ne=new d.OlP("Location Initialized");let ue=(()=>{class S extends A{constructor(R){super(),this._doc=R,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(R){const K=j().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",R,!1),()=>K.removeEventListener("popstate",R)}onHashChange(R){const K=j().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",R,!1),()=>K.removeEventListener("hashchange",R)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(R){this.location.pathname=R}pushState(R,K,Se){Te()?this._history.pushState(R,K,Se):this.location.hash=Se}replaceState(R,K,Se){Te()?this._history.replaceState(R,K,Se):this.location.hash=Se}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return S.\u0275fac=function(R){return new(R||S)(d.LFG(ae))},S.\u0275prov=d.Yz7({token:S,factory:function(){return function at(){return new ue((0,d.LFG)(ae))}()},providedIn:"platform"}),S})();function Te(){return!!window.history.pushState}function qe(S,$){if(0==S.length)return $;if(0==$.length)return S;let R=0;return S.endsWith("/")&&R++,$.startsWith("/")&&R++,2==R?S+$.substring(1):1==R?S+$:S+"/"+$}function Ke(S){const $=S.match(/#|\?|$/),R=$&&$.index||S.length;return S.slice(0,R-("/"===S[R-1]?1:0))+S.slice(R)}function ot(S){return S&&"?"!==S[0]?"?"+S:S}let je=(()=>{class S{historyGo(R){throw new Error("Not implemented")}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=d.Yz7({token:S,factory:function(){return(0,d.f3M)(Et)},providedIn:"root"}),S})();const $e=new d.OlP("appBaseHref");let Et=(()=>{class S extends je{constructor(R,K){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return qe(this._baseHref,R)}path(R=!1){const K=this._platformLocation.pathname+ot(this._platformLocation.search),Se=this._platformLocation.hash;return Se&&R?`${K}${Se}`:K}pushState(R,K,Se,ct){const Ct=this.prepareExternalUrl(Se+ot(ct));this._platformLocation.pushState(R,K,Ct)}replaceState(R,K,Se,ct){const Ct=this.prepareExternalUrl(Se+ot(ct));this._platformLocation.replaceState(R,K,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return S.\u0275fac=function(R){return new(R||S)(d.LFG(A),d.LFG($e,8))},S.\u0275prov=d.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),mt=(()=>{class S extends je{constructor(R,K){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(R){const K=qe(this._baseHref,R);return K.length>0?"#"+K:K}pushState(R,K,Se,ct){let Ct=this.prepareExternalUrl(Se+ot(ct));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.pushState(R,K,Ct)}replaceState(R,K,Se,ct){let Ct=this.prepareExternalUrl(Se+ot(ct));0==Ct.length&&(Ct=this._platformLocation.pathname),this._platformLocation.replaceState(R,K,Ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return S.\u0275fac=function(R){return new(R||S)(d.LFG(A),d.LFG($e,8))},S.\u0275prov=d.Yz7({token:S,factory:S.\u0275fac}),S})(),Ce=(()=>{class S{constructor(R){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const K=this._locationStrategy.getBaseHref();this._baseHref=Ke(It(K)),this._locationStrategy.onPopState(Se=>{this._subject.emit({url:this.path(!0),pop:!0,state:Se.state,type:Se.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,K=""){return this.path()==this.normalize(R+ot(K))}normalize(R){return S.stripTrailingSlash(function st(S,$){return S&&$.startsWith(S)?$.substring(S.length):$}(this._baseHref,It(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,K="",Se=null){this._locationStrategy.pushState(Se,"",R,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ot(K)),Se)}replaceState(R,K="",Se=null){this._locationStrategy.replaceState(Se,"",R,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ot(K)),Se)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",K){this._urlChangeListeners.forEach(Se=>Se(R,K))}subscribe(R,K,Se){return this._subject.subscribe({next:R,error:K,complete:Se})}}return S.normalizeQueryParams=ot,S.joinWithSlash=qe,S.stripTrailingSlash=Ke,S.\u0275fac=function(R){return new(R||S)(d.LFG(je))},S.\u0275prov=d.Yz7({token:S,factory:function(){return function ut(){return new Ce((0,d.LFG)(je))}()},providedIn:"root"}),S})();function It(S){return S.replace(/\/index.html$/,"")}function Vi(S,$){$=encodeURIComponent($);for(const R of S.split(";")){const K=R.indexOf("="),[Se,ct]=-1==K?[R,""]:[R.slice(0,K),R.slice(K+1)];if(Se.trim()===$)return decodeURIComponent(ct)}return null}let $n=(()=>{class S{constructor(R,K,Se,ct){this._iterableDiffers=R,this._keyValueDiffers=K,this._ngEl=Se,this._renderer=ct,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(R){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof R?R.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(R){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof R?R.split(/\s+/):R,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const R=this._iterableDiffer.diff(this._rawClass);R&&this._applyIterableChanges(R)}else if(this._keyValueDiffer){const R=this._keyValueDiffer.diff(this._rawClass);R&&this._applyKeyValueChanges(R)}}_applyKeyValueChanges(R){R.forEachAddedItem(K=>this._toggleClass(K.key,K.currentValue)),R.forEachChangedItem(K=>this._toggleClass(K.key,K.currentValue)),R.forEachRemovedItem(K=>{K.previousValue&&this._toggleClass(K.key,!1)})}_applyIterableChanges(R){R.forEachAddedItem(K=>{if("string"!=typeof K.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(K.item)}`);this._toggleClass(K.item,!0)}),R.forEachRemovedItem(K=>this._toggleClass(K.item,!1))}_applyClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(K=>this._toggleClass(K,!0)):Object.keys(R).forEach(K=>this._toggleClass(K,!!R[K])))}_removeClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(K=>this._toggleClass(K,!1)):Object.keys(R).forEach(K=>this._toggleClass(K,!1)))}_toggleClass(R,K){(R=R.trim())&&R.split(/\s+/g).forEach(Se=>{K?this._renderer.addClass(this._ngEl.nativeElement,Se):this._renderer.removeClass(this._ngEl.nativeElement,Se)})}}return S.\u0275fac=function(R){return new(R||S)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},S.\u0275dir=d.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),S})();class Dr{constructor($,R,K,Se){this.$implicit=$,this.ngForOf=R,this.index=K,this.count=Se}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bi=(()=>{class S{constructor(R,K,Se){this._viewContainer=R,this._template=K,this._differs=Se,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const K=this._viewContainer;R.forEachOperation((Se,ct,Ct)=>{if(null==Se.previousIndex)K.createEmbeddedView(this._template,new Dr(Se.item,this._ngForOf,-1,-1),null===Ct?void 0:Ct);else if(null==Ct)K.remove(null===ct?void 0:ct);else if(null!==ct){const hn=K.get(ct);K.move(hn,Ct),Ii(hn,Se)}});for(let Se=0,ct=K.length;Se<ct;Se++){const hn=K.get(Se).context;hn.index=Se,hn.count=ct,hn.ngForOf=this._ngForOf}R.forEachIdentityChange(Se=>{Ii(K.get(Se.currentIndex),Se)})}static ngTemplateContextGuard(R,K){return!0}}return S.\u0275fac=function(R){return new(R||S)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},S.\u0275dir=d.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),S})();function Ii(S,$){S.context.$implicit=$.item}let Or=(()=>{class S{constructor(R,K){this._viewContainer=R,this._context=new gi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){Lr("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){Lr("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,K){return!0}}return S.\u0275fac=function(R){return new(R||S)(d.Y36(d.s_b),d.Y36(d.Rgc))},S.\u0275dir=d.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),S})();class gi{constructor(){this.$implicit=null,this.ngIf=null}}function Lr(S,$){if($&&!$.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,d.AaK)($)}'.`)}class ho{createSubscription($,R){return $.subscribe({next:R,error:K=>{throw K}})}dispose($){$.unsubscribe()}}class fo{createSubscription($,R){return $.then(R,K=>{throw K})}dispose($){}}const po=new fo,Fe=new ho;let Pe=(()=>{class S{constructor(R){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=R}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(R){return this._obj?R!==this._obj?(this._dispose(),this.transform(R)):this._latestValue:(R&&this._subscribe(R),this._latestValue)}_subscribe(R){this._obj=R,this._strategy=this._selectStrategy(R),this._subscription=this._strategy.createSubscription(R,K=>this._updateLatestValue(R,K))}_selectStrategy(R){if((0,d.QGY)(R))return po;if((0,d.F4k)(R))return Fe;throw function cr(S,$){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(R,K){R===this._obj&&(this._latestValue=K,this._ref.markForCheck())}}return S.\u0275fac=function(R){return new(R||S)(d.Y36(d.sBO,16))},S.\u0275pipe=d.Yjl({name:"async",type:S,pure:!1,standalone:!0}),S})(),Js=(()=>{class S{}return S.\u0275fac=function(R){return new(R||S)},S.\u0275mod=d.oAB({type:S}),S.\u0275inj=d.cJS({}),S})();const Oi="browser";function Xs(S){return"server"===S}let hs=(()=>{class S{}return S.\u0275prov=(0,d.Yz7)({token:S,providedIn:"root",factory:()=>new mo((0,d.LFG)(ae),window)}),S})();class mo{constructor($,R){this.document=$,this.window=R,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const R=function zr(S,$){const R=S.getElementById($)||S.getElementsByName($)[0];if(R)return R;if("function"==typeof S.createTreeWalker&&S.body&&(S.body.createShadowRoot||S.body.attachShadow)){const K=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let Se=K.currentNode;for(;Se;){const ct=Se.shadowRoot;if(ct){const Ct=ct.getElementById($)||ct.querySelector(`[name="${$}"]`);if(Ct)return Ct}Se=K.nextNode()}}return null}(this.document,$);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=$)}}scrollToElement($){const R=$.getBoundingClientRect(),K=R.left+this.window.pageXOffset,Se=R.top+this.window.pageYOffset,ct=this.offset();this.window.scrollTo(K-ct[0],Se-ct[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fs(S){return Object.getOwnPropertyDescriptor(S,"scrollRestoration")}class yo{}},4650:(Lt,ze,N)=>{N.d(ze,{$8M:()=>fn,$Z:()=>Uh,AFp:()=>Aw,ALo:()=>K0,AaK:()=>A,AsE:()=>rg,CHM:()=>no,CRH:()=>iw,CZH:()=>Iy,CqO:()=>mf,D6c:()=>OI,EJc:()=>WE,EpF:()=>Em,F4k:()=>Im,FYo:()=>bd,FiY:()=>wr,G48:()=>gI,GfV:()=>Mg,Gpc:()=>ue,JOm:()=>ss,KtG:()=>ro,LFG:()=>Fi,LSH:()=>ql,Lbi:()=>ZE,Lck:()=>VC,MAs:()=>br,MMx:()=>a_,NdJ:()=>Yp,O4$:()=>Ir,OlP:()=>_r,Oqu:()=>Qc,PXZ:()=>lI,Q6J:()=>pf,QGY:()=>Kd,QP$:()=>gt,Qsj:()=>Jy,R0b:()=>Mu,RDi:()=>mg,Rgc:()=>dg,SBq:()=>ec,Sil:()=>YE,Suo:()=>rw,TTD:()=>ws,TgZ:()=>Wd,Tol:()=>tg,VKq:()=>H0,X6Q:()=>pI,XFs:()=>Pt,Xpm:()=>ur,Xts:()=>$f,Y36:()=>wl,YKP:()=>N0,YNc:()=>zp,Yjl:()=>ee,Yz7:()=>se,Z0I:()=>Xt,ZZ4:()=>R_,_Bn:()=>O0,_UZ:()=>Ms,_Vd:()=>Ql,_c5:()=>PI,_uU:()=>Hm,aQg:()=>O_,c2e:()=>zE,cJS:()=>We,cg1:()=>cy,dDg:()=>sI,dqk:()=>Nn,eFA:()=>Bw,ekj:()=>_f,eoX:()=>Lw,f3M:()=>Fl,g9A:()=>Mw,h0i:()=>Sf,hGG:()=>RI,hij:()=>If,iGM:()=>nw,ifc:()=>tn,ip1:()=>Tw,jDz:()=>F0,kL8:()=>dy,kcU:()=>ca,lG2:()=>ye,lcZ:()=>Y0,lqb:()=>Kl,lri:()=>kw,n5z:()=>an,oAB:()=>Xe,oxw:()=>Jp,q4F:()=>Yf,qLn:()=>Vc,qOj:()=>Gd,qZA:()=>Ci,rWj:()=>Fw,sBO:()=>mI,sIi:()=>Zd,s_b:()=>wy,soG:()=>by,tb:()=>xw,tp0:()=>hi,uIk:()=>qc,vHH:()=>Ke,vpe:()=>Pl,wAp:()=>Bn,xp6:()=>Ss,z2F:()=>Dy,zSh:()=>Dh,zs3:()=>eu});var d=N(7579),U=N(727),j=N(9751),m=N(6451),de=N(3099);function b(n){for(let r in n)if(n[r]===b)return r;throw Error("Could not find renamed property on target object.")}function ae(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function A(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(A).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function le(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ne=b({__forward_ref__:b});function ue(n){return n.__forward_ref__=ue,n.toString=function(){return A(this())},n}function Te(n){return at(n)?n():n}function at(n){return"function"==typeof n&&n.hasOwnProperty(ne)&&n.__forward_ref__===ue}class Ke extends Error{constructor(r,o){super(function ot(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function je(n){return"string"==typeof n?n:null==n?"":String(n)}function ut(n,r){throw new Ke(-201,!1)}function Je(n,r){null==n&&function Me(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function We(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ot(n){return Gn(n,Ht)||Gn(n,Yn)}function Xt(n){return null!==Ot(n)}function Gn(n,r){return n.hasOwnProperty(r)?n[r]:null}function On(n){return n&&(n.hasOwnProperty(En)||n.hasOwnProperty(ir))?n[En]:null}const Ht=b({\u0275prov:b}),En=b({\u0275inj:b}),Yn=b({ngInjectableDef:b}),ir=b({ngInjectorDef:b});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let Mn;function tr(n){const r=Mn;return Mn=n,r}function jr(n,r,o){const u=Ot(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Pt.Optional?null:void 0!==r?r:void ut(A(n))}function fr(n){return{toString:n}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),tn=(()=>{return(n=tn||(tn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",tn;var n})();const Nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gr={},dn=[],yr=b({\u0275cmp:b}),In=b({\u0275dir:b}),Zr=b({\u0275pipe:b}),xn=b({\u0275mod:b}),An=b({\u0275fac:b}),Vt=b({__NG_ELEMENT_ID__:b});let or=0;function ur(n){return fr(()=>{const o=!0===n.standalone,u={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||dn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||tn.Emulated,id:"c"+or++,styles:n.styles||dn,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,y=n.features;return l.inputs=ge(n.inputs,u),l.outputs=ge(n.outputs),y&&y.forEach(T=>T(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(J).filter(_e):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(Re).filter(_e):null,l})}function J(n){return Q(n)||q(n)}function _e(n){return null!==n}function Xe(n){return fr(()=>({type:n.type,bootstrap:n.bootstrap||dn,declarations:n.declarations||dn,imports:n.imports||dn,exports:n.exports||dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ge(n,r){if(null==n)return gr;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,r&&(r[l]=f)}return o}const ye=ur;function ee(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Q(n){return n[yr]||null}function q(n){return n[In]||null}function Re(n){return n[Zr]||null}function gt(n){const r=Q(n)||q(n)||Re(n);return null!==r&&r.standalone}function kt(n,r){const o=n[xn]||null;if(!o&&!0===r)throw new Error(`Type ${A(n)} does not have '\u0275mod' property.`);return o}function Lr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Tr(n){return Array.isArray(n)&&!0===n[1]}function Rs(n){return 0!=(8&n.flags)}function Pi(n){return 2==(2&n.flags)}function Os(n){return 1==(1&n.flags)}function Nr(n){return null!==n.template}function ji(n){return 0!=(256&n[2])}function Hi(n,r){return n.hasOwnProperty(An)?n[An]:null}class li{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ws(){return Ns}function Ns(n){return n.type.prototype.ngOnChanges&&(n.setInput=ds),sa}function sa(){const n=Po(this),r=n?.current;if(r){const o=n.previous;if(o===gr)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function ds(n,r,o,u){const l=Po(n)||function Js(n,r){return n[Zo]=r}(n,{previous:gr,current:null}),f=l.current||(l.current={}),y=l.previous,T=this.declaredInputs[o],P=y[T];f[T]=new li(P&&P.currentValue,r,y===gr),n[u]=r}ws.ngInherit=!0;const Zo="__ngSimpleChanges__";function Po(n){return n[Zo]||null}function Er(n){for(;Array.isArray(n);)n=n[0];return n}function fs(n,r){return Er(r[n])}function zr(n,r){return Er(r[n.index])}function yo(n,r){return n.data[r]}function Zi(n,r){return n[r]}function di(n,r){const o=r[n];return Lr(o)?o:o[0]}function Ro(n){return 64==(64&n[2])}function Xr(n,r){return null==r?null:n[r]}function qr(n){n[18]=0}function to(n,r){n[5]+=r;let o=n,u=n[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const Cn={lFrame:ko(null),bindingsEnabled:!0};function _o(){return Cn.bindingsEnabled}function At(){return Cn.lFrame.lView}function Hn(){return Cn.lFrame.tView}function no(n){return Cn.lFrame.contextLView=n,n[8]}function ro(n){return Cn.lFrame.contextLView=null,n}function Gr(){let n=ei();for(;null!==n&&64===n.type;)n=n.parent;return n}function ei(){return Cn.lFrame.currentTNode}function es(n,r){const o=Cn.lFrame;o.currentTNode=n,o.isParent=r}function Oo(){return Cn.lFrame.isParent}function O(){const n=Cn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function rn(){return Cn.lFrame.bindingIndex++}function Zn(n){const r=Cn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Di(n,r){const o=Cn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ls(r)}function Ls(n){Cn.lFrame.currentDirectiveIndex=n}function No(){return Cn.lFrame.currentQueryIndex}function ki(n){Cn.lFrame.currentQueryIndex=n}function Vs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function xa(n,r,o){if(o&Pt.SkipSelf){let l=r,f=n;for(;!(l=l.parent,null!==l||o&Pt.Host||(l=Vs(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;r=l,n=f}const u=Cn.lFrame=zo();return u.currentTNode=r,u.lView=n,!0}function Co(n){const r=zo(),o=n[1];Cn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function zo(){const n=Cn.lFrame,r=null===n?null:n.child;return null===r?ko(n):r}function ko(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function qo(){const n=Cn.lFrame;return Cn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ti=qo;function Us(){const n=qo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function dr(){return Cn.lFrame.selectedIndex}function mi(n){Cn.lFrame.selectedIndex=n}function Sr(){const n=Cn.lFrame;return yo(n.tView,n.selectedIndex)}function Ir(){Cn.lFrame.currentNamespace="svg"}function ca(){!function Wi(){Cn.lFrame.currentNamespace=null}()}function bs(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:T,ngAfterViewInit:P,ngAfterViewChecked:B,ngOnDestroy:Y}=f;y&&(n.contentHooks||(n.contentHooks=[])).push(-o,y),T&&((n.contentHooks||(n.contentHooks=[])).push(o,T),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,T)),P&&(n.viewHooks||(n.viewHooks=[])).push(-o,P),B&&((n.viewHooks||(n.viewHooks=[])).push(o,B),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,B)),null!=Y&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Y)}}function ts(n,r,o){Ki(n,r,3,o)}function Ko(n,r,o,u){(3&n[2])===o&&Ki(n,r,o,u)}function ps(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function Ki(n,r,o,u){const f=u??-1,y=r.length-1;let T=0;for(let P=void 0!==u?65535&n[18]:0;P<y;P++)if("number"==typeof r[P+1]){if(T=r[P],null!=u&&T>=u)break}else r[P]<0&&(n[18]+=65536),(T<f||-1==f)&&(yi(n,o,r,P),n[18]=(4294901760&n[18])+P+2),P++}function yi(n,r,o,u){const l=o[u]<0,f=o[u+1],T=n[l?-o[u]:o[u]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(T)}finally{}}}else try{f.call(T)}finally{}}class io{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function K(n,r,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],y=o[u++],T=o[u++];n.setAttribute(r,y,T,f)}else{const f=l,y=o[++u];ct(f)?n.setProperty(r,f,y):n.setAttribute(r,f,y),u++}}return u}function Se(n){return 3===n||4===n||6===n}function ct(n){return 64===n.charCodeAt(0)}function Ct(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const l=r[u];"number"==typeof l?o=l:0===o||hn(n,o,l,null,-1===o||2===o?r[++u]:null)}}return n}function hn(n,r,o,u,l){let f=0,y=n.length;if(-1===r)y=-1;else for(;f<n.length;){const T=n[f++];if("number"==typeof T){if(T===r){y=-1;break}if(T>r){y=f-1;break}}}for(;f<n.length;){const T=n[f];if("number"==typeof T)break;if(T===o){if(null===u)return void(null!==l&&(n[f+1]=l));if(u===n[f+1])return void(n[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==y&&(n.splice(y,0,r),f=y+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==l&&n.splice(f++,0,l)}function lr(n){return-1!==n}function zn(n){return 32767&n}function yn(n,r){let o=function vr(n){return n>>16}(n),u=r;for(;o>0;)u=u[15],o--;return u}let Mr=!0;function Vn(n){const r=Mr;return Mr=n,r}let mr=0;const xr={};function Yt(n,r){const o=da(n,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,on(u.data,n),on(r,null),on(u.blueprint,null));const l=zt(n,r),f=n.injectorIndex;if(lr(l)){const y=zn(l),T=yn(l,r),P=T[1].data;for(let B=0;B<8;B++)r[f+B]=T[y+B]|P[y+B]}return r[f+8]=l,f}function on(n,r){n.push(0,0,0,0,0,0,0,0,r)}function da(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function zt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=r;for(;null!==l;){if(u=Pr(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function it(n,r,o){!function ao(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Vt)&&(u=o[Vt]),null==u&&(u=o[Vt]=mr++);const l=255&u;r.data[n+(l>>5)]|=1<<l}(n,r,o)}function oi(n,r,o){if(o&Pt.Optional||void 0!==n)return n;ut()}function Ga(n,r,o,u){if(o&Pt.Optional&&void 0===u&&(u=null),0==(o&(Pt.Self|Pt.Host))){const l=n[9],f=tr(void 0);try{return l?l.get(r,u,o&Pt.Optional):jr(r,u,o&Pt.Optional)}finally{tr(f)}}return oi(u,0,o)}function Za(n,r,o,u=Pt.Default,l){if(null!==n){if(1024&r[2]){const y=function Pu(n,r,o,u,l){let f=n,y=r;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const T=xu(f,y,o,u|Pt.Self,xr);if(T!==xr)return T;let P=f.parent;if(!P){const B=y[21];if(B){const Y=B.get(o,xr,u);if(Y!==xr)return Y}P=Pr(y),y=y[15]}f=P}return l}(n,r,o,u,xr);if(y!==xr)return y}const f=xu(n,r,o,u,xr);if(f!==xr)return f}return Ga(r,o,u,l)}function xu(n,r,o,u,l){const f=function Rl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Vt)?n[Vt]:void 0;return"number"==typeof r?r>=0?255&r:ai:r}(o);if("function"==typeof f){if(!xa(r,n,u))return u&Pt.Host?oi(l,0,u):Ga(r,o,u,l);try{const y=f(u);if(null!=y||u&Pt.Optional)return y;ut()}finally{Ti()}}else if("number"==typeof f){let y=null,T=da(n,r),P=-1,B=u&Pt.Host?r[16][6]:null;for((-1===T||u&Pt.SkipSelf)&&(P=-1===T?zt(n,r):r[T+8],-1!==P&&fa(u,!1)?(y=r[1],T=zn(P),r=yn(P,r)):T=-1);-1!==T;){const Y=r[1];if(Ol(f,T,Y.data)){const fe=nl(T,r,o,y,u,B);if(fe!==xr)return fe}P=r[T+8],-1!==P&&fa(u,r[1].data[T+8]===B)&&Ol(f,T,r)?(y=Y,T=zn(P),r=yn(P,r)):T=-1}}return l}function nl(n,r,o,u,l,f){const y=r[1],T=y.data[n+8],Y=Yo(T,y,o,null==u?Pi(T)&&Mr:u!=y&&0!=(3&T.type),l&Pt.Host&&f===T);return null!==Y?ha(r,y,Y,T):xr}function Yo(n,r,o,u,l){const f=n.providerIndexes,y=r.data,T=1048575&f,P=n.directiveStart,Y=f>>20,Ne=l?T+Y:n.directiveEnd;for(let rt=u?T:T+Y;rt<Ne;rt++){const Tt=y[rt];if(rt<P&&o===Tt||rt>=P&&Tt.type===o)return rt}if(l){const rt=y[P];if(rt&&Nr(rt)&&rt.type===o)return P}return null}function ha(n,r,o,u){let l=n[o];const f=r.data;if(function so(n){return n instanceof io}(l)){const y=l;y.resolving&&function Et(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ke(-200,`Circular dependency in DI detected for ${n}${o}`)}(function $e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():je(n)}(f[o]));const T=Vn(y.canSeeViewProviders);y.resolving=!0;const P=y.injectImpl?tr(y.injectImpl):null;xa(n,u,Pt.Default);try{l=n[o]=y.factory(void 0,f,n,u),r.firstCreatePass&&o>=u.directiveStart&&function Bs(n,r,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=r.type.prototype;if(u){const y=Ns(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,y)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,l),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],r)}finally{null!==P&&tr(P),Vn(T),y.resolving=!1,Ti()}}return l}function Ol(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function fa(n,r){return!(n&Pt.Self||n&Pt.Host&&r)}class za{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return Za(this._tNode,this._lView,r,u,o)}}function ai(){return new za(Gr(),At())}function an(n){return fr(()=>{const r=n.prototype.constructor,o=r[An]||bo(r),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const f=l[An]||bo(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function bo(n){return at(n)?()=>{const r=bo(Te(n));return r&&r()}:Hi(n)}function Pr(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function fn(n){return function Mt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(Se(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===r)return o[l+1];l+=2}}}return null}(Gr(),n)}const bn="__parameters__";function gs(n,r,o){return fr(()=>{const u=function qt(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(r);function l(...f){if(this instanceof l)return u.apply(this,f),this;const y=new l(...f);return T.annotation=y,T;function T(P,B,Y){const fe=P.hasOwnProperty(bn)?P[bn]:Object.defineProperty(P,bn,{value:[]})[bn];for(;fe.length<=Y;)fe.push(null);return(fe[Y]=fe[Y]||[]).push(y),P}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class _r{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=se({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ai(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(r===n&&(r=n.slice(0,o)),Ai(u,r)):r!==n&&r.push(u)}return r}function Si(n,r){n.forEach(o=>Array.isArray(o)?Si(o,r):r(o))}function au(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Hs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ys(n,r,o){let u=_(n,r);return u>=0?n[1|u]=o:(u=~u,function kl(n,r,o,u){let l=n.length;if(l==r)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function vi(n,r){const o=_(n,r);if(o>=0)return n[1|o]}function _(n,r){return function v(n,r,o){let u=0,l=n.length>>o;for(;l!==u;){const f=u+(l-u>>1),y=n[f<<o];if(r===y)return f<<o;y>r?l=f:u=f+1}return~(l<<o)}(n,r,1)}const Wn={},Mi="__NG_DI_FLAG__",ui="ngTempTokenPath",Gs=/\n/gm,ea="__source";let Ra;function Ts(n){const r=Ra;return Ra=n,r}function lu(n,r=Pt.Default){if(void 0===Ra)throw new Ke(-203,!1);return null===Ra?jr(n,void 0,r):Ra.get(n,r&Pt.Optional?null:void 0,r)}function Fi(n,r=Pt.Default){return(function pn(){return Mn}()||lu)(Te(n),r)}function Fl(n,r=Pt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Fi(n,r)}function il(n){const r=[];for(let o=0;o<n.length;o++){const u=Te(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Ke(900,!1);let l,f=Pt.Default;for(let y=0;y<u.length;y++){const T=u[y],P=Yi(T);"number"==typeof P?-1===P?l=T.token:f|=P:l=T}r.push(Fi(l,f))}else r.push(Fi(u))}return r}function Ca(n,r){return n[Mi]=r,n.prototype[Mi]=r,n}function Yi(n){return n[Mi]}const wr=Ca(gs("Optional"),8),hi=Ca(gs("SkipSelf"),4);var ss=(()=>((ss=ss||{})[ss.Important=1]="Important",ss[ss.DashCase=2]="DashCase",ss))();const ce=new Map;let be=0;const fi="__ngContext__";function Li(n,r){Lr(r)?(n[fi]=r[20],function pt(n){ce.set(n[20],n)}(r)):n[fi]=r}function dl(n,r){return undefined(n,r)}function hl(n){const r=n[3];return Tr(r)?r[3]:r}function Ac(n){return h(n[13])}function w(n){return h(n[4])}function h(n){for(;null!==n&&!Tr(n);)n=n[4];return n}function I(n,r,o,u,l){if(null!=u){let f,y=!1;Tr(u)?f=u:Lr(u)&&(y=!0,u=u[0]);const T=Er(u);0===n&&null!==o?null==l?ad(r,o,T):Qa(r,o,T,l||null,!0):1===n&&null!==o?Qa(r,o,T,l||null,!0):2===n?function hh(n,r,o){const u=ld(n,r);u&&function ud(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}(r,T,y):3===n&&r.destroyNode(T),null!=f&&function My(n,r,o,u,l){const f=o[7];f!==Er(o)&&I(r,n,u,f,l);for(let T=10;T<o.length;T++){const P=o[T];Mc(P[1],P,n,r,u,f)}}(r,n,f,o,l)}}function dt(n,r,o){return n.createElement(r,o)}function $l(n,r){const o=n[9],u=o.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,to(l,-1)),o.splice(u,1)}function As(n,r){if(n.length<=10)return;const o=10+r,u=n[o];if(u){const l=u[17];null!==l&&l!==n&&$l(l,u),r>0&&(n[o-1][4]=u[4]);const f=Hs(n,10+r);!function jt(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const y=f[19];null!==y&&y.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Hl(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Mc(n,r,o,3,null,null),function hr(n){let r=n[13];if(!r)return vu(n[1],n);for(;r;){let o=null;if(Lr(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==n;)Lr(r)&&vu(r[1],r),r=r[3];null===r&&(r=n),Lr(r)&&vu(r[1],r),o=r&&r[4]}r=o}}(r)}}function vu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function ia(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=r[o[u]];if(!(l instanceof io)){const f=o[u+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const T=l[f[y]],P=f[y+1];try{P.call(T)}finally{}}else try{f.call(l)}finally{}}}}(n,r),function od(n,r){const o=n.cleanup,u=r[7];let l=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const y=o[f+1],T="function"==typeof y?y(r):Er(r[y]),P=u[l=o[f+2]],B=o[f+3];"boolean"==typeof B?T.removeEventListener(o[f],P,B):B>=0?u[l=B]():u[l=-B].unsubscribe(),f+=2}else{const y=u[l=o[f+1]];o[f].call(y)}if(null!==u){for(let f=l+1;f<u.length;f++)(0,u[f])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&Tr(r[3])){o!==r[3]&&$l(o,r);const u=r[19];null!==u&&u.detachView(n)}!function Zt(n){ce.delete(n[20])}(r)}}function Sc(n,r,o){return function $u(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const l=n.data[u.directiveStart].encapsulation;if(l===tn.None||l===tn.Emulated)return null}return zr(u,o)}(n,r.parent,o)}function Qa(n,r,o,u,l){n.insertBefore(r,o,u,l)}function ad(n,r,o){n.appendChild(r,o)}function rr(n,r,o,u,l){null!==u?Qa(n,r,o,u,l):ad(n,r,o)}function ld(n,r){return n.parentNode(r)}let Xa,pg=function cd(n,r,o){return 40&n.type?zr(n,o):null};function Hu(n,r,o,u){const l=Sc(n,u,r),f=r[11],T=function Of(n,r,o){return pg(n,r,o)}(u.parent||r[6],u,r);if(null!=l)if(Array.isArray(o))for(let P=0;P<o.length;P++)rr(f,l,o[P],T,!1);else rr(f,l,o,T,!1)}function _u(n,r){if(null!==r){const o=r.type;if(3&o)return zr(r,n);if(4&o)return Gu(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return _u(n,u);{const l=n[r.index];return Tr(l)?Gu(-1,l):Er(l)}}if(32&o)return dl(r,n)()||Er(n[r.index]);{const u=Ff(n,r);return null!==u?Array.isArray(u)?u[0]:_u(hl(n[16]),u):_u(n,r.next)}}return null}function Ff(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Gu(n,r){const o=10+n+1;if(o<r.length){const u=r[o],l=u[1].firstChild;if(null!==l)return _u(u,l)}return r[7]}function fl(n,r,o,u,l,f,y){for(;null!=o;){const T=u[o.index],P=o.type;if(y&&0===r&&(T&&Li(Er(T),u),o.flags|=4),64!=(64&o.flags))if(8&P)fl(n,r,o.child,u,l,f,!1),I(r,n,l,T,f);else if(32&P){const B=dl(o,u);let Y;for(;Y=B();)I(r,n,l,Y,f);I(r,n,l,T,f)}else 16&P?xc(n,r,u,o,l,f):I(r,n,l,T,f);o=y?o.projectionNext:o.next}}function Mc(n,r,o,u,l,f){fl(o,u,n.firstChild,r,l,f,!1)}function xc(n,r,o,u,l,f){const y=o[16],P=y[6].projection[u.projection];if(Array.isArray(P))for(let B=0;B<P.length;B++)I(r,n,l,P[B],f);else fl(n,r,P,y[3],l,f,!0)}function wi(n,r,o){n.setAttribute(r,"style",o)}function Pc(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function mg(n){Xa=n}class yh{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Zu(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var os=(()=>((os=os||{})[os.NONE=0]="NONE",os[os.HTML=1]="HTML",os[os.STYLE=2]="STYLE",os[os.SCRIPT=3]="SCRIPT",os[os.URL=4]="URL",os[os.RESOURCE_URL=5]="RESOURCE_URL",os))();function ql(n){const r=function wd(){const n=At();return n&&n[12]}();return r?r.sanitize(os.URL,n)||"":function zl(n,r){const o=function vh(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?Zu(n):function wh(n){return(n=String(n)).match(_g)?n:"unsafe:"+n}(je(n))}const $f=new _r("ENVIRONMENT_INITIALIZER"),zu=new _r("INJECTOR",-1),Wl=new _r("INJECTOR_DEF_TYPES");class Hf{get(r,o=Wn){if(o===Wn){const u=new Error(`NullInjectorError: No provider for ${A(r)}!`);throw u.name="NullInjectorError",u}return o}}function Gy(...n){return{\u0275providers:Gf(0,n)}}function Gf(n,...r){const o=[],u=new Set;let l;return Si(r,f=>{const y=f;bh(y,o,[],u)&&(l||(l=[]),l.push(y))}),void 0!==l&&Eu(l,o),o}function Eu(n,r){for(let o=0;o<n.length;o++){const{providers:l}=n[o];Si(l,f=>{r.push(f)})}}function bh(n,r,o,u){if(!(n=Te(n)))return!1;let l=null,f=On(n);const y=!f&&Q(n);if(f||y){if(y&&!y.standalone)return!1;l=n}else{const P=n.ngModule;if(f=On(P),!f)return!1;l=P}const T=u.has(l);if(y){if(T)return!1;if(u.add(l),y.dependencies){const P="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const B of P)bh(B,r,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let B;u.add(l);try{Si(f.imports,Y=>{bh(Y,r,o,u)&&(B||(B=[]),B.push(Y))})}finally{}void 0!==B&&Eu(B,r)}if(!T){const B=Hi(l)||(()=>new l);r.push({provide:l,useFactory:B,deps:dn},{provide:Wl,useValue:l,multi:!0},{provide:$f,useValue:()=>Fi(l),multi:!0})}const P=f.providers;null==P||T||Si(P,Y=>{r.push(Y)})}}return l!==n&&void 0!==n.providers}const Dg=b({provide:String,useValue:b});function Nc(n){return null!==n&&"object"==typeof n&&Dg in n}function Ta(n){return"function"==typeof n}const Dh=new _r("Set Injector scope."),kc={},Zf={};let Th;function Ed(){return void 0===Th&&(Th=new Hf),Th}class Kl{}class zf extends Kl{constructor(r,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yl(r,y=>this.processProvider(y)),this.records.set(zu,Fc(void 0,this)),l.has("environment")&&this.records.set(Kl,Fc(void 0,this));const f=this.records.get(Dh);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Wl.multi,dn,Pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ts(this),u=tr(void 0);try{return r()}finally{Ts(o),tr(u)}}get(r,o=Wn,u=Pt.Default){this.assertNotDestroyed();const l=Ts(this),f=tr(void 0);try{if(!(u&Pt.SkipSelf)){let T=this.records.get(r);if(void 0===T){const P=function zy(n){return"function"==typeof n||"object"==typeof n&&n instanceof _r}(r)&&Ot(r);T=P&&this.injectableDefInScope(P)?Fc(Ah(r),kc):null,this.records.set(r,T)}if(null!=T)return this.hydrate(r,T)}return(u&Pt.Self?Ed():this.parent).get(r,o=u&Pt.Optional&&o===Wn?null:o)}catch(y){if("NullInjectorError"===y.name){if((y[ui]=y[ui]||[]).unshift(A(r)),l)throw y;return function Oa(n,r,o,u){const l=n[ui];throw r[ea]&&l.unshift(r[ea]),n.message=function Ka(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=A(r);if(Array.isArray(r))l=r.map(A).join(" -> ");else if("object"==typeof r){let f=[];for(let y in r)if(r.hasOwnProperty(y)){let T=r[y];f.push(y+":"+("string"==typeof T?JSON.stringify(T):A(T)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(Gs,"\n  ")}`}("\n"+n.message,l,o,u),n.ngTokenPath=l,n[ui]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{tr(f),Ts(l)}}resolveInjectorInitializers(){const r=Ts(this),o=tr(void 0);try{const u=this.get($f.multi,dn,Pt.Self);for(const l of u)l()}finally{Ts(r),tr(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(A(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ke(205,!1)}processProvider(r){let o=Ta(r=Te(r))?r:Te(r&&r.provide);const u=function Id(n){return Nc(n)?Fc(void 0,n.useValue):Fc(vl(n),kc)}(r);if(Ta(r)||!0!==r.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Fc(void 0,kc,!0),l.factory=()=>il(l.multi),this.records.set(o,l)),o=r,l.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kc&&(o.value=Zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Zy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Te(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ah(n){const r=Ot(n),o=null!==r?r.factory:Hi(n);if(null!==o)return o;if(n instanceof _r)throw new Ke(204,!1);if(n instanceof Function)return function Sh(n){const r=n.length;if(r>0)throw function Pa(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}(r,"?"),new Ke(204,!1);const o=function Kn(n){const r=n&&(n[Ht]||n[Yn]);if(r){const o=function kn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ke(204,!1)}function vl(n,r,o){let u;if(Ta(n)){const l=Te(n);return Hi(l)||Ah(l)}if(Nc(n))u=()=>Te(n.useValue);else if(function yl(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...il(n.deps||[]));else if(function ml(n){return!(!n||!n.useExisting)}(n))u=()=>Fi(Te(n.useExisting));else{const l=Te(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return Hi(l)||Ah(l);u=()=>new l(...il(n.deps))}return u}function Fc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function qy(n){return!!n.\u0275providers}function Yl(n,r){for(const o of n)Array.isArray(o)?Yl(o,r):qy(o)?Yl(o.\u0275providers,r):r(o)}class qu{}class Ky{resolveComponentFactory(r){throw function Ag(n){const r=Error(`No component factory found for ${A(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ql=(()=>{class n{}return n.NULL=new Ky,n})();function qf(){return Xl(Gr(),At())}function Xl(n,r){return new ec(zr(n,r))}let ec=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=qf,n})();function Wf(n){return n instanceof ec?n.nativeElement:n}class bd{}let Jy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Kf(){const n=At(),o=di(Gr().index,n);return(Lr(o)?o:n)[11]}(),n})(),Mh=(()=>{class n{}return n.\u0275prov=se({token:n,providedIn:"root",factory:()=>null}),n})();class Mg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Yf=new Mg("14.3.0"),tc={};function xh(n){return n.ngOriginalError}class Vc{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&xh(r);for(;o&&xh(o);)o=xh(o);return o||null}}function jo(n){return n instanceof Function?n():n}function Qf(n,r,o){let u=n.length;for(;;){const l=n.indexOf(r,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const f=r.length;if(l+f===u||n.charCodeAt(l+f)<=32)return l}o=l+1}}const Xf="ng-template";function ev(n,r,o){let u=0;for(;u<n.length;){let l=n[u++];if(o&&"class"===l){if(l=n[u],-1!==Qf(l.toLowerCase(),r,0))return!0}else if(1===l){for(;u<n.length&&"string"==typeof(l=n[u++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Td(n){return 4===n.type&&n.value!==Xf}function Rg(n,r,o){return r===(4!==n.type||o?n.value:Xf)}function tv(n,r,o){let u=4;const l=n.attrs||[],f=function Ad(n){for(let r=0;r<n.length;r++)if(Se(n[r]))return r;return n.length}(l);let y=!1;for(let T=0;T<r.length;T++){const P=r[T];if("number"!=typeof P){if(!y)if(4&u){if(u=2|1&u,""!==P&&!Rg(n,P,o)||""===P&&1===r.length){if(Ua(u))return!1;y=!0}}else{const B=8&u?P:r[++T];if(8&u&&null!==n.attrs){if(!ev(n.attrs,B,o)){if(Ua(u))return!1;y=!0}continue}const fe=nv(8&u?"class":P,l,Td(n),o);if(-1===fe){if(Ua(u))return!1;y=!0;continue}if(""!==B){let Ne;Ne=fe>f?"":l[fe+1].toLowerCase();const rt=8&u?Ne:null;if(rt&&-1!==Qf(rt,B,0)||2&u&&B!==Ne){if(Ua(u))return!1;y=!0}}}}else{if(!y&&!Ua(u)&&!Ua(P))return!1;if(y&&Ua(P))continue;y=!1,u=P|1&u}}return Ua(u)||y}function Ua(n){return 0==(1&n)}function nv(n,r,o,u){if(null===r)return-1;let l=0;if(u||!o){let f=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let T=r[++l];for(;"string"==typeof T;)T=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function Og(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ep(n,r,o=!1){for(let u=0;u<r.length;u++)if(tv(n,r[u],o))return!0;return!1}function kg(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],o=1,u=2,l="",f=!1;for(;o<n.length;){let y=n[o];if("string"==typeof y)if(2&u){const T=n[++o];l+="["+y+(T.length>0?'="'+T+'"':"")+"]"}else 8&u?l+="."+y:4&u&&(l+=" "+y);else""!==l&&!Ua(y)&&(r+=kg(f,l),l=""),u=y,f=f||!Ua(u);o++}return""!==l&&(r+=kg(f,l)),r}const er={};function Ss(n){Lg(Hn(),At(),dr()+n,!1)}function Lg(n,r,o,u){if(!u)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&ts(r,f,o)}else{const f=n.preOrderHooks;null!==f&&Ko(r,f,0,o)}mi(o)}function kh(n,r=null,o=null,u){const l=Fh(n,r,o,u);return l.resolveInjectorInitializers(),l}function Fh(n,r=null,o=null,u,l=new Set){const f=[o||dn,Gy(n)];return u=u||("object"==typeof n?void 0:A(n)),new zf(f,r||Ed(),u||null,l)}let eu=(()=>{class n{static create(o,u){if(Array.isArray(o))return kh({name:""},u,o,"");{const l=o.name??"";return kh({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=Wn,n.NULL=new Hf,n.\u0275prov=se({token:n,providedIn:"any",factory:()=>Fi(zu)}),n.__NG_ELEMENT_ID__=-1,n})();function wl(n,r=Pt.Default){const o=At();return null===o?Fi(n,r):Za(Gr(),o,Te(n),r)}function Uh(){throw new Error("invalid")}function Bh(n,r){return n<<17|r<<2}function Ba(n){return n>>17&32767}function cp(n){return 2|n}function Ku(n){return(131068&n)>>2}function zs(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function qh(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],f=o[u+1];if(-1!==f){const y=n.data[f];ki(l),y.contentQueries(2,r[f],f)}}}function Ld(n,r,o,u,l,f,y,T,P,B,Y){const fe=r.blueprint.slice();return fe[0]=l,fe[2]=76|u,(null!==Y||n&&1024&n[2])&&(fe[2]|=1024),qr(fe),fe[3]=fe[15]=n,fe[8]=o,fe[10]=y||n&&n[10],fe[11]=T||n&&n[11],fe[12]=P||n&&n[12]||null,fe[9]=B||n&&n[9]||null,fe[6]=f,fe[20]=function ke(){return be++}(),fe[21]=Y,fe[16]=2==r.type?n[16]:fe,fe}function El(n,r,o,u,l){let f=n.data[r];if(null===f)f=function Vd(n,r,o,u,l){const f=ei(),y=Oo(),P=n.data[r]=function Tp(n,r,o,u,l,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,o,r,u,l);return null===n.firstChild&&(n.firstChild=P),null!==f&&(y?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P)),P}(n,r,o,u,l),function ti(){return Cn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const y=function zi(){const n=Cn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return es(f,!0),f}function Il(n,r,o,u){if(0===o)return-1;const l=r.length;for(let f=0;f<o;f++)r.push(u),n.blueprint.push(u),n.data.push(null);return l}function bl(n,r,o){Co(r);try{const u=n.viewQuery;null!==u&&jd(1,u,o);const l=n.template;null!==l&&Wh(n,r,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qh(n,r),n.staticViewQueries&&jd(2,n.viewQuery,o);const f=n.components;null!==f&&function Ip(n,r){for(let o=0;o<r.length;o++)Mv(n,r[o])}(r,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,Us()}}function tu(n,r,o,u){const l=r[2];if(128!=(128&l)){Co(r);try{qr(r),function lt(n){return Cn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Wh(n,r,o,2,u);const y=3==(3&l);if(y){const B=n.preOrderCheckHooks;null!==B&&ts(r,B,null)}else{const B=n.preOrderHooks;null!==B&&Ko(r,B,0,null),ps(r,0)}if(function Rp(n){for(let r=Ac(n);null!==r;r=w(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const l=o[u],f=l[3];0==(512&l[2])&&to(f,1),l[2]|=512}}}(r),function Av(n){for(let r=Ac(n);null!==r;r=w(r))for(let o=10;o<r.length;o++){const u=r[o],l=u[1];Ro(u)&&tu(l,u,l.template,u[8])}}(r),null!==n.contentQueries&&qh(n,r),y){const B=n.contentCheckHooks;null!==B&&ts(r,B)}else{const B=n.contentHooks;null!==B&&Ko(r,B,1),ps(r,1)}!function wv(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)mi(~l);else{const f=l,y=o[++u],T=o[++u];Di(y,f),T(2,r[f])}}}finally{mi(-1)}}(n,r);const T=n.components;null!==T&&function Cv(n,r){for(let o=0;o<r.length;o++)Sv(n,r[o])}(r,T);const P=n.viewQuery;if(null!==P&&jd(2,P,u),y){const B=n.viewCheckHooks;null!==B&&ts(r,B)}else{const B=n.viewHooks;null!==B&&Ko(r,B,2),ps(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,to(r[3],-1))}finally{Us()}}}function Wh(n,r,o,u,l){const f=dr(),y=2&u;try{mi(-1),y&&r.length>22&&Lg(n,r,22,!1),o(u,l)}finally{mi(f)}}function Dl(n,r,o){!_o()||(function Iv(n,r,o,u){const l=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||Yt(o,r),Li(u,r);const y=o.initialInputs;for(let T=l;T<f;T++){const P=n.data[T],B=Nr(P);B&&Tv(r,o,P);const Y=ha(r,n,T,o);Li(Y,r),null!==y&&Pp(0,T-l,Y,P,0,y),B&&(di(o.index,r)[8]=Y)}}(n,r,o,zr(o,r)),128==(128&o.flags)&&function bv(n,r,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,y=function Is(){return Cn.lFrame.currentDirectiveIndex}();try{mi(f);for(let T=u;T<l;T++){const P=n.data[T],B=r[T];Ls(T),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&lm(P,B)}}finally{mi(-1),Ls(y)}}(n,r,o))}function Kh(n,r,o=zr){const u=r.localNames;if(null!==u){let l=r.index+1;for(let f=0;f<u.length;f+=2){const y=u[f+1],T=-1===y?o(r,n):n[y];n[l++]=T}}}function dc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=bp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function bp(n,r,o,u,l,f,y,T,P,B){const Y=22+u,fe=Y+l,Ne=function Ev(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:er);return o}(Y,fe),rt="function"==typeof B?B():B;return Ne[1]={type:n,blueprint:Ne,template:o,queries:null,viewQuery:T,declTNode:r,data:Ne.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:P,consts:rt,incompleteFirstPass:!1}}function Yh(n,r,o,u){const l=nf(r);null===o?l.push(u):(l.push(o),n.firstCreatePass&&bu(n).push(u,l.length-1))}function rm(n,r,o){for(let u in n)if(n.hasOwnProperty(u)){const l=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,l):o[u]=[r,l]}return o}function im(n,r){const u=r.directiveEnd,l=n.data,f=r.attrs,y=[];let T=null,P=null;for(let B=r.directiveStart;B<u;B++){const Y=l[B],fe=Y.inputs,Ne=null===f||Td(r)?null:dm(fe,f);y.push(Ne),T=rm(fe,B,T),P=rm(Y.outputs,B,P)}null!==T&&(T.hasOwnProperty("class")&&(r.flags|=16),T.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=T,r.outputs=P}function sm(n,r){const o=di(r,n);16&o[2]||(o[2]|=32)}function Jh(n,r,o,u){let l=!1;if(_o()){const f=function Dv(n,r,o){const u=n.directiveRegistry;let l=null;if(u)for(let f=0;f<u.length;f++){const y=u[f];ep(o,y.selectors,!1)&&(l||(l=[]),it(Yt(o,r),n,y.type),Nr(y)?(Qh(n,o),l.unshift(y)):l.push(y))}return l}(n,r,o),y=null===u?null:{"":-1};if(null!==f){l=!0,cm(o,n.data.length,f.length);for(let Y=0;Y<f.length;Y++){const fe=f[Y];fe.providersResolver&&fe.providersResolver(fe)}let T=!1,P=!1,B=Il(n,r,f.length,null);for(let Y=0;Y<f.length;Y++){const fe=f[Y];o.mergedAttrs=Ct(o.mergedAttrs,fe.hostAttrs),Xh(n,o,r,B,fe),xp(B,fe,y),null!==fe.contentQueries&&(o.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(o.flags|=128);const Ne=fe.type.prototype;!T&&(Ne.ngOnChanges||Ne.ngOnInit||Ne.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),T=!0),!P&&(Ne.ngOnChanges||Ne.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),P=!0),B++}im(n,o)}y&&function Mp(n,r,o){if(r){const u=n.localNames=[];for(let l=0;l<r.length;l+=2){const f=o[r[l+1]];if(null==f)throw new Ke(-301,!1);u.push(r[l],f)}}}(o,u,y)}return o.mergedAttrs=Ct(o.mergedAttrs,o.attrs),l}function Sp(n,r,o,u,l,f){const y=f.hostBindings;if(y){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const P=~r.index;(function um(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(T)!=P&&T.push(P),T.push(u,l,y)}}function lm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Qh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;Nr(r)&&(o[""]=n)}}function cm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Xh(n,r,o,u,l){n.data[u]=l;const f=l.factory||(l.factory=Hi(l.type)),y=new io(f,Nr(l),wl);n.blueprint[u]=y,o[u]=y,Sp(n,r,0,u,Il(n,o,l.hostVars,er),l)}function Tv(n,r,o){const u=zr(r,n),l=dc(o),f=n[10],y=$c(n,Ld(n,l,null,o.onPush?32:16,u,r,f,f.createRenderer(u,o),null,null,null));n[r.index]=y}function ja(n,r,o,u,l,f){const y=zr(n,r);!function ef(n,r,o,u,l,f,y){if(null==f)n.removeAttribute(r,l,o);else{const T=null==y?je(f):y(f,u||"",l);n.setAttribute(r,l,T,o)}}(r[11],y,f,n.value,o,u,l)}function Pp(n,r,o,u,l,f){const y=f[r];if(null!==y){const T=u.setInput;for(let P=0;P<y.length;){const B=y[P++],Y=y[P++],fe=y[P++];null!==T?u.setInput(o,fe,B,Y):o[Y]=fe}}}function dm(n,r){let o=null,u=0;for(;u<r.length;){const l=r[u];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,n[l],r[u+1])),u+=2}else u+=2;else u+=4}return o}function tf(n,r,o,u){return new Array(n,!0,!1,r,null,0,u,o,null,null)}function Sv(n,r){const o=di(r,n);if(Ro(o)){const u=o[1];48&o[2]?tu(u,o,u.template,o[8]):o[5]>0&&Ud(o)}}function Ud(n){for(let u=Ac(n);null!==u;u=w(u))for(let l=10;l<u.length;l++){const f=u[l];if(Ro(f))if(512&f[2]){const y=f[1];tu(y,f,y.template,f[8])}else f[5]>0&&Ud(f)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=di(o[u],n);Ro(l)&&l[5]>0&&Ud(l)}}function Mv(n,r){const o=di(r,n),u=o[1];(function Op(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),bl(u,o,o[8])}function $c(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bd(n){for(;n;){n[2]|=32;const r=hl(n);if(ji(n)&&!r)return n;n=r}return null}function Ju(n,r,o,u=!0){const l=r[10];l.begin&&l.begin();try{tu(n,r,n.template,o)}catch(y){throw u&&hm(r,y),y}finally{l.end&&l.end()}}function jd(n,r,o){ki(0),r(n,o)}function nf(n){return n[7]||(n[7]=[])}function bu(n){return n.cleanup||(n.cleanup=[])}function hm(n,r){const o=n[9],u=o?o.get(Vc,null):null;u&&u.handleError(r)}function $d(n,r,o,u,l){for(let f=0;f<o.length;){const y=o[f++],T=o[f++],P=r[y],B=n.data[y];null!==B.setInput?B.setInput(P,l,u,T):P[T]=l}}function Qu(n,r,o){const u=fs(r,n);!function re(n,r,o){n.setValue(r,o)}(n[11],u,o)}function sf(n,r,o){let u=o?n.styles:null,l=o?n.classes:null,f=0;if(null!==r)for(let y=0;y<r.length;y++){const T=r[y];"number"==typeof T?f=T:1==f?l=le(l,T):2==f&&(u=le(u,T+": "+r[++y]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function Hc(n,r,o,u,l=!1){for(;null!==o;){const f=r[o.index];if(null!==f&&u.push(Er(f)),Tr(f))for(let T=10;T<f.length;T++){const P=f[T],B=P[1].firstChild;null!==B&&Hc(P[1],P,B,u)}const y=o.type;if(8&y)Hc(n,r,o.child,u);else if(32&y){const T=dl(o,r);let P;for(;P=T();)u.push(P)}else if(16&y){const T=Ff(r,o);if(Array.isArray(T))u.push(...T);else{const P=hl(r[16]);Hc(P[1],P,T,u,!0)}}o=l?o.projectionNext:o.next}return u}class Hd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Hc(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Tr(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(As(r,u),Hs(o,u))}this._attachedToViewContainer=!1}Hl(this._lView[1],this._lView)}onDestroy(r){Yh(this._lView[1],this._lView,null,r)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ju(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dn(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ke(902,!1);this._appRef=r}}class Np extends Hd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ju(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class kp extends Ql{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Q(r);return new Gc(o,this.ngModule)}}function af(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Fp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const l=this.injector.get(r,tc,u);return l!==tc||o===tc?l:this.parentInjector.get(r,o,u)}}class Gc extends qu{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return af(this.componentDef.inputs)}get outputs(){return af(this.componentDef.outputs)}create(r,o,u,l){let f=(l=l||this.ngModule)instanceof Kl?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Fp(r,f):r,T=y.get(bd,null);if(null===T)throw new Ke(407,!1);const P=y.get(Mh,null),B=T.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",fe=u?function Dp(n,r,o){return n.selectRootElement(r,o===tn.ShadowDom)}(B,u,this.componentDef.encapsulation):dt(B,Y,function Pv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Y)),Ne=this.componentDef.onPush?288:272,rt=bp(0,null,null,1,0,null,null,null,null,null),Tt=Ld(null,rt,null,Ne,null,null,T,B,P,y,null);let $t,en;Co(Tt);try{const Tn=function Vp(n,r,o,u,l,f){const y=o[1];o[22]=n;const P=El(y,22,2,"#host",null),B=P.mergedAttrs=r.hostAttrs;null!==B&&(sf(P,B,!0),null!==n&&(K(l,n,B),null!==P.classes&&Pc(l,n,P.classes),null!==P.styles&&wi(l,n,P.styles)));const Y=u.createRenderer(n,r),fe=Ld(o,dc(r),null,r.onPush?32:16,o[22],P,u,Y,f||null,null,null);return y.firstCreatePass&&(it(Yt(P,o),y,r.type),Qh(y,P),cm(P,o.length,1)),$c(o,fe),o[22]=fe}(fe,this.componentDef,Tt,T,B);if(fe)if(u)K(B,fe,["ng-version",Yf.full]);else{const{attrs:jn,classes:Rt}=function iv(n){const r=[],o=[];let u=1,l=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===l?""!==f&&r.push(f,n[++u]):8===l&&o.push(f);else{if(!Ua(l))break;l=f}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);jn&&K(B,fe,jn),Rt&&Rt.length>0&&Pc(B,fe,Rt.join(" "))}if(en=yo(rt,22),void 0!==o){const jn=en.projection=[];for(let Rt=0;Rt<this.ngContentSelectors.length;Rt++){const qn=o[Rt];jn.push(null!=qn?Array.from(qn):null)}}$t=function Nv(n,r,o,u){const l=o[1],f=function am(n,r,o){const u=Gr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xh(n,u,r,Il(n,r,1,null),o),im(n,u));const l=ha(r,n,u.directiveStart,u);Li(l,r);const f=zr(u,r);return f&&Li(f,r),l}(l,o,r);if(n[8]=o[8]=f,null!==u)for(const T of u)T(f,r);if(r.contentQueries){const T=Gr();r.contentQueries(1,f,T.directiveStart)}const y=Gr();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(mi(y.index),Sp(o[1],y,0,y.directiveStart,y.directiveEnd,r),lm(r,f)),f}(Tn,this.componentDef,Tt,[Up]),bl(rt,Tt,null)}finally{Us()}return new Ov(this.componentType,$t,Xl(en,Tt),Tt,en)}}class Ov extends class Jl{}{constructor(r,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new Np(l),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[r])){const f=this._rootLView;$d(f[1],f,l,r,o),sm(f,this._tNode.index)}}get injector(){return new za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Up(){const n=Gr();bs(At()[1],n)}function Gd(n){let r=function uf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let l;if(Nr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ke(903,!1);l=r.\u0275dir}if(l){if(o){u.push(l);const y=n;y.inputs=hc(n.inputs),y.declaredInputs=hc(n.declaredInputs),y.outputs=hc(n.outputs);const T=l.hostBindings;T&&fm(n,T);const P=l.viewQuery,B=l.contentQueries;if(P&&Fv(n,P),B&&Bp(n,B),ae(n.inputs,l.inputs),ae(n.declaredInputs,l.declaredInputs),ae(n.outputs,l.outputs),Nr(l)&&l.data.animation){const Y=n.data;Y.animation=(Y.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const T=f[y];T&&T.ngInherit&&T(n),T===Gd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function kv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const l=n[u];l.hostVars=r+=l.hostVars,l.hostAttrs=Ct(l.hostAttrs,o=Ct(o,l.hostAttrs))}}(u)}function hc(n){return n===gr?{}:n===dn?[]:n}function Fv(n,r){const o=n.viewQuery;n.viewQuery=o?(u,l)=>{r(u,l),o(u,l)}:r}function Bp(n,r){const o=n.contentQueries;n.contentQueries=o?(u,l,f)=>{r(u,l,f),o(u,l,f)}:r}function fm(n,r){const o=n.hostBindings;n.hostBindings=o?(u,l)=>{r(u,l),o(u,l)}:r}let cf=null;function fc(){if(!cf){const n=Nn.Symbol;if(n&&n.iterator)cf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cf=u)}}}return cf}function Zd(n){return!!zd(n)&&(Array.isArray(n)||!(n instanceof Map)&&fc()in n)}function zd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qs(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function qc(n,r,o,u){const l=At();return qs(l,rn(),r)&&(Hn(),ja(Sr(),l,n,r,o,u)),qc}function mc(n,r,o,u,l,f){const T=function Du(n,r,o,u){const l=qs(n,r,o);return qs(n,r+1,u)||l}(n,function X(){return Cn.lFrame.bindingIndex}(),o,l);return Zn(2),T?r+je(o)+u+je(l)+f:er}function zp(n,r,o,u,l,f,y,T){const P=At(),B=Hn(),Y=n+22,fe=B.firstCreatePass?function Cm(n,r,o,u,l,f,y,T,P){const B=r.consts,Y=El(r,n,4,y||null,Xr(B,T));Jh(r,o,Y,Xr(B,P)),bs(r,Y);const fe=Y.tViews=bp(2,Y,u,l,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,B);return null!==r.queries&&(r.queries.template(r,Y),fe.queries=r.queries.embeddedTView(Y)),Y}(Y,B,P,r,o,u,l,f,y):B.data[Y];es(fe,!1);const Ne=P[11].createComment("");Hu(B,P,Ne,fe),Li(Ne,P),$c(P,P[Y]=tf(Ne,P,Ne,fe)),Os(fe)&&Dl(B,P,fe),null!=y&&Kh(P,fe,T)}function br(n){return Zi(function Br(){return Cn.lFrame.contextLView}(),22+n)}function pf(n,r,o){const u=At();return qs(u,rn(),r)&&function $o(n,r,o,u,l,f,y,T){const P=zr(r,o);let Y,B=r.inputs;!T&&null!=B&&(Y=B[u])?($d(n,o,Y,u,l),Pi(r)&&sm(o,r.index)):3&r.type&&(u=function Ap(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=y?y(l,r.value||"",u):l,f.setProperty(P,u,l))}(Hn(),Sr(),u,n,r,u[11],o,!1),pf}function gf(n,r,o,u,l){const y=l?"class":"style";$d(n,o,r.inputs[y],y,u)}function Wd(n,r,o,u){const l=At(),f=Hn(),y=22+n,T=l[11],P=l[y]=dt(T,r,function Wo(){return Cn.lFrame.currentNamespace}()),B=f.firstCreatePass?function qd(n,r,o,u,l,f,y){const T=r.consts,B=El(r,n,2,l,Xr(T,f));return Jh(r,o,B,Xr(T,y)),null!==B.attrs&&sf(B,B.attrs,!1),null!==B.mergedAttrs&&sf(B,B.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,B),B}(y,f,l,0,r,o,u):f.data[y];es(B,!0);const Y=B.mergedAttrs;null!==Y&&K(T,P,Y);const fe=B.classes;null!==fe&&Pc(T,P,fe);const Ne=B.styles;return null!==Ne&&wi(T,P,Ne),64!=(64&B.flags)&&Hu(f,l,P,B),0===function aa(){return Cn.lFrame.elementDepthCount}()&&Li(P,l),function Ar(){Cn.lFrame.elementDepthCount++}(),Os(B)&&(Dl(f,l,B),function cc(n,r,o){if(Rs(r)){const l=r.directiveEnd;for(let f=r.directiveStart;f<l;f++){const y=n.data[f];y.contentQueries&&y.contentQueries(1,o[f],f)}}}(f,B,l)),null!==u&&Kh(l,B),Wd}function Ci(){let n=Gr();Oo()?function Cs(){Cn.lFrame.isParent=!1}():(n=n.parent,es(n,!1));const r=n;!function Ni(){Cn.lFrame.elementDepthCount--}();const o=Hn();return o.firstCreatePass&&(bs(o,n),Rs(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ou(n){return 0!=(16&n.flags)}(r)&&gf(o,r,At(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function S(n){return 0!=(32&n.flags)}(r)&&gf(o,r,At(),r.stylesWithoutHost,!1),Ci}function Ms(n,r,o,u){return Wd(n,r,o,u),Ci(),Ms}function Em(){return At()}function Kd(n){return!!n&&"function"==typeof n.then}function Im(n){return!!n&&"function"==typeof n.subscribe}const mf=Im;function Yp(n,r,o,u){const l=At(),f=Hn(),y=Gr();return function Lv(n,r,o,u,l,f,y,T){const P=Os(u),Y=n.firstCreatePass&&bu(n),fe=r[8],Ne=nf(r);let rt=!0;if(3&u.type||T){const en=zr(u,r),Tn=T?T(en):en,jn=Ne.length,Rt=T?Qr=>T(Er(Qr[u.index])):u.index;let qn=null;if(!T&&P&&(qn=function Ei(n,r,o,u){const l=n.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===o&&l[f+1]===u){const T=r[7],P=l[f+2];return T.length>P?T[P]:null}"string"==typeof y&&(f+=2)}return null}(n,r,l,u.index)),null!==qn)(qn.__ngLastListenerFn__||qn).__ngNextListenerFn__=f,qn.__ngLastListenerFn__=f,rt=!1;else{f=Qi(u,r,fe,f,!1);const Qr=o.listen(Tn,l,f);Ne.push(f,Qr),Y&&Y.push(l,Rt,jn,jn+1)}}else f=Qi(u,r,fe,f,!1);const Tt=u.outputs;let $t;if(rt&&null!==Tt&&($t=Tt[l])){const en=$t.length;if(en)for(let Tn=0;Tn<en;Tn+=2){const Xi=r[$t[Tn]][$t[Tn+1]].subscribe(f),uh=Ne.length;Ne.push(f,Xi),Y&&Y.push(l,u.index,uh,-(uh+1))}}}(f,l,l[11],y,n,r,0,u),Yp}function Vv(n,r,o,u){try{return!1!==o(u)}catch(l){return hm(n,l),!1}}function Qi(n,r,o,u,l){return function f(y){if(y===Function)return u;Bd(2&n.flags?di(n.index,r):r);let P=Vv(r,0,u,y),B=f.__ngNextListenerFn__;for(;B;)P=Vv(r,0,B,y)&&P,B=B.__ngNextListenerFn__;return l&&!1===P&&(y.preventDefault(),y.returnValue=!1),P}}function Jp(n=1){return function la(n){return(Cn.lFrame.contextLView=function Eo(n,r){for(;n>0;)r=r[15],n--;return r}(n,Cn.lFrame.contextLView))[8]}(n)}function Ml(n,r,o,u,l){const f=n[o+1],y=null===r;let T=u?Ba(f):Ku(f),P=!1;for(;0!==T&&(!1===P||y);){const Y=n[T+1];yf(n[T],r)&&(P=!0,n[T+1]=u?jh(Y):cp(Y)),T=u?Ba(Y):Ku(Y)}P&&(n[o+1]=u?cp(f):jh(f))}function yf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&_(n,r)>=0}const xs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rm(n){return n.substring(xs.key,xs.keyEnd)}function Yd(n,r){const o=xs.textEnd;return o===r?-1:(r=xs.keyEnd=function km(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,xs.key=r,o),Au(n,r,o))}function Au(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function _f(n,r){return function Ho(n,r,o,u){const l=At(),f=Hn(),y=Zn(2);f.firstUpdatePass&&Xd(f,n,y,u),r!==er&&qs(l,y,r)&&$m(f,f.data[dr()],l,l[11],n,l[y+1]=function l0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=A(Zu(n)))),n}(r,o),u,y)}(n,r,null,!0),_f}function tg(n){!function iu(n,r,o,u){const l=Hn(),f=Zn(2);l.firstUpdatePass&&Xd(l,null,f,u);const y=At();if(o!==er&&qs(y,f,o)){const T=l.data[dr()];if(Ef(T,u)&&!Qd(l,f)){let P=u?T.classesWithoutHost:T.stylesWithoutHost;null!==P&&(o=le(P,o||"")),gf(l,T,y,o,u)}else!function nh(n,r,o,u,l,f,y,T){l===er&&(l=dn);let P=0,B=0,Y=0<l.length?l[0]:null,fe=0<f.length?f[0]:null;for(;null!==Y||null!==fe;){const Ne=P<l.length?l[P+1]:void 0,rt=B<f.length?f[B+1]:void 0;let $t,Tt=null;Y===fe?(P+=2,B+=2,Ne!==rt&&(Tt=fe,$t=rt)):null===fe||null!==Y&&Y<fe?(P+=2,Tt=Y):(B+=2,Tt=fe,$t=rt),null!==Tt&&$m(n,r,o,u,Tt,$t,y,T),Y=P<l.length?l[P]:null,fe=B<f.length?f[B]:null}}(l,T,y,y[11],y[f+1],y[f+1]=function th(n,r,o){if(null==o||""===o)return dn;const u=[],l=Zu(o);if(Array.isArray(l))for(let f=0;f<l.length;f++)n(u,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&n(u,f,l[f]);else"string"==typeof l&&r(u,l);return u}(n,r,o),u,f)}}(ys,$a,n,!0)}function $a(n,r){for(let o=function Nm(n){return function Jd(n){xs.key=0,xs.keyEnd=0,xs.value=0,xs.valueEnd=0,xs.textEnd=n.length}(n),Yd(n,Au(n,0,xs.textEnd))}(r);o>=0;o=Yd(r,o))ys(n,Rm(r),!0)}function Qd(n,r){return r>=n.expandoStartIndex}function Xd(n,r,o,u){const l=n.data;if(null===l[o+1]){const f=l[dr()],y=Qd(n,o);Ef(f,u)&&null===r&&!y&&(r=!1),r=function Bm(n,r,o,u){const l=function wo(n){const r=Cn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=u?r.residualClasses:r.residualStyles;if(null===l)0===(u?r.classBindings:r.styleBindings)&&(o=_c(o=Cf(null,n,r,o,u),r.attrs,u),f=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(o=Cf(l,n,r,o,u),null===f){let P=function eh(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==Ku(u))return n[Ba(u)]}(n,r,u);void 0!==P&&Array.isArray(P)&&(P=Cf(null,n,r,P[1],u),P=_c(P,r.attrs,u),function Gv(n,r,o,u){n[Ba(o?r.classBindings:r.styleBindings)]=u}(n,r,u,P))}else f=function wf(n,r,o){let u;const l=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<l;f++)u=_c(u,n[f].hostAttrs,o);return _c(u,r.attrs,o)}(n,r,u)}return void 0!==f&&(u?r.residualClasses=f:r.residualStyles=f),o}(l,f,r,u),function Sl(n,r,o,u,l,f){let y=f?r.classBindings:r.styleBindings,T=Ba(y),P=Ku(y);n[u]=o;let Y,B=!1;if(Array.isArray(o)){const fe=o;Y=fe[1],(null===Y||_(fe,Y)>0)&&(B=!0)}else Y=o;if(l)if(0!==P){const Ne=Ba(n[T+1]);n[u+1]=Bh(Ne,T),0!==Ne&&(n[Ne+1]=zs(n[Ne+1],u)),n[T+1]=function lp(n,r){return 131071&n|r<<17}(n[T+1],u)}else n[u+1]=Bh(T,0),0!==T&&(n[T+1]=zs(n[T+1],u)),T=u;else n[u+1]=Bh(P,0),0===T?T=u:n[P+1]=zs(n[P+1],u),P=u;B&&(n[u+1]=cp(n[u+1])),Ml(n,Y,u,!0),Ml(n,Y,u,!1),function u0(n,r,o,u,l){const f=l?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&_(f,r)>=0&&(o[u+1]=jh(o[u+1]))}(r,Y,n,u,f),y=Bh(T,P),f?r.classBindings=y:r.styleBindings=y}(l,f,r,o,y,u)}}function Cf(n,r,o,u,l){let f=null;const y=o.directiveEnd;let T=o.directiveStylingLast;for(-1===T?T=o.directiveStart:T++;T<y&&(f=r[T],u=_c(u,f.hostAttrs,l),f!==n);)T++;return null!==n&&(o.directiveStylingLast=T),u}function _c(n,r,o){const u=o?1:2;let l=-1;if(null!==r)for(let f=0;f<r.length;f++){const y=r[f];"number"==typeof y?l=y:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ys(n,y,!!o||r[++f]))}return void 0===n?null:n}function $m(n,r,o,u,l,f,y,T){if(!(3&r.type))return;const P=n.data,B=P[T+1];ng(function zg(n){return 1==(1&n)}(B)?wc(P,r,o,l,Ku(B),y):void 0)||(ng(f)||function Od(n){return 2==(2&n)}(B)&&(f=wc(P,null,o,l,T,y)),function xy(n,r,o,u,l){if(r)l?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:ss.DashCase;null==l?n.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=ss.Important),n.setStyle(o,u,l,f))}}(u,y,fs(dr(),o),l,f))}function wc(n,r,o,u,l,f){const y=null===r;let T;for(;l>0;){const P=n[l],B=Array.isArray(P),Y=B?P[1]:P,fe=null===Y;let Ne=o[l+1];Ne===er&&(Ne=fe?dn:void 0);let rt=fe?vi(Ne,u):Y===u?Ne:void 0;if(B&&!ng(rt)&&(rt=vi(P,u)),ng(rt)&&(T=rt,y))return T;const Tt=n[l+1];l=y?Ba(Tt):Ku(Tt)}if(null!==r){let P=f?r.residualClasses:r.residualStyles;null!=P&&(T=vi(P,u))}return T}function ng(n){return void 0!==n}function Ef(n,r){return 0!=(n.flags&(r?16:32))}function Hm(n,r=""){const o=At(),u=Hn(),l=n+22,f=u.firstCreatePass?El(u,l,1,r,null):u.data[l],y=o[l]=function Z(n,r){return n.createText(r)}(o[11],r);Hu(u,o,y,f),es(f,!1)}function Qc(n){return If("",n,""),Qc}function If(n,r,o){const u=At(),l=function Tl(n,r,o,u){return qs(n,rn(),o)?r+je(o)+u:er}(u,n,r,o);return l!==er&&Qu(u,dr(),l),If}function rg(n,r,o,u,l){const f=At(),y=mc(f,n,r,o,u,l);return y!==er&&Qu(f,dr(),y),rg}const bc=void 0;var Kv=["en",[["a","p"],["AM","PM"],bc],[["AM","PM"],bc,bc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bc,"{1} 'at' {0}",bc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let su={};function cy(n){const r=function m0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const u=r.split("-")[0];if(o=hy(u),o)return o;if("en"===u)return Kv;throw new Ke(701,!1)}function dy(n){return cy(n)[Bn.PluralCase]}function hy(n){return n in su||(su[n]=Nn.ng&&Nn.ng.common&&Nn.ng.common.locales&&Nn.ng.common.locales[n]),su[n]}var Bn=(()=>((Bn=Bn||{})[Bn.LocaleId=0]="LocaleId",Bn[Bn.DayPeriodsFormat=1]="DayPeriodsFormat",Bn[Bn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Bn[Bn.DaysFormat=3]="DaysFormat",Bn[Bn.DaysStandalone=4]="DaysStandalone",Bn[Bn.MonthsFormat=5]="MonthsFormat",Bn[Bn.MonthsStandalone=6]="MonthsStandalone",Bn[Bn.Eras=7]="Eras",Bn[Bn.FirstDayOfWeek=8]="FirstDayOfWeek",Bn[Bn.WeekendRange=9]="WeekendRange",Bn[Bn.DateFormat=10]="DateFormat",Bn[Bn.TimeFormat=11]="TimeFormat",Bn[Bn.DateTimeFormat=12]="DateTimeFormat",Bn[Bn.NumberSymbols=13]="NumberSymbols",Bn[Bn.NumberFormats=14]="NumberFormats",Bn[Bn.CurrencyCode=15]="CurrencyCode",Bn[Bn.CurrencySymbol=16]="CurrencySymbol",Bn[Bn.CurrencyName=17]="CurrencyName",Bn[Bn.Currencies=18]="Currencies",Bn[Bn.Directionality=19]="Directionality",Bn[Bn.PluralCase=20]="PluralCase",Bn[Bn.ExtraData=21]="ExtraData",Bn))();const oh="en-US";let og=oh;function n_(n,r,o,u,l){if(n=Te(n),Array.isArray(n))for(let f=0;f<n.length;f++)n_(n[f],r,o,u,l);else{const f=Hn(),y=At();let T=Ta(n)?n:Te(n.provide),P=vl(n);const B=Gr(),Y=1048575&B.providerIndexes,fe=B.directiveStart,Ne=B.providerIndexes>>20;if(Ta(n)||!n.multi){const rt=new io(P,l,wl),Tt=i_(T,r,l?Y:Y+Ne,fe);-1===Tt?(it(Yt(B,y),f,T),r_(f,n,r.length),r.push(T),B.directiveStart++,B.directiveEnd++,l&&(B.providerIndexes+=1048576),o.push(rt),y.push(rt)):(o[Tt]=rt,y[Tt]=rt)}else{const rt=i_(T,r,Y+Ne,fe),Tt=i_(T,r,Y,Y+Ne),$t=rt>=0&&o[rt],en=Tt>=0&&o[Tt];if(l&&!en||!l&&!$t){it(Yt(B,y),f,T);const Tn=function LC(n,r,o,u,l){const f=new io(n,o,wl);return f.multi=[],f.index=r,f.componentProviders=0,R0(f,l,u&&!o),f}(l?FC:kC,o.length,l,u,P);!l&&en&&(o[Tt].providerFactory=Tn),r_(f,n,r.length,0),r.push(T),B.directiveStart++,B.directiveEnd++,l&&(B.providerIndexes+=1048576),o.push(Tn),y.push(Tn)}else r_(f,n,rt>-1?rt:Tt,R0(o[l?Tt:rt],P,!l&&u));!l&&u&&en&&o[Tt].componentProviders++}}}function r_(n,r,o,u){const l=Ta(r),f=function Cd(n){return!!n.useClass}(r);if(l||f){const P=(f?Te(r.useClass):r).prototype.ngOnDestroy;if(P){const B=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Y=B.indexOf(o);-1===Y?B.push(o,[u,P]):B[Y+1].push(u,P)}else B.push(o,P)}}}function R0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,u){for(let l=o;l<u;l++)if(r[l]===n)return l;return-1}function kC(n,r,o,u){return s_(this.multi,[])}function FC(n,r,o,u){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,T=ha(o,o[1],this.providerFactory.index,u);f=T.slice(0,y),s_(l,f);for(let P=y;P<T.length;P++)f.push(T[P])}else f=[],s_(l,f);return f}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function O0(n,r=[]){return o=>{o.providersResolver=(u,l)=>function NC(n,r,o){const u=Hn();if(u.firstCreatePass){const l=Nr(n);n_(o,u.data,u.blueprint,l,!0),n_(r,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,r)}}class Sf{}class N0{}function VC(n,r){return new k0(n,r??null)}class k0 extends Sf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kp(this);const u=kt(r);this._bootstrapComponents=jo(u.bootstrap),this._r3Injector=Fh(r,o,[{provide:Sf,useValue:this},{provide:Ql,useValue:this.componentFactoryResolver}],A(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class o_ extends N0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class UC extends Sf{constructor(r,o,u){super(),this.componentFactoryResolver=new kp(this),this.instance=null;const l=new zf([...r,{provide:Sf,useValue:this},{provide:Ql,useValue:this.componentFactoryResolver}],o||Ed(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function a_(n,r,o=null){return new UC(n,r,o).injector}let BC=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Gf(0,o.type),l=u.length>0?a_([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=se({token:n,providedIn:"environment",factory:()=>new n(Fi(Kl))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get(BC).getOrCreateStandaloneInjector(n)}function H0(n,r,o,u){return G0(At(),O(),n,r,o,u)}function G0(n,r,o,u,l,f){const y=r+o;return qs(n,y,l)?function nu(n,r,o){return n[r]=o}(n,y+1,f?u.call(f,l):u(l)):function lg(n,r){const o=n[r];return o===er?void 0:o}(n,y+1)}function K0(n,r){const o=Hn();let u;const l=n+22;o.firstCreatePass?(u=function iE(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const f=u.factory||(u.factory=Hi(u.type)),y=tr(wl);try{const T=Vn(!1),P=f();return Vn(T),function ff(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,At(),l,P),P}finally{tr(y)}}function Y0(n,r,o){const u=n+22,l=At(),f=Zi(l,u);return function cg(n,r){return n[1].data[r].pure}(l,u)?G0(l,O(),r,f.transform,o,f):f.transform(o)}function l_(n){return r=>{setTimeout(n,void 0,r)}}const Pl=class lE extends d.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let l=r,f=o||(()=>null),y=u;if(r&&"object"==typeof r){const P=r;l=P.next?.bind(P),f=P.error?.bind(P),y=P.complete?.bind(P)}this.__isAsync&&(f=l_(f),l&&(l=l_(l)),y&&(y=l_(y)));const T=super.subscribe({next:l,error:f,complete:y});return r instanceof U.w0&&r.add(T),T}};function cE(){return this._results[fc()]()}class c_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=fc(),u=c_.prototype;u[o]||(u[o]=cE)}get changes(){return this._changes||(this._changes=new Pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const l=Ai(r);(this._changesDetected=!function _a(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],f=r[u];if(o&&(l=o(l),f=o(f)),f!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=fE,n})();const dE=dg,hE=class extends dE{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,l=Ld(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(u)),bl(u,l,r),new Hd(l)}};function fE(){return _y(Gr(),At())}function _y(n,r){return 4&n.type?new hE(r,n,Xl(n,r)):null}let wy=(()=>{class n{}return n.__NG_ELEMENT_ID__=pE,n})();function pE(){return X0(Gr(),At())}const gE=wy,J0=class extends gE{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new za(this._hostTNode,this._hostLView)}get parentInjector(){const r=zt(this._hostTNode,this._hostLView);if(lr(r)){const o=yn(r,this._hostLView),u=zn(r);return new za(o[1].data[u+8],o)}return new za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=Q0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const y=r.createEmbeddedView(o||{},f);return this.insert(y,l),y}createComponent(r,o,u,l,f){const y=r&&!function Qo(n){return"function"==typeof n}(r);let T;if(y)T=o;else{const fe=o||{};T=fe.index,u=fe.injector,l=fe.projectableNodes,f=fe.environmentInjector||fe.ngModuleRef}const P=y?r:new Gc(Q(r)),B=u||this.parentInjector;if(!f&&null==P.ngModule){const Ne=(y?B:this.parentInjector).get(Kl,null);Ne&&(f=Ne)}const Y=P.create(B,l,void 0,f);return this.insert(Y.hostView,T),Y}insert(r,o){const u=r._lView,l=u[1];if(function eo(n){return Tr(n[3])}(u)){const Y=this.indexOf(r);if(-1!==Y)this.detach(Y);else{const fe=u[3],Ne=new J0(fe,fe[6],fe[3]);Ne.detach(Ne.indexOf(r))}}const f=this._adjustIndex(o),y=this._lContainer;!function Ao(n,r,o,u){const l=10+u,f=o.length;u>0&&(o[l-1][4]=r),u<f-10?(r[4]=o[l],au(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const y=r[17];null!==y&&o!==y&&function Zs(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(y,r);const T=r[19];null!==T&&T.insertView(n),r[2]|=64}(l,u,y,f);const T=Gu(f,y),P=u[11],B=ld(P,y[7]);return null!==B&&function Jt(n,r,o,u,l,f){u[0]=l,u[6]=r,Mc(n,u,o,1,l,f)}(l,y[6],P,u,B,T),r.attachToViewContainerRef(),au(d_(y),f,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=Q0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=As(this._lContainer,o);u&&(Hs(d_(this._lContainer),o),Hl(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=As(this._lContainer,o);return u&&null!=Hs(d_(this._lContainer),o)?new Hd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function Q0(n){return n[8]}function d_(n){return n[8]||(n[8]=[])}function X0(n,r){let o;const u=r[n.index];if(Tr(u))o=u;else{let l;if(8&n.type)l=Er(u);else{const f=r[11];l=f.createComment("");const y=zr(n,r);Qa(f,ld(f,y),l,function fg(n,r){return n.nextSibling(r)}(f,y),!1)}r[n.index]=o=tf(u,r,l,n),$c(r,o)}return new J0(o,n,r)}class h_{constructor(r){this.queryList=r,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,l=[];for(let f=0;f<u;f++){const y=o.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new f_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==aw(r,o).matches&&this.queries[o].setDirty()}}class ew{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class p_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(r,l);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new p_(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class g_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new g_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(r,o,vE(o,f)),this.matchTNodeWithReadOption(r,o,Yo(o,r,f,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Yo(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ec||l===wy||l===dg&&4&o.type)this.addMatch(o.index,-2);else{const f=Yo(o,r,l,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function vE(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function wE(n,r,o,u){return-1===o?function _E(n,r){return 11&n.type?Xl(n,r):4&n.type?_y(n,r):null}(r,n):-2===o?function CE(n,r,o){return o===ec?Xl(r,n):o===dg?_y(r,n):o===wy?X0(r,n):void 0}(n,r,u):ha(n,n[1],o,r)}function tw(n,r,o,u){const l=r[19].queries[u];if(null===l.matches){const f=n.data,y=o.matches,T=[];for(let P=0;P<y.length;P+=2){const B=y[P];T.push(B<0?null:wE(r,f[B],y[P+1],o.metadata.read))}l.matches=T}return l.matches}function m_(n,r,o,u){const l=n.queries.getByIndex(o),f=l.matches;if(null!==f){const y=tw(n,r,l,o);for(let T=0;T<f.length;T+=2){const P=f[T];if(P>0)u.push(y[T/2]);else{const B=f[T+1],Y=r[-P];for(let fe=10;fe<Y.length;fe++){const Ne=Y[fe];Ne[17]===Ne[3]&&m_(Ne[1],Ne,B,u)}if(null!==Y[9]){const fe=Y[9];for(let Ne=0;Ne<fe.length;Ne++){const rt=fe[Ne];m_(rt[1],rt,B,u)}}}}}return u}function nw(n){const r=At(),o=Hn(),u=No();ki(u+1);const l=aw(o,u);if(n.dirty&&function vo(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const f=l.crossesNgTemplate?m_(o,r,u,[]):tw(o,r,l,u);n.reset(f,Wf),n.notifyOnChanges()}return!0}return!1}function rw(n,r,o,u){const l=Hn();if(l.firstCreatePass){const f=Gr();(function ow(n,r,o){null===n.queries&&(n.queries=new p_),n.queries.track(new g_(r,o))})(l,new ew(r,o,u),f.index),function bE(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}!function sw(n,r,o){const u=new c_(4==(4&o));Yh(n,r,u,u.destroy),null===r[19]&&(r[19]=new f_),r[19].queries.push(new h_(u))}(l,At(),o)}function iw(){return function IE(n,r){return n[19].queries[r].queryList}(At(),No())}function aw(n,r){return n.queries.getByIndex(r)}function Ey(...n){}const Tw=new _r("Application Initializer");let Iy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Ey,this.reject=Ey,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Kd(f))o.push(f);else if(mf(f)){const y=new Promise((T,P)=>{f.subscribe({complete:T,error:P})});o.push(y)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Fi(Tw,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw=new _r("AppId",{providedIn:"root",factory:function Sw(){return`${C_()}${C_()}${C_()}`}});function C_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mw=new _r("Platform Initializer"),ZE=new _r("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xw=new _r("appBootstrapListener");let zE=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const by=new _r("LocaleId",{providedIn:"root",factory:()=>Fl(by,Pt.Optional|Pt.SkipSelf)||function qE(){return typeof $localize<"u"&&$localize.locale||oh}()}),WE=new _r("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KE{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let YE=(()=>{class n{compileModuleSync(o){return new o_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=jo(kt(o).declarations).reduce((y,T)=>{const P=Q(T);return P&&y.push(new Gc(P)),y},[]);return new KE(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XE=(()=>Promise.resolve(0))();function E_(n){typeof Zone>"u"?XE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Mu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pl(!1),this.onMicrotaskEmpty=new Pl(!1),this.onStable=new Pl(!1),this.onError=new Pl(!1),typeof Zone>"u")throw new Ke(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function eI(){let n=Nn.requestAnimationFrame,r=Nn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rI(n){const r=()=>{!function nI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Nn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,b_(n),n.isCheckStableRunning=!0,I_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),b_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,y,T)=>{try{return Ow(n),o.invokeTask(l,f,y,T)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),Nw(n)}},onInvoke:(o,u,l,f,y,T,P)=>{try{return Ow(n),o.invoke(l,f,y,T,P)}finally{n.shouldCoalesceRunChangeDetection&&r(),Nw(n)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,b_(n),I_(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mu.isInAngularZone())throw new Ke(909,!1)}static assertNotInAngularZone(){if(Mu.isInAngularZone())throw new Ke(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,r,tI,Ey,Ey);try{return f.runTask(y,o,u)}finally{f.cancelTask(y)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const tI={};function I_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function b_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Ow(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Nw(n){n._nesting--,I_(n)}class iI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pl,this.onMicrotaskEmpty=new Pl,this.onStable=new Pl,this.onError=new Pl}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,l){return r.apply(o,u)}}const kw=new _r(""),Fw=new _r("");let D_,sI=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,D_||(function oI(n){D_=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mu.assertNotInAngularZone(),E_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(Fi(Mu),Fi(Lw),Fi(Fw))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),Lw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return D_?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xc=null;const Vw=new _r("AllowMultipleToken"),T_=new _r("PlatformDestroyListeners");class lI{constructor(r,o){this.name=r,this.token=o}}function Bw(n,r,o=[]){const u=`Platform: ${r}`,l=new _r(u);return(f=[])=>{let y=A_();if(!y||y.injector.get(Vw,!1)){const T=[...o,...f,{provide:l,useValue:!0}];n?n(T):function cI(n){if(Xc&&!Xc.get(Vw,!1))throw new Ke(400,!1);Xc=n;const r=n.get($w);(function Uw(n){const r=n.get(Mw,null);r&&r.forEach(o=>o())})(n)}(function jw(n=[],r){return eu.create({name:r,providers:[{provide:Dh,useValue:"platform"},{provide:T_,useValue:new Set([()=>Xc=null])},...n]})}(T,u))}return function hI(n){const r=A_();if(!r)throw new Ke(401,!1);return r}()}}function A_(){return Xc?.get($w)??null}let $w=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function Gw(n,r){let o;return o="noop"===n?new iI:("zone.js"===n?void 0:n)||new Mu(r),o}(u?.ngZone,function Hw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:Mu,useValue:l}];return l.run(()=>{const y=eu.create({providers:f,parent:this.injector,name:o.moduleType.name}),T=o.create(y),P=T.injector.get(Vc,null);if(!P)throw new Ke(402,!1);return l.runOutsideAngular(()=>{const B=l.onError.subscribe({next:Y=>{P.handleError(Y)}});T.onDestroy(()=>{Ty(this._modules,T),B.unsubscribe()})}),function Zw(n,r,o){try{const u=o();return Kd(u)?u.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(P,l,()=>{const B=T.injector.get(Iy);return B.runInitializers(),B.donePromise.then(()=>(function el(n){Je(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(T.injector.get(by,oh)||oh),this._moduleDoBootstrap(T),T))})})}bootstrapModule(o,u=[]){const l=zw({},u);return function aI(n,r,o){const u=new o_(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(Dy);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Ke(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ke(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(T_,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Fi(eu))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function zw(n,r){return Array.isArray(r)?r.reduce(zw,n):{...n,...r}}let Dy=(()=>{class n{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new j.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),y=new j.y(T=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{Mu.assertNotInAngularZone(),E_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{Mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{P.unsubscribe(),B.unsubscribe()}});this.isStable=(0,m.T)(f,y.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof qu;if(!this._injector.get(Iy).done)throw!l&&gt(o),new Ke(405,false);let y;y=l?o:this._injector.get(Ql).resolveComponentFactory(o),this.componentTypes.push(y.componentType);const T=function uI(n){return n.isBoundToModule}(y)?void 0:this._injector.get(Sf),B=y.create(eu.NULL,[],u||y.selector,T),Y=B.location.nativeElement,fe=B.injector.get(kw,null);return fe?.registerApplication(Y),B.onDestroy(()=>{this.detachView(B.hostView),Ty(this.components,B),fe?.unregisterApplication(Y)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new Ke(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ty(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(xw,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ty(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ke(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Fi(Mu),Fi(Kl),Fi(Vc))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ty(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let Ww=!0,Kw=!1;function pI(){return Kw=!0,Ww}function gI(){if(Kw)throw new Error("Cannot enable prod mode after platform setup.");Ww=!1}let mI=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();function yI(n){return function vI(n,r,o){if(Pi(n)&&!o){const u=di(n.index,r);return new Hd(u,u)}return 47&n.type?new Hd(r[16],r):null}(Gr(),At(),16==(16&n))}class Xw{constructor(){}supports(r){return Zd(r)}create(r){return new bI(r)}}const II=(n,r)=>r;class bI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||II}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const y=!u||o&&o.currentIndex<tC(u,l,f)?o:u,T=tC(y,l,f),P=y.currentIndex;if(y===u)l--,u=u._nextRemoved;else if(o=o._next,null==y.previousIndex)l++;else{f||(f=[]);const B=T-l,Y=P-l;if(B!=Y){for(let Ne=0;Ne<B;Ne++){const rt=Ne<f.length?f[Ne]:f[Ne]=0,Tt=rt+Ne;Y<=Tt&&Tt<B&&(f[Ne]=rt+1)}f[y.previousIndex]=Y-B}}T!==P&&r(y,T,P)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Zd(r))throw new Ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,f,y,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let T=0;T<this.length;T++)f=r[T],y=this._trackByFn(T,f),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,f,y,T)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,y,T),u=!0),o=o._next}else l=0,function jp(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[fc()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,T=>{y=this._trackByFn(l,T),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,T,y,l)),Object.is(o.item,T)||this._addIdentityChange(o,T)):(o=this._mismatch(o,T,y,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,l){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,f,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,f,l)):r=this._addAfter(new DI(o,u),f,l),r}_verifyReinsertion(r,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?r=this._reinsertAfter(f,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,f=r._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const l=null===o?this._itHead:o._next;return r._next=l,r._prev=o,null===l?this._itTail=r:l._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new eC),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class DI{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class eC{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new TI,this.map.set(o,u)),u.add(r)}get(r,o){const l=this.map.get(r);return l?l.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tC(n,r,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+r+l}class nC{constructor(){}supports(r){return r instanceof Map||zd(r)}create(){return new AI}}class AI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||zd(r)))throw new Ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,o);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const u=new SI(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class SI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rC(){return new R_([new Xw])}let R_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||rC()),deps:[[n,new hi,new wr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Ke(901,!1)}}return n.\u0275prov=se({token:n,providedIn:"root",factory:rC}),n})();function iC(){return new O_([new nC])}let O_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||iC()),deps:[[n,new hi,new wr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Ke(901,!1)}}return n.\u0275prov=se({token:n,providedIn:"root",factory:iC}),n})();const PI=Bw(null,"core",[]);let RI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Fi(Dy))},n.\u0275mod=Xe({type:n}),n.\u0275inj=We({}),n})();function OI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Lt,ze,N)=>{N.d(ze,{Wl:()=>je,Fj:()=>Ce,u5:()=>no,JJ:()=>wn,JL:()=>cn,F:()=>Lr,On:()=>Fe,YN:()=>go,wV:()=>wt,UX:()=>ro,Q7:()=>Xr,_Y:()=>Pe,Kr:()=>mo});var d=N(4650),U=N(6895),j=N(8996),m=N(9751),de=N(4742),b=N(8421),ae=N(7669),A=N(5403),le=N(3268),ne=N(1810),Te=N(4004);let at=(()=>{class V{constructor(O,X){this._renderer=O,this._elementRef=X,this.onChange=lt=>{},this.onTouched=()=>{}}setProperty(O,X){this._renderer.setProperty(this._elementRef.nativeElement,O,X)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(d.Qsj),d.Y36(d.SBq))},V.\u0275dir=d.lG2({type:V}),V})(),qe=(()=>{class V extends at{}return V.\u0275fac=function(){let k;return function(X){return(k||(k=d.n5z(V)))(X||V)}}(),V.\u0275dir=d.lG2({type:V,features:[d.qOj]}),V})();const Ke=new d.OlP("NgValueAccessor"),ot={provide:Ke,useExisting:(0,d.Gpc)(()=>je),multi:!0};let je=(()=>{class V extends qe{writeValue(O){this.setProperty("checked",O)}}return V.\u0275fac=function(){let k;return function(X){return(k||(k=d.n5z(V)))(X||V)}}(),V.\u0275dir=d.lG2({type:V,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(O,X){1&O&&d.NdJ("change",function(rn){return X.onChange(rn.target.checked)})("blur",function(){return X.onTouched()})},features:[d._Bn([ot]),d.qOj]}),V})();const $e={provide:Ke,useExisting:(0,d.Gpc)(()=>Ce),multi:!0},mt=new d.OlP("CompositionEventMode");let Ce=(()=>{class V extends at{constructor(O,X,lt){super(O,X),this._compositionMode=lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Et(){const V=(0,U.q)()?(0,U.q)().getUserAgent():"";return/android (\d+)/.test(V.toLowerCase())}())}writeValue(O){this.setProperty("value",O??"")}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(mt,8))},V.\u0275dir=d.lG2({type:V,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,X){1&O&&d.NdJ("input",function(rn){return X._handleInput(rn.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(rn){return X._compositionEnd(rn.target.value)})},features:[d._Bn([$e]),d.qOj]}),V})();const vt=new d.OlP("NgValidators"),we=new d.OlP("NgAsyncValidators");function Le(V){return function st(V){return null==V||("string"==typeof V||Array.isArray(V))&&0===V.length}(V.value)?{required:!0}:null}function Me(V){return null}function Ee(V){return null!=V}function ie(V){return(0,d.QGY)(V)?(0,j.D)(V):V}function z(V){let k={};return V.forEach(O=>{k=null!=O?{...k,...O}:k}),0===Object.keys(k).length?null:k}function se(V,k){return k.map(O=>O(V))}function We(V){return V.map(k=>function pe(V){return!V.validate}(k)?k:O=>k.validate(O))}function Xt(V){return null!=V?function Ot(V){if(!V)return null;const k=V.filter(Ee);return 0==k.length?null:function(O){return z(se(O,k))}}(We(V)):null}function Kn(V){return null!=V?function Gn(V){if(!V)return null;const k=V.filter(Ee);return 0==k.length?null:function(O){return function ue(...V){const k=(0,ae.jO)(V),{args:O,keys:X}=(0,de.D)(V),lt=new m.y(rn=>{const{length:Zn}=O;if(!Zn)return void rn.complete();const ti=new Array(Zn);let qi=Zn,Di=Zn;for(let Is=0;Is<Zn;Is++){let Ls=!1;(0,b.Xf)(O[Is]).subscribe((0,A.x)(rn,wo=>{Ls||(Ls=!0,Di--),ti[Is]=wo},()=>qi--,void 0,()=>{(!qi||!Ls)&&(Di||rn.next(X?(0,ne.n)(X,ti):ti),rn.complete())}))}});return k?lt.pipe((0,le.Z)(k)):lt}(se(O,k).map(ie)).pipe((0,Te.U)(z))}}(We(V)):null}function kn(V,k){return null===V?[k]:Array.isArray(V)?[...V,k]:[V,k]}function En(V){return V?Array.isArray(V)?V:[V]:[]}function Yn(V,k){return Array.isArray(V)?V.includes(k):V===k}function ir(V,k){const O=En(k);return En(V).forEach(lt=>{Yn(O,lt)||O.push(lt)}),O}function Pt(V,k){return En(k).filter(O=>!Yn(V,O))}class Mn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(k){this._rawValidators=k||[],this._composedValidatorFn=Xt(this._rawValidators)}_setAsyncValidators(k){this._rawAsyncValidators=k||[],this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(k){this._onDestroyCallbacks.push(k)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(k=>k()),this._onDestroyCallbacks=[]}reset(k){this.control&&this.control.reset(k)}hasError(k,O){return!!this.control&&this.control.hasError(k,O)}getError(k,O){return this.control?this.control.getError(k,O):null}}class pn extends Mn{get formDirective(){return null}get path(){return null}}class tr extends Mn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jr{constructor(k){this._cd=k}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wn=(()=>{class V extends jr{constructor(O){super(O)}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(tr,2))},V.\u0275dir=d.lG2({type:V,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,X){2&O&&d.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)},features:[d.qOj]}),V})(),cn=(()=>{class V extends jr{constructor(O){super(O)}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(pn,10))},V.\u0275dir=d.lG2({type:V,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,X){2&O&&d.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)("ng-submitted",X.isSubmitted)},features:[d.qOj]}),V})();const Xe="VALID",xt="INVALID",ge="PENDING",ye="DISABLED";function ee(V){return(gt(V)?V.validators:V)||null}function Q(V){return Array.isArray(V)?Xt(V):V||null}function q(V,k){return(gt(k)?k.asyncValidators:V)||null}function Re(V){return Array.isArray(V)?Kn(V):V||null}function gt(V){return null!=V&&!Array.isArray(V)&&"object"==typeof V}class he{constructor(k,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=k,this._rawAsyncValidators=O,this._composedValidatorFn=Q(this._rawValidators),this._composedAsyncValidatorFn=Re(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(k){this._rawValidators=this._composedValidatorFn=k}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(k){this._rawAsyncValidators=this._composedAsyncValidatorFn=k}get parent(){return this._parent}get valid(){return this.status===Xe}get invalid(){return this.status===xt}get pending(){return this.status==ge}get disabled(){return this.status===ye}get enabled(){return this.status!==ye}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(k){this._rawValidators=k,this._composedValidatorFn=Q(k)}setAsyncValidators(k){this._rawAsyncValidators=k,this._composedAsyncValidatorFn=Re(k)}addValidators(k){this.setValidators(ir(k,this._rawValidators))}addAsyncValidators(k){this.setAsyncValidators(ir(k,this._rawAsyncValidators))}removeValidators(k){this.setValidators(Pt(k,this._rawValidators))}removeAsyncValidators(k){this.setAsyncValidators(Pt(k,this._rawAsyncValidators))}hasValidator(k){return Yn(this._rawValidators,k)}hasAsyncValidator(k){return Yn(this._rawAsyncValidators,k)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(k={}){this.touched=!0,this._parent&&!k.onlySelf&&this._parent.markAsTouched(k)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(k=>k.markAllAsTouched())}markAsUntouched(k={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}markAsDirty(k={}){this.pristine=!1,this._parent&&!k.onlySelf&&this._parent.markAsDirty(k)}markAsPristine(k={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}markAsPending(k={}){this.status=ge,!1!==k.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!k.onlySelf&&this._parent.markAsPending(k)}disable(k={}){const O=this._parentMarkedDirty(k.onlySelf);this.status=ye,this.errors=null,this._forEachChild(X=>{X.disable({...k,onlySelf:!0})}),this._updateValue(),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...k,skipPristineCheck:O}),this._onDisabledChange.forEach(X=>X(!0))}enable(k={}){const O=this._parentMarkedDirty(k.onlySelf);this.status=Xe,this._forEachChild(X=>{X.enable({...k,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent}),this._updateAncestors({...k,skipPristineCheck:O}),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(k){this._parent&&!k.onlySelf&&(this._parent.updateValueAndValidity(k),k.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(k){this._parent=k}getRawValue(){return this.value}updateValueAndValidity(k={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xe||this.status===ge)&&this._runAsyncValidator(k.emitEvent)),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!k.onlySelf&&this._parent.updateValueAndValidity(k)}_updateTreeValidity(k={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(k)),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ye:Xe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(k){if(this.asyncValidator){this.status=ge,this._hasOwnPendingAsyncValidator=!0;const O=ie(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:k})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(k,O={}){this.errors=k,this._updateControlsErrors(!1!==O.emitEvent)}get(k){let O=k;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((X,lt)=>X&&X._find(lt),this)}getError(k,O){const X=O?this.get(O):this;return X&&X.errors?X.errors[k]:null}hasError(k,O){return!!this.getError(k,O)}get root(){let k=this;for(;k._parent;)k=k._parent;return k}_updateControlsErrors(k){this.status=this._calculateStatus(),k&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(k)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ye:this.errors?xt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ge)?ge:this._anyControlsHaveStatus(xt)?xt:Xe}_anyControlsHaveStatus(k){return this._anyControls(O=>O.status===k)}_anyControlsDirty(){return this._anyControls(k=>k.dirty)}_anyControlsTouched(){return this._anyControls(k=>k.touched)}_updatePristine(k={}){this.pristine=!this._anyControlsDirty(),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}_updateTouched(k={}){this.touched=this._anyControlsTouched(),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}_registerOnCollectionChange(k){this._onCollectionChange=k}_setUpdateStrategy(k){gt(k)&&null!=k.updateOn&&(this._updateOn=k.updateOn)}_parentMarkedDirty(k){return!k&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(k){return null}}class me extends he{constructor(k,O,X){super(ee(O),q(X,O)),this.controls=k,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(k,O){return this.controls[k]?this.controls[k]:(this.controls[k]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(k,O,X={}){this.registerControl(k,O),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(k,O={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(k,O,X={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],O&&this.registerControl(k,O),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(k){return this.controls.hasOwnProperty(k)&&this.controls[k].enabled}setValue(k,O={}){(function Qt(V,k,O){V._forEachChild((X,lt)=>{if(void 0===O[lt])throw new d.vHH(1002,"")})})(this,0,k),Object.keys(k).forEach(X=>{(function kt(V,k,O){const X=V.controls;if(!(k?Object.keys(X):X).length)throw new d.vHH(1e3,"");if(!X[O])throw new d.vHH(1001,"")})(this,!0,X),this.controls[X].setValue(k[X],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(k,O={}){null!=k&&(Object.keys(k).forEach(X=>{const lt=this.controls[X];lt&&lt.patchValue(k[X],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(k={},O={}){this._forEachChild((X,lt)=>{X.reset(k[lt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(k,O,X)=>(k[X]=O.getRawValue(),k))}_syncPendingControls(){let k=this._reduceChildren(!1,(O,X)=>!!X._syncPendingControls()||O);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_forEachChild(k){Object.keys(this.controls).forEach(O=>{const X=this.controls[O];X&&k(X,O)})}_setUpControls(){this._forEachChild(k=>{k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(k){for(const[O,X]of Object.entries(this.controls))if(this.contains(O)&&k(X))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,X,lt)=>((X.enabled||this.disabled)&&(O[lt]=X.value),O))}_reduceChildren(k,O){let X=k;return this._forEachChild((lt,rn)=>{X=O(X,lt,rn)}),X}_allControlsDisabled(){for(const k of Object.keys(this.controls))if(this.controls[k].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(k){return this.controls.hasOwnProperty(k)?this.controls[k]:null}}function He(V,k){mn(V,k),k.valueAccessor.writeValue(V.value),V.disabled&&k.valueAccessor.setDisabledState?.(!0),function Fn(V,k){k.valueAccessor.registerOnChange(O=>{V._pendingValue=O,V._pendingChange=!0,V._pendingDirty=!0,"change"===V.updateOn&&Rn(V,k)})}(V,k),function Kr(V,k){const O=(X,lt)=>{k.valueAccessor.writeValue(X),lt&&k.viewToModelUpdate(X)};V.registerOnChange(O),k._registerOnDestroy(()=>{V._unregisterOnChange(O)})}(V,k),function Rr(V,k){k.valueAccessor.registerOnTouched(()=>{V._pendingTouched=!0,"blur"===V.updateOn&&V._pendingChange&&Rn(V,k),"submit"!==V.updateOn&&V.markAsTouched()})}(V,k),function Dt(V,k){if(k.valueAccessor.setDisabledState){const O=X=>{k.valueAccessor.setDisabledState(X)};V.registerOnDisabledChange(O),k._registerOnDestroy(()=>{V._unregisterOnDisabledChange(O)})}}(V,k)}function bt(V,k){V.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(k)})}function mn(V,k){const O=function On(V){return V._rawValidators}(V);null!==k.validator?V.setValidators(kn(O,k.validator)):"function"==typeof O&&V.setValidators([O]);const X=function Ht(V){return V._rawAsyncValidators}(V);null!==k.asyncValidator?V.setAsyncValidators(kn(X,k.asyncValidator)):"function"==typeof X&&V.setAsyncValidators([X]);const lt=()=>V.updateValueAndValidity();bt(k._rawValidators,lt),bt(k._rawAsyncValidators,lt)}function Rn(V,k){V._pendingDirty&&V.markAsDirty(),V.setValue(V._pendingValue,{emitModelToViewChange:!1}),k.viewToModelUpdate(V._pendingValue),V._pendingChange=!1}const Or={provide:pn,useExisting:(0,d.Gpc)(()=>Lr)},gi=(()=>Promise.resolve())();let Lr=(()=>{class V extends pn{constructor(O,X){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new me({},Xt(O),Kn(X))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(O){gi.then(()=>{const X=this._findContainer(O.path);O.control=X.registerControl(O.name,O.control),He(O.control,O),O.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(O)})}getControl(O){return this.form.get(O.path)}removeControl(O){gi.then(()=>{const X=this._findContainer(O.path);X&&X.removeControl(O.name),this._directives.delete(O)})}addFormGroup(O){gi.then(()=>{const X=this._findContainer(O.path),lt=new me({});(function Yr(V,k){mn(V,k)})(lt,O),X.registerControl(O.name,lt),lt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(O){gi.then(()=>{const X=this._findContainer(O.path);X&&X.removeControl(O.name)})}getFormGroup(O){return this.form.get(O.path)}updateModel(O,X){gi.then(()=>{this.form.get(O.path).setValue(X)})}setValue(O){this.control.setValue(O)}onSubmit(O){return this.submitted=!0,function Dr(V,k){V._syncPendingControls(),k.forEach(O=>{const X=O.control;"submit"===X.updateOn&&X._pendingChange&&(O.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(O),"dialog"===O?.target?.method}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(O){return O.pop(),O.length?this.form.get(O):this.form}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(vt,10),d.Y36(we,10))},V.\u0275dir=d.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(O,X){1&O&&d.NdJ("submit",function(rn){return X.onSubmit(rn)})("reset",function(){return X.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Or]),d.qOj]}),V})();function Tr(V,k){const O=V.indexOf(k);O>-1&&V.splice(O,1)}function Rs(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}const Pi=class extends he{constructor(k=null,O,X){super(ee(O),q(X,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(k),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gt(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=Rs(k)?k.value:k)}setValue(k,O={}){this.value=this._pendingValue=k,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(k,O={}){this.setValue(k,O)}reset(k=this.defaultValue,O={}){this._applyFormState(k),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(k){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(k){this._onChange.push(k)}_unregisterOnChange(k){Tr(this._onChange,k)}registerOnDisabledChange(k){this._onDisabledChange.push(k)}_unregisterOnDisabledChange(k){Tr(this._onDisabledChange,k)}_forEachChild(k){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(k){Rs(k)?(this.value=this._pendingValue=k.value,k.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=k}},fo={provide:tr,useExisting:(0,d.Gpc)(()=>Fe)},po=(()=>Promise.resolve())();let Fe=(()=>{class V extends tr{constructor(O,X,lt,rn,Zn){super(),this._changeDetectorRef=Zn,this.control=new Pi,this._registered=!1,this.update=new d.vpe,this._parent=O,this._setValidators(X),this._setAsyncValidators(lt),this.valueAccessor=function Bi(V,k){if(!k)return null;let O,X,lt;return Array.isArray(k),k.forEach(rn=>{rn.constructor===Ce?O=rn:function pi(V){return Object.getPrototypeOf(V.constructor)===qe}(rn)?X=rn:lt=rn}),lt||X||O||null}(0,rn)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const X=O.name.previousValue;this.formDirective.removeControl({name:X,path:this._getPath(X)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),function Ks(V,k){if(!V.hasOwnProperty("model"))return!1;const O=V.model;return!!O.isFirstChange()||!Object.is(k,O.currentValue)}(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){He(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){po.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(O){const X=O.isDisabled.currentValue,lt=0!==X&&(0,d.D6c)(X);po.then(()=>{lt&&!this.control.disabled?this.control.disable():!lt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(O){return this._parent?function sn(V,k){return[...k.path,V]}(O,this._parent):[O]}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(pn,9),d.Y36(vt,10),d.Y36(we,10),d.Y36(Ke,10),d.Y36(d.sBO,8))},V.\u0275dir=d.lG2({type:V,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([fo]),d.qOj,d.TTD]}),V})(),Pe=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275dir=d.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),V})();const Qe={provide:Ke,useExisting:(0,d.Gpc)(()=>wt),multi:!0};let wt=(()=>{class V extends qe{writeValue(O){this.setProperty("value",O??"")}registerOnChange(O){this.onChange=X=>{O(""==X?null:parseFloat(X))}}}return V.\u0275fac=function(){let k;return function(X){return(k||(k=d.n5z(V)))(X||V)}}(),V.\u0275dir=d.lG2({type:V,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(O,X){1&O&&d.NdJ("input",function(rn){return X.onChange(rn.target.value)})("blur",function(){return X.onTouched()})},features:[d._Bn([Qe]),d.qOj]}),V})(),Jn=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=d.oAB({type:V}),V.\u0275inj=d.cJS({}),V})();const kr=new d.OlP("NgModelWithFormControlWarning"),Oi={provide:Ke,useExisting:(0,d.Gpc)(()=>ci),multi:!0};function Qs(V,k){return null==V?`${k}`:(k&&"object"==typeof k&&(k="Object"),`${V}: ${k}`.slice(0,50))}let ci=(()=>{class V extends qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){this.value=O;const lt=Qs(this._getOptionId(O),O);this.setProperty("value",lt)}registerOnChange(O){this.onChange=X=>{this.value=this._getOptionValue(X),O(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(O){for(const X of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(X),O))return X;return null}_getOptionValue(O){const X=function Hr(V){return V.split(":")[0]}(O);return this._optionMap.has(X)?this._optionMap.get(X):O}}return V.\u0275fac=function(){let k;return function(X){return(k||(k=d.n5z(V)))(X||V)}}(),V.\u0275dir=d.lG2({type:V,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(O,X){1&O&&d.NdJ("change",function(rn){return X.onChange(rn.target.value)})("blur",function(){return X.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([Oi]),d.qOj]}),V})(),go=(()=>{class V{constructor(O,X,lt){this._element=O,this._renderer=X,this._select=lt,this._select&&(this.id=this._select._registerOption())}set ngValue(O){null!=this._select&&(this._select._optionMap.set(this.id,O),this._setElementValue(Qs(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._setElementValue(O),this._select&&this._select.writeValue(this._select.value)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(ci,9))},V.\u0275dir=d.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),V})();const Xs={provide:Ke,useExisting:(0,d.Gpc)(()=>hs),multi:!0};function Ma(V,k){return null==V?`${k}`:("string"==typeof k&&(k=`'${k}'`),k&&"object"==typeof k&&(k="Object"),`${V}: ${k}`.slice(0,50))}let hs=(()=>{class V extends qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){let X;if(this.value=O,Array.isArray(O)){const lt=O.map(rn=>this._getOptionId(rn));X=(rn,Zn)=>{rn._setSelected(lt.indexOf(Zn.toString())>-1)}}else X=(lt,rn)=>{lt._setSelected(!1)};this._optionMap.forEach(X)}registerOnChange(O){this.onChange=X=>{const lt=[],rn=X.selectedOptions;if(void 0!==rn){const Zn=rn;for(let ti=0;ti<Zn.length;ti++){const Di=this._getOptionValue(Zn[ti].value);lt.push(Di)}}else{const Zn=X.options;for(let ti=0;ti<Zn.length;ti++){const qi=Zn[ti];if(qi.selected){const Di=this._getOptionValue(qi.value);lt.push(Di)}}}this.value=lt,O(lt)}}_registerOption(O){const X=(this._idCounter++).toString();return this._optionMap.set(X,O),X}_getOptionId(O){for(const X of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(X)._value,O))return X;return null}_getOptionValue(O){const X=function oa(V){return V.split(":")[0]}(O);return this._optionMap.has(X)?this._optionMap.get(X)._value:O}}return V.\u0275fac=function(){let k;return function(X){return(k||(k=d.n5z(V)))(X||V)}}(),V.\u0275dir=d.lG2({type:V,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(O,X){1&O&&d.NdJ("change",function(rn){return X.onChange(rn.target)})("blur",function(){return X.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([Xs]),d.qOj]}),V})(),mo=(()=>{class V{constructor(O,X,lt){this._element=O,this._renderer=X,this._select=lt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(O){null!=this._select&&(this._value=O,this._setElementValue(Ma(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._select?(this._value=O,this._setElementValue(Ma(this.id,O)),this._select.writeValue(this._select.value)):this._setElementValue(O)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}_setSelected(O){this._renderer.setProperty(this._element.nativeElement,"selected",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return V.\u0275fac=function(O){return new(O||V)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(hs,9))},V.\u0275dir=d.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),V})(),Gi=(()=>{class V{constructor(){this._validator=Me}ngOnChanges(O){if(this.inputName in O){const X=this.normalizeInput(O[this.inputName].currentValue);this._enabled=this.enabled(X),this._validator=this._enabled?this.createValidator(X):Me,this._onChange&&this._onChange()}}validate(O){return this._validator(O)}registerOnValidatorChange(O){this._onChange=O}enabled(O){return null!=O}}return V.\u0275fac=function(O){return new(O||V)},V.\u0275dir=d.lG2({type:V,features:[d.TTD]}),V})();const Ro={provide:vt,useExisting:(0,d.Gpc)(()=>Xr),multi:!0};let Xr=(()=>{class V extends Gi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=O=>Le}enabled(O){return O}}return V.\u0275fac=function(){let k;return function(X){return(k||(k=d.n5z(V)))(X||V)}}(),V.\u0275dir=d.lG2({type:V,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(O,X){2&O&&d.uIk("required",X._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([Ro]),d.qOj]}),V})(),Hn=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=d.oAB({type:V}),V.\u0275inj=d.cJS({imports:[Jn]}),V})(),no=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=d.oAB({type:V}),V.\u0275inj=d.cJS({imports:[Hn]}),V})(),ro=(()=>{class V{static withConfig(O){return{ngModule:V,providers:[{provide:kr,useValue:O.warnOnNgModelWithFormControl}]}}}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=d.oAB({type:V}),V.\u0275inj=d.cJS({imports:[Hn]}),V})()},1481:(Lt,ze,N)=>{N.d(ze,{Dx:()=>wn,b2:()=>pn,q6:()=>Yn});var d=N(6895),U=N(4650);class j extends d.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class m extends j{static makeCurrent(){(0,d.HT)(new m)}onAndCancel(me,oe,Ue){return me.addEventListener(oe,Ue,!1),()=>{me.removeEventListener(oe,Ue,!1)}}dispatchEvent(me,oe){me.dispatchEvent(oe)}remove(me){me.parentNode&&me.parentNode.removeChild(me)}createElement(me,oe){return(oe=oe||this.getDefaultDocument()).createElement(me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(me){return me.nodeType===Node.ELEMENT_NODE}isShadowRoot(me){return me instanceof DocumentFragment}getGlobalEventTarget(me,oe){return"window"===oe?window:"document"===oe?me:"body"===oe?me.body:null}getBaseHref(me){const oe=function b(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==oe?null:function A(he){ae=ae||document.createElement("a"),ae.setAttribute("href",he);const me=ae.pathname;return"/"===me.charAt(0)?me:`/${me}`}(oe)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(me){return(0,d.Mx)(document.cookie,me)}}let ae,de=null;const le=new U.OlP("TRANSITION_ID"),ue=[{provide:U.ip1,useFactory:function ne(he,me,oe){return()=>{oe.get(U.CZH).donePromise.then(()=>{const Ue=(0,d.q)(),nt=me.querySelectorAll(`style[ng-transition="${he}"]`);for(let Ft=0;Ft<nt.length;Ft++)Ue.remove(nt[Ft])})}},deps:[le,d.K0,U.zs3],multi:!0}];let at=(()=>{class he{build(){return new XMLHttpRequest}}return he.\u0275fac=function(oe){return new(oe||he)},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})();const qe=new U.OlP("EventManagerPlugins");let Ke=(()=>{class he{constructor(oe,Ue){this._zone=Ue,this._eventNameToPlugin=new Map,oe.forEach(nt=>nt.manager=this),this._plugins=oe.slice().reverse()}addEventListener(oe,Ue,nt){return this._findPluginFor(Ue).addEventListener(oe,Ue,nt)}addGlobalEventListener(oe,Ue,nt){return this._findPluginFor(Ue).addGlobalEventListener(oe,Ue,nt)}getZone(){return this._zone}_findPluginFor(oe){const Ue=this._eventNameToPlugin.get(oe);if(Ue)return Ue;const nt=this._plugins;for(let Ft=0;Ft<nt.length;Ft++){const sn=nt[Ft];if(sn.supports(oe))return this._eventNameToPlugin.set(oe,sn),sn}throw new Error(`No event manager plugin found for event ${oe}`)}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(qe),U.LFG(U.R0b))},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})();class ot{constructor(me){this._doc=me}addGlobalEventListener(me,oe,Ue){const nt=(0,d.q)().getGlobalEventTarget(this._doc,me);if(!nt)throw new Error(`Unsupported event target ${nt} for event ${oe}`);return this.addEventListener(nt,oe,Ue)}}let je=(()=>{class he{constructor(){this._stylesSet=new Set}addStyles(oe){const Ue=new Set;oe.forEach(nt=>{this._stylesSet.has(nt)||(this._stylesSet.add(nt),Ue.add(nt))}),this.onStylesAdded(Ue)}onStylesAdded(oe){}getAllStyles(){return Array.from(this._stylesSet)}}return he.\u0275fac=function(oe){return new(oe||he)},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})(),$e=(()=>{class he extends je{constructor(oe){super(),this._doc=oe,this._hostNodes=new Map,this._hostNodes.set(oe.head,[])}_addStylesToHost(oe,Ue,nt){oe.forEach(Ft=>{const sn=this._doc.createElement("style");sn.textContent=Ft,nt.push(Ue.appendChild(sn))})}addHost(oe){const Ue=[];this._addStylesToHost(this._stylesSet,oe,Ue),this._hostNodes.set(oe,Ue)}removeHost(oe){const Ue=this._hostNodes.get(oe);Ue&&Ue.forEach(Et),this._hostNodes.delete(oe)}onStylesAdded(oe){this._hostNodes.forEach((Ue,nt)=>{this._addStylesToHost(oe,nt,Ue)})}ngOnDestroy(){this._hostNodes.forEach(oe=>oe.forEach(Et))}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(d.K0))},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})();function Et(he){(0,d.q)().remove(he)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ce=/%COMP%/g;function xe(he,me,oe){for(let Ue=0;Ue<me.length;Ue++){let nt=me[Ue];Array.isArray(nt)?xe(he,nt,oe):(nt=nt.replace(Ce,he),oe.push(nt))}return oe}function Ae(he){return me=>{if("__ngUnwrap__"===me)return he;!1===he(me)&&(me.preventDefault(),me.returnValue=!1)}}let Le=(()=>{class he{constructor(oe,Ue,nt){this.eventManager=oe,this.sharedStylesHost=Ue,this.appId=nt,this.rendererByCompId=new Map,this.defaultRenderer=new Ut(oe)}createRenderer(oe,Ue){if(!oe||!Ue)return this.defaultRenderer;switch(Ue.encapsulation){case U.ifc.Emulated:{let nt=this.rendererByCompId.get(Ue.id);return nt||(nt=new Je(this.eventManager,this.sharedStylesHost,Ue,this.appId),this.rendererByCompId.set(Ue.id,nt)),nt.applyToHost(oe),nt}case 1:case U.ifc.ShadowDom:return new Me(this.eventManager,this.sharedStylesHost,oe,Ue);default:if(!this.rendererByCompId.has(Ue.id)){const nt=xe(Ue.id,Ue.styles,[]);this.sharedStylesHost.addStyles(nt),this.rendererByCompId.set(Ue.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(Ke),U.LFG($e),U.LFG(U.AFp))},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})();class Ut{constructor(me){this.eventManager=me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(me,oe){return oe?document.createElementNS(mt[oe]||oe,me):document.createElement(me)}createComment(me){return document.createComment(me)}createText(me){return document.createTextNode(me)}appendChild(me,oe){(Ye(me)?me.content:me).appendChild(oe)}insertBefore(me,oe,Ue){me&&(Ye(me)?me.content:me).insertBefore(oe,Ue)}removeChild(me,oe){me&&me.removeChild(oe)}selectRootElement(me,oe){let Ue="string"==typeof me?document.querySelector(me):me;if(!Ue)throw new Error(`The selector "${me}" did not match any elements`);return oe||(Ue.textContent=""),Ue}parentNode(me){return me.parentNode}nextSibling(me){return me.nextSibling}setAttribute(me,oe,Ue,nt){if(nt){oe=nt+":"+oe;const Ft=mt[nt];Ft?me.setAttributeNS(Ft,oe,Ue):me.setAttribute(oe,Ue)}else me.setAttribute(oe,Ue)}removeAttribute(me,oe,Ue){if(Ue){const nt=mt[Ue];nt?me.removeAttributeNS(nt,oe):me.removeAttribute(`${Ue}:${oe}`)}else me.removeAttribute(oe)}addClass(me,oe){me.classList.add(oe)}removeClass(me,oe){me.classList.remove(oe)}setStyle(me,oe,Ue,nt){nt&(U.JOm.DashCase|U.JOm.Important)?me.style.setProperty(oe,Ue,nt&U.JOm.Important?"important":""):me.style[oe]=Ue}removeStyle(me,oe,Ue){Ue&U.JOm.DashCase?me.style.removeProperty(oe):me.style[oe]=""}setProperty(me,oe,Ue){me[oe]=Ue}setValue(me,oe){me.nodeValue=oe}listen(me,oe,Ue){return"string"==typeof me?this.eventManager.addGlobalEventListener(me,oe,Ae(Ue)):this.eventManager.addEventListener(me,oe,Ae(Ue))}}function Ye(he){return"TEMPLATE"===he.tagName&&void 0!==he.content}class Je extends Ut{constructor(me,oe,Ue,nt){super(me),this.component=Ue;const Ft=xe(nt+"-"+Ue.id,Ue.styles,[]);oe.addStyles(Ft),this.contentAttr=function we(he){return"_ngcontent-%COMP%".replace(Ce,he)}(nt+"-"+Ue.id),this.hostAttr=function _t(he){return"_nghost-%COMP%".replace(Ce,he)}(nt+"-"+Ue.id)}applyToHost(me){super.setAttribute(me,this.hostAttr,"")}createElement(me,oe){const Ue=super.createElement(me,oe);return super.setAttribute(Ue,this.contentAttr,""),Ue}}class Me extends Ut{constructor(me,oe,Ue,nt){super(me),this.sharedStylesHost=oe,this.hostEl=Ue,this.shadowRoot=Ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ft=xe(nt.id,nt.styles,[]);for(let sn=0;sn<Ft.length;sn++){const He=document.createElement("style");He.textContent=Ft[sn],this.shadowRoot.appendChild(He)}}nodeOrShadowRoot(me){return me===this.hostEl?this.shadowRoot:me}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(me,oe){return super.appendChild(this.nodeOrShadowRoot(me),oe)}insertBefore(me,oe,Ue){return super.insertBefore(this.nodeOrShadowRoot(me),oe,Ue)}removeChild(me,oe){return super.removeChild(this.nodeOrShadowRoot(me),oe)}parentNode(me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(me)))}}let Ee=(()=>{class he extends ot{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Ue,nt){return oe.addEventListener(Ue,nt,!1),()=>this.removeEventListener(oe,Ue,nt)}removeEventListener(oe,Ue,nt){return oe.removeEventListener(Ue,nt)}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(d.K0))},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})();const ie=["alt","control","meta","shift"],z={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},se={alt:he=>he.altKey,control:he=>he.ctrlKey,meta:he=>he.metaKey,shift:he=>he.shiftKey};let pe=(()=>{class he extends ot{constructor(oe){super(oe)}supports(oe){return null!=he.parseEventName(oe)}addEventListener(oe,Ue,nt){const Ft=he.parseEventName(Ue),sn=he.eventCallback(Ft.fullKey,nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,d.q)().onAndCancel(oe,Ft.domEventName,sn))}static parseEventName(oe){const Ue=oe.toLowerCase().split("."),nt=Ue.shift();if(0===Ue.length||"keydown"!==nt&&"keyup"!==nt)return null;const Ft=he._normalizeKey(Ue.pop());let sn="",He=Ue.indexOf("code");if(He>-1&&(Ue.splice(He,1),sn="code."),ie.forEach(bt=>{const Dt=Ue.indexOf(bt);Dt>-1&&(Ue.splice(Dt,1),sn+=bt+".")}),sn+=Ft,0!=Ue.length||0===Ft.length)return null;const Ge={};return Ge.domEventName=nt,Ge.fullKey=sn,Ge}static matchEventFullKeyCode(oe,Ue){let nt=z[oe.key]||oe.key,Ft="";return Ue.indexOf("code.")>-1&&(nt=oe.code,Ft="code."),!(null==nt||!nt)&&(nt=nt.toLowerCase()," "===nt?nt="space":"."===nt&&(nt="dot"),ie.forEach(sn=>{sn!==nt&&(0,se[sn])(oe)&&(Ft+=sn+".")}),Ft+=nt,Ft===Ue)}static eventCallback(oe,Ue,nt){return Ft=>{he.matchEventFullKeyCode(Ft,oe)&&nt.runGuarded(()=>Ue(Ft))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(d.K0))},he.\u0275prov=U.Yz7({token:he,factory:he.\u0275fac}),he})();const Yn=(0,U.eFA)(U._c5,"browser",[{provide:U.Lbi,useValue:d.bD},{provide:U.g9A,useValue:function kn(){m.makeCurrent()},multi:!0},{provide:d.K0,useFactory:function Ht(){return(0,U.RDi)(document),document},deps:[]}]),ir=new U.OlP(""),Pt=[{provide:U.rWj,useClass:class Te{addToWindow(me){U.dqk.getAngularTestability=(Ue,nt=!0)=>{const Ft=me.findTestabilityInTree(Ue,nt);if(null==Ft)throw new Error("Could not find testability for element.");return Ft},U.dqk.getAllAngularTestabilities=()=>me.getAllTestabilities(),U.dqk.getAllAngularRootElements=()=>me.getAllRootElements(),U.dqk.frameworkStabilizers||(U.dqk.frameworkStabilizers=[]),U.dqk.frameworkStabilizers.push(Ue=>{const nt=U.dqk.getAllAngularTestabilities();let Ft=nt.length,sn=!1;const He=function(Ge){sn=sn||Ge,Ft--,0==Ft&&Ue(sn)};nt.forEach(function(Ge){Ge.whenStable(He)})})}findTestabilityInTree(me,oe,Ue){return null==oe?null:me.getTestability(oe)??(Ue?(0,d.q)().isShadowRoot(oe)?this.findTestabilityInTree(me,oe.host,!0):this.findTestabilityInTree(me,oe.parentElement,!0):null)}},deps:[]},{provide:U.lri,useClass:U.dDg,deps:[U.R0b,U.eoX,U.rWj]},{provide:U.dDg,useClass:U.dDg,deps:[U.R0b,U.eoX,U.rWj]}],Mn=[{provide:U.zSh,useValue:"root"},{provide:U.qLn,useFactory:function On(){return new U.qLn},deps:[]},{provide:qe,useClass:Ee,multi:!0,deps:[d.K0,U.R0b,U.Lbi]},{provide:qe,useClass:pe,multi:!0,deps:[d.K0]},{provide:Le,useClass:Le,deps:[Ke,$e,U.AFp]},{provide:U.FYo,useExisting:Le},{provide:je,useExisting:$e},{provide:$e,useClass:$e,deps:[d.K0]},{provide:Ke,useClass:Ke,deps:[qe,U.R0b]},{provide:d.JF,useClass:at,deps:[]},[]];let pn=(()=>{class he{constructor(oe){}static withServerTransition(oe){return{ngModule:he,providers:[{provide:U.AFp,useValue:oe.appId},{provide:le,useExisting:U.AFp},ue]}}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(ir,12))},he.\u0275mod=U.oAB({type:he}),he.\u0275inj=U.cJS({providers:[...Mn,...Pt],imports:[d.ez,U.hGG]}),he})(),wn=(()=>{class he{constructor(oe){this._doc=oe}getTitle(){return this._doc.title}setTitle(oe){this._doc.title=oe||""}}return he.\u0275fac=function(oe){return new(oe||he)(U.LFG(d.K0))},he.\u0275prov=U.Yz7({token:he,factory:function(oe){let Ue=null;return Ue=oe?new oe:function fr(){return new wn((0,U.LFG)(d.K0))}(),Ue},providedIn:"root"}),he})();typeof window<"u"&&window},9051:(Lt,ze,N)=>{N.d(ze,{F0:()=>an,rH:()=>Pr,yS:()=>fn,Bz:()=>Pa,lC:()=>yo});var d=N(4650),U=N(8996),j=N(9646),m=N(7579);class de extends m.x{constructor(C){super(),this._value=C}get value(){return this.getValue()}_subscribe(C){const v=super._subscribe(C);return!v.closed&&C.next(this._value),v}getValue(){const{hasError:C,thrownError:v,_value:M}=this;if(C)throw v;return this._throwIfClosed(),M}next(C){super.next(this._value=C)}}var b=N(6805),ae=N(9751),A=N(4742),le=N(4671),ne=N(3268),ue=N(7669),Te=N(1810),at=N(5403),qe=N(9672);function Ke(..._){const C=(0,ue.yG)(_),v=(0,ue.jO)(_),{args:M,keys:F}=(0,A.D)(_);if(0===M.length)return(0,U.D)([],C);const W=new ae.y(function ot(_,C,v=le.y){return M=>{je(C,()=>{const{length:F}=_,W=new Array(F);let ve=F,Ie=F;for(let ft=0;ft<F;ft++)je(C,()=>{const Gt=(0,U.D)(_[ft],C);let Pn=!1;Gt.subscribe((0,at.x)(M,un=>{W[ft]=un,Pn||(Pn=!0,Ie--),Ie||M.next(v(W.slice()))},()=>{--ve||M.complete()}))},M)},M)}}(M,C,F?ve=>(0,Te.n)(F,ve):le.y));return v?W.pipe((0,ne.Z)(v)):W}function je(_,C,v){_?(0,qe.f)(v,_,C):C()}var $e=N(7272),Et=N(8421);function mt(_){return new ae.y(C=>{(0,Et.Xf)(_()).subscribe(C)})}var Ce=N(9635),ut=N(576);function st(_,C){const v=(0,ut.m)(_)?_:()=>_,M=F=>F.error(v());return new ae.y(C?F=>C.schedule(M,0,F):M)}var It=N(515),vt=N(727),we=N(4482);function _t(){return(0,we.e)((_,C)=>{let v=null;_._refCount++;const M=(0,at.x)(C,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(v=null);const F=_._connection,W=v;v=null,F&&(!W||F===W)&&F.unsubscribe(),C.unsubscribe()});_.subscribe(M),M.closed||(v=_.connect())})}class xe extends ae.y{constructor(C,v){super(),this.source=C,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,we.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new vt.w0;const v=this.getSubject();C.add(this.source.subscribe((0,at.x)(v,void 0,()=>{this._teardown(),v.complete()},M=>{this._teardown(),v.error(M)},()=>this._teardown()))),C.closed&&(this._connection=null,C=vt.w0.EMPTY)}return C}refCount(){return _t()(this)}}var Ae=N(6895),Ze=N(4004),Le=N(3900),Ut=N(5698),Ve=N(8675),Oe=N(9300),Ye=N(5577),Je=N(590);function Me(_,C){return(0,ut.m)(C)?(0,Ye.z)(_,C,1):(0,Ye.z)(_,1)}var Ee=N(8505);function ie(_){return(0,we.e)((C,v)=>{let W,M=null,F=!1;M=C.subscribe((0,at.x)(v,void 0,void 0,ve=>{W=(0,Et.Xf)(_(ve,ie(_)(C))),M?(M.unsubscribe(),M=null,W.subscribe(v)):F=!0})),F&&(M.unsubscribe(),M=null,W.subscribe(v))})}var z=N(5026);function se(_){return _<=0?()=>It.E:(0,we.e)((C,v)=>{let M=[];C.subscribe((0,at.x)(v,F=>{M.push(F),_<M.length&&M.shift()},()=>{for(const F of M)v.next(F);v.complete()},void 0,()=>{M=null}))})}var pe=N(8068),We=N(6590);function Ot(_,C){const v=arguments.length>=2;return M=>M.pipe(_?(0,Oe.h)((F,W)=>_(F,W,M)):le.y,se(1),v?(0,We.d)(C):(0,pe.T)(()=>new b.K))}function Kn(_){return(0,we.e)((C,v)=>{try{C.subscribe(v)}finally{v.add(_)}})}var kn=N(8189),On=N(1481);const Ht="primary",En=Symbol("RouteTitle");class Yn{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v[0]:v}return null}getAll(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function ir(_){return new Yn(_)}function Pt(_,C,v){const M=v.path.split("/");if(M.length>_.length||"full"===v.pathMatch&&(C.hasChildren()||M.length<_.length))return null;const F={};for(let W=0;W<M.length;W++){const ve=M[W],Ie=_[W];if(ve.startsWith(":"))F[ve.substring(1)]=Ie;else if(ve!==Ie.path)return null}return{consumed:_.slice(0,M.length),posParams:F}}function pn(_,C){const v=_?Object.keys(_):void 0,M=C?Object.keys(C):void 0;if(!v||!M||v.length!=M.length)return!1;let F;for(let W=0;W<v.length;W++)if(F=v[W],!tr(_[F],C[F]))return!1;return!0}function tr(_,C){if(Array.isArray(_)&&Array.isArray(C)){if(_.length!==C.length)return!1;const v=[..._].sort(),M=[...C].sort();return v.every((F,W)=>M[W]===F)}return _===C}function jr(_){return Array.prototype.concat.apply([],_)}function $r(_){return _.length>0?_[_.length-1]:null}function wn(_,C){for(const v in _)_.hasOwnProperty(v)&&C(_[v],v)}function cn(_){return(0,d.CqO)(_)?_:(0,d.QGY)(_)?(0,U.D)(Promise.resolve(_)):(0,j.of)(_)}const Nn={exact:function dn(_,C,v){if(!ht(_.segments,C.segments)||!xn(_.segments,C.segments,v)||_.numberOfChildren!==C.numberOfChildren)return!1;for(const M in C.children)if(!_.children[M]||!dn(_.children[M],C.children[M],v))return!1;return!0},subset:In},pr={exact:function gr(_,C){return pn(_,C)},subset:function yr(_,C){return Object.keys(C).length<=Object.keys(_).length&&Object.keys(C).every(v=>tr(_[v],C[v]))},ignored:()=>!0};function sr(_,C,v){return Nn[v.paths](_.root,C.root,v.matrixParams)&&pr[v.queryParams](_.queryParams,C.queryParams)&&!("exact"===v.fragment&&_.fragment!==C.fragment)}function In(_,C,v){return Zr(_,C,C.segments,v)}function Zr(_,C,v,M){if(_.segments.length>v.length){const F=_.segments.slice(0,v.length);return!(!ht(F,v)||C.hasChildren()||!xn(F,v,M))}if(_.segments.length===v.length){if(!ht(_.segments,v)||!xn(_.segments,v,M))return!1;for(const F in C.children)if(!_.children[F]||!In(_.children[F],C.children[F],M))return!1;return!0}{const F=v.slice(0,_.segments.length),W=v.slice(_.segments.length);return!!(ht(_.segments,F)&&xn(_.segments,F,M)&&_.children[Ht])&&Zr(_.children[Ht],C,W,M)}}function xn(_,C,v){return C.every((M,F)=>pr[v](_[F].parameters,M.parameters))}class An{constructor(C,v,M){this.root=C,this.queryParams=v,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ir(this.queryParams)),this._queryParamMap}toString(){return xt.serialize(this)}}class Vt{constructor(C,v){this.segments=C,this.children=v,this.parent=null,wn(v,(M,F)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ge(this)}}class or{constructor(C,v){this.path=C,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=ir(this.parameters)),this._parameterMap}toString(){return Qt(this)}}function ht(_,C){return _.length===C.length&&_.every((v,M)=>v.path===C[M].path)}let _e=(()=>{class _{}return _.\u0275fac=function(v){return new(v||_)},_.\u0275prov=d.Yz7({token:_,factory:function(){return new Xe},providedIn:"root"}),_})();class Xe{parse(C){const v=new Ge(C);return new An(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(C){const v=`/${ye(C.root,!0)}`,M=function me(_){const C=Object.keys(_).map(v=>{const M=_[v];return Array.isArray(M)?M.map(F=>`${Q(v)}=${Q(F)}`).join("&"):`${Q(v)}=${Q(M)}`}).filter(v=>!!v);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${v}${M}${"string"==typeof C.fragment?`#${function q(_){return encodeURI(_)}(C.fragment)}`:""}`}}const xt=new Xe;function ge(_){return _.segments.map(C=>Qt(C)).join("/")}function ye(_,C){if(!_.hasChildren())return ge(_);if(C){const v=_.children[Ht]?ye(_.children[Ht],!1):"",M=[];return wn(_.children,(F,W)=>{W!==Ht&&M.push(`${W}:${ye(F,!1)}`)}),M.length>0?`${v}(${M.join("//")})`:v}{const v=function J(_,C){let v=[];return wn(_.children,(M,F)=>{F===Ht&&(v=v.concat(C(M,F)))}),wn(_.children,(M,F)=>{F!==Ht&&(v=v.concat(C(M,F)))}),v}(_,(M,F)=>F===Ht?[ye(_.children[Ht],!1)]:[`${F}:${ye(M,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[Ht]?`${ge(_)}/${v[0]}`:`${ge(_)}/(${v.join("//")})`}}function ee(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Q(_){return ee(_).replace(/%3B/gi,";")}function Re(_){return ee(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gt(_){return decodeURIComponent(_)}function kt(_){return gt(_.replace(/\+/g,"%20"))}function Qt(_){return`${Re(_.path)}${function he(_){return Object.keys(_).map(C=>`;${Re(C)}=${Re(_[C])}`).join("")}(_.parameters)}`}const oe=/^[^\/()?;=#]+/;function Ue(_){const C=_.match(oe);return C?C[0]:""}const nt=/^[^=?&#]+/,sn=/^[^&#]+/;class Ge{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(C.length>0||Object.keys(v).length>0)&&(M[Ht]=new Vt(C,v)),M}parseSegment(){const C=Ue(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(C),new or(gt(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const v=Ue(this.remaining);if(!v)return;this.capture(v);let M="";if(this.consumeOptional("=")){const F=Ue(this.remaining);F&&(M=F,this.capture(M))}C[gt(v)]=gt(M)}parseQueryParam(C){const v=function Ft(_){const C=_.match(nt);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let M="";if(this.consumeOptional("=")){const ve=function He(_){const C=_.match(sn);return C?C[0]:""}(this.remaining);ve&&(M=ve,this.capture(M))}const F=kt(v),W=kt(M);if(C.hasOwnProperty(F)){let ve=C[F];Array.isArray(ve)||(ve=[ve],C[F]=ve),ve.push(W)}else C[F]=W}parseParens(C){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Ue(this.remaining),F=this.remaining[M.length];if("/"!==F&&")"!==F&&";"!==F)throw new d.vHH(4010,!1);let W;M.indexOf(":")>-1?(W=M.slice(0,M.indexOf(":")),this.capture(W),this.capture(":")):C&&(W=Ht);const ve=this.parseChildren();v[W]=1===Object.keys(ve).length?ve[Ht]:new Vt([],ve),this.consumeOptional("//")}return v}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new d.vHH(4011,!1)}}function bt(_){return _.segments.length>0?new Vt([],{[Ht]:_}):_}function Dt(_){const C={};for(const M of Object.keys(_.children)){const W=Dt(_.children[M]);(W.segments.length>0||W.hasChildren())&&(C[M]=W)}return function mn(_){if(1===_.numberOfChildren&&_.children[Ht]){const C=_.children[Ht];return new Vt(_.segments.concat(C.segments),C.children)}return _}(new Vt(_.segments,C))}function _n(_){return _ instanceof An}function Yr(_,C,v,M,F){if(0===v.length)return Vi(C.root,C.root,C.root,M,F);const W=function Ks(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new Ui(!0,0,_);let C=0,v=!1;const M=_.reduce((F,W,ve)=>{if("object"==typeof W&&null!=W){if(W.outlets){const Ie={};return wn(W.outlets,(ft,Gt)=>{Ie[Gt]="string"==typeof ft?ft.split("/"):ft}),[...F,{outlets:Ie}]}if(W.segmentPath)return[...F,W.segmentPath]}return"string"!=typeof W?[...F,W]:0===ve?(W.split("/").forEach((Ie,ft)=>{0==ft&&"."===Ie||(0==ft&&""===Ie?v=!0:".."===Ie?C++:""!=Ie&&F.push(Ie))}),F):[...F,W]},[]);return new Ui(v,C,M)}(v);return W.toRoot()?Vi(C.root,C.root,new Vt([],{}),M,F):function ve(ft){const Gt=function Bi(_,C,v,M){if(_.isAbsolute)return new pi(C.root,!0,0);if(-1===M)return new pi(v,v===C.root,0);return function Ii(_,C,v){let M=_,F=C,W=v;for(;W>F;){if(W-=F,M=M.parent,!M)throw new d.vHH(4005,!1);F=M.segments.length}return new pi(M,!1,F-W)}(v,M+(Jr(_.commands[0])?0:1),_.numberOfDoubleDots)}(W,C,_.snapshot?._urlSegment,ft),Pn=Gt.processChildren?gi(Gt.segmentGroup,Gt.index,W.commands):Or(Gt.segmentGroup,Gt.index,W.commands);return Vi(C.root,Gt.segmentGroup,Pn,M,F)}(_.snapshot?._lastPathIndex)}function Jr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function Fr(_){return"object"==typeof _&&null!=_&&_.outlets}function Vi(_,C,v,M,F){let ve,W={};M&&wn(M,(ft,Gt)=>{W[Gt]=Array.isArray(ft)?ft.map(Pn=>`${Pn}`):`${ft}`}),ve=_===C?v:$n(_,C,v);const Ie=bt(Dt(ve));return new An(Ie,W,F)}function $n(_,C,v){const M={};return wn(_.children,(F,W)=>{M[W]=F===C?v:$n(F,C,v)}),new Vt(_.segments,M)}class Ui{constructor(C,v,M){if(this.isAbsolute=C,this.numberOfDoubleDots=v,this.commands=M,C&&M.length>0&&Jr(M[0]))throw new d.vHH(4003,!1);const F=M.find(Fr);if(F&&F!==$r(M))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pi{constructor(C,v,M){this.segmentGroup=C,this.processChildren=v,this.index=M}}function Or(_,C,v){if(_||(_=new Vt([],{})),0===_.segments.length&&_.hasChildren())return gi(_,C,v);const M=function Lr(_,C,v){let M=0,F=C;const W={match:!1,pathIndex:0,commandIndex:0};for(;F<_.segments.length;){if(M>=v.length)return W;const ve=_.segments[F],Ie=v[M];if(Fr(Ie))break;const ft=`${Ie}`,Gt=M<v.length-1?v[M+1]:null;if(F>0&&void 0===ft)break;if(ft&&Gt&&"object"==typeof Gt&&void 0===Gt.outlets){if(!Os(ft,Gt,ve))return W;M+=2}else{if(!Os(ft,{},ve))return W;M++}F++}return{match:!0,pathIndex:F,commandIndex:M}}(_,C,v),F=v.slice(M.commandIndex);if(M.match&&M.pathIndex<_.segments.length){const W=new Vt(_.segments.slice(0,M.pathIndex),{});return W.children[Ht]=new Vt(_.segments.slice(M.pathIndex),_.children),gi(W,0,F)}return M.match&&0===F.length?new Vt(_.segments,{}):M.match&&!_.hasChildren()?Tr(_,C,v):M.match?gi(_,0,F):Tr(_,C,v)}function gi(_,C,v){if(0===v.length)return new Vt(_.segments,{});{const M=function us(_){return Fr(_[0])?_[0].outlets:{[Ht]:_}}(v),F={};return wn(M,(W,ve)=>{"string"==typeof W&&(W=[W]),null!==W&&(F[ve]=Or(_.children[ve],C,W))}),wn(_.children,(W,ve)=>{void 0===M[ve]&&(F[ve]=W)}),new Vt(_.segments,F)}}function Tr(_,C,v){const M=_.segments.slice(0,C);let F=0;for(;F<v.length;){const W=v[F];if(Fr(W)){const ft=Rs(W.outlets);return new Vt(M,ft)}if(0===F&&Jr(v[0])){M.push(new or(_.segments[C].path,Pi(v[0]))),F++;continue}const ve=Fr(W)?W.outlets[Ht]:`${W}`,Ie=F<v.length-1?v[F+1]:null;ve&&Ie&&Jr(Ie)?(M.push(new or(ve,Pi(Ie))),F+=2):(M.push(new or(ve,{})),F++)}return new Vt(M,{})}function Rs(_){const C={};return wn(_,(v,M)=>{"string"==typeof v&&(v=[v]),null!==v&&(C[M]=Tr(new Vt([],{}),0,v))}),C}function Pi(_){const C={};return wn(_,(v,M)=>C[M]=`${v}`),C}function Os(_,C,v){return _==v.path&&pn(C,v.parameters)}class Nr{constructor(C,v){this.id=C,this.url=v}}class ji extends Nr{constructor(C,v,M="imperative",F=null){super(C,v),this.type=0,this.navigationTrigger=M,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ls extends Nr{constructor(C,v,M){super(C,v),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xo extends Nr{constructor(C,v,M,F){super(C,v),this.reason=M,this.code=F,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ys extends Nr{constructor(C,v,M,F){super(C,v),this.error=M,this.target=F,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ha extends Nr{constructor(C,v,M,F){super(C,v),this.urlAfterRedirects=M,this.state=F,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cr extends Nr{constructor(C,v,M,F){super(C,v),this.urlAfterRedirects=M,this.state=F,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ho extends Nr{constructor(C,v,M,F,W){super(C,v),this.urlAfterRedirects=M,this.state=F,this.shouldActivate=W,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fo extends Nr{constructor(C,v,M,F){super(C,v),this.urlAfterRedirects=M,this.state=F,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class po extends Nr{constructor(C,v,M,F){super(C,v),this.urlAfterRedirects=M,this.state=F,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fe{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pe{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qe{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wt{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nt{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jn{constructor(C,v,M){this.routerEvent=C,this.position=v,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ln{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const v=this.pathFromRoot(C);return v.length>1?v[v.length-2]:null}children(C){const v=$i(C,this._root);return v?v.children.map(M=>M.value):[]}firstChild(C){const v=$i(C,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(C){const v=Ri(C,this._root);return v.length<2?[]:v[v.length-2].children.map(F=>F.value).filter(F=>F!==C)}pathFromRoot(C){return Ri(C,this._root).map(v=>v.value)}}function $i(_,C){if(_===C.value)return C;for(const v of C.children){const M=$i(_,v);if(M)return M}return null}function Ri(_,C){if(_===C.value)return[C];for(const v of C.children){const M=Ri(_,v);if(M.length)return M.unshift(C),M}return[]}class kr{constructor(C,v){this.value=C,this.children=v}toString(){return`TreeNode(${this.value})`}}function Xn(_){const C={};return _&&_.children.forEach(v=>C[v.value.outlet]=v),C}class cs extends Ln{constructor(C,v){super(C),this.snapshot=v,Po(this,C)}toString(){return this.snapshot.toString()}}function Hi(_,C){const v=function li(_,C){const ve=new ds([],{},{},"",{},Ht,C,null,_.root,-1,{});return new Zo("",new kr(ve,[]))}(_,C),M=new de([new or("",{})]),F=new de({}),W=new de({}),ve=new de({}),Ie=new de(""),ft=new ws(M,F,ve,Ie,W,Ht,C,v.root);return ft.snapshot=v.root,new cs(new kr(ft,[]),v)}class ws{constructor(C,v,M,F,W,ve,Ie,ft){this.url=C,this.params=v,this.queryParams=M,this.fragment=F,this.data=W,this.outlet=ve,this.component=Ie,this.title=this.data?.pipe((0,Ze.U)(Gt=>Gt[En]))??(0,j.of)(void 0),this._futureSnapshot=ft}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ze.U)(C=>ir(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ze.U)(C=>ir(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ns(_,C="emptyOnly"){const v=_.pathFromRoot;let M=0;if("always"!==C)for(M=v.length-1;M>=1;){const F=v[M],W=v[M-1];if(F.routeConfig&&""===F.routeConfig.path)M--;else{if(W.component)break;M--}}return function sa(_){return _.reduce((C,v)=>({params:{...C.params,...v.params},data:{...C.data,...v.data},resolve:{...v.data,...C.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(M))}class ds{constructor(C,v,M,F,W,ve,Ie,ft,Gt,Pn,un,Wn){this.url=C,this.params=v,this.queryParams=M,this.fragment=F,this.data=W,this.outlet=ve,this.component=Ie,this.title=this.data?.[En],this.routeConfig=ft,this._urlSegment=Gt,this._lastPathIndex=Pn,this._correctedLastPathIndex=Wn??Pn,this._resolve=un}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ir(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ir(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zo extends Ln{constructor(C,v){super(v),this.url=C,Po(this,v)}toString(){return Js(this._root)}}function Po(_,C){C.value._routerState=_,C.children.forEach(v=>Po(_,v))}function Js(_){const C=_.children.length>0?` { ${_.children.map(Js).join(", ")} } `:"";return`${_.value}${C}`}function Oi(_){if(_.snapshot){const C=_.snapshot,v=_._futureSnapshot;_.snapshot=v,pn(C.queryParams,v.queryParams)||_.queryParams.next(v.queryParams),C.fragment!==v.fragment&&_.fragment.next(v.fragment),pn(C.params,v.params)||_.params.next(v.params),function Mn(_,C){if(_.length!==C.length)return!1;for(let v=0;v<_.length;++v)if(!pn(_[v],C[v]))return!1;return!0}(C.url,v.url)||_.url.next(v.url),pn(C.data,v.data)||_.data.next(v.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function Qs(_,C){const v=pn(_.params,C.params)&&function ur(_,C){return ht(_,C)&&_.every((v,M)=>pn(v.parameters,C[M].parameters))}(_.url,C.url);return v&&!(!_.parent!=!C.parent)&&(!_.parent||Qs(_.parent,C.parent))}function ci(_,C,v){if(v&&_.shouldReuseRoute(C.value,v.value.snapshot)){const M=v.value;M._futureSnapshot=C.value;const F=function go(_,C,v){return C.children.map(M=>{for(const F of v.children)if(_.shouldReuseRoute(M.value,F.value.snapshot))return ci(_,M,F);return ci(_,M)})}(_,C,v);return new kr(M,F)}{if(_.shouldAttach(C.value)){const W=_.retrieve(C.value);if(null!==W){const ve=W.route;return ve.value._futureSnapshot=C.value,ve.children=C.children.map(Ie=>ci(_,Ie)),ve}}const M=function Xs(_){return new ws(new de(_.url),new de(_.params),new de(_.queryParams),new de(_.fragment),new de(_.data),_.outlet,_.component,_)}(C.value),F=C.children.map(W=>ci(_,W));return new kr(M,F)}}const Ma="ngNavigationCancelingError";function oa(_,C){const{redirectTo:v,navigationBehaviorOptions:M}=_n(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,F=Er(!1,0,C);return F.url=v,F.navigationBehaviorOptions=M,F}function Er(_,C,v){const M=new Error("NavigationCancelingError: "+(_||""));return M[Ma]=!0,M.cancellationCode=C,v&&(M.url=v),M}function hs(_){return mo(_)&&_n(_.url)}function mo(_){return _&&_[Ma]}class fs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zr,this.attachRef=null}}let zr=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(v,M){const F=this.getOrCreateContext(v);F.outlet=M,this.contexts.set(v,F)}onChildOutletDestroyed(v){const M=this.getContext(v);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let M=this.getContext(v);return M||(M=new fs,this.contexts.set(v,M)),M}getContext(v){return this.contexts.get(v)||null}}return _.\u0275fac=function(v){return new(v||_)},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Gi=!1;let yo=(()=>{class _{constructor(v,M,F,W,ve){this.parentContexts=v,this.location=M,this.changeDetector=W,this.environmentInjector=ve,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=F||Ht,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Gi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Gi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Gi);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,M){this.activated=v,this._activatedRoute=M,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,M){if(this.isActivated)throw new d.vHH(4013,Gi);this._activatedRoute=v;const F=this.location,ve=v._futureSnapshot.component,Ie=this.parentContexts.getOrCreateContext(this.name).children,ft=new Zi(v,Ie,F.injector);if(M&&function di(_){return!!_.resolveComponentFactory}(M)){const Gt=M.resolveComponentFactory(ve);this.activated=F.createComponent(Gt,F.length,ft)}else this.activated=F.createComponent(ve,{index:F.length,injector:ft,environmentInjector:M??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(v){return new(v||_)(d.Y36(zr),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},_.\u0275dir=d.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class Zi{constructor(C,v,M){this.route=C,this.childContexts=v,this.parent=M}get(C,v){return C===ws?this.route:C===zr?this.childContexts:this.parent.get(C,v)}}let vo=(()=>{class _{}return _.\u0275fac=function(v){return new(v||_)},_.\u0275cmp=d.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(v,M){1&v&&d._UZ(0,"router-outlet")},dependencies:[yo],encapsulation:2}),_})();function Ro(_,C){return _.providers&&!_._injector&&(_._injector=(0,d.MMx)(_.providers,C,`Route: ${_.path}`)),_._injector??C}function Ar(_){const C=_.children&&_.children.map(Ar),v=C?{..._,children:C}:{..._};return!v.component&&!v.loadComponent&&(C||v.loadChildren)&&v.outlet&&v.outlet!==Ht&&(v.component=vo),v}function Ni(_){return _.outlet||Ht}function _o(_,C){const v=_.filter(M=>Ni(M)===C);return v.push(..._.filter(M=>Ni(M)!==C)),v}function bi(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let C=_.parent;C;C=C.parent){const v=C.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class At{constructor(C,v,M,F){this.routeReuseStrategy=C,this.futureState=v,this.currState=M,this.forwardEvent=F}activate(C){const v=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,M,C),Oi(this.futureState.root),this.activateChildRoutes(v,M,C)}deactivateChildRoutes(C,v,M){const F=Xn(v);C.children.forEach(W=>{const ve=W.value.outlet;this.deactivateRoutes(W,F[ve],M),delete F[ve]}),wn(F,(W,ve)=>{this.deactivateRouteAndItsChildren(W,M)})}deactivateRoutes(C,v,M){const F=C.value,W=v?v.value:null;if(F===W)if(F.component){const ve=M.getContext(F.outlet);ve&&this.deactivateChildRoutes(C,v,ve.children)}else this.deactivateChildRoutes(C,v,M);else W&&this.deactivateRouteAndItsChildren(v,M)}deactivateRouteAndItsChildren(C,v){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,v):this.deactivateRouteAndOutlet(C,v)}detachAndStoreRouteSubtree(C,v){const M=v.getContext(C.value.outlet),F=M&&C.value.component?M.children:v,W=Xn(C);for(const ve of Object.keys(W))this.deactivateRouteAndItsChildren(W[ve],F);if(M&&M.outlet){const ve=M.outlet.detach(),Ie=M.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:ve,route:C,contexts:Ie})}}deactivateRouteAndOutlet(C,v){const M=v.getContext(C.value.outlet),F=M&&C.value.component?M.children:v,W=Xn(C);for(const ve of Object.keys(W))this.deactivateRouteAndItsChildren(W[ve],F);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(C,v,M){const F=Xn(v);C.children.forEach(W=>{this.activateRoutes(W,F[W.value.outlet],M),this.forwardEvent(new Sn(W.value.snapshot))}),C.children.length&&this.forwardEvent(new wt(C.value.snapshot))}activateRoutes(C,v,M){const F=C.value,W=v?v.value:null;if(Oi(F),F===W)if(F.component){const ve=M.getOrCreateContext(F.outlet);this.activateChildRoutes(C,v,ve.children)}else this.activateChildRoutes(C,v,M);else if(F.component){const ve=M.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const Ie=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),ve.children.onOutletReAttached(Ie.contexts),ve.attachRef=Ie.componentRef,ve.route=Ie.route.value,ve.outlet&&ve.outlet.attach(Ie.componentRef,Ie.route.value),Oi(Ie.route.value),this.activateChildRoutes(C,null,ve.children)}else{const Ie=bi(F.snapshot),ft=Ie?.get(d._Vd)??null;ve.attachRef=null,ve.route=F,ve.resolver=ft,ve.injector=Ie,ve.outlet&&ve.outlet.activateWith(F,ve.injector),this.activateChildRoutes(C,null,ve.children)}}else this.activateChildRoutes(C,null,M)}}class Hn{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class no{constructor(C,v){this.component=C,this.route=v}}function ro(_,C,v){const M=_._root;return zi(M,C?C._root:null,v,[M.value])}function ei(_,C){const v=Symbol(),M=C.get(_,v);return M===v?"function"!=typeof _||(0,d.Z0I)(_)?C.get(_):_:M}function zi(_,C,v,M,F={canDeactivateChecks:[],canActivateChecks:[]}){const W=Xn(C);return _.children.forEach(ve=>{(function es(_,C,v,M,F={canDeactivateChecks:[],canActivateChecks:[]}){const W=_.value,ve=C?C.value:null,Ie=v?v.getContext(_.value.outlet):null;if(ve&&W.routeConfig===ve.routeConfig){const ft=function Oo(_,C,v){if("function"==typeof v)return v(_,C);switch(v){case"pathParamsChange":return!ht(_.url,C.url);case"pathParamsOrQueryParamsChange":return!ht(_.url,C.url)||!pn(_.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qs(_,C)||!pn(_.queryParams,C.queryParams);default:return!Qs(_,C)}}(ve,W,W.routeConfig.runGuardsAndResolvers);ft?F.canActivateChecks.push(new Hn(M)):(W.data=ve.data,W._resolvedData=ve._resolvedData),zi(_,C,W.component?Ie?Ie.children:null:v,M,F),ft&&Ie&&Ie.outlet&&Ie.outlet.isActivated&&F.canDeactivateChecks.push(new no(Ie.outlet.component,ve))}else ve&&Cs(C,Ie,F),F.canActivateChecks.push(new Hn(M)),zi(_,null,W.component?Ie?Ie.children:null:v,M,F)})(ve,W[ve.value.outlet],v,M.concat([ve.value]),F),delete W[ve.value.outlet]}),wn(W,(ve,Ie)=>Cs(ve,v.getContext(Ie),F)),F}function Cs(_,C,v){const M=Xn(_),F=_.value;wn(M,(W,ve)=>{Cs(W,F.component?C?C.children.getContext(ve):null:C,v)}),v.canDeactivateChecks.push(new no(F.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,F))}function Es(_){return"function"==typeof _}function ti(_){return _ instanceof b.K||"EmptyError"===_?.name}const qi=Symbol("INITIAL_VALUE");function Di(){return(0,Le.w)(_=>Ke(_.map(C=>C.pipe((0,Ut.q)(1),(0,Ve.O)(qi)))).pipe((0,Ze.U)(C=>{for(const v of C)if(!0!==v){if(v===qi)return qi;if(!1===v||v instanceof An)return v}return!0}),(0,Oe.h)(C=>C!==qi),(0,Ut.q)(1)))}function ko(_){return(0,Ce.z)((0,Ee.b)(C=>{if(_n(C))throw oa(0,C)}),(0,Ze.U)(C=>!0===C))}const Ti={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Us(_,C,v,M,F){const W=la(_,C,v);return W.matched?function qo(_,C,v,M){const F=C.canMatch;if(!F||0===F.length)return(0,j.of)(!0);const W=F.map(ve=>{const Ie=ei(ve,_);return cn(function lt(_){return _&&Es(_.canMatch)}(Ie)?Ie.canMatch(C,v):_.runInContext(()=>Ie(C,v)))});return(0,j.of)(W).pipe(Di(),ko())}(M=Ro(C,M),C,v).pipe((0,Ze.U)(ve=>!0===ve?W:{...Ti})):(0,j.of)(W)}function la(_,C,v){if(""===C.path)return"full"===C.pathMatch&&(_.hasChildren()||v.length>0)?{...Ti}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const F=(C.matcher||Pt)(v,_,C);if(!F)return{...Ti};const W={};wn(F.posParams,(Ie,ft)=>{W[ft]=Ie.path});const ve=F.consumed.length>0?{...W,...F.consumed[F.consumed.length-1].parameters}:W;return{matched:!0,consumedSegments:F.consumed,remainingSegments:v.slice(F.consumed.length),parameters:ve,positionalParamSegments:F.posParams??{}}}function Eo(_,C,v,M,F="corrected"){if(v.length>0&&function Sr(_,C,v){return v.some(M=>Fo(_,C,M)&&Ni(M)!==Ht)}(_,v,M)){const ve=new Vt(C,function mi(_,C,v,M){const F={};F[Ht]=M,M._sourceSegment=_,M._segmentIndexShift=C.length;for(const W of v)if(""===W.path&&Ni(W)!==Ht){const ve=new Vt([],{});ve._sourceSegment=_,ve._segmentIndexShift=C.length,F[Ni(W)]=ve}return F}(_,C,M,new Vt(v,_.children)));return ve._sourceSegment=_,ve._segmentIndexShift=C.length,{segmentGroup:ve,slicedSegments:[]}}if(0===v.length&&function Ir(_,C,v){return v.some(M=>Fo(_,C,M))}(_,v,M)){const ve=new Vt(_.segments,function dr(_,C,v,M,F,W){const ve={};for(const Ie of M)if(Fo(_,v,Ie)&&!F[Ni(Ie)]){const ft=new Vt([],{});ft._sourceSegment=_,ft._segmentIndexShift="legacy"===W?_.segments.length:C.length,ve[Ni(Ie)]=ft}return{...F,...ve}}(_,C,v,M,_.children,F));return ve._sourceSegment=_,ve._segmentIndexShift=C.length,{segmentGroup:ve,slicedSegments:v}}const W=new Vt(_.segments,_.children);return W._sourceSegment=_,W._segmentIndexShift=C.length,{segmentGroup:W,slicedSegments:v}}function Fo(_,C,v){return(!(_.hasChildren()||C.length>0)||"full"!==v.pathMatch)&&""===v.path}function ca(_,C,v,M){return!!(Ni(_)===M||M!==Ht&&Fo(C,v,_))&&("**"===_.path||la(C,_,v).matched)}function Wi(_,C,v){return 0===C.length&&!_.children[v]}const Wo=!1;class Bs{constructor(C){this.segmentGroup=C||null}}class bs{constructor(C){this.urlTree=C}}function ts(_){return st(new Bs(_))}function Ko(_){return st(new bs(_))}class ns{constructor(C,v,M,F,W){this.injector=C,this.configLoader=v,this.urlSerializer=M,this.urlTree=F,this.config=W,this.allowRedirects=!0}apply(){const C=Eo(this.urlTree.root,[],[],this.config).segmentGroup,v=new Vt(C.segments,C.children);return this.expandSegmentGroup(this.injector,this.config,v,Ht).pipe((0,Ze.U)(W=>this.createUrlTree(Dt(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ie(W=>{if(W instanceof bs)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof Bs?this.noMatchError(W):W}))}match(C){return this.expandSegmentGroup(this.injector,this.config,C.root,Ht).pipe((0,Ze.U)(F=>this.createUrlTree(Dt(F),C.queryParams,C.fragment))).pipe(ie(F=>{throw F instanceof Bs?this.noMatchError(F):F}))}noMatchError(C){return new d.vHH(4002,Wo)}createUrlTree(C,v,M){const F=bt(C);return new An(F,v,M)}expandSegmentGroup(C,v,M,F){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(C,v,M).pipe((0,Ze.U)(W=>new Vt([],W))):this.expandSegment(C,M,v,M.segments,F,!0)}expandChildren(C,v,M){const F=[];for(const W of Object.keys(M.children))"primary"===W?F.unshift(W):F.push(W);return(0,U.D)(F).pipe(Me(W=>{const ve=M.children[W],Ie=_o(v,W);return this.expandSegmentGroup(C,Ie,ve,W).pipe((0,Ze.U)(ft=>({segment:ft,outlet:W})))}),(0,z.R)((W,ve)=>(W[ve.outlet]=ve.segment,W),{}),Ot())}expandSegment(C,v,M,F,W,ve){return(0,U.D)(M).pipe(Me(Ie=>this.expandSegmentAgainstRoute(C,v,M,Ie,F,W,ve).pipe(ie(Gt=>{if(Gt instanceof Bs)return(0,j.of)(null);throw Gt}))),(0,Je.P)(Ie=>!!Ie),ie((Ie,ft)=>{if(ti(Ie))return Wi(v,F,W)?(0,j.of)(new Vt([],{})):ts(v);throw Ie}))}expandSegmentAgainstRoute(C,v,M,F,W,ve,Ie){return ca(F,v,W,ve)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(C,v,F,W,ve):Ie&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,v,M,F,W,ve):ts(v):ts(v)}expandSegmentAgainstRouteUsingRedirect(C,v,M,F,W,ve){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,M,F,ve):this.expandRegularSegmentAgainstRouteUsingRedirect(C,v,M,F,W,ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,v,M,F){const W=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Ko(W):this.lineralizeSegments(M,W).pipe((0,Ye.z)(ve=>{const Ie=new Vt(ve,{});return this.expandSegment(C,Ie,v,ve,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,v,M,F,W,ve){const{matched:Ie,consumedSegments:ft,remainingSegments:Gt,positionalParamSegments:Pn}=la(v,F,W);if(!Ie)return ts(v);const un=this.applyRedirectCommands(ft,F.redirectTo,Pn);return F.redirectTo.startsWith("/")?Ko(un):this.lineralizeSegments(F,un).pipe((0,Ye.z)(Wn=>this.expandSegment(C,v,M,Wn.concat(Gt),ve,!1)))}matchSegmentAgainstRoute(C,v,M,F,W){return"**"===M.path?(C=Ro(M,C),M.loadChildren?(M._loadedRoutes?(0,j.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):this.configLoader.loadChildren(C,M)).pipe((0,Ze.U)(Ie=>(M._loadedRoutes=Ie.routes,M._loadedInjector=Ie.injector,new Vt(F,{})))):(0,j.of)(new Vt(F,{}))):Us(v,M,F,C).pipe((0,Le.w)(({matched:ve,consumedSegments:Ie,remainingSegments:ft})=>ve?this.getChildConfig(C=M._injector??C,M,F).pipe((0,Ye.z)(Pn=>{const un=Pn.injector??C,Wn=Pn.routes,{segmentGroup:Mi,slicedSegments:ui}=Eo(v,Ie,ft,Wn),Xo=new Vt(Mi.segments,Mi.children);if(0===ui.length&&Xo.hasChildren())return this.expandChildren(un,Wn,Xo).pipe((0,Ze.U)(Ra=>new Vt(Ie,Ra)));if(0===Wn.length&&0===ui.length)return(0,j.of)(new Vt(Ie,{}));const Gs=Ni(M)===W;return this.expandSegment(un,Xo,Wn,ui,Gs?Ht:W,!0).pipe((0,Ze.U)(ea=>new Vt(Ie.concat(ea.segments),ea.children)))})):ts(v)))}getChildConfig(C,v,M){return v.children?(0,j.of)({routes:v.children,injector:C}):v.loadChildren?void 0!==v._loadedRoutes?(0,j.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function zo(_,C,v,M){const F=C.canLoad;if(void 0===F||0===F.length)return(0,j.of)(!0);const W=F.map(ve=>{const Ie=ei(ve,_);return cn(function V(_){return _&&Es(_.canLoad)}(Ie)?Ie.canLoad(C,v):_.runInContext(()=>Ie(C,v)))});return(0,j.of)(W).pipe(Di(),ko())}(C,v,M).pipe((0,Ye.z)(F=>F?this.configLoader.loadChildren(C,v).pipe((0,Ee.b)(W=>{v._loadedRoutes=W.routes,v._loadedInjector=W.injector})):function Ki(_){return st(Er(Wo,3))}())):(0,j.of)({routes:[],injector:C})}lineralizeSegments(C,v){let M=[],F=v.root;for(;;){if(M=M.concat(F.segments),0===F.numberOfChildren)return(0,j.of)(M);if(F.numberOfChildren>1||!F.children[Ht])return st(new d.vHH(4e3,Wo));F=F.children[Ht]}}applyRedirectCommands(C,v,M){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),C,M)}applyRedirectCreateUrlTree(C,v,M,F){const W=this.createSegmentGroup(C,v.root,M,F);return new An(W,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(C,v){const M={};return wn(C,(F,W)=>{if("string"==typeof F&&F.startsWith(":")){const Ie=F.substring(1);M[W]=v[Ie]}else M[W]=F}),M}createSegmentGroup(C,v,M,F){const W=this.createSegments(C,v.segments,M,F);let ve={};return wn(v.children,(Ie,ft)=>{ve[ft]=this.createSegmentGroup(C,Ie,M,F)}),new Vt(W,ve)}createSegments(C,v,M,F){return v.map(W=>W.path.startsWith(":")?this.findPosParam(C,W,F):this.findOrReturn(W,M))}findPosParam(C,v,M){const F=M[v.path.substring(1)];if(!F)throw new d.vHH(4001,Wo);return F}findOrReturn(C,v){let M=0;for(const F of v){if(F.path===C.path)return v.splice(M),F;M++}return C}}class oo{}class ou{constructor(C,v,M,F,W,ve,Ie,ft){this.injector=C,this.rootComponentType=v,this.config=M,this.urlTree=F,this.url=W,this.paramsInheritanceStrategy=ve,this.relativeLinkResolution=Ie,this.urlSerializer=ft}recognize(){const C=Eo(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,Ht).pipe((0,Ze.U)(v=>{if(null===v)return null;const M=new ds([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),F=new kr(M,v),W=new Zo(this.url,F);return this.inheritParamsAndData(W._root),W}))}inheritParamsAndData(C){const v=C.value,M=Ns(v,this.paramsInheritanceStrategy);v.params=Object.freeze(M.params),v.data=Object.freeze(M.data),C.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(C,v,M,F){return 0===M.segments.length&&M.hasChildren()?this.processChildren(C,v,M):this.processSegment(C,v,M,M.segments,F)}processChildren(C,v,M){return(0,U.D)(Object.keys(M.children)).pipe(Me(F=>{const W=M.children[F],ve=_o(v,F);return this.processSegmentGroup(C,ve,W,F)}),(0,z.R)((F,W)=>F&&W?(F.push(...W),F):null),function Xt(_,C=!1){return(0,we.e)((v,M)=>{let F=0;v.subscribe((0,at.x)(M,W=>{const ve=_(W,F++);(ve||C)&&M.next(W),!ve&&M.complete()}))})}(F=>null!==F),(0,We.d)(null),Ot(),(0,Ze.U)(F=>{if(null===F)return null;const W=K(F);return function S(_){_.sort((C,v)=>C.value.outlet===Ht?-1:v.value.outlet===Ht?1:C.value.outlet.localeCompare(v.value.outlet))}(W),W}))}processSegment(C,v,M,F,W){return(0,U.D)(v).pipe(Me(ve=>this.processSegmentAgainstRoute(ve._injector??C,ve,M,F,W)),(0,Je.P)(ve=>!!ve),ie(ve=>{if(ti(ve))return Wi(M,F,W)?(0,j.of)([]):(0,j.of)(null);throw ve}))}processSegmentAgainstRoute(C,v,M,F,W){if(v.redirectTo||!ca(v,M,F,W))return(0,j.of)(null);let ve;if("**"===v.path){const Ie=F.length>0?$r(F).parameters:{},ft=Ct(M)+F.length,Gt=new ds(F,Ie,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lr(v),Ni(v),v.component??v._loadedComponent??null,v,ct(M),ft,zn(v),ft);ve=(0,j.of)({snapshot:Gt,consumedSegments:[],remainingSegments:[]})}else ve=Us(M,v,F,C).pipe((0,Ze.U)(({matched:Ie,consumedSegments:ft,remainingSegments:Gt,parameters:Pn})=>{if(!Ie)return null;const un=Ct(M)+ft.length;return{snapshot:new ds(ft,Pn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lr(v),Ni(v),v.component??v._loadedComponent??null,v,ct(M),un,zn(v),un),consumedSegments:ft,remainingSegments:Gt}}));return ve.pipe((0,Le.w)(Ie=>{if(null===Ie)return(0,j.of)(null);const{snapshot:ft,consumedSegments:Gt,remainingSegments:Pn}=Ie;C=v._injector??C;const un=v._loadedInjector??C,Wn=function $(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(v),{segmentGroup:Mi,slicedSegments:ui}=Eo(M,Gt,Pn,Wn.filter(Gs=>void 0===Gs.redirectTo),this.relativeLinkResolution);if(0===ui.length&&Mi.hasChildren())return this.processChildren(un,Wn,Mi).pipe((0,Ze.U)(Gs=>null===Gs?null:[new kr(ft,Gs)]));if(0===Wn.length&&0===ui.length)return(0,j.of)([new kr(ft,[])]);const Xo=Ni(v)===W;return this.processSegment(un,Wn,Mi,ui,Xo?Ht:W).pipe((0,Ze.U)(Gs=>null===Gs?null:[new kr(ft,Gs)]))}))}}function R(_){const C=_.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function K(_){const C=[],v=new Set;for(const M of _){if(!R(M)){C.push(M);continue}const F=C.find(W=>M.value.routeConfig===W.value.routeConfig);void 0!==F?(F.children.push(...M.children),v.add(F)):C.push(M)}for(const M of v){const F=K(M.children);C.push(new kr(M.value,F))}return C.filter(M=>!v.has(M))}function ct(_){let C=_;for(;C._sourceSegment;)C=C._sourceSegment;return C}function Ct(_){let C=_,v=C._segmentIndexShift??0;for(;C._sourceSegment;)C=C._sourceSegment,v+=C._segmentIndexShift??0;return v-1}function lr(_){return _.data||{}}function zn(_){return _.resolve||{}}function St(_){return"string"==typeof _.title||null===_.title}function mr(_){return(0,Le.w)(C=>{const v=_(C);return v?(0,U.D)(v).pipe((0,Ze.U)(()=>C)):(0,j.of)(C)})}let xr=(()=>{class _{buildTitle(v){let M,F=v.root;for(;void 0!==F;)M=this.getResolvedTitleForRoute(F)??M,F=F.children.find(W=>W.outlet===Ht);return M}getResolvedTitleForRoute(v){return v.data[En]}}return _.\u0275fac=function(v){return new(v||_)},_.\u0275prov=d.Yz7({token:_,factory:function(){return(0,d.f3M)(ao)},providedIn:"root"}),_})(),ao=(()=>{class _ extends xr{constructor(v){super(),this.title=v}updateTitle(v){const M=this.buildTitle(v);void 0!==M&&this.title.setTitle(M)}}return _.\u0275fac=function(v){return new(v||_)(d.LFG(On.Dx))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class on{}class zt extends class da{shouldDetach(C){return!1}store(C,v){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,v){return C.routeConfig===v.routeConfig}}{}const Mt=new d.OlP("",{providedIn:"root",factory:()=>({})}),Ga=new d.OlP("ROUTES");let Za=(()=>{class _{constructor(v,M){this.injector=v,this.compiler=M,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,j.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const M=cn(v.loadComponent()).pipe((0,Ee.b)(W=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=W}),Kn(()=>{this.componentLoaders.delete(v)})),F=new xe(M,()=>new m.x).pipe(_t());return this.componentLoaders.set(v,F),F}loadChildren(v,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,j.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const W=this.loadModuleFactoryOrRoutes(M.loadChildren).pipe((0,Ze.U)(Ie=>{this.onLoadEndListener&&this.onLoadEndListener(M);let ft,Gt,Pn=!1;Array.isArray(Ie)?Gt=Ie:(ft=Ie.create(v).injector,Gt=jr(ft.get(Ga,[],d.XFs.Self|d.XFs.Optional)));return{routes:Gt.map(Ar),injector:ft}}),Kn(()=>{this.childrenLoaders.delete(M)})),ve=new xe(W,()=>new m.x).pipe(_t());return this.childrenLoaders.set(M,ve),ve}loadModuleFactoryOrRoutes(v){return cn(v()).pipe((0,Ye.z)(M=>M instanceof d.YKP||Array.isArray(M)?(0,j.of)(M):(0,U.D)(this.compiler.compileModuleAsync(M))))}}return _.\u0275fac=function(v){return new(v||_)(d.LFG(d.zs3),d.LFG(d.Sil))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class xu{}class nl{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,v){return C}}function ha(_){throw _}function Rl(_,C,v){return C.parse("/")}const Ol={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ai(){const _=(0,d.f3M)(_e),C=(0,d.f3M)(zr),v=(0,d.f3M)(Ae.Ye),M=(0,d.f3M)(d.zs3),F=(0,d.f3M)(d.Sil),W=(0,d.f3M)(Ga,{optional:!0})??[],ve=(0,d.f3M)(Mt,{optional:!0})??{},Ie=(0,d.f3M)(ao),ft=(0,d.f3M)(xr,{optional:!0}),Gt=(0,d.f3M)(xu,{optional:!0}),Pn=(0,d.f3M)(on,{optional:!0}),un=new an(null,_,C,v,M,F,jr(W));return Gt&&(un.urlHandlingStrategy=Gt),Pn&&(un.routeReuseStrategy=Pn),un.titleStrategy=ft??Ie,function za(_,C){_.errorHandler&&(C.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(C.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(C.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(C.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(C.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(C.canceledNavigationResolution=_.canceledNavigationResolution)}(ve,un),un}let an=(()=>{class _{constructor(v,M,F,W,ve,Ie,ft){this.rootComponentType=v,this.urlSerializer=M,this.rootContexts=F,this.location=W,this.config=ft,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new m.x,this.errorHandler=ha,this.malformedUriErrorHandler=Rl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,j.of)(void 0),this.urlHandlingStrategy=new nl,this.routeReuseStrategy=new zt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ve.get(Za),this.configLoader.onLoadEndListener=Wn=>this.triggerEvent(new Pe(Wn)),this.configLoader.onLoadStartListener=Wn=>this.triggerEvent(new Fe(Wn)),this.ngModule=ve.get(d.h0i),this.console=ve.get(d.c2e);const un=ve.get(d.R0b);this.isNgZoneEnabled=un instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(ft),this.currentUrlTree=function tn(){return new An(new Vt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hi(this.currentUrlTree,this.rootComponentType),this.transitions=new de({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(v){const M=this.events;return v.pipe((0,Oe.h)(F=>0!==F.id),(0,Ze.U)(F=>({...F,extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,Le.w)(F=>{let W=!1,ve=!1;return(0,j.of)(F).pipe((0,Ee.b)(Ie=>{this.currentNavigation={id:Ie.id,initialUrl:Ie.rawUrl,extractedUrl:Ie.extractedUrl,trigger:Ie.source,extras:Ie.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Le.w)(Ie=>{const ft=this.browserUrlTree.toString(),Gt=!this.navigated||Ie.extractedUrl.toString()!==ft||ft!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Gt)&&this.urlHandlingStrategy.shouldProcessUrl(Ie.rawUrl))return Pu(Ie.source)&&(this.browserUrlTree=Ie.extractedUrl),(0,j.of)(Ie).pipe((0,Le.w)(un=>{const Wn=this.transitions.getValue();return M.next(new ji(un.id,this.serializeUrl(un.extractedUrl),un.source,un.restoredState)),Wn!==this.transitions.getValue()?It.E:Promise.resolve(un)}),function io(_,C,v,M){return(0,Le.w)(F=>function yi(_,C,v,M,F){return new ns(_,C,v,M,F).apply()}(_,C,v,F.extractedUrl,M).pipe((0,Ze.U)(W=>({...F,urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ee.b)(un=>{this.currentNavigation={...this.currentNavigation,finalUrl:un.urlAfterRedirects},F.urlAfterRedirects=un.urlAfterRedirects}),function vr(_,C,v,M,F,W){return(0,Ye.z)(ve=>function Lo(_,C,v,M,F,W,ve="emptyOnly",Ie="legacy"){return new ou(_,C,v,M,F,ve,Ie,W).recognize().pipe((0,Le.w)(ft=>null===ft?function Io(_){return new ae.y(C=>C.error(_))}(new oo):(0,j.of)(ft)))}(_,C,v,ve.urlAfterRedirects,M.serialize(ve.urlAfterRedirects),M,F,W).pipe((0,Ze.U)(Ie=>({...ve,targetSnapshot:Ie}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ee.b)(un=>{if(F.targetSnapshot=un.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!un.extras.skipLocationChange){const Mi=this.urlHandlingStrategy.merge(un.urlAfterRedirects,un.rawUrl);this.setBrowserUrl(Mi,un)}this.browserUrlTree=un.urlAfterRedirects}const Wn=new Ha(un.id,this.serializeUrl(un.extractedUrl),this.serializeUrl(un.urlAfterRedirects),un.targetSnapshot);M.next(Wn)}));if(Gt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Wn,extractedUrl:Mi,source:ui,restoredState:Xo,extras:Gs}=Ie,wa=new ji(Wn,this.serializeUrl(Mi),ui,Xo);M.next(wa);const ea=Hi(Mi,this.rootComponentType).snapshot;return F={...Ie,targetSnapshot:ea,urlAfterRedirects:Mi,extras:{...Gs,skipLocationChange:!1,replaceUrl:!1}},(0,j.of)(F)}return this.rawUrlTree=Ie.rawUrl,Ie.resolve(null),It.E}),(0,Ee.b)(Ie=>{const ft=new cr(Ie.id,this.serializeUrl(Ie.extractedUrl),this.serializeUrl(Ie.urlAfterRedirects),Ie.targetSnapshot);this.triggerEvent(ft)}),(0,Ze.U)(Ie=>F={...Ie,guards:ro(Ie.targetSnapshot,Ie.currentSnapshot,this.rootContexts)}),function Is(_,C){return(0,Ye.z)(v=>{const{targetSnapshot:M,currentSnapshot:F,guards:{canActivateChecks:W,canDeactivateChecks:ve}}=v;return 0===ve.length&&0===W.length?(0,j.of)({...v,guardsResult:!0}):function Ls(_,C,v,M){return(0,U.D)(_).pipe((0,Ye.z)(F=>function Co(_,C,v,M,F){const W=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,j.of)(!0);const ve=W.map(Ie=>{const ft=bi(C)??F,Gt=ei(Ie,ft);return cn(function X(_){return _&&Es(_.canDeactivate)}(Gt)?Gt.canDeactivate(_,C,v,M):ft.runInContext(()=>Gt(_,C,v,M))).pipe((0,Je.P)())});return(0,j.of)(ve).pipe(Di())}(F.component,F.route,v,C,M)),(0,Je.P)(F=>!0!==F,!0))}(ve,M,F,_).pipe((0,Ye.z)(Ie=>Ie&&function Br(_){return"boolean"==typeof _}(Ie)?function wo(_,C,v,M){return(0,U.D)(C).pipe(Me(F=>(0,$e.z)(function ki(_,C){return null!==_&&C&&C(new Qe(_)),(0,j.of)(!0)}(F.route.parent,M),function No(_,C){return null!==_&&C&&C(new Nt(_)),(0,j.of)(!0)}(F.route,M),function xa(_,C,v){const M=C[C.length-1],W=C.slice(0,C.length-1).reverse().map(ve=>function Gr(_){const C=_.routeConfig?_.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:_,guards:C}:null}(ve)).filter(ve=>null!==ve).map(ve=>mt(()=>{const Ie=ve.guards.map(ft=>{const Gt=bi(ve.node)??v,Pn=ei(ft,Gt);return cn(function O(_){return _&&Es(_.canActivateChild)}(Pn)?Pn.canActivateChild(M,_):Gt.runInContext(()=>Pn(M,_))).pipe((0,Je.P)())});return(0,j.of)(Ie).pipe(Di())}));return(0,j.of)(W).pipe(Di())}(_,F.path,v),function Vs(_,C,v){const M=C.routeConfig?C.routeConfig.canActivate:null;if(!M||0===M.length)return(0,j.of)(!0);const F=M.map(W=>mt(()=>{const ve=bi(C)??v,Ie=ei(W,ve);return cn(function k(_){return _&&Es(_.canActivate)}(Ie)?Ie.canActivate(C,_):ve.runInContext(()=>Ie(C,_))).pipe((0,Je.P)())}));return(0,j.of)(F).pipe(Di())}(_,F.route,v))),(0,Je.P)(F=>!0!==F,!0))}(M,W,_,C):(0,j.of)(Ie)),(0,Ze.U)(Ie=>({...v,guardsResult:Ie})))})}(this.ngModule.injector,Ie=>this.triggerEvent(Ie)),(0,Ee.b)(Ie=>{if(F.guardsResult=Ie.guardsResult,_n(Ie.guardsResult))throw oa(0,Ie.guardsResult);const ft=new ho(Ie.id,this.serializeUrl(Ie.extractedUrl),this.serializeUrl(Ie.urlAfterRedirects),Ie.targetSnapshot,!!Ie.guardsResult);this.triggerEvent(ft)}),(0,Oe.h)(Ie=>!!Ie.guardsResult||(this.restoreHistory(Ie),this.cancelNavigationTransition(Ie,"",3),!1)),mr(Ie=>{if(Ie.guards.canActivateChecks.length)return(0,j.of)(Ie).pipe((0,Ee.b)(ft=>{const Gt=new fo(ft.id,this.serializeUrl(ft.extractedUrl),this.serializeUrl(ft.urlAfterRedirects),ft.targetSnapshot);this.triggerEvent(Gt)}),(0,Le.w)(ft=>{let Gt=!1;return(0,j.of)(ft).pipe(function yn(_,C){return(0,Ye.z)(v=>{const{targetSnapshot:M,guards:{canActivateChecks:F}}=v;if(!F.length)return(0,j.of)(v);let W=0;return(0,U.D)(F).pipe(Me(ve=>function Mr(_,C,v,M){const F=_.routeConfig,W=_._resolve;return void 0!==F?.title&&!St(F)&&(W[En]=F.title),function Vn(_,C,v,M){const F=function ni(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===F.length)return(0,j.of)({});const W={};return(0,U.D)(F).pipe((0,Ye.z)(ve=>function js(_,C,v,M){const F=bi(C)??M,W=ei(_,F);return cn(W.resolve?W.resolve(C,v):F.runInContext(()=>W(C,v)))}(_[ve],C,v,M).pipe((0,Je.P)(),(0,Ee.b)(Ie=>{W[ve]=Ie}))),se(1),function Gn(_){return(0,Ze.U)(()=>_)}(W),ie(ve=>ti(ve)?It.E:st(ve)))}(W,_,C,M).pipe((0,Ze.U)(ve=>(_._resolvedData=ve,_.data=Ns(_,v).resolve,F&&St(F)&&(_.data[En]=F.title),null)))}(ve.route,M,_,C)),(0,Ee.b)(()=>W++),se(1),(0,Ye.z)(ve=>W===F.length?(0,j.of)(v):It.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ee.b)({next:()=>Gt=!0,complete:()=>{Gt||(this.restoreHistory(ft),this.cancelNavigationTransition(ft,"",2))}}))}),(0,Ee.b)(ft=>{const Gt=new po(ft.id,this.serializeUrl(ft.extractedUrl),this.serializeUrl(ft.urlAfterRedirects),ft.targetSnapshot);this.triggerEvent(Gt)}))}),mr(Ie=>{const ft=Gt=>{const Pn=[];Gt.routeConfig?.loadComponent&&!Gt.routeConfig._loadedComponent&&Pn.push(this.configLoader.loadComponent(Gt.routeConfig).pipe((0,Ee.b)(un=>{Gt.component=un}),(0,Ze.U)(()=>{})));for(const un of Gt.children)Pn.push(...ft(un));return Pn};return Ke(ft(Ie.targetSnapshot.root)).pipe((0,We.d)(),(0,Ut.q)(1))}),mr(()=>this.afterPreactivation()),(0,Ze.U)(Ie=>{const ft=function Hr(_,C,v){const M=ci(_,C._root,v?v._root:void 0);return new cs(M,C)}(this.routeReuseStrategy,Ie.targetSnapshot,Ie.currentRouterState);return F={...Ie,targetRouterState:ft}}),(0,Ee.b)(Ie=>{this.currentUrlTree=Ie.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ie.urlAfterRedirects,Ie.rawUrl),this.routerState=Ie.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ie.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ie),this.browserUrlTree=Ie.urlAfterRedirects)}),((_,C,v)=>(0,Ze.U)(M=>(new At(C,M.targetRouterState,M.currentRouterState,v).activate(_),M)))(this.rootContexts,this.routeReuseStrategy,Ie=>this.triggerEvent(Ie)),(0,Ee.b)({next(){W=!0},complete(){W=!0}}),Kn(()=>{W||ve||this.cancelNavigationTransition(F,"",1),this.currentNavigation?.id===F.id&&(this.currentNavigation=null)}),ie(Ie=>{if(ve=!0,mo(Ie)){hs(Ie)||(this.navigated=!0,this.restoreHistory(F,!0));const ft=new xo(F.id,this.serializeUrl(F.extractedUrl),Ie.message,Ie.cancellationCode);if(M.next(ft),hs(Ie)){const Gt=this.urlHandlingStrategy.merge(Ie.url,this.rawUrlTree),Pn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pu(F.source)};this.scheduleNavigation(Gt,"imperative",null,Pn,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{this.restoreHistory(F,!0);const ft=new Ys(F.id,this.serializeUrl(F.extractedUrl),Ie,F.targetSnapshot??void 0);M.next(ft);try{F.resolve(this.errorHandler(Ie))}catch(Gt){F.reject(Gt)}}return It.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next({...this.transitions.value,...v})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const M="popstate"===v.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{const F={replaceUrl:!0},W=v.state?.navigationId?v.state:null;if(W){const Ie={...W};delete Ie.navigationId,delete Ie.\u0275routerPageId,0!==Object.keys(Ie).length&&(F.state=Ie)}const ve=this.parseUrl(v.url);this.scheduleNavigation(ve,M,W,F)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){this.config=v.map(Ar),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,M={}){const{relativeTo:F,queryParams:W,fragment:ve,queryParamsHandling:Ie,preserveFragment:ft}=M,Gt=F||this.routerState.root,Pn=ft?this.currentUrlTree.fragment:ve;let un=null;switch(Ie){case"merge":un={...this.currentUrlTree.queryParams,...W};break;case"preserve":un=this.currentUrlTree.queryParams;break;default:un=W||null}return null!==un&&(un=this.removeEmptyProps(un)),Yr(Gt,this.currentUrlTree,v,un,Pn??null)}navigateByUrl(v,M={skipLocationChange:!1}){const F=_n(v)?v:this.parseUrl(v),W=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,M)}navigate(v,M={skipLocationChange:!1}){return function bo(_){for(let C=0;C<_.length;C++){if(null==_[C])throw new d.vHH(4008,false)}}(v),this.navigateByUrl(this.createUrlTree(v,M),M)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let M;try{M=this.urlSerializer.parse(v)}catch(F){M=this.malformedUriErrorHandler(F,this.urlSerializer,v)}return M}isActive(v,M){let F;if(F=!0===M?{...Ol}:!1===M?{...fa}:M,_n(v))return sr(this.currentUrlTree,v,F);const W=this.parseUrl(v);return sr(this.currentUrlTree,W,F)}removeEmptyProps(v){return Object.keys(v).reduce((M,F)=>{const W=v[F];return null!=W&&(M[F]=W),M},{})}processNavigations(){this.navigations.subscribe(v=>{this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new ls(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,M,F,W,ve){if(this.disposed)return Promise.resolve(!1);let Ie,ft,Gt;ve?(Ie=ve.resolve,ft=ve.reject,Gt=ve.promise):Gt=new Promise((Wn,Mi)=>{Ie=Wn,ft=Mi});const Pn=++this.navigationId;let un;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(F=this.location.getState()),un=F&&F.\u0275routerPageId?F.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):un=0,this.setTransition({id:Pn,targetPageId:un,source:M,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:W,resolve:Ie,reject:ft,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(Wn=>Promise.reject(Wn))}setBrowserUrl(v,M){const F=this.urlSerializer.serialize(v),W={...M.extras.state,...this.generateNgRouterState(M.id,M.targetPageId)};this.location.isCurrentPathEqualTo(F)||M.extras.replaceUrl?this.location.replaceState(F,"",W):this.location.go(F,"",W)}restoreHistory(v,M=!1){if("computed"===this.canceledNavigationResolution){const F=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===F?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===F&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(F)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,M,F){const W=new xo(v.id,this.serializeUrl(v.extractedUrl),M,F);this.triggerEvent(W),v.resolve(!1)}generateNgRouterState(v,M){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:M}:{navigationId:v}}}return _.\u0275fac=function(v){d.$Z()},_.\u0275prov=d.Yz7({token:_,factory:function(){return ai()},providedIn:"root"}),_})();function Pu(_){return"imperative"!==_}let Pr=(()=>{class _{constructor(v,M,F,W,ve){this.router=v,this.route=M,this.tabIndexAttribute=F,this.renderer=W,this.el=ve,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new m.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(v){this._preserveFragment=(0,d.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,d.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,d.D6c)(v)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(v){if(null!=this.tabIndexAttribute)return;const M=this.renderer,F=this.el.nativeElement;null!==v?M.setAttribute(F,"tabindex",v):M.removeAttribute(F,"tabindex")}ngOnChanges(v){this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(v){return new(v||_)(d.Y36(an),d.Y36(ws),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},_.\u0275dir=d.lG2({type:_,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(v,M){1&v&&d.NdJ("click",function(){return M.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),_})(),fn=(()=>{class _{constructor(v,M,F){this.router=v,this.route=M,this.locationStrategy=F,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new m.x,this.subscription=v.events.subscribe(W=>{W instanceof ls&&this.updateTargetUrlAndHref()})}set preserveFragment(v){this._preserveFragment=(0,d.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,d.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,d.D6c)(v)}get replaceUrl(){return this._replaceUrl}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:null}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,M,F,W,ve){return!!(0!==v||M||F||W||ve||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(v){return new(v||_)(d.Y36(an),d.Y36(ws),d.Y36(Ae.S$))},_.\u0275dir=d.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,M){1&v&&d.NdJ("click",function(W){return M.onClick(W.button,W.ctrlKey,W.shiftKey,W.altKey,W.metaKey)}),2&v&&d.uIk("target",M.target)("href",M.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),_})();class pa{}let gs=(()=>{class _{constructor(v,M,F,W,ve){this.router=v,this.injector=F,this.preloadingStrategy=W,this.loader=ve}setUpPreloading(){this.subscription=this.router.events.pipe((0,Oe.h)(v=>v instanceof ls),Me(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,M){const F=[];for(const W of M){W.providers&&!W._injector&&(W._injector=(0,d.MMx)(W.providers,v,`Route: ${W.path}`));const ve=W._injector??v,Ie=W._loadedInjector??ve;W.loadChildren&&!W._loadedRoutes&&void 0===W.canLoad||W.loadComponent&&!W._loadedComponent?F.push(this.preloadConfig(ve,W)):(W.children||W._loadedRoutes)&&F.push(this.processRoutes(Ie,W.children??W._loadedRoutes))}return(0,U.D)(F).pipe((0,kn.J)())}preloadConfig(v,M){return this.preloadingStrategy.preload(M,()=>{let F;F=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(v,M):(0,j.of)(null);const W=F.pipe((0,Ye.z)(ve=>null===ve?(0,j.of)(void 0):(M._loadedRoutes=ve.routes,M._loadedInjector=ve.injector,this.processRoutes(ve.injector??v,ve.routes))));if(M.loadComponent&&!M._loadedComponent){const ve=this.loader.loadComponent(M);return(0,U.D)([W,ve]).pipe((0,kn.J)())}return W})}}return _.\u0275fac=function(v){return new(v||_)(d.LFG(an),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(pa),d.LFG(Za))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const ga=new d.OlP("");let Jo=(()=>{class _{constructor(v,M,F={}){this.router=v,this.viewportScroller=M,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof ls&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Jn&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,M){this.router.triggerEvent(new Jn(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(v){d.$Z()},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac}),_})();function Vo(_,C){return{\u0275kind:_,\u0275providers:C}}function ma(_){return[{provide:Ga,multi:!0,useValue:_}]}function Ds(){const _=(0,d.f3M)(d.zs3);return C=>{const v=_.get(d.z2F);if(C!==v.components[0])return;const M=_.get(an),F=_.get(Ou);1===_.get(ya)&&M.initialNavigation(),_.get(et,null,d.XFs.Optional)?.setUpPreloading(),_.get(ga,null,d.XFs.Optional)?.init(),M.resetRootComponentType(v.componentTypes[0]),F.closed||(F.next(),F.unsubscribe())}}const Ou=new d.OlP("",{factory:()=>new m.x}),ya=new d.OlP("",{providedIn:"root",factory:()=>1});const et=new d.OlP("");function Qo(_){return Vo(0,[{provide:et,useExisting:gs},{provide:pa,useExisting:_}])}const Si=new d.OlP("ROUTER_FORROOT_GUARD"),au=[Ae.Ye,{provide:_e,useClass:Xe},{provide:an,useFactory:ai},zr,{provide:ws,useFactory:function qa(_){return _.routerState.root},deps:[an]},Za];function Hs(){return new d.PXZ("Router",an)}let Pa=(()=>{class _{constructor(v){}static forRoot(v,M){return{ngModule:_,providers:[au,[],ma(v),{provide:Si,useFactory:ms,deps:[[an,new d.FiY,new d.tp0]]},{provide:Mt,useValue:M||{}},M?.useHash?{provide:Ae.S$,useClass:Ae.Do}:{provide:Ae.S$,useClass:Ae.b0},{provide:ga,useFactory:()=>{const _=(0,d.f3M)(an),C=(0,d.f3M)(Ae.EM),v=(0,d.f3M)(Mt);return v.scrollOffset&&C.setOffset(v.scrollOffset),new Jo(_,C,v)}},M?.preloadingStrategy?Qo(M.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:Hs},M?.initialNavigation?Wa(M):[],[{provide:Uo,useFactory:Ds},{provide:d.tb,multi:!0,useExisting:Uo}]]}}static forChild(v){return{ngModule:_,providers:[ma(v)]}}}return _.\u0275fac=function(v){return new(v||_)(d.LFG(Si,8))},_.\u0275mod=d.oAB({type:_}),_.\u0275inj=d.cJS({imports:[vo]}),_})();function ms(_){return"guarded"}function Wa(_){return["disabled"===_.initialNavigation?Vo(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const C=(0,d.f3M)(an);return()=>{C.setUpLocationChangeListener()}}},{provide:ya,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?Vo(2,[{provide:ya,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:C=>{const v=C.get(Ae.V_,Promise.resolve());let M=!1;return()=>v.then(()=>new Promise(W=>{const ve=C.get(an),Ie=C.get(Ou);(function F(W){C.get(an).events.pipe((0,Oe.h)(Ie=>Ie instanceof ls||Ie instanceof xo||Ie instanceof Ys),(0,Ze.U)(Ie=>Ie instanceof ls||Ie instanceof xo&&(0===Ie.code||1===Ie.code)&&null),(0,Oe.h)(Ie=>null!==Ie),(0,Ut.q)(1)).subscribe(()=>{W()})})(()=>{W(!0),M=!0}),ve.afterPreactivation=()=>(W(!0),M||Ie.closed?(0,j.of)(void 0):Ie),ve.initialNavigation()}))}}]).\u0275providers:[]]}const Uo=new d.OlP("")},3942:(Lt,ze,N)=>{N.d(ze,{Z:()=>Ke});var d=N(2090),U=N(4859),j=N(6881),m=N(1877);class de{constructor(je,$e){this._delegate=je,this.firebase=$e,(0,j._addComponent)(je,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this._delegate.automaticDataCollectionEnabled=je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(je=>{this._delegate.checkDestroyed(),je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(je,$e=j._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const mt=this._delegate.container.getProvider(je);return!mt.isInitialized()&&"EXPLICIT"===(null===(Et=mt.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&mt.initialize(),mt.getImmediate({identifier:$e})}_removeServiceInstance(je,$e=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(je).clearInstance($e)}_addComponent(je){(0,j._addComponent)(this._delegate,je)}_addOrOverwriteComponent(je){(0,j._addOrOverwriteComponent)(this._delegate,je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function le(){const ot=function A(ot){const je={},$e={__esModule:!0,initializeApp:function Ce(vt,we={}){const _t=j.initializeApp(vt,we);if((0,d.r3)(je,_t.name))return je[_t.name];const xe=new ot(_t,$e);return je[_t.name]=xe,xe},app:mt,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function st(vt){const we=vt.name,_t=we.replace("-compat","");if(j._registerComponent(vt)&&"PUBLIC"===vt.type){const xe=(Ae=mt())=>{if("function"!=typeof Ae[_t])throw ae.create("invalid-app-argument",{appName:we});return Ae[_t]()};void 0!==vt.serviceProps&&(0,d.ZB)(xe,vt.serviceProps),$e[_t]=xe,ot.prototype[_t]=function(...Ae){return this._getService.bind(this,we).apply(this,vt.multipleInstances?Ae:[])}}return"PUBLIC"===vt.type?$e[_t]:null},removeApp:function Et(vt){delete je[vt]},useAsService:function It(vt,we){return"serverAuth"===we?null:we},modularAPIs:j}};function mt(vt){if(!(0,d.r3)(je,vt=vt||j._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:vt});return je[vt]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function ut(){return Object.keys(je).map(vt=>je[vt])}}),mt.App=ot,$e}(de);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function je($e){(0,d.ZB)(ot,$e)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ot}(),ue=new m.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=ne;!function qe(ot){(0,j.registerVersion)("@firebase/app-compat","0.2.13",ot)}()},6881:(Lt,ze,N)=>{N.r(ze),N.d(ze,{FirebaseError:()=>m.ZR,SDK_VERSION:()=>Zr,_DEFAULT_ENTRY_NAME:()=>$r,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>tn,_apps:()=>wn,_clearComponents:()=>gr,_components:()=>cn,_getProvider:()=>pr,_registerComponent:()=>Nn,_removeServiceInstance:()=>sr,deleteApp:()=>or,getApp:()=>An,getApps:()=>Vt,initializeApp:()=>xn,onLog:()=>J,registerVersion:()=>ht,setLogLevel:()=>_e});var d=N(5861),U=N(4859),j=N(1877),m=N(2090);let b,ae;const ne=new WeakMap,ue=new WeakMap,Te=new WeakMap,at=new WeakMap,qe=new WeakMap;let je={get(He,Ge,bt){if(He instanceof IDBTransaction){if("done"===Ge)return ue.get(He);if("objectStoreNames"===Ge)return He.objectStoreNames||Te.get(He);if("store"===Ge)return bt.objectStoreNames[1]?void 0:bt.objectStore(bt.objectStoreNames[0])}return Ce(He[Ge])},set:(He,Ge,bt)=>(He[Ge]=bt,!0),has:(He,Ge)=>He instanceof IDBTransaction&&("done"===Ge||"store"===Ge)||Ge in He};function mt(He){return"function"==typeof He?function Et(He){return He!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(He)?function(...Ge){return He.apply(ut(this),Ge),Ce(ne.get(this))}:function(...Ge){return Ce(He.apply(ut(this),Ge))}:function(Ge,...bt){const Dt=He.call(ut(this),Ge,...bt);return Te.set(Dt,Ge.sort?Ge.sort():[Ge]),Ce(Dt)}}(He):(He instanceof IDBTransaction&&function ot(He){if(ue.has(He))return;const Ge=new Promise((bt,Dt)=>{const mn=()=>{He.removeEventListener("complete",_n),He.removeEventListener("error",Fn),He.removeEventListener("abort",Fn)},_n=()=>{bt(),mn()},Fn=()=>{Dt(He.error||new DOMException("AbortError","AbortError")),mn()};He.addEventListener("complete",_n),He.addEventListener("error",Fn),He.addEventListener("abort",Fn)});ue.set(He,Ge)}(He),((He,Ge)=>Ge.some(bt=>He instanceof bt))(He,function A(){return b||(b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(He,je):He)}function Ce(He){if(He instanceof IDBRequest)return function Ke(He){const Ge=new Promise((bt,Dt)=>{const mn=()=>{He.removeEventListener("success",_n),He.removeEventListener("error",Fn)},_n=()=>{bt(Ce(He.result)),mn()},Fn=()=>{Dt(He.error),mn()};He.addEventListener("success",_n),He.addEventListener("error",Fn)});return Ge.then(bt=>{bt instanceof IDBCursor&&ne.set(bt,He)}).catch(()=>{}),qe.set(Ge,He),Ge}(He);if(at.has(He))return at.get(He);const Ge=mt(He);return Ge!==He&&(at.set(He,Ge),qe.set(Ge,He)),Ge}const ut=He=>qe.get(He),vt=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],_t=new Map;function xe(He,Ge){if(!(He instanceof IDBDatabase)||Ge in He||"string"!=typeof Ge)return;if(_t.get(Ge))return _t.get(Ge);const bt=Ge.replace(/FromIndex$/,""),Dt=Ge!==bt,mn=we.includes(bt);if(!(bt in(Dt?IDBIndex:IDBObjectStore).prototype)||!mn&&!vt.includes(bt))return;const _n=function(){var Fn=(0,d.Z)(function*(Rr,...Rn){const Kr=this.transaction(Rr,mn?"readwrite":"readonly");let Yr=Kr.store;return Dt&&(Yr=Yr.index(Rn.shift())),(yield Promise.all([Yr[bt](...Rn),mn&&Kr.done]))[0]});return function(Rn){return Fn.apply(this,arguments)}}();return _t.set(Ge,_n),_n}!function $e(He){je=He(je)}(He=>({...He,get:(Ge,bt,Dt)=>xe(Ge,bt)||He.get(Ge,bt,Dt),has:(Ge,bt)=>!!xe(Ge,bt)||He.has(Ge,bt)}));class Ae{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function Ze(He){return"VERSION"===He.getComponent()?.type}(bt)){const Dt=bt.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(bt=>bt).join(" ")}}const Le="@firebase/app",Ve=new j.Yd("@firebase/app"),$r="[DEFAULT]",fr={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wn=new Map,cn=new Map;function Wt(He,Ge){try{He.container.addComponent(Ge)}catch(bt){Ve.debug(`Component ${Ge.name} failed to register with FirebaseApp ${He.name}`,bt)}}function tn(He,Ge){He.container.addOrOverwriteComponent(Ge)}function Nn(He){const Ge=He.name;if(cn.has(Ge))return Ve.debug(`There were multiple attempts to register component ${Ge}.`),!1;cn.set(Ge,He);for(const bt of wn.values())Wt(bt,He);return!0}function pr(He,Ge){const bt=He.container.getProvider("heartbeat").getImmediate({optional:!0});return bt&&bt.triggerHeartbeat(),He.container.getProvider(Ge)}function sr(He,Ge,bt=$r){pr(He,Ge).clearInstance(bt)}function gr(){cn.clear()}const yr=new m.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(Ge,bt,Dt){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const Zr="9.23.0";function xn(He,Ge={}){let bt=He;"object"!=typeof Ge&&(Ge={name:Ge});const Dt=Object.assign({name:$r,automaticDataCollectionEnabled:!1},Ge),mn=Dt.name;if("string"!=typeof mn||!mn)throw yr.create("bad-app-name",{appName:String(mn)});if(bt||(bt=(0,m.aH)()),!bt)throw yr.create("no-options");const _n=wn.get(mn);if(_n){if((0,m.vZ)(bt,_n.options)&&(0,m.vZ)(Dt,_n.config))return _n;throw yr.create("duplicate-app",{appName:mn})}const Fn=new U.H0(mn);for(const Rn of cn.values())Fn.addComponent(Rn);const Rr=new In(bt,Dt,Fn);return wn.set(mn,Rr),Rr}function An(He=$r){const Ge=wn.get(He);if(!Ge&&He===$r&&(0,m.aH)())return xn();if(!Ge)throw yr.create("no-app",{appName:He});return Ge}function Vt(){return Array.from(wn.values())}function or(He){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(He){const Ge=He.name;wn.has(Ge)&&(wn.delete(Ge),yield Promise.all(He.container.getProviders().map(bt=>bt.delete())),He.isDeleted=!0)})).apply(this,arguments)}function ht(He,Ge,bt){var Dt;let mn=null!==(Dt=fr[He])&&void 0!==Dt?Dt:He;bt&&(mn+=`-${bt}`);const _n=mn.match(/\s|\//),Fn=Ge.match(/\s|\//);if(_n||Fn){const Rr=[`Unable to register library "${mn}" with version "${Ge}":`];return _n&&Rr.push(`library name "${mn}" contains illegal characters (whitespace or "/")`),_n&&Fn&&Rr.push("and"),Fn&&Rr.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void Ve.warn(Rr.join(" "))}Nn(new U.wA(`${mn}-version`,()=>({library:mn,version:Ge}),"VERSION"))}function J(He,Ge){if(null!==He&&"function"!=typeof He)throw yr.create("invalid-log-argument");(0,j.Am)(He,Ge)}function _e(He){(0,j.Ub)(He)}const ge="firebase-heartbeat-store";let ye=null;function ee(){return ye||(ye=function st(He,Ge,{blocked:bt,upgrade:Dt,blocking:mn,terminated:_n}={}){const Fn=indexedDB.open(He,Ge),Rr=Ce(Fn);return Dt&&Fn.addEventListener("upgradeneeded",Rn=>{Dt(Ce(Fn.result),Rn.oldVersion,Rn.newVersion,Ce(Fn.transaction),Rn)}),bt&&Fn.addEventListener("blocked",Rn=>bt(Rn.oldVersion,Rn.newVersion,Rn)),Rr.then(Rn=>{_n&&Rn.addEventListener("close",()=>_n()),mn&&Rn.addEventListener("versionchange",Kr=>mn(Kr.oldVersion,Kr.newVersion,Kr))}).catch(()=>{}),Rr}("firebase-heartbeat-database",1,{upgrade:(He,Ge)=>{0===Ge&&He.createObjectStore(ge)}}).catch(He=>{throw yr.create("idb-open",{originalErrorMessage:He.message})})),ye}function q(){return(q=(0,d.Z)(function*(He){try{return yield(yield ee()).transaction(ge).objectStore(ge).get(kt(He))}catch(Ge){if(Ge instanceof m.ZR)Ve.warn(Ge.message);else{const bt=yr.create("idb-get",{originalErrorMessage:Ge?.message});Ve.warn(bt.message)}}})).apply(this,arguments)}function Re(He,Ge){return gt.apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(He,Ge){try{const Dt=(yield ee()).transaction(ge,"readwrite");yield Dt.objectStore(ge).put(Ge,kt(He)),yield Dt.done}catch(bt){if(bt instanceof m.ZR)Ve.warn(bt.message);else{const Dt=yr.create("idb-set",{originalErrorMessage:bt?.message});Ve.warn(Dt.message)}}})).apply(this,arguments)}function kt(He){return`${He.name}!${He.options.appId}`}class me{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const bt=this.container.getProvider("app").getImmediate();this._storage=new nt(bt),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Ge=this;return(0,d.Z)(function*(){const Dt=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mn=oe();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==mn&&!Ge._heartbeatsCache.heartbeats.some(_n=>_n.date===mn))return Ge._heartbeatsCache.heartbeats.push({date:mn,agent:Dt}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(_n=>{const Fn=new Date(_n.date).valueOf();return Date.now()-Fn<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,d.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const bt=oe(),{heartbeatsToSend:Dt,unsentEntries:mn}=function Ue(He,Ge=1024){const bt=[];let Dt=He.slice();for(const mn of He){const _n=bt.find(Fn=>Fn.agent===mn.agent);if(_n){if(_n.dates.push(mn.date),Ft(bt)>Ge){_n.dates.pop();break}}else if(bt.push({agent:mn.agent,dates:[mn.date]}),Ft(bt)>Ge){bt.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:bt,unsentEntries:Dt}}(Ge._heartbeatsCache.heartbeats),_n=(0,m.L)(JSON.stringify({version:2,heartbeats:Dt}));return Ge._heartbeatsCache.lastSentHeartbeatDate=bt,mn.length>0?(Ge._heartbeatsCache.heartbeats=mn,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),_n})()}}function oe(){return(new Date).toISOString().substring(0,10)}class nt{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,m.hl)()&&(0,m.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,d.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function Q(He){return q.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var bt=this;return(0,d.Z)(function*(){var Dt;if(yield bt._canUseIndexedDBPromise){const _n=yield bt.read();return Re(bt.app,{lastSentHeartbeatDate:null!==(Dt=Ge.lastSentHeartbeatDate)&&void 0!==Dt?Dt:_n.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var bt=this;return(0,d.Z)(function*(){var Dt;if(yield bt._canUseIndexedDBPromise){const _n=yield bt.read();return Re(bt.app,{lastSentHeartbeatDate:null!==(Dt=Ge.lastSentHeartbeatDate)&&void 0!==Dt?Dt:_n.lastSentHeartbeatDate,heartbeats:[..._n.heartbeats,...Ge.heartbeats]})}})()}}function Ft(He){return(0,m.L)(JSON.stringify({version:2,heartbeats:He})).length}!function sn(He){Nn(new U.wA("platform-logger",Ge=>new Ae(Ge),"PRIVATE")),Nn(new U.wA("heartbeat",Ge=>new me(Ge),"PRIVATE")),ht(Le,"0.9.13",He),ht(Le,"0.9.13","esm2017"),ht("fire-js","")}("")},4859:(Lt,ze,N)=>{N.d(ze,{H0:()=>A,wA:()=>j});var d=N(5861),U=N(2090);class j{constructor(ne,ue,Te){this.name=ne,this.instanceFactory=ue,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const m="[DEFAULT]";class de{constructor(ne,ue){this.name=ne,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const ue=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(ue)){const Te=new U.BH;if(this.instancesDeferred.set(ue,Te),this.isInitialized(ue)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ue});at&&Te.resolve(at)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(ne){var ue;const Te=this.normalizeInstanceIdentifier(ne?.identifier),at=null!==(ue=ne?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(qe){if(at)return null;throw qe}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function ae(le){return"EAGER"===le.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:m})}catch{}for(const[ue,Te]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ue);try{const qe=this.getOrInitializeService({instanceIdentifier:at});Te.resolve(qe)}catch{}}}}clearInstance(ne=m){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,d.Z)(function*(){const ue=Array.from(ne.instances.values());yield Promise.all([...ue.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ue.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=m){return this.instances.has(ne)}getOptions(ne=m){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:ue={}}=ne,Te=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:Te,options:ue});for(const[qe,Ke]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(qe)&&Ke.resolve(at);return at}onInit(ne,ue){var Te;const at=this.normalizeInstanceIdentifier(ue),qe=null!==(Te=this.onInitCallbacks.get(at))&&void 0!==Te?Te:new Set;qe.add(ne),this.onInitCallbacks.set(at,qe);const Ke=this.instances.get(at);return Ke&&ne(Ke,at),()=>{qe.delete(ne)}}invokeOnInitCallbacks(ne,ue){const Te=this.onInitCallbacks.get(ue);if(Te)for(const at of Te)try{at(ne,ue)}catch{}}getOrInitializeService({instanceIdentifier:ne,options:ue={}}){let Te=this.instances.get(ne);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(le=ne,le===m?void 0:le),options:ue}),this.instances.set(ne,Te),this.instancesOptions.set(ne,ue),this.invokeOnInitCallbacks(Te,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,Te)}catch{}var le;return Te||null}normalizeInstanceIdentifier(ne=m){return this.component?this.component.multipleInstances?ne:m:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class A{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const ue=this.getProvider(ne.name);if(ue.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);ue.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const ue=new de(ne,this);return this.providers.set(ne,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Lt,ze,N)=>{N.d(ze,{Am:()=>le,Ub:()=>A,Yd:()=>ae,in:()=>U});const d=[];var U=(()=>{return(ne=U||(U={}))[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",U;var ne})();const j={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},m=U.INFO,de={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},b=(ne,ue,...Te)=>{if(ue<ne.logLevel)return;const at=(new Date).toISOString(),qe=de[ue];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[qe](`[${at}]  ${ne.name}:`,...Te)};class ae{constructor(ue){this.name=ue,this._logLevel=m,this._logHandler=b,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in U))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?j[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...ue),this._logHandler(this,U.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...ue),this._logHandler(this,U.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,U.INFO,...ue),this._logHandler(this,U.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,U.WARN,...ue),this._logHandler(this,U.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...ue),this._logHandler(this,U.ERROR,...ue)}}function A(ne){d.forEach(ue=>{ue.setLogLevel(ne)})}function le(ne,ue){for(const Te of d){let at=null;ue&&ue.level&&(at=j[ue.level]),Te.userLogHandler=null===ne?null:(qe,Ke,...ot)=>{const je=ot.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch{return null}}).filter($e=>$e).join(" ");Ke>=(at??qe.logLevel)&&ne({level:U[Ke].toLowerCase(),message:je,args:ot,type:qe.name})}}}},259:(Lt,ze,N)=>{N.d(ze,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=N(6881);(0,d.registerVersion)("firebase","9.23.0","app")},9260:(Lt,ze,N)=>{N.d(ze,{Z:()=>d.Z});var d=N(3942);d.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Lt,ze,N)=>{N.r(ze);var d=N(5861),U=N(3942),j=N(1389),m=N(2090),ae=(N(6881),N(1877),N(4859));function A(){return window}function ue(){return(ue=(0,d.Z)(function*(ee,Q,q){var Re;const{BuildInfo:gt}=A();(0,j.as)(Q.sessionId,"AuthEvent did not contain a session ID");const kt=yield $e(Q.sessionId),Qt={};return(0,j.at)()?Qt.ibi=gt.packageName:(0,j.au)()?Qt.apn=gt.packageName:(0,j.av)(ee,"operation-not-supported-in-this-environment"),gt.displayName&&(Qt.appDisplayName=gt.displayName),Qt.sessionId=kt,(0,j.aw)(ee,q,Q.type,void 0,null!==(Re=Q.eventId)&&void 0!==Re?Re:void 0,Qt)})).apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(ee){const{BuildInfo:Q}=A(),q={};(0,j.at)()?q.iosBundleId=Q.packageName:(0,j.au)()?q.androidPackageName=Q.packageName:(0,j.av)(ee,"operation-not-supported-in-this-environment"),yield(0,j.ax)(ee,q)})).apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(ee,Q,q){const{cordova:Re}=A();let gt=()=>{};try{yield new Promise((kt,Qt)=>{let he=null;function me(){var nt;kt();const Ft=null===(nt=Re.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof Ft&&Ft(),"function"==typeof q?.close&&q.close()}function oe(){he||(he=window.setTimeout(()=>{Qt((0,j.az)(ee,"redirect-cancelled-by-user"))},2e3))}function Ue(){"visible"===document?.visibilityState&&oe()}Q.addPassiveListener(me),document.addEventListener("resume",oe,!1),(0,j.au)()&&document.addEventListener("visibilitychange",Ue,!1),gt=()=>{Q.removePassiveListener(me),document.removeEventListener("resume",oe,!1),document.removeEventListener("visibilitychange",Ue,!1),he&&window.clearTimeout(he)}})}finally{gt()}})).apply(this,arguments)}function $e(ee){return Et.apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(ee){const Q=mt(ee),q=yield crypto.subtle.digest("SHA-256",Q);return Array.from(new Uint8Array(q)).map(gt=>gt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mt(ee){if((0,j.as)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ee);const Q=new ArrayBuffer(ee.length),q=new Uint8Array(Q);for(let Re=0;Re<ee.length;Re++)q[Re]=ee.charCodeAt(Re);return q}class ut extends j.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Q=>{this.resolveInialized=Q})}addPassiveListener(Q){this.passiveListeners.add(Q)}removePassiveListener(Q){this.passiveListeners.delete(Q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Q){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(Q)),super.onEvent(Q)}initialized(){var Q=this;return(0,d.Z)(function*(){yield Q.initPromise})()}}function vt(ee){return we.apply(this,arguments)}function we(){return(we=(0,d.Z)(function*(ee){const Q=yield Ae()._get(Ze(ee));return Q&&(yield Ae()._remove(Ze(ee))),Q})).apply(this,arguments)}function xe(){const ee=[],Q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const Re=Math.floor(Math.random()*Q.length);ee.push(Q.charAt(Re))}return ee.join("")}function Ae(){return(0,j.aC)(j.b)}function Ze(ee){return(0,j.aD)("authEvent",ee.config.apiKey,ee.name)}function Ve(ee){if(!ee?.includes("?"))return{};const[Q,...q]=ee.split("?");return(0,m.zd)(q.join("?"))}function Me(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.az)("no-auth-event")}}function pe(){var ee;return(null===(ee=self?.location)||void 0===ee?void 0:ee.protocol)||null}function Ot(ee=(0,m.z$)()){return!("file:"!==pe()&&"ionic:"!==pe()&&"capacitor:"!==pe()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function On(){try{const ee=self.localStorage,Q=j.aL();if(ee)return ee.setItem(Q,"1"),ee.removeItem(Q),!function kn(ee=(0,m.z$)()){return function Gn(){return(0,m.w1)()&&11===document?.documentMode}()||function Kn(ee=(0,m.z$)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,m.hl)()}catch{return Ht()&&(0,m.hl)()}return!1}function Ht(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function En(){return(function We(){return"http:"===pe()||"https:"===pe()}()||(0,m.ru)()||Ot())&&!function Xt(){return(0,m.b$)()||(0,m.UG)()}()&&On()&&!Ht()}function Yn(){return Ot()&&typeof document<"u"}function Pt(){return(Pt=(0,d.Z)(function*(){return!!Yn()&&new Promise(ee=>{const Q=setTimeout(()=>{ee(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Q),ee(!0)})})})).apply(this,arguments)}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},tr=j.aA,jr="persistence";function fr(ee){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(ee){yield ee._initializationPromise;const Q=Wt(),q=j.aD(jr,ee.config.apiKey,ee.name);Q&&Q.setItem(q,ee._getPersistence())})).apply(this,arguments)}function Wt(){var ee;try{return(null===(ee=function Mn(){return typeof window<"u"?window:null}())||void 0===ee?void 0:ee.sessionStorage)||null}catch{return null}}const tn=j.aA;class Nn{constructor(){this.browserResolver=j.aC(j.k),this.cordovaResolver=j.aC(class Ye{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aE,this._overrideRedirectResult=j.aF}_initialize(Q){var q=this;return(0,d.Z)(function*(){const Re=Q._key();let gt=q.eventManagers.get(Re);return gt||(gt=new ut(Q),q.eventManagers.set(Re,gt),q.attachCallbackListeners(Q,gt)),gt})()}_openPopup(Q){(0,j.av)(Q,"operation-not-supported-in-this-environment")}_openRedirect(Q,q,Re,gt){var kt=this;return(0,d.Z)(function*(){!function je(ee){var Q,q,Re,gt,kt,Qt,he,me,oe,Ue;const nt=A();(0,j.aA)("function"==typeof(null===(Q=nt?.universalLinks)||void 0===Q?void 0:Q.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.aA)(typeof(null===(q=nt?.BuildInfo)||void 0===q?void 0:q.packageName)<"u",ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.aA)("function"==typeof(null===(kt=null===(gt=null===(Re=nt?.cordova)||void 0===Re?void 0:Re.plugins)||void 0===gt?void 0:gt.browsertab)||void 0===kt?void 0:kt.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aA)("function"==typeof(null===(me=null===(he=null===(Qt=nt?.cordova)||void 0===Qt?void 0:Qt.plugins)||void 0===he?void 0:he.browsertab)||void 0===me?void 0:me.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.aA)("function"==typeof(null===(Ue=null===(oe=nt?.cordova)||void 0===oe?void 0:oe.InAppBrowser)||void 0===Ue?void 0:Ue.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Q);const Qt=yield kt._initialize(Q);yield Qt.initialized(),Qt.resetRedirect(),(0,j.aG)(),yield kt._originValidation(Q);const he=function st(ee,Q,q=null){return{type:Q,eventId:q,urlResponse:null,sessionId:xe(),postBody:null,tenantId:ee.tenantId,error:(0,j.az)(ee,"no-auth-event")}}(Q,Re,gt);yield function It(ee,Q){return Ae()._set(Ze(ee),Q)}(Q,he);const me=yield function ne(ee,Q,q){return ue.apply(this,arguments)}(Q,he,q),oe=yield function qe(ee){const{cordova:Q}=A();return new Promise(q=>{Q.plugins.browsertab.isAvailable(Re=>{let gt=null;Re?Q.plugins.browsertab.openUrl(ee):gt=Q.InAppBrowser.open(ee,(0,j.ay)()?"_blank":"_system","location=yes"),q(gt)})})}(me);return function Ke(ee,Q,q){return ot.apply(this,arguments)}(Q,Qt,oe)})()}_isIframeWebStorageSupported(Q,q){throw new Error("Method not implemented.")}_originValidation(Q){const q=Q._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function Te(ee){return at.apply(this,arguments)}(Q)),this.originValidationPromises[q]}attachCallbackListeners(Q,q){const{universalLinks:Re,handleOpenURL:gt,BuildInfo:kt}=A(),Qt=setTimeout((0,d.Z)(function*(){yield vt(Q),q.onEvent(Me())}),500),he=function(){var Ue=(0,d.Z)(function*(nt){clearTimeout(Qt);const Ft=yield vt(Q);let sn=null;Ft&&nt?.url&&(sn=function _t(ee,Q){var q,Re;const gt=function Ut(ee){const Q=Ve(ee),q=Q.link?decodeURIComponent(Q.link):void 0,Re=Ve(q).link,gt=Q.deep_link_id?decodeURIComponent(Q.deep_link_id):void 0;return Ve(gt).link||gt||Re||q||ee}(Q);if(gt.includes("/__/auth/callback")){const kt=Ve(gt),Qt=kt.firebaseError?function Le(ee){try{return JSON.parse(ee)}catch{return null}}(decodeURIComponent(kt.firebaseError)):null,he=null===(Re=null===(q=Qt?.code)||void 0===q?void 0:q.split("auth/"))||void 0===Re?void 0:Re[1],me=he?(0,j.az)(he):null;return me?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:me,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:gt,postBody:null}}return null}(Ft,nt.url)),q.onEvent(sn||Me())});return function(Ft){return Ue.apply(this,arguments)}}();typeof Re<"u"&&"function"==typeof Re.subscribe&&Re.subscribe(null,he);const me=gt,oe=`${kt.packageName.toLowerCase()}://`;A().handleOpenURL=function(){var Ue=(0,d.Z)(function*(nt){if(nt.toLowerCase().startsWith(oe)&&he({url:nt}),"function"==typeof me)try{me(nt)}catch(Ft){console.error(Ft)}});return function(nt){return Ue.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aE,this._overrideRedirectResult=j.aF}_initialize(Q){var q=this;return(0,d.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(Q)})()}_openPopup(Q,q,Re,gt){var kt=this;return(0,d.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openPopup(Q,q,Re,gt)})()}_openRedirect(Q,q,Re,gt){var kt=this;return(0,d.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openRedirect(Q,q,Re,gt)})()}_isIframeWebStorageSupported(Q,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Q,q)}_originValidation(Q){return this.assertedUnderlyingResolver._originValidation(Q)}get _shouldInitProactively(){return Yn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Q=this;return(0,d.Z)(function*(){if(Q.underlyingResolver)return;const q=yield function ir(){return Pt.apply(this,arguments)}();Q.underlyingResolver=q?Q.cordovaResolver:Q.browserResolver})()}}function pr(ee){return ee.unwrap()}function gr(ee){return yr(ee)}function yr(ee){const{_tokenResponse:Q}=ee instanceof m.ZR?ee.customData:ee;if(!Q)return null;if(!(ee instanceof m.ZR)&&"temporaryProof"in Q&&"phoneNumber"in Q)return j.P.credentialFromResult(ee);const q=Q.providerId;if(!q||q===j.p.PASSWORD)return null;let Re;switch(q){case j.p.GOOGLE:Re=j.V;break;case j.p.FACEBOOK:Re=j.U;break;case j.p.GITHUB:Re=j.W;break;case j.p.TWITTER:Re=j.Z;break;default:const{oauthIdToken:gt,oauthAccessToken:kt,oauthTokenSecret:Qt,pendingToken:he,nonce:me}=Q;return kt||Qt||gt||he?he?q.startsWith("saml.")?j.aO._create(q,he):j.L._fromParams({providerId:q,signInMethod:q,pendingToken:he,idToken:gt,accessToken:kt}):new j.X(q).credential({idToken:gt,accessToken:kt,rawNonce:me}):null}return ee instanceof m.ZR?Re.credentialFromError(ee):Re.credentialFromResult(ee)}function In(ee,Q){return Q.catch(q=>{throw q instanceof m.ZR&&function dn(ee,Q){var q;const Re=null===(q=Q.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===Q?.code)Q.resolver=new An(ee,j.aq(ee,Q));else if(Re){const gt=yr(Q),kt=Q;gt&&(kt.credential=gt,kt.tenantId=Re.tenantId||void 0,kt.email=Re.email||void 0,kt.phoneNumber=Re.phoneNumber||void 0)}}(ee,q),q}).then(q=>{const gt=q.user;return{operationType:q.operationType,credential:gr(q),additionalUserInfo:j.ao(q),user:Vt.getOrCreate(gt)}})}function Zr(ee,Q){return xn.apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(ee,Q){const q=yield Q;return{verificationId:q.verificationId,confirm:Re=>In(ee,q.confirm(Re))}})).apply(this,arguments)}class An{constructor(Q,q){this.resolver=q,this.auth=function sr(ee){return ee.wrapped()}(Q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Q){return In(pr(this.auth),this.resolver.resolveSignIn(Q))}}class Vt{constructor(Q){this._delegate=Q,this.multiFactor=j.ar(Q)}static getOrCreate(Q){return Vt.USER_MAP.has(Q)||Vt.USER_MAP.set(Q,new Vt(Q)),Vt.USER_MAP.get(Q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Q){return this._delegate.getIdTokenResult(Q)}getIdToken(Q){return this._delegate.getIdToken(Q)}linkAndRetrieveDataWithCredential(Q){return this.linkWithCredential(Q)}linkWithCredential(Q){var q=this;return(0,d.Z)(function*(){return In(q.auth,j.a0(q._delegate,Q))})()}linkWithPhoneNumber(Q,q){var Re=this;return(0,d.Z)(function*(){return Zr(Re.auth,j.l(Re._delegate,Q,q))})()}linkWithPopup(Q){var q=this;return(0,d.Z)(function*(){return In(q.auth,j.d(q._delegate,Q,Nn))})()}linkWithRedirect(Q){var q=this;return(0,d.Z)(function*(){return yield fr(j.aH(q.auth)),j.g(q._delegate,Q,Nn)})()}reauthenticateAndRetrieveDataWithCredential(Q){return this.reauthenticateWithCredential(Q)}reauthenticateWithCredential(Q){var q=this;return(0,d.Z)(function*(){return In(q.auth,j.a1(q._delegate,Q))})()}reauthenticateWithPhoneNumber(Q,q){return Zr(this.auth,j.r(this._delegate,Q,q))}reauthenticateWithPopup(Q){return In(this.auth,j.e(this._delegate,Q,Nn))}reauthenticateWithRedirect(Q){var q=this;return(0,d.Z)(function*(){return yield fr(j.aH(q.auth)),j.h(q._delegate,Q,Nn)})()}sendEmailVerification(Q){return j.ae(this._delegate,Q)}unlink(Q){var q=this;return(0,d.Z)(function*(){return yield j.an(q._delegate,Q),q})()}updateEmail(Q){return j.aj(this._delegate,Q)}updatePassword(Q){return j.ak(this._delegate,Q)}updatePhoneNumber(Q){return j.u(this._delegate,Q)}updateProfile(Q){return j.ai(this._delegate,Q)}verifyBeforeUpdateEmail(Q,q){return j.af(this._delegate,Q,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vt.USER_MAP=new WeakMap;const or=j.aA;let ur=(()=>{class ee{constructor(q,Re){if(this.app=q,Re.isInitialized())return this._delegate=Re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:gt}=q.options;or(gt,"invalid-api-key",{appName:q.name}),or(gt,"invalid-api-key",{appName:q.name});const kt=typeof window<"u"?Nn:void 0;this._delegate=Re.initialize({options:{persistence:J(gt,q.name),popupRedirectResolver:kt}}),this._delegate._updateErrorMap(j.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,Re){j.I(this._delegate,q,Re)}applyActionCode(q){return j.a5(this._delegate,q)}checkActionCode(q){return j.a6(this._delegate,q)}confirmPasswordReset(q,Re){return j.a4(this._delegate,q,Re)}createUserWithEmailAndPassword(q,Re){var gt=this;return(0,d.Z)(function*(){return In(gt._delegate,j.a8(gt._delegate,q,Re))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return j.ad(this._delegate,q)}isSignInWithEmailLink(q){return j.ab(this._delegate,q)}getRedirectResult(){var q=this;return(0,d.Z)(function*(){or(En(),q._delegate,"operation-not-supported-in-this-environment");const Re=yield j.j(q._delegate,Nn);return Re?In(q._delegate,Promise.resolve(Re)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function Ee(ee,Q){(0,j.aH)(ee)._logFramework(Q)}(this._delegate,q)}onAuthStateChanged(q,Re,gt){const{next:kt,error:Qt,complete:he}=ht(q,Re,gt);return this._delegate.onAuthStateChanged(kt,Qt,he)}onIdTokenChanged(q,Re,gt){const{next:kt,error:Qt,complete:he}=ht(q,Re,gt);return this._delegate.onIdTokenChanged(kt,Qt,he)}sendSignInLinkToEmail(q,Re){return j.aa(this._delegate,q,Re)}sendPasswordResetEmail(q,Re){return j.a3(this._delegate,q,Re||void 0)}setPersistence(q){var Re=this;return(0,d.Z)(function*(){let gt;switch(function $r(ee,Q){tr(Object.values(pn).includes(Q),ee,"invalid-persistence-type"),(0,m.b$)()?tr(Q!==pn.SESSION,ee,"unsupported-persistence-type"):(0,m.UG)()?tr(Q===pn.NONE,ee,"unsupported-persistence-type"):Ht()?tr(Q===pn.NONE||Q===pn.LOCAL&&(0,m.hl)(),ee,"unsupported-persistence-type"):tr(Q===pn.NONE||On(),ee,"unsupported-persistence-type")}(Re._delegate,q),q){case pn.SESSION:gt=j.a;break;case pn.LOCAL:gt=(yield j.aC(j.i)._isAvailable())?j.i:j.b;break;case pn.NONE:gt=j.N;break;default:return j.av("argument-error",{appName:Re._delegate.name})}return Re._delegate.setPersistence(gt)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return In(this._delegate,j._(this._delegate))}signInWithCredential(q){return In(this._delegate,j.$(this._delegate,q))}signInWithCustomToken(q){return In(this._delegate,j.a2(this._delegate,q))}signInWithEmailAndPassword(q,Re){return In(this._delegate,j.a9(this._delegate,q,Re))}signInWithEmailLink(q,Re){return In(this._delegate,j.ac(this._delegate,q,Re))}signInWithPhoneNumber(q,Re){return Zr(this._delegate,j.s(this._delegate,q,Re))}signInWithPopup(q){var Re=this;return(0,d.Z)(function*(){return or(En(),Re._delegate,"operation-not-supported-in-this-environment"),In(Re._delegate,j.c(Re._delegate,q,Nn))})()}signInWithRedirect(q){var Re=this;return(0,d.Z)(function*(){return or(En(),Re._delegate,"operation-not-supported-in-this-environment"),yield fr(Re._delegate),j.f(Re._delegate,q,Nn)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return j.a7(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=pn,ee})();function ht(ee,Q,q){let Re=ee;"function"!=typeof ee&&({next:Re,error:Q,complete:q}=ee);const gt=Re;return{next:Qt=>gt(Qt&&Vt.getOrCreate(Qt)),error:Q,complete:q}}function J(ee,Q){const q=function cn(ee,Q){const q=Wt();if(!q)return[];const Re=j.aD(jr,ee,Q);switch(q.getItem(Re)){case pn.NONE:return[j.N];case pn.LOCAL:return[j.i,j.a];case pn.SESSION:return[j.a];default:return[]}}(ee,Q);if(typeof self<"u"&&!q.includes(j.i)&&q.push(j.i),typeof window<"u")for(const Re of[j.b,j.a])q.includes(Re)||q.push(Re);return q.includes(j.N)||q.push(j.N),q}class _e{constructor(){this.providerId="phone",this._delegate=new j.P(pr(U.Z.auth()))}static credential(Q,q){return j.P.credential(Q,q)}verifyPhoneNumber(Q,q){return this._delegate.verifyPhoneNumber(Q,q)}unwrap(){return this._delegate}}_e.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,_e.PROVIDER_ID=j.P.PROVIDER_ID;const Xe=j.aA;class xt{constructor(Q,q,Re=U.Z.app()){var gt;Xe(null===(gt=Re.options)||void 0===gt?void 0:gt.apiKey,"invalid-api-key",{appName:Re.name}),this._delegate=new j.R(Q,q,Re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ye(ee){ee.INTERNAL.registerComponent(new ae.wA("auth-compat",Q=>{const q=Q.getProvider("app-compat").getImmediate(),Re=Q.getProvider("auth");return new ur(q,Re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.Q,FacebookAuthProvider:j.U,GithubAuthProvider:j.W,GoogleAuthProvider:j.V,OAuthProvider:j.X,SAMLAuthProvider:j.Y,PhoneAuthProvider:_e,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:xt,TwitterAuthProvider:j.Z,Auth:ur,AuthCredential:j.J,Error:m.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.4.2")}(U.Z)},8179:(Lt,ze,N)=>{N.d(ze,{EK:()=>d.EK});var d=N(2810)},5861:(Lt,ze,N)=>{function d(j,m,de,b,ae,A,le){try{var ne=j[A](le),ue=ne.value}catch(Te){return void de(Te)}ne.done?m(ue):Promise.resolve(ue).then(b,ae)}function U(j){return function(){var m=this,de=arguments;return new Promise(function(b,ae){var A=j.apply(m,de);function le(ue){d(A,b,ae,le,ne,"next",ue)}function ne(ue){d(A,b,ae,le,ne,"throw",ue)}le(void 0)})}}N.d(ze,{Z:()=>U})},7582:(Lt,ze,N)=>{function m(Ve,Oe){var Ye={};for(var Je in Ve)Object.prototype.hasOwnProperty.call(Ve,Je)&&Oe.indexOf(Je)<0&&(Ye[Je]=Ve[Je]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(Je=Object.getOwnPropertySymbols(Ve);Me<Je.length;Me++)Oe.indexOf(Je[Me])<0&&Object.prototype.propertyIsEnumerable.call(Ve,Je[Me])&&(Ye[Je[Me]]=Ve[Je[Me]])}return Ye}function Te(Ve,Oe,Ye,Je){return new(Ye||(Ye=Promise))(function(Ee,ie){function z(We){try{pe(Je.next(We))}catch(Ot){ie(Ot)}}function se(We){try{pe(Je.throw(We))}catch(Ot){ie(Ot)}}function pe(We){We.done?Ee(We.value):function Me(Ee){return Ee instanceof Ye?Ee:new Ye(function(ie){ie(Ee)})}(We.value).then(z,se)}pe((Je=Je.apply(Ve,Oe||[])).next())})}function Ce(Ve){return this instanceof Ce?(this.v=Ve,this):new Ce(Ve)}function ut(Ve,Oe,Ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,Je=Ye.apply(Ve,Oe||[]),Ee=[];return Me={},ie("next"),ie("throw"),ie("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function ie(Xt){Je[Xt]&&(Me[Xt]=function(Gn){return new Promise(function(Kn,kn){Ee.push([Xt,Gn,Kn,kn])>1||z(Xt,Gn)})})}function z(Xt,Gn){try{!function se(Xt){Xt.value instanceof Ce?Promise.resolve(Xt.value.v).then(pe,We):Ot(Ee[0][2],Xt)}(Je[Xt](Gn))}catch(Kn){Ot(Ee[0][3],Kn)}}function pe(Xt){z("next",Xt)}function We(Xt){z("throw",Xt)}function Ot(Xt,Gn){Xt(Gn),Ee.shift(),Ee.length&&z(Ee[0][0],Ee[0][1])}}function It(Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ye,Oe=Ve[Symbol.asyncIterator];return Oe?Oe.call(Ve):(Ve=function ot(Ve){var Oe="function"==typeof Symbol&&Symbol.iterator,Ye=Oe&&Ve[Oe],Je=0;if(Ye)return Ye.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&Je>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[Je++],done:!Ve}}};throw new TypeError(Oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ve),Ye={},Je("next"),Je("throw"),Je("return"),Ye[Symbol.asyncIterator]=function(){return this},Ye);function Je(Ee){Ye[Ee]=Ve[Ee]&&function(ie){return new Promise(function(z,se){!function Me(Ee,ie,z,se){Promise.resolve(se).then(function(pe){Ee({value:pe,done:z})},ie)}(z,se,(ie=Ve[Ee](ie)).done,ie.value)})}}}N.d(ze,{FC:()=>ut,KL:()=>It,_T:()=>m,mG:()=>Te,qq:()=>Ce})}},Lt=>{Lt(Lt.s=2955)}]);