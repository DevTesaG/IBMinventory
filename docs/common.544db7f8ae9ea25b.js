"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[592],{7915:(M,b,a)=>{a.d(b,{U:()=>C});var e=a(4650),m=a(4985),f=a(8179),c=a(6895),d=a(433),r=a(2121);function o(u,g){if(1&u&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&u){const n=e.oxw(2).$implicit;e.xp6(1),e.hij("",n.placeholder," es obligatorio")}}function t(u,g){if(1&u&&(e.TgZ(0,"div",12),e.YNc(1,o,2,1,"div",13),e.qZA()),2&u){e.oxw();const n=e.MAs(2);e.xp6(1),e.Q6J("ngIf",n.errors.required)}}function i(u,g){1&u&&e._UZ(0,"div",14)}const s=function(u){return{"is-invalid":u}};function l(u,g){if(1&u){const n=e.EpF();e.TgZ(0,"div",6)(1,"input",7,8),e.NdJ("ngModelChange",function(p){const E=e.CHM(n).$implicit;return e.KtG(E.value=p)}),e.qZA(),e.YNc(3,t,2,1,"div",9),e.TgZ(4,"label",10),e._uU(5),e.qZA(),e.YNc(6,i,1,0,"div",11),e.qZA()}if(2&u){const n=g.$implicit,v=e.MAs(2),p=e.oxw(2),P=e.MAs(1);e.xp6(1),e.Tol("form-control"+n.classlist),e.Q6J("id",n.label)("name",n.label)("type",n.type)("placeholder",n.placeholder)("ngModel",n.value)("value",n.valueCallback?n.getValue():n.value)("ngClass",e.VKq(14,s,P.submitted&&v.errors))("readonly",p.mode||n.readonly),e.xp6(2),e.Q6J("ngIf",P.submitted&&v.errors),e.xp6(1),e.Q6J("for",n.label),e.xp6(1),e.Oqu(n.placeholder),e.xp6(1),e.Q6J("ngIf","radio"==n.type)}}function h(u,g){if(1&u&&(e.TgZ(0,"div",4),e.YNc(1,l,7,16,"div",5),e.qZA()),2&u){const n=g.$implicit;e.xp6(1),e.Q6J("ngForOf",n)}}function _(u,g){if(1&u){const n=e.EpF();e.TgZ(0,"div",15)(1,"app-warn-modal",16),e.NdJ("continue",function(p){e.CHM(n);const P=e.oxw();return e.KtG(P.onSubmit(p))}),e.qZA(),e.TgZ(2,"button",17),e.NdJ("click",function(){e.CHM(n);const p=e.oxw(),P=e.MAs(1);return e.KtG(p.onReset(P))}),e._uU(3," Reset "),e.qZA()()}if(2&u){const n=e.oxw();e.xp6(1),e.Q6J("btnMessage",n.btnMes)}}let C=(()=>{class u{constructor(n){this.cdref=n,this.formModel=new e.vpe,this.reject=new e.vpe,this.mode=!1,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new m.O("Nombre Completo","fullname","text"),new m.O("Nombre de Usuario","username","text")],[new m.O("Correo Electronico","email","text")],[new m.O("Password","password","password"),new m.O("Confirmar Password","Confirm Password","password")],[new m.O("Aceptar los Terminos","Accept Terms","radio","form-check-input",!1)]],this.continue=!1}ngOnInit(){this.initPlaceHolder()}onContinue(n){this.continue=n}initPlaceHolder(){this.placeHolder&&this.formObj.forEach(n=>n.forEach(v=>{if(this.placeHolder){var p=this.placeHolder[v.getLabel()];p instanceof f.EK&&(p=this.formatDateString(p.toDate().toLocaleDateString())),v.setValue(p)}}))}ngOnChanges(){this.initPlaceHolder()}formatDateString(n){return n.split("/").reverse().join("/").replace(/\//g,"-")}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(n){if(this.continue&&n){var v={};this.formObj.flat(2).forEach(p=>v[p.label]=p.value),this.formModel.emit(v)}}onReset(n){this.continue=!1,n.reset(),this.reject.emit()}}return u.\u0275fac=function(n){return new(n||u)(e.Y36(e.sBO))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-form"]],inputs:{placeHolder:"placeHolder",mode:"mode",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel",reject:"reject"},features:[e.TTD],decls:4,vars:2,consts:[["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["required","",3,"id","name","type","placeholder","ngModel","value","ngClass","readonly","ngModelChange"],["input","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"",3,"for"],["class","mb-4",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["type","submit","modalMessage","\xbfSeguro que desea crear una nueva orden?",3,"btnMessage","continue"],["type","button",1,"ms-2","btn","btn-outline-danger","rounded-pill",3,"click"]],template:function(n,v){if(1&n){const p=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(p);const E=e.MAs(1);return e.KtG(E.form.valid&&v.onContinue(!0))}),e.YNc(2,h,2,1,"div",2),e.YNc(3,_,4,1,"div",3),e.qZA()}2&n&&(e.xp6(2),e.Q6J("ngForOf",v.formObj),e.xp6(1),e.Q6J("ngIf",!v.mode))},dependencies:[c.mk,c.sg,c.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.On,d.F,r.u]}),u})()},2121:(M,b,a)=>{a.d(b,{u:()=>m});var e=a(4650);let m=(()=>{class f{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.continue=new e.vpe}ngOnInit(){}modalContinue(d){this.continue.emit(d)}}return f.\u0275fac=function(d){return new(d||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage"},outputs:{continue:"continue"},decls:17,vars:2,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-success","rounded-pill"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","rounded-pill",3,"click"]],template:function(d,r){1&d&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),e._uU(8,"PRECAUCION"),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return r.modalContinue(!1)}),e.qZA()(),e.TgZ(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return r.modalContinue(!1)}),e._uU(14,"Abortar"),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return r.modalContinue(!0)}),e._uU(16,"Continuar"),e.qZA()()()()()()),2&d&&(e.xp6(2),e.hij(" ",r.btnMessage," "),e.xp6(9),e.hij(" ",r.modalMessage," "))}}),f})()},798:(M,b,a)=>{a.d(b,{C:()=>c});var e=a(8179),m=a(4650),f=a(33);let c=(()=>{class d{constructor(o){this.db=o,this.dbPath="/audit",this.objectsRef=o.collection(this.dbPath)}getNextBatch(o,t){return this.db.collection(this.dbPath,t?i=>i.orderBy("timestamp","desc").startAfter(t.timestamp).limit(o):i=>i.orderBy("timestamp","desc").limit(o))}create(o,t,i,s,l,h){var _={operation:o,process:t,posterior:s,timestamp:e.EK.fromDate(new Date),user:i};return l&&(_.prior=l),h&&(_.itemId=h),this.objectsRef.add({..._})}update(o,t){return this.objectsRef.doc(o).update(t)}delete(o){return this.objectsRef.doc(o).delete()}filterByDateBatch(o,t,i,s,l){return console.log(i),this.db.collection(this.dbPath,h=>h.where("timestamp",">=",o).where("timestamp","<=",t).where("name","==",i).orderBy("timestamp","desc").limit(s))}filterByNameBatch(o,t,i){return this.db.collection(this.dbPath,i?s=>s.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").startAfter(i.name).limit(t):s=>s.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(o,t,i){return this.db.collection(this.dbPath,i?s=>s.where("code",">=",o).where("code","<=",o+"\uf8ff").orderBy("code","desc").startAfter(i.code).limit(t):s=>s.where("code",">=",o).where("code","<=",o+"\uf8ff").orderBy("code","desc").limit(t))}}return d.\u0275fac=function(o){return new(o||d)(m.LFG(f.ST))},d.\u0275prov=m.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},9898:(M,b,a)=>{a.d(b,{L:()=>d});var e=a(5861),m=a(4004),f=a(4650),c=a(33);let d=(()=>{class r{constructor(t){this.db=t,this.dbPath="/FPreport",this.invFinishedProductsRef=t.collection(this.dbPath)}getNextBatch(t,i){return this.db.collection(this.dbPath,i?s=>s.orderBy("timestamp","desc").startAfter(i.timestamp).limit(t):s=>s.orderBy("timestamp","desc").limit(t))}getStock(t){var i=this;return(0,e.Z)(function*(){return t?new Promise(function(){var l=(0,e.Z)(function*(h){i.invFinishedProductsRef.doc(t).get().pipe((0,m.U)(_=>({id:_.id,prod:_.data()}))).subscribe(_=>{!_||h({id:_.id,available:_.prod.available,wating:_.prod.wating,commited:_.prod.commited})})});return function(h){return l.apply(this,arguments)}}()):{}})()}getAll(){return this.invFinishedProductsRef}create(t){return this.invFinishedProductsRef.add({...t})}update(t,i){return this.invFinishedProductsRef.doc(t).update(i)}delete(t){return this.invFinishedProductsRef.doc(t).delete()}filterByNameBatch(t,i,s){return this.db.collection(this.dbPath,s?l=>l.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").startAfter(s.name).limit(i):l=>l.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").limit(i))}filterByCodeBatch(t,i,s){return this.db.collection(this.dbPath,s?l=>l.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").startAfter(s.code).limit(i):l=>l.where("code",">=",t).where("code","<=",t+"\uf8ff").orderBy("code","desc").limit(i))}}return r.\u0275fac=function(t){return new(t||r)(f.LFG(c.ST))},r.\u0275prov=f.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},8132:(M,b,a)=>{a.d(b,{p:()=>f});var e=a(4650),m=a(33);let f=(()=>{class c{constructor(r){this.db=r,this.dbPath="/orders",this.ordersRef=r.collection(this.dbPath)}getNextBatch(r,o){return this.db.collection(this.dbPath,o?t=>t.orderBy("timestamp","desc").startAfter(o).limit(r):t=>t.orderBy("timestamp","desc").limit(r))}getPrevBatch(r,o,t){return this.db.collection(this.dbPath,i=>i.orderBy("timestamp","desc").startAt(o).endBefore(t).limit(r))}getBatch(r){return this.db.collection(this.dbPath,o=>o.limit(r).orderBy("timestamp","desc"))}getAll(){return this.ordersRef}getById(r){return this.db.collection(this.dbPath,o=>o.where("product_id","==",r))}create(r){return this.ordersRef.add({...r})}update(r,o){return this.ordersRef.doc(r).update(o)}delete(r){return this.ordersRef.doc(r).delete()}filterByName(r){return this.db.collection(this.dbPath,o=>o.where("name",">=",r).where("name","<=",r+"\uf8ff"))}filterByCode(r){return this.db.collection(this.dbPath,o=>o.where("code",">=",r).where("code","<=",r+"\uf8ff"))}}return c.\u0275fac=function(r){return new(r||c)(e.LFG(m.ST))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5872:(M,b,a)=>{a.d(b,{H:()=>d});var e=a(5861),m=a(4004),f=a(4650),c=a(33);let d=(()=>{class r{constructor(t){this.db=t,this.dbPath="/providers",this.ProvidersRef=t.collection(this.dbPath)}getNextBatch(t,i){return this.db.collection(this.dbPath,i?s=>s.orderBy("materialId","desc").startAfter(i.materialId).limit(t):s=>s.orderBy("materialId","desc").limit(t))}getAll(){return this.ProvidersRef}create(t){return this.ProvidersRef.add({...t})}update(t,i){return console.log("Update",t,i),this.ProvidersRef.doc(t).update(i)}delete(t){return this.ProvidersRef.doc(t).delete()}getProvidersByMaterial(t){var i=this;return(0,e.Z)(function*(){return t?new Promise(function(){var s=(0,e.Z)(function*(l){i.db.collection(i.dbPath,h=>h.where("materialId","==",t)).snapshotChanges().pipe((0,m.U)(h=>h.map(_=>({id:_.payload.doc.id,..._.payload.doc.data()})))).subscribe(h=>{l(h)})});return function(l){return s.apply(this,arguments)}}()):[]})()}filterByNameBatch(t,i,s){return this.db.collection(this.dbPath,s?l=>l.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").startAfter(s.name).limit(i):l=>l.where("name",">=",t).where("name","<=",t+"\uf8ff").orderBy("name","desc").limit(i))}}return r.\u0275fac=function(t){return new(t||r)(f.LFG(c.ST))},r.\u0275prov=f.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},5561:(M,b,a)=>{a.d(b,{l:()=>f});var e=a(4650),m=a(33);let f=(()=>{class c{constructor(r){this.db=r,this.dbPath="/shopOrder",this.InvRawMaterialsRef=r.collection(this.dbPath)}getNextBatch(r,o){return this.db.collection(this.dbPath,o?t=>t.orderBy("emissionDate","asc").startAfter(o).limit(r):t=>t.orderBy("emissionDate","asc").limit(r))}create(r,o,t,i,s,l,h,_){var C={materialId:r,price:h,name:o,stockId:l,requiredMaterial:t,requestedAmount:i,orderDeadline:s,emissionDate:new Date,timestamp:new Date};return _&&(C.orderId=_),this.InvRawMaterialsRef.add(C)}update(r,o){return this.InvRawMaterialsRef.doc(r).update(o)}delete(r){return this.InvRawMaterialsRef.doc(r).delete()}filterUrgentatch(r,o,t){return this.db.collection(this.dbPath,t?i=>i.where("orderDeadline","<=",r).orderBy("orderDeadline","asc").startAfter(t.name).limit(o):i=>i.where("orderDeadline","<=",r).orderBy("orderDeadline","asc").limit(o))}}return c.\u0275fac=function(r){return new(r||c)(e.LFG(m.ST))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},8179:(M,b,a)=>{a.d(b,{EK:()=>e.EK});var e=a(2810)}}]);