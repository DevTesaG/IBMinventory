"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[592],{6423:(v,u,d)=>{d.d(u,{z:()=>l});class l{}},3602:(v,u,d)=>{d.d(u,{N:()=>l});class l{}},9898:(v,u,d)=>{d.d(u,{L:()=>i});var l=d(5861),_=d(5698),P=d(4004),f=d(8179),n=d(4650),a=d(33);let i=(()=>{class o{constructor(e){this.db=e,this.dbPath="/FPreport",this.invFinishedProductsRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?r=>r.orderBy("timestamp","desc").startAfter(t.timestamp).limit(e):r=>r.orderBy("timestamp","desc").limit(e))}getStock(e){var t=this;return(0,l.Z)(function*(){return e?(console.log(e),new Promise(function(){var s=(0,l.Z)(function*(m){t.invFinishedProductsRef.doc(e).get().pipe((0,_.q)(1),(0,P.U)(c=>({id:c.id,prod:c.data()}))).subscribe(c=>{!c||m({id:c.id,available:c.prod.available,waiting:c.prod.waiting,commited:c.prod.commited})})});return function(m){return s.apply(this,arguments)}}())):{}})()}getAll(){return this.invFinishedProductsRef}create(e){return this.invFinishedProductsRef.add({...e})}update(e,t){return this.invFinishedProductsRef.doc(e).update({timestamp:f.EK.fromDate(new Date),...t})}delete(e){return this.invFinishedProductsRef.doc(e).delete()}filterByNameBatch(e,t,r){return this.db.collection(this.dbPath,r?s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(r.name).limit(t):s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(e,t,r){return this.db.collection(this.dbPath,r?s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").startAfter(r.code).limit(t):s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").limit(t))}}return o.\u0275fac=function(e){return new(e||o)(n.LFG(a.ST))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},490:(v,u,d)=>{d.d(u,{y:()=>i});var l=d(9646),_=d(5698),P=d(4004),f=d(8179),n=d(4650),a=d(33);let i=(()=>{class o{constructor(e){this.db=e,this.dbPath="/RMreport",this.InvRawMaterialsRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?r=>r.orderBy("materialId","desc").startAfter(t.materialId).limit(e):r=>r.orderBy("materialId","desc").limit(e))}getAll(){return this.InvRawMaterialsRef}create(e,t){return t?this.InvRawMaterialsRef.doc(t).set(e):this.InvRawMaterialsRef.add({...e})}update(e,t){return console.log("Update",e,t),this.InvRawMaterialsRef.doc(e).update({timestamp:f.EK.fromDate(new Date),...t})}delete(e){return this.InvRawMaterialsRef.doc(e).delete()}getStock(e){return e?this.InvRawMaterialsRef.doc(e).get().pipe((0,_.q)(1),(0,P.U)(r=>({id:r.id,available:r.data()?r.data()?.available:0,waiting:r.data()?r.data()?.waiting:0,waitingCommited:r.data()?r.data()?.waitingCommited:0,commited:r.data()?r.data()?.commited:0}))):(0,l.of)({})}filterByDateBatch(e,t,r,s,m){return console.log(r),this.db.collection(this.dbPath,c=>c.where("timestamp",">=",e).where("timestamp","<=",t).orderBy("timestamp","desc").limit(s))}filterByNameBatch(e,t,r){return this.db.collection(this.dbPath,r?s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(r.name).limit(t):s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}filterByCodeBatch(e,t,r){return this.db.collection(this.dbPath,r?s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").startAfter(r.code).limit(t):s=>s.where("code",">=",e).where("code","<=",e+"\uf8ff").orderBy("code","desc").limit(t))}}return o.\u0275fac=function(e){return new(e||o)(n.LFG(a.ST))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},8132:(v,u,d)=>{d.d(u,{p:()=>P});var l=d(4650),_=d(33);let P=(()=>{class f{constructor(a){this.db=a,this.dbPath="/orders",this.ordersRef=a.collection(this.dbPath)}getNextBatch(a,i){return this.db.collection(this.dbPath,i?o=>o.orderBy("timestamp","desc").startAfter(i).limit(a):o=>o.orderBy("timestamp","desc").limit(a))}getPrevBatch(a,i,o){return this.db.collection(this.dbPath,h=>h.orderBy("timestamp","desc").startAt(i).endBefore(o).limit(a))}getBatch(a){return this.db.collection(this.dbPath,i=>i.limit(a).orderBy("timestamp","desc"))}getAll(){return this.ordersRef}getById(a){return this.db.collection(this.dbPath,i=>i.where("product_id","==",a))}create(a){return console.log(a),this.ordersRef.add({...a})}update(a,i){return this.ordersRef.doc(a).update(i)}delete(a){return this.ordersRef.doc(a).delete()}filterByName(a){return this.db.collection(this.dbPath,i=>i.where("name",">=",a).where("name","<=",a+"\uf8ff"))}filterByCode(a){return this.db.collection(this.dbPath,i=>i.where("code",">=",a).where("code","<=",a+"\uf8ff"))}}return f.\u0275fac=function(a){return new(a||f)(l.LFG(_.ST))},f.\u0275prov=l.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},5872:(v,u,d)=>{d.d(u,{H:()=>i});var l=d(5861),_=d(4004),P=d(7886),f=d(5577),n=d(4650),a=d(33);let i=(()=>{class o{constructor(e){this.db=e,this.dbPath="/providers",this.ProvidersRef=e.collection(this.dbPath)}getNextBatch(e,t){return this.db.collection(this.dbPath,t?r=>r.orderBy("materialId","desc").startAfter(t.materialId).limit(e):r=>r.orderBy("materialId","desc").limit(e))}getAll(){return this.ProvidersRef}getById(e){return this.ProvidersRef.doc(e).valueChanges({idField:"id"})}create(e){return this.ProvidersRef.add({...e})}update(e,t){return console.log("Update",e,t),this.ProvidersRef.doc(e).update(t)}delete(e){return this.db.collection(this.dbPath,t=>t.where("materialId","==",e)).get().pipe((0,_.U)(t=>t.docs),(0,P.u)(),(0,f.z)(t=>t.ref.delete()))}getProvidersByMaterial(e){var t=this;return(0,l.Z)(function*(){return e?new Promise(function(){var r=(0,l.Z)(function*(s){t.db.collection(t.dbPath,m=>m.where("materialId","==",e)).snapshotChanges().pipe((0,_.U)(m=>m.map(c=>({id:c.payload.doc.id,...c.payload.doc.data()})))).subscribe(m=>{s(m)})});return function(s){return r.apply(this,arguments)}}()):[]})()}filterByNameBatch(e,t,r){return this.db.collection(this.dbPath,r?s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").startAfter(r.name).limit(t):s=>s.where("name",">=",e).where("name","<=",e+"\uf8ff").orderBy("name","desc").limit(t))}}return o.\u0275fac=function(e){return new(e||o)(n.LFG(a.ST))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5561:(v,u,d)=>{d.d(u,{l:()=>f});var l=d(8996),_=d(4650),P=d(33);let f=(()=>{class n{constructor(i){this.db=i,this.dbPath="/shopOrder",this.InvRawMaterialsRef=i.collection(this.dbPath)}getNextBatch(i,o){return this.db.collection(this.dbPath,o?h=>h.orderBy("emissionDate","asc").startAfter(o).limit(i):h=>h.orderBy("emissionDate","asc").limit(i))}create(i,o,h,e,t,r,s,m){var c={materialId:i,price:r,name:o,requiredMaterial:h,requestedAmount:e,orderDeadline:t,emissionDate:new Date,timestamp:new Date};return s&&(c.orderId=s),m&&(c.orderCode=m),(0,l.D)(this.InvRawMaterialsRef.add(c))}update(i,o){return this.InvRawMaterialsRef.doc(i).update(o)}delete(i){return this.InvRawMaterialsRef.doc(i).delete()}filterUrgentatch(i,o,h){return this.db.collection(this.dbPath,h?e=>e.where("orderDeadline","<=",i).orderBy("orderDeadline","asc").startAfter(h.name).limit(o):e=>e.where("orderDeadline","<=",i).orderBy("orderDeadline","asc").limit(o))}}return n.\u0275fac=function(i){return new(i||n)(_.LFG(P.ST))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);