"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[179],{6217:(Bt,Fe,R)=>{R.d(Fe,{nm:()=>ss});var d=R(4976);R(4650),R(259);var ge=R(5861),st=R(6881),ot=R(4859),Et=R(2090),Ve=R(1877);const be=new Map,Re={activated:!1,tokenObservers:[]},gt={initialized:!1,enabled:!1};function ft(Oe){return be.get(Oe)||Object.assign({},Re)}function Vt(){return gt}class yt{constructor(Ae,He,vt,Lt,An){if(this.operation=Ae,this.retryPolicy=He,this.getWaitDuration=vt,this.lowerBound=Lt,this.upperBound=An,this.pending=null,this.nextErrorWaitInterval=Lt,Lt>An)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ae){var He=this;return(0,ge.Z)(function*(){He.stop();try{He.pending=new Et.BH,yield function bt(Oe){return new Promise(Ae=>{setTimeout(Ae,Oe)})}(He.getNextRun(Ae)),He.pending.resolve(),yield He.pending.promise,He.pending=new Et.BH,yield He.operation(),He.pending.resolve(),yield He.pending.promise,He.process(!0).catch(()=>{})}catch(vt){He.retryPolicy(vt)?He.process(!1).catch(()=>{}):He.stop()}})()}getNextRun(Ae){if(Ae)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const He=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),He}}}const zt=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nn(Oe){if(!ft(Oe).activated)throw zt.create("use-before-activation",{appName:Oe.name})}function Rn(Oe,Ae){return lr.apply(this,arguments)}function lr(){return(lr=(0,ge.Z)(function*({url:Oe,body:Ae},He){const vt={"Content-Type":"application/json"},Lt=He.getImmediate({optional:!0});if(Lt){const pi=yield Lt.getHeartbeatsHeader();pi&&(vt["X-Firebase-Client"]=pi)}const An={method:"POST",body:JSON.stringify(Ae),headers:vt};let ir,tr;try{ir=yield fetch(Oe,An)}catch(pi){throw zt.create("fetch-network-error",{originalErrorMessage:pi?.message})}if(200!==ir.status)throw zt.create("fetch-status-error",{httpStatus:ir.status});try{tr=yield ir.json()}catch(pi){throw zt.create("fetch-parse-error",{originalErrorMessage:pi?.message})}const Fn=tr.ttl.match(/^([\d.]+)(s)$/);if(!Fn||!Fn[2]||isNaN(Number(Fn[1])))throw zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${tr.ttl}`});const ei=1e3*Number(Fn[1]),li=Date.now();return{token:tr.token,expireTimeMillis:li+ei,issuedAtTimeMillis:li}})).apply(this,arguments)}function Cn(Oe,Ae){const{projectId:He,appId:vt,apiKey:Lt}=Oe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${He}/apps/${vt}:exchangeDebugToken?key=${Lt}`,body:{debug_token:Ae}}}const _r="firebase-app-check-store";let bn=null;function $n(){return bn||(bn=new Promise((Oe,Ae)=>{try{const He=indexedDB.open("firebase-app-check-database",1);He.onsuccess=vt=>{Oe(vt.target.result)},He.onerror=vt=>{var Lt;Ae(zt.create("storage-open",{originalErrorMessage:null===(Lt=vt.target.error)||void 0===Lt?void 0:Lt.message}))},He.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(_r,{keyPath:"compositeKey"})}}catch(He){Ae(zt.create("storage-open",{originalErrorMessage:He?.message}))}}),bn)}function pe(){return(pe=(0,ge.Z)(function*(Oe,Ae){const vt=(yield $n()).transaction(_r,"readwrite"),An=vt.objectStore(_r).put({compositeKey:Oe,value:Ae});return new Promise((ir,tr)=>{An.onsuccess=Fn=>{ir()},vt.onerror=Fn=>{var ei;tr(zt.create("storage-set",{originalErrorMessage:null===(ei=Fn.target.error)||void 0===ei?void 0:ei.message}))}})})).apply(this,arguments)}const tn=new Ve.Yd("@firebase/app-check");function Ot(Oe,Ae){return(0,Et.hl)()?function Pr(Oe,Ae){return function rt(Oe,Ae){return pe.apply(this,arguments)}(function ut(Oe){return`${Oe.options.appId}-${Oe.name}`}(Oe),Ae)}(Oe,Ae).catch(He=>{tn.warn(`Failed to write token to IndexedDB. Error: ${He}`)}):Promise.resolve()}function er(){return Vt().enabled}function Nt(){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,ge.Z)(function*(){const Oe=Vt();if(Oe.enabled&&Oe.token)return Oe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const On={error:"UNKNOWN_ERROR"};function qn(Oe){return Et.US.encodeString(JSON.stringify(Oe),!1)}function et(Oe){return q.apply(this,arguments)}function q(){return(q=(0,ge.Z)(function*(Oe,Ae=!1){const He=Oe.app;nn(He);const vt=ft(He);let An,Lt=vt.token;if(Lt&&!G(Lt)&&(vt.token=void 0,Lt=void 0),!Lt){const Fn=yield vt.cachedTokenPromise;Fn&&(G(Fn)?Lt=Fn:yield Ot(He,void 0))}if(!Ae&&Lt&&G(Lt))return{token:Lt.token};let tr,ir=!1;if(er()){vt.exchangeTokenPromise||(vt.exchangeTokenPromise=Rn(Cn(He,yield Nt()),Oe.heartbeatServiceProvider).finally(()=>{vt.exchangeTokenPromise=void 0}),ir=!0);const Fn=yield vt.exchangeTokenPromise;return yield Ot(He,Fn),vt.token=Fn,{token:Fn.token}}try{vt.exchangeTokenPromise||(vt.exchangeTokenPromise=vt.provider.getToken().finally(()=>{vt.exchangeTokenPromise=void 0}),ir=!0),Lt=yield ft(He).exchangeTokenPromise}catch(Fn){"appCheck/throttled"===Fn.code?tn.warn(Fn.message):tn.error(Fn),An=Fn}return Lt?An?tr=G(Lt)?{token:Lt.token,internalError:An}:Te(An):(tr={token:Lt.token},vt.token=Lt,yield Ot(He,Lt)):tr=Te(An),ir&&z(He,tr),tr})).apply(this,arguments)}function _e(){return(_e=(0,ge.Z)(function*(Oe){const Ae=Oe.app;nn(Ae);const{provider:He}=ft(Ae);if(er()){const vt=yield Nt(),{token:Lt}=yield Rn(Cn(Ae,vt),Oe.heartbeatServiceProvider);return{token:Lt}}{const{token:vt}=yield He.getToken();return{token:vt}}})).apply(this,arguments)}function ee(Oe,Ae){const He=ft(Oe),vt=He.tokenObservers.filter(Lt=>Lt.next!==Ae);0===vt.length&&He.tokenRefresher&&He.tokenRefresher.isRunning()&&He.tokenRefresher.stop(),He.tokenObservers=vt}function ie(Oe){const{app:Ae}=Oe,He=ft(Ae);let vt=He.tokenRefresher;vt||(vt=function Z(Oe){const{app:Ae}=Oe;return new yt((0,ge.Z)(function*(){let vt;if(vt=ft(Ae).token?yield et(Oe,!0):yield et(Oe),vt.error)throw vt.error;if(vt.internalError)throw vt.internalError}),()=>!0,()=>{const He=ft(Ae);if(He.token){let vt=He.token.issuedAtTimeMillis+.5*(He.token.expireTimeMillis-He.token.issuedAtTimeMillis)+3e5;return vt=Math.min(vt,He.token.expireTimeMillis-3e5),Math.max(0,vt-Date.now())}return 0},3e4,96e4)}(Oe),He.tokenRefresher=vt),!vt.isRunning()&&He.isTokenAutoRefreshEnabled&&vt.start()}function z(Oe,Ae){const He=ft(Oe).tokenObservers;for(const vt of He)try{"EXTERNAL"===vt.type&&null!=Ae.error?vt.error(Ae.error):vt.next(Ae)}catch{}}function G(Oe){return Oe.expireTimeMillis-Date.now()>0}function Te(Oe){return{token:qn(On),error:Oe}}class ht{constructor(Ae,He){this.app=Ae,this.heartbeatServiceProvider=He}_delete(){const{tokenObservers:Ae}=ft(this.app);for(const He of Ae)ee(this.app,He.next);return Promise.resolve()}}const Ki="app-check-internal";!function Kr(){(0,st._registerComponent)(new ot.wA("app-check",Oe=>function Ft(Oe,Ae){return new ht(Oe,Ae)}(Oe.getProvider("app").getImmediate(),Oe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Oe,Ae,He)=>{Oe.getProvider(Ki).initialize()})),(0,st._registerComponent)(new ot.wA(Ki,Oe=>function sn(Oe){return{getToken:Ae=>et(Oe,Ae),getLimitedUseToken:()=>function H(Oe){return _e.apply(this,arguments)}(Oe),addTokenListener:Ae=>function De(Oe,Ae,He,vt){const{app:Lt}=Oe,An=ft(Lt);if(An.tokenObservers=[...An.tokenObservers,{next:He,error:vt,type:Ae}],An.token&&G(An.token)){const tr=An.token;Promise.resolve().then(()=>{He({token:tr.token}),ie(Oe)}).catch(()=>{})}An.cachedTokenPromise.then(()=>ie(Oe))}(Oe,"INTERNAL",Ae),removeTokenListener:Ae=>ee(Oe.app,Ae)}}(Oe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,st.registerVersion)("@firebase/app-check","0.8.0")}();class ss{constructor(){return(0,d.vb)("app-check")}}typeof window<"u"&&window},1205:(Bt,Fe,R)=>{R.d(Fe,{zQ:()=>Vn,rT:()=>gt,f7:()=>jt,L6:()=>be,_Q:()=>Re,lh:()=>ft,Qv:()=>Ve,nw:()=>Vt});var d=R(4650),F=R(7579),V=R(9646),ce=R(9751),ae=R(8996),we=R(6451),Ce=R(5363),te=R(3900),Pe=R(4004),re=R(6063);class ue extends F.x{constructor(Je=1/0,Ge=1/0,Xe=re.l){super(),this._bufferSize=Je,this._windowTime=Ge,this._timestampProvider=Xe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ge===1/0,this._bufferSize=Math.max(1,Je),this._windowTime=Math.max(1,Ge)}next(Je){const{isStopped:Ge,_buffer:Xe,_infiniteTimeWindow:yt,_timestampProvider:bt,_windowTime:At}=this;Ge||(Xe.push(Je),!yt&&Xe.push(bt.now()+At)),this._trimBuffer(),super.next(Je)}_subscribe(Je){this._throwIfClosed(),this._trimBuffer();const Ge=this._innerSubscribe(Je),{_infiniteTimeWindow:Xe,_buffer:yt}=this,bt=yt.slice();for(let At=0;At<bt.length&&!Je.closed;At+=Xe?1:2)Je.next(bt[At]);return this._checkFinalizedStatuses(Je),Ge}_trimBuffer(){const{_bufferSize:Je,_timestampProvider:Ge,_buffer:Xe,_infiniteTimeWindow:yt}=this,bt=(yt?1:2)*Je;if(Je<1/0&&bt<Xe.length&&Xe.splice(0,Xe.length-bt),!yt){const At=Ge.now();let zt=0;for(let Pt=1;Pt<Xe.length&&Xe[Pt]<=At;Pt+=2)zt=Pt;zt&&Xe.splice(0,zt+1)}}}var me=R(3099);function qe(je,Je,Ge){let Xe,yt=!1;return je&&"object"==typeof je?({bufferSize:Xe=1/0,windowTime:Je=1/0,refCount:yt=!1,scheduler:Ge}=je):Xe=je??1/0,(0,me.B)({connector:()=>new ue(Xe,Je,Ge),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:yt})}var ze=R(590),We=R(576);function wt(je,Je){return(0,We.m)(Je)?(0,te.w)(()=>je,Je):(0,te.w)(()=>je)}var Be=R(9468),Me=R(9300),Ct=R(4976),mt=R(2011),ge=R(6895),st=R(6217);R(9260);const Ve=new d.OlP("angularfire2.auth.use-emulator"),be=new d.OlP("angularfire2.auth.settings"),Re=new d.OlP("angularfire2.auth.tenant-id"),gt=new d.OlP("angularfire2.auth.langugage-code"),ft=new d.OlP("angularfire2.auth.use-device-language"),jt=new d.OlP("angularfire.auth.persistence"),Vt=(je,Je,Ge,Xe,yt,bt,At,zt)=>(0,mt.cc)(`${je.name}.auth`,"AngularFireAuth",je.name,()=>{const Pt=Je.runOutsideAngular(()=>je.auth());if(Ge&&Pt.useEmulator(...Ge),Xe&&(Pt.tenantId=Xe),Pt.languageCode=yt,bt&&Pt.useDeviceLanguage(),At)for(const[nn,ln]of Object.entries(At))Pt.settings[nn]=ln;return zt&&Pt.setPersistence(zt),Pt},[Ge,Xe,yt,bt,At,zt]);let Vn=(()=>{class je{constructor(Ge,Xe,yt,bt,At,zt,Pt,nn,ln,mn,Rn,lr){const qt=new F.x,on=(0,V.of)(void 0).pipe((0,Ce.Q)(At.outsideAngular),(0,te.w)(()=>bt.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,9568)))),(0,Pe.U)(()=>(0,mt.on)(Ge,bt,Xe)),(0,Pe.U)(Cn=>Vt(Cn,bt,zt,nn,ln,mn,Pt,Rn)),qe({bufferSize:1,refCount:!1}));if((0,ge.PM)(yt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,V.of)(null);else{on.pipe((0,ze.P)()).subscribe();const jn=on.pipe((0,te.w)(xt=>xt.getRedirectResult().then(bn=>bn,()=>null)),Ct.iC,qe({bufferSize:1,refCount:!1})),br=on.pipe((0,te.w)(xt=>new ce.y(bn=>({unsubscribe:bt.runOutsideAngular(()=>xt.onAuthStateChanged($n=>bn.next($n),$n=>bn.error($n),()=>bn.complete()))})))),_r=on.pipe((0,te.w)(xt=>new ce.y(bn=>({unsubscribe:bt.runOutsideAngular(()=>xt.onIdTokenChanged($n=>bn.next($n),$n=>bn.error($n),()=>bn.complete()))}))));this.authState=jn.pipe(wt(br),(0,Be.R)(At.outsideAngular),(0,Ce.Q)(At.insideAngular)),this.user=jn.pipe(wt(_r),(0,Be.R)(At.outsideAngular),(0,Ce.Q)(At.insideAngular)),this.idToken=this.user.pipe((0,te.w)(xt=>xt?(0,ae.D)(xt.getIdToken()):(0,V.of)(null))),this.idTokenResult=this.user.pipe((0,te.w)(xt=>xt?(0,ae.D)(xt.getIdTokenResult()):(0,V.of)(null))),this.credential=(0,we.T)(jn,qt,this.authState.pipe((0,Me.h)(xt=>!xt))).pipe((0,Pe.U)(xt=>xt?.user?xt:null),(0,Be.R)(At.outsideAngular),(0,Ce.Q)(At.insideAngular))}return(0,mt.pX)(this,on,bt,{spy:{apply:(Cn,jn,br)=>{(Cn.startsWith("signIn")||Cn.startsWith("createUser"))&&br.then(_r=>qt.next(_r))}}})}}return je.\u0275fac=function(Ge){return new(Ge||je)(d.LFG(mt.Dh),d.LFG(mt.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ct.HU),d.LFG(Ve,8),d.LFG(be,8),d.LFG(Re,8),d.LFG(gt,8),d.LFG(ft,8),d.LFG(jt,8),d.LFG(st.nm,8))},je.\u0275prov=d.Yz7({token:je,factory:je.\u0275fac,providedIn:"any"}),je})()},33:(Bt,Fe,R)=>{R.d(Fe,{ST:()=>On,yb:()=>qn});var d=R(4650),F=R(4986),V=R(9751),ce=R(8996),ae=R(9646),we=R(4976),Ce=R(8675),te=R(4482),Pe=R(5403);function re(){return(0,te.e)((et,q)=>{let H,_e=!1;et.subscribe((0,Pe.x)(q,De=>{const ee=H;H=De,_e&&q.next([ee,De]),_e=!0}))})}var ue=R(4004),me=R(5026),qe=R(4671);function We(et,q){return et===q}var wt=R(9300),Be=R(2011),Me=R(6895),mt=(R(9568),R(3942)),ge=R(2810),st=R(2090),ot=R(4859);function be(et,q){if(void 0===q)return{merge:!1};if(void 0!==q.mergeFields&&void 0!==q.merge)throw new ge.WA("invalid-argument",`Invalid options passed to function ${et}(): You cannot specify both "merge" and "mergeFields".`);return q}function Re(){if(typeof Uint8Array>"u")throw new ge.WA("unimplemented","Uint8Arrays are not available in this environment.")}function gt(){if(!(0,ge.Me)())throw new ge.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ft{constructor(q){this._delegate=q}static fromBase64String(q){return gt(),new ft(ge.Jj.fromBase64String(q))}static fromUint8Array(q){return Re(),new ft(ge.Jj.fromUint8Array(q))}toBase64(){return gt(),this._delegate.toBase64()}toUint8Array(){return Re(),this._delegate.toUint8Array()}isEqual(q){return this._delegate.isEqual(q._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jt(et){return function Vt(et,q){if("object"!=typeof et||null===et)return!1;const H=et;for(const _e of q)if(_e in H&&"function"==typeof H[_e])return!0;return!1}(et,["next","error","complete"])}class Vn{enableIndexedDbPersistence(q,H){return(0,ge.ST)(q._delegate,{forceOwnership:H})}enableMultiTabIndexedDbPersistence(q){return(0,ge.fH)(q._delegate)}clearIndexedDbPersistence(q){return(0,ge.Fc)(q._delegate)}}class $e{constructor(q,H,_e){this._delegate=H,this._persistenceProvider=_e,this.INTERNAL={delete:()=>this.terminate()},q instanceof ge.l7||(this._appCompat=q)}get _databaseId(){return this._delegate._databaseId}settings(q){const H=this._delegate._getSettings();!q.merge&&H.host!==q.host&&(0,ge.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),q.merge&&delete(q=Object.assign(Object.assign({},H),q)).merge,this._delegate._setSettings(q)}useEmulator(q,H,_e={}){(0,ge.at)(this._delegate,q,H,_e)}enableNetwork(){return(0,ge.Ix)(this._delegate)}disableNetwork(){return(0,ge.TF)(this._delegate)}enablePersistence(q){let H=!1,_e=!1;return q&&(H=!!q.synchronizeTabs,_e=!!q.experimentalForceOwningTab,(0,ge.Wi)("synchronizeTabs",H,"experimentalForceOwningTab",_e)),H?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,_e)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,ge.Mx)(this._delegate)}onSnapshotsInSync(q){return(0,ge.sc)(this._delegate,q)}get app(){if(!this._appCompat)throw new ge.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(q){try{return new qt(this,(0,ge.hJ)(this._delegate,q))}catch(H){throw At(H,"collection()","Firestore.collection()")}}doc(q){try{return new bt(this,(0,ge.JU)(this._delegate,q))}catch(H){throw At(H,"doc()","Firestore.doc()")}}collectionGroup(q){try{return new mn(this,(0,ge.B$)(this._delegate,q))}catch(H){throw At(H,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(q){return(0,ge.i3)(this._delegate,H=>q(new Ge(this,H)))}batch(){return(0,ge.qY)(this._delegate),new Xe(new ge.PU(this._delegate,q=>(0,ge.GL)(this._delegate,q)))}loadBundle(q){return(0,ge.Pb)(this._delegate,q)}namedQuery(q){return(0,ge.L$)(this._delegate,q).then(H=>H?new mn(this,H):null)}}class je extends ge.u7{constructor(q){super(),this.firestore=q}convertBytes(q){return new ft(new ge.Jj(q))}convertReference(q){const H=this.convertDocumentKey(q,this.firestore._databaseId);return bt.forKey(H,this.firestore,null)}}class Ge{constructor(q,H){this._firestore=q,this._delegate=H,this._userDataWriter=new je(q)}get(q){const H=on(q);return this._delegate.get(H).then(_e=>new nn(this._firestore,new ge.xU(this._firestore._delegate,this._userDataWriter,_e._key,_e._document,_e.metadata,H.converter)))}set(q,H,_e){const De=on(q);return _e?(be("Transaction.set",_e),this._delegate.set(De,H,_e)):this._delegate.set(De,H),this}update(q,H,_e,...De){const ee=on(q);return 2===arguments.length?this._delegate.update(ee,H):this._delegate.update(ee,H,_e,...De),this}delete(q){const H=on(q);return this._delegate.delete(H),this}}class Xe{constructor(q){this._delegate=q}set(q,H,_e){const De=on(q);return _e?(be("WriteBatch.set",_e),this._delegate.set(De,H,_e)):this._delegate.set(De,H),this}update(q,H,_e,...De){const ee=on(q);return 2===arguments.length?this._delegate.update(ee,H):this._delegate.update(ee,H,_e,...De),this}delete(q){const H=on(q);return this._delegate.delete(H),this}commit(){return this._delegate.commit()}}class yt{constructor(q,H,_e){this._firestore=q,this._userDataWriter=H,this._delegate=_e}fromFirestore(q,H){const _e=new ge.$q(this._firestore._delegate,this._userDataWriter,q._key,q._document,q.metadata,null);return this._delegate.fromFirestore(new ln(this._firestore,_e),H??{})}toFirestore(q,H){return H?this._delegate.toFirestore(q,H):this._delegate.toFirestore(q)}static getInstance(q,H){const _e=yt.INSTANCES;let De=_e.get(q);De||(De=new WeakMap,_e.set(q,De));let ee=De.get(H);return ee||(ee=new yt(q,new je(q),H),De.set(H,ee)),ee}}yt.INSTANCES=new WeakMap;class bt{constructor(q,H){this.firestore=q,this._delegate=H,this._userDataWriter=new je(q)}static forPath(q,H,_e){if(q.length%2!=0)throw new ge.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${q.canonicalString()} has ${q.length}`);return new bt(H,new ge.my(H._delegate,_e,new ge.Ky(q)))}static forKey(q,H,_e){return new bt(H,new ge.my(H._delegate,_e,q))}get id(){return this._delegate.id}get parent(){return new qt(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(q){try{return new qt(this.firestore,(0,ge.hJ)(this._delegate,q))}catch(H){throw At(H,"collection()","DocumentReference.collection()")}}isEqual(q){return(q=(0,st.m9)(q))instanceof ge.my&&(0,ge.Eo)(this._delegate,q)}set(q,H){H=be("DocumentReference.set",H);try{return H?(0,ge.pl)(this._delegate,q,H):(0,ge.pl)(this._delegate,q)}catch(_e){throw At(_e,"setDoc()","DocumentReference.set()")}}update(q,H,..._e){try{return 1===arguments.length?(0,ge.r7)(this._delegate,q):(0,ge.r7)(this._delegate,q,H,..._e)}catch(De){throw At(De,"updateDoc()","DocumentReference.update()")}}delete(){return(0,ge.oe)(this._delegate)}onSnapshot(...q){const H=zt(q),_e=Pt(q,De=>new nn(this.firestore,new ge.xU(this.firestore._delegate,this._userDataWriter,De._key,De._document,De.metadata,this._delegate.converter)));return(0,ge.cf)(this._delegate,H,_e)}get(q){let H;return H="cache"===q?.source?(0,ge.kl)(this._delegate):"server"===q?.source?(0,ge.Xk)(this._delegate):(0,ge.QT)(this._delegate),H.then(_e=>new nn(this.firestore,new ge.xU(this.firestore._delegate,this._userDataWriter,_e._key,_e._document,_e.metadata,this._delegate.converter)))}withConverter(q){return new bt(this.firestore,this._delegate.withConverter(q?yt.getInstance(this.firestore,q):null))}}function At(et,q,H){return et.message=et.message.replace(q,H),et}function zt(et){for(const q of et)if("object"==typeof q&&!jt(q))return q;return{}}function Pt(et,q){var H,_e;let De;return De=jt(et[0])?et[0]:jt(et[1])?et[1]:"function"==typeof et[0]?{next:et[0],error:et[1],complete:et[2]}:{next:et[1],error:et[2],complete:et[3]},{next:ee=>{De.next&&De.next(q(ee))},error:null===(H=De.error)||void 0===H?void 0:H.bind(De),complete:null===(_e=De.complete)||void 0===_e?void 0:_e.bind(De)}}class nn{constructor(q,H){this._firestore=q,this._delegate=H}get ref(){return new bt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(q){return this._delegate.data(q)}get(q,H){return this._delegate.get(q,H)}isEqual(q){return(0,ge.qK)(this._delegate,q._delegate)}}class ln extends nn{data(q){const H=this._delegate.data(q);return(0,ge.K9)(void 0!==H,"Document in a QueryDocumentSnapshot should exist"),H}}class mn{constructor(q,H){this.firestore=q,this._delegate=H,this._userDataWriter=new je(q)}where(q,H,_e){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.ar)(q,H,_e)))}catch(De){throw At(De,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(q,H){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.Xo)(q,H)))}catch(_e){throw At(_e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(q){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.b9)(q)))}catch(H){throw At(H,"limit()","Query.limit()")}}limitToLast(q){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.vh)(q)))}catch(H){throw At(H,"limitToLast()","Query.limitToLast()")}}startAt(...q){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.e0)(...q)))}catch(H){throw At(H,"startAt()","Query.startAt()")}}startAfter(...q){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.TQ)(...q)))}catch(H){throw At(H,"startAfter()","Query.startAfter()")}}endBefore(...q){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.Lx)(...q)))}catch(H){throw At(H,"endBefore()","Query.endBefore()")}}endAt(...q){try{return new mn(this.firestore,(0,ge.IO)(this._delegate,(0,ge.Wu)(...q)))}catch(H){throw At(H,"endAt()","Query.endAt()")}}isEqual(q){return(0,ge.iE)(this._delegate,q._delegate)}get(q){let H;return H="cache"===q?.source?(0,ge.UQ)(this._delegate):"server"===q?.source?(0,ge.zN)(this._delegate):(0,ge.PL)(this._delegate),H.then(_e=>new lr(this.firestore,new ge.W(this.firestore._delegate,this._userDataWriter,this._delegate,_e._snapshot)))}onSnapshot(...q){const H=zt(q),_e=Pt(q,De=>new lr(this.firestore,new ge.W(this.firestore._delegate,this._userDataWriter,this._delegate,De._snapshot)));return(0,ge.cf)(this._delegate,H,_e)}withConverter(q){return new mn(this.firestore,this._delegate.withConverter(q?yt.getInstance(this.firestore,q):null))}}class Rn{constructor(q,H){this._firestore=q,this._delegate=H}get type(){return this._delegate.type}get doc(){return new ln(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lr{constructor(q,H){this._firestore=q,this._delegate=H}get query(){return new mn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(q=>new ln(this._firestore,q))}docChanges(q){return this._delegate.docChanges(q).map(H=>new Rn(this._firestore,H))}forEach(q,H){this._delegate.forEach(_e=>{q.call(H,new ln(this._firestore,_e))})}isEqual(q){return(0,ge.qK)(this._delegate,q._delegate)}}class qt extends mn{constructor(q,H){super(q,H),this.firestore=q,this._delegate=H}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const q=this._delegate.parent;return q?new bt(this.firestore,q):null}doc(q){try{return new bt(this.firestore,void 0===q?(0,ge.JU)(this._delegate):(0,ge.JU)(this._delegate,q))}catch(H){throw At(H,"doc()","CollectionReference.doc()")}}add(q){return(0,ge.ET)(this._delegate,q).then(H=>new bt(this.firestore,H))}isEqual(q){return(0,ge.Eo)(this._delegate,q._delegate)}withConverter(q){return new qt(this.firestore,this._delegate.withConverter(q?yt.getInstance(this.firestore,q):null))}}function on(et){return(0,ge.Cf)(et,ge.my)}class Cn{constructor(...q){this._delegate=new ge.Lz(...q)}static documentId(){return new Cn(ge.Xb.keyField().canonicalString())}isEqual(q){return(q=(0,st.m9)(q))instanceof ge.Lz&&this._delegate._internalPath.isEqual(q._internalPath)}}class jn{constructor(q){this._delegate=q}static serverTimestamp(){const q=(0,ge.Bt)();return q._methodName="FieldValue.serverTimestamp",new jn(q)}static delete(){const q=(0,ge.AK)();return q._methodName="FieldValue.delete",new jn(q)}static arrayUnion(...q){const H=(0,ge.vr)(...q);return H._methodName="FieldValue.arrayUnion",new jn(H)}static arrayRemove(...q){const H=(0,ge.Ab)(...q);return H._methodName="FieldValue.arrayRemove",new jn(H)}static increment(q){const H=(0,ge.nP)(q);return H._methodName="FieldValue.increment",new jn(H)}isEqual(q){return this._delegate.isEqual(q._delegate)}}const br={Firestore:$e,GeoPoint:ge.F8,Timestamp:ge.EK,Blob:ft,Transaction:Ge,WriteBatch:Xe,DocumentReference:bt,DocumentSnapshot:nn,Query:mn,QueryDocumentSnapshot:ln,QuerySnapshot:lr,CollectionReference:qt,FieldPath:Cn,FieldValue:jn,setLogLevel:function Je(et){(0,ge.Ub)(et)},CACHE_SIZE_UNLIMITED:ge.IX};!function xt(et){(function _r(et,q){et.INTERNAL.registerComponent(new ot.wA("firestore-compat",H=>{const _e=H.getProvider("app-compat").getImmediate(),De=H.getProvider("firestore").getImmediate();return q(_e,De)},"PUBLIC").setServiceProps(Object.assign({},br)))})(et,(q,H)=>new $e(q,H,new Vn)),et.registerVersion("@firebase/firestore-compat","0.3.12")}(mt.Z);var bn=R(1205),$n=R(6217),ar=R(9260);function Un(et,q){return function Pr(et,q=F.z){return new V.y(H=>{let _e;return null!=q?q.schedule(()=>{_e=et.onSnapshot({includeMetadataChanges:!0},H)}):_e=et.onSnapshot({includeMetadataChanges:!0},H),()=>{_e?.()}})}(et,q)}function rt(et,q){return Un(et,q).pipe((0,ue.U)(H=>({payload:H,type:"query"})))}function pe(et,q){return rt(et,q).pipe((0,Ce.O)(void 0),re(),(0,ue.U)(([H,_e])=>{const De=_e.payload.docChanges(),ee=De.map(ie=>({type:ie.type,payload:ie}));return H&&JSON.stringify(H.payload.metadata)!==JSON.stringify(_e.payload.metadata)&&_e.payload.docs.forEach((ie,Z)=>{const z=De.find(Te=>Te.doc.ref.isEqual(ie.ref)),G=H?.payload.docs.find(Te=>Te.ref.isEqual(ie.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(ie.metadata)||!z&&G&&JSON.stringify(G.metadata)===JSON.stringify(ie.metadata)||ee.push({type:"modified",payload:{oldIndex:Z,newIndex:Z,type:"modified",doc:ie}})}),ee}))}function fe(et,q,H){return pe(et,H).pipe((0,me.R)((_e,De)=>function nt(et,q,H){return q.forEach(_e=>{H.indexOf(_e.type)>-1&&(et=function tn(et,q){switch(q.type){case"added":if(!et[q.newIndex]||!et[q.newIndex].doc.ref.isEqual(q.doc.ref))return ut(et,q.newIndex,0,q);break;case"modified":if(null==et[q.oldIndex]||et[q.oldIndex].doc.ref.isEqual(q.doc.ref)){if(q.oldIndex!==q.newIndex){const H=et.slice();return H.splice(q.oldIndex,1),H.splice(q.newIndex,0,q),H}return ut(et,q.newIndex,1,q)}break;case"removed":if(et[q.oldIndex]&&et[q.oldIndex].doc.ref.isEqual(q.doc.ref))return ut(et,q.oldIndex,1)}return et}(et,_e))}),et}(_e,De.map(ee=>ee.payload),q),[]),function ze(et,q=qe.y){return et=et??We,(0,te.e)((H,_e)=>{let De,ee=!0;H.subscribe((0,Pe.x)(_e,ie=>{const Z=q(ie);(ee||!et(De,Z))&&(ee=!1,De=Z,_e.next(ie))}))})}(),(0,ue.U)(_e=>_e.map(De=>({type:De.type,payload:De}))))}function ut(et,q,H,..._e){const De=et.slice();return De.splice(q,H,..._e),De}function hn(et){return(!et||0===et.length)&&(et=["added","removed","modified"]),et}class Tn{constructor(q,H,_e){this.ref=q,this.query=H,this.afs=_e}stateChanges(q){let H=pe(this.query,this.afs.schedulers.outsideAngular);return q&&q.length>0&&(H=H.pipe((0,ue.U)(_e=>_e.filter(De=>q.indexOf(De.type)>-1)))),H.pipe((0,Ce.O)(void 0),re(),(0,wt.h)(([_e,De])=>De.length>0||!_e),(0,ue.U)(([_e,De])=>De),we.iC)}auditTrail(q){return this.stateChanges(q).pipe((0,me.R)((H,_e)=>[...H,..._e],[]))}snapshotChanges(q){const H=hn(q);return fe(this.query,H,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(q={}){return rt(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(H=>H.payload.docs.map(_e=>q.idField?Object.assign(Object.assign({},_e.data()),{[q.idField]:_e.id}):_e.data())),we.iC)}get(q){return(0,ce.D)(this.query.get(q)).pipe(we.iC)}add(q){return this.ref.add(q)}doc(q){return new Ot(this.ref.doc(q),this.afs)}}class Ot{constructor(q,H){this.ref=q,this.afs=H}set(q,H){return this.ref.set(q,H)}update(q){return this.ref.update(q)}delete(){return this.ref.delete()}collection(q,H){const _e=this.ref.collection(q),{ref:De,query:ee}=Jt(_e,H);return new Tn(De,ee,this.afs)}snapshotChanges(){return function Zn(et,q){return Un(et,q).pipe((0,Ce.O)(void 0),re(),(0,ue.U)(([H,_e])=>_e.exists?H?.exists?{payload:_e,type:"modified"}:{payload:_e,type:"added"}:{payload:_e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(q={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:H})=>q.idField?Object.assign(Object.assign({},H.data()),{[q.idField]:H.id}):H.data()))}get(q){return(0,ce.D)(this.ref.get(q)).pipe(we.iC)}}class Nn{constructor(q,H){this.query=q,this.afs=H}stateChanges(q){return q&&0!==q.length?pe(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(H=>H.filter(_e=>q.indexOf(_e.type)>-1)),(0,wt.h)(H=>H.length>0),we.iC):pe(this.query,this.afs.schedulers.outsideAngular).pipe(we.iC)}auditTrail(q){return this.stateChanges(q).pipe((0,me.R)((H,_e)=>[...H,..._e],[]))}snapshotChanges(q){const H=hn(q);return fe(this.query,H,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(q={}){return rt(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(_e=>_e.payload.docs.map(De=>q.idField?Object.assign({[q.idField]:De.id},De.data()):De.data())),we.iC)}get(q){return(0,ce.D)(this.query.get(q)).pipe(we.iC)}}const fn=new d.OlP("angularfire2.enableFirestorePersistence"),er=new d.OlP("angularfire2.firestore.persistenceSettings"),Nt=new d.OlP("angularfire2.firestore.settings"),Yt=new d.OlP("angularfire2.firestore.use-emulator");function Jt(et,q=(H=>H)){return{query:q(et),ref:et}}let On=(()=>{class et{constructor(H,_e,De,ee,ie,Z,z,G,Te,ht,Ft,sn,oe,de,ne,Ne,Ke){this.schedulers=z;const Ut=(0,Be.on)(H,Z,_e),yn=Te;ht&&(0,bn.nw)(Ut,Z,Ft,oe,de,ne,sn,Ne),[this.firestore,this.persistenceEnabled$]=(0,Be.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Ue=Z.runOutsideAngular(()=>Ut.firestore());if(ee&&Ue.settings(ee),yn&&Ue.useEmulator(...yn),De&&!(0,Me.PM)(ie)){const Le=()=>{try{return(0,ce.D)(Ue.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(St){return typeof console<"u"&&console.warn(St),(0,ae.of)(!1)}};return[Ue,Z.runOutsideAngular(Le)]}return[Ue,(0,ae.of)(!1)]},[ee,yn,De])}collection(H,_e){let De;De="string"==typeof H?this.firestore.collection(H):H;const{ref:ee,query:ie}=Jt(De,_e),Z=this.schedulers.ngZone.run(()=>ee);return new Tn(Z,ie,this)}collectionGroup(H,_e){const De=_e||(ie=>ie),ee=this.firestore.collectionGroup(H);return new Nn(De(ee),this)}doc(H){let _e;_e="string"==typeof H?this.firestore.doc(H):H;const De=this.schedulers.ngZone.run(()=>_e);return new Ot(De,this)}createId(){return this.firestore.collection("_").doc().id}}return et.\u0275fac=function(H){return new(H||et)(d.LFG(Be.Dh),d.LFG(Be.xv,8),d.LFG(fn,8),d.LFG(Nt,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(we.HU),d.LFG(er,8),d.LFG(Yt,8),d.LFG(bn.zQ,8),d.LFG(bn.Qv,8),d.LFG(bn.L6,8),d.LFG(bn._Q,8),d.LFG(bn.rT,8),d.LFG(bn.lh,8),d.LFG(bn.f7,8),d.LFG($n.nm,8))},et.\u0275prov=d.Yz7({token:et,factory:et.\u0275fac,providedIn:"any"}),et})(),qn=(()=>{class et{constructor(){ar.Z.registerVersion("angularfire",we.q4.full,"fst-compat")}static enablePersistence(H){return{ngModule:et,providers:[{provide:fn,useValue:!0},{provide:er,useValue:H}]}}}return et.\u0275fac=function(H){return new(H||et)},et.\u0275mod=d.oAB({type:et}),et.\u0275inj=d.cJS({providers:[On]}),et})()},2011:(Bt,Fe,R)=>{R.d(Fe,{Dh:()=>te,GT:()=>we,cc:()=>ze,hO:()=>qe,on:()=>re,pX:()=>ae,xv:()=>Pe});var d=R(4650),F=R(9260),V=R(4976);Bt=R.hmd(Bt);const ce=["ngOnDestroy"],ae=(Me,Ct,mt,ge={})=>new Proxy(Me,{get:(st,ot)=>mt.runOutsideAngular(()=>{var Et;if(Me[ot])return!(null===(Et=ge?.spy)||void 0===Et)&&Et.get&&ge.spy.get(ot,Me[ot]),Me[ot];if(ce.indexOf(ot)>-1)return()=>{};const Ve=Ct.toPromise().then(be=>{const Re=be&&be[ot];return"function"==typeof Re?Re.bind(be):Re&&Re.then?Re.then(gt=>mt.run(()=>gt)):mt.run(()=>Re)});return new Proxy(()=>{},{get:(be,Re)=>Ve[Re],apply:(be,Re,gt)=>Ve.then(ft=>{var jt;const Vt=ft&&ft(...gt);return!(null===(jt=ge?.spy)||void 0===jt)&&jt.apply&&ge.spy.apply(ot,gt,Vt),Vt})})})}),we=(Me,Ct)=>{Ct.forEach(mt=>{Object.getOwnPropertyNames(mt.prototype||mt).forEach(ge=>{Object.defineProperty(Me.prototype,ge,Object.getOwnPropertyDescriptor(mt.prototype||mt,ge))})})};class Ce{constructor(Ct){return Ct}}const te=new d.OlP("angularfire2.app.options"),Pe=new d.OlP("angularfire2.app.name");function re(Me,Ct,mt){const st="object"==typeof mt&&mt||{};st.name=st.name||"string"==typeof mt&&mt||"[DEFAULT]";const Et=F.Z.apps.filter(Ve=>Ve&&Ve.name===st.name)[0]||Ct.runOutsideAngular(()=>F.Z.initializeApp(Me,st));try{JSON.stringify(Me)!==JSON.stringify(Et.options)&&ue("error",`${Et.name} Firebase App already initialized with different options${Bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(Et)}const ue=(Me,...Ct)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Ct)},me={provide:Ce,useFactory:re,deps:[te,d.R0b,[new d.FiY,Pe]]};let qe=(()=>{class Me{constructor(mt){F.Z.registerVersion("angularfire",V.q4.full,"core"),F.Z.registerVersion("angularfire",V.q4.full,"app-compat"),F.Z.registerVersion("angular",d.q4F.full,mt.toString())}static initializeApp(mt,ge){return{ngModule:Me,providers:[{provide:te,useValue:mt},{provide:Pe,useValue:ge}]}}}return Me.\u0275fac=function(mt){return new(mt||Me)(d.LFG(d.Lbi))},Me.\u0275mod=d.oAB({type:Me}),Me.\u0275inj=d.cJS({providers:[me]}),Me})();function ze(Me,Ct,mt,ge,st){const[,ot,Et]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Me)||[];if(ot)return function We(Me,Ct){try{return Me.toString()===Ct.toString()}catch{return Me===Ct}}(st,Et)||(Be("error",`${Ct} was already initialized on the ${mt} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:st,was:Et})),ot;{const Ve=ge();return globalThis.\u0275AngularfireInstanceCache.push([Me,Ve,st]),Ve}}const wt=!!Bt.hot,Be=(Me,...Ct)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Bt,Fe,R)=>{R.d(Fe,{q4:()=>xa,iC:()=>cl,HU:()=>td,vb:()=>hu,JM:()=>ul});var d=R(4650),F=R(259),V=R(5861),ce=R(6881),ae=R(2090),we=R(4859),Ce=R(1877);let Pe,re;const qe=new WeakMap,ze=new WeakMap,We=new WeakMap,wt=new WeakMap,Be=new WeakMap;let mt={get(w,T,j){if(w instanceof IDBTransaction){if("done"===T)return ze.get(w);if("objectStoreNames"===T)return w.objectStoreNames||We.get(w);if("store"===T)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return Et(w[T])},set:(w,T,j)=>(w[T]=j,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function ot(w){return"function"==typeof w?function st(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(Ve(this),T),Et(qe.get(this))}:function(...T){return Et(w.apply(Ve(this),T))}:function(T,...j){const se=w.call(Ve(this),T,...j);return We.set(se,T.sort?T.sort():[T]),Et(se)}}(w):(w instanceof IDBTransaction&&function Ct(w){if(ze.has(w))return;const T=new Promise((j,se)=>{const ve=()=>{w.removeEventListener("complete",xe),w.removeEventListener("error",dt),w.removeEventListener("abort",dt)},xe=()=>{j(),ve()},dt=()=>{se(w.error||new DOMException("AbortError","AbortError")),ve()};w.addEventListener("complete",xe),w.addEventListener("error",dt),w.addEventListener("abort",dt)});ze.set(w,T)}(w),((w,T)=>T.some(j=>w instanceof j))(w,function ue(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,mt):w)}function Et(w){if(w instanceof IDBRequest)return function Me(w){const T=new Promise((j,se)=>{const ve=()=>{w.removeEventListener("success",xe),w.removeEventListener("error",dt)},xe=()=>{j(Et(w.result)),ve()},dt=()=>{se(w.error),ve()};w.addEventListener("success",xe),w.addEventListener("error",dt)});return T.then(j=>{j instanceof IDBCursor&&qe.set(j,w)}).catch(()=>{}),Be.set(T,w),T}(w);if(wt.has(w))return wt.get(w);const T=ot(w);return T!==w&&(wt.set(w,T),Be.set(T,w)),T}const Ve=w=>Be.get(w),gt=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],jt=new Map;function Vt(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(jt.get(T))return jt.get(T);const j=T.replace(/FromIndex$/,""),se=T!==j,ve=ft.includes(j);if(!(j in(se?IDBIndex:IDBObjectStore).prototype)||!ve&&!gt.includes(j))return;const xe=function(){var dt=(0,V.Z)(function*(Xt,...Qt){const En=this.transaction(Xt,ve?"readwrite":"readonly");let Dn=En.store;return se&&(Dn=Dn.index(Qt.shift())),(yield Promise.all([Dn[j](...Qt),ve&&En.done]))[0]});return function(Qt){return dt.apply(this,arguments)}}();return jt.set(T,xe),xe}!function ge(w){mt=w(mt)}(w=>({...w,get:(T,j,se)=>Vt(T,j)||w.get(T,j,se),has:(T,j)=>!!Vt(T,j)||w.has(T,j)}));const Vn="@firebase/installations",Je="w:0.6.4",Ge="FIS_v2",Pt=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nn(w){return w instanceof ae.ZR&&w.code.includes("request-failed")}function ln({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function mn(w){return{token:w.token,requestStatus:2,expiresIn:br(w.expiresIn),creationTime:Date.now()}}function Rn(w,T){return lr.apply(this,arguments)}function lr(){return(lr=(0,V.Z)(function*(w,T){const se=(yield T.json()).error;return Pt.create("request-failed",{requestName:w,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function qt({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function on(w,{refreshToken:T}){const j=qt(w);return j.append("Authorization",function _r(w){return`${Ge} ${w}`}(T)),j}function Cn(w){return jn.apply(this,arguments)}function jn(){return(jn=(0,V.Z)(function*(w){const T=yield w();return T.status>=500&&T.status<600?w():T})).apply(this,arguments)}function br(w){return Number(w.replace("s","000"))}function xt(w,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,V.Z)(function*({appConfig:w,heartbeatServiceProvider:T},{fid:j}){const se=ln(w),ve=qt(w),xe=T.getImmediate({optional:!0});if(xe){const En=yield xe.getHeartbeatsHeader();En&&ve.append("x-firebase-client",En)}const Xt={method:"POST",headers:ve,body:JSON.stringify({fid:j,authVersion:Ge,appId:w.appId,sdkVersion:Je})},Qt=yield Cn(()=>fetch(se,Xt));if(Qt.ok){const En=yield Qt.json();return{fid:En.fid||j,registrationStatus:2,refreshToken:En.refreshToken,authToken:mn(En.authToken)}}throw yield Rn("Create Installation",Qt)})).apply(this,arguments)}function $n(w){return new Promise(T=>{setTimeout(T,w)})}const Pr=/^[cdef][\w-]{21}$/;function Zn(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const j=function rt(w){return function ar(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Pr.test(j)?j:""}catch{return""}}function pe(w){return`${w.appName}!${w.appId}`}const fe=new Map;function nt(w,T){const j=pe(w);hn(j,T),function Tn(w,T){const j=function Nn(){return!Ot&&"BroadcastChannel"in self&&(Ot=new BroadcastChannel("[Firebase] FID Change"),Ot.onmessage=w=>{hn(w.data.key,w.data.fid)}),Ot}();j&&j.postMessage({key:w,fid:T}),function fn(){0===fe.size&&Ot&&(Ot.close(),Ot=null)}()}(j,T)}function hn(w,T){const j=fe.get(w);if(j)for(const se of j)se(T)}let Ot=null;const Yt="firebase-installations-store";let Jt=null;function On(){return Jt||(Jt=function be(w,T,{blocked:j,upgrade:se,blocking:ve,terminated:xe}={}){const dt=indexedDB.open(w,T),Xt=Et(dt);return se&&dt.addEventListener("upgradeneeded",Qt=>{se(Et(dt.result),Qt.oldVersion,Qt.newVersion,Et(dt.transaction))}),j&&dt.addEventListener("blocked",()=>j()),Xt.then(Qt=>{xe&&Qt.addEventListener("close",()=>xe()),ve&&Qt.addEventListener("versionchange",()=>ve())}).catch(()=>{}),Xt}("firebase-installations-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(Yt)}})),Jt}function qn(w,T){return et.apply(this,arguments)}function et(){return(et=(0,V.Z)(function*(w,T){const j=pe(w),ve=(yield On()).transaction(Yt,"readwrite"),xe=ve.objectStore(Yt),dt=yield xe.get(j);return yield xe.put(T,j),yield ve.done,(!dt||dt.fid!==T.fid)&&nt(w,T.fid),T})).apply(this,arguments)}function q(w){return H.apply(this,arguments)}function H(){return(H=(0,V.Z)(function*(w){const T=pe(w),se=(yield On()).transaction(Yt,"readwrite");yield se.objectStore(Yt).delete(T),yield se.done})).apply(this,arguments)}function _e(w,T){return De.apply(this,arguments)}function De(){return(De=(0,V.Z)(function*(w,T){const j=pe(w),ve=(yield On()).transaction(Yt,"readwrite"),xe=ve.objectStore(Yt),dt=yield xe.get(j),Xt=T(dt);return void 0===Xt?yield xe.delete(j):yield xe.put(Xt,j),yield ve.done,Xt&&(!dt||dt.fid!==Xt.fid)&&nt(w,Xt.fid),Xt})).apply(this,arguments)}function ee(w){return ie.apply(this,arguments)}function ie(){return(ie=(0,V.Z)(function*(w){let T;const j=yield _e(w.appConfig,se=>{const ve=Z(se),xe=z(w,ve);return T=xe.registrationPromise,xe.installationEntry});return""===j.fid?{installationEntry:yield T}:{installationEntry:j,registrationPromise:T}})).apply(this,arguments)}function Z(w){return oe(w||{fid:Zn(),registrationStatus:0})}function z(w,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Pt.create("app-offline"))};const j={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},se=function G(w,T){return Te.apply(this,arguments)}(w,j);return{installationEntry:j,registrationPromise:se}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ht(w)}:{installationEntry:T}}function Te(){return(Te=(0,V.Z)(function*(w,T){try{const j=yield xt(w,T);return qn(w.appConfig,j)}catch(j){throw nn(j)&&409===j.customData.serverCode?yield q(w.appConfig):yield qn(w.appConfig,{fid:T.fid,registrationStatus:0}),j}})).apply(this,arguments)}function ht(w){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,V.Z)(function*(w){let T=yield sn(w.appConfig);for(;1===T.registrationStatus;)yield $n(100),T=yield sn(w.appConfig);if(0===T.registrationStatus){const{installationEntry:j,registrationPromise:se}=yield ee(w);return se||j}return T})).apply(this,arguments)}function sn(w){return _e(w,T=>{if(!T)throw Pt.create("installation-not-found");return oe(T)})}function oe(w){return function de(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function ne(w,T){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,V.Z)(function*({appConfig:w,heartbeatServiceProvider:T},j){const se=Ke(w,j),ve=on(w,j),xe=T.getImmediate({optional:!0});if(xe){const En=yield xe.getHeartbeatsHeader();En&&ve.append("x-firebase-client",En)}const Xt={method:"POST",headers:ve,body:JSON.stringify({installation:{sdkVersion:Je,appId:w.appId}})},Qt=yield Cn(()=>fetch(se,Xt));if(Qt.ok)return mn(yield Qt.json());throw yield Rn("Generate Auth Token",Qt)})).apply(this,arguments)}function Ke(w,{fid:T}){return`${ln(w)}/${T}/authTokens:generate`}function Ut(w){return yn.apply(this,arguments)}function yn(){return(yn=(0,V.Z)(function*(w,T=!1){let j;const se=yield _e(w.appConfig,xe=>{if(!Ln(xe))throw Pt.create("not-registered");const dt=xe.authToken;if(!T&&Yn(dt))return xe;if(1===dt.requestStatus)return j=Ue(w,T),xe;{if(!navigator.onLine)throw Pt.create("app-offline");const Xt=Bn(xe);return j=It(w,Xt),Xt}});return j?yield j:se.authToken})).apply(this,arguments)}function Ue(w,T){return Le.apply(this,arguments)}function Le(){return(Le=(0,V.Z)(function*(w,T){let j=yield St(w.appConfig);for(;1===j.authToken.requestStatus;)yield $n(100),j=yield St(w.appConfig);const se=j.authToken;return 0===se.requestStatus?Ut(w,T):se})).apply(this,arguments)}function St(w){return _e(w,T=>{if(!Ln(T))throw Pt.create("not-registered");return function Rr(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function It(w,T){return wn.apply(this,arguments)}function wn(){return(wn=(0,V.Z)(function*(w,T){try{const j=yield ne(w,T),se=Object.assign(Object.assign({},T),{authToken:j});return yield qn(w.appConfig,se),j}catch(j){if(!nn(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const se=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield qn(w.appConfig,se)}else yield q(w.appConfig);throw j}})).apply(this,arguments)}function Ln(w){return void 0!==w&&2===w.registrationStatus}function Yn(w){return 2===w.requestStatus&&!function Tr(w){const T=Date.now();return T<w.creationTime||w.creationTime+w.expiresIn<T+36e5}(w)}function Bn(w){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:T})}function Wr(){return(Wr=(0,V.Z)(function*(w){const T=w,{installationEntry:j,registrationPromise:se}=yield ee(T);return se?se.catch(console.error):Ut(T).catch(console.error),j.fid})).apply(this,arguments)}function Ns(){return(Ns=(0,V.Z)(function*(w,T=!1){const j=w;return yield Jn(j),(yield Ut(j,T)).token})).apply(this,arguments)}function Jn(w){return ui.apply(this,arguments)}function ui(){return(ui=(0,V.Z)(function*(w){const{registrationPromise:T}=yield ee(w);T&&(yield T)})).apply(this,arguments)}function Zr(w){return Pt.create("missing-app-config-values",{valueName:w})}const $r="installations",Xr=w=>{const T=w.getProvider("app").getImmediate(),j=function ss(w){if(!w||!w.options)throw Zr("App Configuration");if(!w.name)throw Zr("App Name");const T=["projectId","apiKey","appId"];for(const j of T)if(!w.options[j])throw Zr(j);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(T);return{app:T,appConfig:j,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},os=w=>{const T=w.getProvider("app").getImmediate(),j=(0,ce._getProvider)(T,$r).getImmediate();return{getId:()=>function Gr(w){return Wr.apply(this,arguments)}(j),getToken:ve=>function Nr(w){return Ns.apply(this,arguments)}(j,ve)}};(function kr(){(0,ce._registerComponent)(new we.wA($r,Xr,"PUBLIC")),(0,ce._registerComponent)(new we.wA("installations-internal",os,"PRIVATE"))})(),(0,ce.registerVersion)(Vn,"0.6.4"),(0,ce.registerVersion)(Vn,"0.6.4","esm2017");const Bi="@firebase/remote-config",dr=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ea{constructor(T,j,se,ve){this.client=T,this.storage=j,this.storageCache=se,this.logger=ve}isCachedDataFresh(T,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const se=Date.now()-j,ve=se<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${se}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ve}.`),ve}fetch(T){var j=this;return(0,V.Z)(function*(){const[se,ve]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(ve&&j.isCachedDataFresh(T.cacheMaxAgeMillis,se))return ve;T.eTag=ve&&ve.eTag;const xe=yield j.client.fetch(T),dt=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===xe.status&&dt.push(j.storage.setLastSuccessfulFetchResponse(xe)),yield Promise.all(dt),xe})()}}function as(w=navigator){return w.languages&&w.languages[0]||w.language}class Lo{constructor(T,j,se,ve,xe,dt){this.firebaseInstallations=T,this.sdkVersion=j,this.namespace=se,this.projectId=ve,this.apiKey=xe,this.appId=dt}fetch(T){var j=this;return(0,V.Z)(function*(){const[se,ve]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Qt={sdk_version:j.sdkVersion,app_instance_id:se,app_instance_id_token:ve,app_id:j.appId,language_code:as()},En={method:"POST",headers:Xt,body:JSON.stringify(Qt)},Dn=fetch(dt,En),zn=new Promise((uo,Oa)=>{T.signal.addEventListener(()=>{const gu=new Error("The operation was aborted.");gu.name="AbortError",Oa(gu)})});let gs;try{yield Promise.race([Dn,zn]),gs=yield Dn}catch(uo){let Oa="fetch-client-network";throw"AbortError"===uo?.name&&(Oa="fetch-timeout"),dr.create(Oa,{originalErrorMessage:uo?.message})}let _i=gs.status;const Ui=gs.headers.get("ETag")||void 0;let ha,pu;if(200===gs.status){let uo;try{uo=yield gs.json()}catch(Oa){throw dr.create("fetch-client-parse",{originalErrorMessage:Oa?.message})}ha=uo.entries,pu=uo.state}if("INSTANCE_STATE_UNSPECIFIED"===pu?_i=500:"NO_CHANGE"===pu?_i=304:("NO_TEMPLATE"===pu||"EMPTY_CONFIG"===pu)&&(ha={}),304!==_i&&200!==_i)throw dr.create("fetch-status",{httpStatus:_i});return{status:_i,eTag:Ui,config:ha}})()}}class Co{constructor(T,j){this.client=T,this.storage=j}fetch(T){var j=this;return(0,V.Z)(function*(){const se=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(T,se)})()}attemptFetch(T,{throttleEndTimeMillis:j,backoffCount:se}){var ve=this;return(0,V.Z)(function*(){yield function us(w,T){return new Promise((j,se)=>{const ve=Math.max(T-Date.now(),0),xe=setTimeout(j,ve);w.addEventListener(()=>{clearTimeout(xe),se(dr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,j);try{const xe=yield ve.client.fetch(T);return yield ve.storage.deleteThrottleMetadata(),xe}catch(xe){if(!function Vo(w){if(!(w instanceof ae.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}(xe))throw xe;const dt={throttleEndTimeMillis:Date.now()+(0,ae.$s)(se),backoffCount:se+1};return yield ve.storage.setThrottleMetadata(dt),ve.attemptFetch(T,dt)}})()}}class qs{constructor(T,j,se,ve,xe){this.app=T,this._client=j,this._storageCache=se,this._storage=ve,this._logger=xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fr(w,T){const j=w.target.error||void 0;return dr.create(T,{originalErrorMessage:j&&j?.message})}const qi="app_namespace_store";class ta{constructor(T,j,se,ve=function co(){return new Promise((w,T)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=se=>{T(Fr(se,"storage-open"))},j.onsuccess=se=>{w(se.target.result)},j.onupgradeneeded=se=>{0===se.oldVersion&&se.target.result.createObjectStore(qi,{keyPath:"compositeKey"})}}catch(j){T(dr.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=T,this.appName=j,this.namespace=se,this.openDbPromise=ve}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var j=this;return(0,V.Z)(function*(){const se=yield j.openDbPromise;return new Promise((ve,xe)=>{const Xt=se.transaction([qi],"readonly").objectStore(qi),Qt=j.createCompositeKey(T);try{const En=Xt.get(Qt);En.onerror=Dn=>{xe(Fr(Dn,"storage-get"))},En.onsuccess=Dn=>{const zn=Dn.target.result;ve(zn?zn.value:void 0)}}catch(En){xe(dr.create("storage-get",{originalErrorMessage:En?.message}))}})})()}set(T,j){var se=this;return(0,V.Z)(function*(){const ve=yield se.openDbPromise;return new Promise((xe,dt)=>{const Qt=ve.transaction([qi],"readwrite").objectStore(qi),En=se.createCompositeKey(T);try{const Dn=Qt.put({compositeKey:En,value:j});Dn.onerror=zn=>{dt(Fr(zn,"storage-set"))},Dn.onsuccess=()=>{xe()}}catch(Dn){dt(dr.create("storage-set",{originalErrorMessage:Dn?.message}))}})})()}delete(T){var j=this;return(0,V.Z)(function*(){const se=yield j.openDbPromise;return new Promise((ve,xe)=>{const Xt=se.transaction([qi],"readwrite").objectStore(qi),Qt=j.createCompositeKey(T);try{const En=Xt.delete(Qt);En.onerror=Dn=>{xe(Fr(Dn,"storage-delete"))},En.onsuccess=()=>{ve()}}catch(En){xe(dr.create("storage-delete",{originalErrorMessage:En?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class pr{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,V.Z)(function*(){const j=T.storage.getLastFetchStatus(),se=T.storage.getLastSuccessfulFetchTimestampMillis(),ve=T.storage.getActiveConfig(),xe=yield j;xe&&(T.lastFetchStatus=xe);const dt=yield se;dt&&(T.lastSuccessfulFetchTimestampMillis=dt);const Xt=yield ve;Xt&&(T.activeConfig=Xt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function hi(){return ho.apply(this,arguments)}function ho(){return(ho=(0,V.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}let ki,ti;!function Ys(){(0,ce._registerComponent)(new we.wA("remote-config",function w(T,{instanceIdentifier:j}){const se=T.getProvider("app").getImmediate(),ve=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw dr.create("registration-window");if(!(0,ae.hl)())throw dr.create("indexed-db-unavailable");const{projectId:xe,apiKey:dt,appId:Xt}=se.options;if(!xe)throw dr.create("registration-project-id");if(!dt)throw dr.create("registration-api-key");if(!Xt)throw dr.create("registration-app-id");const Qt=new ta(Xt,se.name,j=j||"firebase"),En=new pr(Qt),Dn=new Ce.Yd(Bi);Dn.logLevel=Ce.in.ERROR;const zn=new Lo(ve,ce.SDK_VERSION,j,xe,dt,Xt),gs=new Co(zn,Qt),_i=new ea(gs,Qt,En,Dn),Ui=new qs(se,_i,En,Qt,Dn);return function ir(w){const T=(0,ae.m9)(w);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ui),Ui},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Bi,"0.4.4"),(0,ce.registerVersion)(Bi,"0.4.4","esm2017")}();const Qs=new WeakMap,gi=new WeakMap,zr=new WeakMap,Es=new WeakMap,Pn=new WeakMap;let Ei={get(w,T,j){if(w instanceof IDBTransaction){if("done"===T)return gi.get(w);if("objectStoreNames"===T)return w.objectStoreNames||zr.get(w);if("store"===T)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return cs(w[T])},set:(w,T,j)=>(w[T]=j,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function To(w){return"function"==typeof w?function Us(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Uo(){return ti||(ti=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(Bo(this),T),cs(Qs.get(this))}:function(...T){return cs(w.apply(Bo(this),T))}:function(T,...j){const se=w.call(Bo(this),T,...j);return zr.set(se,T.sort?T.sort():[T]),cs(se)}}(w):(w instanceof IDBTransaction&&function Vs(w){if(gi.has(w))return;const T=new Promise((j,se)=>{const ve=()=>{w.removeEventListener("complete",xe),w.removeEventListener("error",dt),w.removeEventListener("abort",dt)},xe=()=>{j(),ve()},dt=()=>{se(w.error||new DOMException("AbortError","AbortError")),ve()};w.addEventListener("complete",xe),w.addEventListener("error",dt),w.addEventListener("abort",dt)});gi.set(w,T)}(w),((w,T)=>T.some(j=>w instanceof j))(w,function ya(){return ki||(ki=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Ei):w)}function cs(w){if(w instanceof IDBRequest)return function Js(w){const T=new Promise((j,se)=>{const ve=()=>{w.removeEventListener("success",xe),w.removeEventListener("error",dt)},xe=()=>{j(cs(w.result)),ve()},dt=()=>{se(w.error),ve()};w.addEventListener("success",xe),w.addEventListener("error",dt)});return T.then(j=>{j instanceof IDBCursor&&Qs.set(j,w)}).catch(()=>{}),Pn.set(T,w),T}(w);if(Es.has(w))return Es.get(w);const T=To(w);return T!==w&&(Es.set(w,T),Pn.set(T,w)),T}const Bo=w=>Pn.get(w);function Dt(w,T,{blocked:j,upgrade:se,blocking:ve,terminated:xe}={}){const dt=indexedDB.open(w,T),Xt=cs(dt);return se&&dt.addEventListener("upgradeneeded",Qt=>{se(cs(dt.result),Qt.oldVersion,Qt.newVersion,cs(dt.transaction))}),j&&dt.addEventListener("blocked",()=>j()),Xt.then(Qt=>{xe&&Qt.addEventListener("close",()=>xe()),ve&&Qt.addEventListener("versionchange",()=>ve())}).catch(()=>{}),Xt}function Xn(w,{blocked:T}={}){const j=indexedDB.deleteDatabase(w);return T&&j.addEventListener("blocked",()=>T()),cs(j).then(()=>{})}const jo=["get","getKey","getAll","getAllKeys","count"],Yi=["put","add","delete","clear"],Or=new Map;function k(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Or.get(T))return Or.get(T);const j=T.replace(/FromIndex$/,""),se=T!==j,ve=Yi.includes(j);if(!(j in(se?IDBIndex:IDBObjectStore).prototype)||!ve&&!jo.includes(j))return;const xe=function(){var dt=(0,V.Z)(function*(Xt,...Qt){const En=this.transaction(Xt,ve?"readwrite":"readonly");let Dn=En.store;return se&&(Dn=Dn.index(Qt.shift())),(yield Promise.all([Dn[j](...Qt),ve&&En.done]))[0]});return function(Qt){return dt.apply(this,arguments)}}();return Or.set(T,xe),xe}!function Lr(w){Ei=w(Ei)}(w=>({...w,get:(T,j,se)=>k(T,j)||w.get(T,j,se),has:(T,j)=>!!k(T,j)||w.has(T,j)}));const O="/firebase-messaging-sw.js",M="/firebase-cloud-messaging-push-scope",Y="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",an="google.c.a.c_id",Qn="google.c.a.c_l",Xs="google.c.a.ts",ws="google.c.a.e";var wi=(()=>{return(w=wi||(wi={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",wi;var w})();function Qi(w){const T=new Uint8Array(w);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bs(w){const j=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),se=atob(j),ve=new Uint8Array(se.length);for(let xe=0;xe<se.length;++xe)ve[xe]=se.charCodeAt(xe);return ve}const ni="fcm_token_details_db",Va="fcm_token_object_Store";function va(w){return $o.apply(this,arguments)}function $o(){return $o=(0,V.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(xe=>xe.name).includes(ni))return null;let T=null;return(yield Dt(ni,5,{upgrade:(se=(0,V.Z)(function*(ve,xe,dt,Xt){var Qt;if(xe<2||!ve.objectStoreNames.contains(Va))return;const En=Xt.objectStore(Va),Dn=yield En.index("fcmSenderId").get(w);if(yield En.clear(),Dn)if(2===xe){const zn=Dn;if(!zn.auth||!zn.p256dh||!zn.endpoint)return;T={token:zn.fcmToken,createTime:null!==(Qt=zn.createTime)&&void 0!==Qt?Qt:Date.now(),subscriptionOptions:{auth:zn.auth,p256dh:zn.p256dh,endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:"string"==typeof zn.vapidKey?zn.vapidKey:Qi(zn.vapidKey)}}}else if(3===xe){const zn=Dn;T={token:zn.fcmToken,createTime:zn.createTime,subscriptionOptions:{auth:Qi(zn.auth),p256dh:Qi(zn.p256dh),endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:Qi(zn.vapidKey)}}}else if(4===xe){const zn=Dn;T={token:zn.fcmToken,createTime:zn.createTime,subscriptionOptions:{auth:Qi(zn.auth),p256dh:Qi(zn.p256dh),endpoint:zn.endpoint,swScope:zn.swScope,vapidKey:Qi(zn.vapidKey)}}}}),function(xe,dt,Xt,Qt){return se.apply(this,arguments)})})).close(),yield Xn(ni),yield Xn("fcm_vapid_details_db"),yield Xn("undefined"),Ho(T)?T:null;var se}),$o.apply(this,arguments)}function Ho(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:T}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Fi="firebase-messaging-store";let js=null;function _a(){return js||(js=Dt("firebase-messaging-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(Fi)}})),js}function eo(w){return zo.apply(this,arguments)}function zo(){return(zo=(0,V.Z)(function*(w){const T=Ua(w),se=yield(yield _a()).transaction(Fi).objectStore(Fi).get(T);if(se)return se;{const ve=yield va(w.appConfig.senderId);if(ve)return yield fo(w,ve),ve}})).apply(this,arguments)}function fo(w,T){return So.apply(this,arguments)}function So(){return(So=(0,V.Z)(function*(w,T){const j=Ua(w),ve=(yield _a()).transaction(Fi,"readwrite");return yield ve.objectStore(Fi).put(T,j),yield ve.done,T})).apply(this,arguments)}function xi(w){return ds.apply(this,arguments)}function ds(){return(ds=(0,V.Z)(function*(w){const T=Ua(w),se=(yield _a()).transaction(Fi,"readwrite");yield se.objectStore(Fi).delete(T),yield se.done})).apply(this,arguments)}function Ua({appConfig:w}){return w.appId}const gr=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ii(w,T){return vr.apply(this,arguments)}function vr(){return(vr=(0,V.Z)(function*(w,T){const j=yield Ds(w),se=to(T),ve={method:"POST",headers:j,body:JSON.stringify(se)};let xe;try{xe=yield(yield fetch(Ea(w.appConfig),ve)).json()}catch(dt){throw gr.create("token-subscribe-failed",{errorInfo:dt?.toString()})}if(xe.error)throw gr.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw gr.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function Er(w,T){return ra.apply(this,arguments)}function ra(){return(ra=(0,V.Z)(function*(w,T){const j=yield Ds(w),se=to(T.subscriptionOptions),ve={method:"PATCH",headers:j,body:JSON.stringify(se)};let xe;try{xe=yield(yield fetch(`${Ea(w.appConfig)}/${T.token}`,ve)).json()}catch(dt){throw gr.create("token-update-failed",{errorInfo:dt?.toString()})}if(xe.error)throw gr.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw gr.create("token-update-no-token");return xe.token})).apply(this,arguments)}function Mo(w,T){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,V.Z)(function*(w,T){const se={method:"DELETE",headers:yield Ds(w)};try{const xe=yield(yield fetch(`${Ea(w.appConfig)}/${T}`,se)).json();if(xe.error)throw gr.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(ve){throw gr.create("token-unsubscribe-failed",{errorInfo:ve?.toString()})}})).apply(this,arguments)}function Ea({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function Ds(w){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,V.Z)(function*({appConfig:w,installations:T}){const j=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function to({p256dh:w,auth:T,endpoint:j,vapidKey:se}){const ve={web:{endpoint:j,auth:T,p256dh:w}};return se!==Y&&(ve.web.applicationPubKey=se),ve}const ia=6048e5;function hs(w){return $i.apply(this,arguments)}function $i(){return($i=(0,V.Z)(function*(w){const T=yield xo(w.swRegistration,w.vapidKey),j={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:T.endpoint,auth:Qi(T.getKey("auth")),p256dh:Qi(T.getKey("p256dh"))},se=yield eo(w.firebaseDependencies);if(se){if(b(se.subscriptionOptions,j))return Date.now()>=se.createTime+ia?no(w,{token:se.token,createTime:Date.now(),subscriptionOptions:j}):se.token;try{yield Mo(w.firebaseDependencies,se.token)}catch(ve){console.warn(ve)}return ro(w.firebaseDependencies,j)}return ro(w.firebaseDependencies,j)})).apply(this,arguments)}function Di(w){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,V.Z)(function*(w){const T=yield eo(w.firebaseDependencies);T&&(yield Mo(w.firebaseDependencies,T.token),yield xi(w.firebaseDependencies));const j=yield w.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function no(w,T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,V.Z)(function*(w,T){try{const j=yield Er(w.firebaseDependencies,T),se=Object.assign(Object.assign({},T),{token:j,createTime:Date.now()});return yield fo(w.firebaseDependencies,se),j}catch(j){throw yield Di(w),j}})).apply(this,arguments)}function ro(w,T){return po.apply(this,arguments)}function po(){return(po=(0,V.Z)(function*(w,T){const se={token:yield Ii(w,T),createTime:Date.now(),subscriptionOptions:T};return yield fo(w,se),se.token})).apply(this,arguments)}function xo(w,T){return ru.apply(this,arguments)}function ru(){return(ru=(0,V.Z)(function*(w,T){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bs(T)})})).apply(this,arguments)}function b(w,T){return T.vapidKey===w.vapidKey&&T.endpoint===w.endpoint&&T.auth===w.auth&&T.p256dh===w.p256dh}function U(w){const T={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function x(w,T){if(!T.notification)return;w.notification={};const j=T.notification.title;j&&(w.notification.title=j);const se=T.notification.body;se&&(w.notification.body=se);const ve=T.notification.image;ve&&(w.notification.image=ve);const xe=T.notification.icon;xe&&(w.notification.icon=xe)}(T,w),function K(w,T){!T.data||(w.data=T.data)}(T,w),function Ie(w,T){var j,se,ve,xe,dt;if(!(T.fcmOptions||null!==(j=T.notification)&&void 0!==j&&j.click_action))return;w.fcmOptions={};const Xt=null!==(ve=null===(se=T.fcmOptions)||void 0===se?void 0:se.link)&&void 0!==ve?ve:null===(xe=T.notification)||void 0===xe?void 0:xe.click_action;Xt&&(w.fcmOptions.link=Xt);const Qt=null===(dt=T.fcmOptions)||void 0===dt?void 0:dt.analytics_label;Qt&&(w.fcmOptions.analyticsLabel=Qt)}(T,w),T}function at(w){return"object"==typeof w&&!!w&&an in w}function _t(w,T){const j=[];for(let se=0;se<w.length;se++)j.push(w.charAt(se)),se<T.length&&j.push(T.charAt(se));return j.join("")}function mr(w){return gr.create("missing-app-config-values",{valueName:w})}_t("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_t("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rr{constructor(T,j,se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ve=function vn(w){if(!w||!w.options)throw mr("App Configuration Object");if(!w.name)throw mr("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:j}=w;for(const se of T)if(!j[se])throw mr(se);return{appName:w.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ve,installations:j,analyticsProvider:se}}_delete(){return Promise.resolve()}}function wr(w){return In.apply(this,arguments)}function In(){return(In=(0,V.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(O,{scope:M}),w.swRegistration.update().catch(()=>{})}catch(T){throw gr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Sr(w,T){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,V.Z)(function*(w,T){if(!T&&!w.swRegistration&&(yield wr(w)),T||!w.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw gr.create("invalid-sw-registration");w.swRegistration=T}})).apply(this,arguments)}function Yr(w,T){return fs.apply(this,arguments)}function fs(){return(fs=(0,V.Z)(function*(w,T){T?w.vapidKey=T:w.vapidKey||(w.vapidKey=Y)})).apply(this,arguments)}function Ir(){return(Ir=(0,V.Z)(function*(w,T){if(!navigator)throw gr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gr.create("permission-blocked");return yield Yr(w,T?.vapidKey),yield Sr(w,T?.serviceWorkerRegistration),hs(w)})).apply(this,arguments)}function Vr(w,T,j){return go.apply(this,arguments)}function go(){return(go=(0,V.Z)(function*(w,T,j){const se=en(T);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(se,{message_id:j[an],message_name:j[Qn],message_time:j[Xs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function en(w){switch(w){case wi.NOTIFICATION_CLICKED:return"notification_open";case wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sa(){return(sa=(0,V.Z)(function*(w,T){const j=T.data;if(!j.isFirebaseMessaging)return;w.onMessageHandler&&j.messageType===wi.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(U(j)):w.onMessageHandler.next(U(j)));const se=j.data;at(se)&&"1"===se[ws]&&(yield Vr(w,j.messageType,se))})).apply(this,arguments)}const Kt="@firebase/messaging",Rt=w=>{const T=new rr(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function pn(w,T){return sa.apply(this,arguments)}(T,j)),T},ri=w=>{const T=w.getProvider("messaging").getImmediate();return{getToken:se=>function Mt(w,T){return Ir.apply(this,arguments)}(T,se)}};function Mu(){return wa.apply(this,arguments)}function wa(){return(wa=(0,V.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Su(){(0,ce._registerComponent)(new we.wA("messaging",Rt,"PUBLIC")),(0,ce._registerComponent)(new we.wA("messaging-internal",ri,"PRIVATE")),(0,ce.registerVersion)(Kt,"0.12.4"),(0,ce.registerVersion)(Kt,"0.12.4","esm2017")}();const kn="analytics",bs="firebase_id",_n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ts="https://www.googletagmanager.com/gtag/js",Sn=new Ce.Yd("@firebase/analytics"),sr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Zt(w){if(!w.startsWith(Ts)){const T=sr.create("invalid-gtag-resource",{gtagURL:w});return Sn.warn(T.message),""}return w}function Ji(w){return Promise.all(w.map(T=>T.catch(j=>j)))}function Ia(w,T){const j=function Zo(w,T){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(w,T)),j}("firebase-js-sdk-policy",{createScriptURL:Zt}),se=document.createElement("script"),ve=`${Ts}?l=${w}&id=${T}`;se.src=j?j?.createScriptURL(ve):ve,se.async=!0,document.head.appendChild(se)}function Ro(w,T,j,se,ve,xe){return Da.apply(this,arguments)}function Da(){return(Da=(0,V.Z)(function*(w,T,j,se,ve,xe){const dt=se[ve];try{if(dt)yield T[dt];else{const Qt=(yield Ji(j)).find(En=>En.measurementId===ve);Qt&&(yield T[Qt.appId])}}catch(Xt){Sn.error(Xt)}w("config",ve,xe)})).apply(this,arguments)}function xu(w,T,j,se,ve){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,V.Z)(function*(w,T,j,se,ve){try{let xe=[];if(ve&&ve.send_to){let dt=ve.send_to;Array.isArray(dt)||(dt=[dt]);const Xt=yield Ji(j);for(const Qt of dt){const En=Xt.find(zn=>zn.measurementId===Qt),Dn=En&&T[En.appId];if(!Dn){xe=[];break}xe.push(Dn)}}0===xe.length&&(xe=Object.values(T)),yield Promise.all(xe),w("event",se,ve||{})}catch(xe){Sn.error(xe)}})).apply(this,arguments)}function nl(w){const T=window.document.getElementsByTagName("script");for(const j of Object.values(T))if(j.src&&j.src.includes(Ts)&&j.src.includes(w))return j;return null}const si=new class qo{constructor(T={},j=1e3){this.throttleMetadata=T,this.intervalMillis=j}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,j){this.throttleMetadata[T]=j}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ye(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function io(w){return so.apply(this,arguments)}function so(){return(so=(0,V.Z)(function*(w){var T;const{appId:j,apiKey:se}=w,ve={method:"GET",headers:Ye(se)},xe=_n.replace("{app-id}",j),dt=yield fetch(xe,ve);if(200!==dt.status&&304!==dt.status){let Xt="";try{const Qt=yield dt.json();null!==(T=Qt.error)&&void 0!==T&&T.message&&(Xt=Qt.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:dt.status,responseMessage:Xt})}return dt.json()})).apply(this,arguments)}function Ga(w){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,V.Z)(function*(w,T=si,j){const{appId:se,apiKey:ve,measurementId:xe}=w.options;if(!se)throw sr.create("no-app-id");if(!ve){if(xe)return{measurementId:xe,appId:se};throw sr.create("no-api-key")}const dt=T.getThrottleMetadata(se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xt=new su;return setTimeout((0,V.Z)(function*(){Xt.abort()}),void 0!==j?j:6e4),Li({appId:se,apiKey:ve,measurementId:xe},dt,Xt,T)})).apply(this,arguments)}function Li(w,T,j){return iu.apply(this,arguments)}function iu(){return(iu=(0,V.Z)(function*(w,{throttleEndTimeMillis:T,backoffCount:j},se,ve=si){var xe;const{appId:dt,measurementId:Xt}=w;try{yield $s(se,T)}catch(Qt){if(Xt)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xt} provided in the "measurementId" field in the local Firebase config. [${Qt?.message}]`),{appId:dt,measurementId:Xt};throw Qt}try{const Qt=yield io(w);return ve.deleteThrottleMetadata(dt),Qt}catch(Qt){const En=Qt;if(!ba(En)){if(ve.deleteThrottleMetadata(dt),Xt)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xt} provided in the "measurementId" field in the local Firebase config. [${En?.message}]`),{appId:dt,measurementId:Xt};throw Qt}const Dn=503===Number(null===(xe=En?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,ae.$s)(j,ve.intervalMillis,30):(0,ae.$s)(j,ve.intervalMillis),zn={throttleEndTimeMillis:Date.now()+Dn,backoffCount:j+1};return ve.setThrottleMetadata(dt,zn),Sn.debug(`Calling attemptFetch again in ${Dn} millis`),Li(w,zn,se,ve)}})).apply(this,arguments)}function $s(w,T){return new Promise((j,se)=>{const ve=Math.max(T-Date.now(),0),xe=setTimeout(j,ve);w.addEventListener(()=>{clearTimeout(xe),se(sr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ba(w){if(!(w instanceof ae.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}class su{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Ou,lt;function Xi(){return(Xi=(0,V.Z)(function*(w,T,j,se,ve){if(ve&&ve.global)w("event",j,se);else{const xe=yield T;w("event",j,Object.assign(Object.assign({},se),{send_to:xe}))}})).apply(this,arguments)}function Gt(w){lt=w}function Gn(w){Ou=w}function cn(){return hr.apply(this,arguments)}function hr(){return(hr=(0,V.Z)(function*(){if(!(0,ae.hl)())return Sn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(w){return Sn.warn(sr.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function fi(){return(fi=(0,V.Z)(function*(w,T,j,se,ve,xe,dt){var Xt;const Qt=Ga(w);Qt.then(_i=>{j[_i.measurementId]=_i.appId,w.options.measurementId&&_i.measurementId!==w.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${_i.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_i=>Sn.error(_i)),T.push(Qt);const En=cn().then(_i=>{if(_i)return se.getId()}),[Dn,zn]=yield Promise.all([Qt,En]);nl(xe)||Ia(xe,Dn.measurementId),lt&&(ve("consent","default",lt),Gt(void 0)),ve("js",new Date);const gs=null!==(Xt=dt?.config)&&void 0!==Xt?Xt:{};return gs.origin="firebase",gs.update=!0,null!=zn&&(gs[bs]=zn),ve("config",Dn.measurementId,gs),Ou&&(ve("set",Ou),Gn(void 0)),Dn.measurementId})).apply(this,arguments)}class oo{constructor(T){this.app=T}_delete(){return delete Qr[this.app.options.appId],Promise.resolve()}}let Qr={},Pu=[];const Ta={};let ou,Ss,Aa="dataLayer",au=!1;function Fl(w,T,j){!function Nu(){const w=[];if((0,ae.ru)()&&w.push("This is a browser extension environment."),(0,ae.zI)()||w.push("Cookies are not available."),w.length>0){const T=w.map((se,ve)=>`(${ve+1}) ${se}`).join(" "),j=sr.create("invalid-analytics-context",{errorInfo:T});Sn.warn(j.message)}}();const se=w.options.appId;if(!se)throw sr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw sr.create("no-api-key");Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qr[se])throw sr.create("already-exists",{id:se});if(!au){!function Mr(w){let T=[];Array.isArray(window[w])?T=window[w]:window[w]=T}(Aa);const{wrappedGtag:xe,gtagCore:dt}=function ps(w,T,j,se,ve){let xe=function(...dt){window[se].push(arguments)};return window[ve]&&"function"==typeof window[ve]&&(xe=window[ve]),window[ve]=function Ru(w,T,j,se){function xe(){return(xe=(0,V.Z)(function*(dt,...Xt){try{if("event"===dt){const[Qt,En]=Xt;yield xu(w,T,j,Qt,En)}else if("config"===dt){const[Qt,En]=Xt;yield Ro(w,T,j,se,Qt,En)}else if("consent"===dt){const[Qt]=Xt;w("consent","update",Qt)}else if("get"===dt){const[Qt,En,Dn]=Xt;w("get",Qt,En,Dn)}else if("set"===dt){const[Qt]=Xt;w("set",Qt)}else w(dt,...Xt)}catch(Qt){Sn.error(Qt)}})).apply(this,arguments)}return function ve(dt){return xe.apply(this,arguments)}}(xe,w,T,j),{gtagCore:xe,wrappedGtag:window[ve]}}(Qr,Pu,Ta,Aa,"gtag");Ss=xe,ou=dt,au=!0}return Qr[se]=function As(w,T,j,se,ve,xe,dt){return fi.apply(this,arguments)}(w,Pu,Ta,T,ou,Aa,j),new oo(w)}function Hi(){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,V.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const ol="@firebase/analytics";!function bi(){(0,ce._registerComponent)(new we.wA(kn,(T,{options:j})=>Fl(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,ce._registerComponent)(new we.wA("analytics-internal",function w(T){try{const j=T.getProvider(kn).getImmediate();return{logEvent:(se,ve,xe)=>function Oo(w,T,j,se){w=(0,ae.m9)(w),function kl(w,T,j,se,ve){return Xi.apply(this,arguments)}(Ss,Qr[w.app.options.appId],T,j,se).catch(ve=>Sn.error(ve))}(j,se,ve,xe)}}catch(j){throw sr.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,ce.registerVersion)(ol,"0.10.0"),(0,ce.registerVersion)(ol,"0.10.0","esm2017")}();var lu=R(4408),ai=R(7565);const ku=new class Ma extends ai.v{}(class mo extends lu.o{constructor(T,j){super(T,j),this.scheduler=T,this.work=j}schedule(T,j=0){return j>0?super.schedule(T,j):(this.delay=j,this.state=T,this.scheduler.flush(this),this)}execute(T,j){return j>0||this.closed?super.execute(T,j):this._execute(T,j)}requestAsyncId(T,j,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(T,j,se):(T.flush(this),0)}});var al=R(4986),Ul=R(8505),Yo=R(9468),Qo=R(5363);const xa=new d.GfV("7.6.1"),ao="__angularfire_symbol__analyticsIsSupportedValue",yo="__angularfire_symbol__analyticsIsSupported",la="__angularfire_symbol__remoteConfigIsSupportedValue",Jo="__angularfire_symbol__remoteConfigIsSupported",cu="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function ul(w,T,j){if(T){if(1===T.length)return T[0];const xe=T.filter(dt=>dt.app===j);if(1===xe.length)return xe[0]}return j.container.getProvider(w).getImmediate({optional:!0})}globalThis[yo]||(globalThis[yo]=Hi().then(w=>globalThis[ao]=w).catch(()=>globalThis[ao]=!1)),globalThis[Ka]||(globalThis[Ka]=Mu().then(w=>globalThis[cu]=w).catch(()=>globalThis[cu]=!1)),globalThis[Jo]||(globalThis[Jo]=hi().then(w=>globalThis[la]=w).catch(()=>globalThis[la]=!1));const hu=(w,T)=>{const j=T?[T]:(0,F.C6)(),se=[];return j.forEach(ve=>{ve.container.getProvider(w).instances.forEach(dt=>{se.includes(dt)||se.push(dt)})}),se};function fu(){}class ll{constructor(T,j=ku){this.zone=T,this.delegate=j}now(){return this.delegate.now()}schedule(T,j,se){const ve=this.zone;return this.delegate.schedule(function(dt){ve.runGuarded(()=>{T.apply(this,[dt])})},j,se)}}class Vu{constructor(T){this.zone=T,this.task=null}call(T,j){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fu,{},fu,fu)),j.pipe((0,Ul.b)({next:se,complete:se,error:se})).subscribe(T).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let td=(()=>{class w{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new ll(Zone.current)),this.insideAngular=j.run(()=>new ll(Zone.current,al.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(j){return new(j||w)(d.LFG(d.R0b))},w.\u0275prov=d.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ca(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function cl(w){return ca(),function qr(w){return function(j){return(j=j.lift(new Vu(w.ngZone))).pipe((0,Yo.R)(w.outsideAngular),(0,Qo.Q)(w.insideAngular))}}(ca())(w)}},1389:(Bt,Fe,R)=>{R.d(Fe,{$:()=>O,A:()=>ue,D:()=>ze,I:()=>jr,J:()=>Xr,L:()=>di,N:()=>_e,P:()=>As,Q:()=>ta,R:()=>_,U:()=>ji,V:()=>hi,W:()=>ho,X:()=>ls,Y:()=>ya,Z:()=>Uo,_:()=>Pn,a:()=>oa,a0:()=>Y,a1:()=>an,a2:()=>mi,a3:()=>Va,a4:()=>$o,a5:()=>Go,a6:()=>Fi,a7:()=>_a,a8:()=>zo,a9:()=>So,aA:()=>be,aB:()=>la,aC:()=>q,aD:()=>De,aE:()=>Yo,aF:()=>Vl,aG:()=>oi,aH:()=>Ar,aL:()=>Ko,aO:()=>ki,aa:()=>xi,ab:()=>Ua,ac:()=>na,ad:()=>Er,ae:()=>Mo,af:()=>Ea,ai:()=>ia,aj:()=>$i,ak:()=>Di,an:()=>Us,ao:()=>x,aq:()=>fs,ar:()=>Kt,as:()=>gt,at:()=>oe,au:()=>ht,av:()=>ge,aw:()=>gs,ax:()=>du,ay:()=>de,az:()=>st,b:()=>tl,c:()=>Ss,d:()=>Fl,e:()=>Vi,f:()=>ol,g:()=>Ma,h:()=>lu,i:()=>rl,j:()=>al,k:()=>uo,l:()=>W,m:()=>Rf,p:()=>te,r:()=>ye,s:()=>A,u:()=>cn});var d=R(5861),F=R(2090),V=R(6881),ce=R(7582),ae=R(1877),we=R(4859);const te={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ze=function me(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},We=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new ae.Yd("@firebase/auth");function mt(v,...h){Me.logLevel<=ae.in.ERROR&&Me.error(`Auth (${V.SDK_VERSION}): ${v}`,...h)}function ge(v,...h){throw Ve(v,...h)}function st(v,...h){return Ve(v,...h)}function ot(v,h,g){const I=Object.assign(Object.assign({},We()),{[h]:g});return new F.LL("auth","Firebase",I).create(h,{appName:v.name})}function Et(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&ge(v,"argument-error"),ot(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(v,...h){if("string"!=typeof v){const g=h[0],I=[...h.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return wt.create(v,...h)}function be(v,h,...g){if(!v)throw Ve(h,...g)}function Re(v){const h="INTERNAL ASSERTION FAILED: "+v;throw mt(h),new Error(h)}function gt(v,h){v||Re(h)}function ft(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function jt(){return"http:"===Vt()||"https:"===Vt()}function Vt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class je{constructor(h,g){this.shortDelay=h,this.longDelay=g,gt(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Vn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Je(v,h){gt(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Ge{static initialize(h,g,I){this.fetchImpl=h,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yt=new je(3e4,6e4);function bt(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function At(v,h,g,I){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.Z)(function*(v,h,g,I,$={}){return Pt(v,$,(0,d.Z)(function*(){let X={},ke={};I&&("GET"===h?ke=I:X={body:JSON.stringify(I)});const ct=(0,F.xO)(Object.assign({key:v.config.apiKey},ke)).slice(1),Ht=yield v._getAdditionalHeaders();return Ht["Content-Type"]="application/json",v.languageCode&&(Ht["X-Firebase-Locale"]=v.languageCode),Ge.fetch()(Rn(v,v.config.apiHost,g,ct),Object.assign({method:h,headers:Ht,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Pt(v,h,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(v,h,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},Xe),h);try{const $=new lr(v),X=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const ke=yield X.json();if("needConfirmation"in ke)throw qt(v,"account-exists-with-different-credential",ke);if(X.ok&&!("errorMessage"in ke))return ke;{const ct=X.ok?ke.errorMessage:ke.error.message,[Ht,rn]=ct.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ht)throw qt(v,"credential-already-in-use",ke);if("EMAIL_EXISTS"===Ht)throw qt(v,"email-already-in-use",ke);if("USER_DISABLED"===Ht)throw qt(v,"user-disabled",ke);const Mn=I[Ht]||Ht.toLowerCase().replace(/[_\s]+/g,"-");if(rn)throw ot(v,Mn,rn);ge(v,Mn)}}catch($){if($ instanceof F.ZR)throw $;ge(v,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function ln(v,h,g,I){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(v,h,g,I,$={}){const X=yield At(v,h,g,I,$);return"mfaPendingCredential"in X&&ge(v,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function Rn(v,h,g,I){const $=`${h}${g}?${I}`;return v.config.emulator?Je(v.config,$):`${v.config.apiScheme}://${$}`}class lr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(st(this.auth,"network-request-failed")),yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qt(v,h,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const $=st(v,h,I);return $.customData._tokenResponse=g,$}function Cn(){return(Cn=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function jn(v,h){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function _r(v,h){return xt.apply(this,arguments)}function xt(){return(xt=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function bn(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Pr(){return(Pr=(0,d.Z)(function*(v,h=!1){const g=(0,F.m9)(v),I=yield g.getIdToken(h),$=Zn(I);be($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const X="object"==typeof $.firebase?$.firebase:void 0,ke=X?.sign_in_provider;return{claims:$,token:I,authTime:bn(Un($.auth_time)),issuedAtTime:bn(Un($.iat)),expirationTime:bn(Un($.exp)),signInProvider:ke||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function Un(v){return 1e3*Number(v)}function Zn(v){const[h,g,I]=v.split(".");if(void 0===h||void 0===g||void 0===I)return mt("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,F.tV)(g);return $?JSON.parse($):(mt("Failed to decode base64 JWT payload"),null)}catch($){return mt("Caught error parsing JWT payload as JSON",$?.toString()),null}}function pe(v,h){return fe.apply(this,arguments)}function fe(){return(fe=(0,d.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(I){throw I instanceof F.ZR&&nt(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function nt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class ut{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(h);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),I)}iteration(){var h=this;return(0,d.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class tn{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hn(v){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(v){var h;const g=v.auth,I=yield v.getIdToken(),$=yield pe(v,_r(g,{idToken:I}));be($?.users.length,g,"internal-error");const X=$.users[0];v._notifyReloadListener(X);const ke=null!==(h=X.providerUserInfo)&&void 0!==h&&h.length?er(X.providerUserInfo):[],ct=fn(v.providerData,ke),Mn=!!v.isAnonymous&&!(v.email&&X.passwordHash||ct?.length),yr={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:ct,metadata:new tn(X.createdAt,X.lastLoginAt),isAnonymous:Mn};Object.assign(v,yr)})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(v){const h=(0,F.m9)(v);yield hn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function fn(v,h){return[...v.filter(I=>!h.some($=>$.providerId===I.providerId)),...h]}function er(v){return v.map(h=>{var{providerId:g}=h,I=(0,ce._T)(h,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Yt(){return(Yt=(0,d.Z)(function*(v,h){const g=yield Pt(v,{},(0,d.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:$,apiKey:X}=v.config,ke=Rn(v,$,"/v1/token",`key=${X}`),ct=yield v._getAdditionalHeaders();return ct["Content-Type"]="application/x-www-form-urlencoded",Ge.fetch()(ke,{method:"POST",headers:ct,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){be(h.idToken,"internal-error"),be(typeof h.idToken<"u","internal-error"),be(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rt(v){const h=Zn(v);return be(h,"internal-error"),be(typeof h.exp<"u","internal-error"),be(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var I=this;return(0,d.Z)(function*(){return be(!I.accessToken||I.refreshToken,h,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(h,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var I=this;return(0,d.Z)(function*(){const{accessToken:$,refreshToken:X,expiresIn:ke}=yield function Nt(v,h){return Yt.apply(this,arguments)}(h,g);I.updateTokensAndExpiration($,X,Number(ke))})()}updateTokensAndExpiration(h,g,I){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(h,g){const{refreshToken:I,accessToken:$,expirationTime:X}=g,ke=new Jt;return I&&(be("string"==typeof I,"internal-error",{appName:h}),ke.refreshToken=I),$&&(be("string"==typeof $,"internal-error",{appName:h}),ke.accessToken=$),X&&(be("number"==typeof X,"internal-error",{appName:h}),ke.expirationTime=X),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Jt,this.toJSON())}_performRefresh(){return Re("not implemented")}}function On(v,h){be("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class qn{constructor(h){var{uid:g,auth:I,stsTokenManager:$}=h,X=(0,ce._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ut(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new tn(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,d.Z)(function*(){const I=yield pe(g,g.stsTokenManager.getToken(g.auth,h));return be(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(h){return function ar(v){return Pr.apply(this,arguments)}(this,h)}reload(){return function Ot(v){return Nn.apply(this,arguments)}(this)}_assign(h){this!==h&&(be(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new qn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var I=this;return(0,d.Z)(function*(){let $=!1;h.idToken&&h.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(h),$=!0),g&&(yield hn(I)),yield I.auth._persistUserIfCurrent(I),$&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var h=this;return(0,d.Z)(function*(){const g=yield h.getIdToken();return yield pe(h,function on(v,h){return Cn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var I,$,X,ke,ct,Ht,rn,Mn;const yr=null!==(I=g.displayName)&&void 0!==I?I:void 0,vo=null!==($=g.email)&&void 0!==$?$:void 0,Hs=null!==(X=g.phoneNumber)&&void 0!==X?X:void 0,$l=null!==(ke=g.photoURL)&&void 0!==ke?ke:void 0,Ms=null!==(ct=g.tenantId)&&void 0!==ct?ct:void 0,Hl=null!==(Ht=g._redirectEventId)&&void 0!==Ht?Ht:void 0,mu=null!==(rn=g.createdAt)&&void 0!==rn?rn:void 0,od=null!==(Mn=g.lastLoginAt)&&void 0!==Mn?Mn:void 0,{uid:Xo,emailVerified:Sc,isAnonymous:ju,providerData:qa,stsTokenManager:ad}=g;be(Xo&&ad,h,"internal-error");const ur=Jt.fromJSON(this.name,ad);be("string"==typeof Xo,h,"internal-error"),On(yr,h.name),On(vo,h.name),be("boolean"==typeof Sc,h,"internal-error"),be("boolean"==typeof ju,h,"internal-error"),On(Hs,h.name),On($l,h.name),On(Ms,h.name),On(Hl,h.name),On(mu,h.name),On(od,h.name);const ud=new qn({uid:Xo,auth:h,email:vo,emailVerified:Sc,displayName:yr,isAnonymous:ju,photoURL:$l,phoneNumber:Hs,tenantId:Ms,stsTokenManager:ur,createdAt:mu,lastLoginAt:od});return qa&&Array.isArray(qa)&&(ud.providerData=qa.map(dh=>Object.assign({},dh))),Hl&&(ud._redirectEventId=Hl),ud}static _fromIdTokenResponse(h,g,I=!1){return(0,d.Z)(function*(){const $=new Jt;$.updateFromServerResponse(g);const X=new qn({uid:g.localId,auth:h,stsTokenManager:$,isAnonymous:I});return yield hn(X),X})()}}const et=new Map;function q(v){gt(v instanceof Function,"Expected a class definition");let h=et.get(v);return h?(gt(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,et.set(v,h),h)}const _e=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,I){var $=this;return(0,d.Z)(function*(){$.storage[g]=I})()}_get(g){var I=this;return(0,d.Z)(function*(){const $=I.storage[g];return void 0===$?null:$})()}_remove(g){var I=this;return(0,d.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function De(v,h,g){return`firebase:${v}:${h}:${g}`}class ee{constructor(h,g,I){this.persistence=h,this.auth=g,this.userKey=I;const{config:$,name:X}=this.auth;this.fullUserKey=De(this.userKey,$.apiKey,X),this.fullPersistenceKey=De("persistence",$.apiKey,X),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,d.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?qn._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,d.Z)(function*(){if(g.persistence===h)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,I="authUser"){return(0,d.Z)(function*(){if(!g.length)return new ee(q(_e),h,I);const $=(yield Promise.all(g.map(function(){var rn=(0,d.Z)(function*(Mn){if(yield Mn._isAvailable())return Mn});return function(Mn){return rn.apply(this,arguments)}}()))).filter(rn=>rn);let X=$[0]||q(_e);const ke=De(I,h.config.apiKey,h.name);let ct=null;for(const rn of g)try{const Mn=yield rn._get(ke);if(Mn){const yr=qn._fromJSON(h,Mn);rn!==X&&(ct=yr),X=rn;break}}catch{}const Ht=$.filter(rn=>rn._shouldAllowMigration);return X._shouldAllowMigration&&Ht.length?(X=Ht[0],ct&&(yield X._set(ke,ct.toJSON())),yield Promise.all(g.map(function(){var rn=(0,d.Z)(function*(Mn){if(Mn!==X)try{yield Mn._remove(ke)}catch{}});return function(Mn){return rn.apply(this,arguments)}}())),new ee(X,h,I)):new ee(X,h,I)})()}}function ie(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Te(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Z(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ft(h))return"Blackberry";if(sn(h))return"Webos";if(z(h))return"Safari";if((h.includes("chrome/")||G(h))&&!h.includes("edge/"))return"Chrome";if(ht(h))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Z(v=(0,F.z$)()){return/firefox\//i.test(v)}function z(v=(0,F.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function G(v=(0,F.z$)()){return/crios\//i.test(v)}function Te(v=(0,F.z$)()){return/iemobile/i.test(v)}function ht(v=(0,F.z$)()){return/android/i.test(v)}function Ft(v=(0,F.z$)()){return/blackberry/i.test(v)}function sn(v=(0,F.z$)()){return/webos/i.test(v)}function oe(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function de(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Ke(v=(0,F.z$)()){return oe(v)||ht(v)||sn(v)||Ft(v)||/windows phone/i.test(v)||Te(v)}function yn(v,h=[]){let g;switch(v){case"Browser":g=ie((0,F.z$)());break;case"Worker":g=`${ie((0,F.z$)())}-${v}`;break;default:g=v}const I=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${V.SDK_VERSION}/${I}`}function Le(){return(Le=(0,d.Z)(function*(v){return(yield At(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function St(v,h){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(v,h){return At(v,"GET","/v2/recaptchaConfig",bt(v,h))})).apply(this,arguments)}function wn(v){return void 0!==v&&void 0!==v.getResponse}function Ln(v){return void 0!==v&&void 0!==v.enterprise}class Yn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Bn(v){return new Promise((h,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=h,I.onerror=$=>{const X=st("internal-error");X.customData=$,g(X)},I.type="text/javascript",I.charset="UTF-8",function Tr(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(I)})}function Rr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Ns{constructor(h){this.type="recaptcha-enterprise",this.auth=Ar(h)}verify(h="verify",g=!1){var I=this;return(0,d.Z)(function*(){function X(){return X=(0,d.Z)(function*(ct){if(!g){if(null==ct.tenantId&&null!=ct._agentRecaptchaConfig)return ct._agentRecaptchaConfig.siteKey;if(null!=ct.tenantId&&void 0!==ct._tenantRecaptchaConfigs[ct.tenantId])return ct._tenantRecaptchaConfigs[ct.tenantId].siteKey}return new Promise(function(){var Ht=(0,d.Z)(function*(rn,Mn){St(ct,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yr=>{if(void 0!==yr.recaptchaKey){const vo=new Yn(yr);return null==ct.tenantId?ct._agentRecaptchaConfig=vo:ct._tenantRecaptchaConfigs[ct.tenantId]=vo,rn(vo.siteKey)}Mn(new Error("recaptcha Enterprise site key undefined"))}).catch(yr=>{Mn(yr)})});return function(rn,Mn){return Ht.apply(this,arguments)}}())}),X.apply(this,arguments)}function ke(ct,Ht,rn){const Mn=window.grecaptcha;Ln(Mn)?Mn.enterprise.ready(()=>{Mn.enterprise.execute(ct,{action:h}).then(yr=>{Ht(yr)}).catch(()=>{Ht("NO_RECAPTCHA")})}):rn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ct,Ht)=>{(function $(ct){return X.apply(this,arguments)})(I.auth).then(rn=>{if(!g&&Ln(window.grecaptcha))ke(rn,ct,Ht);else{if(typeof window>"u")return void Ht(new Error("RecaptchaVerifier is only supported in browser"));Bn("https://www.google.com/recaptcha/enterprise.js?render="+rn).then(()=>{ke(rn,ct,Ht)}).catch(Mn=>{Ht(Mn)})}}).catch(rn=>{Ht(rn)})})})()}}function Jn(v,h,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(v,h,g,I=!1){const $=new Ns(v);let X;try{X=yield $.verify(g)}catch{X=yield $.verify(g,!0)}const ke=Object.assign({},h);return Object.assign(ke,I?{captchaResp:X}:{captchaResponse:X}),Object.assign(ke,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ke,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ke})).apply(this,arguments)}class ks{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const I=X=>new Promise((ke,ct)=>{try{ke(h(X))}catch(Ht){ct(Ht)}});I.onAbort=g,this.queue.push(I);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,d.Z)(function*(){if(g.auth.currentUser===h)return;const I=[];try{for(const $ of g.queue)yield $(h),$.onAbort&&I.push($.onAbort)}catch($){I.reverse();for(const X of I)try{X()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class Ni{constructor(h,g,I,$){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(h,g){var I=this;return g&&(this._popupRedirectResolver=q(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var $,X;if(!I._deleted&&(I.persistenceManager=yield ee.create(I,h),!I._deleted)){if(null!==($=I._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(X=I.currentUser)||void 0===X?void 0:X.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,d.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,d.Z)(function*(){var I;const $=yield g.assertedPersistence.getCurrentUser();let X=$,ke=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ct=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,Ht=X?._redirectEventId,rn=yield g.tryRedirectSignIn(h);(!ct||ct===Ht)&&rn?.user&&(X=rn.user,ke=!0)}if(!X)return g.directlySetCurrentUser(null);if(!X._redirectEventId){if(ke)try{yield g.beforeStateQueue.runMiddleware(X)}catch(ct){X=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ct))}return X?g.reloadAndSetCurrentUserOrClear(X):g.directlySetCurrentUser(null)}return be(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===X._redirectEventId?g.directlySetCurrentUser(X):g.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(h){var g=this;return(0,d.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,d.Z)(function*(){try{yield hn(h)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function $e(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,d.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,d.Z)(function*(){const I=h?(0,F.m9)(h):null;return I&&be(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(h,g=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return h&&be(I.tenantId===h.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(h)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(h),I.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,d.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(q(h))}))}initializeRecaptchaConfig(){var h=this;return(0,d.Z)(function*(){const g=yield St(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Yn(g);null==h.tenantId?h._agentRecaptchaConfig=I:h._tenantRecaptchaConfigs[h.tenantId]=I,I.emailPasswordEnabled&&new Ns(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new F.LL("auth","Firebase",h())}onAuthStateChanged(h,g,I){return this.registerStateListener(this.authStateSubscription,h,g,I)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,I){return this.registerStateListener(this.idTokenSubscription,h,g,I)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var I=this;return(0,d.Z)(function*(){const $=yield I.getOrInitRedirectPersistenceManager(g);return null===h?$.removeCurrentUser():$.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const I=h&&q(h)||g._popupRedirectResolver;be(I,g,"argument-error"),g.redirectPersistenceManager=yield ee.create(g,[q(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,d.Z)(function*(){var I,$;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===h?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,d.Z)(function*(){if(h===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,I,$){if(this._deleted)return()=>{};const X="function"==typeof g?g:g.next.bind(g),ke=this._isInitialized?Promise.resolve():this._initializationPromise;return be(ke,this,"internal-error"),ke.then(()=>X(this.currentUser)),"function"==typeof g?h.addObserver(g,I,$):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=yn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,d.Z)(function*(){var g;const I={"X-Client-Version":h.clientVersion};h.app.options.appId&&(I["X-Firebase-gmpid"]=h.app.options.appId);const $=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();$&&(I["X-Firebase-Client"]=$);const X=yield h._getAppCheckToken();return X&&(I["X-Firebase-AppCheck"]=X),I})()}_getAppCheckToken(){var h=this;return(0,d.Z)(function*(){var g;const I=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function Ct(v,...h){Me.logLevel<=ae.in.WARN&&Me.warn(`Auth (${V.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Ar(v){return(0,F.m9)(v)}class Ki{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jr(v,h,g){const I=Ar(v);be(I._canInitEmulator,I,"emulator-config-failed"),be(/^https?:\/\//.test(h),I,"invalid-emulator-scheme");const $=!!g?.disableWarnings,X=ss(h),{host:ke,port:ct}=function Zr(v){const h=ss(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(I);if($){const X=$[1];return{host:X,port:$r(I.substr(X.length+1))}}{const[X,ke]=I.split(":");return{host:X,port:$r(ke)}}}(h);I.config.emulator={url:`${X}//${ke}${null===ct?"":`:${ct}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ke,port:ct,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Ks(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ss(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function $r(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Xr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return Re("not implemented")}_getIdTokenResponse(h){return Re("not implemented")}_linkToIdToken(h,g){return Re("not implemented")}_getReauthenticationResolver(h){return Re("not implemented")}}function os(v,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:resetPassword",bt(v,h))})).apply(this,arguments)}function Bi(v,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wo(v,h){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:update",bt(v,h))})).apply(this,arguments)}function ma(v,h){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithPassword",bt(v,h))})).apply(this,arguments)}function Io(v,h){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:sendOobCode",bt(v,h))})).apply(this,arguments)}function lo(v,h){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(v,h){return Io(v,h)})).apply(this,arguments)}function Ae(v,h){return He.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(v,h){return Io(v,h)})).apply(this,arguments)}function vt(v,h){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(v,h){return Io(v,h)})).apply(this,arguments)}function An(v,h){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(v,h){return Io(v,h)})).apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithEmailLink",bt(v,h))})).apply(this,arguments)}function li(){return(li=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithEmailLink",bt(v,h))})).apply(this,arguments)}class pi extends Xr{constructor(h,g,I,$=null){super("password",I),this._email=h,this._password=g,this._tenantId=$}static _fromEmailAndPassword(h,g){return new pi(h,g,"password")}static _fromEmailAndCode(h,g,I=null){return new pi(h,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,d.Z)(function*(){var I;switch(g.signInMethod){case"password":const $={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=h._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const X=yield Jn(h,$,"signInWithPassword");return ma(h,X)}return ma(h,$).catch(function(){var X=(0,d.Z)(function*(ke){if("auth/missing-recaptcha-token"===ke.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ct=yield Jn(h,$,"signInWithPassword");return ma(h,ct)}return Promise.reject(ke)});return function(ke){return X.apply(this,arguments)}}());case"emailLink":return function tr(v,h){return Fn.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:ge(h,"internal-error")}})()}_linkToIdToken(h,g){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return Bi(h,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ei(v,h){return li.apply(this,arguments)}(h,{idToken:g,email:I._email,oobCode:I._password});default:ge(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function cr(v,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithIdp",bt(v,h))})).apply(this,arguments)}class di extends Xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new di(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):ge("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:$}=g,X=(0,ce._T)(g,["providerId","signInMethod"]);if(!I||!$)return null;const ke=new di(I,$);return ke.idToken=X.idToken||void 0,ke.accessToken=X.accessToken||void 0,ke.secret=X.secret,ke.nonce=X.nonce,ke.pendingToken=X.pendingToken||null,ke}_getIdTokenResponse(h){return cr(h,this.buildRequest())}_linkToIdToken(h,g){const I=this.buildRequest();return I.idToken=g,cr(h,I)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,cr(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,F.xO)(g)}return h}}function ea(v,h){return as.apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:sendVerificationCode",bt(v,h))})).apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithPhoneNumber",bt(v,h))})).apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(v,h){const g=yield ln(v,"POST","/v1/accounts:signInWithPhoneNumber",bt(v,h));if(g.temporaryProof)throw qt(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ls={USER_NOT_FOUND:"user-not-found"};function qs(){return(qs=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithPhoneNumber",bt(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ls)})).apply(this,arguments)}class Fr extends Xr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Fr({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Fr({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Lo(v,h){return us.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Vo(v,h){return Co.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Zi(v,h){return qs.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:I,verificationCode:$}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:I,code:$}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:X}=h;return I||g||$||X?new Fr({verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:X}):null}}class _s{constructor(h){var g,I,$,X,ke,ct;const Ht=(0,F.zd)((0,F.pd)(h)),rn=null!==(g=Ht.apiKey)&&void 0!==g?g:null,Mn=null!==(I=Ht.oobCode)&&void 0!==I?I:null,yr=function qi(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Ht.mode)&&void 0!==$?$:null);be(rn&&Mn&&yr,"argument-error"),this.apiKey=rn,this.operation=yr,this.code=Mn,this.continueUrl=null!==(X=Ht.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(ke=Ht.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(ct=Ht.tenantId)&&void 0!==ct?ct:null}static parseLink(h){const g=function vs(v){const h=(0,F.zd)((0,F.pd)(v)).link,g=h?(0,F.zd)((0,F.pd)(h)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||g||h||v}(h);try{return new _s(g)}catch{return null}}}let ta=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return pi._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const $=_s.parseLink(I);return be($,"argument-error"),pi._fromEmailAndCode(g,$.code,$.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class pr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ys extends pr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ls extends Ys{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return be("providerId"in g&&"signInMethod"in g,"argument-error"),di._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return be(h.idToken||h.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ls.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ls.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:$,pendingToken:X,nonce:ke,providerId:ct}=h;if(!I&&!$&&!g&&!X||!ct)return null;try{return new ls(ct)._credential({idToken:g,accessToken:I,nonce:ke,pendingToken:X})}catch{return null}}}let ji=(()=>{class v extends Ys{constructor(){super("facebook.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),hi=(()=>{class v extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:$}=g;if(!I&&!$)return null;try{return v.credential(I,$)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ho=(()=>{class v extends Ys{constructor(){super("github.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ki extends Xr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return cr(h,this.buildRequest())}_linkToIdToken(h,g){const I=this.buildRequest();return I.idToken=g,cr(h,I)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,cr(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:$,pendingToken:X}=g;return I&&$&&X&&I===$?new ki(I,X):null}static _create(h,g){return new ki(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ya extends pr{constructor(h){be(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ya.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ya.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=ki.fromJSON(h);return be(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:I}=h;if(!g||!I)return null;try{return ki._create(I,g)}catch{return null}}}let Uo=(()=>{class v extends Ys{constructor(){super("twitter.com")}static credential(g,I){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:$}=g;if(!I||!$)return null;try{return v.credential(I,$)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Qs(v,h){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signUp",bt(v,h))})).apply(this,arguments)}class zr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,I,$=!1){return(0,d.Z)(function*(){const X=yield qn._fromIdTokenResponse(h,I,$),ke=Es(I);return new zr({user:X,providerId:ke,_tokenResponse:I,operationType:g})})()}static _forOperation(h,g,I){return(0,d.Z)(function*(){yield h._updateTokensIfNecessary(I,!0);const $=Es(I);return new zr({user:h,providerId:$,_tokenResponse:I,operationType:g})})()}}function Es(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Pn(v){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(v){var h;const g=Ar(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new zr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Qs(g,{returnSecureToken:!0}),$=yield zr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Vs extends F.ZR{constructor(h,g,I,$){var X;super(g.code,g.message),this.operationType=I,this.user=$,Object.setPrototypeOf(this,Vs.prototype),this.customData={appName:h.name,tenantId:null!==(X=h.tenantId)&&void 0!==X?X:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(h,g,I,$){return new Vs(h,g,I,$)}}function Ei(v,h,g,I){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?Vs._fromErrorAndOperation(v,X,h,I):X})}function Lr(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function Us(v,h){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(v,h){const g=(0,F.m9)(v);yield Dt(!0,g,h);const{providerUserInfo:I}=yield jn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),$=Lr(I||[]);return g.providerData=g.providerData.filter(X=>$.has(X.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function cs(v,h){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(v,h,g=!1){const I=yield pe(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return zr._forOperation(v,"link",I)})).apply(this,arguments)}function Dt(v,h,g){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,d.Z)(function*(v,h,g){yield hn(h);const $=!1===v?"provider-already-linked":"no-such-provider";be(Lr(h.providerData).has(g)===v,h.auth,$)})).apply(this,arguments)}function jo(v,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(v,h,g=!1){const{auth:I}=v,$="reauthenticate";try{const X=yield pe(v,Ei(I,$,h,v),g);be(X.idToken,I,"internal-error");const ke=Zn(X.idToken);be(ke,I,"internal-error");const{sub:ct}=ke;return be(v.uid===ct,I,"user-mismatch"),zr._forOperation(v,$,X)}catch(X){throw"auth/user-not-found"===X?.code&&ge(I,"user-mismatch"),X}})).apply(this,arguments)}function Or(v,h){return k.apply(this,arguments)}function k(){return(k=(0,d.Z)(function*(v,h,g=!1){const I="signIn",$=yield Ei(v,I,h),X=yield zr._fromIdTokenResponse(v,I,$);return g||(yield v._updateCurrentUser(X.user)),X})).apply(this,arguments)}function O(v,h){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)(function*(v,h){return Or(Ar(v),h)})).apply(this,arguments)}function Y(v,h){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(v,h){const g=(0,F.m9)(v);return yield Dt(!1,g,h.providerId),cs(g,h)})).apply(this,arguments)}function an(v,h){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(v,h){return jo((0,F.m9)(v),h)})).apply(this,arguments)}function Xs(v,h){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(v,h){return ln(v,"POST","/v1/accounts:signInWithCustomToken",bt(v,h))})).apply(this,arguments)}function mi(v,h){return wi.apply(this,arguments)}function wi(){return(wi=(0,d.Z)(function*(v,h){const g=Ar(v),I=yield Xs(g,{token:h,returnSecureToken:!0}),$=yield zr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Qi{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Bs._fromServerResponse(h,g):"totpInfo"in g?ni._fromServerResponse(h,g):ge(h,"internal-error")}}class Bs extends Qi{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Bs(g)}}class ni extends Qi{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new ni(g)}}function Is(v,h,g){var I;be((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),be(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(be(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(be(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Va(v,h,g){return va.apply(this,arguments)}function va(){return va=(0,d.Z)(function*(v,h,g){var I;const $=Ar(v),X={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ke=yield Jn($,X,"getOobCode",!0);g&&Is($,ke,g),yield Ae($,ke)}else g&&Is($,X,g),yield Ae($,X).catch(function(){var ke=(0,d.Z)(function*(ct){if("auth/missing-recaptcha-token"!==ct.code)return Promise.reject(ct);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ht=yield Jn($,X,"getOobCode",!0);g&&Is($,Ht,g),yield Ae($,Ht)}});return function(ct){return ke.apply(this,arguments)}}())}),va.apply(this,arguments)}function $o(v,h,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(v,h,g){yield os((0,F.m9)(v),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Go(v,h){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(v,h){yield wo((0,F.m9)(v),{oobCode:h})})).apply(this,arguments)}function Fi(v,h){return js.apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(v,h){const g=(0,F.m9)(v),I=yield os(g,{oobCode:h}),$=I.requestType;switch(be($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":be(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":be(I.mfaInfo,g,"internal-error");default:be(I.email,g,"internal-error")}let X=null;return I.mfaInfo&&(X=Qi._fromServerResponse(Ar(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:X},operation:$}})).apply(this,arguments)}function _a(v,h){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(v,h){const{data:g}=yield Fi((0,F.m9)(v),h);return g.email})).apply(this,arguments)}function zo(v,h,g){return fo.apply(this,arguments)}function fo(){return fo=(0,d.Z)(function*(v,h,g){var I;const $=Ar(v),X={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let ke;if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const rn=yield Jn($,X,"signUpPassword");ke=Qs($,rn)}else ke=Qs($,X).catch(function(){var rn=(0,d.Z)(function*(Mn){if("auth/missing-recaptcha-token"===Mn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const yr=yield Jn($,X,"signUpPassword");return Qs($,yr)}return Promise.reject(Mn)});return function(Mn){return rn.apply(this,arguments)}}());const ct=yield ke.catch(rn=>Promise.reject(rn)),Ht=yield zr._fromIdTokenResponse($,"signIn",ct);return yield $._updateCurrentUser(Ht.user),Ht}),fo.apply(this,arguments)}function So(v,h,g){return O((0,F.m9)(v),ta.credential(h,g))}function xi(v,h,g){return ds.apply(this,arguments)}function ds(){return ds=(0,d.Z)(function*(v,h,g){var I;const $=Ar(v),X={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function ke(ct,Ht){be(Ht.handleCodeInApp,$,"argument-error"),Ht&&Is($,ct,Ht)}if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ct=yield Jn($,X,"getOobCode",!0);ke(ct,g),yield vt($,ct)}else ke(X,g),yield vt($,X).catch(function(){var ct=(0,d.Z)(function*(Ht){if("auth/missing-recaptcha-token"!==Ht.code)return Promise.reject(Ht);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rn=yield Jn($,X,"getOobCode",!0);ke(rn,g),yield vt($,rn)}});return function(Ht){return ct.apply(this,arguments)}}())}),ds.apply(this,arguments)}function Ua(v,h){return"EMAIL_SIGNIN"===_s.parseLink(h)?.operation}function na(v,h,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v),$=ta.credentialWithLink(h,g||ft());return be($._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),O(I,$)})).apply(this,arguments)}function Ii(v,h){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:createAuthUri",bt(v,h))})).apply(this,arguments)}function Er(v,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,d.Z)(function*(v,h){const I={identifier:h,continueUri:jt()?ft():"http://localhost"},{signinMethods:$}=yield Ii((0,F.m9)(v),I);return $||[]})).apply(this,arguments)}function Mo(v,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,d.Z)(function*(v,h){const g=(0,F.m9)(v),$={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Is(g.auth,$,h);const{email:X}=yield lo(g.auth,$);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ea(v,h,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&Is(I.auth,X,g);const{email:ke}=yield An(I.auth,X);ke!==v.email&&(yield v.reload())})).apply(this,arguments)}function Cs(v,h){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(v,h){return At(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ia(v,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const I=(0,F.m9)(v),X={idToken:yield I.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},ke=yield pe(I,Cs(I.auth,X));I.displayName=ke.displayName||null,I.photoURL=ke.photoUrl||null;const ct=I.providerData.find(({providerId:Ht})=>"password"===Ht);ct&&(ct.displayName=I.displayName,ct.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ke)})).apply(this,arguments)}function $i(v,h){return Oi((0,F.m9)(v),h,null)}function Di(v,h){return Oi((0,F.m9)(v),null,h)}function Oi(v,h,g){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(v,h,g){const{auth:I}=v,X={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(X.email=h),g&&(X.password=g);const ke=yield pe(v,Bi(I,X));yield v._updateTokensIfNecessary(ke,!0)})).apply(this,arguments)}class ro{constructor(h,g,I={}){this.isNewUser=h,this.providerId=g,this.profile=I}}class po extends ro{constructor(h,g,I,$){super(h,g,I),this.username=$}}class xo extends ro{constructor(h,g){super(h,"facebook.com",g)}}class ru extends po{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class b extends ro{constructor(h,g){super(h,"google.com",g)}}class U extends po{constructor(h,g,I){super(h,"twitter.com",g,I)}}function x(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Wo(v){var h,g;if(!v)return null;const{providerId:I}=v,$=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},X=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const ke=null===(g=null===(h=Zn(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(ke)return new ro(X,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!I)return null;switch(I){case"facebook.com":return new xo(X,$);case"github.com":return new ru(X,$);case"google.com":return new b(X,$);case"twitter.com":return new U(X,$,v.screenName||null);case"custom":case"anonymous":return new ro(X,null);default:return new ro(X,I,$)}}(g)}class Hn{constructor(h,g,I){this.type=h,this.credential=g,this.auth=I}static _fromIdtoken(h,g){return new Hn("enroll",h,g)}static _fromMfaPendingCredential(h){return new Hn("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,I;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Hn._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(I=h.multiFactorSession)&&void 0!==I&&I.idToken)return Hn._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Yr{constructor(h,g,I){this.session=h,this.hints=g,this.signInResolver=I}static _fromError(h,g){const I=Ar(h),$=g.customData._serverResponse,X=($.mfaInfo||[]).map(ct=>Qi._fromServerResponse(I,ct));be($.mfaPendingCredential,I,"internal-error");const ke=Hn._fromMfaPendingCredential($.mfaPendingCredential);return new Yr(ke,X,function(){var ct=(0,d.Z)(function*(Ht){const rn=yield Ht._process(I,ke);delete $.mfaInfo,delete $.mfaPendingCredential;const Mn=Object.assign(Object.assign({},$),{idToken:rn.idToken,refreshToken:rn.refreshToken});switch(g.operationType){case"signIn":const yr=yield zr._fromIdTokenResponse(I,g.operationType,Mn);return yield I._updateCurrentUser(yr.user),yr;case"reauthenticate":return be(g.user,I,"internal-error"),zr._forOperation(g.user,g.operationType,Mn);default:ge(I,"internal-error")}});return function(Ht){return ct.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,d.Z)(function*(){return g.signInResolver(h)})()}}function fs(v,h){var g;const I=(0,F.m9)(v),$=h;return be(h.customData.operationType,I,"argument-error"),be(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Yr._fromError(I,$)}function Mt(v,h){return At(v,"POST","/v2/accounts/mfaEnrollment:start",bt(v,h))}class pn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>Qi._fromServerResponse(h.auth,I)))})}static _fromUser(h){return new pn(h)}getSession(){var h=this;return(0,d.Z)(function*(){return Hn._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var I=this;return(0,d.Z)(function*(){const $=h,X=yield I.getSession(),ke=yield pe(I.user,$._process(I.user.auth,X,g));return yield I.user._updateTokensIfNecessary(ke),I.user.reload()})()}unenroll(h){var g=this;return(0,d.Z)(function*(){const I="string"==typeof h?h:h.uid,$=yield g.user.getIdToken();try{const X=yield pe(g.user,function en(v,h){return At(v,"POST","/v2/accounts/mfaEnrollment:withdraw",bt(v,h))}(g.user.auth,{idToken:$,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ke})=>ke!==I),yield g.user._updateTokensIfNecessary(X),yield g.user.reload()}catch(X){throw X}})()}}const sa=new WeakMap;function Kt(v){const h=(0,F.m9)(v);return sa.has(h)||sa.set(h,pn._fromUser(h)),sa.get(h)}const tt="__sak";class Rt{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(tt,"1"),this.storage.removeItem(tt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const tl=(()=>{class v extends Rt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ri(){const v=(0,F.z$)();return z(v)||oe(v)}()&&function Ut(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ke(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const $=this.storage.getItem(I),X=this.localCache[I];$!==X&&g(I,X,$)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((ct,Ht,rn)=>{this.notifyListeners(ct,rn)});const $=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ct=this.storage.getItem($);if(g.newValue!==ct)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!I)return}const X=()=>{const ct=this.storage.getItem($);!I&&this.localCache[$]===ct||this.notifyListeners($,ct)},ke=this.storage.getItem($);!function Ne(){return(0,F.w1)()&&10===document.documentMode}()||ke===g.newValue||g.newValue===g.oldValue?X():setTimeout(X,10)}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const X of Array.from($))X(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var $=()=>super._set,X=this;return(0,d.Z)(function*(){yield $().call(X,g,I),X.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,$=this;return(0,d.Z)(function*(){const X=yield I().call($,g);return $.localCache[g]=JSON.stringify(X),X})()}_remove(g){var I=()=>super._remove,$=this;return(0,d.Z)(function*(){yield I().call($,g),delete $.localCache[g]})()}}return v.type="LOCAL",v})(),oa=(()=>{class v extends Rt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let Nl=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(X=>X.isListeningto(g));if(I)return I;const $=new v(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,d.Z)(function*(){const $=g,{eventId:X,eventType:ke,data:ct}=$.data,Ht=I.handlersMap[ke];if(!Ht?.size)return;$.ports[0].postMessage({status:"ack",eventId:X,eventType:ke});const rn=Array.from(Ht).map(function(){var yr=(0,d.Z)(function*(vo){return vo($.origin,ct)});return function(vo){return yr.apply(this,arguments)}}()),Mn=yield function Pl(v){return Promise.all(v.map(function(){var h=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return h.apply(this,arguments)}}()))}(rn);$.ports[0].postMessage({status:"done",eventId:X,eventType:ke,response:Mn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ko(v="",h=10){let g="";for(let I=0;I<h;I++)g+=Math.floor(10*Math.random());return v+g}class ii{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,I=50){var $=this;return(0,d.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let ke,ct;return new Promise((Ht,rn)=>{const Mn=Ko("",20);X.port1.start();const yr=setTimeout(()=>{rn(new Error("unsupported_event"))},I);ct={messageChannel:X,onMessage(vo){const Hs=vo;if(Hs.data.eventId===Mn)switch(Hs.data.status){case"ack":clearTimeout(yr),ke=setTimeout(()=>{rn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),Ht(Hs.data.response);break;default:clearTimeout(yr),clearTimeout(ke),rn(new Error("invalid_response"))}}},$.handlers.add(ct),X.port1.addEventListener("message",ct.onMessage),$.target.postMessage({eventType:h,eventId:Mn,data:g},[X.port2])}).finally(()=>{ct&&$.removeMessageHandler(ct)})})()}}function yi(){return window}function bs(){return typeof yi().WorkerGlobalScope<"u"&&"function"==typeof yi().importScripts}function Hr(){return(Hr=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Sn="firebaseLocalStorageDb",sr="firebaseLocalStorage",Zt="fbase_key";class Ji{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Zo(v,h){return v.transaction([sr],h?"readwrite":"readonly").objectStore(sr)}function Mr(){const v=indexedDB.open(Sn,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(sr,{keyPath:Zt})}catch($){g($)}}),v.addEventListener("success",(0,d.Z)(function*(){const I=v.result;I.objectStoreNames.contains(sr)?h(I):(I.close(),yield function Ia(){const v=indexedDB.deleteDatabase(Sn);return new Ji(v).toPromise()}(),h(yield Mr()))}))})}function Ro(v,h,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(v,h,g){const I=Zo(v,!0).put({[Zt]:h,value:g});return new Ji(I).toPromise()})).apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(v,h){const g=Zo(v,!1).get(h),I=yield new Ji(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ru(v,h){const g=Zo(v,!0).delete(h);return new Ji(g).toPromise()}const rl=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield Mr()),g.db})()}_withRetries(g){var I=this;return(0,d.Z)(function*(){let $=0;for(;;)try{const X=yield I._openDb();return yield g(X)}catch(X){if($++>3)throw X;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return bs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Nl._getInstance(function Ts(){return bs()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*($,X){return{keyProcessed:(yield g._poll()).includes(X.key)}});return function($,X){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*($,X){return["keyChanged"]});return function($,X){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var I,$;if(g.activeServiceWorker=yield function ja(){return Hr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ii(g.activeServiceWorker);const X=yield g.sender._send("ping",{},800);!X||(null===(I=X[0])||void 0===I?void 0:I.fulfilled)&&(null===($=X[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function _n(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Mr();return yield Ro(g,tt,"1"),yield Ru(g,tt),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var $=this;return(0,d.Z)(function*(){return $._withPendingWrite((0,d.Z)(function*(){return yield $._withRetries(X=>Ro(X,g,I)),$.localCache[g]=I,$.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,d.Z)(function*(){const $=yield I._withRetries(X=>function xu(v,h){return Ca.apply(this,arguments)}(X,g));return I.localCache[g]=$,$})()}_remove(g){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries($=>Ru($,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const I=yield g._withRetries(ke=>{const ct=Zo(ke,!1).getAll();return new Ji(ct).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const $=[],X=new Set;for(const{fbase_key:ke,value:ct}of I)X.add(ke),JSON.stringify(g.localCache[ke])!==JSON.stringify(ct)&&(g.notifyListeners(ke,ct),$.push(ke));for(const ke of Object.keys(g.localCache))g.localCache[ke]&&!X.has(ke)&&(g.notifyListeners(ke,null),$.push(ke));return $})()}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const X of Array.from($))X(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function qo(v,h){return At(v,"POST","/v2/accounts/mfaSignIn:start",bt(v,h))}const Ga=1e12;class Ci{constructor(h){this.auth=h,this.counter=Ga,this._widgets=new Map}render(h,g){const I=this.counter;return this._widgets.set(I,new Li(h,this.auth.name,g||{})),this.counter++,I}reset(h){var g;const I=h||Ga;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ga))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,d.Z)(function*(){var I;return null===(I=g._widgets.get(h||Ga))||void 0===I||I.execute(),""})()}}class Li{constructor(h,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof h?document.getElementById(h):h;be($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function iu(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $s=Rr("rcb"),ba=new je(3e4,6e4);class Ou{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=yi().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return be(function kl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&wn(yi().grecaptcha)?Promise.resolve(yi().grecaptcha):new Promise((I,$)=>{const X=yi().setTimeout(()=>{$(st(h,"network-request-failed"))},ba.get());yi()[$s]=()=>{yi().clearTimeout(X),delete yi()[$s];const ct=yi().grecaptcha;if(!ct||!wn(ct))return void $(st(h,"internal-error"));const Ht=ct.render;ct.render=(rn,Mn)=>{const yr=Ht(rn,Mn);return this.counter++,yr},this.hostLanguage=g,I(ct)},Bn(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:$s,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(X),$(st(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=yi().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xi{load(h){return(0,d.Z)(function*(){return new Ci(h)})()}clearedOneInstance(){}}const za="recaptcha",aa={theme:"light",type:"image"};class _{constructor(h,g=Object.assign({},aa),I){this.parameters=g,this.type=za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ar(I),this.isInvisible="invisible"===this.parameters.size,be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof h?document.getElementById(h):h;be($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xi:new Ou,this.validateStartingState()}verify(){var h=this;return(0,d.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),I=h.getAssertedRecaptcha();return I.getResponse(g)||new Promise(X=>{const ke=ct=>{!ct||(h.tokenChangeListeners.delete(ke),X(ct))};h.tokenChangeListeners.add(ke),h.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){be(!this.parameters.sitekey,this.auth,"argument-error"),be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof h)h(g);else if("string"==typeof h){const I=yi()[h];"function"==typeof I&&I(g)}}}assertNotDestroyed(){be(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,d.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,d.Z)(function*(){be(jt()&&!bs(),h.auth,"internal-error"),yield function E(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Ue(v){return Le.apply(this,arguments)}(h.auth);be(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class y{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Fr._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function A(v,h,g){return P.apply(this,arguments)}function P(){return(P=(0,d.Z)(function*(v,h,g){const I=Ar(v),$=yield Gt(I,h,(0,F.m9)(g));return new y($,X=>O(I,X))})).apply(this,arguments)}function W(v,h,g){return he.apply(this,arguments)}function he(){return(he=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v);yield Dt(!1,I,"phone");const $=yield Gt(I.auth,h,(0,F.m9)(g));return new y($,X=>Y(I,X))})).apply(this,arguments)}function ye(v,h,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v),$=yield Gt(I.auth,h,(0,F.m9)(g));return new y($,X=>an(I,X))})).apply(this,arguments)}function Gt(v,h,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(v,h,g){var I;const $=yield g.verify();try{let X;if(be("string"==typeof $,v,"argument-error"),be(g.type===za,v,"argument-error"),X="string"==typeof h?{phoneNumber:h}:h,"session"in X){const ke=X.session;if("phoneNumber"in X)return be("enroll"===ke.type,v,"internal-error"),(yield Mt(v,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{be("signin"===ke.type,v,"internal-error");const ct=(null===(I=X.multiFactorHint)||void 0===I?void 0:I.uid)||X.multiFactorUid;return be(ct,v,"missing-multi-factor-info"),(yield qo(v,{mfaPendingCredential:ke.credential,mfaEnrollmentId:ct,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield ea(v,{phoneNumber:X.phoneNumber,recaptchaToken:$});return ke}}finally{g._reset()}})).apply(this,arguments)}function cn(v,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(v,h){yield cs((0,F.m9)(v),h)})).apply(this,arguments)}let As=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Ar(g)}verifyPhoneNumber(g,I){return Gt(this.auth,g,(0,F.m9)(I))}static credential(g,I){return Fr._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:$}=g;return I&&$?Fr._fromTokenResponse(I,$):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function fi(v,h){return h?q(h):(be(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class oo extends Xr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return cr(h,this._buildIdpRequest())}_linkToIdToken(h,g){return cr(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return cr(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Qr(v){return Or(v.auth,new oo(v),v.bypassAuthState)}function Pu(v){const{auth:h,user:g}=v;return be(g,h,"internal-error"),jo(g,new oo(v),v.bypassAuthState)}function Ta(v){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(v){const{auth:h,user:g}=v;return be(g,h,"internal-error"),cs(g,new oo(v),v.bypassAuthState)})).apply(this,arguments)}class il{constructor(h,g,I,$,X=!1){this.auth=h,this.resolver=I,this.user=$,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,d.Z)(function*(I,$){h.pendingPromise={resolve:I,reject:$};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(X){h.reject(X)}});return function(I,$){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:$,postBody:X,tenantId:ke,error:ct,type:Ht}=h;if(ct)return void g.reject(ct);const rn={auth:g.auth,requestUri:I,sessionId:$,tenantId:ke||void 0,postBody:X||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ht)(rn))}catch(Mn){g.reject(Mn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Qr;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return Pu;default:ge(this.auth,"internal-error")}}resolve(h){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ou=new je(2e3,1e4);function Ss(v,h,g){return au.apply(this,arguments)}function au(){return(au=(0,d.Z)(function*(v,h,g){const I=Ar(v);Et(v,h,pr);const $=fi(I,g);return new ua(I,"signInViaPopup",h,$).executeNotNull()})).apply(this,arguments)}function Vi(v,h,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v);Et(I.auth,h,pr);const $=fi(I.auth,g);return new ua(I.auth,"reauthViaPopup",h,$,I).executeNotNull()})).apply(this,arguments)}function Fl(v,h,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v);Et(I.auth,h,pr);const $=fi(I.auth,g);return new ua(I.auth,"linkViaPopup",h,$,I).executeNotNull()})).apply(this,arguments)}let ua=(()=>{class v extends il{constructor(g,I,$,X,ke){super(g,I,X,ke),this.provider=$,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const I=yield g.execute();return be(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,d.Z)(function*(){gt(1===g.filter.length,"Popup operations only handle one event");const I=Ko();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(st(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(st(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,$;this.pollId=null!==($=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(st(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,ou.get())};g()}}return v.currentPopupAction=null,v})();const Sa=new Map;class Wa extends il{constructor(h,g,I=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,d.Z)(function*(){let I=Sa.get(g.auth._key());if(!I){try{const X=(yield function Ll(v,h){return Dr.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;I=()=>Promise.resolve(X)}catch($){I=()=>Promise.reject($)}Sa.set(g.auth._key(),I)}return g.bypassAuthState||Sa.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(I,h);if("unknown"!==h.type){if(h.eventId){const $=yield I.auth._redirectUserForId(h.eventId);if($)return I.user=$,g().call(I,h);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Dr(){return(Dr=(0,d.Z)(function*(v,h){const g=es(h),I=Oo(v);if(!(yield I._isAvailable()))return!1;const $="true"===(yield I._get(g));return yield I._remove(g),$})).apply(this,arguments)}function uu(v,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,d.Z)(function*(v,h){return Oo(v)._set(es(h),"true")})).apply(this,arguments)}function oi(){Sa.clear()}function Vl(v,h){Sa.set(v._key(),h)}function Oo(v){return q(v._redirectPersistence)}function es(v){return De("pendingRedirect",v.config.apiKey,v.name)}function ol(v,h,g){return function Tc(v,h,g){return bi.apply(this,arguments)}(v,h,g)}function bi(){return(bi=(0,d.Z)(function*(v,h,g){const I=Ar(v);Et(v,h,pr),yield I._initializationPromise;const $=fi(I,g);return yield uu($,I),$._openRedirect(I,h,"signInViaRedirect")})).apply(this,arguments)}function lu(v,h,g){return function mo(v,h,g){return ai.apply(this,arguments)}(v,h,g)}function ai(){return(ai=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v);Et(I.auth,h,pr),yield I.auth._initializationPromise;const $=fi(I.auth,g);yield uu($,I.auth);const X=yield xa(I);return $._openRedirect(I.auth,h,"reauthViaRedirect",X)})).apply(this,arguments)}function Ma(v,h,g){return function ku(v,h,g){return Fu.apply(this,arguments)}(v,h,g)}function Fu(){return(Fu=(0,d.Z)(function*(v,h,g){const I=(0,F.m9)(v);Et(I.auth,h,pr),yield I.auth._initializationPromise;const $=fi(I.auth,g);yield Dt(!1,I,h.providerId),yield uu($,I.auth);const X=yield xa(I);return $._openRedirect(I.auth,h,"linkViaRedirect",X)})).apply(this,arguments)}function al(v,h){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(v,h){return yield Ar(v)._initializationPromise,Yo(v,h,!1)})).apply(this,arguments)}function Yo(v,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(v,h,g=!1){const I=Ar(v),$=fi(I,h),ke=yield new Wa(I,$,g).execute();return ke&&!g&&(delete ke.user._redirectEventId,yield I._persistUserIfCurrent(ke.user),yield I._setRedirectUser(null,h)),ke})).apply(this,arguments)}function xa(v){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(v){const h=Ko(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class la{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(h,I)&&(g=!0,this.sendToConsumer(h,I),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ka(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cu(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var I;if(h.error&&!cu(h)){const $=(null===(I=h.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(st(this.auth,$))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const I=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&I}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jo(h))}saveEventToCache(h){this.cachedEventUids.add(Jo(h)),this.lastProcessedEventTime=Date.now()}}function Jo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function cu({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function du(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,d.Z)(function*(v,h={}){return At(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function hu(){return(hu=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield du(v);for(const g of h)try{if(fu(g))return}catch{}ge(v,"unauthorized-domain")})).apply(this,arguments)}function fu(v){const h=ft(),{protocol:g,hostname:I}=new URL(h);if(v.startsWith("chrome-extension://")){const ke=new URL(v);return""===ke.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&ke.hostname===I}if(!ed.test(g))return!1;if(Ra.test(v))return I===v;const $=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(I)}const ll=new je(3e4,6e4);function Vu(){const v=yi().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let ca=null;function nd(v){return ca=ca||function td(v){return new Promise((h,g)=>{var I,$,X;function ke(){Vu(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Vu(),g(st(v,"network-request-failed"))},timeout:ll.get()})}if(null!==($=null===(I=yi().gapi)||void 0===I?void 0:I.iframes)&&void 0!==$&&$.Iframe)h(gapi.iframes.getContext());else{if(null===(X=yi().gapi)||void 0===X||!X.load){const ct=Rr("iframefcb");return yi()[ct]=()=>{gapi.load?ke():g(st(v,"network-request-failed"))},Bn(`https://apis.google.com/js/api.js?onload=${ct}`).catch(Ht=>g(Ht))}ke()}}).catch(h=>{throw ca=null,h})}(v),ca}const da=new je(5e3,15e3),cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(v){const h=v.config;be(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?Je(h,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:h.apiKey,appName:v.name,v:V.SDK_VERSION},$=qr.get(v.config.apiHost);$&&(I.eid=$);const X=v._getFrameworks();return X.length&&(I.fw=X.join(",")),`${g}?${(0,F.xO)(I).slice(1)}`}function w(){return w=(0,d.Z)(function*(v){const h=yield nd(v),g=yi().gapi;return be(g,v,"internal-error"),h.open({where:document.body,url:ns(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cl,dontclear:!0},I=>new Promise(function(){var $=(0,d.Z)(function*(X,ke){yield I.restyle({setHideOnLeave:!1});const ct=st(v,"network-request-failed"),Ht=yi().setTimeout(()=>{ke(ct)},da.get());function rn(){yi().clearTimeout(Ht),X(I)}I.ping(rn).then(rn,()=>{ke(ct)})});return function(X,ke){return $.apply(this,arguments)}}()))}),w.apply(this,arguments)}const T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dt{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const zn=encodeURIComponent("fac");function gs(v,h,g,I,$,X){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(v,h,g,I,$,X){be(v.config.authDomain,v,"auth-domain-config-required"),be(v.config.apiKey,v,"invalid-api-key");const ke={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:V.SDK_VERSION,eventId:$};if(h instanceof pr){h.setDefaultLanguage(v.languageCode),ke.providerId=h.providerId||"",(0,F.xb)(h.getCustomParameters())||(ke.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Mn,yr]of Object.entries(X||{}))ke[Mn]=yr}if(h instanceof Ys){const Mn=h.getScopes().filter(yr=>""!==yr);Mn.length>0&&(ke.scopes=Mn.join(","))}v.tenantId&&(ke.tid=v.tenantId);const ct=ke;for(const Mn of Object.keys(ct))void 0===ct[Mn]&&delete ct[Mn];const Ht=yield v._getAppCheckToken(),rn=Ht?`#${zn}=${encodeURIComponent(Ht)}`:"";return`${Ui(v)}?${(0,F.xO)(ct).slice(1)}${rn}`})).apply(this,arguments)}function Ui({config:v}){return v.emulator?Je(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}const ha="webStorageSupport",uo=class pu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oa,this._completeRedirectFn=Yo,this._overrideRedirectResult=Vl}_openPopup(h,g,I,$){var X=this;return(0,d.Z)(function*(){var ke;gt(null===(ke=X.eventManagers[h._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const ct=yield gs(h,g,I,ft(),$);return function Xt(v,h,g,I=500,$=600){const X=Math.max((window.screen.availHeight-$)/2,0).toString(),ke=Math.max((window.screen.availWidth-I)/2,0).toString();let ct="";const Ht=Object.assign(Object.assign({},T),{width:I.toString(),height:$.toString(),top:X,left:ke}),rn=(0,F.z$)().toLowerCase();g&&(ct=G(rn)?"_blank":g),Z(rn)&&(h=h||"http://localhost",Ht.scrollbars="yes");const Mn=Object.entries(Ht).reduce((vo,[Hs,$l])=>`${vo}${Hs}=${$l},`,"");if(function ne(v=(0,F.z$)()){var h;return oe(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(rn)&&"_self"!==ct)return function Qt(v,h){const g=document.createElement("a");g.href=v,g.target=h;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(h||"",ct),new dt(null);const yr=window.open(h||"",ct,Mn);be(yr,v,"popup-blocked");try{yr.focus()}catch{}return new dt(yr)}(h,ct,Ko())})()}_openRedirect(h,g,I,$){var X=this;return(0,d.Z)(function*(){return yield X._originValidation(h),function kn(v){yi().location.href=v}(yield gs(h,g,I,ft(),$)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:$,promise:X}=this.eventManagers[g];return $?Promise.resolve($):(gt(X,"If manager is not set, promise should be"),X)}const I=this.initAndGetManager(h);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(h){var g=this;return(0,d.Z)(function*(){const I=yield function rd(v){return w.apply(this,arguments)}(h),$=new la(h);return I.register("authEvent",X=>(be(X?.authEvent,h,"invalid-auth-event"),{status:$.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:$},g.iframes[h._key()]=I,$})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(ha,{type:ha},$=>{var X;const ke=null===(X=$?.[0])||void 0===X?void 0:X[ha];void 0!==ke&&g(!!ke),ge(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ul(v){return hu.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ke()||z()||oe()}};class gu extends class Oa{constructor(h){this.factorId=h}_process(h,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,I);case"signin":return this._finalizeSignIn(h,g.credential);default:return Re("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new gu(h)}_finalizeEnroll(h,g,I){return function Ir(v,h){return At(v,"POST","/v2/accounts/mfaEnrollment:finalize",bt(v,h))}(h,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function si(v,h){return At(v,"POST","/v2/accounts/mfaSignIn:finalize",bt(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rf=(()=>{class v{constructor(){}static assertion(g){return gu._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var dl="@firebase/auth";class hl{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(I=>{h(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,F.Pz)("authIdTokenMaxAge"),function sd(v){(0,V._registerComponent)(new we.wA("auth",(h,{options:g})=>{const I=h.getProvider("app").getImmediate(),$=h.getProvider("heartbeat"),X=h.getProvider("app-check-internal"),{apiKey:ke,authDomain:ct}=I.options;be(ke&&!ke.includes(":"),"invalid-api-key",{appName:I.name});const Ht={apiKey:ke,authDomain:ct,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yn(v)},rn=new Ni(I,$,X,Ht);return function Mi(v,h){const g=h?.persistence||[],I=(Array.isArray(g)?g:[g]).map(q);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(I,h?.popupRedirectResolver)}(rn,g),rn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,I)=>{h.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new we.wA("auth-internal",h=>{const g=Ar(h.getProvider("auth").getImmediate());return new hl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(dl,"0.23.2",function lh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,V.registerVersion)(dl,"0.23.2","esm2017")}("Browser")},2810:(Bt,Fe,R)=>{R.d(Fe,{u7:()=>sg,Jj:()=>vc,IX:()=>Cm,my:()=>Ai,xU:()=>Ic,Lz:()=>Ml,WA:()=>Rt,F8:()=>yf,$q:()=>sh,W:()=>Dc,EK:()=>Hr,PU:()=>og,l7:()=>Yo,Ky:()=>Zt,Xb:()=>sr,Cf:()=>xr,K9:()=>sa,Me:()=>Tc,yq:()=>Vr,Wi:()=>Em,ET:()=>Cc,Ab:()=>Jv,vr:()=>my,Fc:()=>Tm,hJ:()=>Kp,B$:()=>Zp,at:()=>Zd,oe:()=>uy,AK:()=>py,TF:()=>Sm,JU:()=>qp,ST:()=>Uv,fH:()=>Bv,Ix:()=>Am,Wu:()=>Km,Lx:()=>Wm,qY:()=>zi,GL:()=>nu,QT:()=>ey,kl:()=>ty,Xk:()=>ny,PL:()=>ry,UQ:()=>iy,zN:()=>sy,nP:()=>Xv,b9:()=>Df,vh:()=>rg,Pb:()=>Mm,L$:()=>xm,cf:()=>Zv,sc:()=>qv,Xo:()=>Hm,IO:()=>jm,iE:()=>qd,Eo:()=>Im,i3:()=>fy,Bt:()=>gy,pl:()=>oy,Ub:()=>fs,qK:()=>Xm,TQ:()=>zm,e0:()=>Gm,r7:()=>ay,Mx:()=>Jp,ar:()=>$m});var te,d=R(5861),F=R(6881),V=R(4859),ce=R(1877),ae=R(2090),we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ce={},Pe=Pe||{},re=we||self;function ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function me(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ze="closure_uid_"+(1e9*Math.random()>>>0),We=0;function wt(i,e,t){return i.call.apply(i.bind,arguments)}function Be(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function Me(i,e,t){return(Me=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wt:Be).apply(null,arguments)}function Ct(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function mt(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(s,a,c){for(var p=Array(arguments.length-2),D=2;D<arguments.length;D++)p[D-2]=arguments[D];return e.prototype[a].apply(s,p)}}function ge(){this.s=this.s,this.o=this.o}ge.prototype.s=!1,ge.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function qe(i){Object.prototype.hasOwnProperty.call(i,ze)&&i[ze]||(i[ze]=++We)}(this)},ge.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ot=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Et(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Ve(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ue(s)){const a=i.length||0,c=s.length||0;i.length=a+c;for(let p=0;p<c;p++)i[a+p]=s[p]}else i.push(s)}}function be(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return i}();function gt(i){return/^[\s\xa0]*$/.test(i)}function ft(){var i=re.navigator;return i&&(i=i.userAgent)?i:""}function jt(i){return-1!=ft().indexOf(i)}function Vt(i){return Vt[" "](i),i}Vt[" "]=function(){};var At,i,$e=jt("Opera"),je=jt("Trident")||jt("MSIE"),Je=jt("Edge"),Ge=Je||je,Xe=jt("Gecko")&&!(-1!=ft().toLowerCase().indexOf("webkit")&&!jt("Edge"))&&!(jt("Trident")||jt("MSIE"))&&!jt("Edge"),yt=-1!=ft().toLowerCase().indexOf("webkit")&&!jt("Edge");function bt(){var i=re.document;return i?i.documentMode:void 0}e:{var zt="",Pt=(i=ft(),Xe?/rv:([^\);]+)(\)|;)/.exec(i):Je?/Edge\/([\d\.]+)/.exec(i):je?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):yt?/WebKit\/(\S+)/.exec(i):$e?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Pt&&(zt=Pt?Pt[1]:""),je){var nn=bt();if(null!=nn&&nn>parseFloat(zt)){At=String(nn);break e}}At=zt}var Rn=re.document&&je&&(bt()||parseInt(At,10))||void 0;function lr(i,e){if(be.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Xe){e:{try{Vt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:qt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&lr.$.h.call(this)}}mt(lr,be);var qt={2:"touch",3:"pen",4:"mouse"};lr.prototype.h=function(){lr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var on="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function jn(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Cn,this.fa=this.ia=!1}function br(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function _r(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function bn(i){const e={};for(const t in i)e[t]=i[t];return e}const $n="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ar(i,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)i[t]=s[t];for(let c=0;c<$n.length;c++)t=$n[c],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Pr(i){this.src=i,this.g={},this.h=0}function Un(i,e){var t=e.type;if(t in i.g){var c,s=i.g[t],a=ot(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(br(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Zn(i,e,t,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}Pr.prototype.add=function(i,e,t,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var p=Zn(i,e,s,a);return-1<p?(e=i[p],t||(e.ia=!1)):((e=new jn(e,this.src,c,!!s,a)).ia=t,i.push(e)),e};var rt="closure_lm_"+(1e6*Math.random()|0),pe={};function fe(i,e,t,s,a){if(s&&s.once)return tn(i,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)fe(i,e[c],t,s,a);return null}return t=Nt(t),i&&i[on]?i.O(e,t,me(s)?!!s.capture:!!s,a):nt(i,e,t,!1,s,a)}function nt(i,e,t,s,a,c){if(!e)throw Error("Invalid event type");var p=me(a)?!!a.capture:!!a,D=fn(i);if(D||(i[rt]=D=new Pr(i)),(t=D.add(e,t,s,p,c)).proxy)return t;if(s=function ut(){const e=Nn;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Re||(a=p),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(Ot(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function tn(i,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)tn(i,e[c],t,s,a);return null}return t=Nt(t),i&&i[on]?i.P(e,t,me(s)?!!s.capture:!!s,a):nt(i,e,t,!0,s,a)}function hn(i,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)hn(i,e[c],t,s,a);else s=me(s)?!!s.capture:!!s,t=Nt(t),i&&i[on]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Zn(c=i.g[e],t,s,a))&&(br(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=fn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Zn(e,t,s,a)),(t=-1<i?e[i]:null)&&Tn(t))}function Tn(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[on])Un(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Ot(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=fn(e))?(Un(t,i),0==t.h&&(t.src=null,e[rt]=null)):br(i)}}}function Ot(i){return i in pe?pe[i]:pe[i]="on"+i}function Nn(i,e){if(i.fa)i=!0;else{e=new lr(e,this);var t=i.listener,s=i.la||i.src;i.ia&&Tn(i),i=t.call(s,e)}return i}function fn(i){return(i=i[rt])instanceof Pr?i:null}var er="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(i){return"function"==typeof i?i:(i[er]||(i[er]=function(e){return i.handleEvent(e)}),i[er])}function Yt(){ge.call(this),this.i=new Pr(this),this.S=this,this.J=null}function Jt(i,e){var t,s=i.J;if(s)for(t=[];s;s=s.J)t.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new be(e,i);else if(e instanceof be)e.target=e.target||i;else{var a=e;ar(e=new be(s,i),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=On(p,s,!0,e)&&a}if(a=On(p=e.g=i,s,!0,e)&&a,a=On(p,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=On(p=e.g=t[c],s,!1,e)&&a}function On(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.fa&&p.capture==t){var D=p.listener,N=p.la||p.src;p.ia&&Un(i.i,p),a=!1!==D.call(N,s)&&a}}return a&&!s.defaultPrevented}mt(Yt,ge),Yt.prototype[on]=!0,Yt.prototype.removeEventListener=function(i,e,t,s){hn(this,i,e,t,s)},Yt.prototype.N=function(){if(Yt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)br(t[s]);delete i.g[e],i.h--}}this.J=null},Yt.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Yt.prototype.P=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var qn=re.JSON.stringify;function q(){var i=G;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var _e=new class et{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new De,i=>i.reset());class De{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ee(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function ie(i){re.setTimeout(()=>{throw i},0)}let Z,z=!1,G=new class H{constructor(){this.h=this.g=null}add(e,t){const s=_e.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Te=()=>{const i=re.Promise.resolve(void 0);Z=()=>{i.then(ht)}};var ht=()=>{for(var i;i=q();){try{i.h.call(i.g)}catch(t){ie(t)}var e=_e;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}z=!1};function Ft(i,e){Yt.call(this),this.h=i||1,this.g=e||re,this.j=Me(this.qb,this),this.l=Date.now()}function sn(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function oe(i,e,t){if("function"==typeof i)t&&(i=Me(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Me(i.handleEvent,i)}return 2147483647<Number(e)?-1:re.setTimeout(i,e||0)}function de(i){i.g=oe(()=>{i.g=null,i.i&&(i.i=!1,de(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}mt(Ft,Yt),(te=Ft.prototype).ga=!1,te.T=null,te.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jt(this,"tick"),this.ga&&(sn(this),this.start()))}},te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},te.N=function(){Ft.$.N.call(this),sn(this),delete this.g};class ne extends ge{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:de(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(i){ge.call(this),this.h=i,this.g={}}mt(Ne,ge);var Ke=[];function Ut(i,e,t,s){Array.isArray(t)||(t&&(Ke[0]=t.toString()),t=Ke);for(var a=0;a<t.length;a++){var c=fe(e,t[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function yn(i){_r(i.g,function(e,t){this.g.hasOwnProperty(t)&&Tn(e)},i),i.g={}}function Ue(){this.g=!0}function It(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ln(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return qn(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Ne.prototype.N=function(){Ne.$.N.call(this),yn(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ue.prototype.Ea=function(){this.g=!1},Ue.prototype.info=function(){};var Yn={},Tr=null;function Bn(){return Tr=Tr||new Yt}function Rr(i){be.call(this,Yn.Ta,i)}function Gr(i){const e=Bn();Jt(e,new Rr(e))}function Wr(i,e){be.call(this,Yn.STAT_EVENT,i),this.stat=e}function Nr(i){const e=Bn();Jt(e,new Wr(e,i))}function Ns(i,e){be.call(this,Yn.Ua,i),this.size=e}function Jn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){i()},e)}Yn.Ta="serverreachability",mt(Rr,be),Yn.STAT_EVENT="statevent",mt(Wr,be),Yn.Ua="timingevent",mt(Ns,be);var ui={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ks={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ni(){}function Ki(){}Ni.prototype.h=null;var ss,Kr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mi(){be.call(this,"d")}function jr(){be.call(this,"c")}function Zr(){}function $r(i,e,t,s){this.l=i,this.j=e,this.m=t,this.W=s||1,this.U=new Ne(this),this.P=Xr,this.V=new Ft(i=Ge?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}mt(Mi,be),mt(jr,be),mt(Zr,Ni),Zr.prototype.g=function(){return new XMLHttpRequest},Zr.prototype.i=function(){return{}},ss=new Zr;var Xr=45e3,os={},kr={};function Bi(i,e,t){i.L=1,i.v=ys(Fn(e)),i.s=t,i.S=!0,Zs(i,null)}function Zs(i,e){i.G=Date.now(),dr(i),i.A=Fn(i.v);var t=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),qi(t.i,"t",s),i.C=0,t=i.l.J,i.h=new Ks,i.g=zo(i.l,t?e:null,!i.s),0<i.O&&(i.M=new ne(Me(i.Pa,i,i.g),i.O)),Ut(i.U,i.g,"readystatechange",i.nb),e=i.I?bn(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Gr(),function Le(i,e,t,s,a,c){i.info(function(){if(i.g)if(c)for(var p="",D=c.split("&"),N=0;N<D.length;N++){var B=D[N].split("=");if(1<B.length){var J=B[0];B=B[1];var Ee=J.split("_");p=2<=Ee.length&&"type"==Ee[1]?p+(J+"=")+B+"&":p+(J+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(i.j,i.u,i.A,i.m,i.W,i.s)}function wo(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Fs(i,e,t){let a,s=!0;for(;!i.J&&i.C<t.length;){if(a=ma(i,t),a==kr){4==e&&(i.o=4,Nr(14),s=!1),It(i.j,i.m,null,"[Incomplete Response]");break}if(a==os){i.o=4,Nr(15),It(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}It(i.j,i.m,a,null),Ae(i,a)}wo(i)&&a!=kr&&a!=os&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Nr(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),$o(e),e.M=!0,Nr(11))):(It(i.j,i.m,t,"[Invalid Chunked Response]"),Oe(i),lo(i))}function ma(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?kr:(t=Number(e.substring(t,s)),isNaN(t)?os:(s+=1)+t>e.length?kr:(e=e.slice(s,s+t),i.C=s+t,e))}function dr(i){i.Y=Date.now()+i.P,Io(i,i.P)}function Io(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Jn(Me(i.lb,i),e)}function Do(i){i.B&&(re.clearTimeout(i.B),i.B=null)}function lo(i){0==i.l.H||i.J||Ao(i.l,i)}function Oe(i){Do(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,sn(i.V),yn(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ae(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||ji(t.i,i)))if(!i.K&&ji(t.i,i)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;Go(t),ws(t)}va(t),Nr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Jn(Me(t.ib,t),6e3));if(1>=ls(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else js(t,11)}else if((i.K||t.g==i)&&Go(t),!gt(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let B=a[e];if(t.V=B[0],B=B[1],2==t.H)if("c"==B[0]){t.K=B[1],t.pa=B[2];const J=B[3];null!=J&&(t.ra=J,t.l.info("VER="+t.ra));const Ee=B[4];null!=Ee&&(t.Ga=Ee,t.l.info("SVER="+t.Ga));const Ze=B[5];null!=Ze&&"number"==typeof Ze&&0<Ze&&(t.L=s=1.5*Ze,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const pt=i.g;if(pt){const $t=pt.g?pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($t){var c=s.i;c.g||-1==$t.indexOf("spdy")&&-1==$t.indexOf("quic")&&-1==$t.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(hi(c,c.h),c.h=null))}if(s.F){const dn=pt.g?pt.g.getResponseHeader("X-HTTP-Session-Id"):null;dn&&(s.Da=dn,cr(s.I,s.F,dn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var p=i;if((s=t).wa=eo(s,s.J?s.pa:null,s.Y),p.K){ho(s.i,p);var D=p,N=s.L;N&&D.setTimeout(N),D.B&&(Do(D),dr(D)),s.g=p}else Va(s);0<t.j.length&&wi(t)}else"stop"!=B[0]&&"close"!=B[0]||js(t,7);else 3==t.H&&("stop"==B[0]||"close"==B[0]?"stop"==B[0]?js(t,7):Xs(t):"noop"!=B[0]&&t.h&&t.h.Aa(B),t.A=0)}Gr()}catch{}}function Lt(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ue(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function vt(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ue(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function He(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ue(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],i)}(te=$r.prototype).setTimeout=function(i){this.P=i},te.nb=function(i){i=i.target;const e=this.M;e&&3==k(i)?e.l():this.Pa(i)},te.Pa=function(i){try{if(i==this.g)e:{const J=k(this.g);var e=this.g.Ia();if(this.g.da(),!(3>J)&&(3!=J||Ge||this.g&&(this.h.h||this.g.ja()||O(this.g)))){this.J||4!=J||7==e||Gr(),Do(this);var t=this.g.da();this.ca=t;t:if(wo(this)){var s=O(this.g);i="";var a=s.length,c=4==k(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oe(this),lo(this);var p="";break t}this.h.i=new re.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=i,this.C=0,p=this.h.g}else p=this.g.ja();if(this.i=200==t,function St(i,e,t,s,a,c,p){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.W,J,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gt(D)){var B=D;break t}}B=null}if(!(t=B)){this.i=!1,this.o=3,Nr(12),Oe(this),lo(this);break e}It(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ae(this,t)}this.S?(Fs(this,J,p),Ge&&this.i&&3==J&&(Ut(this.U,this.V,"tick",this.mb),this.V.start())):(It(this.j,this.m,p,null),Ae(this,p)),4==J&&Oe(this),this.i&&!this.J&&(4==J?Ao(this.l,this):(this.i=!1,dr(this)))}else(function M(i){const e={};i=(i.g&&2<=k(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(gt(i[s]))continue;var t=ee(i[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function xt(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Nr(12)):(this.o=0,Nr(13)),Oe(this),lo(this)}}}catch{}},te.mb=function(){if(this.g){var i=k(this.g),e=this.g.ja();this.C<e.length&&(Do(this),Fs(this,i,e),this.i&&4!=i&&dr(this))}},te.cancel=function(){this.J=!0,Oe(this)},te.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function wn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gr(),Nr(17)),Oe(this),this.o=2,lo(this)):Io(this,this.Y-i)};var An=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tr(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof tr){this.h=i.h,ei(this,i.j),this.s=i.s,this.g=i.g,li(this,i.m),this.l=i.l;var e=i.i,t=new Ls;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pi(this,t),this.o=i.o}else i&&(e=String(i).match(An))?(this.h=!1,ei(this,e[1]||"",!0),this.s=ci(e[2]||""),this.g=ci(e[3]||"",!0),li(this,e[4]),this.l=ci(e[5]||"",!0),pi(this,e[6]||"",!0),this.o=ci(e[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}function Fn(i){return new tr(i)}function ei(i,e,t){i.j=t?ci(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function li(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function pi(i,e,t){e instanceof Ls?(i.i=e,function _s(i,e){e&&!i.j&&(Zi(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(qs(this,s),qi(this,a,t))},i)),i.j=e}(i.i,i.h)):(t||(e=di(e,Vo)),i.i=new Ls(e,i.h))}function cr(i,e,t){i.i.set(e,t)}function ys(i){return cr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ci(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function di(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ea),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ea(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}tr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(di(e,as,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(di(e,as,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(di(t,"/"==t.charAt(0)?us:Lo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",di(t,Co)),i.join("")};var as=/[#\/\?@]/g,Lo=/[#\?:]/g,us=/[#\?]/g,Vo=/[#\?@]/g,Co=/#/g;function Ls(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Zi(i){i.g||(i.g=new Map,i.h=0,i.i&&function ir(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var c=i[t].substring(0,s);a=i[t].substring(s+1)}else c=i[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qs(i,e){Zi(i),e=vs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Fr(i,e){return Zi(i),e=vs(i,e),i.g.has(e)}function qi(i,e,t){qs(i,e),0<t.length&&(i.i=null,i.g.set(vs(i,e),Et(t)),i.h+=t.length)}function vs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ta(i){this.l=i||pr,i=re.PerformanceNavigationTiming?0<(i=re.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(te=Ls.prototype).add=function(i,e){Zi(this),this.i=null,i=vs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},te.forEach=function(i,e){Zi(this),this.g.forEach(function(t,s){t.forEach(function(a){i.call(e,a,s,this)},this)},this)},te.ta=function(){Zi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=i[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},te.Z=function(i){Zi(this);let e=[];if("string"==typeof i)Fr(this,i)&&(e=e.concat(this.g.get(vs(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},te.set=function(i,e){return Zi(this),this.i=null,Fr(this,i=vs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},te.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var a=c;""!==p[s]&&(a+="="+encodeURIComponent(String(p[s]))),i.push(a)}}return this.i=i.join("&")};var pr=10;function Ys(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ls(i){return i.h?1:i.g?i.g.size:0}function ji(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function hi(i,e){i.g?i.g.add(e):i.h=e}function ho(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function bo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return Et(i.i)}function ti(){this.g=new class{stringify(i){return re.JSON.stringify(i,void 0)}parse(i){return re.JSON.parse(i,void 0)}}}function ya(i,e,t){const s=t||"";try{Lt(i,function(a,c){let p=a;me(a)&&(p=qn(a)),e.push(s+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Qs(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function gi(i){this.l=i.fc||null,this.j=i.ob||!1}function zr(i,e){Yt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Es,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ta.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},mt(gi,Ni),gi.prototype.g=function(){return new zr(this.l,this.j)},gi.prototype.i=function(i){return function(){return i}}({}),mt(zr,Yt);var Es=0;function Pn(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Js(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Vs(i)}function Vs(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(te=zr.prototype).open=function(i,e){if(this.readyState!=Es)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Vs(this)},te.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Js(this)),this.readyState=Es},te.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pn(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},te.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Js(this):Vs(this),3==this.readyState&&Pn(this)}},te.Za=function(i){this.g&&(this.response=this.responseText=i,Js(this))},te.Ya=function(i){this.g&&(this.response=i,Js(this))},te.ka=function(){this.g&&Js(this)},te.setRequestHeader=function(i,e){this.v.append(i,e)},te.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},te.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ei=re.JSON.parse;function Lr(i){Yt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Us,this.L=this.M=!1}mt(Lr,Yt);var Us="",To=/^https?$/i,cs=["POST","PUT"];function Dt(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Xn(i),Yi(i)}function Xn(i){i.F||(i.F=!0,Jt(i,"complete"),Jt(i,"error"))}function jo(i){if(i.h&&typeof Pe<"u"&&(!i.C[1]||4!=k(i)||2!=i.da()))if(i.v&&4==k(i))oe(i.La,0,i);else if(Jt(i,"readystatechange"),4==k(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===p){var a=String(i.I).match(An)[1]||null;!a&&re.self&&re.self.location&&(a=re.self.location.protocol.slice(0,-1)),s=!To.test(a?a.toLowerCase():"")}t=s}if(t)Jt(i,"complete"),Jt(i,"success");else{i.m=6;try{var c=2<k(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Xn(i)}}finally{Yi(i)}}}function Yi(i,e){if(i.g){Or(i);const t=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Jt(i,"ready");try{t.onreadystatechange=s}catch{}}}function Or(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(re.clearTimeout(i.A),i.A=null)}function k(i){return i.g?i.g.readyState:0}function O(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Us:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Y(i){let e="";return _r(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function it(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Y(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):cr(i,e,t))}function an(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Qn(i){this.Ga=0,this.j=[],this.l=new Ue,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=an("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=an("baseRetryDelayMs",5e3,i),this.hb=an("retryDelaySeedMs",1e4,i),this.eb=an("forwardChannelMaxRetries",2,i),this.xa=an("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new ta(i&&i.concurrentRequestLimit),this.Ja=new ti,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xs(i){if(mi(i),3==i.H){var e=i.W++,t=Fn(i.I);if(cr(t,"SID",i.K),cr(t,"RID",e),cr(t,"TYPE","terminate"),ni(i,t),(e=new $r(i,i.l,e)).L=2,e.v=ys(Fn(t)),t=!1,re.navigator&&re.navigator.sendBeacon)try{t=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&re.Image&&((new Image).src=e.v,t=!0),t||(e.g=zo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),dr(e)}_a(i)}function ws(i){i.g&&($o(i),i.g.cancel(),i.g=null)}function mi(i){ws(i),i.u&&(re.clearTimeout(i.u),i.u=null),Go(i),i.i.cancel(),i.m&&("number"==typeof i.m&&re.clearTimeout(i.m),i.m=null)}function wi(i){if(!Ys(i.i)&&!i.m){i.m=!0;var e=i.Na;Z||Te(),z||(Z(),z=!0),G.add(e,i),i.C=0}}function Bs(i,e){var t;t=e?e.m:i.W++;const s=Fn(i.I);cr(s,"SID",i.K),cr(s,"RID",t),cr(s,"AID",i.V),ni(i,s),i.o&&i.s&&it(s,i.o,i.s),t=new $r(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Is(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),hi(i.i,t),Bi(t,s,e)}function ni(i,e){i.na&&_r(i.na,function(t,s){cr(e,s,t)}),i.h&&Lt({},function(t,s){cr(e,s,t)})}function Is(i,e,t){t=Math.min(i.j.length,t);var s=i.h?Me(i.h.Va,i.h,i):null;e:{var a=i.j;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].g,p.push("ofs="+c)):c=0:p.push("ofs="+c);let D=!0;for(let N=0;N<t;N++){let B=a[N].g;const J=a[N].map;if(B-=c,0>B)c=Math.max(0,a[N].g-100),D=!1;else try{ya(J,p,"req"+B+"_")}catch{s&&s(J)}}if(D){s=p.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,s}function Va(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Z||Te(),z||(Z(),z=!0),G.add(e,i),i.A=0}}function va(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Jn(Me(i.Ma,i),Fi(i,i.A)),i.A++,0))}function $o(i){null!=i.B&&(re.clearTimeout(i.B),i.B=null)}function Ho(i){i.g=new $r(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Fn(i.wa);cr(e,"RID","rpc"),cr(e,"SID",i.K),cr(e,"AID",i.V),cr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&cr(e,"TO",i.qa),cr(e,"TYPE","xmlhttp"),ni(i,e),i.o&&i.s&&it(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=ys(Fn(e)),t.s=null,t.S=!0,Zs(t,i)}function Go(i){null!=i.v&&(re.clearTimeout(i.v),i.v=null)}function Ao(i,e){var t=null;if(i.g==e){Go(i),$o(i),i.g=null;var s=2}else{if(!ji(i.i,e))return;t=e.F,ho(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=i.C;Jt(s=Bn(),new Ns(s,t)),wi(i)}else Va(i);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function Qi(i,e){return!(ls(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Jn(Me(i.Na,i,e),Fi(i,i.C)),i.C++,0)))}(i,e)||2==s&&va(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:js(i,5);break;case 4:js(i,10);break;case 3:js(i,6);break;default:js(i,2)}}function Fi(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function js(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var s=Me(i.pb,i);t||(t=new tr("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||ei(t,"https"),ys(t)),function Uo(i,e){const t=new Ue;if(re.Image){const s=new Image;s.onload=Ct(Qs,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Ct(Qs,t,s,"TestLoadImage: error",!1,e),s.onabort=Ct(Qs,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Ct(Qs,t,s,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Nr(2);i.H=0,i.h&&i.h.za(e),_a(i),mi(i)}function _a(i){if(i.H=0,i.ma=[],i.h){const e=bo(i.i);(0!=e.length||0!=i.j.length)&&(Ve(i.ma,e),Ve(i.ma,i.j),i.i.i.length=0,Et(i.j),i.j.length=0),i.h.ya()}}function eo(i,e,t){var s=t instanceof tr?Fn(t):new tr(t);if(""!=s.g)e&&(s.g=e+"."+s.g),li(s,s.m);else{var a=re.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new tr(null);s&&ei(c,s),e&&(c.g=e),a&&li(c,a),t&&(c.l=t),s=c}return e=i.Da,(t=i.F)&&e&&cr(s,t,e),cr(s,"VER",i.ra),ni(i,s),s}function zo(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Lr(t&&i.Ha&&!i.va?new gi({ob:!0}):i.va)).Oa(i.J),e}function fo(){}function So(){if(je&&!(10<=Number(Rn)))throw Error("Environmental error: no available transport.")}function xi(i,e){Yt.call(this),this.g=new Qn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!gt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new na(this)}function ds(i){Mi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ua(){jr.call(this),this.status=1}function na(i){this.g=i}function Ii(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vr(i,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=i.g[3],p=(e=i.g[0])+(c^(t=i.g[1])&((a=i.g[2])^c))+s[0]+3614090360&4294967295;p=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(p<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((c=(e=t+((p=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((a=c+((p=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+c&4294967295}function Er(i,e){this.h=e;for(var t=[],s=!0,a=i.length-1;0<=a;a--){var c=0|i[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(te=Lr.prototype).Oa=function(i){this.M=i},te.ha=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ss.g(),this.C=function Ar(i){return i.h||(i.h=i.i())}(this.u?this.u:ss),this.g.onreadystatechange=Me(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void Dt(this,c)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=re.FormData&&i instanceof re.FormData,!(0<=ot(cs,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Or(this),0<this.B&&((this.L=function Bo(i){return je&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Me(this.ua,this)):this.A=oe(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Dt(this,c)}},te.ua=function(){typeof Pe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jt(this,"timeout"),this.abort(8))},te.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Jt(this,"complete"),Jt(this,"abort"),Yi(this))},te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yi(this,!0)),Lr.$.N.call(this)},te.La=function(){this.s||(this.G||this.v||this.l?jo(this):this.kb())},te.kb=function(){jo(this)},te.isActive=function(){return!!this.g},te.da=function(){try{return 2<k(this)?this.g.status:-1}catch{return-1}},te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},te.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ei(e)}},te.Ia=function(){return this.m},te.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(te=Qn.prototype).ra=8,te.H=1,te.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new $r(this,this.l,i);let c=this.s;if(this.U&&(c?(c=bn(c),ar(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Is(this,a,e),cr(t=Fn(this.I),"RID",i),cr(t,"CVER",22),this.F&&cr(t,"X-HTTP-Session-Id",this.F),ni(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(Y(c)))+"&"+e:this.o&&it(t,this.o,c)),hi(this.i,a),this.bb&&cr(t,"TYPE","init"),this.P?(cr(t,"$req",e),cr(t,"SID","null"),a.aa=!0,Bi(a,t,null)):Bi(a,t,e),this.H=2}}else 3==this.H&&(i?Bs(this,i):0==this.j.length||Ys(this.i)||Bs(this))},te.Ma=function(){if(this.u=null,Ho(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Jn(Me(this.jb,this),i)}},te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nr(10),ws(this),Ho(this))},te.ib=function(){null!=this.v&&(this.v=null,ws(this),va(this),Nr(19))},te.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Nr(2)):(this.l.info("Failed to ping google.com"),Nr(1))},te.isActive=function(){return!!this.h&&this.h.isActive(this)},(te=fo.prototype).Ba=function(){},te.Aa=function(){},te.za=function(){},te.ya=function(){},te.isActive=function(){return!0},te.Va=function(){},So.prototype.g=function(i,e){return new xi(i,e)},mt(xi,Yt),xi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Nr(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=eo(i,null,i.Y),wi(i)},xi.prototype.close=function(){Xs(this.g)},xi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=qn(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&wi(e)},xi.prototype.N=function(){this.g.h=null,delete this.j,Xs(this.g),delete this.g,xi.$.N.call(this)},mt(ds,Mi),mt(Ua,jr),mt(na,fo),na.prototype.Ba=function(){Jt(this.g,"a")},na.prototype.Aa=function(i){Jt(this.g,new ds(i))},na.prototype.za=function(i){Jt(this.g,new Ua)},na.prototype.ya=function(){Jt(this.g,"b")},mt(Ii,function gr(){this.blockSize=-1}),Ii.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ii.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)vr(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(s[a++]=i.charCodeAt(c++),a==this.blockSize){vr(this,s),a=0;break}}else for(;c<e;)if(s[a++]=i[c++],a==this.blockSize){vr(this,s),a=0;break}}this.h=a,this.i+=e},Ii.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)i[t++]=this.g[e]>>>s&255;return i};var ra={};function Mo(i){return-128<=i&&128>i?function Vn(i,e){var t=ra;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new Er([0|e],0>e?-1:0)}):new Er([0|i],0>i?-1:0)}function Ri(i){if(isNaN(i)||!isFinite(i))return Cs;if(0>i)return Di(Ri(-i));for(var e=[],t=1,s=0;i>=t;s++)e[s]=i/t|0,t*=Ds;return new Er(e,0)}var Ds=4294967296,Cs=Mo(0),to=Mo(1),ia=Mo(16777216);function hs(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function $i(i){return-1==i.h}function Di(i){for(var e=i.g.length,t=[],s=0;s<e;s++)t[s]=~i.g[s];return new Er(t,~i.h).add(to)}function Oi(i,e){return i.add(Di(e))}function no(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Wo(i,e){this.g=i,this.h=e}function ro(i,e){if(hs(e))throw Error("division by zero");if(hs(i))return new Wo(Cs,Cs);if($i(i))return e=ro(Di(i),e),new Wo(Di(e.g),Di(e.h));if($i(e))return e=ro(i,Di(e)),new Wo(Di(e.g),e.h);if(30<i.g.length){if($i(i)||$i(e))throw Error("slowDivide_ only works with positive integers.");for(var t=to,s=e;0>=s.X(i);)t=po(t),s=po(s);var a=xo(t,1),c=xo(s,1);for(s=xo(s,2),t=xo(t,2);!hs(s);){var p=c.add(s);0>=p.X(i)&&(a=a.add(t),c=p),s=xo(s,1),t=xo(t,1)}return e=Oi(i,a.R(e)),new Wo(a,e)}for(a=Cs;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),p=(c=Ri(t)).R(e);$i(p)||0<p.X(i);)p=(c=Ri(t-=s)).R(e);hs(c)&&(c=to),a=a.add(c),i=Oi(i,p)}return new Wo(a,i)}function po(i){for(var e=i.g.length+1,t=[],s=0;s<e;s++)t[s]=i.D(s)<<1|i.D(s-1)>>>31;return new Er(t,i.h)}function xo(i,e){var t=e>>5;e%=32;for(var s=i.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?i.D(c+t)>>>e|i.D(c+t+1)<<32-e:i.D(c+t);return new Er(a,i.h)}(te=Er.prototype).ea=function(){if($i(this))return-Di(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);i+=(0<=s?s:Ds+s)*e,e*=Ds}return i},te.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(hs(this))return"0";if($i(this))return"-"+Di(this).toString(i);for(var e=Ri(Math.pow(i,6)),t=this,s="";;){var a=ro(t,e).g,c=((0<(t=Oi(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(hs(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},te.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},te.X=function(i){return $i(i=Oi(this,i))?-1:hs(i)?0:1},te.abs=function(){return $i(this)?Di(this):this},te.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&i.D(a)),p=(c>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=p>>>16,t[a]=(p&=65535)<<16|(c&=65535)}return new Er(t,-2147483648&t[t.length-1]?-1:0)},te.R=function(i){if(hs(this)||hs(i))return Cs;if($i(this))return $i(i)?Di(this).R(Di(i)):Di(Di(this).R(i));if($i(i))return Di(this.R(Di(i)));if(0>this.X(ia)&&0>i.X(ia))return Ri(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var c=this.D(s)>>>16,p=65535&this.D(s),D=i.D(a)>>>16,N=65535&i.D(a);t[2*s+2*a]+=p*N,no(t,2*s+2*a),t[2*s+2*a+1]+=c*N,no(t,2*s+2*a+1),t[2*s+2*a+1]+=p*D,no(t,2*s+2*a+1),t[2*s+2*a+2]+=c*D,no(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Er(t,0)},te.gb=function(i){return ro(this,i).h},te.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&i.D(s);return new Er(t,this.h&i.h)},te.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|i.D(s);return new Er(t,this.h|i.h)},te.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^i.D(s);return new Er(t,this.h^i.h)},So.prototype.createWebChannel=So.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,ks.COMPLETE="complete",Ki.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Yt.prototype.listen=Yt.prototype.O,Lr.prototype.listenOnce=Lr.prototype.P,Lr.prototype.getLastError=Lr.prototype.Sa,Lr.prototype.getLastErrorCode=Lr.prototype.Ia,Lr.prototype.getStatus=Lr.prototype.da,Lr.prototype.getResponseJson=Lr.prototype.Wa,Lr.prototype.getResponseText=Lr.prototype.ja,Lr.prototype.send=Lr.prototype.ha,Lr.prototype.setWithCredentials=Lr.prototype.Oa,Ii.prototype.digest=Ii.prototype.l,Ii.prototype.reset=Ii.prototype.reset,Ii.prototype.update=Ii.prototype.j,Er.prototype.add=Er.prototype.add,Er.prototype.multiply=Er.prototype.R,Er.prototype.modulo=Er.prototype.gb,Er.prototype.compare=Er.prototype.X,Er.prototype.toNumber=Er.prototype.ea,Er.prototype.toString=Er.prototype.toString,Er.prototype.getBits=Er.prototype.D,Er.fromNumber=Ri,Er.fromString=function Ea(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Di(Ea(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ri(Math.pow(e,8)),s=Cs,a=0;a<i.length;a+=8){var c=Math.min(8,i.length-a),p=parseInt(i.substring(a,a+c),e);8>c?(c=Ri(Math.pow(e,c)),s=s.R(c).add(Ri(p))):s=(s=s.R(t)).add(Ri(p))}return s};var ru=Ce.createWebChannelTransport=function(){return new So},b=Ce.getStatEventTarget=function(){return Bn()},U=Ce.ErrorCode=ui,x=Ce.EventType=ks,K=Ce.Event=Yn,Ie=Ce.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},at=Ce.FetchXmlHttpFactory=gi,_t=Ce.WebChannel=Ki,vn=Ce.XhrIo=Lr,mr=Ce.Md5=Ii,rr=Ce.Integer=Er;const wr="@firebase/firestore";class In{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");let Sr="9.23.0";const Hn=new ce.Yd("@firebase/firestore");function Yr(){return Hn.logLevel}function fs(i){Hn.setLogLevel(i)}function Mt(i,...e){if(Hn.logLevel<=ce.in.DEBUG){const t=e.map(go);Hn.debug(`Firestore (${Sr}): ${i}`,...t)}}function Ir(i,...e){if(Hn.logLevel<=ce.in.ERROR){const t=e.map(go);Hn.error(`Firestore (${Sr}): ${i}`,...t)}}function Vr(i,...e){if(Hn.logLevel<=ce.in.WARN){const t=e.map(go);Hn.warn(`Firestore (${Sr}): ${i}`,...t)}}function go(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function en(i="Unexpected state"){const e=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: `+i;throw Ir(e),new Error(e)}function pn(i,e){i||en()}function sa(i,e){i||en()}function Kt(i,e){return i}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends ae.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Su{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}}class wa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tl{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=B=>this.i!==a?(a=this.i,t(B)):Promise.resolve();let p=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new ri,e.enqueueRetryable(()=>c(this.currentUser))};const D=()=>{const B=p;e.enqueueRetryable((0,d.Z)(function*(){yield B.promise,yield c(s.currentUser)}))},N=B=>{Mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=B,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(B=>N(B)),setTimeout(()=>{if(!this.auth){const B=this.t.getImmediate({optional:!0});B?N(B):(Mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new ri)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pn("string"==typeof s.accessToken),new Su(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pn(null===e||"string"==typeof e),new In(e)}}class Ba{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=In.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class oa{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ba(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=c=>{null!=c.error&&Mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.T;return this.T=c.token,Mt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{Mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):Mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pn("string"==typeof t.token),this.T=t.token,new Pl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ii(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class yi{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=ii(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function kn(i,e){return i<e?-1:i>e?1:0}function bs(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}function ja(i){return i+"\0"}class Hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hr.fromMillis(Date.now())}static fromDate(e){return Hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Hr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _n(e)}static min(){return new _n(new Hr(0,0))}static max(){return new _n(new Hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ts{constructor(e,t,s){void 0===t?t=0:t>e.length&&en(),void 0===s?s=e.length-t:s>e.length-t&&en(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ts.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Sn extends Ts{construct(e,t,s){return new Sn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Rt(tt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Sn(t)}static emptyPath(){return new Sn([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Ts{construct(e,t,s){return new sr(e,t,s)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new Rt(tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new Rt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[a+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new Rt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=N,a+=2}else"`"===D?(p=!p,a++):"."!==D||p?(s+=D,a++):(c(),a++)}if(c(),p)throw new Rt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(t)}static emptyPath(){return new sr([])}}class Zt{constructor(e){this.path=e}static fromPath(e){return new Zt(Sn.fromString(e))}static fromName(e){return new Zt(Sn.fromString(e).popFirst(5))}static empty(){return new Zt(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zt(new Sn(e.slice()))}}class Ji{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Zo(i){return i.fields.find(e=>2===e.kind)}function Ia(i){return i.fields.filter(e=>2!==e.kind)}Ji.UNKNOWN_ID=-1;class Ro{constructor(e,t){this.fieldPath=e,this.kind=t}}class xu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xu(0,ps.min())}}function Ca(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=_n.fromTimestamp(1e9===s?new Hr(t+1,0):new Hr(t,s));return new ps(a,Zt.empty(),e)}function Ru(i){return new ps(i.readTime,i.key,-1)}class ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ps(_n.min(),Zt.empty(),-1)}static max(){return new ps(_n.max(),Zt.empty(),-1)}}function nl(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Zt.comparator(i.documentKey,e.documentKey),0!==t?t:kn(i.largestBatchId,e.largestBatchId))}const Ha="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qo(i){return si.apply(this,arguments)}function si(){return si=(0,d.Z)(function*(i){if(i.code!==tt.FAILED_PRECONDITION||i.message!==Ha)throw i;Mt("LocalStore","Unexpectedly lost primary lease")}),si.apply(this,arguments)}class Ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&en(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ye((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ye?t:Ye.resolve(t)}catch(t){return Ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ye.reject(t)}static resolve(e){return new Ye((t,s)=>{t(e)})}static reject(e){return new Ye((t,s)=>{s(e)})}static waitFor(e){return new Ye((t,s)=>{let a=0,c=0,p=!1;e.forEach(D=>{++a,D.next(()=>{++c,p&&c===a&&t()},N=>s(N))}),p=!0,c===a&&t()})}static or(e){let t=Ye.resolve(!1);for(const s of e)t=t.next(a=>a?Ye.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new Ye((s,a)=>{const c=e.length,p=new Array(c);let D=0;for(let N=0;N<c;N++){const B=N;t(e[B]).next(J=>{p[B]=J,++D,D===c&&s(p)},J=>a(J))}})}static doWhile(e,t){return new Ye((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class io{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ri,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ci(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=su(s.target.error);this.v.reject(new Ci(e,a))}}static open(e,t,s,a){try{return new io(t,e.transaction(a,s))}catch(c){throw new Ci(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Mt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iu(t)}}class so{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===so.S((0,ae.z$)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Mt("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ae.hl)())return!1;if(so.C())return!0;const e=(0,ae.z$)(),t=so.S(e),s=0<t&&t<10,a=so.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,d.Z)(function*(){return t.db||(Mt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{s(p.target.result)},c.onblocked=()=>{a(new Ci(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const D=p.target.error;a("VersionError"===D.name?new Rt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Rt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ci(e,D))},c.onupgradeneeded=p=>{Mt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.V.O(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{Mt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,d.Z)(function*(){const p="readonly"===t;let D=0;for(;;){++D;try{c.db=yield c.$(e);const N=io.open(c.db,e,p?"readonly":"readwrite",s),B=a(N).next(J=>(N.P(),J)).catch(J=>(N.abort(J),Ye.reject(J))).toPromise();return B.catch(()=>{}),yield N.R,B}catch(N){const B=N,J="FirebaseError"!==B.name&&D<3;if(Mt("SimpleDb","Transaction failed with error:",B.message,"Retrying:",J),c.close(),!J)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ga{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $s(this.L.delete())}}class Ci extends Rt{constructor(e,t){super(tt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Li(i){return"IndexedDbTransactionError"===i.name}class iu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Mt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Mt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),$s(s)}add(e){return Mt("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(void 0===t&&(t=null),Mt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Mt("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return Mt("SimpleDb","COUNT",this.store.name),$s(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.W(a,(p,D)=>{c.push(D)}).next(()=>c)}{const a=this.store.getAll(s.range);return new Ye((c,p)=>{a.onerror=D=>{p(D.target.error)},a.onsuccess=D=>{c(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Ye((a,c)=>{s.onerror=p=>{c(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}J(e,t){Mt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(c,p,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new Ye((s,a)=>{t.onerror=c=>{const p=su(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(D=>{D?p.continue():s()}):s()}})}W(e,t){const s=[];return new Ye((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const D=p.target.result;if(!D)return void a();const N=new Ga(D),B=t(D.primaryKey,D.value,N);if(B instanceof Ye){const J=B.catch(Ee=>(N.done(),Ye.reject(Ee)));s.push(J)}N.isDone?a():null===N.K?D.continue():D.continue(N.K)}}).next(()=>Ye.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(i){return new Ye((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const a=su(s.target.error);t(a)}})}let ba=!1;function su(i){const e=so.S((0,ae.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ba||(ba=!0,setTimeout(()=>{throw s},0)),s}}return i}class Ou{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Mt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,d.Z)(function*(){t.task=null;try{Mt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Li(s)?Mt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield qo(s)}yield t.et(6e4)}))}}class kl{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,d.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,c=!0;return Ye.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return Mt("IndexBackiller",`Processing collection: ${p}`),this.it(e,p,a).next(D=>{a-=D,s.add(p)});c=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.rt(a,c)).next(D=>(Mt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>p.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,c)=>{const p=Ru(c);nl(p,s)>0&&(s=p)}),new ps(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xi=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function za(i){return null==i}function aa(i){return 0===i&&1/i==-1/0}function _(i){return"number"==typeof i&&Number.isInteger(i)&&!aa(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function E(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=A(e)),e=y(i.get(t),e);return A(e)}function y(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function A(i){return i+"\x01\x01"}function P(i){const e=i.length;if(pn(e>=2),2===e)return pn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Sn.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const p=i.indexOf("\x01",c);switch((p<0||p>t)&&en(),i.charAt(p+1)){case"\x01":const D=i.substring(c,p);let N;0===a.length?N=D:(a+=D,N=a,a=""),s.push(N);break;case"\x10":a+=i.substring(c,p),a+="\0";break;case"\x11":a+=i.substring(c,p+1);break;default:en()}c=p+2}return new Sn(s)}const W=["userId","batchId"];function he(i,e){return[i,E(e)]}function ye(i,e,t){return[i,E(e),t]}const lt={},Gt=["prefixPath","collectionGroup","readTime","documentId"],Gn=["prefixPath","collectionGroup","documentId"],cn=["collectionGroup","readTime","prefixPath","documentId"],hr=["canonicalId","targetId"],As=["targetId","path"],fi=["path","targetId"],oo=["collectionId","parent"],Qr=["indexId","uid"],Pu=["uid","sequenceNumber"],Ta=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Aa=["indexId","uid","orderedDocumentKey"],il=["userId","collectionPath","documentId"],ou=["userId","collectionPath","largestBatchId"],Ss=["userId","collectionGroup","largestBatchId"],au=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vi=[...au,"documentOverlays"],Nu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=Nu,sl=[...Fl,"indexConfiguration","indexState","indexEntries"];class ua extends rl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hi(i,e){const t=Kt(i);return so.M(t.ht,e)}function Sa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Wa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ll(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Dr{constructor(e,t){this.comparator=e,this.root=t||vi.EMPTY}insert(e,t){return new Dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??vi.RED,this.left=a??vi.EMPTY,this.right=c??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new vi(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return vi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw en();const e=this.left.check();if(e!==this.right.check())throw en();return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1,vi.EMPTY=new class{constructor(){this.size=0}get key(){throw en()}get value(){throw en()}get color(){throw en()}get left(){throw en()}get right(){throw en()}copy(i,e,t,s,a){return this}insert(i,e,t){return new vi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oi{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(e){return new Vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new oi(this.comparator);return t.data=e,t}}class Vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oo(i){return i.hasNext()?i.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new es([])}unionWith(e){let t=new oi(sr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ol extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tc(){return typeof atob<"u"}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ol("Invalid base64 string: "+a):a}}(e);return new bi(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const lu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(i){if(pn(!!i),"string"==typeof i){let e=0;const t=lu.exec(i);if(pn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ai(i.seconds),nanos:ai(i.nanos)}}function ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ma(i){return"string"==typeof i?bi.fromBase64String(i):bi.fromUint8Array(i)}function ku(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fu(i){const e=i.mapValue.fields.__previous_value__;return ku(e)?Fu(e):e}function al(i){const e=mo(i.mapValue.fields.__local_write_time__.timestampValue);return new Hr(e.seconds,e.nanos)}class Ul{constructor(e,t,s,a,c,p,D,N,B){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=D,this.longPollingOptions=N,this.useFetchStreams=B}}class Yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xa={nullValue:"NULL_VALUE"};function ao(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ku(i)?4:td(i)?9007199254740991:10:en()}function yo(i,e){if(i===e)return!0;const t=ao(i);if(t!==ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return al(i).isEqual(al(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=mo(s.timestampValue),p=mo(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,Ma(i.bytesValue).isEqual(Ma(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return ai(s.geoPointValue.latitude)===ai(a.geoPointValue.latitude)&&ai(s.geoPointValue.longitude)===ai(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ai(s.integerValue)===ai(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=ai(s.doubleValue),p=ai(a.doubleValue);return c===p?aa(c)===aa(p):isNaN(c)&&isNaN(p)}return!1}(i,e);case 9:return bs(i.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(s,a){const c=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Sa(c)!==Sa(p))return!1;for(const D in c)if(c.hasOwnProperty(D)&&(void 0===p[D]||!yo(c[D],p[D])))return!1;return!0}(i,e);default:return en()}var a}function la(i,e){return void 0!==(i.values||[]).find(t=>yo(t,e))}function Jo(i,e){if(i===e)return 0;const t=ao(i),s=ao(e);if(t!==s)return kn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(i.booleanValue,e.booleanValue);case 2:return function(a,c){const p=ai(a.integerValue||a.doubleValue),D=ai(c.integerValue||c.doubleValue);return p<D?-1:p>D?1:p===D?0:isNaN(p)?isNaN(D)?0:-1:1}(i,e);case 3:return cu(i.timestampValue,e.timestampValue);case 4:return cu(al(i),al(e));case 5:return kn(i.stringValue,e.stringValue);case 6:return function(a,c){const p=Ma(a),D=Ma(c);return p.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),D=c.split("/");for(let N=0;N<p.length&&N<D.length;N++){const B=kn(p[N],D[N]);if(0!==B)return B}return kn(p.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const p=kn(ai(a.latitude),ai(c.latitude));return 0!==p?p:kn(ai(a.longitude),ai(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],D=c.values||[];for(let N=0;N<p.length&&N<D.length;++N){const B=Jo(p[N],D[N]);if(B)return B}return kn(p.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===Qo.mapValue&&c===Qo.mapValue)return 0;if(a===Qo.mapValue)return 1;if(c===Qo.mapValue)return-1;const p=a.fields||{},D=Object.keys(p),N=c.fields||{},B=Object.keys(N);D.sort(),B.sort();for(let J=0;J<D.length&&J<B.length;++J){const Ee=kn(D[J],B[J]);if(0!==Ee)return Ee;const Ze=Jo(p[D[J]],N[B[J]]);if(0!==Ze)return Ze}return kn(D.length,B.length)}(i.mapValue,e.mapValue);default:throw en()}}function cu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return kn(i,e);const t=mo(i),s=mo(e),a=kn(t.seconds,s.seconds);return 0!==a?a:kn(t.nanos,s.nanos)}function Ka(i){return du(i)}function du(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=mo(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ma(i.bytesValue).toBase64():"referenceValue"in i?Zt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let a="[",c=!0;for(const p of s.values||[])c?c=!1:a+=",",a+=du(p);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",p=!0;for(const D of a)p?p=!1:c+=",",c+=`${D}:${du(s.fields[D])}`;return c+"}"}(i.mapValue):en();var e}function Ra(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ed(i){return!!i&&"integerValue"in i}function ul(i){return!!i&&"arrayValue"in i}function hu(i){return!!i&&"nullValue"in i}function fu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ll(i){return!!i&&"mapValue"in i}function Vu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Wa(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Vu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ca(i){return"nullValue"in i?xa:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ra(Yo.empty(),Zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:en()}function nd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ra(Yo.empty(),Zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Qo:en()}function da(i,e){const t=Jo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bl(i,e){const t=Jo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ll(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=sr.emptyPath(),s={},a=[];e.forEach((p,D)=>{if(!t.isImmediateParentOf(D)){const N=this.getFieldsMap(t);this.applyChanges(N,s,a),s={},a=[],t=D.popLast()}p?s[D.lastSegment()]=Vu(p):a.push(D.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ll(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ll(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Wa(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new ts(Vu(this.value))}}function cl(i){const e=[];return Wa(i.fields,(t,s)=>{const a=new sr([t]);if(ll(s)){const c=cl(s.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new es(e)}class qr{constructor(e,t,s,a,c,p,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=p,this.documentState=D}static newInvalidDocument(e){return new qr(e,0,_n.min(),_n.min(),_n.min(),ts.empty(),0)}static newFoundDocument(e,t,s,a){return new qr(e,1,t,_n.min(),s,a,0)}static newNoDocument(e,t){return new qr(e,2,t,_n.min(),_n.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new qr(e,3,t,_n.min(),_n.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_n.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_n.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ns{constructor(e,t){this.position=e,this.inclusive=t}}function rd(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],p=i.position[a];if(s=c.field.isKeyField()?Zt.comparator(Zt.fromName(p.referenceValue),t.key):Jo(p,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function w(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!yo(i.position[t],e.position[t]))return!1;return!0}class T{constructor(e,t="asc"){this.field=e,this.dir=t}}function j(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class se{}class ve extends se{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ui(e,t,s):"array-contains"===t?new Oa(e,s):"in"===t?new gu(e,s):"not-in"===t?new Rf(e,s):"array-contains-any"===t?new Of(e,s):new ve(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ha(e,s):new pu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jo(t,this.value)):null!==t&&ao(this.value)===ao(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return en()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xe extends se{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new xe(e,t)}matches(e){return dt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dt(i){return"and"===i.op}function Xt(i){return"or"===i.op}function Qt(i){return En(i)&&dt(i)}function En(i){for(const e of i.filters)if(e instanceof xe)return!1;return!0}function Dn(i){if(i instanceof ve)return i.field.canonicalString()+i.op.toString()+Ka(i.value);if(Qt(i))return i.filters.map(e=>Dn(e)).join(",");{const e=i.filters.map(t=>Dn(t)).join(",");return`${i.op}(${e})`}}function zn(i,e){return i instanceof ve?(t=i,(s=e)instanceof ve&&t.op===s.op&&t.field.isEqual(s.field)&&yo(t.value,s.value)):i instanceof xe?function(t,s){return s instanceof xe&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,c,p)=>a&&zn(c,s.filters[p]),!0)}(i,e):void en();var t,s}function gs(i,e){const t=i.filters.concat(e);return xe.create(t,i.op)}function _i(i){return i instanceof ve?`${(e=i).field.canonicalString()} ${e.op} ${Ka(e.value)}`:i instanceof xe?function(e){return e.op.toString()+" {"+e.getFilters().map(_i).join(" ,")+"}"}(i):"Filter";var e}class Ui extends ve{constructor(e,t,s){super(e,t,s),this.key=Zt.fromName(s.referenceValue)}matches(e){const t=Zt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ha extends ve{constructor(e,t){super(e,"in",t),this.keys=uo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pu extends ve{constructor(e,t){super(e,"not-in",t),this.keys=uo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uo(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Zt.fromName(s.referenceValue))}class Oa extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ul(t)&&la(t.arrayValue,this.value)}}class gu extends ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&la(this.value.arrayValue,t)}}class Rf extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!la(this.value.arrayValue,t)}}class Of extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>la(this.value.arrayValue,s))}}class id{constructor(e,t=null,s=[],a=[],c=null,p=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=p,this.endAt=D,this.dt=null}}function jl(i,e=null,t=[],s=[],a=null,c=null,p=null){return new id(i,e,t,s,a,c,p)}function Pa(i){const e=Kt(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Dn(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),za(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),e.dt=t}return e.dt}function dl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!j(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!zn(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!w(i.startAt,e.startAt)&&w(i.endAt,e.endAt)}function Uu(i){return Zt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function hl(i,e){return i.filters.filter(t=>t instanceof ve&&t.field.isEqual(e))}function lh(i,e,t){let s=xa,a=!0;for(const c of hl(i,e)){let p=xa,D=!0;switch(c.op){case"<":case"<=":p=ca(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,D=!1;break;case"!=":case"not-in":p=xa}da({value:s,inclusive:a},{value:p,inclusive:D})<0&&(s=p,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=t.position[c];da({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function sd(i,e,t){let s=Qo,a=!0;for(const c of hl(i,e)){let p=Qo,D=!0;switch(c.op){case">=":case">":p=nd(c.value),D=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,D=!1;break;case"!=":case"not-in":p=Qo}Bl({value:s,inclusive:a},{value:p,inclusive:D})>0&&(s=p,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=t.position[c];Bl({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Za{constructor(e,t=null,s=[],a=[],c=null,p="F",D=null,N=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=p,this.startAt=D,this.endAt=N,this.wt=null,this._t=null}}function fl(i,e,t,s,a,c,p,D){return new Za(i,e,t,s,a,c,p,D)}function Bu(i){return new Za(i)}function ch(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ac(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function v(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(i){return null!==i.collectionGroup}function g(i){const e=Kt(i);if(null===e.wt){e.wt=[];const t=v(e),s=Ac(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new T(t)),e.wt.push(new T(sr.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new T(sr.keyField(),c))}}}return e.wt}function I(i){const e=Kt(i);if(!e._t)if("F"===e.limitType)e._t=jl(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of g(e))t.push(new T(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new ns(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ns(e.startAt.position,e.startAt.inclusive):null;e._t=jl(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function $(i,e){e.getFirstInequalityField(),v(i);const t=i.filters.concat([e]);return new Za(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function X(i,e,t){return new Za(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function ke(i,e){return dl(I(i),I(e))&&i.limitType===e.limitType}function ct(i){return`${Pa(I(i))}|lt:${i.limitType}`}function Ht(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>_i(s)).join(", ")}]`),za(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),`Target(${t})`}(I(i))}; limitType=${i.limitType})`}function rn(i,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Zt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(i,e)&&function(t,s){for(const a of g(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(a,c,p){const D=rd(a,c,p);return a.inclusive?D<=0:D<0}(t.startAt,g(t),s)||t.endAt&&!function(a,c,p){const D=rd(a,c,p);return a.inclusive?D>=0:D>0}(t.endAt,g(t),s)));var t,s}function Mn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function yr(i){return(e,t)=>{let s=!1;for(const a of g(i)){const c=vo(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function vo(i,e,t){const s=i.field.isKeyField()?Zt.comparator(e.key,t.key):function(a,c,p){const D=c.data.field(a),N=p.data.field(a);return null!==D&&null!==N?Jo(D,N):en()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return en()}}class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const $l=new Dr(Zt.comparator);function Ms(){return $l}const Hl=new Dr(Zt.comparator);function mu(...i){let e=Hl;for(const t of i)e=e.insert(t.key,t);return e}function od(i){let e=Hl;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xo(){return ju()}function Sc(){return ju()}function ju(){return new Hs(i=>i.toString(),(i,e)=>i.isEqual(e))}const qa=new Dr(Zt.comparator),ad=new oi(Zt.comparator);function ur(...i){let e=ad;for(const t of i)e=e.add(t);return e}const ud=new oi(kn);function dh(){return ud}function ld(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function fg(i){return{integerValue:""+i}}function Pf(i,e){return _(e)?fg(e):ld(i,e)}class cd{constructor(){this._=void 0}}function pg(i,e,t){return i instanceof $u?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&ku(a)&&(a=Fu(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):i instanceof yu?Ff(i,e):i instanceof Hu?hh(i,e):function(s,a){const c=kf(s,a),p=Mc(c)+Mc(s.gt);return ed(c)&&ed(s.gt)?fg(p):ld(s.serializer,p)}(i,e)}function Nf(i,e,t){return i instanceof yu?Ff(i,e):i instanceof Hu?hh(i,e):t}function kf(i,e){return i instanceof pl?ed(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class $u extends cd{}class yu extends cd{constructor(e){super(),this.elements=e}}function Ff(i,e){const t=gg(e);for(const s of i.elements)t.some(a=>yo(a,s))||t.push(s);return{arrayValue:{values:t}}}class Hu extends cd{constructor(e){super(),this.elements=e}}function hh(i,e){let t=gg(e);for(const s of i.elements)t=t.filter(a=>!yo(a,s));return{arrayValue:{values:t}}}class pl extends cd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Mc(i){return ai(i.integerValue||i.doubleValue)}function gg(i){return ul(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xc{constructor(e,t){this.field=e,this.transform=t}}class xy{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Gl{}function fh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new gl(i.key,Ti.none()):new Oc(i.key,i.data,Ti.none());{const t=i.data,s=ts.empty();let a=new oi(sr.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?s.delete(c):s.set(c,p),a=a.add(c)}return new Ya(i.key,s,new es(a.toArray()),Ti.none())}}function zl(i,e,t){i instanceof Oc?function(s,a,c){const p=s.value.clone(),D=Lf(s.fieldTransforms,a,c.transformResults);p.setAll(D),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):i instanceof Ya?function(s,a,c){if(!Rc(s.precondition,a))return void a.convertToUnknownDocument(c.version);const p=Lf(s.fieldTransforms,a,c.transformResults),D=a.data;D.setAll(mg(s)),D.setAll(p),a.convertToFoundDocument(c.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dd(i,e,t,s){return i instanceof Oc?function(a,c,p,D){if(!Rc(a.precondition,c))return p;const N=a.value.clone(),B=hd(a.fieldTransforms,D,c);return N.setAll(B),c.convertToFoundDocument(c.version,N).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ya?function(a,c,p,D){if(!Rc(a.precondition,c))return p;const N=hd(a.fieldTransforms,D,c),B=c.data;return B.setAll(mg(a)),B.setAll(N),c.convertToFoundDocument(c.version,B).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(J=>J.field))}(i,e,t,s):(p=t,Rc(i.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function Ry(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=kf(s.transform,a||null);null!=c&&(null===t&&(t=ts.empty()),t.set(s.field,c))}return t||null}function Oy(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&bs(t,s,(a,c)=>function My(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof yu&&s instanceof yu||t instanceof Hu&&s instanceof Hu?bs(t.elements,s.elements,yo):t instanceof pl&&s instanceof pl?yo(t.gt,s.gt):t instanceof $u&&s instanceof $u);var t,s}(a,c))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Oc extends Gl{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ya extends Gl{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function mg(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Lf(i,e,t){const s=new Map;pn(i.length===t.length);for(let a=0;a<t.length;a++){const c=i[a],p=c.transform,D=e.data.field(c.field);s.set(c.field,Nf(p,D,t[a]))}return s}function hd(i,e,t){const s=new Map;for(const a of i){const c=a.transform,p=t.data.field(a.field);s.set(a.field,pg(c,p,e))}return s}class gl extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ph extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&zl(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Sc();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let D=this.applyToLocalView(p,c.mutatedFields);D=t.has(a.key)?null:D;const N=fh(p,D);null!==N&&s.set(a.key,N),p.isValidDocument()||p.convertToNoDocument(_n.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ur())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(t,s)=>Oy(t,s))&&bs(this.baseMutations,e.baseMutations,(t,s)=>Oy(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pn(e.mutations.length===s.length);let a=qa;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,s[p].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,t){this.count=e,this.unchangedNames=t}}var ms,Ur;function yg(i){switch(i){default:return en();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function Gu(i){if(void 0===i)return Ir("GRPC error has no .code"),tt.UNKNOWN;switch(i){case ms.OK:return tt.OK;case ms.CANCELLED:return tt.CANCELLED;case ms.UNKNOWN:return tt.UNKNOWN;case ms.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case ms.INTERNAL:return tt.INTERNAL;case ms.UNAVAILABLE:return tt.UNAVAILABLE;case ms.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case ms.NOT_FOUND:return tt.NOT_FOUND;case ms.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case ms.ABORTED:return tt.ABORTED;case ms.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case ms.DATA_LOSS:return tt.DATA_LOSS;default:return en()}}(Ur=ms||(ms={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";class Wl{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vh}static getOrCreateInstance(){return null===vh&&(vh=new Wl),vh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vh=null;function ky(){return new TextEncoder}const H_=new rr([4294967295,4294967295],0);function Fy(i){const e=ky().encode(i),t=new mr;return t.update(e),new Uint8Array(t.digest())}function Ly(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new rr([t,s],0),new rr([a,c],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pc(`Invalid padding: ${t}`);if(s<0)throw new Pc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Pc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Pc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=rr.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(rr.fromNumber(s)));return 1===a.compare(H_)&&(a=new rr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const p=this.Et(s,a,c);if(!this.At(p))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new vg(c,a,t);return s.forEach(D=>p.insert(D)),p}insert(e){if(0===this.It)return;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const p=this.Et(s,a,c);this.Rt(p)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fd(_n.min(),a,new Dr(kn),Ms(),ur())}}class pd{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pd(s,t,ur(),ur(),ur())}}class _h{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _g{constructor(e,t){this.targetId=e,this.Vt=t}}class Eh{constructor(e,t,s=bi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class vu{constructor(){this.St=0,this.Dt=Uf(),this.Ct=bi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ur(),t=ur(),s=ur();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:en()}}),new pd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Uf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ms(),this.zt=Vf(),this.Wt=new Dr(kn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:en()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,c=this.se(s);if(c){const p=c.target;if(Uu(p))if(0===a){const D=new Zt(p.path);this.Yt(s,D,qr.newNoDocument(D,_n.min()))}else pn(1===a);else{const D=this.ie(s);if(D!==a){const N=this.re(e,D);0!==N&&(this.ee(s),this.Wt=this.Wt.insert(s,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(B,J,Ee){var Ze,pt,$t,dn,gn,fr;const Br={localCacheCount:J,existenceFilterCount:Ee.count},Cr=Ee.unchangedNames;return Cr&&(Br.bloomFilter={applied:0===B,hashCount:null!==(Ze=Cr?.hashCount)&&void 0!==Ze?Ze:0,bitmapLength:null!==(dn=null===($t=null===(pt=Cr?.bits)||void 0===pt?void 0:pt.bitmap)||void 0===$t?void 0:$t.length)&&void 0!==dn?dn:0,padding:null!==(fr=null===(gn=Cr?.bits)||void 0===gn?void 0:gn.padding)&&void 0!==fr?fr:0}),Br}(N,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:c="",padding:p=0},hashCount:D=0}=s;let N,B;try{N=Ma(c).toUint8Array()}catch(J){if(J instanceof ol)return Vr("Decoding the base64 bloom filter in existence filter failed ("+J.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw J}try{B=new vg(N,p,D)}catch(J){return Vr(J instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",J),1}return 0===B.It?1:a!==t-this.oe(e.targetId,B)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(c=>{const p=this.Gt.ue(),D=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;t.vt(D)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,p)=>{const D=this.se(p);if(D){if(c.current&&Uu(D.target)){const N=new Zt(D.target.path);null!==this.jt.get(N)||this.ae(p,N)||this.Yt(p,N,qr.newNoDocument(N,e))}c.Mt&&(t.set(p,c.Ot()),c.Ft())}});let s=ur();this.zt.forEach((c,p)=>{let D=!0;p.forEachWhile(N=>{const B=this.se(N);return!B||"TargetPurposeLimboResolution"===B.purpose||(D=!1,!1)}),D&&(s=s.add(c))}),this.jt.forEach((c,p)=>p.setReadTime(e));const a=new fd(e,t,this.Wt,this.jt,s);return this.jt=Ms(),this.zt=Vf(),this.Wt=new Dr(kn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new vu,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new oi(kn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Mt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new vu),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new Dr(Zt.comparator)}function Uf(){return new Dr(Zt.comparator)}const Eg={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z_={and:"AND",or:"OR"};class W_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(i,e){return i.useProto3Json||za(e)?e:{value:e}}function ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function K_(i,e){return ml(i,e.toTimestamp())}function Gi(i){return pn(!!i),_n.fromTimestamp(function(e){const t=mo(e);return new Hr(t.seconds,t.nanos)}(i))}function Bf(i,e){return(t=i,new Sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wg(i){const e=Sn.fromString(i);return pn(Gf(e)),e}function yd(i,e){return Bf(i.databaseId,e.path)}function _u(i,e){const t=wg(e);if(t.get(1)!==i.databaseId.projectId)throw new Rt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Rt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Zt(Ih(t))}function wh(i,e){return Bf(i.databaseId,e)}function vd(i){const e=wg(i);return 4===e.length?Sn.emptyPath():Ih(e)}function _d(i){return new Sn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ih(i){return pn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ig(i,e,t){return{name:yd(i,e),fields:t.value.mapValue.fields}}function rs(i,e,t){const s=_u(i,e.name),a=Gi(e.updateTime),c=e.createTime?Gi(e.createTime):_n.min(),p=new ts({mapValue:{fields:e.fields}}),D=qr.newFoundDocument(s,a,c,p);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function Kl(i,e){let t;if(e instanceof Oc)t={update:Ig(i,e.key,e.value)};else if(e instanceof gl)t={delete:yd(i,e.key)};else if(e instanceof Ya)t={update:Ig(i,e.key,e.data),updateMask:Gy(e.fieldMask)};else{if(!(e instanceof ph))return en();t={verify:yd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const p=c.transform;if(p instanceof $u)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof yu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Hu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof pl)return{fieldPath:c.field.canonicalString(),increment:p.gt};throw en()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:K_(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:en()),t;var a}function Dh(i,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ti.updateTime(Gi(a.updateTime)):void 0!==a.exists?Ti.exists(a.exists):Ti.none():Ti.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let D=null;"setToServerValue"in p?(pn("REQUEST_TIME"===p.setToServerValue),D=new $u):"appendMissingElements"in p?D=new yu(p.appendMissingElements.values||[]):"removeAllFromArray"in p?D=new Hu(p.removeAllFromArray.values||[]):"increment"in p?D=new pl(c,p.increment):en();const N=sr.fromServerFormat(p.fieldPath);return new xc(N,D)}(i,a)):[];var a;if(e.update){const a=_u(i,e.update.name),c=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new es((e.updateMask.fieldPaths||[]).map(B=>sr.fromServerFormat(B)));return new Ya(a,c,p,t,s)}return new Oc(a,c,t,s)}if(e.delete){const a=_u(i,e.delete);return new gl(a,t)}if(e.verify){const a=_u(i,e.verify);return new ph(a,t)}return en()}function Dg(i,e){return{documents:[wh(i,e.path)]}}function jf(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wh(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wh(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(N){if(0!==N.length)return Hf(xe.create(N,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(N){if(0!==N.length)return N.map(B=>{return{field:zu((J=B).field),direction:Z_(J.dir)};var J})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=md(i,e.limit);var D,N;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(N=e.endAt).inclusive,values:N.position}),t}function Cg(i){let e=vd(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pn(1===s);const J=t.from[0];J.allDescendants?a=J.collectionId:e=e.child(J.collectionId)}let c=[];t.where&&(c=function(J){const Ee=Hy(J);return Ee instanceof xe&&Qt(Ee)?Ee.getFilters():[Ee]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(J=>{return new T(Zl((Ee=J).field),function(Ze){switch(Ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ee.direction));var Ee}));let D=null;t.limit&&(D=function(J){let Ee;return Ee="object"==typeof J?J.value:J,za(Ee)?null:Ee}(t.limit));let N=null;var J;t.startAt&&(N=new ns((J=t.startAt).values||[],!!J.before));let B=null;return t.endAt&&(B=function(J){return new ns(J.values||[],!J.before)}(t.endAt)),fl(e,a,p,c,D,"F",N,B)}function Hy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zl(e.unaryFilter.field);return ve.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Zl(e.unaryFilter.field);return ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Zl(e.unaryFilter.field);return ve.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Zl(e.unaryFilter.field);return ve.create(c,"!=",{nullValue:"NULL_VALUE"});default:return en()}}(i):void 0!==i.fieldFilter?ve.create(Zl((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return en()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return xe.create(e.compositeFilter.filters.map(t=>Hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return en()}}(e.compositeFilter.op))}(i):en();var e}function Z_(i){return Eg[i]}function Ed(i){return G_[i]}function $f(i){return z_[i]}function zu(i){return{fieldPath:i.canonicalString()}}function Zl(i){return sr.fromServerFormat(i.fieldPath)}function Hf(i){return i instanceof ve?function(e){if("=="===e.op){if(fu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NAN"}};if(hu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NAN"}};if(hu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(e.field),op:Ed(e.op),value:e.value}}}(i):i instanceof xe?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:$f(e.op),filters:t}}}(i):en()}function Gy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Eu{constructor(e,t,s,a,c=_n.min(),p=_n.min(),D=bi.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=D,this.expectedCount=N}withSequenceNumber(e){return new Eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ch{constructor(e){this.fe=e}}function bg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yd(a=i.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:ml(a,c.version.toTimestamp()),createTime:ml(a,c.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:yl(e.version)};else{if(!e.isUnknownDocument())return en();s.unknownDocument={path:t.path.toArray(),version:yl(e.version)}}var a,c;return s}function Nc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function yl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vl(i){const e=new Hr(i.seconds,i.nanoseconds);return _n.fromTimestamp(e)}function fa(i,e){const t=(e.baseMutations||[]).map(c=>Dh(i.fe,c));for(let c=0;c<e.mutations.length-1;++c){const p=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(p.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const s=e.mutations.map(c=>Dh(i.fe,c)),a=Hr.fromMillis(e.localWriteTimeMs);return new gh(e.batchId,a,t,s)}function wd(i){const e=vl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?vl(i.lastLimboFreeSnapshotVersion):_n.min();let s;var a;return void 0!==i.query.documents?(pn(1===(a=i.query).documents.length),s=I(Bu(vd(a.documents[0])))):s=I(Cg(i.query)),new Eu(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,bi.fromBase64String(i.resumeToken))}function bh(i,e){const t=yl(e.snapshotVersion),s=yl(e.lastLimboFreeSnapshotVersion);let a;a=Uu(e.target)?Dg(i.fe,e.target):jf(i.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pa(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function kc(i){const e=Cg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?X(e,e.limit,"L"):e}function zf(i,e){return new yh(e.largestBatchId,Dh(i.fe,e.overlayMutation))}function Th(i,e){const t=e.path.lastSegment();return[i,E(e.path.popLast()),t]}function Id(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:yl(s.readTime),documentKey:E(s.documentKey.path),largestBatchId:s.largestBatchId}}class ql{getBundleMetadata(e,t){return Wf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:vl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(s=t).id,createTime:yl(Gi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ah(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:kc(a.bundledQuery),readTime:vl(a.readTime)};var a})}saveNamedQuery(e,t){return Ah(e).put({name:(s=t).name,readTime:yl(Gi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Wf(i){return Hi(i,"bundles")}function Ah(i){return Hi(i,"namedQueries")}class Sh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sh(e,t.uid||"")}getOverlay(e,t){return Dd(e).get(Th(this.userId,t)).next(s=>s?zf(this.serializer,s):null)}getOverlays(e,t){const s=Xo();return Ye.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,p)=>{const D=new yh(t,p);a.push(this.we(e,D))}),Ye.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(E(p.getCollectionPath())));const c=[];return a.forEach(p=>{const D=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);c.push(Dd(e).J("collectionPathOverlayIndex",D))}),Ye.waitFor(c)}getOverlaysForCollection(e,t,s){const a=Xo(),c=E(t),p=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Dd(e).j("collectionPathOverlayIndex",p).next(D=>{for(const N of D){const B=zf(this.serializer,N);a.set(B.getKey(),B)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=Xo();let p;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dd(e).X({index:"collectionGroupOverlayIndex",range:D},(N,B,J)=>{const Ee=zf(this.serializer,B);c.size()<a||Ee.largestBatchId===p?(c.set(Ee.getKey(),Ee),p=Ee.largestBatchId):J.done()}).next(()=>c)}we(e,t){return Dd(e).put(function(s,a,c){const[p,D,N]=Th(a,c.mutation.key);return{userId:a,collectionPath:D,documentId:N,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kl(s.fe,c.mutation)}}(this.serializer,this.userId,t))}}function Dd(i){return Hi(i,"documentOverlays")}class _l{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ai(e.integerValue));else if("doubleValue"in e){const s=ai(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),aa(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ma(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):en()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Zt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Fc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tg(i){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=Fc(255&t[a]);if(s+=c,8!==c)break}return s}(i);return Math.ceil(e/8)}_l.Ve=new _l;class zy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Wy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ky{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yl{constructor(){this.je=new zy,this.ze=new Wy(this.je),this.We=new Ky(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ql{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ql(this.indexId,this.documentKey,this.arrayValue,s)}}function Wu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ag(i.arrayValue,e.arrayValue),0!==t?t:(t=Ag(i.directionalValue,e.directionalValue),0!==t?t:Zt.comparator(i.documentKey,e.documentKey)))}function Ag(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Sg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){pn(e.collectionGroup===this.collectionId);const t=Zo(e);if(void 0!==t&&!this.en(t))return!1;const s=Ia(e);let a=new Set,c=0,p=0;for(;c<s.length&&this.en(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const D=s[c];if(!this.nn(this.Ze,D)||!this.sn(this.Ye[p++],D))return!1}++c}for(;c<s.length;++c){const D=s[c];if(p>=this.Ye.length||!this.sn(this.Ye[p++],D))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Zy(i){var e,t;if(pn(i instanceof ve||i instanceof xe),i instanceof ve){if(i instanceof gu){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>ve.create(i.field,"==",c)))||[];return xe.create(a,"or")}return i}const s=i.filters.map(a=>Zy(a));return xe.create(s,i.op)}function qy(i){if(0===i.getFilters().length)return[];const e=ec(Zy(i));return pn(Xl(e)),Jl(e)||Kf(e)?[e]:e.getFilters()}function Jl(i){return i instanceof ve}function Kf(i){return i instanceof xe&&Qt(i)}function Xl(i){return Jl(i)||Kf(i)||function(e){if(e instanceof xe&&Xt(e)){for(const t of e.getFilters())if(!Jl(t)&&!Kf(t))return!1;return!0}return!1}(i)}function ec(i){if(pn(i instanceof ve||i instanceof xe),i instanceof ve)return i;if(1===i.filters.length)return ec(i.filters[0]);const e=i.filters.map(s=>ec(s));let t=xe.create(e,i.op);return t=Cd(t),Xl(t)?t:(pn(t instanceof xe),pn(dt(t)),pn(t.filters.length>1),t.filters.reduce((s,a)=>Zf(s,a)))}function Zf(i,e){let t;return pn(i instanceof ve||i instanceof xe),pn(e instanceof ve||e instanceof xe),t=i instanceof ve?e instanceof ve?xe.create([i,e],"and"):Yy(i,e):e instanceof ve?Yy(e,i):function(s,a){if(pn(s.filters.length>0&&a.filters.length>0),dt(s)&&dt(a))return gs(s,a.getFilters());const c=Xt(s)?s:a,p=Xt(s)?a:s,D=c.filters.map(N=>Zf(N,p));return xe.create(D,"or")}(i,e),Cd(t)}function Yy(i,e){if(dt(e))return gs(e,i.getFilters());{const t=e.filters.map(s=>Zf(i,s));return xe.create(t,"or")}}function Cd(i){if(pn(i instanceof ve||i instanceof xe),i instanceof ve)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(En(i))return i;const t=e.map(a=>Cd(a)),s=[];return t.forEach(a=>{a instanceof ve?s.push(a):a instanceof xe&&(a.op===i.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:xe.create(s,i.op)}class Qy{constructor(){this.rn=new qf}addToCollectionParentIndex(e,t){return this.rn.add(t),Ye.resolve()}getCollectionParents(e,t){return Ye.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ye.resolve()}deleteFieldIndex(e,t){return Ye.resolve()}getDocumentsMatchingTarget(e,t){return Ye.resolve(null)}getIndexType(e,t){return Ye.resolve(0)}getFieldIndexes(e,t){return Ye.resolve([])}getNextCollectionGroupToUpdate(e){return Ye.resolve(null)}getMinOffset(e,t){return Ye.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return Ye.resolve(ps.min())}updateCollectionGroup(e,t,s){return Ye.resolve()}updateIndexEntries(e,t){return Ye.resolve()}}class qf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new oi(Sn.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new oi(Sn.comparator)).toArray()}}const Mh=new Uint8Array(0);class Mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new qf,this.un=new Hs(s=>Pa(s),(s,a)=>dl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:s,parent:E(a)};return Yf(e).put(c)}return Ye.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[ja(t),""],!1,!0);return Yf(e).j(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;s.push(P(p.parent))}return s})}addFieldIndex(e,t){const s=Lc(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var p;delete a.indexId;const c=s.add(a);if(t.indexState){const p=bd(e);return c.next(D=>{p.put(Id(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Lc(e),a=bd(e),c=tc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=tc(e);let a=!0;const c=new Map;return Ye.forEach(this.cn(t),p=>this.an(e,p).next(D=>{a&&(a=!!D),c.set(p,D)})).next(()=>{if(a){let p=ur();const D=[];return Ye.forEach(c,(N,B)=>{var J;Mt("IndexedDbIndexManager",`Using index ${J=N,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(Cr=>`${Cr.fieldPath}:${Cr.kind}`).join(",")}`} to execute ${Pa(t)}`);const Ee=function(Cr,Ws){const Ps=Zo(Ws);if(void 0===Ps)return null;for(const Pi of hl(Cr,Ps.fieldPath))switch(Pi.op){case"array-contains-any":return Pi.value.arrayValue.values||[];case"array-contains":return[Pi.value]}return null}(B,N),Ze=function(Cr,Ws){const Ps=new Map;for(const Pi of Ia(Ws))for(const Fo of hl(Cr,Pi.fieldPath))switch(Fo.op){case"==":case"in":Ps.set(Pi.fieldPath.canonicalString(),Fo.value);break;case"not-in":case"!=":return Ps.set(Pi.fieldPath.canonicalString(),Fo.value),Array.from(Ps.values())}return null}(B,N),pt=function(Cr,Ws){const Ps=[];let Pi=!0;for(const Fo of Ia(Ws)){const Tu=0===Fo.kind?lh(Cr,Fo.fieldPath,Cr.startAt):sd(Cr,Fo.fieldPath,Cr.startAt);Ps.push(Tu.value),Pi&&(Pi=Tu.inclusive)}return new ns(Ps,Pi)}(B,N),$t=function(Cr,Ws){const Ps=[];let Pi=!0;for(const Fo of Ia(Ws)){const Tu=0===Fo.kind?sd(Cr,Fo.fieldPath,Cr.endAt):lh(Cr,Fo.fieldPath,Cr.endAt);Ps.push(Tu.value),Pi&&(Pi=Tu.inclusive)}return new ns(Ps,Pi)}(B,N),dn=this.hn(N,B,pt),gn=this.hn(N,B,$t),fr=this.ln(N,B,Ze),Br=this.fn(N.indexId,Ee,dn,pt.inclusive,gn,$t.inclusive,fr);return Ye.forEach(Br,Cr=>s.H(Cr,t.limit).next(Ws=>{Ws.forEach(Ps=>{const Pi=Zt.fromSegments(Ps.documentKey);p.has(Pi)||(p=p.add(Pi),D.push(Pi))})}))}).next(()=>D)}return Ye.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:qy(xe.create(e.filters,"and")).map(s=>jl(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,c,p,D){const N=(null!=t?t.length:1)*Math.max(s.length,c.length),B=N/(null!=t?t.length:1),J=[];for(let Ee=0;Ee<N;++Ee){const Ze=t?this.dn(t[Ee/B]):Mh,pt=this.wn(e,Ze,s[Ee%B],a),$t=this._n(e,Ze,c[Ee%B],p),dn=D.map(gn=>this.wn(e,Ze,gn,!0));J.push(...this.createRange(pt,$t,dn))}return J}wn(e,t,s,a){const c=new Ql(e,Zt.empty(),t,s);return a?c:c.Je()}_n(e,t,s,a){const c=new Ql(e,Zt.empty(),t,s);return a?c.Je():c}an(e,t){const s=new Sg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const D of c)s.tn(D)&&(!p||D.fields.length>p.fields.length)&&(p=D);return p})}getIndexType(e,t){let s=2;const a=this.cn(t);return Ye.forEach(a,c=>this.an(e,c).next(p=>{p?0!==s&&p.fields.length<function(D){let N=new oi(sr.comparator),B=!1;for(const J of D.filters)for(const Ee of J.getFlattenedFilters())Ee.field.isKeyField()||("array-contains"===Ee.op||"array-contains-any"===Ee.op?B=!0:N=N.add(Ee.field));for(const J of D.orderBy)J.field.isKeyField()||(N=N.add(J.field));return N.size+(B?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Yl;for(const a of Ia(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=s.He(a.kind);_l.Ve._e(c,p)}return s.Qe()}dn(e){const t=new Yl;return _l.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Yl;return _l.Ve._e(Ra(this.databaseId,t),s.He(function(a){const c=Ia(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Yl);let c=0;for(const p of Ia(e)){const D=s[c++];for(const N of a)if(this.yn(t,p.fieldPath)&&ul(D))a=this.pn(a,p,D);else{const B=N.He(p.kind);_l.Ve._e(D,B)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],c=[];for(const p of s.arrayValue.values||[])for(const D of a){const N=new Yl;N.seed(D.Qe()),_l.Ve._e(p,N.He(t.kind)),c.push(N)}return c}yn(e,t){return!!e.filters.find(s=>s instanceof ve&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Lc(e),a=bd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(c=>{const p=[];return Ye.forEach(c,D=>a.get([D.indexId,this.uid]).next(N=>{p.push(function(B,J){const Ee=J?new xu(J.sequenceNumber,new ps(vl(J.readTime),new Zt(P(J.documentKey)),J.largestBatchId)):xu.empty(),Ze=B.fields.map(([pt,$t])=>new Ro(sr.fromServerFormat(pt),$t));return new Ji(B.indexId,B.collectionGroup,Ze,Ee)}(D,N))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:kn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Lc(e),c=bd(e);return this.Tn(e).next(p=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>Ye.forEach(D,N=>c.put(Id(N.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return Ye.forEach(t,(a,c)=>{const p=s.get(a.collectionGroup);return(p?Ye.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),Ye.forEach(D,N=>this.En(e,a,N).next(B=>{const J=this.An(c,N);return B.isEqual(J)?Ye.resolve():this.vn(e,c,N,B,J)}))))})}Rn(e,t,s,a){return tc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return tc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=tc(e);let c=new oi(Wu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(p,D)=>{c=c.add(new Ql(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>c)}An(e,t){let s=new oi(Wu);const a=this.mn(t,e);if(null==a)return s;const c=Zo(t);if(null!=c){const p=e.data.field(c.fieldPath);if(ul(p))for(const D of p.arrayValue.values||[])s=s.add(new Ql(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Ql(t.indexId,e.key,Mh,a));return s}vn(e,t,s,a,c){Mt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(D,N,B,J,Ee){const Ze=D.getIterator(),pt=N.getIterator();let $t=Oo(Ze),dn=Oo(pt);for(;$t||dn;){let gn=!1,fr=!1;if($t&&dn){const Br=B($t,dn);Br<0?fr=!0:Br>0&&(gn=!0)}else null!=$t?fr=!0:gn=!0;gn?(J(dn),dn=Oo(pt)):fr?(Ee($t),$t=Oo(Ze)):($t=Oo(Ze),dn=Oo(pt))}}(a,c,Wu,D=>{p.push(this.Rn(e,t,s,D))},D=>{p.push(this.Pn(e,t,s,D))}),Ye.waitFor(p)}Tn(e){let t=1;return bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,D)=>Wu(p,D)).filter((p,D,N)=>!D||0!==Wu(p,N[D-1]));const a=[];a.push(e);for(const p of s){const D=Wu(p,e),N=Wu(p,t);if(0===D)a[0]=e.Je();else if(D>0&&N<0)a.push(p),a.push(p.Je());else if(N>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2){if(this.bn(a[p],a[p+1]))return[];c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Mh,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Mh,[]]))}return c}bn(e,t){return Wu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return Ye.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||en())).next(xh)}}function Yf(i){return Hi(i,"collectionParents")}function tc(i){return Hi(i,"indexEntries")}function Lc(i){return Hi(i,"indexConfiguration")}function bd(i){return Hi(i,"indexState")}function xh(i){pn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const a=i[s].indexState.offset;nl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),a=i.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let D=0;const N=s.X({range:p},(J,Ee,Ze)=>(D++,Ze.delete()));c.push(N.next(()=>{pn(1===D)}));const B=[];for(const J of t.mutations){const Ee=ye(e,J.key.path,t.batchId);c.push(a.delete(Ee)),B.push(J.key)}return Ye.waitFor(c).next(()=>B)}function Rh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw en();e=i.noDocument}return JSON.stringify(e).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class Oh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){pn(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Oh(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return El(e).X({index:"userMutationsIndex",range:s},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Uc(e),p=El(e);return p.add({}).next(D=>{pn("number"==typeof D);const N=new gh(D,t,s,a),B=function(Ze,pt,$t){const dn=$t.baseMutations.map(fr=>Kl(Ze.fe,fr)),gn=$t.mutations.map(fr=>Kl(Ze.fe,fr));return{userId:pt,batchId:$t.batchId,localWriteTimeMs:$t.localWriteTime.toMillis(),baseMutations:dn,mutations:gn}}(this.serializer,this.userId,N),J=[];let Ee=new oi((Ze,pt)=>kn(Ze.canonicalString(),pt.canonicalString()));for(const Ze of a){const pt=ye(this.userId,Ze.key.path,D);Ee=Ee.add(Ze.key.path.popLast()),J.push(p.put(B)),J.push(c.put(pt,lt))}return Ee.forEach(Ze=>{J.push(this.indexManager.addToCollectionParentIndex(e,Ze))}),e.addOnCommittedListener(()=>{this.Vn[D]=N.keys()}),Ye.waitFor(J).next(()=>N)})}lookupMutationBatch(e,t){return El(e).get(t).next(s=>s?(pn(s.userId===this.userId),fa(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?Ye.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return El(e).X({index:"userMutationsIndex",range:a},(p,D,N)=>{D.userId===this.userId&&(pn(D.batchId>=s),c=fa(this.serializer,D)),N.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return El(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{s=c.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return El(e).j("userMutationsIndex",t).next(s=>s.map(a=>fa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=he(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Uc(e).X({range:a},(p,D,N)=>{const[B,J,Ee]=p,Ze=P(J);if(B===this.userId&&t.path.isEqual(Ze))return El(e).get(Ee).next(pt=>{if(!pt)throw en();pn(pt.userId===this.userId),c.push(fa(this.serializer,pt))});N.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new oi(kn);const a=[];return t.forEach(c=>{const p=he(this.userId,c.path),D=IDBKeyRange.lowerBound(p),N=Uc(e).X({range:D},(B,J,Ee)=>{const[Ze,pt,$t]=B,dn=P(pt);Ze===this.userId&&c.path.isEqual(dn)?s=s.add($t):Ee.done()});a.push(N)}),Ye.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=he(this.userId,s),p=IDBKeyRange.lowerBound(c);let D=new oi(kn);return Uc(e).X({range:p},(N,B,J)=>{const[Ee,Ze,pt]=N,$t=P(Ze);Ee===this.userId&&s.isPrefixOf($t)?$t.length===a&&(D=D.add(pt)):J.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(El(e).get(c).next(p=>{if(null===p)throw en();pn(p.userId===this.userId),s.push(fa(this.serializer,p))}))}),Ye.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return xg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ye.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ye.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Uc(e).X({range:s},(c,p,D)=>{if(c[0]===this.userId){const N=P(c[1]);a.push(N)}else D.done()}).next(()=>{pn(0===a.length)})})}containsKey(e,t){return Rg(e,this.userId,t)}xn(e){return nc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rg(i,e,t){const s=he(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let p=!1;return Uc(i).X({range:c,Y:!0},(D,N,B)=>{const[J,Ee,Ze]=D;J===e&&Ee===a&&(p=!0),B.done()}).next(()=>p)}function El(i){return Hi(i,"mutations")}function Uc(i){return Hi(i,"documentMutations")}function nc(i){return Hi(i,"mutationQueues")}class Po{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Po(0)}static Mn(){return new Po(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Po(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>_n.fromTimestamp(new Hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(pn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Bc(e).X((p,D)=>{const N=wd(D);N.sequenceNumber<=t&&null===s.get(N.targetId)&&(a++,c.push(this.removeTargetData(e,N)))}).next(()=>Ye.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Bc(e).X((s,a)=>{const c=wd(a);t(c)})}$n(e){return Xy(e).get("targetGlobalKey").next(t=>(pn(null!==t),t))}On(e,t){return Xy(e).put("targetGlobalKey",t)}Fn(e,t){return Bc(e).put(bh(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Pa(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Bc(e).X({range:a,index:"queryTargetsIndex"},(p,D,N)=>{const B=wd(D);dl(t,B.target)&&(c=B,N.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=rc(e);return t.forEach(p=>{const D=E(p.path);a.push(c.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,p))}),Ye.waitFor(a)}removeMatchingKeys(e,t,s){const a=rc(e);return Ye.forEach(t,c=>{const p=E(c.path);return Ye.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=rc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=rc(e);let c=ur();return a.X({range:s,Y:!0},(p,D,N)=>{const B=P(p[1]),J=new Zt(B);c=c.add(J)}).next(()=>c)}containsKey(e,t){const s=E(t.path),a=IDBKeyRange.bound([s],[ja(s)],!1,!0);let c=0;return rc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([p,D],N,B)=>{0!==p&&(c++,B.done())}).next(()=>c>0)}le(e,t){return Bc(e).get(t).next(s=>s?wd(s):null)}}function Bc(i){return Hi(i,"targets")}function Xy(i){return Hi(i,"targetGlobal")}function rc(i){return Hi(i,"targetDocuments")}function Qf([i,e],[t,s]){const a=kn(i,t);return 0===a?kn(e,s):a}class Y_{constructor(e){this.Ln=e,this.buffer=new oi(Qf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jf{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Mt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,d.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Li(s)?Mt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield qo(s)}yield t.Qn(3e5)}))}}class Q_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ye.resolve(Xi.ct);const s=new Y_(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector","Garbage collection skipped; disabled"),Ye.resolve(Vc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vc):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,c,p,D,N,B;const J=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ee=>(Ee>this.params.maximumSequenceNumbersToCollect?(Mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ee}`),a=this.params.maximumSequenceNumbersToCollect):a=Ee,p=Date.now(),this.nthSequenceNumber(e,a))).next(Ee=>(s=Ee,D=Date.now(),this.removeTargets(e,s,t))).next(Ee=>(c=Ee,N=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ee=>(B=Date.now(),Yr()<=ce.in.DEBUG&&Mt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-J}ms\n\tDetermined least recently used ${a} in `+(D-p)+`ms\n\tRemoved ${c} targets in `+(N-D)+`ms\n\tRemoved ${Ee} documents in `+(B-N)+`ms\nTotal Duration: ${B-J}ms`),Ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:Ee})))}}class ev{constructor(e,t){this.db=e,this.garbageCollector=function Xf(i,e){return new Q_(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Td(e,s)}removeReference(e,t,s){return Td(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Td(e,t)}Xn(e,t){return function(s,a){let c=!1;return nc(s).Z(p=>Rg(s,p,a).next(D=>(D&&(c=!0),Ye.resolve(!D)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(p,D)=>{if(D<=t){const N=this.Xn(e,p).next(B=>{if(!B)return c++,s.getEntry(e,p).next(()=>(s.removeEntry(p,_n.min()),rc(e).delete([0,E(p.path)])))});a.push(N)}}).next(()=>Ye.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Td(e,t)}Yn(e,t){const s=rc(e);let a,c=Xi.ct;return s.X({index:"documentTargetsIndex"},([p,D],{path:N,sequenceNumber:B})=>{0===p?(c!==Xi.ct&&t(new Zt(P(a)),c),c=B,a=N):c=Xi.ct}).next(()=>{c!==Xi.ct&&t(new Zt(P(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return rc(i).put((s=i.currentSequenceNumber,{targetId:0,path:E(e.path),sequenceNumber:s}));var s}class Og{constructor(){this.changes=new Hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ye.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ic(e).put(s)}removeEntry(e,t,s){return ic(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Nc(c),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=qr.newInvalidDocument(t);return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s=this.ts(t,c)}).next(()=>s)}es(e,t){let s={size:0,document:qr.newInvalidDocument(t)};return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s={document:this.ts(t,c),size:Rh(c)}}).next(()=>s)}getEntries(e,t){let s=Ms();return this.ns(e,t,(a,c)=>{const p=this.ts(a,c);s=s.insert(a,p)}).next(()=>s)}ss(e,t){let s=Ms(),a=new Dr(Zt.comparator);return this.ns(e,t,(c,p)=>{const D=this.ts(c,p);s=s.insert(c,D),a=a.insert(c,Rh(p))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return Ye.resolve();let a=new oi(Ng);t.forEach(N=>a=a.add(N));const c=IDBKeyRange.bound(Ad(a.first()),Ad(a.last())),p=a.getIterator();let D=p.getNext();return ic(e).X({index:"documentKeyIndex",range:c},(N,B,J)=>{const Ee=Zt.fromSegments([...B.prefixPath,B.collectionGroup,B.documentId]);for(;D&&Ng(D,Ee)<0;)s(D,null),D=p.getNext();D&&D.isEqual(Ee)&&(s(D,B),D=p.hasNext()?p.getNext():null),D?J.G(Ad(D)):J.done()}).next(()=>{for(;D;)s(D,null),D=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const c=t.path,p=[c.popLast().toArray(),c.lastSegment(),Nc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ic(e).j(IDBKeyRange.bound(p,D,!0)).next(N=>{let B=Ms();for(const J of N){const Ee=this.ts(Zt.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);Ee.isFoundDocument()&&(rn(t,Ee)||a.has(Ee.key))&&(B=B.insert(Ee.key,Ee))}return B})}getAllFromCollectionGroup(e,t,s,a){let c=Ms();const p=Pg(t,s),D=Pg(t,ps.max());return ic(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,D,!0)},(N,B,J)=>{const Ee=this.ts(Zt.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);c=c.insert(Ee.key,Ee),c.size===a&&J.done()}).next(()=>c)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(pn(!!t),t))}Zn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function q_(i,e){let t;if(e.document)t=rs(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Zt.fromSegments(e.noDocument.path),a=vl(e.noDocument.readTime);t=qr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return en();{const s=Zt.fromSegments(e.unknownDocument.path),a=vl(e.unknownDocument.version);t=qr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Hr(s[0],s[1]);return _n.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(_n.min()))return s}return qr.newInvalidDocument(e)}}function Na(i){return new tv(i)}class nv extends Og{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Hs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new oi((c,p)=>kn(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const D=this.us.get(c);if(t.push(this.os.removeEntry(e,c,D.readTime)),p.isValidDocument()){const N=bg(this.os.serializer,p);a=a.add(c.path.popLast()),s+=Rh(N)-D.size,t.push(this.os.addEntry(e,c,N))}else if(s-=D.size,this.trackRemovals){const N=bg(this.os.serializer,p.convertToNoDocument(_n.min()));t.push(this.os.addEntry(e,c,N))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,s)),Ye.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((c,p)=>{this.us.set(c,{size:p,readTime:s.get(c).readTime})}),s))}}function ep(i){return Hi(i,"remoteDocumentGlobal")}function ic(i){return Hi(i,"remoteDocumentsV14")}function Ad(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pg(i,e){const t=e.documentKey.path.toArray();return[i,Nc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ng(i,e){const t=i.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=kn(t[c],s[c]),a)return a;return a=kn(t.length,s.length),a||(a=kn(t[t.length-2],s[s.length-2]),a||kn(t[t.length-1],s[s.length-1]))}class kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&dd(s.mutation,a,es.empty(),Hr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ur()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ur()){const a=Xo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let p=mu();return c.forEach((D,N)=>{p=p.insert(D,N.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=Xo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ur()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,D)=>{t.set(p,D)})})}computeViews(e,t,s,a){let c=Ms();const p=ju(),D=ju();return t.forEach((N,B)=>{const J=s.get(B.key);a.has(B.key)&&(void 0===J||J.mutation instanceof Ya)?c=c.insert(B.key,B):void 0!==J?(p.set(B.key,J.mutation.getFieldMask()),dd(J.mutation,B,J.mutation.getFieldMask(),Hr.now())):p.set(B.key,es.empty())}),this.recalculateAndSaveOverlays(e,c).next(N=>(N.forEach((B,J)=>p.set(B,J)),t.forEach((B,J)=>{var Ee;return D.set(B,new kg(J,null!==(Ee=p.get(B))&&void 0!==Ee?Ee:null))}),D))}recalculateAndSaveOverlays(e,t){const s=ju();let a=new Dr((p,D)=>p-D),c=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const D of p)D.keys().forEach(N=>{const B=t.get(N);if(null===B)return;let J=s.get(N)||es.empty();J=D.applyToLocalView(B,J),s.set(N,J);const Ee=(a.get(D.batchId)||ur()).add(N);a=a.insert(D.batchId,Ee)})}).next(()=>{const p=[],D=a.getReverseIterator();for(;D.hasNext();){const N=D.getNext(),B=N.key,J=N.value,Ee=Sc();J.forEach(Ze=>{if(!c.has(Ze)){const pt=fh(t.get(Ze),s.get(Ze));null!==pt&&Ee.set(Ze,pt),c=c.add(Ze)}}),p.push(this.documentOverlayCache.saveOverlays(e,B,Ee))}return Ye.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Zt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):Ye.resolve(Xo());let D=-1,N=c;return p.next(B=>Ye.forEach(B,(J,Ee)=>(D<Ee.largestBatchId&&(D=Ee.largestBatchId),c.get(J)?Ye.resolve():this.remoteDocumentCache.getEntry(e,J).next(Ze=>{N=N.insert(J,Ze)}))).next(()=>this.populateOverlays(e,B,c)).next(()=>this.computeViews(e,N,B,ur())).next(J=>({batchId:D,changes:od(J)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Zt(t)).next(s=>{let a=mu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let c=mu();return this.indexManager.getCollectionParents(e,a).next(p=>Ye.forEach(p,D=>{const N=(B=t,J=D.child(a),new Za(J,null,B.explicitOrderBy.slice(),B.filters.slice(),B.limit,B.limitType,B.startAt,B.endAt));var B,J;return this.getDocumentsMatchingCollectionQuery(e,N,s).next(B=>{B.forEach((J,Ee)=>{c=c.insert(J,Ee)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(c=>{a.forEach((D,N)=>{const B=N.getKey();null===c.get(B)&&(c=c.insert(B,qr.newInvalidDocument(B)))});let p=mu();return c.forEach((D,N)=>{const B=a.get(D);void 0!==B&&dd(B.mutation,N,es.empty(),Hr.now()),rn(t,N)&&(p=p.insert(D,N))}),p})}}class rv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ye.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Gi(s.createTime)}),Ye.resolve()}getNamedQuery(e,t){return Ye.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:kc(s.bundledQuery),readTime:Gi(s.readTime)}),Ye.resolve();var s}}class iv{constructor(){this.overlays=new Dr(Zt.comparator),this.ls=new Map}getOverlay(e,t){return Ye.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xo();return Ye.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.we(e,t,c)}),Ye.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(s)),Ye.resolve()}getOverlaysForCollection(e,t,s){const a=Xo(),c=t.length+1,p=new Zt(t.child("")),D=this.overlays.getIteratorFrom(p);for(;D.hasNext();){const N=D.getNext().value,B=N.getKey();if(!t.isPrefixOf(B.path))break;B.path.length===c&&N.largestBatchId>s&&a.set(N.getKey(),N)}return Ye.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Dr((B,J)=>B-J);const p=this.overlays.getIterator();for(;p.hasNext();){const B=p.getNext().value;if(B.getKey().getCollectionGroup()===t&&B.largestBatchId>s){let J=c.get(B.largestBatchId);null===J&&(J=Xo(),c=c.insert(B.largestBatchId,J)),J.set(B.getKey(),B)}}const D=Xo(),N=c.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((B,J)=>D.set(B,J)),!(D.size()>=a)););return Ye.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let c=this.ls.get(t);void 0===c&&(c=ur(),this.ls.set(t,c)),this.ls.set(t,c.add(s.key))}}class or{constructor(){this.fs=new oi(xs.ds),this.ws=new oi(xs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new xs(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new xs(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Zt(new Sn([])),s=new xs(t,e),a=new xs(t,e+1),c=[];return this.ws.forEachInRange([s,a],p=>{this.ys(p),c.push(p.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Zt(new Sn([])),s=new xs(t,e),a=new xs(t,e+1);let c=ur();return this.ws.forEachInRange([s,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new xs(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class xs{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Zt.comparator(e.key,t.key)||kn(e.As,t.As)}static _s(e,t){return kn(e.As,t.As)||Zt.comparator(e.key,t.key)}}class Lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new oi(xs.ds)}checkEmpty(e){return Ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.vs;this.vs++;const p=new gh(c,t,s,a);this.mutationQueue.push(p);for(const D of a)this.Rs=this.Rs.add(new xs(D.key,c)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Ye.resolve(p)}lookupMutationBatch(e,t){return Ye.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return Ye.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xs(t,0),a=new xs(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([s,a],p=>{const D=this.Ps(p.As);c.push(D)}),Ye.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new oi(kn);return t.forEach(a=>{const c=new xs(a,0),p=new xs(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,p],D=>{s=s.add(D.As)})}),Ye.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Zt.isDocumentKey(c)||(c=c.child(""));const p=new xs(new Zt(c),0);let D=new oi(kn);return this.Rs.forEachWhile(N=>{const B=N.key.path;return!!s.isPrefixOf(B)&&(B.length===a&&(D=D.add(N.As)),!0)},p),Ye.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){pn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Ye.forEach(t.mutations,a=>{const c=new xs(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new xs(t,0),a=this.Rs.firstAfterOrEqual(s);return Ye.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Ye.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vg{constructor(e){this.Ds=e,this.docs=new Dr(Zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,p=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ye.resolve(s?s.document.mutableCopy():qr.newInvalidDocument(t))}getEntries(e,t){let s=Ms();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():qr.newInvalidDocument(a))}),Ye.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Ms();const p=t.path,D=new Zt(p.child("")),N=this.docs.getIteratorFrom(D);for(;N.hasNext();){const{key:B,value:{document:J}}=N.getNext();if(!p.isPrefixOf(B.path))break;B.path.length>p.length+1||nl(Ru(J),s)<=0||(a.has(J.key)||rn(t,J))&&(c=c.insert(J.key,J.mutableCopy()))}return Ye.resolve(c)}getAllFromCollectionGroup(e,t,s,a){en()}Cs(e,t){return Ye.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new sv(this)}getSize(e){return Ye.resolve(this.size)}}class sv extends Og{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),Ye.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ov{constructor(e){this.persistence=e,this.xs=new Hs(t=>Pa(t),dl),this.lastRemoteSnapshotVersion=_n.min(),this.highestTargetId=0,this.Ns=0,this.ks=new or,this.targetCount=0,this.Ms=Po.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),Ye.resolve()}getLastRemoteSnapshotVersion(e){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ye.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),Ye.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ye.resolve()}updateTargetData(e,t){return this.Fn(t),Ye.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.xs.forEach((p,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),Ye.waitFor(c).next(()=>a)}getTargetCount(e){return Ye.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return Ye.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),Ye.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),Ye.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ye.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return Ye.resolve(s)}containsKey(e,t){return Ye.resolve(this.ks.containsKey(t))}}class Ph{constructor(e,t){this.$s={},this.overlays={},this.Os=new Xi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ov(this),this.indexManager=new Qy,this.remoteDocumentCache=new Vg(s=>this.referenceDelegate.Ls(s)),this.serializer=new Ch(t),this.qs=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Lg(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){Mt("MemoryPersistence","Starting transaction:",e);const a=new av(this.Os.next());return this.referenceDelegate.Us(),s(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return Ye.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class av extends rl{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Qs=new or,this.js=null}static zs(e){return new Sd(e)}get Ws(){if(this.js)return this.js;throw en()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),Ye.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),Ye.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ye.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.Ws,s=>{const a=Zt.fromPath(s);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,_n.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ye.or([()=>Ye.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uv{constructor(e){this.serializer=e}O(e,t,s,a){const c=new io("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",W,{unique:!0}),D.createObjectStore("documentMutations"),lv(e),function(D){D.createObjectStore("remoteDocuments")}(e));let p=Ye.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),lv(e)),p=p.next(()=>function(D){const N=D.store("targetGlobal"),B={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_n.min().toTimestamp(),targetCount:0};return N.put("targetGlobalKey",B)}(c))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(D,N){return N.store("mutations").j().next(B=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",W,{unique:!0});const J=N.store("mutations"),Ee=B.map(Ze=>J.put(Ze));return Ye.waitFor(Ee)})}(e,c))),p=p.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ys(c))),s<6&&a>=6&&(p=p.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),s<7&&a>=7&&(p=p.next(()=>this.Zs(c))),s<8&&a>=8&&(p=p.next(()=>this.ti(e,c))),s<9&&a>=9&&(p=p.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.ei(c))),s<11&&a>=11&&(p=p.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(D){const N=D.createObjectStore("documentOverlays",{keyPath:il});N.createIndex("collectionPathOverlayIndex",ou,{unique:!1}),N.createIndex("collectionGroupOverlayIndex",Ss,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(D){const N=D.createObjectStore("remoteDocumentsV14",{keyPath:Gt});N.createIndex("documentKeyIndex",Gn),N.createIndex("collectionGroupIndex",cn)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.si(e,c))),s<15&&a>=15&&(p=p.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Qr}).createIndex("sequenceNumberIndex",Pu,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Ta}).createIndex("documentKeyIndex",Aa,{unique:!1})}(e))),p}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Rh(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>Ye.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",p).next(D=>Ye.forEach(D,N=>{pn(N.userId===c.userId);const B=fa(this.serializer,N);return xg(e,c.userId,B).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.X((p,D)=>{const N=new Sn(p),B=[0,E(N)];c.push(t.get(B).next(J=>J?Ye.resolve():t.put({targetId:0,path:E(N),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Ye.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:oo});const s=t.store("collectionParents"),a=new qf,c=p=>{if(a.add(p)){const D=p.lastSegment(),N=p.popLast();return s.put({collectionId:D,parent:E(N)})}};return t.store("remoteDocuments").X({Y:!0},(p,D)=>{const N=new Sn(p);return c(N.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([p,D,N],B)=>{const J=P(D);return c(J.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const c=wd(a),p=bh(this.serializer,c);return t.put(p)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((c,p)=>{const D=t.store("remoteDocumentsV14"),N=(B=p,B.document?new Zt(Sn.fromString(B.document.name).popFirst(5)):B.noDocument?Zt.fromSegments(B.noDocument.path):B.unknownDocument?Zt.fromSegments(B.unknownDocument.path):en()).path.toArray();var B;const J={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(D.put(J))}).next(()=>Ye.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Na(this.serializer),c=new Ph(Sd.zs,this.serializer.fe);return s.j().next(p=>{const D=new Map;return p.forEach(N=>{var B;let J=null!==(B=D.get(N.userId))&&void 0!==B?B:ur();fa(this.serializer,N).keys().forEach(Ee=>J=J.add(Ee)),D.set(N.userId,J)}),Ye.forEach(D,(N,B)=>{const J=new In(B),Ee=Sh.de(this.serializer,J),Ze=c.getIndexManager(J),pt=Oh.de(J,this.serializer,Ze,c.referenceDelegate);return new Fg(a,pt,Ee,Ze).recalculateAndSaveOverlaysForDocumentKeys(new ua(t,Xi.ct),N).next()})})}}function lv(i){i.createObjectStore("targetDocuments",{keyPath:As}).createIndex("documentTargetsIndex",fi,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hr,{unique:!0}),i.createObjectStore("targetGlobal")}const kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,t,s,a,c,p,D,N,B,J,Ee=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=c,this.window=p,this.document=D,this.ri=B,this.oi=J,this.ui=Ee,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Ze=>Promise.resolve(),!Fh.D())throw new Rt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,a),this.di=t+"main",this.serializer=new Ch(N),this.wi=new so(this.di,this.ui,new uv(this.serializer)),this.Bs=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Na(this.serializer),this.qs=new ql,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===J&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(tt.FAILED_PRECONDITION,kh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Xi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,d.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,d.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,d.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Li(e))return Mt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Mt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Qa(e).get("owner").next(t=>Ye.resolve(this.Ri(t)))}Pi(e){return Lh(e).delete(this.clientId)}bi(){var e=this;return(0,d.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Hi(s,"clientMetadata");return a.j().next(c=>{const p=e.Si(c,18e5),D=c.filter(N=>-1===p.indexOf(N));return Ye.forEach(D,N=>a.delete(N.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ye.resolve(!0):Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Rt(tt.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Mt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,d.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new ua(t,Xi.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Oh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){Mt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.ui)?sl:14===p?Fl:13===p?Nu:12===p?Vi:11===p?au:void en();var p;let D;return this.wi.runTransaction(e,a,c,N=>(D=new ua(N,this.Os?this.Os.next():Xi.ct),"readwrite-primary"===t?this.Ti(D).next(B=>!!B||this.Ei(D)).next(B=>{if(!B)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Rt(tt.FAILED_PRECONDITION,Ha);return s(D)}).next(B=>this.vi(D).next(()=>B)):this.Oi(D).next(()=>s(D)))).then(N=>(D.raiseOnCommittedEvent(),N))}Oi(e){return Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Rt(tt.FAILED_PRECONDITION,kh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static D(){return so.D()}Ai(e){const t=Qa(e);return t.get("owner").next(s=>this.Ri(s)?(Mt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ye.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ir(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ae.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Mt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ir("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ir("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qa(i){return Hi(i,"owner")}function Lh(i){return Hi(i,"clientMetadata")}function Md(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class xd{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=ur(),a=ur();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xd(e,t.fromCache,s,a)}}class Ug{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,s)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(ch(t))return Ye.resolve(null);let s=I(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=X(t,null,"F"),s=I(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const p=ur(...c);return this.Ui.getDocuments(e,p).next(D=>this.indexManager.getMinOffset(e,s).next(N=>{const B=this.ji(t,D);return this.zi(t,B,p,N.readTime)?this.Ki(e,X(t,null,"F")):this.Wi(e,B,t,N)}))})))}Gi(e,t,s,a){return ch(t)||a.isEqual(_n.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(c=>{const p=this.ji(t,c);return this.zi(t,p,s,a)?this.Qi(e,t):(Yr()<=ce.in.DEBUG&&Mt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ht(t)),this.Wi(e,p,t,Ca(a,-1)))})}ji(e,t){let s=new oi(yr(e));return t.forEach((a,c)=>{rn(e,c)&&(s=s.add(c))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return Yr()<=ce.in.DEBUG&&Mt("QueryEngine","Using full collection scan to execute query:",Ht(t)),this.Ui.getDocumentsMatchingQuery(e,t,ps.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class J_{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Dr(kn),this.Yi=new Hs(c=>Pa(c),dl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function cv(i,e,t,s){return new J_(i,e,t,s)}function dv(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,d.Z)(function*(i,e){const t=Kt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const p=[],D=[];let N=ur();for(const B of a){p.push(B.batchId);for(const J of B.mutations)N=N.add(J.key)}for(const B of c){D.push(B.batchId);for(const J of B.mutations)N=N.add(J.key)}return t.localDocuments.getDocuments(s,N).next(B=>({er:B,removedBatchIds:p,addedBatchIds:D}))})})}),tp.apply(this,arguments)}function Bg(i,e){const t=Kt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(p,D,N,B){const J=N.batch,Ee=J.keys();let Ze=Ye.resolve();return Ee.forEach(pt=>{Ze=Ze.next(()=>B.getEntry(D,pt)).next($t=>{const dn=N.docVersions.get(pt);pn(null!==dn),$t.version.compareTo(dn)<0&&(J.applyToRemoteDocument($t,N),$t.isValidDocument()&&($t.setReadTime(N.commitVersion),B.addEntry($t)))})}),Ze.next(()=>p.mutationQueue.removeMutationBatch(D,J))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let D=ur();for(let N=0;N<p.mutationResults.length;++N)p.mutationResults[N].transformResults.length>0&&(D=D.add(p.batch.mutations[N].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hv(i){const e=Kt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fv(i,e){const t=Kt(i),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((J,Ee)=>{const Ze=a.get(Ee);if(!Ze)return;D.push(t.Bs.removeMatchingKeys(c,J.removedDocuments,Ee).next(()=>t.Bs.addMatchingKeys(c,J.addedDocuments,Ee)));let pt=Ze.withSequenceNumber(c.currentSequenceNumber);var $t,dn,gn;null!==e.targetMismatches.get(Ee)?pt=pt.withResumeToken(bi.EMPTY_BYTE_STRING,_n.min()).withLastLimboFreeSnapshotVersion(_n.min()):J.resumeToken.approximateByteSize()>0&&(pt=pt.withResumeToken(J.resumeToken,s)),a=a.insert(Ee,pt),dn=pt,gn=J,(0===($t=Ze).resumeToken.approximateByteSize()||dn.snapshotVersion.toMicroseconds()-$t.snapshotVersion.toMicroseconds()>=3e8||gn.addedDocuments.size+gn.modifiedDocuments.size+gn.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(c,pt))});let N=Ms(),B=ur();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(c,J))}),D.push(sc(c,p,e.documentUpdates).next(J=>{N=J.nr,B=J.sr})),!s.isEqual(_n.min())){const J=t.Bs.getLastRemoteSnapshotVersion(c).next(Ee=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,s));D.push(J)}return Ye.waitFor(D).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,N,B)).next(()=>N)}).then(c=>(t.Ji=a,c))}function sc(i,e,t){let s=ur(),a=ur();return t.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let p=Ms();return t.forEach((D,N)=>{const B=c.get(D);N.isFoundDocument()!==B.isFoundDocument()&&(a=a.add(D)),N.isNoDocument()&&N.version.isEqual(_n.min())?(e.removeEntry(D,N.readTime),p=p.insert(D,N)):!B.isValidDocument()||N.version.compareTo(B.version)>0||0===N.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(N),p=p.insert(D,N)):Mt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",B.version," Watch version:",N.version)}),{nr:p,sr:a}})}function pv(i,e){const t=Kt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oc(i,e){const t=Kt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(c=>c?(a=c,Ye.resolve(a)):t.Bs.allocateTargetId(s).next(p=>(a=new Eu(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Ku(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,d.Z)(function*(i,e,t){const s=Kt(i),a=s.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Li(p))throw p;Mt("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),np.apply(this,arguments)}function Rd(i,e,t){const s=Kt(i);let a=_n.min(),c=ur();return s.persistence.runTransaction("Execute query","readonly",p=>function(D,N,B){const J=Kt(D),Ee=J.Yi.get(B);return void 0!==Ee?Ye.resolve(J.Ji.get(Ee)):J.Bs.getTargetData(N,B)}(s,p,I(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(p,D.targetId).next(N=>{c=N})}).next(()=>s.Hi.getDocumentsMatchingQuery(p,e,t?a:_n.min(),t?c:ur())).next(D=>(Hg(s,Mn(e),D),{documents:D,ir:c})))}function jg(i,e){const t=Kt(i),s=Kt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.le(c,e).next(p=>p?p.target:null))}function $g(i,e){const t=Kt(i),s=t.Xi.get(e)||_n.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Ca(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hg(t,e,a),a))}function Hg(i,e,t){let s=i.Xi.get(e)||_n.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Xi.set(e,s)}function rp(){return rp=(0,d.Z)(function*(i,e,t,s){const a=Kt(i);let c=ur(),p=Ms();for(const B of t){const J=e.rr(B.metadata.name);B.document&&(c=c.add(J));const Ee=e.ur(B);Ee.setReadTime(e.cr(B.metadata.readTime)),p=p.insert(J,Ee)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),N=yield oc(a,(B=s,I(Bu(Sn.fromString(`__bundle__/docs/${B}`)))));var B;return a.persistence.runTransaction("Apply bundle documents","readwrite",B=>sc(B,D,p).next(J=>(D.apply(B),J)).next(J=>a.Bs.removeMatchingKeysForTargetId(B,N.targetId).next(()=>a.Bs.addMatchingKeys(B,c,N.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(B,J.nr,J.sr)).next(()=>J.nr)))}),rp.apply(this,arguments)}function Gg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,d.Z)(function*(i,e,t=ur()){const s=yield oc(i,I(kc(e.bundledQuery))),a=Kt(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=Gi(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.qs.saveNamedQuery(c,e);const D=s.withResumeToken(bi.EMPTY_BYTE_STRING,p);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(c,D).next(()=>a.Bs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,s.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),ip.apply(this,arguments)}function sp(i,e){return`firestore_clients_${i}_${e}`}function op(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Od(i,e){return`firestore_targets_${i}_${e}`}class ap{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new Rt(a.error.code,a.error.message))),p?new ap(e,t,a.state,c):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new Rt(s.error.code,s.error.message))),c?new ac(e,s.state,a):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=dh();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=_(s.activeTargetIds[p]),c=c.add(s.activeTargetIds[p]);return a?new Vh(e,c):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zg(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wl{constructor(){this.activeTargetIds=dh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,s,a,c){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Dr(kn),this.started=!1,this.yr=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=sp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wl),this.Tr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,d.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(sp(e.persistenceKey,a));if(c){const p=Vh.ar(a,c);p&&(e.gr=e.gr.insert(p.clientId,p))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Od(this.persistenceKey,e));if(s){const a=ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Od(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Mt("SharedClientState","READ",e,t),t}setItem(e,t){Mt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Mt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Mt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,d.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(c){let p=Xi.ct;if(null!=c)try{const D=JSON.parse(c);pn("number"==typeof D),p=D}catch(D){Ir("SharedClientState","Failed to read sequence number from WebStorage",D)}return p}(s.newValue);a!==Xi.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ap(this.currentUser,e,t,s),c=op(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Od(this.persistenceKey,e),c=new ac(e,t,s);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Vh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ap.ar(new In(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return ac.ar(a,t)}br(e){return zg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,d.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Mt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(s),p=[],D=[];return c.forEach(N=>{a.has(N)||p.push(N)}),a.forEach(N=>{c.has(N)||D.push(N)}),this.syncEngine.Wr(p,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class up{constructor(){this.Hr=new wl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wl,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bh{Yr(e){}shutdown(){}}class ka{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pd=null;function lp(){return null===Pd?Pd=268435456+Math.round(2147483648*Math.random()):Pd++,"0x"+Pd.toString(16)}const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gs="WebChannelConnection";class Wg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,c){const p=lp(),D=this.To(e,t);Mt("RestConnection",`Sending RPC '${e}' ${p}:`,D,s);const N={};return this.Eo(N,a,c),this.Ao(e,D,N,s).then(B=>(Mt("RestConnection",`Received RPC '${e}' ${p}: `,B),B),B=>{throw Vr("RestConnection",`RPC '${e}' ${p} failed with error: `,B,"url: ",D,"request:",s),B})}vo(e,t,s,a,c,p){return this.Io(e,t,s,a,c)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${cp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const c=lp();return new Promise((p,D)=>{const N=new vn;N.setWithCredentials(!0),N.listenOnce(x.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case U.NO_ERROR:const J=N.getResponseJson();Mt(Gs,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(J)),p(J);break;case U.TIMEOUT:Mt(Gs,`RPC '${e}' ${c} timed out`),D(new Rt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case U.HTTP_ERROR:const Ee=N.getStatus();if(Mt(Gs,`RPC '${e}' ${c} failed with status:`,Ee,"response text:",N.getResponseText()),Ee>0){let Ze=N.getResponseJson();Array.isArray(Ze)&&(Ze=Ze[0]);const pt=Ze?.error;if(pt&&pt.status&&pt.message){const $t=function(dn){const gn=dn.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(gn)>=0?gn:tt.UNKNOWN}(pt.status);D(new Rt($t,pt.message))}else D(new Rt(tt.UNKNOWN,"Server responded with status "+N.getStatus()))}else D(new Rt(tt.UNAVAILABLE,"Connection failed."));break;default:en()}}finally{Mt(Gs,`RPC '${e}' ${c} completed.`)}});const B=JSON.stringify(a);Mt(Gs,`RPC '${e}' ${c} sending request:`,a),N.send(t,"POST",B,s,15)})}Ro(e,t,s){const a=lp(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=ru(),D=b(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},B=this.longPollingOptions.timeoutSeconds;void 0!==B&&(N.longPollingTimeout=Math.round(1e3*B)),this.useFetchStreams&&(N.xmlHttpFactory=new at({})),this.Eo(N.initMessageHeaders,t,s),N.encodeInitMessageHeaders=!0;const J=c.join("");Mt(Gs,`Creating RPC '${e}' stream ${a}: ${J}`,N);const Ee=p.createWebChannel(J,N);let Ze=!1,pt=!1;const $t=new Zu({ro:gn=>{pt?Mt(Gs,`Not sending because RPC '${e}' stream ${a} is closed:`,gn):(Ze||(Mt(Gs,`Opening RPC '${e}' stream ${a} transport.`),Ee.open(),Ze=!0),Mt(Gs,`RPC '${e}' stream ${a} sending:`,gn),Ee.send(gn))},oo:()=>Ee.close()}),dn=(gn,fr,Br)=>{gn.listen(fr,Cr=>{try{Br(Cr)}catch(Ws){setTimeout(()=>{throw Ws},0)}})};return dn(Ee,_t.EventType.OPEN,()=>{pt||Mt(Gs,`RPC '${e}' stream ${a} transport opened.`)}),dn(Ee,_t.EventType.CLOSE,()=>{pt||(pt=!0,Mt(Gs,`RPC '${e}' stream ${a} transport closed`),$t.wo())}),dn(Ee,_t.EventType.ERROR,gn=>{pt||(pt=!0,Vr(Gs,`RPC '${e}' stream ${a} transport errored:`,gn),$t.wo(new Rt(tt.UNAVAILABLE,"The operation could not be completed")))}),dn(Ee,_t.EventType.MESSAGE,gn=>{var fr;if(!pt){const Br=gn.data[0];pn(!!Br);const Cr=Br,Ws=Cr.error||(null===(fr=Cr[0])||void 0===fr?void 0:fr.error);if(Ws){Mt(Gs,`RPC '${e}' stream ${a} received error:`,Ws);const Ps=Ws.status;let Pi=function(Tu){const vy=ms[Tu];if(void 0!==vy)return Gu(vy)}(Ps),Fo=Ws.message;void 0===Pi&&(Pi=tt.INTERNAL,Fo="Unknown error status: "+Ps+" with message "+Ws.message),pt=!0,$t.wo(new Rt(Pi,Fo)),Ee.close()}else Mt(Gs,`RPC '${e}' stream ${a} received:`,Br),$t._o(Br)}}),dn(D,K.STAT_EVENT,gn=>{gn.stat===Ie.PROXY?Mt(Gs,`RPC '${e}' stream ${a} detected buffering proxy`):gn.stat===Ie.NOPROXY&&Mt(Gs,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{$t.fo()},0),$t}}function jh(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function jc(i){return new W_(i,!0)}class Kg{constructor(e,t,s=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&Mt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Nd{constructor(e,t,s,a,c,p,D,N){this.ii=e,this.$o=s,this.Oo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=D,this.listener=N,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Kg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,d.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,d.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,d.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===tt.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===tt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Rt(tt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,d.Z)(function*(){e.state=0,e.start()}))}tu(e){return Mt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Nd{constructor(e,t,s,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function By(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(N=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===N?1:"REMOVE"===N?2:"CURRENT"===N?3:"RESET"===N?4:en(),a=e.targetChange.targetIds||[],c=function(N,B){return N.useProto3Json?(pn(void 0===B||"string"==typeof B),bi.fromBase64String(B||"")):(pn(void 0===B||B instanceof Uint8Array),bi.fromUint8Array(B||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,D=p&&function(N){const B=void 0===N.code?tt.UNKNOWN:Gu(N.code);return new Rt(B,N.message||"")}(p);t=new Eh(s,a,c,D||null)}else if("documentChange"in e){const s=e.documentChange,a=_u(i,s.document.name),c=Gi(s.document.updateTime),p=s.document.createTime?Gi(s.document.createTime):_n.min(),D=new ts({mapValue:{fields:s.document.fields}}),N=qr.newFoundDocument(a,c,p,D);t=new _h(s.targetIds||[],s.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const s=e.documentDelete,a=_u(i,s.document),c=s.readTime?Gi(s.readTime):_n.min(),p=qr.newNoDocument(a,c);t=new _h([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=_u(i,s.document);t=new _h([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return en();{const s=e.filter,{count:a=0,unchangedNames:c}=s,p=new Ny(a,c);t=new _g(s.targetId,p)}}var N;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return _n.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?_n.min():c.readTime?Gi(c.readTime):_n.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(a,c){let p;const D=c.target;if(p=Uu(D)?{documents:Dg(a,D)}:{query:jf(a,D)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=Vy(a,c.resumeToken);const N=md(a,c.expectedCount);null!==N&&(p.expectedCount=N)}else if(c.snapshotVersion.compareTo(_n.min())>0){p.readTime=ml(a,c.snapshotVersion.toTimestamp());const N=md(a,c.expectedCount);null!==N&&(p.expectedCount=N)}return p}(this.serializer,e);const s=function $y(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class hp extends Nd{constructor(e,t,s,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jy(i,e){return i&&i.length>0?(pn(void 0!==e),i.map(t=>function(s,a){let c=Gi(s.updateTime?s.updateTime:a);return c.isEqual(_n.min())&&(c=Gi(a)),new xy(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Gi(e.commitTime);return this.listener.cu(s,t)}return pn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Kl(this.serializer,s))};this.Wo(t)}}class fp extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Rt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Rt(tt.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.vo(e,t,s,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Rt(tt.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class mv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ir(t),this.mu=!1):Mt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yv{constructor(e,t,s,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(D=>{s.enqueueAndForget((0,d.Z)(function*(){var N;lc(p)&&(Mt("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,d.Z)(function*(B){const J=Kt(B);J.vu.add(4),yield uc(J),J.bu.set("Unknown"),J.vu.delete(4),yield kd(J)}),function(B){return N.apply(this,arguments)})(p))}))}),this.bu=new mv(s,a)}}function kd(i){return gp.apply(this,arguments)}function gp(){return gp=(0,d.Z)(function*(i){if(lc(i))for(const e of i.Ru)yield e(!0)}),gp.apply(this,arguments)}function uc(i){return qg.apply(this,arguments)}function qg(){return qg=(0,d.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),qg.apply(this,arguments)}function Hh(i,e){const t=Kt(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Fd(t)?yp(t):bl(t).Ko()&&zh(t,e))}function Gh(i,e){const t=Kt(i),s=bl(t);t.Au.delete(e),s.Ko()&&mp(t,e),0===t.Au.size&&(s.Ko()?s.jo():lc(t)&&t.bu.set("Unknown"))}function zh(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_n.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(i).su(e)}function mp(i,e){i.Vu.qt(e),bl(i).iu(e)}function yp(i){i.Vu=new gd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),bl(i).start(),i.bu.gu()}function Fd(i){return lc(i)&&!bl(i).Uo()&&i.Au.size>0}function lc(i){return 0===Kt(i).vu.size}function vv(i){i.Vu=void 0}function X_(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,d.Z)(function*(i){i.Au.forEach((e,t)=>{zh(i,e)})}),Yg.apply(this,arguments)}function e0(i,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,d.Z)(function*(i,e){vv(i),Fd(i)?(i.bu.Iu(e),yp(i)):i.bu.set("Unknown")}),Qg.apply(this,arguments)}function t0(i,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,d.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Eh&&2===e.state&&e.cause)try{yield(s=(0,d.Z)(function*(a,c){const p=c.cause;for(const D of c.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,p),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,c){return s.apply(this,arguments)})(i,e)}catch(s){Mt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vp(i,s)}else if(e instanceof _h?i.Vu.Ht(e):e instanceof _g?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(_n.min()))try{const s=yield hv(i.localStore);t.compareTo(s)>=0&&(yield function(a,c){const p=a.Vu.ce(c);return p.targetChanges.forEach((D,N)=>{if(D.resumeToken.approximateByteSize()>0){const B=a.Au.get(N);B&&a.Au.set(N,B.withResumeToken(D.resumeToken,c))}}),p.targetMismatches.forEach((D,N)=>{const B=a.Au.get(D);if(!B)return;a.Au.set(D,B.withResumeToken(bi.EMPTY_BYTE_STRING,B.snapshotVersion)),mp(a,D);const J=new Eu(B.target,D,N,B.sequenceNumber);zh(a,J)}),a.remoteSyncer.applyRemoteEvent(p)}(i,t))}catch(s){Mt("RemoteStore","Failed to raise snapshot:",s),yield vp(i,s)}var s}),Jg.apply(this,arguments)}function vp(i,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,d.Z)(function*(i,e,t){if(!Li(e))throw e;i.vu.add(1),yield uc(i),i.bu.set("Offline"),t||(t=()=>hv(i.localStore)),i.asyncQueue.enqueueRetryable((0,d.Z)(function*(){Mt("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield kd(i)}))}),Xg.apply(this,arguments)}function qu(i,e){return e().catch(t=>vp(i,t,e))}function Il(i){return _p.apply(this,arguments)}function _p(){return _p=(0,d.Z)(function*(i){const e=Kt(i),t=Ja(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;em(e);)try{const a=yield pv(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Ep(e,a)}catch(a){yield vp(e,a)}wp(e)&&Wh(e)}),_p.apply(this,arguments)}function em(i){return lc(i)&&i.Eu.length<10}function Ep(i,e){i.Eu.push(e);const t=Ja(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function wp(i){return lc(i)&&!Ja(i).Uo()&&i.Eu.length>0}function Wh(i){Ja(i).start()}function _v(i){return wu.apply(this,arguments)}function wu(){return wu=(0,d.Z)(function*(i){Ja(i).hu()}),wu.apply(this,arguments)}function tm(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,d.Z)(function*(i){const e=Ja(i);for(const t of i.Eu)e.uu(t.mutations)}),Ip.apply(this,arguments)}function Ev(i,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,d.Z)(function*(i,e,t){const s=i.Eu.shift(),a=mh.from(s,e,t);yield qu(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield Il(i)}),Kh.apply(this,arguments)}function wv(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,d.Z)(function*(i,e){var t;e&&Ja(i).ou&&(yield(t=(0,d.Z)(function*(s,a){if(yg(c=a.code)&&c!==tt.ABORTED){const p=s.Eu.shift();Ja(s).Qo(),yield qu(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Il(s)}var c}),function(s,a){return t.apply(this,arguments)})(i,e)),wp(i)&&Wh(i)}),Dp.apply(this,arguments)}function Ld(i,e){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,d.Z)(function*(i,e){const t=Kt(i);t.asyncQueue.verifyOperationInProgress(),Mt("RemoteStore","RemoteStore received new credentials");const s=lc(t);t.vu.add(3),yield uc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kd(t)}),Dl.apply(this,arguments)}function Vd(i,e){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,d.Z)(function*(i,e){const t=Kt(i);e?(t.vu.delete(2),yield kd(t)):e||(t.vu.add(2),yield uc(t),t.bu.set("Unknown"))}),Cl.apply(this,arguments)}function bl(i){return i.Su||(i.Su=function(e,t,s){const a=Kt(e);return a.fu(),new $h(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:X_.bind(null,i),ao:e0.bind(null,i),nu:t0.bind(null,i)}),i.Ru.push(function(){var e=(0,d.Z)(function*(t){t?(i.Su.Qo(),Fd(i)?yp(i):i.bu.set("Unknown")):(yield i.Su.stop(),vv(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Ja(i){return i.Du||(i.Du=function(e,t,s){const a=Kt(e);return a.fu(),new hp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:_v.bind(null,i),ao:wv.bind(null,i),au:tm.bind(null,i),cu:Ev.bind(null,i)}),i.Ru.push(function(){var e=(0,d.Z)(function*(t){t?(i.Du.Qo(),yield Il(i)):(yield i.Du.stop(),i.Eu.length>0&&(Mt("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class Zh{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,c){const p=Date.now()+s,D=new Zh(e,t,p,a,c);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(i,e){if(Ir("AsyncQueue",`${e}: ${i}`),Li(i))return new Rt(tt.UNAVAILABLE,`${e}: ${i}`);throw i}class Tl{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Zt.comparator(t.key,s.key):(t,s)=>Zt.comparator(t.key,s.key),this.keyedMap=mu(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new Tl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Tl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class qh{constructor(){this.Cu=new Dr(Zt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):en():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class dc{constructor(e,t,s,a,c,p,D,N,B){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=D,this.excludesMetadataChanges=N,this.hasCachedResults=B}static fromInitialDocuments(e,t,s,a,c){const p=[];return t.forEach(D=>{p.push({type:0,doc:D})}),new dc(e,t,Tl.emptySet(t),p,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ke(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Cp{constructor(){this.Nu=void 0,this.listeners=[]}}class Iv{constructor(){this.queries=new Hs(e=>ct(e),ke),this.onlineState="Unknown",this.ku=new Set}}function nm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,d.Z)(function*(i,e){const t=Kt(i),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Cp),a)try{c.Nu=yield t.onListen(s)}catch(p){const D=cc(p,`Initialization of query '${Ht(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&Ap(t)}),bp.apply(this,arguments)}function Yh(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,d.Z)(function*(i,e){const t=Kt(i),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Tp.apply(this,arguments)}function rm(i,e){const t=Kt(i);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const D of p.listeners)D.$u(a)&&(s=!0);p.Nu=a}}s&&Ap(t)}function im(i,e,t){const s=Kt(i),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function Ap(i){i.ku.forEach(e=>{e.next()})}class No{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class om{constructor(e){this.serializer=e}rr(e){return _u(this.serializer,e)}ur(e){return e.metadata.exists?rs(this.serializer,e.document,!1):qr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Gi(e)}}class n0{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=am(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=Sn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new om(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.rr(a.metadata.name);for(const p of a.metadata.queries){const D=(t.get(p)||ur()).add(c);t.set(p,D)}}return t}complete(){var e=this;return(0,d.Z)(function*(){const t=yield function gv(i,e,t,s){return rp.apply(this,arguments)}(e.localStore,new om(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Gg(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function am(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Qh{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ur(),this.mutatedKeys=ur(),this.tc=yr(e),this.ec=new Tl(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new qh,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,D=!1;const N="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,B="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((J,Ee)=>{const Ze=a.get(J),pt=rn(this.query,Ee)?Ee:null,$t=!!Ze&&this.mutatedKeys.has(Ze.key),dn=!!pt&&(pt.hasLocalMutations||this.mutatedKeys.has(pt.key)&&pt.hasCommittedMutations);let gn=!1;Ze&&pt?Ze.data.isEqual(pt.data)?$t!==dn&&(s.track({type:3,doc:pt}),gn=!0):this.rc(Ze,pt)||(s.track({type:2,doc:pt}),gn=!0,(N&&this.tc(pt,N)>0||B&&this.tc(pt,B)<0)&&(D=!0)):!Ze&&pt?(s.track({type:0,doc:pt}),gn=!0):Ze&&!pt&&(s.track({type:1,doc:Ze}),gn=!0,(N||B)&&(D=!0)),gn&&(pt?(p=p.add(pt),c=dn?c.add(J):c.delete(J)):(p=p.delete(J),c=c.delete(J)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const J="F"===this.query.limitType?p.last():p.first();p=p.delete(J.key),c=c.delete(J.key),s.track({type:1,doc:J})}return{ec:p,ic:s,zi:D,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((B,J)=>function(Ee,Ze){const pt=$t=>{switch($t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en()}};return pt(Ee)-pt(Ze)}(B.type,J.type)||this.tc(B.doc,J.doc)),this.oc(s);const p=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,N=D!==this.Xu;return this.Xu=D,0!==c.length||N?{snapshot:new dc(this.query,e.ec,a,c,e.mutatedKeys,0===D,N,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:p}:{cc:p}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new qh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ur(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Sp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Qh(s))}),t}hc(e){this.Yu=e.ir,this.Zu=ur();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Dv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Cv{constructor(e){this.key=e,this.fc=!1}}class lm{constructor(e,t,s,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.dc={},this.wc=new Hs(D=>ct(D),ke),this._c=new Map,this.mc=new Set,this.gc=new Dr(Zt.comparator),this.yc=new Map,this.Ic=new or,this.Tc={},this.Ec=new Map,this.Ac=Po.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function bv(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,d.Z)(function*(i,e){const t=uf(i);let s,a;const c=t.wc.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.lc();else{const p=yield oc(t.localStore,I(e)),D=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Mp(t,e,s,"current"===D,p.resumeToken),t.isPrimaryClient&&Hh(t.remoteStore,p)}return a}),Jh.apply(this,arguments)}function Mp(i,e,t,s,a){return xp.apply(this,arguments)}function xp(){return xp=(0,d.Z)(function*(i,e,t,s,a){i.Rc=(Ee,Ze,pt)=>{return($t=(0,d.Z)(function*(dn,gn,fr,Br){let Cr=gn.view.sc(fr);Cr.zi&&(Cr=yield Rd(dn.localStore,gn.query,!1).then(({documents:Pi})=>gn.view.sc(Pi,Cr)));const Ws=Br&&Br.targetChanges.get(gn.targetId),Ps=gn.view.applyChanges(Cr,dn.isPrimaryClient,Ws);return jd(dn,gn.targetId,Ps.cc),Ps.snapshot}),function(dn,gn,fr,Br){return $t.apply(this,arguments)})(i,Ee,Ze,pt);var $t};const c=yield Rd(i.localStore,e,!0),p=new um(e,c.ir),D=p.sc(c.documents),N=pd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,a),B=p.applyChanges(D,i.isPrimaryClient,N);jd(i,t,B.cc);const J=new Dv(e,t,p);return i.wc.set(e,J),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),B.snapshot}),xp.apply(this,arguments)}function cm(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,d.Z)(function*(i,e){const t=Kt(i),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(c=>!ke(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ku(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Gh(t.remoteStore,s.targetId),Yu(t,s.targetId)}).catch(qo))):(Yu(t,s.targetId),yield Ku(t.localStore,s.targetId,!0))}),Xh.apply(this,arguments)}function Fa(){return Fa=(0,d.Z)(function*(i,e,t){const s=Gd(i);try{const a=yield function(c,p){const D=Kt(c),N=Hr.now(),B=p.reduce((Ze,pt)=>Ze.add(pt.key),ur());let J,Ee;return D.persistence.runTransaction("Locally write mutations","readwrite",Ze=>{let pt=Ms(),$t=ur();return D.Zi.getEntries(Ze,B).next(dn=>{pt=dn,pt.forEach((gn,fr)=>{fr.isValidDocument()||($t=$t.add(gn))})}).next(()=>D.localDocuments.getOverlayedDocuments(Ze,pt)).next(dn=>{J=dn;const gn=[];for(const fr of p){const Br=Ry(fr,J.get(fr.key).overlayedDocument);null!=Br&&gn.push(new Ya(fr.key,Br,cl(Br.value.mapValue),Ti.exists(!0)))}return D.mutationQueue.addMutationBatch(Ze,N,gn,p)}).next(dn=>{Ee=dn;const gn=dn.applyToLocalDocumentSet(J,$t);return D.documentOverlayCache.saveOverlays(Ze,dn.batchId,gn)})}).then(()=>({batchId:Ee.batchId,changes:od(J)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,p,D){let N=c.Tc[c.currentUser.toKey()];N||(N=new Dr(kn)),N=N.insert(p,D),c.Tc[c.currentUser.toKey()]=N}(s,a.batchId,t),yield Iu(s,a.changes),yield Il(s.remoteStore)}catch(a){const c=cc(a,"Failed to persist write");t.reject(c)}}),Fa.apply(this,arguments)}function ef(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,d.Z)(function*(i,e){const t=Kt(i);try{const s=yield fv(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.yc.get(c);p&&(pn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.fc=!0:a.modifiedDocuments.size>0?pn(p.fc):a.removedDocuments.size>0&&(pn(p.fc),p.fc=!1))}),yield Iu(t,s,e)}catch(s){yield qo(s)}}),Rp.apply(this,arguments)}function dm(i,e,t){const s=Kt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((c,p)=>{const D=p.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(c,p){const D=Kt(c);D.onlineState=p;let N=!1;D.queries.forEach((B,J)=>{for(const Ee of J.listeners)Ee.Mu(p)&&(N=!0)}),N&&Ap(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function r0(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,d.Z)(function*(i,e,t){const s=Kt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),c=a&&a.key;if(c){let p=new Dr(Zt.comparator);p=p.insert(c,qr.newNoDocument(c,_n.min()));const D=ur().add(c),N=new fd(_n.min(),new Map,new Dr(kn),p,D);yield ef(s,N),s.gc=s.gc.remove(c),s.yc.delete(e),nf(s)}else yield Ku(s.localStore,e,!1).then(()=>Yu(s,e,t)).catch(qo)}),tf.apply(this,arguments)}function Av(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,d.Z)(function*(i,e){const t=Kt(i),s=e.batch.batchId;try{const a=yield Bg(t.localStore,e);Bd(t,s,null),$c(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Iu(t,a)}catch(a){yield qo(a)}}),Op.apply(this,arguments)}function Sv(i,e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,d.Z)(function*(i,e,t){const s=Kt(i);try{const a=yield function(c,p){const D=Kt(c);return D.persistence.runTransaction("Reject batch","readwrite-primary",N=>{let B;return D.mutationQueue.lookupMutationBatch(N,p).next(J=>(pn(null!==J),B=J.keys(),D.mutationQueue.removeMutationBatch(N,J))).next(()=>D.mutationQueue.performConsistencyCheck(N)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(N,B,p)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(N,B)).next(()=>D.localDocuments.getDocuments(N,B))})}(s.localStore,e);Bd(s,e,t),$c(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Iu(s,a)}catch(a){yield qo(a)}}),Ud.apply(this,arguments)}function Pp(){return Pp=(0,d.Z)(function*(i,e){const t=Kt(i);lc(t.remoteStore)||Mt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const p=Kt(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>p.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=cc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Pp.apply(this,arguments)}function $c(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Bd(i,e,t){const s=Kt(i);let a=s.Tc[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Yu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),t&&i.dc.Pc(s,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||xv(i,s)})}function xv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Gh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),nf(i))}function jd(i,e,t){for(const s of t)s instanceof Qh?(i.Ic.addReference(s.key,e),s0(i,s)):s instanceof Sp?(Mt("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||xv(i,s.key)):en()}function s0(i,e){const t=e.key,s=t.path.canonicalString();i.gc.get(t)||i.mc.has(s)||(Mt("SyncEngine","New document in limbo: "+t),i.mc.add(s),nf(i))}function nf(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new Zt(Sn.fromString(e)),s=i.Ac.next();i.yc.set(s,new Cv(t)),i.gc=i.gc.insert(t,s),Hh(i.remoteStore,new Eu(I(Bu(t.path)),s,"TargetPurposeLimboResolution",Xi.ct))}}function Iu(i,e,t){return rf.apply(this,arguments)}function rf(){return rf=(0,d.Z)(function*(i,e,t){const s=Kt(i),a=[],c=[],p=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,N)=>{p.push(s.Rc(N,e,t).then(B=>{if((B||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(N.targetId,B?.fromCache?"not-current":"current"),B){a.push(B);const J=xd.Li(N.targetId,B);c.push(J)}}))}),yield Promise.all(p),s.dc.nu(a),yield(D=(0,d.Z)(function*(N,B){const J=Kt(N);try{yield J.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ee=>Ye.forEach(B,Ze=>Ye.forEach(Ze.Fi,pt=>J.persistence.referenceDelegate.addReference(Ee,Ze.targetId,pt)).next(()=>Ye.forEach(Ze.Bi,pt=>J.persistence.referenceDelegate.removeReference(Ee,Ze.targetId,pt)))))}catch(Ee){if(!Li(Ee))throw Ee;Mt("LocalStore","Failed to update sequence numbers: "+Ee)}for(const Ee of B){const Ze=Ee.targetId;if(!Ee.fromCache){const pt=J.Ji.get(Ze),dn=pt.withLastLimboFreeSnapshotVersion(pt.snapshotVersion);J.Ji=J.Ji.insert(Ze,dn)}}}),function(N,B){return D.apply(this,arguments)})(s.localStore,c))}),rf.apply(this,arguments)}function hm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,d.Z)(function*(i,e){const t=Kt(i);if(!t.currentUser.isEqual(e)){Mt("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(p=>{p.forEach(D=>{D.reject(new Rt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Iu(t,s.er)}var a}),$d.apply(this,arguments)}function Qu(i,e){const t=Kt(i),s=t.yc.get(e);if(s&&s.fc)return ur().add(s.key);{let a=ur();const c=t._c.get(e);if(!c)return a;for(const p of c){const D=t.wc.get(p);a=a.unionWith(D.view.nc)}return a}}function sf(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,d.Z)(function*(i,e){const t=Kt(i),s=yield Rd(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&jd(t,e.targetId,a.cc),a}),Hc.apply(this,arguments)}function Hd(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,d.Z)(function*(i,e){const t=Kt(i);return $g(t.localStore,e).then(s=>Iu(t,s))}),Np.apply(this,arguments)}function kp(i,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,d.Z)(function*(i,e,t,s){const a=Kt(i),c=yield function(p,D){const N=Kt(p),B=Kt(N.mutationQueue);return N.persistence.runTransaction("Lookup mutation documents","readonly",J=>B.Sn(J,D).next(Ee=>Ee?N.localDocuments.getDocuments(J,Ee):Ye.resolve(null)))}(a.localStore,e);var D;null!==c?("pending"===t?yield Il(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),$c(a,e),D=e,Kt(Kt(a.localStore).mutationQueue).Cn(D)):en(),yield Iu(a,c)):Mt("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function Fp(){return Fp=(0,d.Z)(function*(i,e){const t=Kt(i);if(uf(t),Gd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Gc(t,s.toArray());t.vc=!0,yield Vd(t.remoteStore,!0);for(const c of a)Hh(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(Yu(t,p),Ku(t.localStore,p,!0))),Gh(t.remoteStore,p)}),yield a,yield Gc(t,s),function(c){const p=Kt(c);p.yc.forEach((D,N)=>{Gh(p.remoteStore,N)}),p.Ic.Ts(),p.yc=new Map,p.gc=new Dr(Zt.comparator)}(t),t.vc=!1,yield Vd(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function Gc(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,d.Z)(function*(i,e,t){const s=Kt(i),a=[],c=[];for(const p of e){let D;const N=s._c.get(p);if(N&&0!==N.length){D=yield oc(s.localStore,I(N[0]));for(const B of N){const J=s.wc.get(B),Ee=yield sf(s,J);Ee.snapshot&&c.push(Ee.snapshot)}}else{const B=yield jg(s.localStore,p);D=yield oc(s.localStore,B),yield Mp(s,Ov(B),p,!1,D.resumeToken)}a.push(D)}return s.dc.nu(c),a}),Lp.apply(this,arguments)}function Ov(i){return fl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Pv(i){const e=Kt(i);return Kt(Kt(e.localStore).persistence).$i()}function o0(i,e,t,s){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,d.Z)(function*(i,e,t,s){const a=Kt(i);if(a.vc)return void Mt("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield $g(a.localStore,Mn(c[0])),D=fd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield Iu(a,p,D);break}case"rejected":yield Ku(a.localStore,e,!0),Yu(a,e,s);break;default:en()}}),Vp.apply(this,arguments)}function Nv(i,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,d.Z)(function*(i,e,t){const s=uf(i);if(s.vc){for(const a of e){if(s._c.has(a)){Mt("SyncEngine","Adding an already active target "+a);continue}const c=yield jg(s.localStore,a),p=yield oc(s.localStore,c);yield Mp(s,Ov(c),p.targetId,!1,p.resumeToken),Hh(s.remoteStore,p)}for(const a of t)s._c.has(a)&&(yield Ku(s.localStore,a,!1).then(()=>{Gh(s.remoteStore,a),Yu(s,a)}).catch(qo))}}),Up.apply(this,arguments)}function uf(i){const e=Kt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r0.bind(null,e),e.dc.nu=rm.bind(null,e.eventManager),e.dc.Pc=im.bind(null,e.eventManager),e}function Gd(i){const e=Kt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sv.bind(null,e),e}class hc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,d.Z)(function*(){t.serializer=jc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new Ph(Sd.zs,this.serializer)}createSharedClientState(e){return new up}terminate(){var e=this;return(0,d.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends hc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,d.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gd(s.Vc.syncEngine),yield Il(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Jf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new kl(t,this.persistence);return new Ou(e.asyncQueue,s)}createPersistence(e){const t=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new Fh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jh(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new up}}class fm extends Bp{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,d.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Uh&&(s.sharedClientState.syncEngine={jr:kp.bind(null,a),zr:o0.bind(null,a),Wr:Nv.bind(null,a),$i:Pv.bind(null,a),Qr:Hd.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var c=(0,d.Z)(function*(p){yield function Rv(i,e){return Fp.apply(this,arguments)}(s.Vc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jh();if(!Uh.D(t))throw new Rt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class zc{initialize(e,t){var s=this;return(0,d.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>dm(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=hm.bind(null,s.syncEngine),yield Vd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iv}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=new Wg(e.databaseInfo);return new fp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=D=>dm(this.syncEngine,D,0),p=ka.D()?new ka:new Bh,new yv(t,s,a,c,p);var t,s,a,c,p}createSyncEngine(e,t){return function(s,a,c,p,D,N,B){const J=new lm(s,a,c,p,D,N);return B&&(J.vc=!0),J}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,d.Z)(function*(t){const s=Kt(t);Mt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield uc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pm(i,e=10240){let t=0;return{read:()=>(0,d.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,d.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,d.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,d.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,d.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const c=yield e.$c(a);return new sm(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,d.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,d.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,d.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,d.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Rt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,d.Z)(function*(c,p){const D=Kt(c),N=_d(D.serializer)+"/documents",B={documents:p.map(pt=>yd(D.serializer,pt))},J=yield D.vo("BatchGetDocuments",N,B,p.length),Ee=new Map;J.forEach(pt=>{const $t=function Uy(i,e){return"found"in e?function(t,s){pn(!!s.found);const a=_u(t,s.found.name),c=Gi(s.found.updateTime),p=s.found.createTime?Gi(s.found.createTime):_n.min(),D=new ts({mapValue:{fields:s.found.fields}});return qr.newFoundDocument(a,c,p,D)}(i,e):"missing"in e?function(t,s){pn(!!s.missing),pn(!!s.readTime);const a=_u(t,s.missing),c=Gi(s.readTime);return qr.newNoDocument(a,c)}(i,e):en()}(D.serializer,pt);Ee.set($t.key.toString(),$t)});const Ze=[];return p.forEach(pt=>{const $t=Ee.get(pt.toString());pn(!!$t),Ze.push($t)}),Ze}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,d.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=Zt.fromPath(a);e.mutations.push(new ph(c,e.precondition(c)))}),yield(s=(0,d.Z)(function*(a,c){const p=Kt(a),D=_d(p.serializer)+"/documents",N={writes:c.map(B=>Kl(p.serializer,B))};yield p.Io("Commit",D,N)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw en();t=_n.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Rt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_n.min())?Ti.exists(!1):Ti.updateTime(t):Ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_n.min()))throw new Rt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(t)}return Ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a0{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.Bc=s.maxAttempts,this.qo=new Kg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,d.Z)(function*(){const t=new fc(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!za(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yg(t)}return!1}}class zd{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=In.UNAUTHENTICATED,this.clientId=yi.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,d.Z)(function*(D){Mt("FirestoreClient","Received user=",D.uid),yield c.authCredentialListener(D),c.user=D});return function(D){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(Mt("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,d.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,d.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=cc(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,d.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Mt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,d.Z)(function*(c){s.isEqual(c)||(yield dv(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jp.apply(this,arguments)}function Wd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,d.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield pc(i);Mt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(a=>Ld(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>Ld(e.remoteStore,c)),i._onlineComponents=e}),$p.apply(this,arguments)}function Xa(i){return"FirebaseError"===i.name?i.code===tt.FAILED_PRECONDITION||i.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function pc(i){return zs.apply(this,arguments)}function zs(){return zs=(0,d.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Mt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Xa(t))throw t;Vr("Error using user provided cache. Falling back to memory cache: "+t),yield df(i,new hc)}}else Mt("FirestoreClient","Using default OfflineComponentProvider"),yield df(i,new hc);return i._offlineComponents}),zs.apply(this,arguments)}function Du(i){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,d.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Mt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wd(i,i._uninitializedComponentsProvider._online)):(Mt("FirestoreClient","Using default OnlineComponentProvider"),yield Wd(i,new zc))),i._onlineComponents}),Wc.apply(this,arguments)}function pa(i){return pc(i).then(e=>e.persistence)}function Kc(i){return pc(i).then(e=>e.localStore)}function gc(i){return Du(i).then(e=>e.remoteStore)}function Al(i){return Du(i).then(e=>e.syncEngine)}function eu(i){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,d.Z)(function*(i){const e=yield Du(i),t=e.eventManager;return t.onListen=bv.bind(null,e.syncEngine),t.onUnlisten=cm.bind(null,e.syncEngine),t}),Sl.apply(this,arguments)}function yc(i,e,t={}){const s=new ri;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function(a,c,p,D,N){const B=new lf({next:Ee=>{c.enqueueAndForget(()=>Yh(a,J));const Ze=Ee.docs.has(p);!Ze&&Ee.fromCache?N.reject(new Rt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):Ze&&Ee.fromCache&&D&&"server"===D.source?N.reject(new Rt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):N.resolve(Ee)},error:Ee=>N.reject(Ee)}),J=new No(Bu(p.path),B,{includeMetadataChanges:!0,Ku:!0});return nm(a,J)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Hp(i,e,t={}){const s=new ri;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function(a,c,p,D,N){const B=new lf({next:Ee=>{c.enqueueAndForget(()=>Yh(a,J)),Ee.fromCache&&"server"===D.source?N.reject(new Rt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):N.resolve(Ee)},error:Ee=>N.reject(Ee)}),J=new No(p,B,{includeMetadataChanges:!0,Ku:!0});return nm(a,J)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Gp(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const zp=new Map;function hf(i,e,t){if(!t)throw new Rt(tt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Em(i,e,t,s){if(!0===e&&!0===s)throw new Rt(tt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wm(i){if(!Zt.isDocumentKey(i))throw new Rt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wp(i){if(Zt.isDocumentKey(i))throw new Rt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":en()}function xr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Rt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new Rt(tt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pf(i,e){if(e<=0)throw new Rt(tt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class gf{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Rt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Rt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Em("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gp(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Rt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Mu;switch(t.type){case"firstParty":return new oa(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Rt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zp.get(e);t&&(Mt("ComponentProvider","Removing Datastore"),zp.delete(e),t.terminate())}(this),Promise.resolve()}}function Zd(i,e,t,s={}){var a;const c=(i=xr(i,Kd))._getSettings(),p=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==p&&Vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:p,ssl:!1})),s.mockUserToken){let D,N;if("string"==typeof s.mockUserToken)D=s.mockUserToken,N=In.MOCK_USER;else{D=(0,ae.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const B=s.mockUserToken.sub||s.mockUserToken.user_id;if(!B)throw new Rt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new In(B)}i._authCredentials=new wa(new Su(D,N))}}class Ai{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ai(this.firestore,e,this._key)}}class Rs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Cu extends Rs{constructor(e,t,s){super(e,t,Bu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ai(this.firestore,null,new Zt(e))}withConverter(e){return new Cu(this.firestore,e,this._path)}}function Kp(i,e,...t){if(i=(0,ae.m9)(i),hf("collection","path",e),i instanceof Kd){const s=Sn.fromString(e,...t);return Wp(s),new Cu(i,null,s)}{if(!(i instanceof Ai||i instanceof Cu))throw new Rt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Sn.fromString(e,...t));return Wp(s),new Cu(i.firestore,null,s)}}function Zp(i,e){if(i=xr(i,Kd),hf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Rt(tt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rs(i,null,(t=e,new Za(Sn.emptyPath(),t)));var t}function qp(i,e,...t){if(i=(0,ae.m9)(i),1===arguments.length&&(e=yi.A()),hf("doc","path",e),i instanceof Kd){const s=Sn.fromString(e,...t);return wm(s),new Ai(i,null,new Zt(s))}{if(!(i instanceof Ai||i instanceof Cu))throw new Rt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Sn.fromString(e,...t));return wm(s),new Ai(i.firestore,i instanceof Cu?i.converter:null,new Zt(s))}}function Im(i,e){return i=(0,ae.m9)(i),e=(0,ae.m9)(e),(i instanceof Ai||i instanceof Cu)&&(e instanceof Ai||e instanceof Cu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function qd(i,e){return i=(0,ae.m9)(i),e=(0,ae.m9)(e),i instanceof Rs&&e instanceof Rs&&i.firestore===e.firestore&&ke(i._query,e._query)&&i.converter===e.converter}class Dm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Kg(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&Mt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,d.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Li(t))throw t;Mt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Zh.createAndSchedule(this,e,t,s,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&en()}verifyOperationInProgress(){}sa(){var e=this;return(0,d.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class Yp{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Cm=-1;class Si extends Kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Dm,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qp(this),this._firestoreClient.terminate()}}function zi(i){return i._firestoreClient||Qp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qp(i){var e,t,s;const a=i._freezeSettings(),c=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ul(i._databaseId,D,i._persistenceKey,(B=a).host,B.ssl,B.experimentalForceLongPolling,B.experimentalAutoDetectLongPolling,Gp(B.experimentalLongPollingOptions),B.useFetchStreams));var D,B;i._firestoreClient=new zd(i._authCredentials,i._appCheckCredentials,i._queue,c),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Uv(i,e){Xp(i=xr(i,Si));const t=zi(i);if(t._uninitializedComponentsProvider)throw new Rt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");Vr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),a=new zc;return bm(t,a,new Bp(a,s.cacheSizeBytes,e?.forceOwnership))}function Bv(i){Xp(i=xr(i,Si));const e=zi(i);if(e._uninitializedComponentsProvider)throw new Rt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");Vr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new zc;return bm(e,s,new fm(s,t.cacheSizeBytes))}function bm(i,e,t){const s=new ri;return i.asyncQueue.enqueue((0,d.Z)(function*(){try{yield df(i,t),yield Wd(i,e),s.resolve()}catch(a){const c=a;if(!Xa(c))throw c;Vr("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Tm(i){if(i._initialized&&!i._terminated)throw new Rt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return i._queue.enqueueAndForgetEvenWhileRestricted((0,d.Z)(function*(){try{yield(t=(0,d.Z)(function*(s){if(!so.D())return Promise.resolve();const a=s+"main";yield so.delete(a)}),function(s){return t.apply(this,arguments)})(Md(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Jp(i){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function Mv(i,e){return Pp.apply(this,arguments)}(yield Al(e),t)})),t.promise}(zi(i=xr(i,Si)))}function Am(i){return function Zc(i){return i.asyncQueue.enqueue((0,d.Z)(function*(){const e=yield pa(i),t=yield gc(i);return e.setNetworkEnabled(!0),function(s){const a=Kt(s);return a.vu.delete(0),kd(a)}(t)}))}(zi(i=xr(i,Si)))}function Sm(i){return function qc(i){return i.asyncQueue.enqueue((0,d.Z)(function*(){const e=yield pa(i),t=yield gc(i);return e.setNetworkEnabled(!1),(s=(0,d.Z)(function*(a){const c=Kt(a);c.vu.add(0),yield uc(c),c.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(zi(i=xr(i,Si)))}function Mm(i,e){const t=zi(i=xr(i,Si)),s=new Yp;return function ym(i,e,t,s){const a=function(c,p){let D;return D="string"==typeof c?ky().encode(c):c,N=function(N,B){if(N instanceof Uint8Array)return pm(N,B);if(N instanceof ArrayBuffer)return pm(new Uint8Array(N),B);if(N instanceof ReadableStream)return N.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new cf(N,p);var N}(t,jc(e));i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){!function kv(i,e,t){const s=Kt(i);var a;(a=(0,d.Z)(function*(c,p,D){try{const N=yield p.getMetadata();if(yield function(Ze,pt){const $t=Kt(Ze),dn=Gi(pt.createTime);return $t.persistence.runTransaction("hasNewerBundle","readonly",gn=>$t.qs.getBundleMetadata(gn,pt.id)).then(gn=>!!gn&&gn.createTime.compareTo(dn)>=0)}(c.localStore,N))return yield p.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ze=N).totalDocuments,bytesLoaded:Ze.totalBytes,totalDocuments:Ze.totalDocuments,totalBytes:Ze.totalBytes}),Promise.resolve(new Set);D._updateProgress(am(N));const B=new n0(N,c.localStore,p.serializer);let J=yield p.bc();for(;J;){const Ze=yield B.zu(J);Ze&&D._updateProgress(Ze),J=yield p.bc()}const Ee=yield B.complete();return yield Iu(c,Ee.Ju,void 0),yield function(Ze,pt){const $t=Kt(Ze);return $t.persistence.runTransaction("Save bundle","readwrite",dn=>$t.qs.saveBundleMetadata(dn,pt))}(c.localStore,N),D._completeWith(Ee.progress),Promise.resolve(Ee.Hu)}catch(N){return Vr("SyncEngine",`Loading bundle failed with ${N}`),D._failWith(N),Promise.resolve(new Set)}var Ze}),function(c,p,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Al(i),a,s)}))}(t,i._databaseId,e,s),s}function xm(i,e){return function vm(i,e){return i.asyncQueue.enqueue((0,d.Z)(function*(){return function(t,s){const a=Kt(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,s))}(yield Kc(i),e)}))}(zi(i=xr(i,Si)),e).then(t=>t?new Rs(i,null,t.query):null)}function Xp(i){if(i._initialized||i._terminated)throw new Rt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(bi.fromBase64String(e))}catch(t){throw new Rt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ml{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Rt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xl{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Rt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Rt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}const Os=/^__.*__$/;class Om{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oc(e,this.data,t,this.fieldTransforms)}}class Pm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en()}}class Yd{constructor(e,t,s,a,c,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Nm(this.ca)&&Os.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $v{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}ya(e,t,s,a=!1){return new Yd({ca:e,methodName:t,ga:s,path:sr.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(i){const e=i._freezeSettings(),t=jc(i._databaseId);return new $v(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Qd(i,e,t,s,a,c={}){const p=i.ya(c.merge||c.mergeFields?2:0,e,t,a);La("Data must be an object, but it was:",p,s);const D=Um(s,p);let N,B;if(c.merge)N=new es(p.fieldMask),B=p.fieldTransforms;else if(c.mergeFields){const J=[];for(const Ee of c.mergeFields){const Ze=ko(e,Ee,t);if(!p.contains(Ze))throw new Rt(tt.INVALID_ARGUMENT,`Field '${Ze}' is specified in your field mask but missing from your input data.`);Bm(J,Ze)||J.push(Ze)}N=new es(J),B=p.fieldTransforms.filter(Ee=>N.covers(Ee.field))}else N=null,B=p.fieldTransforms;return new Om(new ts(D),N,B)}class bu extends xl{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bu}}function km(i,e,t){return new Yd({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends xl{_toFieldTransform(e){return new xc(e.path,new $u)}isEqual(e){return e instanceof eg}}class Fm extends xl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Eo(c,t)),a=new yu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Hv extends xl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Eo(c,t)),a=new Hu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Lm extends xl{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new pl(e.serializer,Pf(e.serializer,this.Ia));return new xc(e.path,t)}isEqual(e){return this===e}}function Vm(i,e,t,s){const a=i.ya(1,e,t);La("Data must be an object, but it was:",a,s);const c=[],p=ts.empty();Wa(s,(N,B)=>{const J=Jd(e,N,t);B=(0,ae.m9)(B);const Ee=a.da(J);if(B instanceof bu)c.push(J);else{const Ze=Eo(B,Ee);null!=Ze&&(c.push(J),p.set(J,Ze))}});const D=new es(c);return new Pm(p,D,a.fieldTransforms)}function vf(i,e,t,s,a,c){const p=i.ya(1,e,t),D=[ko(e,s,t)],N=[a];if(c.length%2!=0)throw new Rt(tt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ze=0;Ze<c.length;Ze+=2)D.push(ko(e,c[Ze])),N.push(c[Ze+1]);const B=[],J=ts.empty();for(let Ze=D.length-1;Ze>=0;--Ze)if(!Bm(B,D[Ze])){const pt=D[Ze];let $t=N[Ze];$t=(0,ae.m9)($t);const dn=p.da(pt);if($t instanceof bu)B.push(pt);else{const gn=Eo($t,dn);null!=gn&&(B.push(pt),J.set(pt,gn))}}const Ee=new es(B);return new Pm(J,Ee,p.fieldTransforms)}function _f(i,e,t,s=!1){return Eo(t,i.ya(s?4:3,e))}function Eo(i,e){if(tg(i=(0,ae.m9)(i)))return La("Unsupported field value:",e,i),Um(i,e);if(i instanceof xl)return function(t,s){if(!Nm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const p of t){let D=Eo(p,s.wa(c));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),c++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,ae.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pf(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Hr.fromDate(t);return{timestampValue:ml(s.serializer,a)}}if(t instanceof Hr){const a=new Hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ml(s.serializer,a)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:Vy(s.serializer,t._byteString)};if(t instanceof Ai){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ff(t)}`)}(i,e)}function Um(i,e){const t={};return Ll(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(i,(s,a)=>{const c=Eo(a,e.ha(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Hr||i instanceof yf||i instanceof vc||i instanceof Ai||i instanceof xl)}function La(i,e,t){if(!tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ff(t);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function ko(i,e,t){if((e=(0,ae.m9)(e))instanceof Ml)return e._internalPath;if("string"==typeof e)return Jd(i,e);throw Xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const tu=new RegExp("[~\\*/\\[\\]]");function Jd(i,e,t){if(e.search(tu)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ml(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xd(i,e,t,s,a){const c=s&&!s.isEmpty(),p=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let N="";return(c||p)&&(N+=" (found",c&&(N+=` in field ${s}`),p&&(N+=` in document ${a}`),N+=")"),new Rt(tt.INVALID_ARGUMENT,D+i+N)}function Bm(i,e){return i.some(t=>t.isEqual(e))}class eh{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ai(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends eh{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Jd(i,e):e instanceof Ml?e._internalPath:e._delegate._internalPath}function wf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Rt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _c{}class th extends _c{}function jm(i,e,...t){let s=[];e instanceof _c&&s.push(e),s=s.concat(t),function(a){const c=a.filter(D=>D instanceof Ec).length,p=a.filter(D=>D instanceof nh).length;if(c>1||c>0&&p>0)throw new Rt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class nh extends th{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Rs(e.firestore,e.converter,$(e._query,t))}_parse(e){const t=Rl(e.firestore);return function(a,c,p,D,N,B,J){let Ee;if(N.isKeyField()){if("array-contains"===B||"array-contains-any"===B)throw new Rt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${B}' queries on documentId().`);if("in"===B||"not-in"===B){qm(J,B);const Ze=[];for(const pt of J)Ze.push(Zm(D,a,pt));Ee={arrayValue:{values:Ze}}}else Ee=Zm(D,a,J)}else"in"!==B&&"not-in"!==B&&"array-contains-any"!==B||qm(J,B),Ee=_f(p,"where",J,"in"===B||"not-in"===B);return ve.create(N,B,Ee)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $m(i,e,t){const s=e,a=Ef("where",i);return nh._create(a,s,t)}class Ec extends _c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ec(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let c=s;const p=a.getFlattenedFilters();for(const D of p)Ym(c,D),c=$(c,D)}(e._query,t),new Rs(e.firestore,e.converter,$(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new If(e,t)}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new T(a,c);return function(D,N){if(null===Ac(D)){const B=v(D);null!==B&&Qm(0,B,N.field)}}(s,p),p}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Za(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Hm(i,e="asc"){const t=e,s=Ef("orderBy",i);return If._create(s,t)}class Jc extends th{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jc(e,t,s)}_apply(e){return new Rs(e.firestore,e.converter,X(e._query,this._limit,this._limitType))}}function Df(i){return pf("limit",i),Jc._create("limit",i,"F")}function rg(i){return pf("limitToLast",i),Jc._create("limitToLast",i,"L")}class rh extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(a=t,new Za((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Gm(...i){return rh._create("startAt",i,!0)}function zm(...i){return rh._create("startAfter",i,!1)}class ih extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(a=t,new Za((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Wm(...i){return ih._create("endBefore",i,!1)}function Km(...i){return ih._create("endAt",i,!0)}function ig(i,e,t,s){if(t[0]=(0,ae.m9)(t[0]),t[0]instanceof eh)return function(a,c,p,D,N){if(!D)throw new Rt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const B=[];for(const J of g(a))if(J.field.isKeyField())B.push(Ra(c,D.key));else{const Ee=D.data.field(J.field);if(ku(Ee))throw new Rt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+J.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ee){const Ze=J.field.canonicalString();throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ze}' (used as the orderBy) does not exist.`)}B.push(Ee)}return new ns(B,N)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const a=Rl(i.firestore);return function(c,p,D,N,B,J){const Ee=c.explicitOrderBy;if(B.length>Ee.length)throw new Rt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${N}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ze=[];for(let pt=0;pt<B.length;pt++){const $t=B[pt];if(Ee[pt].field.isKeyField()){if("string"!=typeof $t)throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${N}(), but got a ${typeof $t}`);if(!h(c)&&-1!==$t.indexOf("/"))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${N}() must be a plain document ID, but '${$t}' contains a slash.`);const dn=c.path.child(Sn.fromString($t));if(!Zt.isDocumentKey(dn))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${N}() must result in a valid document path, but '${dn}' is not because it contains an odd number of segments.`);const gn=new Zt(dn);Ze.push(Ra(p,gn))}else{const dn=_f(D,N,$t);Ze.push(dn)}}return new ns(Ze,J)}(i._query,i.firestore._databaseId,a,e,t,s)}}function Zm(i,e,t){if("string"==typeof(t=(0,ae.m9)(t))){if(""===t)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Sn.fromString(t));if(!Zt.isDocumentKey(s))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ra(i,new Zt(s))}if(t instanceof Ai)return Ra(i,t._key);throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function qm(i,e){if(!Array.isArray(i)||0===i.length)throw new Rt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ym(i,e){if(e.isInequality()){const s=v(i),a=e.field;if(null!==s&&!s.isEqual(a))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const c=Ac(i);null!==c&&Qm(0,a,c)}const t=function(s,a){for(const c of s)for(const p of c.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Rt(tt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qm(i,e,t){if(!t.isEqual(e))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sg{convertValue(e,t="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw en()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wa(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new yf(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Fu(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Sn.fromString(e);pn(Gf(s));const a=new Yo(s.get(1),s.get(3)),c=new Zt(s.popFirst(5));return a.isEqual(t)||Ir(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Cf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class zv extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ai(this.firestore,null,t)}}class wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends eh{constructor(e,t,s,a,c,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class sh extends Ic{data(e={}){return super.data(e)}}class Dc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new wc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Rt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new sh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new wc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const D=new sh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new wc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let N=-1,B=-1;return 0!==p.type&&(N=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),B=c.indexOf(p.doc.key)),{type:Kv(p.type),doc:D,oldIndex:N,newIndex:B}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en()}}function Xm(i,e){return i instanceof Ic&&e instanceof Ic?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Dc&&e instanceof Dc&&i._firestore===e._firestore&&qd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ey(i){i=xr(i,Ai);const e=xr(i.firestore,Si);return yc(zi(e),i._key).then(t=>ly(e,i,t))}class Ju extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ai(this.firestore,null,t)}}function ty(i){i=xr(i,Ai);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return function Yc(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return(s=(0,d.Z)(function*(a,c,p){try{const D=yield function(N,B){const J=Kt(N);return J.persistence.runTransaction("read document","readonly",Ee=>J.localDocuments.getDocument(Ee,B))}(a,c);D.isFoundDocument()?p.resolve(D):D.isNoDocument()?p.resolve(null):p.reject(new Rt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const N=cc(D,`Failed to get document '${c} from cache`);p.reject(N)}}),function(a,c,p){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._key).then(a=>new Ic(e,s,i._key,a,new wc(null!==a&&a.hasLocalMutations,!0),i.converter))}function ny(i){i=xr(i,Ai);const e=xr(i.firestore,Si);return yc(zi(e),i._key,{source:"server"}).then(t=>ly(e,i,t))}function ry(i){i=xr(i,Rs);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return wf(i._query),Hp(t,i._query).then(a=>new Dc(e,s,i,a))}function iy(i){i=xr(i,Rs);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return function gm(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return(s=(0,d.Z)(function*(a,c,p){try{const D=yield Rd(a,c,!0),N=new um(c,D.ir),B=N.sc(D.documents),J=N.applyChanges(B,!1);p.resolve(J.snapshot)}catch(D){const N=cc(D,`Failed to execute query '${c} against cache`);p.reject(N)}}),function(a,c,p){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._query).then(a=>new Dc(e,s,i,a))}function sy(i){i=xr(i,Rs);const e=xr(i.firestore,Si),t=zi(e),s=new Ju(e);return Hp(t,i._query,{source:"server"}).then(a=>new Dc(e,s,i,a))}function oy(i,e,t){i=xr(i,Ai);const s=xr(i.firestore,Si),a=Cf(i.converter,e,t);return nu(s,[Qd(Rl(s),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,Ti.none())])}function ay(i,e,t,...s){i=xr(i,Ai);const a=xr(i.firestore,Si),c=Rl(a);let p;return p="string"==typeof(e=(0,ae.m9)(e))||e instanceof Ml?vf(c,"updateDoc",i._key,e,t,s):Vm(c,"updateDoc",i._key,e),nu(a,[p.toMutation(i._key,Ti.exists(!0))])}function uy(i){return nu(xr(i.firestore,Si),[new gl(i._key,Ti.none())])}function Cc(i,e){const t=xr(i.firestore,Si),s=qp(i),a=Cf(i.converter,e);return nu(t,[Qd(Rl(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,Ti.exists(!1))]).then(()=>s)}function Zv(i,...e){var t,s,a;i=(0,ae.m9)(i);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||mf(e[p])||(c=e[p],p++);const D={includeMetadataChanges:c.includeMetadataChanges};if(mf(e[p])){const Ee=e[p];e[p]=null===(t=Ee.next)||void 0===t?void 0:t.bind(Ee),e[p+1]=null===(s=Ee.error)||void 0===s?void 0:s.bind(Ee),e[p+2]=null===(a=Ee.complete)||void 0===a?void 0:a.bind(Ee)}let N,B,J;if(i instanceof Ai)B=xr(i.firestore,Si),J=Bu(i._key.path),N={next:Ee=>{e[p]&&e[p](ly(B,i,Ee))},error:e[p+1],complete:e[p+2]};else{const Ee=xr(i,Rs);B=xr(Ee.firestore,Si),J=Ee._query;const Ze=new Ju(B);N={next:pt=>{e[p]&&e[p](new Dc(B,Ze,Ee,pt))},error:e[p+1],complete:e[p+2]},wf(i._query)}return function(Ee,Ze,pt,$t){const dn=new lf($t),gn=new No(Ze,dn,pt);return Ee.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return nm(yield eu(Ee),gn)})),()=>{dn.Dc(),Ee.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return Yh(yield eu(Ee),gn)}))}}(zi(B),J,D,N)}function qv(i,e){return function mm(i,e){const t=new lf(e);return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return s=yield eu(i),a=t,Kt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return s=yield eu(i),a=t,void Kt(s).ku.delete(a);var s,a}))}}(zi(i=xr(i,Si)),mf(e)?e:{next:e})}function nu(i,e){return function(t,s){const a=new ri;return t.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function Tv(i,e,t){return Fa.apply(this,arguments)}(yield Al(t),s,a)})),a.promise}(zi(i),e)}function ly(i,e,t){const s=t.docs.get(e._key),a=new Ju(i);return new Ic(i,a,e._key,s,new wc(t.hasPendingWrites,t.fromCache),e.converter)}const _0={maxAttempts:5};class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rl(e)}set(e,t,s){this._verifyNotCommitted();const a=Xu(e,this._firestore),c=Cf(a.converter,t,s),p=Qd(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Ti.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=Xu(e,this._firestore);let p;return p="string"==typeof(t=(0,ae.m9)(t))||t instanceof Ml?vf(this._dataReader,"WriteBatch.update",c._key,t,s,a):Vm(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,Ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xu(e,this._firestore);return this._mutations=this._mutations.concat(new gl(t._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xu(i,e){if((i=(0,ae.m9)(i)).firestore!==e)throw new Rt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rl(e)}get(e){const t=Xu(e,this._firestore),s=new zv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return en();const c=a[0];if(c.isFoundDocument())return new eh(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new eh(this._firestore,s,t._key,null,t.converter);throw en()})}set(e,t,s){const a=Xu(e,this._firestore),c=Cf(a.converter,t,s),p=Qd(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const c=Xu(e,this._firestore);let p;return p="string"==typeof(t=(0,ae.m9)(t))||t instanceof Ml?vf(this._dataReader,"Transaction.update",c._key,t,s,a):Vm(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=Xu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xu(e,this._firestore),s=new Ju(this._firestore);return super.get(e).then(a=>new Ic(this._firestore,s,t._key,a._document,new wc(!1,!1),t.converter))}}function fy(i,e,t){i=xr(i,Si);const s=Object.assign(Object.assign({},_0),t);return function(a){if(a.maxAttempts<1)throw new Rt(tt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,c,p){const D=new ri;return a.asyncQueue.enqueueAndForget((0,d.Z)(function*(){const N=yield function mc(i){return Du(i).then(e=>e.datastore)}(a);new a0(a.asyncQueue,N,p,c,D).run()})),D.promise}(zi(i),a=>e(new Qv(i,a)),s)}function py(){return new bu("deleteField")}function gy(){return new eg("serverTimestamp")}function my(...i){return new Fm("arrayUnion",i)}function Jv(...i){return new Hv("arrayRemove",i)}function Xv(i){return new Lm("increment",i)}!function(i,e=!0){Sr=F.SDK_VERSION,(0,F._registerComponent)(new V.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new Si(new tl(t.getProvider("auth-internal")),new Nl(t.getProvider("app-check-internal")),function(D,N){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Rt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(D.options.projectId,N)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(wr,"3.13.0",i),(0,F.registerVersion)(wr,"3.13.0","esm2017")}()},2090:(Bt,Fe,R)=>{R.d(Fe,{$s:()=>q,BH:()=>ot,G6:()=>Je,L:()=>Pe,LL:()=>zt,Pz:()=>st,Sg:()=>Et,UG:()=>Re,US:()=>we,ZB:()=>me,ZR:()=>At,aH:()=>ge,b$:()=>jt,eu:()=>Xe,hl:()=>Ge,jU:()=>gt,m9:()=>De,ne:()=>pe,pd:()=>Zn,r3:()=>jn,ru:()=>ft,tV:()=>re,uI:()=>be,vZ:()=>bn,w1:()=>Vn,xO:()=>Pr,xb:()=>_r,z$:()=>Ve,zI:()=>yt,zd:()=>Un});const ce=function(ee){const ie=[];let Z=0;for(let z=0;z<ee.length;z++){let G=ee.charCodeAt(z);G<128?ie[Z++]=G:G<2048?(ie[Z++]=G>>6|192,ie[Z++]=63&G|128):55296==(64512&G)&&z+1<ee.length&&56320==(64512&ee.charCodeAt(z+1))?(G=65536+((1023&G)<<10)+(1023&ee.charCodeAt(++z)),ie[Z++]=G>>18|240,ie[Z++]=G>>12&63|128,ie[Z++]=G>>6&63|128,ie[Z++]=63&G|128):(ie[Z++]=G>>12|224,ie[Z++]=G>>6&63|128,ie[Z++]=63&G|128)}return ie},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,ie){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let G=0;G<ee.length;G+=3){const Te=ee[G],ht=G+1<ee.length,Ft=ht?ee[G+1]:0,sn=G+2<ee.length,oe=sn?ee[G+2]:0;let Ne=(15&Ft)<<2|oe>>6,Ke=63&oe;sn||(Ke=64,ht||(Ne=64)),z.push(Z[Te>>2],Z[(3&Te)<<4|Ft>>4],Z[Ne],Z[Ke])}return z.join("")},encodeString(ee,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(ee):this.encodeByteArray(ce(ee),ie)},decodeString(ee,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(ee):function(ee){const ie=[];let Z=0,z=0;for(;Z<ee.length;){const G=ee[Z++];if(G<128)ie[z++]=String.fromCharCode(G);else if(G>191&&G<224){const Te=ee[Z++];ie[z++]=String.fromCharCode((31&G)<<6|63&Te)}else if(G>239&&G<365){const sn=((7&G)<<18|(63&ee[Z++])<<12|(63&ee[Z++])<<6|63&ee[Z++])-65536;ie[z++]=String.fromCharCode(55296+(sn>>10)),ie[z++]=String.fromCharCode(56320+(1023&sn))}else{const Te=ee[Z++],ht=ee[Z++];ie[z++]=String.fromCharCode((15&G)<<12|(63&Te)<<6|63&ht)}}return ie.join("")}(this.decodeStringToByteArray(ee,ie))},decodeStringToByteArray(ee,ie){this.init_();const Z=ie?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let G=0;G<ee.length;){const Te=Z[ee.charAt(G++)],Ft=G<ee.length?Z[ee.charAt(G)]:0;++G;const oe=G<ee.length?Z[ee.charAt(G)]:64;++G;const ne=G<ee.length?Z[ee.charAt(G)]:64;if(++G,null==Te||null==Ft||null==oe||null==ne)throw new Ce;z.push(Te<<2|Ft>>4),64!==oe&&(z.push(Ft<<4&240|oe>>2),64!==ne&&z.push(oe<<6&192|ne))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(ee){return function(ee){const ie=ce(ee);return we.encodeByteArray(ie,!0)}(ee).replace(/\./g,"")},re=function(ee){try{return we.decodeString(ee,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function me(ee,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return ie}for(const Z in ie)!ie.hasOwnProperty(Z)||!qe(Z)||(ee[Z]=me(ee[Z],ie[Z]));return ee}function qe(ee){return"__proto__"!==ee}const Me=()=>{try{return function ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ee=process.env.__FIREBASE_DEFAULTS__;return ee?JSON.parse(ee):void 0})()||(()=>{if(typeof document>"u")return;let ee;try{ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ie=ee&&re(ee[1]);return ie&&JSON.parse(ie)})()}catch(ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ee}`)}},ge=()=>{var ee;return null===(ee=Me())||void 0===ee?void 0:ee.config},st=ee=>{var ie;return null===(ie=Me())||void 0===ie?void 0:ie[`_${ee}`]};class ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,Z)=>{this.resolve=ie,this.reject=Z})}wrapCallback(ie){return(Z,z)=>{Z?this.reject(Z):this.resolve(z),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(Z):ie(Z,z))}}}function Et(ee,ie){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=ie||"demo-project",G=ee.iat||0,Te=ee.sub||ee.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:G,exp:G+3600,auth_time:G,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(ht)),""].join(".")}function Ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Re(){var ee;const ie=null===(ee=Me())||void 0===ee?void 0:ee.forceEnvironment;if("node"===ie)return!0;if("browser"===ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function gt(){return"object"==typeof self&&self.self===self}function ft(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Vn(){const ee=Ve();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Je(){return!Re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function Xe(){return new Promise((ee,ie)=>{try{let Z=!0;const z="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(z);G.onsuccess=()=>{G.result.close(),Z||self.indexedDB.deleteDatabase(z),ee(!0)},G.onupgradeneeded=()=>{Z=!1},G.onerror=()=>{var Te;ie((null===(Te=G.error)||void 0===Te?void 0:Te.message)||"")}}catch(Z){ie(Z)}})}function yt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class At extends Error{constructor(ie,Z,z){super(Z),this.code=ie,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,At.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(ie,Z,z){this.service=ie,this.serviceName=Z,this.errors=z}create(ie,...Z){const z=Z[0]||{},G=`${this.service}/${ie}`,Te=this.errors[ie],ht=Te?function Pt(ee,ie){return ee.replace(nn,(Z,z)=>{const G=ie[z];return null!=G?String(G):`<${z}?>`})}(Te,z):"Error";return new At(G,`${this.serviceName}: ${ht} (${G}).`,z)}}const nn=/\{\$([^}]+)}/g;function jn(ee,ie){return Object.prototype.hasOwnProperty.call(ee,ie)}function _r(ee){for(const ie in ee)if(Object.prototype.hasOwnProperty.call(ee,ie))return!1;return!0}function bn(ee,ie){if(ee===ie)return!0;const Z=Object.keys(ee),z=Object.keys(ie);for(const G of Z){if(!z.includes(G))return!1;const Te=ee[G],ht=ie[G];if($n(Te)&&$n(ht)){if(!bn(Te,ht))return!1}else if(Te!==ht)return!1}for(const G of z)if(!Z.includes(G))return!1;return!0}function $n(ee){return null!==ee&&"object"==typeof ee}function Pr(ee){const ie=[];for(const[Z,z]of Object.entries(ee))Array.isArray(z)?z.forEach(G=>{ie.push(encodeURIComponent(Z)+"="+encodeURIComponent(G))}):ie.push(encodeURIComponent(Z)+"="+encodeURIComponent(z));return ie.length?"&"+ie.join("&"):""}function Un(ee){const ie={};return ee.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[G,Te]=z.split("=");ie[decodeURIComponent(G)]=decodeURIComponent(Te)}}),ie}function Zn(ee){const ie=ee.indexOf("?");if(!ie)return"";const Z=ee.indexOf("#",ie);return ee.substring(ie,Z>0?Z:void 0)}function pe(ee,ie){const Z=new fe(ee,ie);return Z.subscribe.bind(Z)}class fe{constructor(ie,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{ie(this)}).catch(z=>{this.error(z)})}next(ie){this.forEachObserver(Z=>{Z.next(ie)})}error(ie){this.forEachObserver(Z=>{Z.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,Z,z){let G;if(void 0===ie&&void 0===Z&&void 0===z)throw new Error("Missing Observer.");G=function ut(ee,ie){if("object"!=typeof ee||null===ee)return!1;for(const Z of ie)if(Z in ee&&"function"==typeof ee[Z])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:Z,complete:z},void 0===G.next&&(G.next=tn),void 0===G.error&&(G.error=tn),void 0===G.complete&&(G.complete=tn);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),Te}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,ie)}sendOne(ie,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{Z(this.observers[ie])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function q(ee,ie=1e3,Z=2){const z=ie*Math.pow(Z,ee),G=Math.round(.5*z*(Math.random()-.5)*2);return Math.min(144e5,z+G)}function De(ee){return ee&&ee._delegate?ee._delegate:ee}},7915:(Bt,Fe,R)=>{R.d(Fe,{U:()=>Et});var d=R(4650),F=R(4985),V=R(8179),ce=R(4006),ae=R(6895),we=R(2121);function Ce(Ve,be){if(1&Ve&&(d.TgZ(0,"option",14),d._uU(1),d.qZA()),2&Ve){const Re=be.$implicit;d.Q6J("ngValue",Re),d.xp6(1),d.hij(" ",Re," ")}}const te=function(Ve){return{"is-invalid":Ve}};function Pe(Ve,be){if(1&Ve&&(d.TgZ(0,"select",11)(1,"option",12),d._uU(2,"Seleccione una opcion"),d.qZA(),d.YNc(3,Ce,2,2,"option",13),d.qZA()),2&Ve){const Re=d.oxw().$implicit,gt=d.oxw(2);d.Q6J("id",Re.label)("name",Re.label)("ngClass",d.VKq(6,te,(gt.f[Re.label].touched||gt.submitted)&&gt.f[Re.label].errors))("formControlName",Re.label),d.xp6(1),d.Q6J("ngValue",null),d.xp6(2),d.Q6J("ngForOf",Re.value)}}function re(Ve,be){if(1&Ve&&d._UZ(0,"input",15),2&Ve){const Re=d.oxw().$implicit,gt=d.oxw(2);d.Tol("form-control"+Re.classlist),d.Q6J("formControlName",Re.label)("id",Re.label)("name",Re.label)("type",Re.type)("placeholder",Re.placeholder)("value",Re.valueCallback?Re.getValue():Re.value)("ngClass",d.VKq(10,te,(gt.f[Re.label].touched||gt.submitted)&&gt.f[Re.label].errors))("readonly",gt.mode||Re.readonly)}}function ue(Ve,be){1&Ve&&(d.TgZ(0,"div"),d._uU(1,"El Email es invalido"),d.qZA())}function me(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit;d.xp6(1),d.hij(" ",Re.placeholder," es requerido ")}}function qe(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit;d.xp6(1),d.hij(" ",Re.placeholder," debe estar seleccionado ")}}function ze(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit;d.xp6(1),d.hij(" ",Re.placeholder," no tiene el patron requerido ")}}function We(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit,gt=d.oxw(2);d.xp6(1),d.AsE(" ",Re.placeholder," debe tener almenos ",gt.f[Re.label].errors.minlength.requiredLength," caracteres ")}}function wt(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit,gt=d.oxw(2);d.xp6(1),d.AsE(" ",Re.placeholder," debe tener menos de ",gt.f[Re.label].errors.maxlength.requiredLength," caracteres ")}}function Be(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit,gt=d.oxw(2);d.xp6(1),d.AsE(" ",Re.placeholder," debe tener menos de ",gt.f[Re.label].errors.maxlength.requiredLength," caracteres ")}}function Me(Ve,be){if(1&Ve&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&Ve){const Re=d.oxw(2).$implicit,gt=d.oxw(2);d.xp6(1),d.AsE(" ",Re.placeholder," ",gt.f[Re.label].errors.custom,"")}}function Ct(Ve,be){if(1&Ve&&(d.TgZ(0,"div",16),d.YNc(1,ue,2,0,"div",17),d.YNc(2,me,2,1,"div",17),d.YNc(3,qe,2,1,"div",17),d.YNc(4,ze,2,1,"div",17),d.YNc(5,We,2,2,"div",17),d.YNc(6,wt,2,2,"div",17),d.YNc(7,Be,2,2,"div",17),d.YNc(8,Me,2,2,"div",17),d.qZA()),2&Ve){const Re=d.oxw().$implicit,gt=d.oxw(2);d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.email),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.required),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.requiredTrue),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.pattern),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.minlength),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.maxlength),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.maxlength),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors.custom)}}function mt(Ve,be){1&Ve&&d._UZ(0,"div",18)}function ge(Ve,be){if(1&Ve&&(d.TgZ(0,"div",5),d.YNc(1,Pe,4,8,"select",6),d.YNc(2,re,1,12,"input",7),d.TgZ(3,"label",8),d._uU(4),d.qZA(),d.YNc(5,Ct,9,8,"div",9),d.YNc(6,mt,1,0,"div",10),d.qZA()),2&Ve){const Re=be.$implicit,gt=d.oxw(2);d.xp6(1),d.Q6J("ngIf","select"==Re.type),d.xp6(1),d.Q6J("ngIf","select"!=Re.type),d.xp6(1),d.Q6J("for",Re.label),d.xp6(1),d.hij("",Re.placeholder," "),d.xp6(1),d.Q6J("ngIf",gt.f[Re.label].errors),d.xp6(1),d.Q6J("ngIf","radio"==Re.type)}}function st(Ve,be){if(1&Ve&&(d.TgZ(0,"div",3),d.YNc(1,ge,7,6,"div",4),d.qZA()),2&Ve){const Re=be.$implicit;d.xp6(1),d.Q6J("ngForOf",Re)}}function ot(Ve,be){if(1&Ve){const Re=d.EpF();d.TgZ(0,"div",19)(1,"app-warn-modal",20),d.NdJ("continue",function(ft){d.CHM(Re);const jt=d.oxw();return d.KtG(jt.onSubmit(ft))})("modalMessage",function(){d.CHM(Re);const ft=d.oxw();return d.KtG(ft.modalMessage)}),d.qZA(),d.TgZ(2,"button",21),d.NdJ("click",function(){d.CHM(Re);const ft=d.oxw();return d.KtG(ft.onReset())}),d._uU(3," Resetear "),d.qZA()()}if(2&Ve){const Re=d.oxw();d.xp6(1),d.Q6J("btnMessage",Re.btnMes)}}let Et=(()=>{class Ve{constructor(Re,gt){this.cdref=Re,this.fb=gt,this.formModel=new d.vpe,this.reject=new d.vpe,this.mode=!1,this.showBtns=!0,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new F.O("Nombre Completo","fullname","text"),new F.O("Nombre de Usuario","username","text")],[new F.O("Correo Electronico","email","text")],[new F.O("Password","password","password"),new F.O("Confirmar Password","Confirm Password","password")],[new F.O("Aceptar los Terminos","Accept Terms","radio",[],"form-check-input",!1)]],this.continue=!1,this.submitted=!1,this.firstCall=!0}ngOnInit(){var Re={};Re=this.formObj.flat().reduce((gt,ft)=>{if(this.placeHolder){var jt=this.placeHolder[ft.getLabel()];jt instanceof V.EK&&(jt=this.formatDateString(jt.toDate().toLocaleDateString())),ft.control?.patchValue(jt)}return this.mode&&ft.control?.clearValidators(),gt[ft.label]=ft.control,gt},Re),this._form=this.fb.group(Re)}get f(){return this._form.controls}onContinue(Re){this.continue=Re}initPlaceHolder(){this.placeHolder&&this.formObj.forEach(Re=>Re.forEach(gt=>{if(this.placeHolder){var ft=this.placeHolder[gt.getLabel()];ft instanceof V.EK&&(ft=this.formatDateString(ft.toDate().toLocaleDateString())),this.f[gt.getLabel()].patchValue(ft)}}))}ngOnChanges(){this.firstCall||this.initPlaceHolder(),this.firstCall=!1}formatDateString(Re){return Re.split("/").reverse().join("/").replace(/\//g,"-")}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(Re){this.submitted=!0,!this._form.invalid&&this.formModel.emit(this._form.getRawValue())}onReset(){this._form.reset(),this.continue=!1,this.submitted=!1}}return Ve.\u0275fac=function(Re){return new(Re||Ve)(d.Y36(d.sBO),d.Y36(ce.j3))},Ve.\u0275cmp=d.Xpm({type:Ve,selectors:[["app-form"]],inputs:{placeHolder:"placeHolder",mode:"mode",showBtns:"showBtns",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel",reject:"reject"},features:[d.TTD],decls:3,vars:3,consts:[["name","form",3,"formGroup","ngSubmit"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["class","form-select",3,"id","name","ngClass","formControlName",4,"ngIf"],["oninput","this.value = this.value.toLowerCase()","min","1","step","1",3,"formControlName","class","id","name","type","placeholder","value","ngClass","readonly",4,"ngIf"],[1,"",3,"for"],["class","invalid-feedback",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"form-select",3,"id","name","ngClass","formControlName"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["oninput","this.value = this.value.toLowerCase()","min","1","step","1",3,"formControlName","id","name","type","placeholder","value","ngClass","readonly"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["id","1","name","btn1","type","submit",3,"btnMessage","continue","modalMessage"],["type","button",1,"ms-2","btn","btn-outline-primary","rounded-pill",3,"click"]],template:function(Re,gt){1&Re&&(d.TgZ(0,"form",0),d.NdJ("ngSubmit",function(){return gt.onContinue(!0)}),d.YNc(1,st,2,1,"div",1),d.YNc(2,ot,4,1,"div",2),d.qZA()),2&Re&&(d.Q6J("formGroup",gt._form),d.xp6(1),d.Q6J("ngForOf",gt.formObj),d.xp6(1),d.Q6J("ngIf",!gt.mode&&gt.showBtns))},dependencies:[ae.mk,ae.sg,ae.O5,ce._Y,ce.YN,ce.Kr,ce.Fj,ce.EJ,ce.JJ,ce.JL,ce.sg,ce.u,we.u]}),Ve})()},2121:(Bt,Fe,R)=>{R.d(Fe,{u:()=>ce});var d=R(4650),F=R(6895);const V=function(){return["btn-outline-success","rounded-pill"]};let ce=(()=>{class ae{constructor(){this.btnMessage="Continuar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.btnType=!1,this.continue=new d.vpe}ngOnInit(){}modalContinue(Ce){this.continue.emit(Ce)}}return ae.\u0275fac=function(Ce){return new(Ce||ae)},ae.\u0275cmp=d.Xpm({type:ae,selectors:[["app-warn-modal"]],inputs:{btnMessage:"btnMessage",modalMessage:"modalMessage",classlist:"classlist",btnType:"btnType"},outputs:{continue:"continue"},decls:17,vars:4,consts:[[1,"container-fluid","my-3","mx-auto"],["data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn",3,"ngClass"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","rounded-pill",3,"click"],["type","submit","data-bs-dismiss","modal",1,"ms-5","pb-2","btn","btn-success","rounded-pill",3,"click"]],template:function(Ce,te){1&Ce&&(d.TgZ(0,"div",0)(1,"button",1),d._uU(2),d.qZA(),d.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),d._uU(8,"PRECAUCION"),d.qZA(),d.TgZ(9,"button",7),d.NdJ("click",function(){return te.modalContinue(!1)}),d.qZA()(),d.TgZ(10,"div",8),d._uU(11),d.qZA(),d.TgZ(12,"div",9)(13,"button",10),d.NdJ("click",function(){return te.modalContinue(!1)}),d._uU(14,"Abortar"),d.qZA(),d.TgZ(15,"button",11),d.NdJ("click",function(){return te.modalContinue(!0)}),d._uU(16,"Continuar"),d.qZA()()()()()()),2&Ce&&(d.xp6(1),d.Q6J("ngClass",te.classlist?te.classlist:d.DdM(3,V)),d.xp6(1),d.hij(" ",te.btnMessage," "),d.xp6(9),d.hij(" ",te.modalMessage," "))},dependencies:[F.mk]}),ae})()},4985:(Bt,Fe,R)=>{R.d(Fe,{O:()=>V});var d=R(4006),F=R(8505);class V{constructor(ae,we,Ce,te=[d.kI.required],Pe,re,ue,me,qe=!1){this.value=Pe,this.label=we,this.type=Ce,this.placeholder=ae,this.classlist=re||" ",this.ref=me||void 0,this.valueCallback=ue,this.readonly=qe,te.push(d.kI.required),this.control=new d.NI({value:null,disabled:qe},te),this.respondTo$=this.control.valueChanges.pipe((0,F.b)({next:ue,error:ze=>console.log(ze),complete:()=>console.log("Completed")}))}setReadOnly(ae){return this.readonly=ae,this}setValue(ae){return this.value=ae,this}getValue(){this.value=this.ref?this.valueCallback(...this.ref.map(ae=>ae.value)):this.valueCallback()}getLabel(){return this.label}}},3651:(Bt,Fe,R)=>{R.d(Fe,{e:()=>wt});var d=R(5861),F=R(1389),Ce=(R(2090),R(6881),R(1877),R(4859),R(3900)),te=R(9646),Pe=R(5698),re=R(8505),ue=R(4004),me=R(4650),qe=R(1205),ze=R(33),We=R(2827);let wt=(()=>{class Be{constructor(Ct,mt,ge,st){this.afAuth=Ct,this.afs=mt,this.router=ge,this.ngZone=st,this.username="Anonimo",this.user$=this.afAuth.authState.pipe((0,Ce.w)(ot=>ot?this.afs.doc(`users/${ot.uid}`).valueChanges():(0,te.of)(null)),(0,Pe.q)(1))}isLoggedIn(){var Ct=!1;return this.user$.pipe((0,Pe.q)(1),(0,re.b)(mt=>this.username=mt?.displayName),(0,ue.U)(mt=>!!mt),(0,re.b)(mt=>{mt&&(Ct=!0)})),Ct}googleSignin(){var Ct=this;return(0,d.Z)(function*(){const mt=yield Ct.afAuth.signInWithPopup(new F.V);return mt.user&&Ct.router.navigate(["/home"]),console.log("keeps executing"),Ct.updateUserData(mt.user)})()}GoogleAuth(){return this.AuthLogin(new F.V)}AuthLogin(Ct){var mt=this;return(0,d.Z)(function*(){return mt.afAuth.signInWithPopup(Ct).then(ge=>{console.log("You have been successfully logged in!")}).catch(ge=>{console.log(ge)})})()}updateUserData(Ct){return this.afs.doc(`users/${Ct.uid}`).set({uid:Ct.uid,email:Ct.email,displayName:Ct.displayName},{merge:!0})}signOut(){var Ct=this;return(0,d.Z)(function*(){Ct.username="Anonimo",yield Ct.afAuth.signOut(),Ct.router.navigate(["/login"])})()}}return Be.\u0275fac=function(Ct){return new(Ct||Be)(me.LFG(qe.zQ),me.LFG(ze.ST),me.LFG(We.F0),me.LFG(me.R0b))},Be.\u0275prov=me.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be})()},3416:(Bt,Fe,R)=>{R.d(Fe,{L:()=>re});var d=R(8505),F=R(7886),V=R(1402),ce=R(4004),ae=R(5577),we=R(8179),Ce=R(4650),te=R(33),Pe=R(529);let re=(()=>{class ue{constructor(qe,ze){this.db=qe,this.ht=ze,this.dbPath="/finishedOrders",this.productsRef=qe.collection(this.dbPath)}getById(qe){return this.productsRef.doc(qe).get()}getAll(){return this.productsRef}create(qe){return this.productsRef.add({...qe})}downloadFile(qe,ze=`Ordenes Terminadas_${(new Date).toLocaleString("es-MX")}`){console.log(qe);let We=this.ConvertToCSV(qe,Object.keys(qe[0]));console.log(We);let wt=new Blob(["\ufeff"+We],{type:"text/csv;charset=utf-8;"}),Be=document.createElement("a"),Me=URL.createObjectURL(wt);-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&Be.setAttribute("target","_blank"),Be.setAttribute("href",Me),Be.setAttribute("download",ze+".csv"),Be.style.visibility="hidden",document.body.appendChild(Be),Be.click(),document.body.removeChild(Be)}ConvertToCSV(qe,ze){let We="object"!=typeof qe?JSON.parse(qe):qe,wt="",Be="S.No,";for(let Me in ze)Be+=ze[Me]+",";Be=Be.slice(0,-1),wt+=Be+"\r\n";for(let Me=0;Me<We.length;Me++){let Ct=Me+1+"";for(let mt in ze)Ct+=","+We[Me][ze[mt]];wt+=Ct+"\r\n"}return wt}uploadAll(){return this.ht.get("../../../assets/csvjson.json").pipe((0,d.b)(console.log),(0,F.u)(),(0,V.j)(50),(0,ce.U)(qe=>{var ze=this.db.firestore.batch();return qe.map(We=>{const{id:wt,...Be}=We;return ze.set(this.db.collection(this.dbPath).doc(wt).ref,Be),ze.set(this.db.collection("/FPreport").doc(wt).ref,{name:Be.name,available:0,commited:0,wating:0,timestamp:we.EK.fromDate(new Date)})}),ze.commit()}),(0,d.b)({complete:()=>alert("completo"),error:()=>alert("error")}))}deleteAll(){return this.productsRef.get().pipe((0,ce.U)(qe=>qe.docs),(0,d.b)(qe=>this.downloadFile(qe.map(ze=>ze.data()))),(0,F.u)(),(0,V.j)(500),(0,ae.z)(qe=>{var ze=this.db.firestore.batch();return qe.map(We=>ze.delete(We.ref)),ze.commit()}))}}return ue.\u0275fac=function(qe){return new(qe||ue)(Ce.LFG(te.ST),Ce.LFG(Pe.eN))},ue.\u0275prov=Ce.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"}),ue})()},4466:(Bt,Fe,R)=>{R.d(Fe,{m:()=>ce});var d=R(6895),F=R(4006),V=R(4650);let ce=(()=>{class ae{}return ae.\u0275fac=function(Ce){return new(Ce||ae)},ae.\u0275mod=V.oAB({type:ae}),ae.\u0275inj=V.cJS({imports:[d.ez,F.u5,F.UX,F.u5]}),ae})()},5877:(Bt,Fe,R)=>{var d=R(1481),F=R(4650),V=R(2827),ce=R(727),ae=R(8505),we=R(4985),Ce=R(7915),te=R(3416);let Pe=(()=>{class H{constructor(De){this.fo=De,this.a=new ce.w0,this.form=[[new we.O("Numero de Orden de Pedido","name","text"),new we.O("Estado","state","text")],[new we.O("Nombre del Cliente","clientName","select",[],["Oracle","Microsoft","Sony"])],[new we.O("Fecha de Embarque","shipDate","date")],[new we.O("Dias de Produccion","productionDays","number",[this.custom]),new we.O("Pedido de Insumos","orderInput","number").setReadOnly(!0)],[new we.O("Pedido Materia Prima","rmOrderDeadline","date"),new we.O("Limite inicio de Produccion","startProductionDeadline","date")],[new we.O("Notas","notes","text")]]}ngAfterViewInit(){this.child.f.productionDays.valueChanges.pipe((0,ae.b)(ee=>this.child.f.orderInput.patchValue(2*ee))).subscribe()}custom(De){return De.value>30||null==De.value?null:{custom:"debe ser mayor que 30"}}ngOnInit(){}submit(De){console.log(De)}filter(){this.q="Esc"}getSelectedElement(De){console.log(De)}ngOnDestroy(){this.a.unsubscribe()}}return H.\u0275fac=function(De){return new(De||H)(F.Y36(te.L))},H.\u0275cmp=F.Xpm({type:H,selectors:[["app-home"]],viewQuery:function(De,ee){if(1&De&&F.Gf(Ce.U,5),2&De){let ie;F.iGM(ie=F.CRH())&&(ee.child=ie.first)}},decls:1,vars:1,consts:[[3,"formObj"]],template:function(De,ee){1&De&&F._UZ(0,"app-form",0),2&De&&F.Q6J("formObj",ee.form)},dependencies:[Ce.U]}),H})();var re=R(5698),ue=R(4004),me=R(3651);let qe=(()=>{class H{constructor(De,ee){this.auth=De,this.router=ee}canActivate(De,ee){return this.auth.user$.pipe((0,re.q)(1),(0,ue.U)(ie=>!!ie),(0,ae.b)(ie=>{ie||(console.log("access denied"),this.router.navigate(["/login"]))}))}}return H.\u0275fac=function(De){return new(De||H)(F.LFG(me.e),F.LFG(V.F0))},H.\u0275prov=F.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})();const We=[{path:"home",component:Pe},{path:"clients",loadChildren:()=>R.e(737).then(R.bind(R,1737)).then(H=>H.ClientModule),canActivate:[qe]},{path:"materials",loadChildren:()=>Promise.all([R.e(21),R.e(434)]).then(R.bind(R,2434)).then(H=>H.MaterialModule),canActivate:[qe]},{path:"products",loadChildren:()=>Promise.all([R.e(592),R.e(596)]).then(R.bind(R,2596)).then(H=>H.ProductModule),canActivate:[qe]},{path:"orders",loadChildren:()=>Promise.all([R.e(21),R.e(592),R.e(25)]).then(R.bind(R,1025)).then(H=>H.OrdersModule),canActivate:[qe]},{path:"shop",loadChildren:()=>Promise.all([R.e(21),R.e(592),R.e(117)]).then(R.bind(R,9117)).then(H=>H.ShoppingModule),canActivate:[qe]},{path:"history",loadChildren:()=>R.e(72).then(R.bind(R,2072)).then(H=>H.HistoryModule),canActivate:[qe]},{path:"login",component:(()=>{class H{constructor(De){this.authService=De}ngOnInit(){}authenticate(){this.authService.googleSignin()}}return H.\u0275fac=function(De){return new(De||H)(F.Y36(me.e))},H.\u0275cmp=F.Xpm({type:H,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"d-flex","text-center","text-bg-dark","h-100",2,"background-image","url(assets/img/bg.png)"],[1,"d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"my-auto"],["type","button",1,"btn","btn-lg","btn-outline-light","fw-bold","border-white","rounded-pill",3,"click"],[1,"ms-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"]],template:function(De,ee){1&De&&(F.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),F._uU(4," IBM Furniture"),F.qZA(),F.TgZ(5,"button",3),F.NdJ("click",function(){return ee.authenticate()}),F._uU(6," Iniciar Sesion con Google "),F.TgZ(7,"span",4),F.O4$(),F.TgZ(8,"svg",5),F._UZ(9,"path",6),F.qZA()()()()()())}}),H})()},{path:"",redirectTo:"orders",pathMatch:"full"},{path:"404",component:Pe},{path:"**",redirectTo:"/404"}];let wt=(()=>{class H{}return H.\u0275fac=function(De){return new(De||H)},H.\u0275mod=F.oAB({type:H}),H.\u0275inj=F.cJS({imports:[V.Bz.forRoot(We,{useHash:!0}),V.Bz]}),H})();var Be=R(2011),Me=R(33),Ct=R(6895);let mt=(()=>{class H{constructor(De){this.auth=De,this.signOut=()=>this.auth.signOut()}ngOnInit(){}}return H.\u0275fac=function(De){return new(De||H)(F.Y36(me.e))},H.\u0275cmp=F.Xpm({type:H,selectors:[["app-navbar"]],decls:36,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","home",1,"navbar-brand"],["height","30","src","/assets/img/ibmFurniture_logo.png","alt","","srcset","",1,"rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","home",1,"nav-link","active"],["routerLink","products",1,"nav-link"],["routerLink","clients",1,"nav-link"],["routerLink","materials",1,"nav-link"],["routerLink","orders",1,"nav-link"],["routerLink","shop",1,"nav-link"],["routerLink","history",1,"nav-link"],[1,"navbar-nav"],[1,"fs-3","nav-link","me-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"]],template:function(De,ee){1&De&&(F.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),F._UZ(3,"img",3),F._uU(4," IBM Furniture "),F.qZA(),F.TgZ(5,"button",4),F._UZ(6,"span",5),F.qZA(),F.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),F._uU(11,"Inicio"),F.qZA()(),F.TgZ(12,"li",8)(13,"a",10),F._uU(14,"Productos"),F.qZA()(),F.TgZ(15,"li",8)(16,"a",11),F._uU(17,"Clientes"),F.qZA()(),F.TgZ(18,"li",8)(19,"a",12),F._uU(20,"Materiales"),F.qZA()(),F.TgZ(21,"li",8)(22,"a",13),F._uU(23,"Ordenes"),F.qZA()(),F.TgZ(24,"li",8)(25,"a",14),F._uU(26,"Compras"),F.qZA()(),F.TgZ(27,"li",8)(28,"a",15),F._uU(29,"Historial"),F.qZA()()(),F.TgZ(30,"ul",16)(31,"li",8)(32,"a",17),F.NdJ("click",function(){return ee.signOut()}),F.O4$(),F.TgZ(33,"svg",18),F._UZ(34,"path",19)(35,"path",20),F.qZA()()()()()()())},dependencies:[V.yS]}),H})();function ge(H,_e){1&H&&F._UZ(0,"app-navbar")}let st=(()=>{class H{constructor(De){this.auth=De,this.title="IBMFurniture"}}return H.\u0275fac=function(De){return new(De||H)(F.Y36(me.e))},H.\u0275cmp=F.Xpm({type:H,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"vh-100"]],template:function(De,ee){1&De&&(F.YNc(0,ge,1,0,"app-navbar",0),F.ALo(1,"async"),F.TgZ(2,"div",1),F._UZ(3,"router-outlet"),F.qZA()),2&De&&F.Q6J("ngIf",F.lcZ(1,1,ee.auth.user$))},dependencies:[Ct.O5,V.lC,mt,Ct.Ov]}),H})();const ot_firebase={apiKey:"AIzaSyCmya1htVh_wLXOc0zUSpurtnKYROqfSoU",authDomain:"ibmfurniture.firebaseapp.com",projectId:"ibmfurniture",storageBucket:"ibmfurniture.appspot.com",messagingSenderId:"313012116484",appId:"1:313012116484:web:1b535bfdb657c90b742951"};var Et=R(4466),Ve=R(529),be=R(9770),Re=R(2843),gt=R(8421),ft=R(9751),jt=R(5577),Vt=R(1144),Vn=R(576),$e=R(3268);const je=["addListener","removeListener"],Je=["addEventListener","removeEventListener"],Ge=["on","off"];function Xe(H,_e,De,ee){if((0,Vn.m)(De)&&(ee=De,De=void 0),ee)return Xe(H,_e,De).pipe((0,$e.Z)(ee));const[ie,Z]=function zt(H){return(0,Vn.m)(H.addEventListener)&&(0,Vn.m)(H.removeEventListener)}(H)?Je.map(z=>G=>H[z](_e,G,De)):function bt(H){return(0,Vn.m)(H.addListener)&&(0,Vn.m)(H.removeListener)}(H)?je.map(yt(H,_e)):function At(H){return(0,Vn.m)(H.on)&&(0,Vn.m)(H.off)}(H)?Ge.map(yt(H,_e)):[];if(!ie&&(0,Vt.z)(H))return(0,jt.z)(z=>Xe(z,_e,De))((0,gt.Xf)(H));if(!ie)throw new TypeError("Invalid event target");return new ft.y(z=>{const G=(...Te)=>z.next(1<Te.length?Te:Te[0]);return ie(G),()=>Z(G)})}function yt(H,_e){return De=>ee=>H[De](_e,ee)}var Pt=R(9646),nn=R(1350),ln=R(7579),mn=R(5032);const Rn=new ft.y(mn.Z);var qt=R(6451),on=R(9300),Cn=R(3900),jn=R(4033),br=R(4482);const xt={connector:()=>new ln.x};function bn(H,_e=xt){const{connector:De}=_e;return(0,br.e)((ee,ie)=>{const Z=De();(0,gt.Xf)(H(function _r(H){return new ft.y(_e=>H.subscribe(_e))}(Z))).subscribe(ie),ie.add(ee.subscribe(Z))})}var Pr=R(4986),Un=R(5403),rt=R(9718);function pe(H,_e){return _e?De=>(0,nn.z)(_e.pipe((0,re.q)(1),function Zn(){return(0,br.e)((H,_e)=>{H.subscribe((0,Un.x)(_e,mn.Z))})}()),De.pipe(pe(H))):(0,jt.z)((De,ee)=>H(De,ee).pipe((0,re.q)(1),(0,rt.h)(De)))}var fe=R(3532);const hn="Service workers are disabled or not supported by this browser";class Ot{constructor(_e){if(this.serviceWorker=_e,_e){const ee=Xe(_e,"controllerchange").pipe((0,ue.U)(()=>_e.controller)),ie=(0,be.P)(()=>(0,Pt.of)(_e.controller)),Z=(0,nn.z)(ie,ee);this.worker=Z.pipe((0,on.h)(Ft=>!!Ft)),this.registration=this.worker.pipe((0,Cn.w)(()=>_e.getRegistration()));const ht=Xe(_e,"message").pipe((0,ue.U)(Ft=>Ft.data)).pipe((0,on.h)(Ft=>Ft&&Ft.type)).pipe(function ar(H){return H?_e=>bn(H)(_e):_e=>function $n(H,_e){const De=(0,Vn.m)(H)?H:()=>H;return(0,Vn.m)(_e)?bn(_e,{connector:De}):ee=>new jn.c(ee,De)}(new ln.x)(_e)}());ht.connect(),this.events=ht}else this.worker=this.events=this.registration=function Tn(H){return(0,be.P)(()=>(0,Re._)(new Error(H)))}(hn)}postMessage(_e,De){return this.worker.pipe((0,re.q)(1),(0,ae.b)(ee=>{ee.postMessage({action:_e,...De})})).toPromise().then(()=>{})}postMessageWithOperation(_e,De,ee){const ie=this.waitForOperationCompleted(ee),Z=this.postMessage(_e,De);return Promise.all([Z,ie]).then(([,z])=>z)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(_e){let De;return De="string"==typeof _e?ee=>ee.type===_e:ee=>_e.includes(ee.type),this.events.pipe((0,on.h)(De))}nextEventOfType(_e){return this.eventsOfType(_e).pipe((0,re.q)(1))}waitForOperationCompleted(_e){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,on.h)(De=>De.nonce===_e),(0,re.q)(1),(0,ue.U)(De=>{if(void 0!==De.result)return De.result;throw new Error(De.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Nn=(()=>{class H{constructor(De){if(this.sw=De,this.subscriptionChanges=new ln.x,!De.isEnabled)return this.messages=Rn,this.notificationClicks=Rn,void(this.subscription=Rn);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ue.U)(ie=>ie.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ue.U)(ie=>ie.data)),this.pushManager=this.sw.registration.pipe((0,ue.U)(ie=>ie.pushManager));const ee=this.pushManager.pipe((0,Cn.w)(ie=>ie.getSubscription()));this.subscription=(0,qt.T)(ee,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(De){if(!this.sw.isEnabled)return Promise.reject(new Error(hn));const ee={userVisibleOnly:!0};let ie=this.decodeBase64(De.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Z=new Uint8Array(new ArrayBuffer(ie.length));for(let z=0;z<ie.length;z++)Z[z]=ie.charCodeAt(z);return ee.applicationServerKey=Z,this.pushManager.pipe((0,Cn.w)(z=>z.subscribe(ee)),(0,re.q)(1)).toPromise().then(z=>(this.subscriptionChanges.next(z),z))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,re.q)(1),(0,Cn.w)(ee=>{if(null===ee)throw new Error("Not subscribed to push notifications.");return ee.unsubscribe().then(ie=>{if(!ie)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(hn))}decodeBase64(De){return atob(De)}}return H.\u0275fac=function(De){return new(De||H)(F.LFG(Ot))},H.\u0275prov=F.Yz7({token:H,factory:H.\u0275fac}),H})(),fn=(()=>{class H{constructor(De){if(this.sw=De,!De.isEnabled)return this.versionUpdates=Rn,this.available=Rn,this.activated=Rn,void(this.unrecoverable=Rn);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,on.h)(ee=>"VERSION_READY"===ee.type),(0,ue.U)(ee=>({type:"UPDATE_AVAILABLE",current:ee.currentVersion,available:ee.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hn));const De=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:De},De)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hn));const De=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:De},De)}}return H.\u0275fac=function(De){return new(De||H)(F.LFG(Ot))},H.\u0275prov=F.Yz7({token:H,factory:H.\u0275fac}),H})();class er{}const Nt=new F.OlP("NGSW_REGISTER_SCRIPT");function Yt(H,_e,De,ee){return()=>{if(!(0,Ct.NF)(ee)||!("serviceWorker"in navigator)||!1===De.enabled)return;let ie;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof De.registrationStrategy)ie=De.registrationStrategy();else{const[z,...G]=(De.registrationStrategy||"registerWhenStable:30000").split(":");switch(z){case"registerImmediately":ie=(0,Pt.of)(null);break;case"registerWithDelay":ie=Jt(+G[0]||0);break;case"registerWhenStable":ie=G[0]?(0,qt.T)(On(H),Jt(+G[0])):On(H);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${De.registrationStrategy}`)}}H.get(F.R0b).runOutsideAngular(()=>ie.pipe((0,re.q)(1)).subscribe(()=>navigator.serviceWorker.register(_e,{scope:De.scope}).catch(z=>console.error("Service worker registration failed with:",z))))}}function Jt(H){return(0,Pt.of)(null).pipe(function tn(H,_e=Pr.z){const De=function ut(H=0,_e,De=Pr.P){let ee=-1;return null!=_e&&((0,fe.K)(_e)?De=_e:ee=_e),new ft.y(ie=>{let Z=function nt(H){return H instanceof Date&&!isNaN(H)}(H)?+H-De.now():H;Z<0&&(Z=0);let z=0;return De.schedule(function(){ie.closed||(ie.next(z++),0<=ee?this.schedule(void 0,ee):ie.complete())},Z)})}(H,_e);return pe(()=>De)}(H))}function On(H){return H.get(F.z2F).isStable.pipe((0,on.h)(De=>De))}function qn(H,_e){return new Ot((0,Ct.NF)(_e)&&!1!==H.enabled?navigator.serviceWorker:void 0)}let et=(()=>{class H{static register(De,ee={}){return{ngModule:H,providers:[{provide:Nt,useValue:De},{provide:er,useValue:ee},{provide:Ot,useFactory:qn,deps:[er,F.Lbi]},{provide:F.ip1,useFactory:Yt,deps:[F.zs3,Nt,er,F.Lbi],multi:!0}]}}}return H.\u0275fac=function(De){return new(De||H)},H.\u0275mod=F.oAB({type:H}),H.\u0275inj=F.cJS({providers:[Nn,fn]}),H})(),q=(()=>{class H{}return H.\u0275fac=function(De){return new(De||H)},H.\u0275mod=F.oAB({type:H,bootstrap:[st]}),H.\u0275inj=F.cJS({imports:[Ve.JF,d.b2,wt,Be.hO.initializeApp(ot_firebase),Me.yb,Et.m,et.register("./ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),H})();(0,F.G48)(),d.q6().bootstrapModule(q).catch(H=>console.error(H))},1135:(Bt,Fe,R)=>{R.d(Fe,{X:()=>F});var d=R(7579);class F extends d.x{constructor(ce){super(),this._value=ce}get value(){return this.getValue()}_subscribe(ce){const ae=super._subscribe(ce);return!ae.closed&&ce.next(this._value),ae}getValue(){const{hasError:ce,thrownError:ae,_value:we}=this;if(ce)throw ae;return this._throwIfClosed(),we}next(ce){super.next(this._value=ce)}}},9751:(Bt,Fe,R)=>{R.d(Fe,{y:()=>te});var d=R(930),F=R(727),V=R(8822),ce=R(9635),ae=R(2416),we=R(576),Ce=R(2806);let te=(()=>{class me{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const We=new me;return We.source=this,We.operator=ze,We}subscribe(ze,We,wt){const Be=function ue(me){return me&&me instanceof d.Lv||function re(me){return me&&(0,we.m)(me.next)&&(0,we.m)(me.error)&&(0,we.m)(me.complete)}(me)&&(0,F.Nn)(me)}(ze)?ze:new d.Hp(ze,We,wt);return(0,Ce.x)(()=>{const{operator:Me,source:Ct}=this;Be.add(Me?Me.call(Be,Ct):Ct?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(ze){try{return this._subscribe(ze)}catch(We){ze.error(We)}}forEach(ze,We){return new(We=Pe(We))((wt,Be)=>{const Me=new d.Hp({next:Ct=>{try{ze(Ct)}catch(mt){Be(mt),Me.unsubscribe()}},error:Be,complete:wt});this.subscribe(Me)})}_subscribe(ze){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(ze)}[V.L](){return this}pipe(...ze){return(0,ce.U)(ze)(this)}toPromise(ze){return new(ze=Pe(ze))((We,wt)=>{let Be;this.subscribe(Me=>Be=Me,Me=>wt(Me),()=>We(Be))})}}return me.create=qe=>new me(qe),me})();function Pe(me){var qe;return null!==(qe=me??ae.v.Promise)&&void 0!==qe?qe:Promise}},7579:(Bt,Fe,R)=>{R.d(Fe,{x:()=>Ce});var d=R(9751),F=R(727);const ce=(0,R(3888).d)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=R(8737),we=R(2806);let Ce=(()=>{class Pe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const me=new te(this,this);return me.operator=ue,me}_throwIfClosed(){if(this.closed)throw new ce}next(ue){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(ue)}})}error(ue){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:me}=this;for(;me.length;)me.shift().error(ue)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:me,isStopped:qe,observers:ze}=this;return me||qe?F.Lc:(this.currentObservers=null,ze.push(ue),new F.w0(()=>{this.currentObservers=null,(0,ae.P)(ze,ue)}))}_checkFinalizedStatuses(ue){const{hasError:me,thrownError:qe,isStopped:ze}=this;me?ue.error(qe):ze&&ue.complete()}asObservable(){const ue=new d.y;return ue.source=this,ue}}return Pe.create=(re,ue)=>new te(re,ue),Pe})();class te extends Ce{constructor(re,ue){super(),this.destination=re,this.source=ue}next(re){var ue,me;null===(me=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===me||me.call(ue,re)}error(re){var ue,me;null===(me=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===me||me.call(ue,re)}complete(){var re,ue;null===(ue=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===ue||ue.call(re)}_subscribe(re){var ue,me;return null!==(me=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(re))&&void 0!==me?me:F.Lc}}},930:(Bt,Fe,R)=>{R.d(Fe,{Hp:()=>wt,Lv:()=>me});var d=R(576),F=R(727),V=R(2416),ce=R(7849),ae=R(5032);const we=Pe("C",void 0,void 0);function Pe(ge,st,ot){return{kind:ge,value:st,error:ot}}var re=R(3410),ue=R(2806);class me extends F.w0{constructor(st){super(),this.isStopped=!1,st?(this.destination=st,(0,F.Nn)(st)&&st.add(this)):this.destination=mt}static create(st,ot,Et){return new wt(st,ot,Et)}next(st){this.isStopped?Ct(function te(ge){return Pe("N",ge,void 0)}(st),this):this._next(st)}error(st){this.isStopped?Ct(function Ce(ge){return Pe("E",void 0,ge)}(st),this):(this.isStopped=!0,this._error(st))}complete(){this.isStopped?Ct(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(st){this.destination.next(st)}_error(st){try{this.destination.error(st)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function ze(ge,st){return qe.call(ge,st)}class We{constructor(st){this.partialObserver=st}next(st){const{partialObserver:ot}=this;if(ot.next)try{ot.next(st)}catch(Et){Be(Et)}}error(st){const{partialObserver:ot}=this;if(ot.error)try{ot.error(st)}catch(Et){Be(Et)}else Be(st)}complete(){const{partialObserver:st}=this;if(st.complete)try{st.complete()}catch(ot){Be(ot)}}}class wt extends me{constructor(st,ot,Et){let Ve;if(super(),(0,d.m)(st)||!st)Ve={next:st??void 0,error:ot??void 0,complete:Et??void 0};else{let be;this&&V.v.useDeprecatedNextContext?(be=Object.create(st),be.unsubscribe=()=>this.unsubscribe(),Ve={next:st.next&&ze(st.next,be),error:st.error&&ze(st.error,be),complete:st.complete&&ze(st.complete,be)}):Ve=st}this.destination=new We(Ve)}}function Be(ge){V.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(ge):(0,ce.h)(ge)}function Ct(ge,st){const{onStoppedNotification:ot}=V.v;ot&&re.z.setTimeout(()=>ot(ge,st))}const mt={closed:!0,next:ae.Z,error:function Me(ge){throw ge},complete:ae.Z}},727:(Bt,Fe,R)=>{R.d(Fe,{Lc:()=>we,w0:()=>ae,Nn:()=>Ce});var d=R(576);const V=(0,R(3888).d)(Pe=>function(ue){Pe(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((me,qe)=>`${qe+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var ce=R(8737);class ae{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const ze of ue)ze.remove(this);else ue.remove(this);const{initialTeardown:me}=this;if((0,d.m)(me))try{me()}catch(ze){re=ze instanceof V?ze.errors:[ze]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const ze of qe)try{te(ze)}catch(We){re=re??[],We instanceof V?re=[...re,...We.errors]:re.push(We)}}if(re)throw new V(re)}}add(re){var ue;if(re&&re!==this)if(this.closed)te(re);else{if(re instanceof ae){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(re)}}_hasParent(re){const{_parentage:ue}=this;return ue===re||Array.isArray(ue)&&ue.includes(re)}_addParent(re){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(re),ue):ue?[ue,re]:re}_removeParent(re){const{_parentage:ue}=this;ue===re?this._parentage=null:Array.isArray(ue)&&(0,ce.P)(ue,re)}remove(re){const{_finalizers:ue}=this;ue&&(0,ce.P)(ue,re),re instanceof ae&&re._removeParent(this)}}ae.EMPTY=(()=>{const Pe=new ae;return Pe.closed=!0,Pe})();const we=ae.EMPTY;function Ce(Pe){return Pe instanceof ae||Pe&&"closed"in Pe&&(0,d.m)(Pe.remove)&&(0,d.m)(Pe.add)&&(0,d.m)(Pe.unsubscribe)}function te(Pe){(0,d.m)(Pe)?Pe():Pe.unsubscribe()}},2416:(Bt,Fe,R)=>{R.d(Fe,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Bt,Fe,R)=>{R.d(Fe,{c:()=>we});var d=R(9751),F=R(727),V=R(8343),ce=R(5403),ae=R(4482);class we extends d.y{constructor(te,Pe){super(),this.source=te,this.subjectFactory=Pe,this._subject=null,this._refCount=0,this._connection=null,(0,ae.A)(te)&&(this.lift=te.lift)}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:te}=this;this._subject=this._connection=null,te?.unsubscribe()}connect(){let te=this._connection;if(!te){te=this._connection=new F.w0;const Pe=this.getSubject();te.add(this.source.subscribe((0,ce.x)(Pe,void 0,()=>{this._teardown(),Pe.complete()},re=>{this._teardown(),Pe.error(re)},()=>this._teardown()))),te.closed&&(this._connection=null,te=F.w0.EMPTY)}return te}refCount(){return(0,V.x)()(this)}}},1350:(Bt,Fe,R)=>{R.d(Fe,{z:()=>ce});var d=R(7886),F=R(3269),V=R(8996);function ce(...ae){return(0,d.u)()((0,V.D)(ae,(0,F.yG)(ae)))}},9770:(Bt,Fe,R)=>{R.d(Fe,{P:()=>V});var d=R(9751),F=R(8421);function V(ce){return new d.y(ae=>{(0,F.Xf)(ce()).subscribe(ae)})}},515:(Bt,Fe,R)=>{R.d(Fe,{E:()=>F});const F=new(R(9751).y)(ae=>ae.complete())},4128:(Bt,Fe,R)=>{R.d(Fe,{D:()=>te});var d=R(9751),F=R(4742),V=R(8421),ce=R(3269),ae=R(5403),we=R(3268),Ce=R(1810);function te(...Pe){const re=(0,ce.jO)(Pe),{args:ue,keys:me}=(0,F.D)(Pe),qe=new d.y(ze=>{const{length:We}=ue;if(!We)return void ze.complete();const wt=new Array(We);let Be=We,Me=We;for(let Ct=0;Ct<We;Ct++){let mt=!1;(0,V.Xf)(ue[Ct]).subscribe((0,ae.x)(ze,ge=>{mt||(mt=!0,Me--),wt[Ct]=ge},()=>Be--,void 0,()=>{(!Be||!mt)&&(Me||ze.next(me?(0,Ce.n)(me,wt):wt),ze.complete())}))}});return re?qe.pipe((0,we.Z)(re)):qe}},8996:(Bt,Fe,R)=>{R.d(Fe,{D:()=>st});var d=R(8421),F=R(5363),V=R(9468),we=R(9751),te=R(2202),Pe=R(576),re=R(9672);function me(ot,Et){if(!ot)throw new Error("Iterable cannot be null");return new we.y(Ve=>{(0,re.f)(Ve,Et,()=>{const be=ot[Symbol.asyncIterator]();(0,re.f)(Ve,Et,()=>{be.next().then(Re=>{Re.done?Ve.complete():Ve.next(Re.value)})},0,!0)})})}var qe=R(3670),ze=R(8239),We=R(1144),wt=R(6495),Be=R(2206),Me=R(4532),Ct=R(3260);function st(ot,Et){return Et?function ge(ot,Et){if(null!=ot){if((0,qe.c)(ot))return function ce(ot,Et){return(0,d.Xf)(ot).pipe((0,V.R)(Et),(0,F.Q)(Et))}(ot,Et);if((0,We.z)(ot))return function Ce(ot,Et){return new we.y(Ve=>{let be=0;return Et.schedule(function(){be===ot.length?Ve.complete():(Ve.next(ot[be++]),Ve.closed||this.schedule())})})}(ot,Et);if((0,ze.t)(ot))return function ae(ot,Et){return(0,d.Xf)(ot).pipe((0,V.R)(Et),(0,F.Q)(Et))}(ot,Et);if((0,Be.D)(ot))return me(ot,Et);if((0,wt.T)(ot))return function ue(ot,Et){return new we.y(Ve=>{let be;return(0,re.f)(Ve,Et,()=>{be=ot[te.h](),(0,re.f)(Ve,Et,()=>{let Re,gt;try{({value:Re,done:gt}=be.next())}catch(ft){return void Ve.error(ft)}gt?Ve.complete():Ve.next(Re)},0,!0)}),()=>(0,Pe.m)(be?.return)&&be.return()})}(ot,Et);if((0,Ct.L)(ot))return function mt(ot,Et){return me((0,Ct.Q)(ot),Et)}(ot,Et)}throw(0,Me.z)(ot)}(ot,Et):(0,d.Xf)(ot)}},8421:(Bt,Fe,R)=>{R.d(Fe,{Xf:()=>qe});var d=R(7582),F=R(1144),V=R(8239),ce=R(9751),ae=R(3670),we=R(2206),Ce=R(4532),te=R(6495),Pe=R(3260),re=R(576),ue=R(7849),me=R(8822);function qe(ge){if(ge instanceof ce.y)return ge;if(null!=ge){if((0,ae.c)(ge))return function ze(ge){return new ce.y(st=>{const ot=ge[me.L]();if((0,re.m)(ot.subscribe))return ot.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,F.z)(ge))return function We(ge){return new ce.y(st=>{for(let ot=0;ot<ge.length&&!st.closed;ot++)st.next(ge[ot]);st.complete()})}(ge);if((0,V.t)(ge))return function wt(ge){return new ce.y(st=>{ge.then(ot=>{st.closed||(st.next(ot),st.complete())},ot=>st.error(ot)).then(null,ue.h)})}(ge);if((0,we.D)(ge))return Me(ge);if((0,te.T)(ge))return function Be(ge){return new ce.y(st=>{for(const ot of ge)if(st.next(ot),st.closed)return;st.complete()})}(ge);if((0,Pe.L)(ge))return function Ct(ge){return Me((0,Pe.Q)(ge))}(ge)}throw(0,Ce.z)(ge)}function Me(ge){return new ce.y(st=>{(function mt(ge,st){var ot,Et,Ve,be;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ot=(0,d.KL)(ge);!(Et=yield ot.next()).done;)if(st.next(Et.value),st.closed)return}catch(Re){Ve={error:Re}}finally{try{Et&&!Et.done&&(be=ot.return)&&(yield be.call(ot))}finally{if(Ve)throw Ve.error}}st.complete()})})(ge,st).catch(ot=>st.error(ot))})}},6451:(Bt,Fe,R)=>{R.d(Fe,{T:()=>we});var d=R(8189),F=R(8421),V=R(515),ce=R(3269),ae=R(8996);function we(...Ce){const te=(0,ce.yG)(Ce),Pe=(0,ce._6)(Ce,1/0),re=Ce;return re.length?1===re.length?(0,F.Xf)(re[0]):(0,d.J)(Pe)((0,ae.D)(re,te)):V.E}},9646:(Bt,Fe,R)=>{R.d(Fe,{of:()=>V});var d=R(3269),F=R(8996);function V(...ce){const ae=(0,d.yG)(ce);return(0,F.D)(ce,ae)}},2843:(Bt,Fe,R)=>{R.d(Fe,{_:()=>V});var d=R(9751),F=R(576);function V(ce,ae){const we=(0,F.m)(ce)?ce:()=>ce,Ce=te=>te.error(we());return new d.y(ae?te=>ae.schedule(Ce,0,te):Ce)}},5403:(Bt,Fe,R)=>{R.d(Fe,{x:()=>F});var d=R(930);function F(ce,ae,we,Ce,te){return new V(ce,ae,we,Ce,te)}class V extends d.Lv{constructor(ae,we,Ce,te,Pe,re){super(ae),this.onFinalize=Pe,this.shouldUnsubscribe=re,this._next=we?function(ue){try{we(ue)}catch(me){ae.error(me)}}:super._next,this._error=te?function(ue){try{te(ue)}catch(me){ae.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(ue){ae.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},1402:(Bt,Fe,R)=>{R.d(Fe,{j:()=>ce});var d=R(4482),F=R(5403),V=R(8737);function ce(ae,we=null){return we=we??ae,(0,d.e)((Ce,te)=>{let Pe=[],re=0;Ce.subscribe((0,F.x)(te,ue=>{let me=null;re++%we==0&&Pe.push([]);for(const qe of Pe)qe.push(ue),ae<=qe.length&&(me=me??[],me.push(qe));if(me)for(const qe of me)(0,V.P)(Pe,qe),te.next(qe)},()=>{for(const ue of Pe)te.next(ue);te.complete()},void 0,()=>{Pe=null}))})}},7886:(Bt,Fe,R)=>{R.d(Fe,{u:()=>F});var d=R(8189);function F(){return(0,d.J)(1)}},4351:(Bt,Fe,R)=>{R.d(Fe,{b:()=>V});var d=R(5577),F=R(576);function V(ce,ae){return(0,F.m)(ae)?(0,d.z)(ce,ae,1):(0,d.z)(ce,1)}},6590:(Bt,Fe,R)=>{R.d(Fe,{d:()=>V});var d=R(4482),F=R(5403);function V(ce){return(0,d.e)((ae,we)=>{let Ce=!1;ae.subscribe((0,F.x)(we,te=>{Ce=!0,we.next(te)},()=>{Ce||we.next(ce),we.complete()}))})}},9300:(Bt,Fe,R)=>{R.d(Fe,{h:()=>V});var d=R(4482),F=R(5403);function V(ce,ae){return(0,d.e)((we,Ce)=>{let te=0;we.subscribe((0,F.x)(Ce,Pe=>ce.call(ae,Pe,te++)&&Ce.next(Pe)))})}},590:(Bt,Fe,R)=>{R.d(Fe,{P:()=>Ce});var d=R(6805),F=R(9300),V=R(5698),ce=R(6590),ae=R(8068),we=R(4671);function Ce(te,Pe){const re=arguments.length>=2;return ue=>ue.pipe(te?(0,F.h)((me,qe)=>te(me,qe,ue)):we.y,(0,V.q)(1),re?(0,ce.d)(Pe):(0,ae.T)(()=>new d.K))}},4004:(Bt,Fe,R)=>{R.d(Fe,{U:()=>V});var d=R(4482),F=R(5403);function V(ce,ae){return(0,d.e)((we,Ce)=>{let te=0;we.subscribe((0,F.x)(Ce,Pe=>{Ce.next(ce.call(ae,Pe,te++))}))})}},9718:(Bt,Fe,R)=>{R.d(Fe,{h:()=>F});var d=R(4004);function F(V){return(0,d.U)(()=>V)}},8189:(Bt,Fe,R)=>{R.d(Fe,{J:()=>V});var d=R(5577),F=R(4671);function V(ce=1/0){return(0,d.z)(F.y,ce)}},5577:(Bt,Fe,R)=>{R.d(Fe,{z:()=>te});var d=R(4004),F=R(8421),V=R(4482),ce=R(9672),ae=R(5403),Ce=R(576);function te(Pe,re,ue=1/0){return(0,Ce.m)(re)?te((me,qe)=>(0,d.U)((ze,We)=>re(me,ze,qe,We))((0,F.Xf)(Pe(me,qe))),ue):("number"==typeof re&&(ue=re),(0,V.e)((me,qe)=>function we(Pe,re,ue,me,qe,ze,We,wt){const Be=[];let Me=0,Ct=0,mt=!1;const ge=()=>{mt&&!Be.length&&!Me&&re.complete()},st=Et=>Me<me?ot(Et):Be.push(Et),ot=Et=>{ze&&re.next(Et),Me++;let Ve=!1;(0,F.Xf)(ue(Et,Ct++)).subscribe((0,ae.x)(re,be=>{qe?.(be),ze?st(be):re.next(be)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Me--;Be.length&&Me<me;){const be=Be.shift();We?(0,ce.f)(re,We,()=>ot(be)):ot(be)}ge()}catch(be){re.error(be)}}))};return Pe.subscribe((0,ae.x)(re,st,()=>{mt=!0,ge()})),()=>{wt?.()}}(me,qe,Pe,ue)))}},5363:(Bt,Fe,R)=>{R.d(Fe,{Q:()=>ce});var d=R(9672),F=R(4482),V=R(5403);function ce(ae,we=0){return(0,F.e)((Ce,te)=>{Ce.subscribe((0,V.x)(te,Pe=>(0,d.f)(te,ae,()=>te.next(Pe),we),()=>(0,d.f)(te,ae,()=>te.complete(),we),Pe=>(0,d.f)(te,ae,()=>te.error(Pe),we)))})}},8343:(Bt,Fe,R)=>{R.d(Fe,{x:()=>V});var d=R(4482),F=R(5403);function V(){return(0,d.e)((ce,ae)=>{let we=null;ce._refCount++;const Ce=(0,F.x)(ae,void 0,void 0,void 0,()=>{if(!ce||ce._refCount<=0||0<--ce._refCount)return void(we=null);const te=ce._connection,Pe=we;we=null,te&&(!Pe||te===Pe)&&te.unsubscribe(),ae.unsubscribe()});ce.subscribe(Ce),Ce.closed||(we=ce.connect())})}},5026:(Bt,Fe,R)=>{R.d(Fe,{R:()=>ce});var d=R(4482),F=R(5403);function V(ae,we,Ce,te,Pe){return(re,ue)=>{let me=Ce,qe=we,ze=0;re.subscribe((0,F.x)(ue,We=>{const wt=ze++;qe=me?ae(qe,We,wt):(me=!0,We),te&&ue.next(qe)},Pe&&(()=>{me&&ue.next(qe),ue.complete()})))}}function ce(ae,we){return(0,d.e)(V(ae,we,arguments.length>=2,!0))}},3099:(Bt,Fe,R)=>{R.d(Fe,{B:()=>ae});var d=R(8421),F=R(7579),V=R(930),ce=R(4482);function ae(Ce={}){const{connector:te=(()=>new F.x),resetOnError:Pe=!0,resetOnComplete:re=!0,resetOnRefCountZero:ue=!0}=Ce;return me=>{let qe,ze,We,wt=0,Be=!1,Me=!1;const Ct=()=>{ze?.unsubscribe(),ze=void 0},mt=()=>{Ct(),qe=We=void 0,Be=Me=!1},ge=()=>{const st=qe;mt(),st?.unsubscribe()};return(0,ce.e)((st,ot)=>{wt++,!Me&&!Be&&Ct();const Et=We=We??te();ot.add(()=>{wt--,0===wt&&!Me&&!Be&&(ze=we(ge,ue))}),Et.subscribe(ot),!qe&&wt>0&&(qe=new V.Hp({next:Ve=>Et.next(Ve),error:Ve=>{Me=!0,Ct(),ze=we(mt,Pe,Ve),Et.error(Ve)},complete:()=>{Be=!0,Ct(),ze=we(mt,re),Et.complete()}}),(0,d.Xf)(st).subscribe(qe))})(me)}}function we(Ce,te,...Pe){if(!0===te)return void Ce();if(!1===te)return;const re=new V.Hp({next:()=>{re.unsubscribe(),Ce()}});return te(...Pe).subscribe(re)}},8675:(Bt,Fe,R)=>{R.d(Fe,{O:()=>ce});var d=R(1350),F=R(3269),V=R(4482);function ce(...ae){const we=(0,F.yG)(ae);return(0,V.e)((Ce,te)=>{(we?(0,d.z)(ae,Ce,we):(0,d.z)(ae,Ce)).subscribe(te)})}},9468:(Bt,Fe,R)=>{R.d(Fe,{R:()=>F});var d=R(4482);function F(V,ce=0){return(0,d.e)((ae,we)=>{we.add(V.schedule(()=>ae.subscribe(we),ce))})}},3900:(Bt,Fe,R)=>{R.d(Fe,{w:()=>ce});var d=R(8421),F=R(4482),V=R(5403);function ce(ae,we){return(0,F.e)((Ce,te)=>{let Pe=null,re=0,ue=!1;const me=()=>ue&&!Pe&&te.complete();Ce.subscribe((0,V.x)(te,qe=>{Pe?.unsubscribe();let ze=0;const We=re++;(0,d.Xf)(ae(qe,We)).subscribe(Pe=(0,V.x)(te,wt=>te.next(we?we(qe,wt,We,ze++):wt),()=>{Pe=null,me()}))},()=>{ue=!0,me()}))})}},5698:(Bt,Fe,R)=>{R.d(Fe,{q:()=>ce});var d=R(515),F=R(4482),V=R(5403);function ce(ae){return ae<=0?()=>d.E:(0,F.e)((we,Ce)=>{let te=0;we.subscribe((0,V.x)(Ce,Pe=>{++te<=ae&&(Ce.next(Pe),ae<=te&&Ce.complete())}))})}},8505:(Bt,Fe,R)=>{R.d(Fe,{b:()=>ae});var d=R(576),F=R(4482),V=R(5403),ce=R(4671);function ae(we,Ce,te){const Pe=(0,d.m)(we)||Ce||te?{next:we,error:Ce,complete:te}:we;return Pe?(0,F.e)((re,ue)=>{var me;null===(me=Pe.subscribe)||void 0===me||me.call(Pe);let qe=!0;re.subscribe((0,V.x)(ue,ze=>{var We;null===(We=Pe.next)||void 0===We||We.call(Pe,ze),ue.next(ze)},()=>{var ze;qe=!1,null===(ze=Pe.complete)||void 0===ze||ze.call(Pe),ue.complete()},ze=>{var We;qe=!1,null===(We=Pe.error)||void 0===We||We.call(Pe,ze),ue.error(ze)},()=>{var ze,We;qe&&(null===(ze=Pe.unsubscribe)||void 0===ze||ze.call(Pe)),null===(We=Pe.finalize)||void 0===We||We.call(Pe)}))}):ce.y}},8068:(Bt,Fe,R)=>{R.d(Fe,{T:()=>ce});var d=R(6805),F=R(4482),V=R(5403);function ce(we=ae){return(0,F.e)((Ce,te)=>{let Pe=!1;Ce.subscribe((0,V.x)(te,re=>{Pe=!0,te.next(re)},()=>Pe?te.complete():te.error(we())))})}function ae(){return new d.K}},4408:(Bt,Fe,R)=>{R.d(Fe,{o:()=>ae});var d=R(727);class F extends d.w0{constructor(Ce,te){super()}schedule(Ce,te=0){return this}}const V={setInterval(we,Ce,...te){const{delegate:Pe}=V;return Pe?.setInterval?Pe.setInterval(we,Ce,...te):setInterval(we,Ce,...te)},clearInterval(we){const{delegate:Ce}=V;return(Ce?.clearInterval||clearInterval)(we)},delegate:void 0};var ce=R(8737);class ae extends F{constructor(Ce,te){super(Ce,te),this.scheduler=Ce,this.work=te,this.pending=!1}schedule(Ce,te=0){var Pe;if(this.closed)return this;this.state=Ce;const re=this.id,ue=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(ue,re,te)),this.pending=!0,this.delay=te,this.id=null!==(Pe=this.id)&&void 0!==Pe?Pe:this.requestAsyncId(ue,this.id,te),this}requestAsyncId(Ce,te,Pe=0){return V.setInterval(Ce.flush.bind(Ce,this),Pe)}recycleAsyncId(Ce,te,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return te;null!=te&&V.clearInterval(te)}execute(Ce,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Ce,te);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,te){let re,Pe=!1;try{this.work(Ce)}catch(ue){Pe=!0,re=ue||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:te}=this,{actions:Pe}=te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Pe,this),null!=Ce&&(this.id=this.recycleAsyncId(te,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(Bt,Fe,R)=>{R.d(Fe,{v:()=>V});var d=R(6063);class F{constructor(ae,we=F.now){this.schedulerActionCtor=ae,this.now=we}schedule(ae,we=0,Ce){return new this.schedulerActionCtor(this,ae).schedule(Ce,we)}}F.now=d.l.now;class V extends F{constructor(ae,we=F.now){super(ae,we),this.actions=[],this._active=!1}flush(ae){const{actions:we}=this;if(this._active)return void we.push(ae);let Ce;this._active=!0;do{if(Ce=ae.execute(ae.state,ae.delay))break}while(ae=we.shift());if(this._active=!1,Ce){for(;ae=we.shift();)ae.unsubscribe();throw Ce}}}},4986:(Bt,Fe,R)=>{R.d(Fe,{P:()=>ce,z:()=>V});var d=R(4408);const V=new(R(7565).v)(d.o),ce=V},6063:(Bt,Fe,R)=>{R.d(Fe,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Bt,Fe,R)=>{R.d(Fe,{z:()=>d});const d={setTimeout(F,V,...ce){const{delegate:ae}=d;return ae?.setTimeout?ae.setTimeout(F,V,...ce):setTimeout(F,V,...ce)},clearTimeout(F){const{delegate:V}=d;return(V?.clearTimeout||clearTimeout)(F)},delegate:void 0}},2202:(Bt,Fe,R)=>{R.d(Fe,{h:()=>F});const F=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Bt,Fe,R)=>{R.d(Fe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Bt,Fe,R)=>{R.d(Fe,{K:()=>F});const F=(0,R(3888).d)(V=>function(){V(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Bt,Fe,R)=>{R.d(Fe,{_6:()=>we,jO:()=>ce,yG:()=>ae});var d=R(576),F=R(3532);function V(Ce){return Ce[Ce.length-1]}function ce(Ce){return(0,d.m)(V(Ce))?Ce.pop():void 0}function ae(Ce){return(0,F.K)(V(Ce))?Ce.pop():void 0}function we(Ce,te){return"number"==typeof V(Ce)?Ce.pop():te}},4742:(Bt,Fe,R)=>{R.d(Fe,{D:()=>ae});const{isArray:d}=Array,{getPrototypeOf:F,prototype:V,keys:ce}=Object;function ae(Ce){if(1===Ce.length){const te=Ce[0];if(d(te))return{args:te,keys:null};if(function we(Ce){return Ce&&"object"==typeof Ce&&F(Ce)===V}(te)){const Pe=ce(te);return{args:Pe.map(re=>te[re]),keys:Pe}}}return{args:Ce,keys:null}}},8737:(Bt,Fe,R)=>{function d(F,V){if(F){const ce=F.indexOf(V);0<=ce&&F.splice(ce,1)}}R.d(Fe,{P:()=>d})},3888:(Bt,Fe,R)=>{function d(F){const ce=F(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}R.d(Fe,{d:()=>d})},1810:(Bt,Fe,R)=>{function d(F,V){return F.reduce((ce,ae,we)=>(ce[ae]=V[we],ce),{})}R.d(Fe,{n:()=>d})},2806:(Bt,Fe,R)=>{R.d(Fe,{O:()=>ce,x:()=>V});var d=R(2416);let F=null;function V(ae){if(d.v.useDeprecatedSynchronousErrorHandling){const we=!F;if(we&&(F={errorThrown:!1,error:null}),ae(),we){const{errorThrown:Ce,error:te}=F;if(F=null,Ce)throw te}}else ae()}function ce(ae){d.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=ae)}},9672:(Bt,Fe,R)=>{function d(F,V,ce,ae=0,we=!1){const Ce=V.schedule(function(){ce(),we?F.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(F.add(Ce),!we)return Ce}R.d(Fe,{f:()=>d})},4671:(Bt,Fe,R)=>{function d(F){return F}R.d(Fe,{y:()=>d})},1144:(Bt,Fe,R)=>{R.d(Fe,{z:()=>d});const d=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(Bt,Fe,R)=>{R.d(Fe,{D:()=>F});var d=R(576);function F(V){return Symbol.asyncIterator&&(0,d.m)(V?.[Symbol.asyncIterator])}},576:(Bt,Fe,R)=>{function d(F){return"function"==typeof F}R.d(Fe,{m:()=>d})},3670:(Bt,Fe,R)=>{R.d(Fe,{c:()=>V});var d=R(8822),F=R(576);function V(ce){return(0,F.m)(ce[d.L])}},6495:(Bt,Fe,R)=>{R.d(Fe,{T:()=>V});var d=R(2202),F=R(576);function V(ce){return(0,F.m)(ce?.[d.h])}},8239:(Bt,Fe,R)=>{R.d(Fe,{t:()=>F});var d=R(576);function F(V){return(0,d.m)(V?.then)}},3260:(Bt,Fe,R)=>{R.d(Fe,{L:()=>ce,Q:()=>V});var d=R(7582),F=R(576);function V(ae){return(0,d.FC)(this,arguments,function*(){const Ce=ae.getReader();try{for(;;){const{value:te,done:Pe}=yield(0,d.qq)(Ce.read());if(Pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(te)}}finally{Ce.releaseLock()}})}function ce(ae){return(0,F.m)(ae?.getReader)}},3532:(Bt,Fe,R)=>{R.d(Fe,{K:()=>F});var d=R(576);function F(V){return V&&(0,d.m)(V.schedule)}},4482:(Bt,Fe,R)=>{R.d(Fe,{A:()=>F,e:()=>V});var d=R(576);function F(ce){return(0,d.m)(ce?.lift)}function V(ce){return ae=>{if(F(ae))return ae.lift(function(we){try{return ce(we,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Bt,Fe,R)=>{R.d(Fe,{Z:()=>ce});var d=R(4004);const{isArray:F}=Array;function ce(ae){return(0,d.U)(we=>function V(ae,we){return F(we)?ae(...we):ae(we)}(ae,we))}},5032:(Bt,Fe,R)=>{function d(){}R.d(Fe,{Z:()=>d})},9635:(Bt,Fe,R)=>{R.d(Fe,{U:()=>V,z:()=>F});var d=R(4671);function F(...ce){return V(ce)}function V(ce){return 0===ce.length?d.y:1===ce.length?ce[0]:function(we){return ce.reduce((Ce,te)=>te(Ce),we)}}},7849:(Bt,Fe,R)=>{R.d(Fe,{h:()=>V});var d=R(2416),F=R(3410);function V(ce){F.z.setTimeout(()=>{const{onUnhandledError:ae}=d.v;if(!ae)throw ce;ae(ce)})}},4532:(Bt,Fe,R)=>{function d(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Fe,{z:()=>d})},6895:(Bt,Fe,R)=>{R.d(Fe,{Do:()=>mt,EM:()=>Ys,H9:()=>as,HT:()=>ae,JF:()=>bo,K0:()=>Ce,Mx:()=>Ns,NF:()=>vs,O5:()=>jr,Ov:()=>Ae,PM:()=>_s,S$:()=>Be,V_:()=>re,Ye:()=>ge,b0:()=>Ct,bD:()=>Zi,ez:()=>Ls,mk:()=>Jn,q:()=>V,sg:()=>Ki,w_:()=>we});var d=R(4650);let F=null;function V(){return F}function ae(b){F||(F=b)}class we{}const Ce=new d.OlP("DocumentToken");let te=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=d.Yz7({token:b,factory:function(){return function Pe(){return(0,d.LFG)(ue)}()},providedIn:"platform"}),b})();const re=new d.OlP("Location Initialized");let ue=(()=>{class b extends te{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(x){const K=V().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",x,!1),()=>K.removeEventListener("popstate",x)}onHashChange(x){const K=V().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",x,!1),()=>K.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,K,Ie){me()?this._history.pushState(x,K,Ie):this.location.hash=Ie}replaceState(x,K,Ie){me()?this._history.replaceState(x,K,Ie):this.location.hash=Ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return b.\u0275fac=function(x){return new(x||b)(d.LFG(Ce))},b.\u0275prov=d.Yz7({token:b,factory:function(){return function qe(){return new ue((0,d.LFG)(Ce))}()},providedIn:"platform"}),b})();function me(){return!!window.history.pushState}function ze(b,U){if(0==b.length)return U;if(0==U.length)return b;let x=0;return b.endsWith("/")&&x++,U.startsWith("/")&&x++,2==x?b+U.substring(1):1==x?b+U:b+"/"+U}function We(b){const U=b.match(/#|\?|$/),x=U&&U.index||b.length;return b.slice(0,x-("/"===b[x-1]?1:0))+b.slice(x)}function wt(b){return b&&"?"!==b[0]?"?"+b:b}let Be=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=d.Yz7({token:b,factory:function(){return(0,d.f3M)(Ct)},providedIn:"root"}),b})();const Me=new d.OlP("appBaseHref");let Ct=(()=>{class b extends Be{constructor(x,K){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return ze(this._baseHref,x)}path(x=!1){const K=this._platformLocation.pathname+wt(this._platformLocation.search),Ie=this._platformLocation.hash;return Ie&&x?`${K}${Ie}`:K}pushState(x,K,Ie,at){const _t=this.prepareExternalUrl(Ie+wt(at));this._platformLocation.pushState(x,K,_t)}replaceState(x,K,Ie,at){const _t=this.prepareExternalUrl(Ie+wt(at));this._platformLocation.replaceState(x,K,_t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(d.LFG(te),d.LFG(Me,8))},b.\u0275prov=d.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),mt=(()=>{class b extends Be{constructor(x,K){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(x){const K=ze(this._baseHref,x);return K.length>0?"#"+K:K}pushState(x,K,Ie,at){let _t=this.prepareExternalUrl(Ie+wt(at));0==_t.length&&(_t=this._platformLocation.pathname),this._platformLocation.pushState(x,K,_t)}replaceState(x,K,Ie,at){let _t=this.prepareExternalUrl(Ie+wt(at));0==_t.length&&(_t=this._platformLocation.pathname),this._platformLocation.replaceState(x,K,_t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(d.LFG(te),d.LFG(Me,8))},b.\u0275prov=d.Yz7({token:b,factory:b.\u0275fac}),b})(),ge=(()=>{class b{constructor(x){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const K=this._locationStrategy.getBaseHref();this._baseHref=We(Et(K)),this._locationStrategy.onPopState(Ie=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ie.state,type:Ie.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,K=""){return this.path()==this.normalize(x+wt(K))}normalize(x){return b.stripTrailingSlash(function ot(b,U){return b&&U.startsWith(b)?U.substring(b.length):U}(this._baseHref,Et(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,K="",Ie=null){this._locationStrategy.pushState(Ie,"",x,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+wt(K)),Ie)}replaceState(x,K="",Ie=null){this._locationStrategy.replaceState(Ie,"",x,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+wt(K)),Ie)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",K){this._urlChangeListeners.forEach(Ie=>Ie(x,K))}subscribe(x,K,Ie){return this._subject.subscribe({next:x,error:K,complete:Ie})}}return b.normalizeQueryParams=wt,b.joinWithSlash=ze,b.stripTrailingSlash=We,b.\u0275fac=function(x){return new(x||b)(d.LFG(Be))},b.\u0275prov=d.Yz7({token:b,factory:function(){return function st(){return new ge((0,d.LFG)(Be))}()},providedIn:"root"}),b})();function Et(b){return b.replace(/\/index.html$/,"")}const Ve={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var be=(()=>((be=be||{})[be.Decimal=0]="Decimal",be[be.Percent=1]="Percent",be[be.Currency=2]="Currency",be[be.Scientific=3]="Scientific",be))(),Vt=(()=>((Vt=Vt||{})[Vt.Decimal=0]="Decimal",Vt[Vt.Group=1]="Group",Vt[Vt.List=2]="List",Vt[Vt.PercentSign=3]="PercentSign",Vt[Vt.PlusSign=4]="PlusSign",Vt[Vt.MinusSign=5]="MinusSign",Vt[Vt.Exponential=6]="Exponential",Vt[Vt.SuperscriptingExponent=7]="SuperscriptingExponent",Vt[Vt.PerMille=8]="PerMille",Vt[Vt.Infinity=9]="Infinity",Vt[Vt.NaN=10]="NaN",Vt[Vt.TimeSeparator=11]="TimeSeparator",Vt[Vt.CurrencyDecimal=12]="CurrencyDecimal",Vt[Vt.CurrencyGroup=13]="CurrencyGroup",Vt))();function nn(b,U){const x=(0,d.cg1)(b),K=x[d.wAp.NumberSymbols][U];if(typeof K>"u"){if(U===Vt.CurrencyDecimal)return x[d.wAp.NumberSymbols][Vt.Decimal];if(U===Vt.CurrencyGroup)return x[d.wAp.NumberSymbols][Vt.Group]}return K}const Ft=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Le(b,U,x,K,Ie){const _t=function wn(b,U="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},K=b.split(";"),Ie=K[0],at=K[1],_t=-1!==Ie.indexOf(".")?Ie.split("."):[Ie.substring(0,Ie.lastIndexOf("0")+1),Ie.substring(Ie.lastIndexOf("0")+1)],vn=_t[0],mr=_t[1]||"";x.posPre=vn.substring(0,vn.indexOf("#"));for(let wr=0;wr<mr.length;wr++){const In=mr.charAt(wr);"0"===In?x.minFrac=x.maxFrac=wr+1:"#"===In?x.maxFrac=wr+1:x.posSuf+=In}const rr=vn.split(",");if(x.gSize=rr[1]?rr[1].length:0,x.lgSize=rr[2]||rr[1]?(rr[2]||rr[1]).length:0,at){const wr=Ie.length-x.posPre.length-x.posSuf.length,In=at.indexOf("#");x.negPre=at.substring(0,In).replace(/'/g,""),x.negSuf=at.slice(In+wr).replace(/'/g,"")}else x.negPre=U+x.posPre,x.negSuf=x.posSuf;return x}(function ln(b,U){return(0,d.cg1)(b)[d.wAp.NumberFormats][U]}(U,be.Currency),nn(U,Vt.MinusSign));return _t.minFrac=function Pr(b){let U;const x=Ve[b];return x&&(U=x[2]),"number"==typeof U?U:2}(K),_t.maxFrac=_t.minFrac,function Ue(b,U,x,K,Ie,at,_t=!1){let vn="",mr=!1;if(isFinite(b)){let rr=function Yn(b){let K,Ie,at,_t,vn,U=Math.abs(b)+"",x=0;for((Ie=U.indexOf("."))>-1&&(U=U.replace(".","")),(at=U.search(/e/i))>0?(Ie<0&&(Ie=at),Ie+=+U.slice(at+1),U=U.substring(0,at)):Ie<0&&(Ie=U.length),at=0;"0"===U.charAt(at);at++);if(at===(vn=U.length))K=[0],Ie=1;else{for(vn--;"0"===U.charAt(vn);)vn--;for(Ie-=at,K=[],_t=0;at<=vn;at++,_t++)K[_t]=Number(U.charAt(at))}return Ie>22&&(K=K.splice(0,21),x=Ie-1,Ie=1),{digits:K,exponent:x,integerLen:Ie}}(b);_t&&(rr=function Ln(b){if(0===b.digits[0])return b;const U=b.digits.length-b.integerLen;return b.exponent?b.exponent+=2:(0===U?b.digits.push(0,0):1===U&&b.digits.push(0),b.integerLen+=2),b}(rr));let wr=U.minInt,In=U.minFrac,Sr=U.maxFrac;if(at){const Vr=at.match(Ft);if(null===Vr)throw new Error(`${at} is not a valid digit info`);const go=Vr[1],en=Vr[3],pn=Vr[5];null!=go&&(wr=Bn(go)),null!=en&&(In=Bn(en)),null!=pn?Sr=Bn(pn):null!=en&&In>Sr&&(Sr=In)}!function Tr(b,U,x){if(U>x)throw new Error(`The minimum number of digits after fraction (${U}) is higher than the maximum (${x}).`);let K=b.digits,Ie=K.length-b.integerLen;const at=Math.min(Math.max(U,Ie),x);let _t=at+b.integerLen,vn=K[_t];if(_t>0){K.splice(Math.max(b.integerLen,_t));for(let In=_t;In<K.length;In++)K[In]=0}else{Ie=Math.max(0,Ie),b.integerLen=1,K.length=Math.max(1,_t=at+1),K[0]=0;for(let In=1;In<_t;In++)K[In]=0}if(vn>=5)if(_t-1<0){for(let In=0;In>_t;In--)K.unshift(0),b.integerLen++;K.unshift(1),b.integerLen++}else K[_t-1]++;for(;Ie<Math.max(0,at);Ie++)K.push(0);let mr=0!==at;const rr=U+b.integerLen,wr=K.reduceRight(function(In,Sr,Hn,Yr){return Yr[Hn]=(Sr+=In)<10?Sr:Sr-10,mr&&(0===Yr[Hn]&&Hn>=rr?Yr.pop():mr=!1),Sr>=10?1:0},0);wr&&(K.unshift(wr),b.integerLen++)}(rr,In,Sr);let Hn=rr.digits,Yr=rr.integerLen;const fs=rr.exponent;let Mt=[];for(mr=Hn.every(Vr=>!Vr);Yr<wr;Yr++)Hn.unshift(0);for(;Yr<0;Yr++)Hn.unshift(0);Yr>0?Mt=Hn.splice(Yr,Hn.length):(Mt=Hn,Hn=[0]);const Ir=[];for(Hn.length>=U.lgSize&&Ir.unshift(Hn.splice(-U.lgSize,Hn.length).join(""));Hn.length>U.gSize;)Ir.unshift(Hn.splice(-U.gSize,Hn.length).join(""));Hn.length&&Ir.unshift(Hn.join("")),vn=Ir.join(nn(x,K)),Mt.length&&(vn+=nn(x,Ie)+Mt.join("")),fs&&(vn+=nn(x,Vt.Exponential)+"+"+fs)}else vn=nn(x,Vt.Infinity);return vn=b<0&&!mr?U.negPre+vn+U.negSuf:U.posPre+vn+U.posSuf,vn}(b,_t,U,Vt.CurrencyGroup,Vt.CurrencyDecimal,Ie).replace("\xa4",x).replace("\xa4","").trim()}function Bn(b){const U=parseInt(b);if(isNaN(U))throw new Error("Invalid integer literal when parsing "+b);return U}function Ns(b,U){U=encodeURIComponent(U);for(const x of b.split(";")){const K=x.indexOf("="),[Ie,at]=-1==K?[x,""]:[x.slice(0,K),x.slice(K+1)];if(Ie.trim()===U)return decodeURIComponent(at)}return null}let Jn=(()=>{class b{constructor(x,K,Ie,at){this._iterableDiffers=x,this._keyValueDiffers=K,this._ngEl=Ie,this._renderer=at,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(K=>this._toggleClass(K.key,K.currentValue)),x.forEachChangedItem(K=>this._toggleClass(K.key,K.currentValue)),x.forEachRemovedItem(K=>{K.previousValue&&this._toggleClass(K.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(K=>{if("string"!=typeof K.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(K.item)}`);this._toggleClass(K.item,!0)}),x.forEachRemovedItem(K=>this._toggleClass(K.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(K=>this._toggleClass(K,!0)):Object.keys(x).forEach(K=>this._toggleClass(K,!!x[K])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(K=>this._toggleClass(K,!1)):Object.keys(x).forEach(K=>this._toggleClass(K,!1)))}_toggleClass(x,K){(x=x.trim())&&x.split(/\s+/g).forEach(Ie=>{K?this._renderer.addClass(this._ngEl.nativeElement,Ie):this._renderer.removeClass(this._ngEl.nativeElement,Ie)})}}return b.\u0275fac=function(x){return new(x||b)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},b.\u0275dir=d.lG2({type:b,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),b})();class Ar{constructor(U,x,K,Ie){this.$implicit=U,this.ngForOf=x,this.index=K,this.count=Ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ki=(()=>{class b{constructor(x,K,Ie){this._viewContainer=x,this._template=K,this._differs=Ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const K=this._viewContainer;x.forEachOperation((Ie,at,_t)=>{if(null==Ie.previousIndex)K.createEmbeddedView(this._template,new Ar(Ie.item,this._ngForOf,-1,-1),null===_t?void 0:_t);else if(null==_t)K.remove(null===at?void 0:at);else if(null!==at){const vn=K.get(at);K.move(vn,_t),Kr(vn,Ie)}});for(let Ie=0,at=K.length;Ie<at;Ie++){const vn=K.get(Ie).context;vn.index=Ie,vn.count=at,vn.ngForOf=this._ngForOf}x.forEachIdentityChange(Ie=>{Kr(K.get(Ie.currentIndex),Ie)})}static ngTemplateContextGuard(x,K){return!0}}return b.\u0275fac=function(x){return new(x||b)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},b.\u0275dir=d.lG2({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),b})();function Kr(b,U){b.context.$implicit=U.item}let jr=(()=>{class b{constructor(x,K){this._viewContainer=x,this._context=new ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Zr("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Zr("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,K){return!0}}return b.\u0275fac=function(x){return new(x||b)(d.Y36(d.s_b),d.Y36(d.Rgc))},b.\u0275dir=d.lG2({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),b})();class ss{constructor(){this.$implicit=null,this.ngIf=null}}function Zr(b,U){if(U&&!U.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,d.AaK)(U)}'.`)}function dr(b,U){return new d.vHH(2100,!1)}class Io{createSubscription(U,x){return U.subscribe({next:x,error:K=>{throw K}})}dispose(U){U.unsubscribe()}}class Do{createSubscription(U,x){return U.then(x,K=>{throw K})}dispose(U){}}const lo=new Do,Oe=new Io;let Ae=(()=>{class b{constructor(x){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=x}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,K=>this._updateLatestValue(x,K))}_selectStrategy(x){if((0,d.QGY)(x))return lo;if((0,d.F4k)(x))return Oe;throw dr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,K){x===this._obj&&(this._latestValue=K,this._ref.markForCheck())}}return b.\u0275fac=function(x){return new(x||b)(d.Y36(d.sBO,16))},b.\u0275pipe=d.Yjl({name:"async",type:b,pure:!1,standalone:!0}),b})(),as=(()=>{class b{constructor(x,K="USD"){this._locale=x,this._defaultCurrencyCode=K}transform(x,K=this._defaultCurrencyCode,Ie="symbol",at,_t){if(!function Lo(b){return!(null==b||""===b||b!=b)}(x))return null;_t=_t||this._locale,"boolean"==typeof Ie&&(Ie=Ie?"symbol":"code");let vn=K||this._defaultCurrencyCode;"code"!==Ie&&(vn="symbol"===Ie||"symbol-narrow"===Ie?function $n(b,U,x="en"){const K=function qt(b){return(0,d.cg1)(b)[d.wAp.Currencies]}(x)[b]||Ve[b]||[],Ie=K[1];return"narrow"===U&&"string"==typeof Ie?Ie:K[0]||b}(vn,"symbol"===Ie?"wide":"narrow",_t):Ie);try{return Le(function us(b){if("string"==typeof b&&!isNaN(Number(b)-parseFloat(b)))return Number(b);if("number"!=typeof b)throw new Error(`${b} is not a number`);return b}(x),_t,vn,K,at)}catch(mr){throw dr()}}}return b.\u0275fac=function(x){return new(x||b)(d.Y36(d.soG,16),d.Y36(d.EJc,16))},b.\u0275pipe=d.Yjl({name:"currency",type:b,pure:!0,standalone:!0}),b})();let Ls=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=d.oAB({type:b}),b.\u0275inj=d.cJS({}),b})();const Zi="browser";function vs(b){return b===Zi}function _s(b){return"server"===b}let Ys=(()=>{class b{}return b.\u0275prov=(0,d.Yz7)({token:b,providedIn:"root",factory:()=>new ls((0,d.LFG)(Ce),window)}),b})();class ls{constructor(U,x){this.document=U,this.window=x,this.offset=()=>[0,0]}setOffset(U){this.offset=Array.isArray(U)?()=>U:U}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(U){this.supportsScrolling()&&this.window.scrollTo(U[0],U[1])}scrollToAnchor(U){if(!this.supportsScrolling())return;const x=function hi(b,U){const x=b.getElementById(U)||b.getElementsByName(U)[0];if(x)return x;if("function"==typeof b.createTreeWalker&&b.body&&(b.body.createShadowRoot||b.body.attachShadow)){const K=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let Ie=K.currentNode;for(;Ie;){const at=Ie.shadowRoot;if(at){const _t=at.getElementById(U)||at.querySelector(`[name="${U}"]`);if(_t)return _t}Ie=K.nextNode()}}return null}(this.document,U);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(U){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=U)}}scrollToElement(U){const x=U.getBoundingClientRect(),K=x.left+this.window.pageXOffset,Ie=x.top+this.window.pageYOffset,at=this.offset();this.window.scrollTo(K-at[0],Ie-at[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const U=ji(this.window.history)||ji(Object.getPrototypeOf(this.window.history));return!(!U||!U.writable&&!U.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ji(b){return Object.getOwnPropertyDescriptor(b,"scrollRestoration")}class bo{}},529:(Bt,Fe,R)=>{R.d(Fe,{JF:()=>Pr,eN:()=>$e});var d=R(6895),F=R(4650),V=R(9646),ce=R(9751),ae=R(4351),we=R(9300),Ce=R(4004);class te{}class Pe{}class re{constructor(pe){this.normalizedNames=new Map,this.lazyUpdate=null,pe?this.lazyInit="string"==typeof pe?()=>{this.headers=new Map,pe.split("\n").forEach(fe=>{const nt=fe.indexOf(":");if(nt>0){const ut=fe.slice(0,nt),tn=ut.toLowerCase(),hn=fe.slice(nt+1).trim();this.maybeSetNormalizedName(ut,tn),this.headers.has(tn)?this.headers.get(tn).push(hn):this.headers.set(tn,[hn])}})}:()=>{this.headers=new Map,Object.keys(pe).forEach(fe=>{let nt=pe[fe];const ut=fe.toLowerCase();"string"==typeof nt&&(nt=[nt]),nt.length>0&&(this.headers.set(ut,nt),this.maybeSetNormalizedName(fe,ut))})}:this.headers=new Map}has(pe){return this.init(),this.headers.has(pe.toLowerCase())}get(pe){this.init();const fe=this.headers.get(pe.toLowerCase());return fe&&fe.length>0?fe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(pe){return this.init(),this.headers.get(pe.toLowerCase())||null}append(pe,fe){return this.clone({name:pe,value:fe,op:"a"})}set(pe,fe){return this.clone({name:pe,value:fe,op:"s"})}delete(pe,fe){return this.clone({name:pe,value:fe,op:"d"})}maybeSetNormalizedName(pe,fe){this.normalizedNames.has(fe)||this.normalizedNames.set(fe,pe)}init(){this.lazyInit&&(this.lazyInit instanceof re?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(pe=>this.applyUpdate(pe)),this.lazyUpdate=null))}copyFrom(pe){pe.init(),Array.from(pe.headers.keys()).forEach(fe=>{this.headers.set(fe,pe.headers.get(fe)),this.normalizedNames.set(fe,pe.normalizedNames.get(fe))})}clone(pe){const fe=new re;return fe.lazyInit=this.lazyInit&&this.lazyInit instanceof re?this.lazyInit:this,fe.lazyUpdate=(this.lazyUpdate||[]).concat([pe]),fe}applyUpdate(pe){const fe=pe.name.toLowerCase();switch(pe.op){case"a":case"s":let nt=pe.value;if("string"==typeof nt&&(nt=[nt]),0===nt.length)return;this.maybeSetNormalizedName(pe.name,fe);const ut=("a"===pe.op?this.headers.get(fe):void 0)||[];ut.push(...nt),this.headers.set(fe,ut);break;case"d":const tn=pe.value;if(tn){let hn=this.headers.get(fe);if(!hn)return;hn=hn.filter(Tn=>-1===tn.indexOf(Tn)),0===hn.length?(this.headers.delete(fe),this.normalizedNames.delete(fe)):this.headers.set(fe,hn)}else this.headers.delete(fe),this.normalizedNames.delete(fe)}}forEach(pe){this.init(),Array.from(this.normalizedNames.keys()).forEach(fe=>pe(this.normalizedNames.get(fe),this.headers.get(fe)))}}class me{encodeKey(pe){return wt(pe)}encodeValue(pe){return wt(pe)}decodeKey(pe){return decodeURIComponent(pe)}decodeValue(pe){return decodeURIComponent(pe)}}const ze=/%(\d[a-f0-9])/gi,We={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wt(rt){return encodeURIComponent(rt).replace(ze,(pe,fe)=>We[fe]??pe)}function Be(rt){return`${rt}`}class Me{constructor(pe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=pe.encoder||new me,pe.fromString){if(pe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qe(rt,pe){const fe=new Map;return rt.length>0&&rt.replace(/^\?/,"").split("&").forEach(ut=>{const tn=ut.indexOf("="),[hn,Tn]=-1==tn?[pe.decodeKey(ut),""]:[pe.decodeKey(ut.slice(0,tn)),pe.decodeValue(ut.slice(tn+1))],Ot=fe.get(hn)||[];Ot.push(Tn),fe.set(hn,Ot)}),fe}(pe.fromString,this.encoder)}else pe.fromObject?(this.map=new Map,Object.keys(pe.fromObject).forEach(fe=>{const nt=pe.fromObject[fe],ut=Array.isArray(nt)?nt.map(Be):[Be(nt)];this.map.set(fe,ut)})):this.map=null}has(pe){return this.init(),this.map.has(pe)}get(pe){this.init();const fe=this.map.get(pe);return fe?fe[0]:null}getAll(pe){return this.init(),this.map.get(pe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(pe,fe){return this.clone({param:pe,value:fe,op:"a"})}appendAll(pe){const fe=[];return Object.keys(pe).forEach(nt=>{const ut=pe[nt];Array.isArray(ut)?ut.forEach(tn=>{fe.push({param:nt,value:tn,op:"a"})}):fe.push({param:nt,value:ut,op:"a"})}),this.clone(fe)}set(pe,fe){return this.clone({param:pe,value:fe,op:"s"})}delete(pe,fe){return this.clone({param:pe,value:fe,op:"d"})}toString(){return this.init(),this.keys().map(pe=>{const fe=this.encoder.encodeKey(pe);return this.map.get(pe).map(nt=>fe+"="+this.encoder.encodeValue(nt)).join("&")}).filter(pe=>""!==pe).join("&")}clone(pe){const fe=new Me({encoder:this.encoder});return fe.cloneFrom=this.cloneFrom||this,fe.updates=(this.updates||[]).concat(pe),fe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(pe=>this.map.set(pe,this.cloneFrom.map.get(pe))),this.updates.forEach(pe=>{switch(pe.op){case"a":case"s":const fe=("a"===pe.op?this.map.get(pe.param):void 0)||[];fe.push(Be(pe.value)),this.map.set(pe.param,fe);break;case"d":if(void 0===pe.value){this.map.delete(pe.param);break}{let nt=this.map.get(pe.param)||[];const ut=nt.indexOf(Be(pe.value));-1!==ut&&nt.splice(ut,1),nt.length>0?this.map.set(pe.param,nt):this.map.delete(pe.param)}}}),this.cloneFrom=this.updates=null)}}class mt{constructor(){this.map=new Map}set(pe,fe){return this.map.set(pe,fe),this}get(pe){return this.map.has(pe)||this.map.set(pe,pe.defaultValue()),this.map.get(pe)}delete(pe){return this.map.delete(pe),this}has(pe){return this.map.has(pe)}keys(){return this.map.keys()}}function st(rt){return typeof ArrayBuffer<"u"&&rt instanceof ArrayBuffer}function ot(rt){return typeof Blob<"u"&&rt instanceof Blob}function Et(rt){return typeof FormData<"u"&&rt instanceof FormData}class be{constructor(pe,fe,nt,ut){let tn;if(this.url=fe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=pe.toUpperCase(),function ge(rt){switch(rt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ut?(this.body=void 0!==nt?nt:null,tn=ut):tn=nt,tn&&(this.reportProgress=!!tn.reportProgress,this.withCredentials=!!tn.withCredentials,tn.responseType&&(this.responseType=tn.responseType),tn.headers&&(this.headers=tn.headers),tn.context&&(this.context=tn.context),tn.params&&(this.params=tn.params)),this.headers||(this.headers=new re),this.context||(this.context=new mt),this.params){const hn=this.params.toString();if(0===hn.length)this.urlWithParams=fe;else{const Tn=fe.indexOf("?");this.urlWithParams=fe+(-1===Tn?"?":Tn<fe.length-1?"&":"")+hn}}else this.params=new Me,this.urlWithParams=fe}serializeBody(){return null===this.body?null:st(this.body)||ot(this.body)||Et(this.body)||function Ve(rt){return typeof URLSearchParams<"u"&&rt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Me?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Et(this.body)?null:ot(this.body)?this.body.type||null:st(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Me?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(pe={}){const fe=pe.method||this.method,nt=pe.url||this.url,ut=pe.responseType||this.responseType,tn=void 0!==pe.body?pe.body:this.body,hn=void 0!==pe.withCredentials?pe.withCredentials:this.withCredentials,Tn=void 0!==pe.reportProgress?pe.reportProgress:this.reportProgress;let Ot=pe.headers||this.headers,Nn=pe.params||this.params;const fn=pe.context??this.context;return void 0!==pe.setHeaders&&(Ot=Object.keys(pe.setHeaders).reduce((er,Nt)=>er.set(Nt,pe.setHeaders[Nt]),Ot)),pe.setParams&&(Nn=Object.keys(pe.setParams).reduce((er,Nt)=>er.set(Nt,pe.setParams[Nt]),Nn)),new be(fe,nt,tn,{params:Nn,headers:Ot,context:fn,reportProgress:Tn,responseType:ut,withCredentials:hn})}}var Re=(()=>((Re=Re||{})[Re.Sent=0]="Sent",Re[Re.UploadProgress=1]="UploadProgress",Re[Re.ResponseHeader=2]="ResponseHeader",Re[Re.DownloadProgress=3]="DownloadProgress",Re[Re.Response=4]="Response",Re[Re.User=5]="User",Re))();class gt{constructor(pe,fe=200,nt="OK"){this.headers=pe.headers||new re,this.status=void 0!==pe.status?pe.status:fe,this.statusText=pe.statusText||nt,this.url=pe.url||null,this.ok=this.status>=200&&this.status<300}}class ft extends gt{constructor(pe={}){super(pe),this.type=Re.ResponseHeader}clone(pe={}){return new ft({headers:pe.headers||this.headers,status:void 0!==pe.status?pe.status:this.status,statusText:pe.statusText||this.statusText,url:pe.url||this.url||void 0})}}class jt extends gt{constructor(pe={}){super(pe),this.type=Re.Response,this.body=void 0!==pe.body?pe.body:null}clone(pe={}){return new jt({body:void 0!==pe.body?pe.body:this.body,headers:pe.headers||this.headers,status:void 0!==pe.status?pe.status:this.status,statusText:pe.statusText||this.statusText,url:pe.url||this.url||void 0})}}class Vt extends gt{constructor(pe){super(pe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${pe.url||"(unknown url)"}`:`Http failure response for ${pe.url||"(unknown url)"}: ${pe.status} ${pe.statusText}`,this.error=pe.error||null}}function Vn(rt,pe){return{body:pe,headers:rt.headers,context:rt.context,observe:rt.observe,params:rt.params,reportProgress:rt.reportProgress,responseType:rt.responseType,withCredentials:rt.withCredentials}}let $e=(()=>{class rt{constructor(fe){this.handler=fe}request(fe,nt,ut={}){let tn;if(fe instanceof be)tn=fe;else{let Ot,Nn;Ot=ut.headers instanceof re?ut.headers:new re(ut.headers),ut.params&&(Nn=ut.params instanceof Me?ut.params:new Me({fromObject:ut.params})),tn=new be(fe,nt,void 0!==ut.body?ut.body:null,{headers:Ot,context:ut.context,params:Nn,reportProgress:ut.reportProgress,responseType:ut.responseType||"json",withCredentials:ut.withCredentials})}const hn=(0,V.of)(tn).pipe((0,ae.b)(Ot=>this.handler.handle(Ot)));if(fe instanceof be||"events"===ut.observe)return hn;const Tn=hn.pipe((0,we.h)(Ot=>Ot instanceof jt));switch(ut.observe||"body"){case"body":switch(tn.responseType){case"arraybuffer":return Tn.pipe((0,Ce.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ot.body}));case"blob":return Tn.pipe((0,Ce.U)(Ot=>{if(null!==Ot.body&&!(Ot.body instanceof Blob))throw new Error("Response is not a Blob.");return Ot.body}));case"text":return Tn.pipe((0,Ce.U)(Ot=>{if(null!==Ot.body&&"string"!=typeof Ot.body)throw new Error("Response is not a string.");return Ot.body}));default:return Tn.pipe((0,Ce.U)(Ot=>Ot.body))}case"response":return Tn;default:throw new Error(`Unreachable: unhandled observe type ${ut.observe}}`)}}delete(fe,nt={}){return this.request("DELETE",fe,nt)}get(fe,nt={}){return this.request("GET",fe,nt)}head(fe,nt={}){return this.request("HEAD",fe,nt)}jsonp(fe,nt){return this.request("JSONP",fe,{params:(new Me).append(nt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(fe,nt={}){return this.request("OPTIONS",fe,nt)}patch(fe,nt,ut={}){return this.request("PATCH",fe,Vn(ut,nt))}post(fe,nt,ut={}){return this.request("POST",fe,Vn(ut,nt))}put(fe,nt,ut={}){return this.request("PUT",fe,Vn(ut,nt))}}return rt.\u0275fac=function(fe){return new(fe||rt)(F.LFG(te))},rt.\u0275prov=F.Yz7({token:rt,factory:rt.\u0275fac}),rt})();class je{constructor(pe,fe){this.next=pe,this.interceptor=fe}handle(pe){return this.interceptor.intercept(pe,this.next)}}const Je=new F.OlP("HTTP_INTERCEPTORS");let Ge=(()=>{class rt{intercept(fe,nt){return nt.handle(fe)}}return rt.\u0275fac=function(fe){return new(fe||rt)},rt.\u0275prov=F.Yz7({token:rt,factory:rt.\u0275fac}),rt})();const Rn=/^\)\]\}',?\n/;let qt=(()=>{class rt{constructor(fe){this.xhrFactory=fe}handle(fe){if("JSONP"===fe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ce.y(nt=>{const ut=this.xhrFactory.build();if(ut.open(fe.method,fe.urlWithParams),fe.withCredentials&&(ut.withCredentials=!0),fe.headers.forEach((Yt,Jt)=>ut.setRequestHeader(Yt,Jt.join(","))),fe.headers.has("Accept")||ut.setRequestHeader("Accept","application/json, text/plain, */*"),!fe.headers.has("Content-Type")){const Yt=fe.detectContentTypeHeader();null!==Yt&&ut.setRequestHeader("Content-Type",Yt)}if(fe.responseType){const Yt=fe.responseType.toLowerCase();ut.responseType="json"!==Yt?Yt:"text"}const tn=fe.serializeBody();let hn=null;const Tn=()=>{if(null!==hn)return hn;const Yt=ut.statusText||"OK",Jt=new re(ut.getAllResponseHeaders()),On=function lr(rt){return"responseURL"in rt&&rt.responseURL?rt.responseURL:/^X-Request-URL:/m.test(rt.getAllResponseHeaders())?rt.getResponseHeader("X-Request-URL"):null}(ut)||fe.url;return hn=new ft({headers:Jt,status:ut.status,statusText:Yt,url:On}),hn},Ot=()=>{let{headers:Yt,status:Jt,statusText:On,url:qn}=Tn(),et=null;204!==Jt&&(et=typeof ut.response>"u"?ut.responseText:ut.response),0===Jt&&(Jt=et?200:0);let q=Jt>=200&&Jt<300;if("json"===fe.responseType&&"string"==typeof et){const H=et;et=et.replace(Rn,"");try{et=""!==et?JSON.parse(et):null}catch(_e){et=H,q&&(q=!1,et={error:_e,text:et})}}q?(nt.next(new jt({body:et,headers:Yt,status:Jt,statusText:On,url:qn||void 0})),nt.complete()):nt.error(new Vt({error:et,headers:Yt,status:Jt,statusText:On,url:qn||void 0}))},Nn=Yt=>{const{url:Jt}=Tn(),On=new Vt({error:Yt,status:ut.status||0,statusText:ut.statusText||"Unknown Error",url:Jt||void 0});nt.error(On)};let fn=!1;const er=Yt=>{fn||(nt.next(Tn()),fn=!0);let Jt={type:Re.DownloadProgress,loaded:Yt.loaded};Yt.lengthComputable&&(Jt.total=Yt.total),"text"===fe.responseType&&!!ut.responseText&&(Jt.partialText=ut.responseText),nt.next(Jt)},Nt=Yt=>{let Jt={type:Re.UploadProgress,loaded:Yt.loaded};Yt.lengthComputable&&(Jt.total=Yt.total),nt.next(Jt)};return ut.addEventListener("load",Ot),ut.addEventListener("error",Nn),ut.addEventListener("timeout",Nn),ut.addEventListener("abort",Nn),fe.reportProgress&&(ut.addEventListener("progress",er),null!==tn&&ut.upload&&ut.upload.addEventListener("progress",Nt)),ut.send(tn),nt.next({type:Re.Sent}),()=>{ut.removeEventListener("error",Nn),ut.removeEventListener("abort",Nn),ut.removeEventListener("load",Ot),ut.removeEventListener("timeout",Nn),fe.reportProgress&&(ut.removeEventListener("progress",er),null!==tn&&ut.upload&&ut.upload.removeEventListener("progress",Nt)),ut.readyState!==ut.DONE&&ut.abort()}})}}return rt.\u0275fac=function(fe){return new(fe||rt)(F.LFG(d.JF))},rt.\u0275prov=F.Yz7({token:rt,factory:rt.\u0275fac}),rt})();const on=new F.OlP("XSRF_COOKIE_NAME"),Cn=new F.OlP("XSRF_HEADER_NAME");class jn{}let br=(()=>{class rt{constructor(fe,nt,ut){this.doc=fe,this.platform=nt,this.cookieName=ut,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const fe=this.doc.cookie||"";return fe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,d.Mx)(fe,this.cookieName),this.lastCookieString=fe),this.lastToken}}return rt.\u0275fac=function(fe){return new(fe||rt)(F.LFG(d.K0),F.LFG(F.Lbi),F.LFG(on))},rt.\u0275prov=F.Yz7({token:rt,factory:rt.\u0275fac}),rt})(),_r=(()=>{class rt{constructor(fe,nt){this.tokenService=fe,this.headerName=nt}intercept(fe,nt){const ut=fe.url.toLowerCase();if("GET"===fe.method||"HEAD"===fe.method||ut.startsWith("http://")||ut.startsWith("https://"))return nt.handle(fe);const tn=this.tokenService.getToken();return null!==tn&&!fe.headers.has(this.headerName)&&(fe=fe.clone({headers:fe.headers.set(this.headerName,tn)})),nt.handle(fe)}}return rt.\u0275fac=function(fe){return new(fe||rt)(F.LFG(jn),F.LFG(Cn))},rt.\u0275prov=F.Yz7({token:rt,factory:rt.\u0275fac}),rt})(),xt=(()=>{class rt{constructor(fe,nt){this.backend=fe,this.injector=nt,this.chain=null}handle(fe){if(null===this.chain){const nt=this.injector.get(Je,[]);this.chain=nt.reduceRight((ut,tn)=>new je(ut,tn),this.backend)}return this.chain.handle(fe)}}return rt.\u0275fac=function(fe){return new(fe||rt)(F.LFG(Pe),F.LFG(F.zs3))},rt.\u0275prov=F.Yz7({token:rt,factory:rt.\u0275fac}),rt})(),ar=(()=>{class rt{static disable(){return{ngModule:rt,providers:[{provide:_r,useClass:Ge}]}}static withOptions(fe={}){return{ngModule:rt,providers:[fe.cookieName?{provide:on,useValue:fe.cookieName}:[],fe.headerName?{provide:Cn,useValue:fe.headerName}:[]]}}}return rt.\u0275fac=function(fe){return new(fe||rt)},rt.\u0275mod=F.oAB({type:rt}),rt.\u0275inj=F.cJS({providers:[_r,{provide:Je,useExisting:_r,multi:!0},{provide:jn,useClass:br},{provide:on,useValue:"XSRF-TOKEN"},{provide:Cn,useValue:"X-XSRF-TOKEN"}]}),rt})(),Pr=(()=>{class rt{}return rt.\u0275fac=function(fe){return new(fe||rt)},rt.\u0275mod=F.oAB({type:rt}),rt.\u0275inj=F.cJS({providers:[$e,{provide:te,useClass:xt},qt,{provide:Pe,useExisting:qt}],imports:[ar.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),rt})()},4650:(Bt,Fe,R)=>{R.d(Fe,{$8M:()=>_n,$Z:()=>Uh,AFp:()=>xE,ALo:()=>Y0,AaK:()=>te,AsE:()=>rg,CHM:()=>jo,CRH:()=>aE,CZH:()=>Dy,CqO:()=>mf,D6c:()=>PD,DdM:()=>H0,EJc:()=>ZI,EpF:()=>Im,F4k:()=>Dm,FYo:()=>Cd,FiY:()=>Dr,G48:()=>gD,Gf:()=>sE,GfV:()=>Mg,Gpc:()=>ue,JOm:()=>ns,KtG:()=>Yi,LFG:()=>Vi,LSH:()=>Kl,Lbi:()=>zI,Lck:()=>jw,MMx:()=>a_,NdJ:()=>Yp,O4$:()=>Er,OlP:()=>Mr,Oqu:()=>Jc,PXZ:()=>lD,Q6J:()=>pf,QGY:()=>qd,QP$:()=>ht,Qsj:()=>Qy,R0b:()=>Au,RDi:()=>mg,Rgc:()=>dg,SBq:()=>ec,Sil:()=>YI,Suo:()=>oE,TTD:()=>ea,TgZ:()=>Zd,Tol:()=>tg,VKq:()=>G0,X6Q:()=>pD,XFs:()=>xt,Xpm:()=>qn,Xts:()=>$f,Y36:()=>wl,YKP:()=>N0,YNc:()=>Wp,Yjl:()=>Z,Yz7:()=>zt,Z0I:()=>mn,ZZ4:()=>O_,_Bn:()=>P0,_UZ:()=>Rs,_Vd:()=>Jl,_c5:()=>RD,_uU:()=>Hm,aQg:()=>P_,c2e:()=>WI,cJS:()=>nn,cg1:()=>cy,dDg:()=>sD,dqk:()=>ut,eFA:()=>HE,ekj:()=>_f,eoX:()=>BE,f3M:()=>Fl,g9A:()=>OE,h0i:()=>Sf,hGG:()=>OD,hij:()=>Df,iGM:()=>iE,ifc:()=>nt,ip1:()=>ME,jDz:()=>F0,kL8:()=>dy,kcU:()=>Mo,lG2:()=>ie,lcZ:()=>Q0,lqb:()=>ql,lri:()=>VE,n5z:()=>kn,oAB:()=>_e,oxw:()=>Qp,q4F:()=>Yf,qLn:()=>Vc,qOj:()=>Gd,qZA:()=>Ai,rWj:()=>UE,sBO:()=>mD,sIi:()=>zd,s_b:()=>Ey,soG:()=>Cy,tb:()=>PE,tp0:()=>vi,uIk:()=>Kc,vHH:()=>We,vpe:()=>Ol,wAp:()=>Wn,xi3:()=>J0,xp6:()=>xs,z2F:()=>by,zSh:()=>bh,zs3:()=>Qa});var d=R(7579),F=R(727),V=R(9751),ce=R(6451),ae=R(3099);function we(n){for(let r in n)if(n[r]===we)return r;throw Error("Could not find renamed property on target object.")}function Ce(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function te(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(te).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Pe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const re=we({__forward_ref__:we});function ue(n){return n.__forward_ref__=ue,n.toString=function(){return te(this())},n}function me(n){return qe(n)?n():n}function qe(n){return"function"==typeof n&&n.hasOwnProperty(re)&&n.__forward_ref__===ue}class We extends Error{constructor(r,o){super(function wt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function Be(n){return"string"==typeof n?n:null==n?"":String(n)}function st(n,r){throw new We(-201,!1)}function Ge(n,r){null==n&&function Xe(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function zt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function ln(n){return Rn(n,Cn)||Rn(n,br)}function mn(n){return null!==ln(n)}function Rn(n,r){return n.hasOwnProperty(r)?n[r]:null}function on(n){return n&&(n.hasOwnProperty(jn)||n.hasOwnProperty(_r))?n[jn]:null}const Cn=we({\u0275prov:we}),jn=we({\u0275inj:we}),br=we({ngInjectableDef:we}),_r=we({ngInjectorDef:we});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let bn;function ar(n){const r=bn;return bn=n,r}function Pr(n,r,o){const u=ln(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&xt.Optional?null:void 0!==r?r:void st(te(n))}function Zn(n){return{toString:n}.toString()}var rt=(()=>((rt=rt||{})[rt.OnPush=0]="OnPush",rt[rt.Default=1]="Default",rt))(),nt=(()=>{return(n=nt||(nt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",nt;var n})();const ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tn={},Ot=[],Nn=we({\u0275cmp:we}),fn=we({\u0275dir:we}),er=we({\u0275pipe:we}),Nt=we({\u0275mod:we}),Yt=we({\u0275fac:we}),Jt=we({__NG_ELEMENT_ID__:we});let On=0;function qn(n){return Zn(()=>{const o=!0===n.standalone,u={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===rt.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||nt.Emulated,id:"c"+On++,styles:n.styles||Ot,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.dependencies,m=n.features;return l.inputs=ee(n.inputs,u),l.outputs=ee(n.outputs),m&&m.forEach(C=>C(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(q).filter(H):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(Te).filter(H):null,l})}function q(n){return z(n)||G(n)}function H(n){return null!==n}function _e(n){return Zn(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ee(n,r){if(null==n)return Tn;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,r&&(r[l]=f)}return o}const ie=qn;function Z(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function z(n){return n[Nn]||null}function G(n){return n[fn]||null}function Te(n){return n[er]||null}function ht(n){const r=z(n)||G(n)||Te(n);return null!==r&&r.standalone}function Ft(n,r){const o=n[Nt]||null;if(!o&&!0===r)throw new Error(`Type ${te(n)} does not have '\u0275mod' property.`);return o}function Zr(n){return Array.isArray(n)&&"object"==typeof n[1]}function $r(n){return Array.isArray(n)&&!0===n[1]}function Ks(n){return 0!=(8&n.flags)}function Xr(n){return 2==(2&n.flags)}function os(n){return 1==(1&n.flags)}function kr(n){return null!==n.template}function Bi(n){return 0!=(256&n[2])}function ci(n,r){return n.hasOwnProperty(Yt)?n[Yt]:null}class di{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ea(){return as}function as(n){return n.type.prototype.ngOnChanges&&(n.setInput=us),Lo}function Lo(){const n=Co(this),r=n?.current;if(r){const o=n.previous;if(o===Tn)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function us(n,r,o,u){const l=Co(n)||function Ls(n,r){return n[Vo]=r}(n,{previous:Tn,current:null}),f=l.current||(l.current={}),m=l.previous,C=this.declaredInputs[o],S=m[C];f[C]=new di(S&&S.currentValue,r,m===Tn),n[u]=r}ea.ngInherit=!0;const Vo="__ngSimpleChanges__";function Co(n){return n[Vo]||null}function pr(n){for(;Array.isArray(n);)n=n[0];return n}function ji(n,r){return pr(r[n])}function hi(n,r){return pr(r[n.index])}function bo(n,r){return n.data[r]}function ki(n,r){return n[r]}function ti(n,r){const o=r[n];return Zr(o)?o:o[0]}function Uo(n){return 64==(64&n[2])}function gi(n,r){return null==r?null:n[r]}function zr(n){n[18]=0}function Es(n,r){n[5]+=r;let o=n,u=n[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const Pn={lFrame:fo(null),bindingsEnabled:!0};function To(){return Pn.bindingsEnabled}function Dt(){return Pn.lFrame.lView}function Xn(){return Pn.lFrame.tView}function jo(n){return Pn.lFrame.contextLView=n,n[8]}function Yi(n){return Pn.lFrame.contextLView=null,n}function Or(){let n=k();for(;null!==n&&64===n.type;)n=n.parent;return n}function k(){return Pn.lFrame.currentTNode}function M(n,r){const o=Pn.lFrame;o.currentTNode=n,o.isParent=r}function Y(){return Pn.lFrame.isParent}function mi(){const n=Pn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Bs(){return Pn.lFrame.bindingIndex++}function ni(n){const r=Pn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function va(n,r){const o=Pn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ho(r)}function Ho(n){Pn.lFrame.currentDirectiveIndex=n}function Ao(){return Pn.lFrame.currentQueryIndex}function Fi(n){Pn.lFrame.currentQueryIndex=n}function js(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function _a(n,r,o){if(o&xt.SkipSelf){let l=r,f=n;for(;!(l=l.parent,null!==l||o&xt.Host||(l=js(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;r=l,n=f}const u=Pn.lFrame=zo();return u.currentTNode=r,u.lView=n,!0}function eo(n){const r=zo(),o=n[1];Pn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function zo(){const n=Pn.lFrame,r=null===n?null:n.child;return null===r?fo(n):r}function fo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function So(){const n=Pn.lFrame;return Pn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xi=So;function ds(){const n=So();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gr(){return Pn.lFrame.selectedIndex}function Ii(n){Pn.lFrame.selectedIndex=n}function vr(){const n=Pn.lFrame;return bo(n.tView,n.selectedIndex)}function Er(){Pn.lFrame.currentNamespace="svg"}function Mo(){!function Ri(){Pn.lFrame.currentNamespace=null}()}function Cs(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:L,ngOnDestroy:Q}=f;m&&(n.contentHooks||(n.contentHooks=[])).push(-o,m),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),S&&(n.viewHooks||(n.viewHooks=[])).push(-o,S),L&&((n.viewHooks||(n.viewHooks=[])).push(o,L),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,L)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Q)}}function to(n,r,o){$i(n,r,3,o)}function ia(n,r,o,u){(3&n[2])===o&&$i(n,r,o,u)}function hs(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function $i(n,r,o,u){const f=u??-1,m=r.length-1;let C=0;for(let S=void 0!==u?65535&n[18]:0;S<m;S++)if("number"==typeof r[S+1]){if(C=r[S],null!=u&&C>=u)break}else r[S]<0&&(n[18]+=65536),(C<f||-1==f)&&(Di(n,o,r,S),n[18]=(4294901760&n[18])+S+2),S++}function Di(n,r,o,u){const l=o[u]<0,f=o[u+1],C=n[l?-o[u]:o[u]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class no{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function K(n,r,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],m=o[u++],C=o[u++];n.setAttribute(r,m,C,f)}else{const f=l,m=o[++u];at(f)?n.setProperty(r,f,m):n.setAttribute(r,f,m),u++}}return u}function Ie(n){return 3===n||4===n||6===n}function at(n){return 64===n.charCodeAt(0)}function _t(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const l=r[u];"number"==typeof l?o=l:0===o||vn(n,o,l,null,-1===o||2===o?r[++u]:null)}}return n}function vn(n,r,o,u,l){let f=0,m=n.length;if(-1===r)m=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===r){m=-1;break}if(C>r){m=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==l&&(n[f+1]=l));if(u===n[f+1])return void(n[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==m&&(n.splice(m,0,r),f=m+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==l&&n.splice(f++,0,l)}function mr(n){return-1!==n}function rr(n){return 32767&n}function In(n,r){let o=function wr(n){return n>>16}(n),u=r;for(;o>0;)u=u[15],o--;return u}let Sr=!0;function Hn(n){const r=Sr;return Sr=n,r}let Ir=0;const Vr={};function en(n,r){const o=sa(n,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,pn(u.data,n),pn(r,null),pn(u.blueprint,null));const l=Kt(n,r),f=n.injectorIndex;if(mr(l)){const m=rr(l),C=In(l,r),S=C[1].data;for(let L=0;L<8;L++)r[f+L]=C[m+L]|S[m+L]}return r[f+8]=l,f}function pn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function sa(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Kt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=r;for(;null!==l;){if(u=Hr(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function tt(n,r,o){!function go(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Jt)&&(u=o[Jt]),null==u&&(u=o[Jt]=Ir++);const l=255&u;r.data[n+(l>>5)]|=1<<l}(n,r,o)}function ri(n,r,o){if(o&xt.Optional||void 0!==n)return n;st()}function Su(n,r,o,u){if(o&xt.Optional&&void 0===u&&(u=null),0==(o&(xt.Self|xt.Host))){const l=n[9],f=ar(void 0);try{return l?l.get(r,u,o&xt.Optional):Pr(r,u,o&xt.Optional)}finally{ar(f)}}return ri(u,0,o)}function Mu(n,r,o,u=xt.Default,l){if(null!==n){if(1024&r[2]){const m=function ja(n,r,o,u,l){let f=n,m=r;for(;null!==f&&null!==m&&1024&m[2]&&!(256&m[2]);){const C=wa(f,m,o,u|xt.Self,Vr);if(C!==Vr)return C;let S=f.parent;if(!S){const L=m[21];if(L){const Q=L.get(o,Vr,u);if(Q!==Vr)return Q}S=Hr(m),m=m[15]}f=S}return l}(n,r,o,u,Vr);if(m!==Vr)return m}const f=wa(n,r,o,u,Vr);if(f!==Vr)return f}return Su(r,o,u,l)}function wa(n,r,o,u,l){const f=function Pl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Jt)?n[Jt]:void 0;return"number"==typeof r?r>=0?255&r:yi:r}(o);if("function"==typeof f){if(!_a(r,n,u))return u&xt.Host?ri(l,0,u):Su(r,o,u,l);try{const m=f(u);if(null!=m||u&xt.Optional)return m;st()}finally{xi()}}else if("number"==typeof f){let m=null,C=sa(n,r),S=-1,L=u&xt.Host?r[16][6]:null;for((-1===C||u&xt.SkipSelf)&&(S=-1===C?Kt(n,r):r[C+8],-1!==S&&Ko(u,!1)?(m=r[1],C=rr(S),r=In(S,r)):C=-1);-1!==C;){const Q=r[1];if(Nl(f,C,Q.data)){const le=tl(C,r,o,m,u,L);if(le!==Vr)return le}S=r[C+8],-1!==S&&Ko(u,r[1].data[C+8]===L)&&Nl(f,C,r)?(m=Q,C=rr(S),r=In(S,r)):C=-1}}return l}function tl(n,r,o,u,l,f){const m=r[1],C=m.data[n+8],Q=Ba(C,m,o,null==u?Xr(C)&&Sr:u!=m&&0!=(3&C.type),l&xt.Host&&f===C);return null!==Q?oa(r,m,Q,C):Vr}function Ba(n,r,o,u,l){const f=n.providerIndexes,m=r.data,C=1048575&f,S=n.directiveStart,Q=f>>20,Se=l?C+Q:n.directiveEnd;for(let Qe=u?C:C+Q;Qe<Se;Qe++){const Tt=m[Qe];if(Qe<S&&o===Tt||Qe>=S&&Tt.type===o)return Qe}if(l){const Qe=m[S];if(Qe&&kr(Qe)&&Qe.type===o)return S}return null}function oa(n,r,o,u){let l=n[o];const f=r.data;if(function Wo(n){return n instanceof no}(l)){const m=l;m.resolving&&function Ct(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new We(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Me(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Be(n)}(f[o]));const C=Hn(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?ar(m.injectImpl):null;_a(n,u,xt.Default);try{l=n[o]=m.factory(void 0,f,n,u),r.firstCreatePass&&o>=u.directiveStart&&function Ds(n,r,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=r.type.prototype;if(u){const m=as(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,l),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],r)}finally{null!==S&&ar(S),Hn(C),m.resolving=!1,xi()}}return l}function Nl(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Ko(n,r){return!(n&xt.Self||n&xt.Host&&r)}class ii{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return Mu(this._tNode,this._lView,r,u,o)}}function yi(){return new ii(Or(),Dt())}function kn(n){return Zn(()=>{const r=n.prototype.constructor,o=r[Yt]||bs(r),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const f=l[Yt]||bs(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function bs(n){return qe(n)?()=>{const r=bs(me(n));return r&&r()}:ci(n)}function Hr(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function _n(n){return function Rt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(Ie(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===r)return o[l+1];l+=2}}}return null}(Or(),n)}const Sn="__parameters__";function Ji(n,r,o){return Zn(()=>{const u=function Zt(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(r);function l(...f){if(this instanceof l)return u.apply(this,f),this;const m=new l(...f);return C.annotation=m,C;function C(S,L,Q){const le=S.hasOwnProperty(Sn)?S[Sn]:Object.defineProperty(S,Sn,{value:[]})[Sn];for(;le.length<=Q;)le.push(null);return(le[Q]=le[Q]||[]).push(m),S}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Mr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=zt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ci(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(r===n&&(r=n.slice(0,o)),Ci(u,r)):r!==n&&r.push(u)}return r}function Li(n,r){n.forEach(o=>Array.isArray(o)?Li(o,r):r(o))}function iu(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function $s(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function _(n,r,o){let u=y(n,r);return u>=0?n[1|u]=o:(u=~u,function kl(n,r,o,u){let l=n.length;if(l==r)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function E(n,r){const o=y(n,r);if(o>=0)return n[1|o]}function y(n,r){return function P(n,r,o){let u=0,l=n.length>>o;for(;l!==u;){const f=u+(l-u>>1),m=n[f<<o];if(r===m)return f<<o;m>r?l=f:u=f+1}return~(l<<o)}(n,r,1)}const fi={},oo="__NG_DI_FLAG__",Qr="ngTempTokenPath",Ta=/\n/gm,il="__source";let ou;function Ss(n){const r=ou;return ou=n,r}function au(n,r=xt.Default){if(void 0===ou)throw new We(-203,!1);return null===ou?Pr(n,void 0,r):ou.get(n,r&xt.Optional?null:void 0,r)}function Vi(n,r=xt.Default){return(function $n(){return bn}()||au)(me(n),r)}function Fl(n,r=xt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Vi(n,r)}function sl(n){const r=[];for(let o=0;o<n.length;o++){const u=me(n[o]);if(Array.isArray(u)){if(0===u.length)throw new We(900,!1);let l,f=xt.Default;for(let m=0;m<u.length;m++){const C=u[m],S=Hi(C);"number"==typeof S?-1===S?l=C.token:f|=S:l=C}r.push(Vi(l,f))}else r.push(Vi(u))}return r}function ua(n,r){return n[oo]=r,n.prototype[oo]=r,n}function Hi(n){return n[oo]}const Dr=ua(Ji("Optional"),8),vi=ua(Ji("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const se=new Map;let ve=0;const _i="__ngContext__";function Ui(n,r){Zr(r)?(n[_i]=r[20],function dt(n){se.set(n[20],n)}(r)):n[_i]=r}function hl(n,r){return undefined(n,r)}function fl(n){const r=n[3];return $r(r)?r[3]:r}function Ac(n){return h(n[13])}function v(n){return h(n[4])}function h(n){for(;null!==n&&!$r(n);)n=n[4];return n}function I(n,r,o,u,l){if(null!=u){let f,m=!1;$r(u)?f=u:Zr(u)&&(m=!0,u=u[0]);const C=pr(u);0===n&&null!==o?null==l?ad(r,o,C):qa(r,o,C,l||null,!0):1===n&&null!==o?qa(r,o,C,l||null,!0):2===n?function hh(n,r,o){const u=ld(n,r);u&&function ud(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}(r,C,m):3===n&&r.destroyNode(C),null!=f&&function My(n,r,o,u,l){const f=o[7];f!==pr(o)&&I(r,n,u,f,l);for(let C=10;C<o.length;C++){const S=o[C];Mc(S[1],S,n,r,u,f)}}(r,n,f,o,l)}}function ct(n,r,o){return n.createElement(r,o)}function $l(n,r){const o=n[9],u=o.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Es(l,-1)),o.splice(u,1)}function Ms(n,r){if(n.length<=10)return;const o=10+r,u=n[o];if(u){const l=u[17];null!==l&&l!==n&&$l(l,u),r>0&&(n[o-1][4]=u[4]);const f=$s(n,10+r);!function Ht(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const m=f[19];null!==m&&m.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Hl(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Mc(n,r,o,3,null,null),function yr(n){let r=n[13];if(!r)return mu(n[1],n);for(;r;){let o=null;if(Zr(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==n;)Zr(r)&&mu(r[1],r),r=r[3];null===r&&(r=n),Zr(r)&&mu(r[1],r),o=r&&r[4]}r=o}}(r)}}function mu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Xo(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=r[o[u]];if(!(l instanceof no)){const f=o[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const C=l[f[m]],S=f[m+1];try{S.call(C)}finally{}}else try{f.call(l)}finally{}}}}(n,r),function od(n,r){const o=n.cleanup,u=r[7];let l=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const m=o[f+1],C="function"==typeof m?m(r):pr(r[m]),S=u[l=o[f+2]],L=o[f+3];"boolean"==typeof L?C.removeEventListener(o[f],S,L):L>=0?u[l=L]():u[l=-L].unsubscribe(),f+=2}else{const m=u[l=o[f+1]];o[f].call(m)}if(null!==u){for(let f=l+1;f<u.length;f++)(0,u[f])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&$r(r[3])){o!==r[3]&&$l(o,r);const u=r[19];null!==u&&u.detachView(n)}!function Qt(n){se.delete(n[20])}(r)}}function Sc(n,r,o){return function ju(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const l=n.data[u.directiveStart].encapsulation;if(l===nt.None||l===nt.Emulated)return null}return hi(u,o)}(n,r.parent,o)}function qa(n,r,o,u,l){n.insertBefore(r,o,u,l)}function ad(n,r,o){n.appendChild(r,o)}function ur(n,r,o,u,l){null!==u?qa(n,r,o,u,l):ad(n,r,o)}function ld(n,r){return n.parentNode(r)}let Ya,pg=function cd(n,r,o){return 40&n.type?hi(n,o):null};function $u(n,r,o,u){const l=Sc(n,u,r),f=r[11],C=function Pf(n,r,o){return pg(n,r,o)}(u.parent||r[6],u,r);if(null!=l)if(Array.isArray(o))for(let S=0;S<o.length;S++)ur(f,l,o[S],C,!1);else ur(f,l,o,C,!1)}function yu(n,r){if(null!==r){const o=r.type;if(3&o)return hi(r,n);if(4&o)return Hu(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return yu(n,u);{const l=n[r.index];return $r(l)?Hu(-1,l):pr(l)}}if(32&o)return hl(r,n)()||pr(n[r.index]);{const u=Ff(n,r);return null!==u?Array.isArray(u)?u[0]:yu(fl(n[16]),u):yu(n,r.next)}}return null}function Ff(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Hu(n,r){const o=10+n+1;if(o<r.length){const u=r[o],l=u[1].firstChild;if(null!==l)return yu(u,l)}return r[7]}function pl(n,r,o,u,l,f,m){for(;null!=o;){const C=u[o.index],S=o.type;if(m&&0===r&&(C&&Ui(pr(C),u),o.flags|=4),64!=(64&o.flags))if(8&S)pl(n,r,o.child,u,l,f,!1),I(r,n,l,C,f);else if(32&S){const L=hl(o,u);let Q;for(;Q=L();)I(r,n,l,Q,f);I(r,n,l,C,f)}else 16&S?xc(n,r,u,o,l,f):I(r,n,l,C,f);o=m?o.projectionNext:o.next}}function Mc(n,r,o,u,l,f){pl(o,u,n.firstChild,r,l,f,!1)}function xc(n,r,o,u,l,f){const m=o[16],S=m[6].projection[u.projection];if(Array.isArray(S))for(let L=0;L<S.length;L++)I(r,n,l,S[L],f);else pl(n,r,S,m[3],l,f,!0)}function Ti(n,r,o){n.setAttribute(r,"style",o)}function Rc(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function mg(n){Ya=n}class yh{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Gu(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rs=(()=>((rs=rs||{})[rs.NONE=0]="NONE",rs[rs.HTML=1]="HTML",rs[rs.STYLE=2]="STYLE",rs[rs.SCRIPT=3]="SCRIPT",rs[rs.URL=4]="URL",rs[rs.RESOURCE_URL=5]="RESOURCE_URL",rs))();function Kl(n){const r=function Ed(){const n=Dt();return n&&n[12]}();return r?r.sanitize(rs.URL,n)||"":function Wl(n,r){const o=function vh(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?Gu(n):function Eh(n){return(n=String(n)).match(_g)?n:"unsafe:"+n}(Be(n))}const $f=new Mr("ENVIRONMENT_INITIALIZER"),zu=new Mr("INJECTOR",-1),Zl=new Mr("INJECTOR_DEF_TYPES");class Hf{get(r,o=fi){if(o===fi){const u=new Error(`NullInjectorError: No provider for ${te(r)}!`);throw u.name="NullInjectorError",u}return o}}function Gy(...n){return{\u0275providers:Gf(0,n)}}function Gf(n,...r){const o=[],u=new Set;let l;return Li(r,f=>{const m=f;Ch(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&Eu(l,o),o}function Eu(n,r){for(let o=0;o<n.length;o++){const{providers:l}=n[o];Li(l,f=>{r.push(f)})}}function Ch(n,r,o,u){if(!(n=me(n)))return!1;let l=null,f=on(n);const m=!f&&z(n);if(f||m){if(m&&!m.standalone)return!1;l=n}else{const S=n.ngModule;if(f=on(S),!f)return!1;l=S}const C=u.has(l);if(m){if(C)return!1;if(u.add(l),m.dependencies){const S="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const L of S)Ch(L,r,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let L;u.add(l);try{Li(f.imports,Q=>{Ch(Q,r,o,u)&&(L||(L=[]),L.push(Q))})}finally{}void 0!==L&&Eu(L,r)}if(!C){const L=ci(l)||(()=>new l);r.push({provide:l,useFactory:L,deps:Ot},{provide:Zl,useValue:l,multi:!0},{provide:$f,useValue:()=>Vi(l),multi:!0})}const S=f.providers;null==S||C||Li(S,Q=>{r.push(Q)})}}return l!==n&&void 0!==n.providers}const bg=we({provide:String,useValue:we});function Nc(n){return null!==n&&"object"==typeof n&&bg in n}function fa(n){return"function"==typeof n}const bh=new Mr("Set Injector scope."),kc={},zf={};let Th;function Id(){return void 0===Th&&(Th=new Hf),Th}class ql{}class Wf extends ql{constructor(r,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yl(r,m=>this.processProvider(m)),this.records.set(zu,Fc(void 0,this)),l.has("environment")&&this.records.set(ql,Fc(void 0,this));const f=this.records.get(bh);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Zl.multi,Ot,xt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ss(this),u=ar(void 0);try{return r()}finally{Ss(o),ar(u)}}get(r,o=fi,u=xt.Default){this.assertNotDestroyed();const l=Ss(this),f=ar(void 0);try{if(!(u&xt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const S=function Wy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Mr}(r)&&ln(r);C=S&&this.injectableDefInScope(S)?Fc(Ah(r),kc):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(u&xt.Self?Id():this.parent).get(r,o=u&xt.Optional&&o===fi?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Qr]=m[Qr]||[]).unshift(te(r)),l)throw m;return function Sa(n,r,o,u){const l=n[Qr];throw r[il]&&l.unshift(r[il]),n.message=function Wa(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=te(r);if(Array.isArray(r))l=r.map(te).join(" -> ");else if("object"==typeof r){let f=[];for(let m in r)if(r.hasOwnProperty(m)){let C=r[m];f.push(m+":"+("string"==typeof C?JSON.stringify(C):te(C)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(Ta,"\n  ")}`}("\n"+n.message,l,o,u),n.ngTokenPath=l,n[Qr]=null,n}(m,r,"R3InjectorError",this.source)}throw m}finally{ar(f),Ss(l)}}resolveInjectorInitializers(){const r=Ss(this),o=ar(void 0);try{const u=this.get($f.multi,Ot,xt.Self);for(const l of u)l()}finally{Ss(r),ar(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(te(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new We(205,!1)}processProvider(r){let o=fa(r=me(r))?r:me(r&&r.provide);const u=function Dd(n){return Nc(n)?Fc(void 0,n.useValue):Fc(_l(n),kc)}(r);if(fa(r)||!0!==r.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Fc(void 0,kc,!0),l.factory=()=>sl(l.multi),this.records.set(o,l)),o=r,l.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kc&&(o.value=zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function zy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=me(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ah(n){const r=ln(n),o=null!==r?r.factory:ci(n);if(null!==o)return o;if(n instanceof Mr)throw new We(204,!1);if(n instanceof Function)return function Sh(n){const r=n.length;if(r>0)throw function ba(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}(r,"?"),new We(204,!1);const o=function lr(n){const r=n&&(n[Cn]||n[br]);if(r){const o=function qt(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new We(204,!1)}function _l(n,r,o){let u;if(fa(n)){const l=me(n);return ci(l)||Ah(l)}if(Nc(n))u=()=>me(n.useValue);else if(function vl(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...sl(n.deps||[]));else if(function yl(n){return!(!n||!n.useExisting)}(n))u=()=>Vi(me(n.useExisting));else{const l=me(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return ci(l)||Ah(l);u=()=>new l(...sl(n.deps))}return u}function Fc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ky(n){return!!n.\u0275providers}function Yl(n,r){for(const o of n)Array.isArray(o)?Yl(o,r):Ky(o)?Yl(o.\u0275providers,r):r(o)}class Wu{}class qy{resolveComponentFactory(r){throw function Ag(n){const r=Error(`No component factory found for ${te(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jl=(()=>{class n{}return n.NULL=new qy,n})();function Kf(){return Xl(Or(),Dt())}function Xl(n,r){return new ec(hi(n,r))}let ec=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Kf,n})();function Zf(n){return n instanceof ec?n.nativeElement:n}class Cd{}let Qy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function qf(){const n=Dt(),o=ti(Or().index,n);return(Zr(o)?o:n)[11]}(),n})(),Mh=(()=>{class n{}return n.\u0275prov=zt({token:n,providedIn:"root",factory:()=>null}),n})();class Mg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Yf=new Mg("14.3.0"),tc={};function xh(n){return n.ngOriginalError}class Vc{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&xh(r);for(;o&&xh(o);)o=xh(o);return o||null}}function Po(n){return n instanceof Function?n():n}function Jf(n,r,o){let u=n.length;for(;;){const l=n.indexOf(r,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const f=r.length;if(l+f===u||n.charCodeAt(l+f)<=32)return l}o=l+1}}const Xf="ng-template";function ev(n,r,o){let u=0;for(;u<n.length;){let l=n[u++];if(o&&"class"===l){if(l=n[u],-1!==Jf(l.toLowerCase(),r,0))return!0}else if(1===l){for(;u<n.length&&"string"==typeof(l=n[u++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Td(n){return 4===n.type&&n.value!==Xf}function Og(n,r,o){return r===(4!==n.type||o?n.value:Xf)}function tv(n,r,o){let u=4;const l=n.attrs||[],f=function Ad(n){for(let r=0;r<n.length;r++)if(Ie(n[r]))return r;return n.length}(l);let m=!1;for(let C=0;C<r.length;C++){const S=r[C];if("number"!=typeof S){if(!m)if(4&u){if(u=2|1&u,""!==S&&!Og(n,S,o)||""===S&&1===r.length){if(Na(u))return!1;m=!0}}else{const L=8&u?S:r[++C];if(8&u&&null!==n.attrs){if(!ev(n.attrs,L,o)){if(Na(u))return!1;m=!0}continue}const le=nv(8&u?"class":S,l,Td(n),o);if(-1===le){if(Na(u))return!1;m=!0;continue}if(""!==L){let Se;Se=le>f?"":l[le+1].toLowerCase();const Qe=8&u?Se:null;if(Qe&&-1!==Jf(Qe,L,0)||2&u&&L!==Se){if(Na(u))return!1;m=!0}}}}else{if(!m&&!Na(u)&&!Na(S))return!1;if(m&&Na(S))continue;m=!1,u=S|1&u}}return Na(u)||m}function Na(n){return 0==(1&n)}function nv(n,r,o,u){if(null===r)return-1;let l=0;if(u||!o){let f=!1;for(;l<r.length;){const m=r[l];if(m===n)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function Pg(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ep(n,r,o=!1){for(let u=0;u<r.length;u++)if(tv(n,r[u],o))return!0;return!1}function kg(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],o=1,u=2,l="",f=!1;for(;o<n.length;){let m=n[o];if("string"==typeof m)if(2&u){const C=n[++o];l+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Na(m)&&(r+=kg(f,l),l=""),u=m,f=f||!Na(u);o++}return""!==l&&(r+=kg(f,l)),r}const or={};function xs(n){Lg(Xn(),Dt(),gr()+n,!1)}function Lg(n,r,o,u){if(!u)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&to(r,f,o)}else{const f=n.preOrderHooks;null!==f&&ia(r,f,0,o)}Ii(o)}function kh(n,r=null,o=null,u){const l=Fh(n,r,o,u);return l.resolveInjectorInitializers(),l}function Fh(n,r=null,o=null,u,l=new Set){const f=[o||Ot,Gy(n)];return u=u||("object"==typeof n?void 0:te(n)),new Wf(f,r||Id(),u||null,l)}let Qa=(()=>{class n{static create(o,u){if(Array.isArray(o))return kh({name:""},u,o,"");{const l=o.name??"";return kh({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=fi,n.NULL=new Hf,n.\u0275prov=zt({token:n,providedIn:"any",factory:()=>Vi(zu)}),n.__NG_ELEMENT_ID__=-1,n})();function wl(n,r=xt.Default){const o=Dt();return null===o?Vi(n,r):Mu(Or(),o,me(n),r)}function Uh(){throw new Error("invalid")}function Bh(n,r){return n<<17|r<<2}function ka(n){return n>>17&32767}function cp(n){return 2|n}function Zu(n){return(131068&n)>>2}function Gs(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function Kh(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],f=o[u+1];if(-1!==f){const m=n.data[f];Fi(l),m.contentQueries(2,r[f],f)}}}function Ld(n,r,o,u,l,f,m,C,S,L,Q){const le=r.blueprint.slice();return le[0]=l,le[2]=76|u,(null!==Q||n&&1024&n[2])&&(le[2]|=1024),zr(le),le[3]=le[15]=n,le[8]=o,le[10]=m||n&&n[10],le[11]=C||n&&n[11],le[12]=S||n&&n[12]||null,le[9]=L||n&&n[9]||null,le[6]=f,le[20]=function xe(){return ve++}(),le[21]=Q,le[16]=2==r.type?n[16]:le,le}function Dl(n,r,o,u,l){let f=n.data[r];if(null===f)f=function Vd(n,r,o,u,l){const f=k(),m=Y(),S=n.data[r]=function Tp(n,r,o,u,l,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,r,u,l);return null===n.firstChild&&(n.firstChild=S),null!==f&&(m?null==f.child&&null!==S.parent&&(f.child=S):null===f.next&&(f.next=S)),S}(n,r,o,u,l),function Is(){return Pn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const m=function O(){const n=Pn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return M(f,!0),f}function Cl(n,r,o,u){if(0===o)return-1;const l=r.length;for(let f=0;f<o;f++)r.push(u),n.blueprint.push(u),n.data.push(null);return l}function bl(n,r,o){eo(r);try{const u=n.viewQuery;null!==u&&jd(1,u,o);const l=n.template;null!==l&&Zh(n,r,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kh(n,r),n.staticViewQueries&&jd(2,n.viewQuery,o);const f=n.components;null!==f&&function Dp(n,r){for(let o=0;o<r.length;o++)Mv(n,r[o])}(r,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,ds()}}function Ja(n,r,o,u){const l=r[2];if(128!=(128&l)){eo(r);try{zr(r),function Qi(n){return Pn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Zh(n,r,o,2,u);const m=3==(3&l);if(m){const L=n.preOrderCheckHooks;null!==L&&to(r,L,null)}else{const L=n.preOrderHooks;null!==L&&ia(r,L,0,null),hs(r,0)}if(function Op(n){for(let r=Ac(n);null!==r;r=v(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const l=o[u],f=l[3];0==(512&l[2])&&Es(f,1),l[2]|=512}}}(r),function Av(n){for(let r=Ac(n);null!==r;r=v(r))for(let o=10;o<r.length;o++){const u=r[o],l=u[1];Uo(u)&&Ja(l,u,l.template,u[8])}}(r),null!==n.contentQueries&&Kh(n,r),m){const L=n.contentCheckHooks;null!==L&&to(r,L)}else{const L=n.contentHooks;null!==L&&ia(r,L,1),hs(r,1)}!function Ev(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Ii(~l);else{const f=l,m=o[++u],C=o[++u];va(m,f),C(2,r[f])}}}finally{Ii(-1)}}(n,r);const C=n.components;null!==C&&function wv(n,r){for(let o=0;o<r.length;o++)Sv(n,r[o])}(r,C);const S=n.viewQuery;if(null!==S&&jd(2,S,u),m){const L=n.viewCheckHooks;null!==L&&to(r,L)}else{const L=n.viewHooks;null!==L&&ia(r,L,2),hs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Es(r[3],-1))}finally{ds()}}}function Zh(n,r,o,u,l){const f=gr(),m=2&u;try{Ii(-1),m&&r.length>22&&Lg(n,r,22,!1),o(u,l)}finally{Ii(f)}}function Tl(n,r,o){!To()||(function Dv(n,r,o,u){const l=o.directiveStart,f=o.directiveEnd;n.firstCreatePass||en(o,r),Ui(u,r);const m=o.initialInputs;for(let C=l;C<f;C++){const S=n.data[C],L=kr(S);L&&Tv(r,o,S);const Q=oa(r,n,C,o);Ui(Q,r),null!==m&&Rp(0,C-l,Q,S,0,m),L&&(ti(o.index,r)[8]=Q)}}(n,r,o,hi(o,r)),128==(128&o.flags)&&function Cv(n,r,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,m=function $o(){return Pn.lFrame.currentDirectiveIndex}();try{Ii(f);for(let C=u;C<l;C++){const S=n.data[C],L=r[C];Ho(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&lm(S,L)}}finally{Ii(-1),Ho(m)}}(n,r,o))}function qh(n,r,o=hi){const u=r.localNames;if(null!==u){let l=r.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],C=-1===m?o(r,n):n[m];n[l++]=C}}}function dc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cp(n,r,o,u,l,f,m,C,S,L){const Q=22+u,le=Q+l,Se=function Iv(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:or);return o}(Q,le),Qe="function"==typeof L?L():L;return Se[1]={type:n,blueprint:Se,template:o,queries:null,viewQuery:C,declTNode:r,data:Se.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:Qe,incompleteFirstPass:!1}}function Yh(n,r,o,u){const l=nf(r);null===o?l.push(u):(l.push(o),n.firstCreatePass&&Iu(n).push(u,l.length-1))}function rm(n,r,o){for(let u in n)if(n.hasOwnProperty(u)){const l=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,l):o[u]=[r,l]}return o}function im(n,r){const u=r.directiveEnd,l=n.data,f=r.attrs,m=[];let C=null,S=null;for(let L=r.directiveStart;L<u;L++){const Q=l[L],le=Q.inputs,Se=null===f||Td(r)?null:dm(le,f);m.push(Se),C=rm(le,L,C),S=rm(Q.outputs,L,S)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=m,r.inputs=C,r.outputs=S}function sm(n,r){const o=ti(r,n);16&o[2]||(o[2]|=32)}function Qh(n,r,o,u){let l=!1;if(To()){const f=function bv(n,r,o){const u=n.directiveRegistry;let l=null;if(u)for(let f=0;f<u.length;f++){const m=u[f];ep(o,m.selectors,!1)&&(l||(l=[]),tt(en(o,r),n,m.type),kr(m)?(Jh(n,o),l.unshift(m)):l.push(m))}return l}(n,r,o),m=null===u?null:{"":-1};if(null!==f){l=!0,cm(o,n.data.length,f.length);for(let Q=0;Q<f.length;Q++){const le=f[Q];le.providersResolver&&le.providersResolver(le)}let C=!1,S=!1,L=Cl(n,r,f.length,null);for(let Q=0;Q<f.length;Q++){const le=f[Q];o.mergedAttrs=_t(o.mergedAttrs,le.hostAttrs),Xh(n,o,r,L,le),xp(L,le,m),null!==le.contentQueries&&(o.flags|=8),(null!==le.hostBindings||null!==le.hostAttrs||0!==le.hostVars)&&(o.flags|=128);const Se=le.type.prototype;!C&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!S&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),S=!0),L++}im(n,o)}m&&function Mp(n,r,o){if(r){const u=n.localNames=[];for(let l=0;l<r.length;l+=2){const f=o[r[l+1]];if(null==f)throw new We(-301,!1);u.push(r[l],f)}}}(o,u,m)}return o.mergedAttrs=_t(o.mergedAttrs,o.attrs),l}function Sp(n,r,o,u,l,f){const m=f.hostBindings;if(m){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const S=~r.index;(function um(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(C)!=S&&C.push(S),C.push(u,l,m)}}function lm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Jh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;kr(r)&&(o[""]=n)}}function cm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Xh(n,r,o,u,l){n.data[u]=l;const f=l.factory||(l.factory=ci(l.type)),m=new no(f,kr(l),wl);n.blueprint[u]=m,o[u]=m,Sp(n,r,0,u,Cl(n,o,l.hostVars,or),l)}function Tv(n,r,o){const u=hi(r,n),l=dc(o),f=n[10],m=$c(n,Ld(n,l,null,o.onPush?32:16,u,r,f,f.createRenderer(u,o),null,null,null));n[r.index]=m}function Fa(n,r,o,u,l,f){const m=hi(n,r);!function ef(n,r,o,u,l,f,m){if(null==f)n.removeAttribute(r,l,o);else{const C=null==m?Be(f):m(f,u||"",l);n.setAttribute(r,l,C,o)}}(r[11],m,f,n.value,o,u,l)}function Rp(n,r,o,u,l,f){const m=f[r];if(null!==m){const C=u.setInput;for(let S=0;S<m.length;){const L=m[S++],Q=m[S++],le=m[S++];null!==C?u.setInput(o,le,L,Q):o[Q]=le}}}function dm(n,r){let o=null,u=0;for(;u<r.length;){const l=r[u];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,n[l],r[u+1])),u+=2}else u+=2;else u+=4}return o}function tf(n,r,o,u){return new Array(n,!0,!1,r,null,0,u,o,null,null)}function Sv(n,r){const o=ti(r,n);if(Uo(o)){const u=o[1];48&o[2]?Ja(u,o,u.template,o[8]):o[5]>0&&Ud(o)}}function Ud(n){for(let u=Ac(n);null!==u;u=v(u))for(let l=10;l<u.length;l++){const f=u[l];if(Uo(f))if(512&f[2]){const m=f[1];Ja(m,f,m.template,f[8])}else f[5]>0&&Ud(f)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=ti(o[u],n);Uo(l)&&l[5]>0&&Ud(l)}}function Mv(n,r){const o=ti(r,n),u=o[1];(function Pp(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),bl(u,o,o[8])}function $c(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bd(n){for(;n;){n[2]|=32;const r=fl(n);if(Bi(n)&&!r)return n;n=r}return null}function Yu(n,r,o,u=!0){const l=r[10];l.begin&&l.begin();try{Ja(n,r,n.template,o)}catch(m){throw u&&hm(r,m),m}finally{l.end&&l.end()}}function jd(n,r,o){Fi(0),r(n,o)}function nf(n){return n[7]||(n[7]=[])}function Iu(n){return n.cleanup||(n.cleanup=[])}function hm(n,r){const o=n[9],u=o?o.get(Vc,null):null;u&&u.handleError(r)}function $d(n,r,o,u,l){for(let f=0;f<o.length;){const m=o[f++],C=o[f++],S=r[m],L=n.data[m];null!==L.setInput?L.setInput(S,l,u,C):S[C]=l}}function Qu(n,r,o){const u=ji(r,n);!function X(n,r,o){n.setValue(r,o)}(n[11],u,o)}function sf(n,r,o){let u=o?n.styles:null,l=o?n.classes:null,f=0;if(null!==r)for(let m=0;m<r.length;m++){const C=r[m];"number"==typeof C?f=C:1==f?l=Pe(l,C):2==f&&(u=Pe(u,C+": "+r[++m]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function Hc(n,r,o,u,l=!1){for(;null!==o;){const f=r[o.index];if(null!==f&&u.push(pr(f)),$r(f))for(let C=10;C<f.length;C++){const S=f[C],L=S[1].firstChild;null!==L&&Hc(S[1],S,L,u)}const m=o.type;if(8&m)Hc(n,r,o.child,u);else if(32&m){const C=hl(o,r);let S;for(;S=C();)u.push(S)}else if(16&m){const C=Ff(r,o);if(Array.isArray(C))u.push(...C);else{const S=fl(r[16]);Hc(S[1],S,C,u,!0)}}o=l?o.projectionNext:o.next}return u}class Hd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Hc(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if($r(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(Ms(r,u),$s(o,u))}this._attachedToViewContainer=!1}Hl(this._lView[1],this._lView)}onDestroy(r){Yh(this._lView[1],this._lView,null,r)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new We(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mn(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new We(902,!1);this._appRef=r}}class Np extends Hd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Yu(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class kp extends Jl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=z(r);return new Gc(o,this.ngModule)}}function af(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Fp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const l=this.injector.get(r,tc,u);return l!==tc||o===tc?l:this.parentInjector.get(r,o,u)}}class Gc extends Wu{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return af(this.componentDef.inputs)}get outputs(){return af(this.componentDef.outputs)}create(r,o,u,l){let f=(l=l||this.ngModule)instanceof ql?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new Fp(r,f):r,C=m.get(Cd,null);if(null===C)throw new We(407,!1);const S=m.get(Mh,null),L=C.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",le=u?function bp(n,r,o){return n.selectRootElement(r,o===nt.ShadowDom)}(L,u,this.componentDef.encapsulation):ct(L,Q,function Rv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Q)),Se=this.componentDef.onPush?288:272,Qe=Cp(0,null,null,1,0,null,null,null,null,null),Tt=Ld(null,Qe,null,Se,null,null,C,L,S,m,null);let Wt,un;eo(Tt);try{const xn=function Vp(n,r,o,u,l,f){const m=o[1];o[22]=n;const S=Dl(m,22,2,"#host",null),L=S.mergedAttrs=r.hostAttrs;null!==L&&(sf(S,L,!0),null!==n&&(K(l,n,L),null!==S.classes&&Rc(l,n,S.classes),null!==S.styles&&Ti(l,n,S.styles)));const Q=u.createRenderer(n,r),le=Ld(o,dc(r),null,r.onPush?32:16,o[22],S,u,Q,f||null,null,null);return m.firstCreatePass&&(tt(en(S,o),m,r.type),Jh(m,S),cm(S,o.length,1)),$c(o,le),o[22]=le}(le,this.componentDef,Tt,C,L);if(le)if(u)K(L,le,["ng-version",Yf.full]);else{const{attrs:Kn,classes:kt}=function iv(n){const r=[],o=[];let u=1,l=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===l?""!==f&&r.push(f,n[++u]):8===l&&o.push(f);else{if(!Na(l))break;l=f}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Kn&&K(L,le,Kn),kt&&kt.length>0&&Rc(L,le,kt.join(" "))}if(un=bo(Qe,22),void 0!==o){const Kn=un.projection=[];for(let kt=0;kt<this.ngContentSelectors.length;kt++){const nr=o[kt];Kn.push(null!=nr?Array.from(nr):null)}}Wt=function Nv(n,r,o,u){const l=o[1],f=function am(n,r,o){const u=Or();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xh(n,u,r,Cl(n,r,1,null),o),im(n,u));const l=oa(r,n,u.directiveStart,u);Ui(l,r);const f=hi(u,r);return f&&Ui(f,r),l}(l,o,r);if(n[8]=o[8]=f,null!==u)for(const C of u)C(f,r);if(r.contentQueries){const C=Or();r.contentQueries(1,f,C.directiveStart)}const m=Or();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ii(m.index),Sp(o[1],m,0,m.directiveStart,m.directiveEnd,r),lm(r,f)),f}(xn,this.componentDef,Tt,[Up]),bl(Qe,Tt,null)}finally{ds()}return new Pv(this.componentType,Wt,Xl(un,Tt),Tt,un)}}class Pv extends class Ql{}{constructor(r,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new Np(l),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[r])){const f=this._rootLView;$d(f[1],f,l,r,o),sm(f,this._tNode.index)}}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Up(){const n=Or();Cs(Dt()[1],n)}function Gd(n){let r=function uf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let l;if(kr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new We(903,!1);l=r.\u0275dir}if(l){if(o){u.push(l);const m=n;m.inputs=hc(n.inputs),m.declaredInputs=hc(n.declaredInputs),m.outputs=hc(n.outputs);const C=l.hostBindings;C&&fm(n,C);const S=l.viewQuery,L=l.contentQueries;if(S&&Fv(n,S),L&&Bp(n,L),Ce(n.inputs,l.inputs),Ce(n.declaredInputs,l.declaredInputs),Ce(n.outputs,l.outputs),kr(l)&&l.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let m=0;m<f.length;m++){const C=f[m];C&&C.ngInherit&&C(n),C===Gd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function kv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const l=n[u];l.hostVars=r+=l.hostVars,l.hostAttrs=_t(l.hostAttrs,o=_t(o,l.hostAttrs))}}(u)}function hc(n){return n===Tn?{}:n===Ot?[]:n}function Fv(n,r){const o=n.viewQuery;n.viewQuery=o?(u,l)=>{r(u,l),o(u,l)}:r}function Bp(n,r){const o=n.contentQueries;n.contentQueries=o?(u,l,f)=>{r(u,l,f),o(u,l,f)}:r}function fm(n,r){const o=n.hostBindings;n.hostBindings=o?(u,l)=>{r(u,l),o(u,l)}:r}let cf=null;function fc(){if(!cf){const n=ut.Symbol;if(n&&n.iterator)cf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cf=u)}}}return cf}function zd(n){return!!Wd(n)&&(Array.isArray(n)||!(n instanceof Map)&&fc()in n)}function Wd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xa(n,r,o){return n[r]=o}function zs(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Du(n,r,o,u){const l=zs(n,r,o);return zs(n,r+1,u)||l}function Kc(n,r,o,u){const l=Dt();return zs(l,Bs(),r)&&(Xn(),Fa(vr(),l,n,r,o,u)),Kc}function mc(n,r,o,u,l,f){const C=Du(n,function wi(){return Pn.lFrame.bindingIndex}(),o,l);return ni(2),C?r+Be(o)+u+Be(l)+f:or}function Wp(n,r,o,u,l,f,m,C){const S=Dt(),L=Xn(),Q=n+22,le=L.firstCreatePass?function wm(n,r,o,u,l,f,m,C,S){const L=r.consts,Q=Dl(r,n,4,m||null,gi(L,C));Qh(r,o,Q,gi(L,S)),Cs(r,Q);const le=Q.tViews=Cp(2,Q,u,l,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L);return null!==r.queries&&(r.queries.template(r,Q),le.queries=r.queries.embeddedTView(Q)),Q}(Q,L,S,r,o,u,l,f,m):L.data[Q];M(le,!1);const Se=S[11].createComment("");$u(L,S,Se,le),Ui(Se,S),$c(S,S[Q]=tf(Se,S,Se,le)),os(le)&&Tl(L,S,le),null!=m&&qh(S,le,C)}function pf(n,r,o){const u=Dt();return zs(u,Bs(),r)&&function No(n,r,o,u,l,f,m,C){const S=hi(r,o);let Q,L=r.inputs;!C&&null!=L&&(Q=L[u])?($d(n,o,Q,u,l),Xr(r)&&sm(o,r.index)):3&r.type&&(u=function Ap(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=m?m(l,r.value||"",u):l,f.setProperty(S,u,l))}(Xn(),vr(),u,n,r,u[11],o,!1),pf}function gf(n,r,o,u,l){const m=l?"class":"style";$d(n,o,r.inputs[m],m,u)}function Zd(n,r,o,u){const l=Dt(),f=Xn(),m=22+n,C=l[11],S=l[m]=ct(C,r,function Ea(){return Pn.lFrame.currentNamespace}()),L=f.firstCreatePass?function Kd(n,r,o,u,l,f,m){const C=r.consts,L=Dl(r,n,2,l,gi(C,f));return Qh(r,o,L,gi(C,m)),null!==L.attrs&&sf(L,L.attrs,!1),null!==L.mergedAttrs&&sf(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(m,f,l,0,r,o,u):f.data[m];M(L,!0);const Q=L.mergedAttrs;null!==Q&&K(C,S,Q);const le=L.classes;null!==le&&Rc(C,S,le);const Se=L.styles;return null!==Se&&Ti(C,S,Se),64!=(64&L.flags)&&$u(f,l,S,L),0===function Ei(){return Pn.lFrame.elementDepthCount}()&&Ui(S,l),function Lr(){Pn.lFrame.elementDepthCount++}(),os(L)&&(Tl(f,l,L),function cc(n,r,o){if(Ks(r)){const l=r.directiveEnd;for(let f=r.directiveStart;f<l;f++){const m=n.data[f];m.contentQueries&&m.contentQueries(1,o[f],f)}}}(f,L,l)),null!==u&&qh(l,L),Zd}function Ai(){let n=Or();Y()?function it(){Pn.lFrame.isParent=!1}():(n=n.parent,M(n,!1));const r=n;!function Us(){Pn.lFrame.elementDepthCount--}();const o=Xn();return o.firstCreatePass&&(Cs(o,n),Ks(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ru(n){return 0!=(16&n.flags)}(r)&&gf(o,r,Dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function b(n){return 0!=(32&n.flags)}(r)&&gf(o,r,Dt(),r.stylesWithoutHost,!1),Ai}function Rs(n,r,o,u){return Zd(n,r,o,u),Ai(),Rs}function Im(){return Dt()}function qd(n){return!!n&&"function"==typeof n.then}function Dm(n){return!!n&&"function"==typeof n.subscribe}const mf=Dm;function Yp(n,r,o,u){const l=Dt(),f=Xn(),m=Or();return function Lv(n,r,o,u,l,f,m,C){const S=os(u),Q=n.firstCreatePass&&Iu(n),le=r[8],Se=nf(r);let Qe=!0;if(3&u.type||C){const un=hi(u,r),xn=C?C(un):un,Kn=Se.length,kt=C?Jr=>C(pr(Jr[u.index])):u.index;let nr=null;if(!C&&S&&(nr=function Si(n,r,o,u){const l=n.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===o&&l[f+1]===u){const C=r[7],S=l[f+2];return C.length>S?C[S]:null}"string"==typeof m&&(f+=2)}return null}(n,r,l,u.index)),null!==nr)(nr.__ngLastListenerFn__||nr).__ngNextListenerFn__=f,nr.__ngLastListenerFn__=f,Qe=!1;else{f=zi(u,r,le,f,!1);const Jr=o.listen(xn,l,f);Se.push(f,Jr),Q&&Q.push(l,kt,Kn,Kn+1)}}else f=zi(u,r,le,f,!1);const Tt=u.outputs;let Wt;if(Qe&&null!==Tt&&(Wt=Tt[l])){const un=Wt.length;if(un)for(let xn=0;xn<un;xn+=2){const Wi=r[Wt[xn]][Wt[xn+1]].subscribe(f),uh=Se.length;Se.push(f,Wi),Q&&Q.push(l,u.index,uh,-(uh+1))}}}(f,l,l[11],m,n,r,0,u),Yp}function Vv(n,r,o,u){try{return!1!==o(u)}catch(l){return hm(n,l),!1}}function zi(n,r,o,u,l){return function f(m){if(m===Function)return u;Bd(2&n.flags?ti(n.index,r):r);let S=Vv(r,0,u,m),L=f.__ngNextListenerFn__;for(;L;)S=Vv(r,0,L,m)&&S,L=L.__ngNextListenerFn__;return l&&!1===S&&(m.preventDefault(),m.returnValue=!1),S}}function Qp(n=1){return function Ua(n){return(Pn.lFrame.contextLView=function na(n,r){for(;n>0;)r=r[15],n--;return r}(n,Pn.lFrame.contextLView))[8]}(n)}function xl(n,r,o,u,l){const f=n[o+1],m=null===r;let C=u?ka(f):Zu(f),S=!1;for(;0!==C&&(!1===S||m);){const Q=n[C+1];yf(n[C],r)&&(S=!0,n[C+1]=u?jh(Q):cp(Q)),C=u?ka(Q):Zu(Q)}S&&(n[o+1]=u?cp(f):jh(f))}function yf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&y(n,r)>=0}const Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Om(n){return n.substring(Os.key,Os.keyEnd)}function Yd(n,r){const o=Os.textEnd;return o===r?-1:(r=Os.keyEnd=function km(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,Os.key=r,o),bu(n,r,o))}function bu(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function _f(n,r){return function ko(n,r,o,u){const l=Dt(),f=Xn(),m=ni(2);f.firstUpdatePass&&Xd(f,n,m,u),r!==or&&zs(l,m,r)&&$m(f,f.data[gr()],l,l[11],n,l[m+1]=function l0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=te(Gu(n)))),n}(r,o),u,m)}(n,r,null,!0),_f}function tg(n){!function tu(n,r,o,u){const l=Xn(),f=ni(2);l.firstUpdatePass&&Xd(l,null,f,u);const m=Dt();if(o!==or&&zs(m,f,o)){const C=l.data[gr()];if(If(C,u)&&!Jd(l,f)){let S=u?C.classesWithoutHost:C.stylesWithoutHost;null!==S&&(o=Pe(S,o||"")),gf(l,C,m,o,u)}else!function nh(n,r,o,u,l,f,m,C){l===or&&(l=Ot);let S=0,L=0,Q=0<l.length?l[0]:null,le=0<f.length?f[0]:null;for(;null!==Q||null!==le;){const Se=S<l.length?l[S+1]:void 0,Qe=L<f.length?f[L+1]:void 0;let Wt,Tt=null;Q===le?(S+=2,L+=2,Se!==Qe&&(Tt=le,Wt=Qe)):null===le||null!==Q&&Q<le?(S+=2,Tt=Q):(L+=2,Tt=le,Wt=Qe),null!==Tt&&$m(n,r,o,u,Tt,Wt,m,C),Q=S<l.length?l[S]:null,le=L<f.length?f[L]:null}}(l,C,m,m[11],m[f+1],m[f+1]=function th(n,r,o){if(null==o||""===o)return Ot;const u=[],l=Gu(o);if(Array.isArray(l))for(let f=0;f<l.length;f++)n(u,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&n(u,f,l[f]);else"string"==typeof l&&r(u,l);return u}(n,r,o),u,f)}}(_,La,n,!0)}function La(n,r){for(let o=function Nm(n){return function Qd(n){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=n.length}(n),Yd(n,bu(n,0,Os.textEnd))}(r);o>=0;o=Yd(r,o))_(n,Om(r),!0)}function Jd(n,r){return r>=n.expandoStartIndex}function Xd(n,r,o,u){const l=n.data;if(null===l[o+1]){const f=l[gr()],m=Jd(n,o);If(f,u)&&null===r&&!m&&(r=!1),r=function Bm(n,r,o,u){const l=function Go(n){const r=Pn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=u?r.residualClasses:r.residualStyles;if(null===l)0===(u?r.classBindings:r.styleBindings)&&(o=_c(o=wf(null,n,r,o,u),r.attrs,u),f=null);else{const m=r.directiveStylingLast;if(-1===m||n[m]!==l)if(o=wf(l,n,r,o,u),null===f){let S=function eh(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==Zu(u))return n[ka(u)]}(n,r,u);void 0!==S&&Array.isArray(S)&&(S=wf(null,n,r,S[1],u),S=_c(S,r.attrs,u),function Gv(n,r,o,u){n[ka(o?r.classBindings:r.styleBindings)]=u}(n,r,u,S))}else f=function Ef(n,r,o){let u;const l=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<l;f++)u=_c(u,n[f].hostAttrs,o);return _c(u,r.attrs,o)}(n,r,u)}return void 0!==f&&(u?r.residualClasses=f:r.residualStyles=f),o}(l,f,r,u),function Ml(n,r,o,u,l,f){let m=f?r.classBindings:r.styleBindings,C=ka(m),S=Zu(m);n[u]=o;let Q,L=!1;if(Array.isArray(o)){const le=o;Q=le[1],(null===Q||y(le,Q)>0)&&(L=!0)}else Q=o;if(l)if(0!==S){const Se=ka(n[C+1]);n[u+1]=Bh(Se,C),0!==Se&&(n[Se+1]=Gs(n[Se+1],u)),n[C+1]=function lp(n,r){return 131071&n|r<<17}(n[C+1],u)}else n[u+1]=Bh(C,0),0!==C&&(n[C+1]=Gs(n[C+1],u)),C=u;else n[u+1]=Bh(S,0),0===C?C=u:n[S+1]=Gs(n[S+1],u),S=u;L&&(n[u+1]=cp(n[u+1])),xl(n,Q,u,!0),xl(n,Q,u,!1),function u0(n,r,o,u,l){const f=l?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&y(f,r)>=0&&(o[u+1]=jh(o[u+1]))}(r,Q,n,u,f),m=Bh(C,S),f?r.classBindings=m:r.styleBindings=m}(l,f,r,o,m,u)}}function wf(n,r,o,u,l){let f=null;const m=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<m&&(f=r[C],u=_c(u,f.hostAttrs,l),f!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function _c(n,r,o){const u=o?1:2;let l=-1;if(null!==r)for(let f=0;f<r.length;f++){const m=r[f];"number"==typeof m?l=m:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_(n,m,!!o||r[++f]))}return void 0===n?null:n}function $m(n,r,o,u,l,f,m,C){if(!(3&r.type))return;const S=n.data,L=S[C+1];ng(function Wg(n){return 1==(1&n)}(L)?Ec(S,r,o,l,Zu(L),m):void 0)||(ng(f)||function Pd(n){return 2==(2&n)}(L)&&(f=Ec(S,null,o,l,C,m)),function xy(n,r,o,u,l){if(r)l?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:ns.DashCase;null==l?n.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=ns.Important),n.setStyle(o,u,l,f))}}(u,m,ji(gr(),o),l,f))}function Ec(n,r,o,u,l,f){const m=null===r;let C;for(;l>0;){const S=n[l],L=Array.isArray(S),Q=L?S[1]:S,le=null===Q;let Se=o[l+1];Se===or&&(Se=le?Ot:void 0);let Qe=le?E(Se,u):Q===u?Se:void 0;if(L&&!ng(Qe)&&(Qe=E(S,u)),ng(Qe)&&(C=Qe,m))return C;const Tt=n[l+1];l=m?ka(Tt):Zu(Tt)}if(null!==r){let S=f?r.residualClasses:r.residualStyles;null!=S&&(C=E(S,u))}return C}function ng(n){return void 0!==n}function If(n,r){return 0!=(n.flags&(r?16:32))}function Hm(n,r=""){const o=Dt(),u=Xn(),l=n+22,f=u.firstCreatePass?Dl(u,l,1,r,null):u.data[l],m=o[l]=function $(n,r){return n.createText(r)}(o[11],r);$u(u,o,m,f),M(f,!1)}function Jc(n){return Df("",n,""),Jc}function Df(n,r,o){const u=Dt(),l=function Al(n,r,o,u){return zs(n,Bs(),o)?r+Be(o)+u:or}(u,n,r,o);return l!==or&&Qu(u,gr(),l),Df}function rg(n,r,o,u,l){const f=Dt(),m=mc(f,n,r,o,u,l);return m!==or&&Qu(f,gr(),m),rg}const Cc=void 0;var qv=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let nu={};function cy(n){const r=function m0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const u=r.split("-")[0];if(o=hy(u),o)return o;if("en"===u)return qv;throw new We(701,!1)}function dy(n){return cy(n)[Wn.PluralCase]}function hy(n){return n in nu||(nu[n]=ut.ng&&ut.ng.common&&ut.ng.common.locales&&ut.ng.common.locales[n]),nu[n]}var Wn=(()=>((Wn=Wn||{})[Wn.LocaleId=0]="LocaleId",Wn[Wn.DayPeriodsFormat=1]="DayPeriodsFormat",Wn[Wn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Wn[Wn.DaysFormat=3]="DaysFormat",Wn[Wn.DaysStandalone=4]="DaysStandalone",Wn[Wn.MonthsFormat=5]="MonthsFormat",Wn[Wn.MonthsStandalone=6]="MonthsStandalone",Wn[Wn.Eras=7]="Eras",Wn[Wn.FirstDayOfWeek=8]="FirstDayOfWeek",Wn[Wn.WeekendRange=9]="WeekendRange",Wn[Wn.DateFormat=10]="DateFormat",Wn[Wn.TimeFormat=11]="TimeFormat",Wn[Wn.DateTimeFormat=12]="DateTimeFormat",Wn[Wn.NumberSymbols=13]="NumberSymbols",Wn[Wn.NumberFormats=14]="NumberFormats",Wn[Wn.CurrencyCode=15]="CurrencyCode",Wn[Wn.CurrencySymbol=16]="CurrencySymbol",Wn[Wn.CurrencyName=17]="CurrencyName",Wn[Wn.Currencies=18]="Currencies",Wn[Wn.Directionality=19]="Directionality",Wn[Wn.PluralCase=20]="PluralCase",Wn[Wn.ExtraData=21]="ExtraData",Wn))();const oh="en-US";let og=oh;function n_(n,r,o,u,l){if(n=me(n),Array.isArray(n))for(let f=0;f<n.length;f++)n_(n[f],r,o,u,l);else{const f=Xn(),m=Dt();let C=fa(n)?n:me(n.provide),S=_l(n);const L=Or(),Q=1048575&L.providerIndexes,le=L.directiveStart,Se=L.providerIndexes>>20;if(fa(n)||!n.multi){const Qe=new no(S,l,wl),Tt=i_(C,r,l?Q:Q+Se,le);-1===Tt?(tt(en(L,m),f,C),r_(f,n,r.length),r.push(C),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),o.push(Qe),m.push(Qe)):(o[Tt]=Qe,m[Tt]=Qe)}else{const Qe=i_(C,r,Q+Se,le),Tt=i_(C,r,Q,Q+Se),Wt=Qe>=0&&o[Qe],un=Tt>=0&&o[Tt];if(l&&!un||!l&&!Wt){tt(en(L,m),f,C);const xn=function Bw(n,r,o,u,l){const f=new no(n,o,wl);return f.multi=[],f.index=r,f.componentProviders=0,O0(f,l,u&&!o),f}(l?Uw:Vw,o.length,l,u,S);!l&&un&&(o[Tt].providerFactory=xn),r_(f,n,r.length,0),r.push(C),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),o.push(xn),m.push(xn)}else r_(f,n,Qe>-1?Qe:Tt,O0(o[l?Tt:Qe],S,!l&&u));!l&&u&&un&&o[Tt].componentProviders++}}}function r_(n,r,o,u){const l=fa(r),f=function wd(n){return!!n.useClass}(r);if(l||f){const S=(f?me(r.useClass):r).prototype.ngOnDestroy;if(S){const L=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Q=L.indexOf(o);-1===Q?L.push(o,[u,S]):L[Q+1].push(u,S)}else L.push(o,S)}}}function O0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,u){for(let l=o;l<u;l++)if(r[l]===n)return l;return-1}function Vw(n,r,o,u){return s_(this.multi,[])}function Uw(n,r,o,u){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,C=oa(o,o[1],this.providerFactory.index,u);f=C.slice(0,m),s_(l,f);for(let S=m;S<C.length;S++)f.push(C[S])}else f=[],s_(l,f);return f}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function P0(n,r=[]){return o=>{o.providersResolver=(u,l)=>function Lw(n,r,o){const u=Xn();if(u.firstCreatePass){const l=kr(n);n_(o,u.data,u.blueprint,l,!0),n_(r,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,r)}}class Sf{}class N0{}function jw(n,r){return new k0(n,r??null)}class k0 extends Sf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kp(this);const u=Ft(r);this._bootstrapComponents=Po(u.bootstrap),this._r3Injector=Fh(r,o,[{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],te(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class o_ extends N0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class $w extends Sf{constructor(r,o,u){super(),this.componentFactoryResolver=new kp(this),this.instance=null;const l=new Wf([...r,{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],o||Id(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function a_(n,r,o=null){return new $w(n,r,o).injector}let Hw=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Gf(0,o.type),l=u.length>0?a_([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=zt({token:n,providedIn:"environment",factory:()=>new n(Vi(ql))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get(Hw).getOrCreateStandaloneInjector(n)}function H0(n,r,o){const u=mi()+n,l=Dt();return l[u]===or?Xa(l,u,o?r.call(o):r()):function pc(n,r){return n[r]}(l,u)}function G0(n,r,o,u){return z0(Dt(),mi(),n,r,o,u)}function lg(n,r){const o=n[r];return o===or?void 0:o}function z0(n,r,o,u,l,f){const m=r+o;return zs(n,m,l)?Xa(n,m+1,f?u.call(f,l):u(l)):lg(n,m+1)}function Y0(n,r){const o=Xn();let u;const l=n+22;o.firstCreatePass?(u=function oI(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const f=u.factory||(u.factory=ci(u.type)),m=ar(wl);try{const C=Hn(!1),S=f();return Hn(C),function ff(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,Dt(),l,S),S}finally{ar(m)}}function Q0(n,r,o){const u=n+22,l=Dt(),f=ki(l,u);return cg(l,u)?z0(l,mi(),r,f.transform,o,f):f.transform(o)}function J0(n,r,o,u){const l=n+22,f=Dt(),m=ki(f,l);return cg(f,l)?function W0(n,r,o,u,l,f,m){const C=r+o;return Du(n,C,l,f)?Xa(n,C+2,m?u.call(m,l,f):u(l,f)):lg(n,C+2)}(f,mi(),r,m.transform,o,u,m):m.transform(o,u)}function cg(n,r){return n[1].data[r].pure}function l_(n){return r=>{setTimeout(n,void 0,r)}}const Ol=class cI extends d.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let l=r,f=o||(()=>null),m=u;if(r&&"object"==typeof r){const S=r;l=S.next?.bind(S),f=S.error?.bind(S),m=S.complete?.bind(S)}this.__isAsync&&(f=l_(f),l&&(l=l_(l)),m&&(m=l_(m)));const C=super.subscribe({next:l,error:f,complete:m});return r instanceof F.w0&&r.add(C),C}};function dI(){return this._results[fc()]()}class c_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=fc(),u=c_.prototype;u[o]||(u[o]=dI)}get changes(){return this._changes||(this._changes=new Ol)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const l=Ci(r);(this._changesDetected=!function Ga(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],f=r[u];if(o&&(l=o(l),f=o(f)),f!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=dg,fI=class extends hI{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,l=Ld(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),bl(u,l,r),new Hd(l)}};function pI(){return _y(Or(),Dt())}function _y(n,r){return 4&n.type?new fI(r,n,Xl(n,r)):null}let Ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return tE(Or(),Dt())}const mI=Ey,X0=class extends mI{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){const r=Kt(this._hostTNode,this._hostLView);if(mr(r)){const o=In(r,this._hostLView),u=rr(r);return new ii(o[1].data[u+8],o)}return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=eE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const m=r.createEmbeddedView(o||{},f);return this.insert(m,l),m}createComponent(r,o,u,l,f){const m=r&&!function io(n){return"function"==typeof n}(r);let C;if(m)C=o;else{const le=o||{};C=le.index,u=le.injector,l=le.projectableNodes,f=le.environmentInjector||le.ngModuleRef}const S=m?r:new Gc(z(r)),L=u||this.parentInjector;if(!f&&null==S.ngModule){const Se=(m?L:this.parentInjector).get(ql,null);Se&&(f=Se)}const Q=S.create(L,l,void 0,f);return this.insert(Q.hostView,C),Q}insert(r,o){const u=r._lView,l=u[1];if(function Qs(n){return $r(n[3])}(u)){const Q=this.indexOf(r);if(-1!==Q)this.detach(Q);else{const le=u[3],Se=new X0(le,le[6],le[3]);Se.detach(Se.indexOf(r))}}const f=this._adjustIndex(o),m=this._lContainer;!function vo(n,r,o,u){const l=10+u,f=o.length;u>0&&(o[l-1][4]=r),u<f-10?(r[4]=o[l],iu(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const m=r[17];null!==m&&o!==m&&function Hs(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(m,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,u,m,f);const C=Hu(f,m),S=u[11],L=ld(S,m[7]);return null!==L&&function rn(n,r,o,u,l,f){u[0]=l,u[6]=r,Mc(n,u,o,1,l,f)}(l,m[6],S,u,L,C),r.attachToViewContainerRef(),iu(d_(m),f,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=eE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=Ms(this._lContainer,o);u&&($s(d_(this._lContainer),o),Hl(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=Ms(this._lContainer,o);return u&&null!=$s(d_(this._lContainer),o)?new Hd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function eE(n){return n[8]}function d_(n){return n[8]||(n[8]=[])}function tE(n,r){let o;const u=r[n.index];if($r(u))o=u;else{let l;if(8&n.type)l=pr(u);else{const f=r[11];l=f.createComment("");const m=hi(n,r);qa(f,ld(f,m),l,function fg(n,r){return n.nextSibling(r)}(f,m),!1)}r[n.index]=o=tf(u,r,l,n),$c(r,o)}return new X0(o,n,r)}class h_{constructor(r){this.queryList=r,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,l=[];for(let f=0;f<u;f++){const m=o.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new f_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==cE(r,o).matches&&this.queries[o].setDirty()}}class nE{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class p_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(r,l);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new p_(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class g_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new g_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(r,o,_I(o,f)),this.matchTNodeWithReadOption(r,o,Ba(o,r,f,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Ba(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ec||l===Ey||l===dg&&4&o.type)this.addMatch(o.index,-2);else{const f=Ba(o,r,l,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function _I(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function wI(n,r,o,u){return-1===o?function EI(n,r){return 11&n.type?Xl(n,r):4&n.type?_y(n,r):null}(r,n):-2===o?function II(n,r,o){return o===ec?Xl(r,n):o===dg?_y(r,n):o===Ey?tE(r,n):void 0}(n,r,u):oa(n,n[1],o,r)}function rE(n,r,o,u){const l=r[19].queries[u];if(null===l.matches){const f=n.data,m=o.matches,C=[];for(let S=0;S<m.length;S+=2){const L=m[S];C.push(L<0?null:wI(r,f[L],m[S+1],o.metadata.read))}l.matches=C}return l.matches}function m_(n,r,o,u){const l=n.queries.getByIndex(o),f=l.matches;if(null!==f){const m=rE(n,r,l,o);for(let C=0;C<f.length;C+=2){const S=f[C];if(S>0)u.push(m[C/2]);else{const L=f[C+1],Q=r[-S];for(let le=10;le<Q.length;le++){const Se=Q[le];Se[17]===Se[3]&&m_(Se[1],Se,L,u)}if(null!==Q[9]){const le=Q[9];for(let Se=0;Se<le.length;Se++){const Qe=le[Se];m_(Qe[1],Qe,L,u)}}}}}return u}function iE(n){const r=Dt(),o=Xn(),u=Ao();Fi(u+1);const l=cE(o,u);if(n.dirty&&function ya(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const f=l.crossesNgTemplate?m_(o,r,u,[]):rE(o,r,l,u);n.reset(f,Zf),n.notifyOnChanges()}return!0}return!1}function sE(n,r,o){const u=Xn();u.firstCreatePass&&(lE(u,new nE(n,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),uE(u,Dt(),r)}function oE(n,r,o,u){const l=Xn();if(l.firstCreatePass){const f=Or();lE(l,new nE(r,o,u),f.index),function CI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}uE(l,Dt(),o)}function aE(){return function DI(n,r){return n[19].queries[r].queryList}(Dt(),Ao())}function uE(n,r,o){const u=new c_(4==(4&o));Yh(n,r,u,u.destroy),null===r[19]&&(r[19]=new f_),r[19].queries.push(new h_(u))}function lE(n,r,o){null===n.queries&&(n.queries=new p_),n.queries.track(new g_(r,o))}function cE(n,r){return n.queries.getByIndex(r)}function Iy(...n){}const ME=new Mr("Application Initializer");let Dy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Iy,this.reject=Iy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(qd(f))o.push(f);else if(mf(f)){const m=new Promise((C,S)=>{f.subscribe({complete:C,error:S})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Vi(ME,8))},n.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xE=new Mr("AppId",{providedIn:"root",factory:function RE(){return`${w_()}${w_()}${w_()}`}});function w_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const OE=new Mr("Platform Initializer"),zI=new Mr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),PE=new Mr("appBootstrapListener");let WI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cy=new Mr("LocaleId",{providedIn:"root",factory:()=>Fl(Cy,xt.Optional|xt.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||oh}()}),ZI=new Mr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let YI=(()=>{class n{compileModuleSync(o){return new o_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=Po(Ft(o).declarations).reduce((m,C)=>{const S=z(C);return S&&m.push(new Gc(S)),m},[]);return new qI(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function I_(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Au{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ol(!1),this.onMicrotaskEmpty=new Ol(!1),this.onStable=new Ol(!1),this.onError=new Ol(!1),typeof Zone>"u")throw new We(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function eD(){let n=ut.requestAnimationFrame,r=ut.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rD(n){const r=()=>{!function nD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ut,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,C_(n),n.isCheckStableRunning=!0,D_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),C_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,m,C)=>{try{return FE(n),o.invokeTask(l,f,m,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),LE(n)}},onInvoke:(o,u,l,f,m,C,S)=>{try{return FE(n),o.invoke(l,f,m,C,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),LE(n)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,C_(n),D_(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Au.isInAngularZone())throw new We(909,!1)}static assertNotInAngularZone(){if(Au.isInAngularZone())throw new We(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,r,tD,Iy,Iy);try{return f.runTask(m,o,u)}finally{f.cancelTask(m)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const tD={};function D_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function C_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function FE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LE(n){n._nesting--,D_(n)}class iD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ol,this.onMicrotaskEmpty=new Ol,this.onStable=new Ol,this.onError=new Ol}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,l){return r.apply(o,u)}}const VE=new Mr(""),UE=new Mr("");let b_,sD=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function oD(n){b_=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Au.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(Vi(Au),Vi(BE),Vi(UE))},n.\u0275prov=zt({token:n,factory:n.\u0275fac}),n})(),BE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return b_?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xc=null;const jE=new Mr("AllowMultipleToken"),T_=new Mr("PlatformDestroyListeners");class lD{constructor(r,o){this.name=r,this.token=o}}function HE(n,r,o=[]){const u=`Platform: ${r}`,l=new Mr(u);return(f=[])=>{let m=A_();if(!m||m.injector.get(jE,!1)){const C=[...o,...f,{provide:l,useValue:!0}];n?n(C):function cD(n){if(Xc&&!Xc.get(jE,!1))throw new We(400,!1);Xc=n;const r=n.get(zE);(function $E(n){const r=n.get(OE,null);r&&r.forEach(o=>o())})(n)}(function GE(n=[],r){return Qa.create({name:r,providers:[{provide:bh,useValue:"platform"},{provide:T_,useValue:new Set([()=>Xc=null])},...n]})}(C,u))}return function hD(n){const r=A_();if(!r)throw new We(401,!1);return r}()}}function A_(){return Xc?.get(zE)??null}let zE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function KE(n,r){let o;return o="noop"===n?new iD:("zone.js"===n?void 0:n)||new Au(r),o}(u?.ngZone,function WE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:Au,useValue:l}];return l.run(()=>{const m=Qa.create({providers:f,parent:this.injector,name:o.moduleType.name}),C=o.create(m),S=C.injector.get(Vc,null);if(!S)throw new We(402,!1);return l.runOutsideAngular(()=>{const L=l.onError.subscribe({next:Q=>{S.handleError(Q)}});C.onDestroy(()=>{Ty(this._modules,C),L.unsubscribe()})}),function ZE(n,r,o){try{const u=o();return qd(u)?u.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(S,l,()=>{const L=C.injector.get(Dy);return L.runInitializers(),L.donePromise.then(()=>(function Xu(n){Ge(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Cy,oh)||oh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const l=qE({},u);return function aD(n,r,o){const u=new o_(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(by);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new We(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new We(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(T_,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Vi(Qa))},n.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qE(n,r){return Array.isArray(r)?r.reduce(qE,n):{...n,...r}}let by=(()=>{class n{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new V.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),m=new V.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Au.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ce.T)(f,m.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Wu;if(!this._injector.get(Dy).done)throw!l&&ht(o),new We(405,false);let m;m=l?o:this._injector.get(Jl).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const C=function uD(n){return n.isBoundToModule}(m)?void 0:this._injector.get(Sf),L=m.create(Qa.NULL,[],u||m.selector,C),Q=L.location.nativeElement,le=L.injector.get(VE,null);return le?.registerApplication(Q),L.onDestroy(()=>{this.detachView(L.hostView),Ty(this.components,L),le?.unregisterApplication(Q)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new We(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ty(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(PE,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ty(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new We(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Vi(Au),Vi(ql),Vi(Vc))},n.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ty(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let QE=!0,JE=!1;function pD(){return JE=!0,QE}function gD(){if(JE)throw new Error("Cannot enable prod mode after platform setup.");QE=!1}let mD=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,o){if(Xr(n)&&!o){const u=ti(n.index,r);return new Hd(u,u)}return 47&n.type?new Hd(r[16],r):null}(Or(),Dt(),16==(16&n))}class nw{constructor(){}supports(r){return zd(r)}create(r){return new CD(r)}}const DD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DD}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const m=!u||o&&o.currentIndex<iw(u,l,f)?o:u,C=iw(m,l,f),S=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{f||(f=[]);const L=C-l,Q=S-l;if(L!=Q){for(let Se=0;Se<L;Se++){const Qe=Se<f.length?f[Se]:f[Se]=0,Tt=Qe+Se;Q<=Tt&&Tt<L&&(f[Se]=Qe+1)}f[m.previousIndex]=Q-L}}C!==S&&r(m,C,S)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!zd(r))throw new We(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,f,m,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)f=r[C],m=this._trackByFn(C,f),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,f,m,C)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,C),u=!0),o=o._next}else l=0,function jp(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[fc()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,C=>{m=this._trackByFn(l,C),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,C,m,l)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,l){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,f,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,f,l)):r=this._addAfter(new bD(o,u),f,l),r}_verifyReinsertion(r,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?r=this._reinsertAfter(f,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,f=r._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const l=null===o?this._itHead:o._next;return r._next=l,r._prev=o,null===l?this._itTail=r:l._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new rw),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class bD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class rw{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new TD,this.map.set(o,u)),u.add(r)}get(r,o){const l=this.map.get(r);return l?l.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iw(n,r,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+r+l}class sw{constructor(){}supports(r){return r instanceof Map||Wd(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Wd(r)))throw new We(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,o);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const u=new SD(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class SD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ow(){return new O_([new nw])}let O_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||ow()),deps:[[n,new vi,new Dr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new We(901,!1)}}return n.\u0275prov=zt({token:n,providedIn:"root",factory:ow}),n})();function aw(){return new P_([new sw])}let P_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||aw()),deps:[[n,new vi,new Dr]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new We(901,!1)}}return n.\u0275prov=zt({token:n,providedIn:"root",factory:aw}),n})();const RD=HE(null,"core",[]);let OD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Vi(by))},n.\u0275mod=_e({type:n}),n.\u0275inj=nn({}),n})();function PD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(Bt,Fe,R)=>{R.d(Fe,{EJ:()=>us,F:()=>Ni,Fd:()=>pr,Fj:()=>ze,JJ:()=>xt,JL:()=>bn,Kr:()=>qi,NI:()=>Kr,On:()=>wo,Q7:()=>ho,UX:()=>Us,Wl:()=>re,YN:()=>Vo,_Y:()=>Fs,j3:()=>jo,kI:()=>ge,qQ:()=>ls,sg:()=>Fn,u:()=>di,u5:()=>Lr,wV:()=>dr});var d=R(4650),F=R(6895),V=R(8996),ce=R(4128),ae=R(4004);let we=(()=>{class k{constructor(M,Y){this._renderer=M,this._elementRef=Y,this.onChange=it=>{},this.onTouched=()=>{}}setProperty(M,Y){this._renderer.setProperty(this._elementRef.nativeElement,M,Y)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(d.Qsj),d.Y36(d.SBq))},k.\u0275dir=d.lG2({type:k}),k})(),Ce=(()=>{class k extends we{}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,features:[d.qOj]}),k})();const te=new d.OlP("NgValueAccessor"),Pe={provide:te,useExisting:(0,d.Gpc)(()=>re),multi:!0};let re=(()=>{class k extends Ce{writeValue(M){this.setProperty("checked",M)}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(M,Y){1&M&&d.NdJ("change",function(an){return Y.onChange(an.target.checked)})("blur",function(){return Y.onTouched()})},features:[d._Bn([Pe]),d.qOj]}),k})();const ue={provide:te,useExisting:(0,d.Gpc)(()=>ze),multi:!0},qe=new d.OlP("CompositionEventMode");let ze=(()=>{class k extends we{constructor(M,Y,it){super(M,Y),this._compositionMode=it,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function me(){const k=(0,F.q)()?(0,F.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(qe,8))},k.\u0275dir=d.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,Y){1&M&&d.NdJ("input",function(an){return Y._handleInput(an.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(an){return Y._compositionEnd(an.target.value)})},features:[d._Bn([ue]),d.qOj]}),k})();function wt(k){return null==k||("string"==typeof k||Array.isArray(k))&&0===k.length}function Be(k){return null!=k&&"number"==typeof k.length}const Me=new d.OlP("NgValidators"),Ct=new d.OlP("NgAsyncValidators"),mt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ge{static min(O){return st(O)}static max(O){return ot(O)}static required(O){return Et(O)}static requiredTrue(O){return function Ve(k){return!0===k.value?null:{required:!0}}(O)}static email(O){return function be(k){return wt(k.value)||mt.test(k.value)?null:{email:!0}}(O)}static minLength(O){return function Re(k){return O=>wt(O.value)||!Be(O.value)?null:O.value.length<k?{minlength:{requiredLength:k,actualLength:O.value.length}}:null}(O)}static maxLength(O){return function gt(k){return O=>Be(O.value)&&O.value.length>k?{maxlength:{requiredLength:k,actualLength:O.value.length}}:null}(O)}static pattern(O){return function ft(k){if(!k)return jt;let O,M;return"string"==typeof k?(M="","^"!==k.charAt(0)&&(M+="^"),M+=k,"$"!==k.charAt(k.length-1)&&(M+="$"),O=new RegExp(M)):(M=k.toString(),O=k),Y=>{if(wt(Y.value))return null;const it=Y.value;return O.test(it)?null:{pattern:{requiredPattern:M,actualValue:it}}}}(O)}static nullValidator(O){return null}static compose(O){return Xe(O)}static composeAsync(O){return bt(O)}}function st(k){return O=>{if(wt(O.value)||wt(k))return null;const M=parseFloat(O.value);return!isNaN(M)&&M<k?{min:{min:k,actual:O.value}}:null}}function ot(k){return O=>{if(wt(O.value)||wt(k))return null;const M=parseFloat(O.value);return!isNaN(M)&&M>k?{max:{max:k,actual:O.value}}:null}}function Et(k){return wt(k.value)?{required:!0}:null}function jt(k){return null}function Vt(k){return null!=k}function Vn(k){return(0,d.QGY)(k)?(0,V.D)(k):k}function $e(k){let O={};return k.forEach(M=>{O=null!=M?{...O,...M}:O}),0===Object.keys(O).length?null:O}function je(k,O){return O.map(M=>M(k))}function Ge(k){return k.map(O=>function Je(k){return!k.validate}(O)?O:M=>O.validate(M))}function Xe(k){if(!k)return null;const O=k.filter(Vt);return 0==O.length?null:function(M){return $e(je(M,O))}}function yt(k){return null!=k?Xe(Ge(k)):null}function bt(k){if(!k)return null;const O=k.filter(Vt);return 0==O.length?null:function(M){const Y=je(M,O).map(Vn);return(0,ce.D)(Y).pipe((0,ae.U)($e))}}function At(k){return null!=k?bt(Ge(k)):null}function zt(k,O){return null===k?[O]:Array.isArray(k)?[...k,O]:[k,O]}function Pt(k){return k._rawValidators}function nn(k){return k._rawAsyncValidators}function ln(k){return k?Array.isArray(k)?k:[k]:[]}function mn(k,O){return Array.isArray(k)?k.includes(O):k===O}function Rn(k,O){const M=ln(O);return ln(k).forEach(it=>{mn(M,it)||M.push(it)}),M}function lr(k,O){return ln(O).filter(M=>!mn(k,M))}class qt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=yt(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=At(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,M){return!!this.control&&this.control.hasError(O,M)}getError(O,M){return this.control?this.control.getError(O,M):null}}class on extends qt{get formDirective(){return null}get path(){return null}}class Cn extends qt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jn{constructor(O){this._cd=O}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let xt=(()=>{class k extends jn{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(Cn,2))},k.\u0275dir=d.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,Y){2&M&&d.ekj("ng-untouched",Y.isUntouched)("ng-touched",Y.isTouched)("ng-pristine",Y.isPristine)("ng-dirty",Y.isDirty)("ng-valid",Y.isValid)("ng-invalid",Y.isInvalid)("ng-pending",Y.isPending)},features:[d.qOj]}),k})(),bn=(()=>{class k extends jn{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(on,10))},k.\u0275dir=d.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,Y){2&M&&d.ekj("ng-untouched",Y.isUntouched)("ng-touched",Y.isTouched)("ng-pristine",Y.isPristine)("ng-dirty",Y.isDirty)("ng-valid",Y.isValid)("ng-invalid",Y.isInvalid)("ng-pending",Y.isPending)("ng-submitted",Y.isSubmitted)},features:[d.qOj]}),k})();const Yt="VALID",Jt="INVALID",On="PENDING",qn="DISABLED";function et(k){return(De(k)?k.validators:k)||null}function q(k){return Array.isArray(k)?yt(k):k||null}function H(k,O){return(De(O)?O.asyncValidators:k)||null}function _e(k){return Array.isArray(k)?At(k):k||null}function De(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}function ee(k,O,M){const Y=k.controls;if(!(O?Object.keys(Y):Y).length)throw new d.vHH(1e3,"");if(!Y[M])throw new d.vHH(1001,"")}function ie(k,O,M){k._forEachChild((Y,it)=>{if(void 0===M[it])throw new d.vHH(1002,"")})}class Z{constructor(O,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=O,this._rawAsyncValidators=M,this._composedValidatorFn=q(this._rawValidators),this._composedAsyncValidatorFn=_e(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===Yt}get invalid(){return this.status===Jt}get pending(){return this.status==On}get disabled(){return this.status===qn}get enabled(){return this.status!==qn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._rawValidators=O,this._composedValidatorFn=q(O)}setAsyncValidators(O){this._rawAsyncValidators=O,this._composedAsyncValidatorFn=_e(O)}addValidators(O){this.setValidators(Rn(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(Rn(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(lr(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(lr(O,this._rawAsyncValidators))}hasValidator(O){return mn(this._rawValidators,O)}hasAsyncValidator(O){return mn(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=On,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const M=this._parentMarkedDirty(O.onlySelf);this.status=qn,this.errors=null,this._forEachChild(Y=>{Y.disable({...O,onlySelf:!0})}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...O,skipPristineCheck:M}),this._onDisabledChange.forEach(Y=>Y(!0))}enable(O={}){const M=this._parentMarkedDirty(O.onlySelf);this.status=Yt,this._forEachChild(Y=>{Y.enable({...O,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors({...O,skipPristineCheck:M}),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}getRawValue(){return this.value}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yt||this.status===On)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qn:Yt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=On,this._hasOwnPendingAsyncValidator=!0;const M=Vn(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,M={}){this.errors=O,this._updateControlsErrors(!1!==M.emitEvent)}get(O){let M=O;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((Y,it)=>Y&&Y._find(it),this)}getError(O,M){const Y=M?this.get(M):this;return Y&&Y.errors?Y.errors[O]:null}hasError(O,M){return!!this.getError(O,M)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?qn:this.errors?Jt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(On)?On:this._anyControlsHaveStatus(Jt)?Jt:Yt}_anyControlsHaveStatus(O){return this._anyControls(M=>M.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){De(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(O){return null}}class z extends Z{constructor(O,M,Y){super(et(M),H(Y,M)),this.controls=O,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,M){return this.controls[O]?this.controls[O]:(this.controls[O]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(O,M,Y={}){this.registerControl(O,M),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl(O,M={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(O,M,Y={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],M&&this.registerControl(O,M),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,M={}){ie(this,0,O),Object.keys(O).forEach(Y=>{ee(this,!0,Y),this.controls[Y].setValue(O[Y],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(O,M={}){null!=O&&(Object.keys(O).forEach(Y=>{const it=this.controls[Y];it&&it.patchValue(O[Y],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(O={},M={}){this._forEachChild((Y,it)=>{Y.reset(O[it],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(O,M,Y)=>(O[Y]=M.getRawValue(),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(M,Y)=>!!Y._syncPendingControls()||M);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){Object.keys(this.controls).forEach(M=>{const Y=this.controls[M];Y&&O(Y,M)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const[M,Y]of Object.entries(this.controls))if(this.contains(M)&&O(Y))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,Y,it)=>((Y.enabled||this.disabled)&&(M[it]=Y.value),M))}_reduceChildren(O,M){let Y=O;return this._forEachChild((it,an)=>{Y=M(Y,it,an)}),Y}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(O){return this.controls.hasOwnProperty(O)?this.controls[O]:null}}class ht extends z{}function sn(k,O){return[...O.path,k]}function oe(k,O){Ke(k,O),O.valueAccessor.writeValue(k.value),k.disabled&&O.valueAccessor.setDisabledState?.(!0),function yn(k,O){O.valueAccessor.registerOnChange(M=>{k._pendingValue=M,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&Le(k,O)})}(k,O),function St(k,O){const M=(Y,it)=>{O.valueAccessor.writeValue(Y),it&&O.viewToModelUpdate(Y)};k.registerOnChange(M),O._registerOnDestroy(()=>{k._unregisterOnChange(M)})}(k,O),function Ue(k,O){O.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&Le(k,O),"submit"!==k.updateOn&&k.markAsTouched()})}(k,O),function Ne(k,O){if(O.valueAccessor.setDisabledState){const M=Y=>{O.valueAccessor.setDisabledState(Y)};k.registerOnDisabledChange(M),O._registerOnDestroy(()=>{k._unregisterOnDisabledChange(M)})}}(k,O)}function de(k,O,M=!0){const Y=()=>{};O.valueAccessor&&(O.valueAccessor.registerOnChange(Y),O.valueAccessor.registerOnTouched(Y)),Ut(k,O),k&&(O._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function ne(k,O){k.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(O)})}function Ke(k,O){const M=Pt(k);null!==O.validator?k.setValidators(zt(M,O.validator)):"function"==typeof M&&k.setValidators([M]);const Y=nn(k);null!==O.asyncValidator?k.setAsyncValidators(zt(Y,O.asyncValidator)):"function"==typeof Y&&k.setAsyncValidators([Y]);const it=()=>k.updateValueAndValidity();ne(O._rawValidators,it),ne(O._rawAsyncValidators,it)}function Ut(k,O){let M=!1;if(null!==k){if(null!==O.validator){const it=Pt(k);if(Array.isArray(it)&&it.length>0){const an=it.filter(Qn=>Qn!==O.validator);an.length!==it.length&&(M=!0,k.setValidators(an))}}if(null!==O.asyncValidator){const it=nn(k);if(Array.isArray(it)&&it.length>0){const an=it.filter(Qn=>Qn!==O.asyncValidator);an.length!==it.length&&(M=!0,k.setAsyncValidators(an))}}}const Y=()=>{};return ne(O._rawValidators,Y),ne(O._rawAsyncValidators,Y),M}function Le(k,O){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function It(k,O){Ke(k,O)}function Rr(k,O){if(!k.hasOwnProperty("model"))return!1;const M=k.model;return!!M.isFirstChange()||!Object.is(O,M.currentValue)}function Wr(k,O){k._syncPendingControls(),O.forEach(M=>{const Y=M.control;"submit"===Y.updateOn&&Y._pendingChange&&(M.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}function Nr(k,O){if(!O)return null;let M,Y,it;return Array.isArray(O),O.forEach(an=>{an.constructor===ze?M=an:function Gr(k){return Object.getPrototypeOf(k.constructor)===Ce}(an)?Y=an:it=an}),it||Y||M||null}const ui={provide:on,useExisting:(0,d.Gpc)(()=>Ni)},ks=(()=>Promise.resolve())();let Ni=(()=>{class k extends on{constructor(M,Y){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new z({},yt(M),At(Y))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(M){ks.then(()=>{const Y=this._findContainer(M.path);M.control=Y.registerControl(M.name,M.control),oe(M.control,M),M.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(M)})}getControl(M){return this.form.get(M.path)}removeControl(M){ks.then(()=>{const Y=this._findContainer(M.path);Y&&Y.removeControl(M.name),this._directives.delete(M)})}addFormGroup(M){ks.then(()=>{const Y=this._findContainer(M.path),it=new z({});It(it,M),Y.registerControl(M.name,it),it.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(M){ks.then(()=>{const Y=this._findContainer(M.path);Y&&Y.removeControl(M.name)})}getFormGroup(M){return this.form.get(M.path)}updateModel(M,Y){ks.then(()=>{this.form.get(M.path).setValue(Y)})}setValue(M){this.control.setValue(M)}onSubmit(M){return this.submitted=!0,Wr(this.form,this._directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(M){return M.pop(),M.length?this.form.get(M):this.form}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(Me,10),d.Y36(Ct,10))},k.\u0275dir=d.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(M,Y){1&M&&d.NdJ("submit",function(an){return Y.onSubmit(an)})("reset",function(){return Y.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([ui]),d.qOj]}),k})();function Ar(k,O){const M=k.indexOf(O);M>-1&&k.splice(M,1)}function Ki(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}const Kr=class extends Z{constructor(O=null,M,Y){super(et(M),H(Y,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(O),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),De(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=Ki(O)?O.value:O)}setValue(O,M={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(O,M={}){this.setValue(O,M)}reset(O=this.defaultValue,M={}){this._applyFormState(O),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){Ar(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){Ar(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){Ki(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}},Bi={provide:Cn,useExisting:(0,d.Gpc)(()=>wo)},Zs=(()=>Promise.resolve())();let wo=(()=>{class k extends Cn{constructor(M,Y,it,an,Qn){super(),this._changeDetectorRef=Qn,this.control=new Kr,this._registered=!1,this.update=new d.vpe,this._parent=M,this._setValidators(Y),this._setAsyncValidators(it),this.valueAccessor=Nr(0,an)}ngOnChanges(M){if(this._checkForErrors(),!this._registered||"name"in M){if(this._registered&&(this._checkName(),this.formDirective)){const Y=M.name.previousValue;this.formDirective.removeControl({name:Y,path:this._getPath(Y)})}this._setUpControl()}"isDisabled"in M&&this._updateDisabled(M),Rr(M,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){oe(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(M){Zs.then(()=>{this.control.setValue(M,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(M){const Y=M.isDisabled.currentValue,it=0!==Y&&(0,d.D6c)(Y);Zs.then(()=>{it&&!this.control.disabled?this.control.disable():!it&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(M){return this._parent?sn(M,this._parent):[M]}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(on,9),d.Y36(Me,10),d.Y36(Ct,10),d.Y36(te,10),d.Y36(d.sBO,8))},k.\u0275dir=d.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Bi]),d.qOj,d.TTD]}),k})(),Fs=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=d.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})();const ma={provide:te,useExisting:(0,d.Gpc)(()=>dr),multi:!0};let dr=(()=>{class k extends Ce{writeValue(M){this.setProperty("value",M??"")}registerOnChange(M){this.onChange=Y=>{M(""==Y?null:parseFloat(Y))}}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(M,Y){1&M&&d.NdJ("input",function(an){return Y.onChange(an.target.value)})("blur",function(){return Y.onTouched()})},features:[d._Bn([ma]),d.qOj]}),k})(),lo=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=d.oAB({type:k}),k.\u0275inj=d.cJS({}),k})();const Lt=new d.OlP("NgModelWithFormControlWarning"),tr={provide:on,useExisting:(0,d.Gpc)(()=>Fn)};let Fn=(()=>{class k extends on{constructor(M,Y){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(M),this._setAsyncValidators(Y)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ut(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const Y=this.form.get(M.path);return oe(Y,M),Y.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),Y}getControl(M){return this.form.get(M.path)}removeControl(M){de(M.control||null,M,!1),function Ns(k,O){const M=k.indexOf(O);M>-1&&k.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,Y){this.form.get(M.path).setValue(Y)}onSubmit(M){return this.submitted=!0,Wr(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const Y=M.control,it=this.form.get(M.path);Y!==it&&(de(Y||null,M),(k=>k instanceof Kr)(it)&&(oe(it,M),M.control=it))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const Y=this.form.get(M.path);It(Y,M),Y.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const Y=this.form.get(M.path);Y&&function wn(k,O){return Ut(k,O)}(Y,M)&&Y.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ke(this.form,this),this._oldForm&&Ut(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(Me,10),d.Y36(Ct,10))},k.\u0275dir=d.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(M,Y){1&M&&d.NdJ("submit",function(an){return Y.onSubmit(an)})("reset",function(){return Y.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([tr]),d.qOj,d.TTD]}),k})();const ci={provide:Cn,useExisting:(0,d.Gpc)(()=>di)};let di=(()=>{class k extends Cn{constructor(M,Y,it,an,Qn){super(),this._ngModelWarningConfig=Qn,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(Y),this._setAsyncValidators(it),this.valueAccessor=Nr(0,an)}set isDisabled(M){}ngOnChanges(M){this._added||this._setUpControl(),Rr(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return sn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(M){return new(M||k)(d.Y36(on,13),d.Y36(Me,10),d.Y36(Ct,10),d.Y36(te,10),d.Y36(Lt,8))},k.\u0275dir=d.lG2({type:k,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([ci]),d.qOj,d.TTD]}),k})();const ea={provide:te,useExisting:(0,d.Gpc)(()=>us),multi:!0};function as(k,O){return null==k?`${O}`:(O&&"object"==typeof O&&(O="Object"),`${k}: ${O}`.slice(0,50))}let us=(()=>{class k extends Ce{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const it=as(this._getOptionId(M),M);this.setProperty("value",it)}registerOnChange(M){this.onChange=Y=>{this.value=this._getOptionValue(Y),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const Y of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Y),M))return Y;return null}_getOptionValue(M){const Y=function Lo(k){return k.split(":")[0]}(M);return this._optionMap.has(Y)?this._optionMap.get(Y):M}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,Y){1&M&&d.NdJ("change",function(an){return Y.onChange(an.target.value)})("blur",function(){return Y.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([ea]),d.qOj]}),k})(),Vo=(()=>{class k{constructor(M,Y,it){this._element=M,this._renderer=Y,this._select=it,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(as(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(us,9))},k.\u0275dir=d.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const Co={provide:te,useExisting:(0,d.Gpc)(()=>Fr),multi:!0};function Ls(k,O){return null==k?`${O}`:("string"==typeof O&&(O=`'${O}'`),O&&"object"==typeof O&&(O="Object"),`${k}: ${O}`.slice(0,50))}let Fr=(()=>{class k extends Ce{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let Y;if(this.value=M,Array.isArray(M)){const it=M.map(an=>this._getOptionId(an));Y=(an,Qn)=>{an._setSelected(it.indexOf(Qn.toString())>-1)}}else Y=(it,an)=>{it._setSelected(!1)};this._optionMap.forEach(Y)}registerOnChange(M){this.onChange=Y=>{const it=[],an=Y.selectedOptions;if(void 0!==an){const Qn=an;for(let Xs=0;Xs<Qn.length;Xs++){const mi=this._getOptionValue(Qn[Xs].value);it.push(mi)}}else{const Qn=Y.options;for(let Xs=0;Xs<Qn.length;Xs++){const ws=Qn[Xs];if(ws.selected){const mi=this._getOptionValue(ws.value);it.push(mi)}}}this.value=it,M(it)}}_registerOption(M){const Y=(this._idCounter++).toString();return this._optionMap.set(Y,M),Y}_getOptionId(M){for(const Y of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Y)._value,M))return Y;return null}_getOptionValue(M){const Y=function Zi(k){return k.split(":")[0]}(M);return this._optionMap.has(Y)?this._optionMap.get(Y)._value:M}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,Y){1&M&&d.NdJ("change",function(an){return Y.onChange(an.target)})("blur",function(){return Y.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([Co]),d.qOj]}),k})(),qi=(()=>{class k{constructor(M,Y,it){this._element=M,this._renderer=Y,this._select=it,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue(Ls(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue(Ls(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Fr,9))},k.\u0275dir=d.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();function _s(k){return"number"==typeof k?k:parseFloat(k)}let co=(()=>{class k{constructor(){this._validator=jt}ngOnChanges(M){if(this.inputName in M){const Y=this.normalizeInput(M[this.inputName].currentValue);this._enabled=this.enabled(Y),this._validator=this._enabled?this.createValidator(Y):jt,this._onChange&&this._onChange()}}validate(M){return this._validator(M)}registerOnValidatorChange(M){this._onChange=M}enabled(M){return null!=M}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=d.lG2({type:k,features:[d.TTD]}),k})();const ta={provide:Me,useExisting:(0,d.Gpc)(()=>pr),multi:!0};let pr=(()=>{class k extends co{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=M=>_s(M),this.createValidator=M=>ot(M)}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(M,Y){2&M&&d.uIk("max",Y._enabled?Y.max:null)},inputs:{max:"max"},features:[d._Bn([ta]),d.qOj]}),k})();const Ys={provide:Me,useExisting:(0,d.Gpc)(()=>ls),multi:!0};let ls=(()=>{class k extends co{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=M=>_s(M),this.createValidator=M=>st(M)}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(M,Y){2&M&&d.uIk("min",Y._enabled?Y.min:null)},inputs:{min:"min"},features:[d._Bn([Ys]),d.qOj]}),k})();const ji={provide:Me,useExisting:(0,d.Gpc)(()=>ho),multi:!0};let ho=(()=>{class k extends co{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=M=>Et}enabled(M){return M}}return k.\u0275fac=function(){let O;return function(Y){return(O||(O=d.n5z(k)))(Y||k)}}(),k.\u0275dir=d.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(M,Y){2&M&&d.uIk("required",Y._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([ji]),d.qOj]}),k})(),Ei=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=d.oAB({type:k}),k.\u0275inj=d.cJS({imports:[lo]}),k})(),Lr=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=d.oAB({type:k}),k.\u0275inj=d.cJS({imports:[Ei]}),k})(),Us=(()=>{class k{static withConfig(M){return{ngModule:k,providers:[{provide:Lt,useValue:M.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=d.oAB({type:k}),k.\u0275inj=d.cJS({imports:[Ei]}),k})();class To extends Z{constructor(O,M,Y){super(et(M),H(Y,M)),this.controls=O,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[this._adjustIndex(O)]}push(O,M={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(O,M,Y={}){this.controls.splice(O,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:Y.emitEvent})}removeAt(O,M={}){let Y=this._adjustIndex(O);Y<0&&(Y=0),this.controls[Y]&&this.controls[Y]._registerOnCollectionChange(()=>{}),this.controls.splice(Y,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(O,M,Y={}){let it=this._adjustIndex(O);it<0&&(it=0),this.controls[it]&&this.controls[it]._registerOnCollectionChange(()=>{}),this.controls.splice(it,1),M&&(this.controls.splice(it,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,M={}){ie(this,0,O),O.forEach((Y,it)=>{ee(this,!1,it),this.at(it).setValue(Y,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(O,M={}){null!=O&&(O.forEach((Y,it)=>{this.at(it)&&this.at(it).patchValue(Y,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(O=[],M={}){this._forEachChild((Y,it)=>{Y.reset(O[it],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(O=>O.getRawValue())}clear(O={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_adjustIndex(O){return O<0?O+this.length:O}_syncPendingControls(){let O=this.controls.reduce((M,Y)=>!!Y._syncPendingControls()||M,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){this.controls.forEach((M,Y)=>{O(M,Y)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(M=>M.enabled&&O(M))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}_find(O){return this.at(O)??null}}function Dt(k){return!!k&&(void 0!==k.asyncValidators||void 0!==k.validators||void 0!==k.updateOn)}let Xn=(()=>{class k{constructor(){this.useNonNullable=!1}get nonNullable(){const M=new k;return M.useNonNullable=!0,M}group(M,Y=null){const it=this._reduceControls(M);let an={};return Dt(Y)?an=Y:null!==Y&&(an.validators=Y.validator,an.asyncValidators=Y.asyncValidator),new z(it,an)}record(M,Y=null){const it=this._reduceControls(M);return new ht(it,Y)}control(M,Y,it){let an={};return this.useNonNullable?(Dt(Y)?an=Y:(an.validators=Y,an.asyncValidators=it),new Kr(M,{...an,nonNullable:!0})):new Kr(M,Y,it)}array(M,Y,it){const an=M.map(Qn=>this._createControl(Qn));return new To(an,Y,it)}_reduceControls(M){const Y={};return Object.keys(M).forEach(it=>{Y[it]=this._createControl(M[it])}),Y}_createControl(M){return M instanceof Kr||M instanceof Z?M:Array.isArray(M)?this.control(M[0],M.length>1?M[1]:null,M.length>2?M[2]:null):this.control(M)}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac,providedIn:Us}),k})(),jo=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=d.Yz7({token:k,factory:function(){return(0,d.f3M)(Xn).nonNullable},providedIn:Us}),k})()},1481:(Bt,Fe,R)=>{R.d(Fe,{Dx:()=>rt,b2:()=>$n,q6:()=>br});var d=R(6895),F=R(4650);class V extends d.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ce extends V{static makeCurrent(){(0,d.HT)(new ce)}onAndCancel(de,ne,Ne){return de.addEventListener(ne,Ne,!1),()=>{de.removeEventListener(ne,Ne,!1)}}dispatchEvent(de,ne){de.dispatchEvent(ne)}remove(de){de.parentNode&&de.parentNode.removeChild(de)}createElement(de,ne){return(ne=ne||this.getDefaultDocument()).createElement(de)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(de){return de.nodeType===Node.ELEMENT_NODE}isShadowRoot(de){return de instanceof DocumentFragment}getGlobalEventTarget(de,ne){return"window"===ne?window:"document"===ne?de:"body"===ne?de.body:null}getBaseHref(de){const ne=function we(){return ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null}();return null==ne?null:function te(oe){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",oe);const de=Ce.pathname;return"/"===de.charAt(0)?de:`/${de}`}(ne)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(de){return(0,d.Mx)(document.cookie,de)}}let Ce,ae=null;const Pe=new F.OlP("TRANSITION_ID"),ue=[{provide:F.ip1,useFactory:function re(oe,de,ne){return()=>{ne.get(F.CZH).donePromise.then(()=>{const Ne=(0,d.q)(),Ke=de.querySelectorAll(`style[ng-transition="${oe}"]`);for(let Ut=0;Ut<Ke.length;Ut++)Ne.remove(Ke[Ut])})}},deps:[Pe,d.K0,F.zs3],multi:!0}];let qe=(()=>{class oe{build(){return new XMLHttpRequest}}return oe.\u0275fac=function(ne){return new(ne||oe)},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const ze=new F.OlP("EventManagerPlugins");let We=(()=>{class oe{constructor(ne,Ne){this._zone=Ne,this._eventNameToPlugin=new Map,ne.forEach(Ke=>Ke.manager=this),this._plugins=ne.slice().reverse()}addEventListener(ne,Ne,Ke){return this._findPluginFor(Ne).addEventListener(ne,Ne,Ke)}addGlobalEventListener(ne,Ne,Ke){return this._findPluginFor(Ne).addGlobalEventListener(ne,Ne,Ke)}getZone(){return this._zone}_findPluginFor(ne){const Ne=this._eventNameToPlugin.get(ne);if(Ne)return Ne;const Ke=this._plugins;for(let Ut=0;Ut<Ke.length;Ut++){const yn=Ke[Ut];if(yn.supports(ne))return this._eventNameToPlugin.set(ne,yn),yn}throw new Error(`No event manager plugin found for event ${ne}`)}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(ze),F.LFG(F.R0b))},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class wt{constructor(de){this._doc=de}addGlobalEventListener(de,ne,Ne){const Ke=(0,d.q)().getGlobalEventTarget(this._doc,de);if(!Ke)throw new Error(`Unsupported event target ${Ke} for event ${ne}`);return this.addEventListener(Ke,ne,Ne)}}let Be=(()=>{class oe{constructor(){this._stylesSet=new Set}addStyles(ne){const Ne=new Set;ne.forEach(Ke=>{this._stylesSet.has(Ke)||(this._stylesSet.add(Ke),Ne.add(Ke))}),this.onStylesAdded(Ne)}onStylesAdded(ne){}getAllStyles(){return Array.from(this._stylesSet)}}return oe.\u0275fac=function(ne){return new(ne||oe)},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),Me=(()=>{class oe extends Be{constructor(ne){super(),this._doc=ne,this._hostNodes=new Map,this._hostNodes.set(ne.head,[])}_addStylesToHost(ne,Ne,Ke){ne.forEach(Ut=>{const yn=this._doc.createElement("style");yn.textContent=Ut,Ke.push(Ne.appendChild(yn))})}addHost(ne){const Ne=[];this._addStylesToHost(this._stylesSet,ne,Ne),this._hostNodes.set(ne,Ne)}removeHost(ne){const Ne=this._hostNodes.get(ne);Ne&&Ne.forEach(Ct),this._hostNodes.delete(ne)}onStylesAdded(ne){this._hostNodes.forEach((Ne,Ke)=>{this._addStylesToHost(ne,Ke,Ne)})}ngOnDestroy(){this._hostNodes.forEach(ne=>ne.forEach(Ct))}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(d.K0))},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})();function Ct(oe){(0,d.q)().remove(oe)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ge=/%COMP%/g;function gt(oe,de,ne){for(let Ne=0;Ne<de.length;Ne++){let Ke=de[Ne];Array.isArray(Ke)?gt(oe,Ke,ne):(Ke=Ke.replace(ge,oe),ne.push(Ke))}return ne}function ft(oe){return de=>{if("__ngUnwrap__"===de)return oe;!1===oe(de)&&(de.preventDefault(),de.returnValue=!1)}}let Vt=(()=>{class oe{constructor(ne,Ne,Ke){this.eventManager=ne,this.sharedStylesHost=Ne,this.appId=Ke,this.rendererByCompId=new Map,this.defaultRenderer=new Vn(ne)}createRenderer(ne,Ne){if(!ne||!Ne)return this.defaultRenderer;switch(Ne.encapsulation){case F.ifc.Emulated:{let Ke=this.rendererByCompId.get(Ne.id);return Ke||(Ke=new Ge(this.eventManager,this.sharedStylesHost,Ne,this.appId),this.rendererByCompId.set(Ne.id,Ke)),Ke.applyToHost(ne),Ke}case 1:case F.ifc.ShadowDom:return new Xe(this.eventManager,this.sharedStylesHost,ne,Ne);default:if(!this.rendererByCompId.has(Ne.id)){const Ke=gt(Ne.id,Ne.styles,[]);this.sharedStylesHost.addStyles(Ke),this.rendererByCompId.set(Ne.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(We),F.LFG(Me),F.LFG(F.AFp))},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class Vn{constructor(de){this.eventManager=de,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(de,ne){return ne?document.createElementNS(mt[ne]||ne,de):document.createElement(de)}createComment(de){return document.createComment(de)}createText(de){return document.createTextNode(de)}appendChild(de,ne){(Je(de)?de.content:de).appendChild(ne)}insertBefore(de,ne,Ne){de&&(Je(de)?de.content:de).insertBefore(ne,Ne)}removeChild(de,ne){de&&de.removeChild(ne)}selectRootElement(de,ne){let Ne="string"==typeof de?document.querySelector(de):de;if(!Ne)throw new Error(`The selector "${de}" did not match any elements`);return ne||(Ne.textContent=""),Ne}parentNode(de){return de.parentNode}nextSibling(de){return de.nextSibling}setAttribute(de,ne,Ne,Ke){if(Ke){ne=Ke+":"+ne;const Ut=mt[Ke];Ut?de.setAttributeNS(Ut,ne,Ne):de.setAttribute(ne,Ne)}else de.setAttribute(ne,Ne)}removeAttribute(de,ne,Ne){if(Ne){const Ke=mt[Ne];Ke?de.removeAttributeNS(Ke,ne):de.removeAttribute(`${Ne}:${ne}`)}else de.removeAttribute(ne)}addClass(de,ne){de.classList.add(ne)}removeClass(de,ne){de.classList.remove(ne)}setStyle(de,ne,Ne,Ke){Ke&(F.JOm.DashCase|F.JOm.Important)?de.style.setProperty(ne,Ne,Ke&F.JOm.Important?"important":""):de.style[ne]=Ne}removeStyle(de,ne,Ne){Ne&F.JOm.DashCase?de.style.removeProperty(ne):de.style[ne]=""}setProperty(de,ne,Ne){de[ne]=Ne}setValue(de,ne){de.nodeValue=ne}listen(de,ne,Ne){return"string"==typeof de?this.eventManager.addGlobalEventListener(de,ne,ft(Ne)):this.eventManager.addEventListener(de,ne,ft(Ne))}}function Je(oe){return"TEMPLATE"===oe.tagName&&void 0!==oe.content}class Ge extends Vn{constructor(de,ne,Ne,Ke){super(de),this.component=Ne;const Ut=gt(Ke+"-"+Ne.id,Ne.styles,[]);ne.addStyles(Ut),this.contentAttr=function be(oe){return"_ngcontent-%COMP%".replace(ge,oe)}(Ke+"-"+Ne.id),this.hostAttr=function Re(oe){return"_nghost-%COMP%".replace(ge,oe)}(Ke+"-"+Ne.id)}applyToHost(de){super.setAttribute(de,this.hostAttr,"")}createElement(de,ne){const Ne=super.createElement(de,ne);return super.setAttribute(Ne,this.contentAttr,""),Ne}}class Xe extends Vn{constructor(de,ne,Ne,Ke){super(de),this.sharedStylesHost=ne,this.hostEl=Ne,this.shadowRoot=Ne.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ut=gt(Ke.id,Ke.styles,[]);for(let yn=0;yn<Ut.length;yn++){const Ue=document.createElement("style");Ue.textContent=Ut[yn],this.shadowRoot.appendChild(Ue)}}nodeOrShadowRoot(de){return de===this.hostEl?this.shadowRoot:de}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(de,ne){return super.appendChild(this.nodeOrShadowRoot(de),ne)}insertBefore(de,ne,Ne){return super.insertBefore(this.nodeOrShadowRoot(de),ne,Ne)}removeChild(de,ne){return super.removeChild(this.nodeOrShadowRoot(de),ne)}parentNode(de){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(de)))}}let yt=(()=>{class oe extends wt{constructor(ne){super(ne)}supports(ne){return!0}addEventListener(ne,Ne,Ke){return ne.addEventListener(Ne,Ke,!1),()=>this.removeEventListener(ne,Ne,Ke)}removeEventListener(ne,Ne,Ke){return ne.removeEventListener(Ne,Ke)}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(d.K0))},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const bt=["alt","control","meta","shift"],At={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zt={alt:oe=>oe.altKey,control:oe=>oe.ctrlKey,meta:oe=>oe.metaKey,shift:oe=>oe.shiftKey};let Pt=(()=>{class oe extends wt{constructor(ne){super(ne)}supports(ne){return null!=oe.parseEventName(ne)}addEventListener(ne,Ne,Ke){const Ut=oe.parseEventName(Ne),yn=oe.eventCallback(Ut.fullKey,Ke,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,d.q)().onAndCancel(ne,Ut.domEventName,yn))}static parseEventName(ne){const Ne=ne.toLowerCase().split("."),Ke=Ne.shift();if(0===Ne.length||"keydown"!==Ke&&"keyup"!==Ke)return null;const Ut=oe._normalizeKey(Ne.pop());let yn="",Ue=Ne.indexOf("code");if(Ue>-1&&(Ne.splice(Ue,1),yn="code."),bt.forEach(St=>{const It=Ne.indexOf(St);It>-1&&(Ne.splice(It,1),yn+=St+".")}),yn+=Ut,0!=Ne.length||0===Ut.length)return null;const Le={};return Le.domEventName=Ke,Le.fullKey=yn,Le}static matchEventFullKeyCode(ne,Ne){let Ke=At[ne.key]||ne.key,Ut="";return Ne.indexOf("code.")>-1&&(Ke=ne.code,Ut="code."),!(null==Ke||!Ke)&&(Ke=Ke.toLowerCase()," "===Ke?Ke="space":"."===Ke&&(Ke="dot"),bt.forEach(yn=>{yn!==Ke&&(0,zt[yn])(ne)&&(Ut+=yn+".")}),Ut+=Ke,Ut===Ne)}static eventCallback(ne,Ne,Ke){return Ut=>{oe.matchEventFullKeyCode(Ut,ne)&&Ke.runGuarded(()=>Ne(Ut))}}static _normalizeKey(ne){return"esc"===ne?"escape":ne}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(d.K0))},oe.\u0275prov=F.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const br=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:d.bD},{provide:F.g9A,useValue:function qt(){ce.makeCurrent()},multi:!0},{provide:d.K0,useFactory:function Cn(){return(0,F.RDi)(document),document},deps:[]}]),_r=new F.OlP(""),xt=[{provide:F.rWj,useClass:class me{addToWindow(de){F.dqk.getAngularTestability=(Ne,Ke=!0)=>{const Ut=de.findTestabilityInTree(Ne,Ke);if(null==Ut)throw new Error("Could not find testability for element.");return Ut},F.dqk.getAllAngularTestabilities=()=>de.getAllTestabilities(),F.dqk.getAllAngularRootElements=()=>de.getAllRootElements(),F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(Ne=>{const Ke=F.dqk.getAllAngularTestabilities();let Ut=Ke.length,yn=!1;const Ue=function(Le){yn=yn||Le,Ut--,0==Ut&&Ne(yn)};Ke.forEach(function(Le){Le.whenStable(Ue)})})}findTestabilityInTree(de,ne,Ne){return null==ne?null:de.getTestability(ne)??(Ne?(0,d.q)().isShadowRoot(ne)?this.findTestabilityInTree(de,ne.host,!0):this.findTestabilityInTree(de,ne.parentElement,!0):null)}},deps:[]},{provide:F.lri,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]}],bn=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function on(){return new F.qLn},deps:[]},{provide:ze,useClass:yt,multi:!0,deps:[d.K0,F.R0b,F.Lbi]},{provide:ze,useClass:Pt,multi:!0,deps:[d.K0]},{provide:Vt,useClass:Vt,deps:[We,Me,F.AFp]},{provide:F.FYo,useExisting:Vt},{provide:Be,useExisting:Me},{provide:Me,useClass:Me,deps:[d.K0]},{provide:We,useClass:We,deps:[ze,F.R0b]},{provide:d.JF,useClass:qe,deps:[]},[]];let $n=(()=>{class oe{constructor(ne){}static withServerTransition(ne){return{ngModule:oe,providers:[{provide:F.AFp,useValue:ne.appId},{provide:Pe,useExisting:F.AFp},ue]}}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(_r,12))},oe.\u0275mod=F.oAB({type:oe}),oe.\u0275inj=F.cJS({providers:[...bn,...xt],imports:[d.ez,F.hGG]}),oe})(),rt=(()=>{class oe{constructor(ne){this._doc=ne}getTitle(){return this._doc.title}setTitle(ne){this._doc.title=ne||""}}return oe.\u0275fac=function(ne){return new(ne||oe)(F.LFG(d.K0))},oe.\u0275prov=F.Yz7({token:oe,factory:function(ne){let Ne=null;return Ne=ne?new ne:function Zn(){return new rt((0,F.LFG)(d.K0))}(),Ne},providedIn:"root"}),oe})();typeof window<"u"&&window},2827:(Bt,Fe,R)=>{R.d(Fe,{F0:()=>ii,rH:()=>bs,yS:()=>ja,Bz:()=>iu,lC:()=>hi});var d=R(4650),F=R(8996),V=R(9646),ce=R(1135),ae=R(6805),we=R(9751),Ce=R(4742),te=R(4671),Pe=R(3268),re=R(3269),ue=R(1810),me=R(5403),qe=R(9672);function ze(..._){const E=(0,re.yG)(_),y=(0,re.jO)(_),{args:A,keys:P}=(0,Ce.D)(_);if(0===A.length)return(0,F.D)([],E);const W=new we.y(function We(_,E,y=te.y){return A=>{wt(E,()=>{const{length:P}=_,W=new Array(P);let he=P,ye=P;for(let lt=0;lt<P;lt++)wt(E,()=>{const Gt=(0,F.D)(_[lt],E);let Gn=!1;Gt.subscribe((0,me.x)(A,cn=>{W[lt]=cn,Gn||(Gn=!0,ye--),ye||A.next(y(W.slice()))},()=>{--he||A.complete()}))},A)},A)}}(A,E,P?he=>(0,ue.n)(P,he):te.y));return y?W.pipe((0,Pe.Z)(y)):W}function wt(_,E,y){_?(0,qe.f)(y,_,E):E()}var Be=R(1350),Me=R(9770),Ct=R(9635),mt=R(2843),ge=R(515),st=R(4033),ot=R(7579),Et=R(6895),Ve=R(4004),be=R(3900),Re=R(5698),gt=R(8675),ft=R(9300),jt=R(5577),Vt=R(590),Vn=R(4351),$e=R(8505),je=R(8421),Je=R(4482);function Ge(_){return(0,Je.e)((E,y)=>{let W,A=null,P=!1;A=E.subscribe((0,me.x)(y,void 0,void 0,he=>{W=(0,je.Xf)(_(he,Ge(_)(E))),A?(A.unsubscribe(),A=null,W.subscribe(y)):P=!0})),P&&(A.unsubscribe(),A=null,W.subscribe(y))})}var Xe=R(5026);function yt(_){return _<=0?()=>ge.E:(0,Je.e)((E,y)=>{let A=[];E.subscribe((0,me.x)(y,P=>{A.push(P),_<A.length&&A.shift()},()=>{for(const P of A)y.next(P);y.complete()},void 0,()=>{A=null}))})}var bt=R(8068),At=R(6590);function zt(_,E){const y=arguments.length>=2;return A=>A.pipe(_?(0,ft.h)((P,W)=>_(P,W,A)):te.y,yt(1),y?(0,At.d)(E):(0,bt.T)(()=>new ae.K))}var nn=R(9718);function ln(_){return(0,Je.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(_)}})}var mn=R(8343),Rn=R(8189),lr=R(1481);const qt="primary",on=Symbol("RouteTitle");class Cn{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function jn(_){return new Cn(_)}function br(_,E,y){const A=y.path.split("/");if(A.length>_.length||"full"===y.pathMatch&&(E.hasChildren()||A.length<_.length))return null;const P={};for(let W=0;W<A.length;W++){const he=A[W],ye=_[W];if(he.startsWith(":"))P[he.substring(1)]=ye;else if(he!==ye.path)return null}return{consumed:_.slice(0,A.length),posParams:P}}function xt(_,E){const y=_?Object.keys(_):void 0,A=E?Object.keys(E):void 0;if(!y||!A||y.length!=A.length)return!1;let P;for(let W=0;W<y.length;W++)if(P=y[W],!bn(_[P],E[P]))return!1;return!0}function bn(_,E){if(Array.isArray(_)&&Array.isArray(E)){if(_.length!==E.length)return!1;const y=[..._].sort(),A=[...E].sort();return y.every((P,W)=>A[W]===P)}return _===E}function $n(_){return Array.prototype.concat.apply([],_)}function ar(_){return _.length>0?_[_.length-1]:null}function Un(_,E){for(const y in _)_.hasOwnProperty(y)&&E(_[y],y)}function Zn(_){return(0,d.CqO)(_)?_:(0,d.QGY)(_)?(0,F.D)(Promise.resolve(_)):(0,V.of)(_)}const fe={exact:function hn(_,E,y){if(!On(_.segments,E.segments)||!fn(_.segments,E.segments,y)||_.numberOfChildren!==E.numberOfChildren)return!1;for(const A in E.children)if(!_.children[A]||!hn(_.children[A],E.children[A],y))return!1;return!0},subset:Ot},nt={exact:function tn(_,E){return xt(_,E)},subset:function Tn(_,E){return Object.keys(E).length<=Object.keys(_).length&&Object.keys(E).every(y=>bn(_[y],E[y]))},ignored:()=>!0};function ut(_,E,y){return fe[y.paths](_.root,E.root,y.matrixParams)&&nt[y.queryParams](_.queryParams,E.queryParams)&&!("exact"===y.fragment&&_.fragment!==E.fragment)}function Ot(_,E,y){return Nn(_,E,E.segments,y)}function Nn(_,E,y,A){if(_.segments.length>y.length){const P=_.segments.slice(0,y.length);return!(!On(P,y)||E.hasChildren()||!fn(P,y,A))}if(_.segments.length===y.length){if(!On(_.segments,y)||!fn(_.segments,y,A))return!1;for(const P in E.children)if(!_.children[P]||!Ot(_.children[P],E.children[P],A))return!1;return!0}{const P=y.slice(0,_.segments.length),W=y.slice(_.segments.length);return!!(On(_.segments,P)&&fn(_.segments,P,A)&&_.children[qt])&&Nn(_.children[qt],E,W,A)}}function fn(_,E,y){return E.every((A,P)=>nt[y](_[P].parameters,A.parameters))}class er{constructor(E,y,A){this.root=E,this.queryParams=y,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return H.serialize(this)}}class Nt{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Un(y,(A,P)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _e(this)}}class Yt{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=jn(this.parameters)),this._parameterMap}toString(){return ht(this)}}function On(_,E){return _.length===E.length&&_.every((y,A)=>y.path===E[A].path)}let et=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=d.Yz7({token:_,factory:function(){return new q},providedIn:"root"}),_})();class q{parse(E){const y=new yn(E);return new er(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${De(E.root,!0)}`,A=function sn(_){const E=Object.keys(_).map(y=>{const A=_[y];return Array.isArray(A)?A.map(P=>`${ie(y)}=${ie(P)}`).join("&"):`${ie(y)}=${ie(A)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${A}${"string"==typeof E.fragment?`#${function Z(_){return encodeURI(_)}(E.fragment)}`:""}`}}const H=new q;function _e(_){return _.segments.map(E=>ht(E)).join("/")}function De(_,E){if(!_.hasChildren())return _e(_);if(E){const y=_.children[qt]?De(_.children[qt],!1):"",A=[];return Un(_.children,(P,W)=>{W!==qt&&A.push(`${W}:${De(P,!1)}`)}),A.length>0?`${y}(${A.join("//")})`:y}{const y=function qn(_,E){let y=[];return Un(_.children,(A,P)=>{P===qt&&(y=y.concat(E(A,P)))}),Un(_.children,(A,P)=>{P!==qt&&(y=y.concat(E(A,P)))}),y}(_,(A,P)=>P===qt?[De(_.children[qt],!1)]:[`${P}:${De(A,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[qt]?`${_e(_)}/${y[0]}`:`${_e(_)}/(${y.join("//")})`}}function ee(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ie(_){return ee(_).replace(/%3B/gi,";")}function z(_){return ee(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function G(_){return decodeURIComponent(_)}function Te(_){return G(_.replace(/\+/g,"%20"))}function ht(_){return`${z(_.path)}${function Ft(_){return Object.keys(_).map(E=>`;${z(E)}=${z(_[E])}`).join("")}(_.parameters)}`}const oe=/^[^\/()?;=#]+/;function de(_){const E=_.match(oe);return E?E[0]:""}const ne=/^[^=?&#]+/,Ke=/^[^&#]+/;class yn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(A[qt]=new Nt(E,y)),A}parseSegment(){const E=de(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(E),new Yt(G(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=de(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const P=de(this.remaining);P&&(A=P,this.capture(A))}E[G(y)]=G(A)}parseQueryParam(E){const y=function Ne(_){const E=_.match(ne);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const he=function Ut(_){const E=_.match(Ke);return E?E[0]:""}(this.remaining);he&&(A=he,this.capture(A))}const P=Te(y),W=Te(A);if(E.hasOwnProperty(P)){let he=E[P];Array.isArray(he)||(he=[he],E[P]=he),he.push(W)}else E[P]=W}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=de(this.remaining),P=this.remaining[A.length];if("/"!==P&&")"!==P&&";"!==P)throw new d.vHH(4010,!1);let W;A.indexOf(":")>-1?(W=A.slice(0,A.indexOf(":")),this.capture(W),this.capture(":")):E&&(W=qt);const he=this.parseChildren();y[W]=1===Object.keys(he).length?he[qt]:new Nt([],he),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new d.vHH(4011,!1)}}function Ue(_){return _.segments.length>0?new Nt([],{[qt]:_}):_}function Le(_){const E={};for(const A of Object.keys(_.children)){const W=Le(_.children[A]);(W.segments.length>0||W.hasChildren())&&(E[A]=W)}return function St(_){if(1===_.numberOfChildren&&_.children[qt]){const E=_.children[qt];return new Nt(_.segments.concat(E.segments),E.children)}return _}(new Nt(_.segments,E))}function It(_){return _ instanceof er}function Bn(_,E,y,A,P){if(0===y.length)return Wr(E.root,E.root,E.root,A,P);const W=function Jn(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new Ns(!0,0,_);let E=0,y=!1;const A=_.reduce((P,W,he)=>{if("object"==typeof W&&null!=W){if(W.outlets){const ye={};return Un(W.outlets,(lt,Gt)=>{ye[Gt]="string"==typeof lt?lt.split("/"):lt}),[...P,{outlets:ye}]}if(W.segmentPath)return[...P,W.segmentPath]}return"string"!=typeof W?[...P,W]:0===he?(W.split("/").forEach((ye,lt)=>{0==lt&&"."===ye||(0==lt&&""===ye?y=!0:".."===ye?E++:""!=ye&&P.push(ye))}),P):[...P,W]},[]);return new Ns(y,E,A)}(y);return W.toRoot()?Wr(E.root,E.root,new Nt([],{}),A,P):function he(lt){const Gt=function Ni(_,E,y,A){if(_.isAbsolute)return new ui(E.root,!0,0);if(-1===A)return new ui(y,y===E.root,0);return function Ar(_,E,y){let A=_,P=E,W=y;for(;W>P;){if(W-=P,A=A.parent,!A)throw new d.vHH(4005,!1);P=A.segments.length}return new ui(A,!1,P-W)}(y,A+(Rr(_.commands[0])?0:1),_.numberOfDoubleDots)}(W,E,_.snapshot?._urlSegment,lt),Gn=Gt.processChildren?Mi(Gt.segmentGroup,Gt.index,W.commands):Kr(Gt.segmentGroup,Gt.index,W.commands);return Wr(E.root,Gt.segmentGroup,Gn,A,P)}(_.snapshot?._lastPathIndex)}function Rr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function Gr(_){return"object"==typeof _&&null!=_&&_.outlets}function Wr(_,E,y,A,P){let he,W={};A&&Un(A,(lt,Gt)=>{W[Gt]=Array.isArray(lt)?lt.map(Gn=>`${Gn}`):`${lt}`}),he=_===E?y:Nr(_,E,y);const ye=Ue(Le(he));return new er(ye,W,P)}function Nr(_,E,y){const A={};return Un(_.children,(P,W)=>{A[W]=P===E?y:Nr(P,E,y)}),new Nt(_.segments,A)}class Ns{constructor(E,y,A){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=A,E&&A.length>0&&Rr(A[0]))throw new d.vHH(4003,!1);const P=A.find(Gr);if(P&&P!==ar(A))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ui{constructor(E,y,A){this.segmentGroup=E,this.processChildren=y,this.index=A}}function Kr(_,E,y){if(_||(_=new Nt([],{})),0===_.segments.length&&_.hasChildren())return Mi(_,E,y);const A=function jr(_,E,y){let A=0,P=E;const W={match:!1,pathIndex:0,commandIndex:0};for(;P<_.segments.length;){if(A>=y.length)return W;const he=_.segments[P],ye=y[A];if(Gr(ye))break;const lt=`${ye}`,Gt=A<y.length-1?y[A+1]:null;if(P>0&&void 0===lt)break;if(lt&&Gt&&"object"==typeof Gt&&void 0===Gt.outlets){if(!Ks(lt,Gt,he))return W;A+=2}else{if(!Ks(lt,{},he))return W;A++}P++}return{match:!0,pathIndex:P,commandIndex:A}}(_,E,y),P=y.slice(A.commandIndex);if(A.match&&A.pathIndex<_.segments.length){const W=new Nt(_.segments.slice(0,A.pathIndex),{});return W.children[qt]=new Nt(_.segments.slice(A.pathIndex),_.children),Mi(W,0,P)}return A.match&&0===P.length?new Nt(_.segments,{}):A.match&&!_.hasChildren()?ss(_,E,y):A.match?Mi(_,0,P):ss(_,E,y)}function Mi(_,E,y){if(0===y.length)return new Nt(_.segments,{});{const A=function Ki(_){return Gr(_[0])?_[0].outlets:{[qt]:_}}(y),P={};return Un(A,(W,he)=>{"string"==typeof W&&(W=[W]),null!==W&&(P[he]=Kr(_.children[he],E,W))}),Un(_.children,(W,he)=>{void 0===A[he]&&(P[he]=W)}),new Nt(_.segments,P)}}function ss(_,E,y){const A=_.segments.slice(0,E);let P=0;for(;P<y.length;){const W=y[P];if(Gr(W)){const lt=Zr(W.outlets);return new Nt(A,lt)}if(0===P&&Rr(y[0])){A.push(new Yt(_.segments[E].path,$r(y[0]))),P++;continue}const he=Gr(W)?W.outlets[qt]:`${W}`,ye=P<y.length-1?y[P+1]:null;he&&ye&&Rr(ye)?(A.push(new Yt(he,$r(ye))),P+=2):(A.push(new Yt(he,{})),P++)}return new Nt(A,{})}function Zr(_){const E={};return Un(_,(y,A)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[A]=ss(new Nt([],{}),0,y))}),E}function $r(_){const E={};return Un(_,(y,A)=>E[A]=`${y}`),E}function Ks(_,E,y){return _==y.path&&xt(E,y.parameters)}class Xr{constructor(E,y){this.id=E,this.url=y}}class os extends Xr{constructor(E,y,A="imperative",P=null){super(E,y),this.type=0,this.navigationTrigger=A,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kr extends Xr{constructor(E,y,A){super(E,y),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bi extends Xr{constructor(E,y,A,P){super(E,y),this.reason=A,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zs extends Xr{constructor(E,y,A,P){super(E,y),this.error=A,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wo extends Xr{constructor(E,y,A,P){super(E,y),this.urlAfterRedirects=A,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fs extends Xr{constructor(E,y,A,P){super(E,y),this.urlAfterRedirects=A,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ma extends Xr{constructor(E,y,A,P,W){super(E,y),this.urlAfterRedirects=A,this.state=P,this.shouldActivate=W,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dr extends Xr{constructor(E,y,A,P){super(E,y),this.urlAfterRedirects=A,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Io extends Xr{constructor(E,y,A,P){super(E,y),this.urlAfterRedirects=A,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Do{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lo{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oe{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ae{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class He{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lt{constructor(E,y,A){this.routerEvent=E,this.position=y,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ir{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=tr(E,this._root);return y?y.children.map(A=>A.value):[]}firstChild(E){const y=tr(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Fn(E,this._root);return y.length<2?[]:y[y.length-2].children.map(P=>P.value).filter(P=>P!==E)}pathFromRoot(E){return Fn(E,this._root).map(y=>y.value)}}function tr(_,E){if(_===E.value)return E;for(const y of E.children){const A=tr(_,y);if(A)return A}return null}function Fn(_,E){if(_===E.value)return[E];for(const y of E.children){const A=Fn(_,y);if(A.length)return A.unshift(E),A}return[]}class ei{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function li(_){const E={};return _&&_.children.forEach(y=>E[y.value.outlet]=y),E}class pi extends ir{constructor(E,y){super(E),this.snapshot=y,us(this,E)}toString(){return this.snapshot.toString()}}function cr(_,E){const y=function ys(_,E){const he=new as([],{},{},"",{},qt,E,null,_.root,-1,{});return new Lo("",new ei(he,[]))}(_,E),A=new ce.X([new Yt("",{})]),P=new ce.X({}),W=new ce.X({}),he=new ce.X({}),ye=new ce.X(""),lt=new ci(A,P,he,ye,W,qt,E,y.root);return lt.snapshot=y.root,new pi(new ei(lt,[]),y)}class ci{constructor(E,y,A,P,W,he,ye,lt){this.url=E,this.params=y,this.queryParams=A,this.fragment=P,this.data=W,this.outlet=he,this.component=ye,this.title=this.data?.pipe((0,Ve.U)(Gt=>Gt[on]))??(0,V.of)(void 0),this._futureSnapshot=lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ve.U)(E=>jn(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ve.U)(E=>jn(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function di(_,E="emptyOnly"){const y=_.pathFromRoot;let A=0;if("always"!==E)for(A=y.length-1;A>=1;){const P=y[A],W=y[A-1];if(P.routeConfig&&""===P.routeConfig.path)A--;else{if(W.component)break;A--}}return function ea(_){return _.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(A))}class as{constructor(E,y,A,P,W,he,ye,lt,Gt,Gn,cn,hr){this.url=E,this.params=y,this.queryParams=A,this.fragment=P,this.data=W,this.outlet=he,this.component=ye,this.title=this.data?.[on],this.routeConfig=lt,this._urlSegment=Gt,this._lastPathIndex=Gn,this._correctedLastPathIndex=hr??Gn,this._resolve=cn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lo extends ir{constructor(E,y){super(y),this.url=E,us(this,y)}toString(){return Vo(this._root)}}function us(_,E){E.value._routerState=_,E.children.forEach(y=>us(_,y))}function Vo(_){const E=_.children.length>0?` { ${_.children.map(Vo).join(", ")} } `:"";return`${_.value}${E}`}function Co(_){if(_.snapshot){const E=_.snapshot,y=_._futureSnapshot;_.snapshot=y,xt(E.queryParams,y.queryParams)||_.queryParams.next(y.queryParams),E.fragment!==y.fragment&&_.fragment.next(y.fragment),xt(E.params,y.params)||_.params.next(y.params),function _r(_,E){if(_.length!==E.length)return!1;for(let y=0;y<_.length;++y)if(!xt(_[y],E[y]))return!1;return!0}(E.url,y.url)||_.url.next(y.url),xt(E.data,y.data)||_.data.next(y.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function Ls(_,E){const y=xt(_.params,E.params)&&function Jt(_,E){return On(_,E)&&_.every((y,A)=>xt(y.parameters,E[A].parameters))}(_.url,E.url);return y&&!(!_.parent!=!E.parent)&&(!_.parent||Ls(_.parent,E.parent))}function qs(_,E,y){if(y&&_.shouldReuseRoute(E.value,y.value.snapshot)){const A=y.value;A._futureSnapshot=E.value;const P=function Fr(_,E,y){return E.children.map(A=>{for(const P of y.children)if(_.shouldReuseRoute(A.value,P.value.snapshot))return qs(_,A,P);return qs(_,A)})}(_,E,y);return new ei(A,P)}{if(_.shouldAttach(E.value)){const W=_.retrieve(E.value);if(null!==W){const he=W.route;return he.value._futureSnapshot=E.value,he.children=E.children.map(ye=>qs(_,ye)),he}}const A=function qi(_){return new ci(new ce.X(_.url),new ce.X(_.params),new ce.X(_.queryParams),new ce.X(_.fragment),new ce.X(_.data),_.outlet,_.component,_)}(E.value),P=E.children.map(W=>qs(_,W));return new ei(A,P)}}const vs="ngNavigationCancelingError";function _s(_,E){const{redirectTo:y,navigationBehaviorOptions:A}=It(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,P=co(!1,0,E);return P.url=y,P.navigationBehaviorOptions=A,P}function co(_,E,y){const A=new Error("NavigationCancelingError: "+(_||""));return A[vs]=!0,A.cancellationCode=E,y&&(A.url=y),A}function ta(_){return pr(_)&&It(_.url)}function pr(_){return _&&_[vs]}class Ys{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ls,this.attachRef=null}}let ls=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(y,A){const P=this.getOrCreateContext(y);P.outlet=A,this.contexts.set(y,P)}onChildOutletDestroyed(y){const A=this.getContext(y);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let A=this.getContext(y);return A||(A=new Ys,this.contexts.set(y,A)),A}getContext(y){return this.contexts.get(y)||null}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const ji=!1;let hi=(()=>{class _{constructor(y,A,P,W,he){this.parentContexts=y,this.location=A,this.changeDetector=W,this.environmentInjector=he,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=P||qt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,ji);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,ji);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,ji);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,A){this.activated=y,this._activatedRoute=A,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,A){if(this.isActivated)throw new d.vHH(4013,ji);this._activatedRoute=y;const P=this.location,he=y._futureSnapshot.component,ye=this.parentContexts.getOrCreateContext(this.name).children,lt=new ho(y,ye,P.injector);if(A&&function bo(_){return!!_.resolveComponentFactory}(A)){const Gt=A.resolveComponentFactory(he);this.activated=P.createComponent(Gt,P.length,lt)}else this.activated=P.createComponent(he,{index:P.length,injector:lt,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(y){return new(y||_)(d.Y36(ls),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},_.\u0275dir=d.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class ho{constructor(E,y,A){this.route=E,this.childContexts=y,this.parent=A}get(E,y){return E===ci?this.route:E===ls?this.childContexts:this.parent.get(E,y)}}let ki=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=d.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(y,A){1&y&&d._UZ(0,"router-outlet")},dependencies:[hi],encapsulation:2}),_})();function ti(_,E){return _.providers&&!_._injector&&(_._injector=(0,d.MMx)(_.providers,E,`Route: ${_.path}`)),_._injector??E}function Vs(_){const E=_.children&&_.children.map(Vs),y=E?{..._,children:E}:{..._};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==qt&&(y.component=ki),y}function Ei(_){return _.outlet||qt}function Lr(_,E){const y=_.filter(A=>Ei(A)===E);return y.push(..._.filter(A=>Ei(A)!==E)),y}function Us(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let E=_.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class cs{constructor(E,y,A,P){this.routeReuseStrategy=E,this.futureState=y,this.currState=A,this.forwardEvent=P}activate(E){const y=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,A,E),Co(this.futureState.root),this.activateChildRoutes(y,A,E)}deactivateChildRoutes(E,y,A){const P=li(y);E.children.forEach(W=>{const he=W.value.outlet;this.deactivateRoutes(W,P[he],A),delete P[he]}),Un(P,(W,he)=>{this.deactivateRouteAndItsChildren(W,A)})}deactivateRoutes(E,y,A){const P=E.value,W=y?y.value:null;if(P===W)if(P.component){const he=A.getContext(P.outlet);he&&this.deactivateChildRoutes(E,y,he.children)}else this.deactivateChildRoutes(E,y,A);else W&&this.deactivateRouteAndItsChildren(y,A)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const A=y.getContext(E.value.outlet),P=A&&E.value.component?A.children:y,W=li(E);for(const he of Object.keys(W))this.deactivateRouteAndItsChildren(W[he],P);if(A&&A.outlet){const he=A.outlet.detach(),ye=A.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:he,route:E,contexts:ye})}}deactivateRouteAndOutlet(E,y){const A=y.getContext(E.value.outlet),P=A&&E.value.component?A.children:y,W=li(E);for(const he of Object.keys(W))this.deactivateRouteAndItsChildren(W[he],P);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(E,y,A){const P=li(y);E.children.forEach(W=>{this.activateRoutes(W,P[W.value.outlet],A),this.forwardEvent(new vt(W.value.snapshot))}),E.children.length&&this.forwardEvent(new Ae(E.value.snapshot))}activateRoutes(E,y,A){const P=E.value,W=y?y.value:null;if(Co(P),P===W)if(P.component){const he=A.getOrCreateContext(P.outlet);this.activateChildRoutes(E,y,he.children)}else this.activateChildRoutes(E,y,A);else if(P.component){const he=A.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const ye=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),he.children.onOutletReAttached(ye.contexts),he.attachRef=ye.componentRef,he.route=ye.route.value,he.outlet&&he.outlet.attach(ye.componentRef,ye.route.value),Co(ye.route.value),this.activateChildRoutes(E,null,he.children)}else{const ye=Us(P.snapshot),lt=ye?.get(d._Vd)??null;he.attachRef=null,he.route=P,he.resolver=lt,he.injector=ye,he.outlet&&he.outlet.activateWith(P,he.injector),this.activateChildRoutes(E,null,he.children)}}else this.activateChildRoutes(E,null,A)}}class Bo{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class Dt{constructor(E,y){this.component=E,this.route=y}}function Xn(_,E,y){const A=_._root;return Or(A,E?E._root:null,y,[A.value])}function Yi(_,E){const y=Symbol(),A=E.get(_,y);return A===y?"function"!=typeof _||(0,d.Z0I)(_)?E.get(_):_:A}function Or(_,E,y,A,P={canDeactivateChecks:[],canActivateChecks:[]}){const W=li(E);return _.children.forEach(he=>{(function k(_,E,y,A,P={canDeactivateChecks:[],canActivateChecks:[]}){const W=_.value,he=E?E.value:null,ye=y?y.getContext(_.value.outlet):null;if(he&&W.routeConfig===he.routeConfig){const lt=function O(_,E,y){if("function"==typeof y)return y(_,E);switch(y){case"pathParamsChange":return!On(_.url,E.url);case"pathParamsOrQueryParamsChange":return!On(_.url,E.url)||!xt(_.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ls(_,E)||!xt(_.queryParams,E.queryParams);default:return!Ls(_,E)}}(he,W,W.routeConfig.runGuardsAndResolvers);lt?P.canActivateChecks.push(new Bo(A)):(W.data=he.data,W._resolvedData=he._resolvedData),Or(_,E,W.component?ye?ye.children:null:y,A,P),lt&&ye&&ye.outlet&&ye.outlet.isActivated&&P.canDeactivateChecks.push(new Dt(ye.outlet.component,he))}else he&&M(E,ye,P),P.canActivateChecks.push(new Bo(A)),Or(_,null,W.component?ye?ye.children:null:y,A,P)})(he,W[he.value.outlet],y,A.concat([he.value]),P),delete W[he.value.outlet]}),Un(W,(he,ye)=>M(he,y.getContext(ye),P)),P}function M(_,E,y){const A=li(_),P=_.value;Un(A,(W,he)=>{M(W,P.component?E?E.children.getContext(he):null:E,y)}),y.canDeactivateChecks.push(new Dt(P.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,P))}function Y(_){return"function"==typeof _}function Bs(_){return _ instanceof ae.K||"EmptyError"===_?.name}const ni=Symbol("INITIAL_VALUE");function Is(){return(0,be.w)(_=>ze(_.map(E=>E.pipe((0,Re.q)(1),(0,gt.O)(ni)))).pipe((0,Ve.U)(E=>{for(const y of E)if(!0!==y){if(y===ni)return ni;if(!1===y||y instanceof er)return y}return!0}),(0,ft.h)(E=>E!==ni),(0,Re.q)(1)))}function eo(_){return(0,Ct.z)((0,$e.b)(E=>{if(It(E))throw _s(0,E)}),(0,Ve.U)(E=>!0===E))}const fo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function So(_,E,y,A,P){const W=xi(_,E,y);return W.matched?function zo(_,E,y,A){const P=E.canMatch;if(!P||0===P.length)return(0,V.of)(!0);const W=P.map(he=>{const ye=Yi(he,_);return Zn(function mi(_){return _&&Y(_.canMatch)}(ye)?ye.canMatch(E,y):_.runInContext(()=>ye(E,y)))});return(0,V.of)(W).pipe(Is(),eo())}(A=ti(E,A),E,y).pipe((0,Ve.U)(he=>!0===he?W:{...fo})):(0,V.of)(W)}function xi(_,E,y){if(""===E.path)return"full"===E.pathMatch&&(_.hasChildren()||y.length>0)?{...fo}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const P=(E.matcher||br)(y,_,E);if(!P)return{...fo};const W={};Un(P.posParams,(ye,lt)=>{W[lt]=ye.path});const he=P.consumed.length>0?{...W,...P.consumed[P.consumed.length-1].parameters}:W;return{matched:!0,consumedSegments:P.consumed,remainingSegments:y.slice(P.consumed.length),parameters:he,positionalParamSegments:P.posParams??{}}}function ds(_,E,y,A,P="corrected"){if(y.length>0&&function gr(_,E,y){return y.some(A=>vr(_,E,A)&&Ei(A)!==qt)}(_,y,A)){const he=new Nt(E,function na(_,E,y,A){const P={};P[qt]=A,A._sourceSegment=_,A._segmentIndexShift=E.length;for(const W of y)if(""===W.path&&Ei(W)!==qt){const he=new Nt([],{});he._sourceSegment=_,he._segmentIndexShift=E.length,P[Ei(W)]=he}return P}(_,E,A,new Nt(y,_.children)));return he._sourceSegment=_,he._segmentIndexShift=E.length,{segmentGroup:he,slicedSegments:[]}}if(0===y.length&&function Ii(_,E,y){return y.some(A=>vr(_,E,A))}(_,y,A)){const he=new Nt(_.segments,function Ua(_,E,y,A,P,W){const he={};for(const ye of A)if(vr(_,y,ye)&&!P[Ei(ye)]){const lt=new Nt([],{});lt._sourceSegment=_,lt._segmentIndexShift="legacy"===W?_.segments.length:E.length,he[Ei(ye)]=lt}return{...P,...he}}(_,E,y,A,_.children,P));return he._sourceSegment=_,he._segmentIndexShift=E.length,{segmentGroup:he,slicedSegments:y}}const W=new Nt(_.segments,_.children);return W._sourceSegment=_,W._segmentIndexShift=E.length,{segmentGroup:W,slicedSegments:y}}function vr(_,E,y){return(!(_.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function Er(_,E,y,A){return!!(Ei(_)===A||A!==qt&&vr(E,y,_))&&("**"===_.path||xi(E,_,y).matched)}function ra(_,E,y){return 0===E.length&&!_.children[y]}const Mo=!1;class Ri{constructor(E){this.segmentGroup=E||null}}class Ea{constructor(E){this.urlTree=E}}function Ds(_){return(0,mt._)(new Ri(_))}function Cs(_){return(0,mt._)(new Ea(_))}class $i{constructor(E,y,A,P,W){this.injector=E,this.configLoader=y,this.urlSerializer=A,this.urlTree=P,this.config=W,this.allowRedirects=!0}apply(){const E=ds(this.urlTree.root,[],[],this.config).segmentGroup,y=new Nt(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,qt).pipe((0,Ve.U)(W=>this.createUrlTree(Le(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ge(W=>{if(W instanceof Ea)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof Ri?this.noMatchError(W):W}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,qt).pipe((0,Ve.U)(P=>this.createUrlTree(Le(P),E.queryParams,E.fragment))).pipe(Ge(P=>{throw P instanceof Ri?this.noMatchError(P):P}))}noMatchError(E){return new d.vHH(4002,Mo)}createUrlTree(E,y,A){const P=Ue(E);return new er(P,y,A)}expandSegmentGroup(E,y,A,P){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(E,y,A).pipe((0,Ve.U)(W=>new Nt([],W))):this.expandSegment(E,A,y,A.segments,P,!0)}expandChildren(E,y,A){const P=[];for(const W of Object.keys(A.children))"primary"===W?P.unshift(W):P.push(W);return(0,F.D)(P).pipe((0,Vn.b)(W=>{const he=A.children[W],ye=Lr(y,W);return this.expandSegmentGroup(E,ye,he,W).pipe((0,Ve.U)(lt=>({segment:lt,outlet:W})))}),(0,Xe.R)((W,he)=>(W[he.outlet]=he.segment,W),{}),zt())}expandSegment(E,y,A,P,W,he){return(0,F.D)(A).pipe((0,Vn.b)(ye=>this.expandSegmentAgainstRoute(E,y,A,ye,P,W,he).pipe(Ge(Gt=>{if(Gt instanceof Ri)return(0,V.of)(null);throw Gt}))),(0,Vt.P)(ye=>!!ye),Ge((ye,lt)=>{if(Bs(ye))return ra(y,P,W)?(0,V.of)(new Nt([],{})):Ds(y);throw ye}))}expandSegmentAgainstRoute(E,y,A,P,W,he,ye){return Er(P,y,W,he)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(E,y,P,W,he):ye&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,A,P,W,he):Ds(y):Ds(y)}expandSegmentAgainstRouteUsingRedirect(E,y,A,P,W,he){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,A,P,he):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,P,W,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,A,P){const W=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Cs(W):this.lineralizeSegments(A,W).pipe((0,jt.z)(he=>{const ye=new Nt(he,{});return this.expandSegment(E,ye,y,he,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,P,W,he){const{matched:ye,consumedSegments:lt,remainingSegments:Gt,positionalParamSegments:Gn}=xi(y,P,W);if(!ye)return Ds(y);const cn=this.applyRedirectCommands(lt,P.redirectTo,Gn);return P.redirectTo.startsWith("/")?Cs(cn):this.lineralizeSegments(P,cn).pipe((0,jt.z)(hr=>this.expandSegment(E,y,A,hr.concat(Gt),he,!1)))}matchSegmentAgainstRoute(E,y,A,P,W){return"**"===A.path?(E=ti(A,E),A.loadChildren?(A._loadedRoutes?(0,V.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(E,A)).pipe((0,Ve.U)(ye=>(A._loadedRoutes=ye.routes,A._loadedInjector=ye.injector,new Nt(P,{})))):(0,V.of)(new Nt(P,{}))):So(y,A,P,E).pipe((0,be.w)(({matched:he,consumedSegments:ye,remainingSegments:lt})=>he?this.getChildConfig(E=A._injector??E,A,P).pipe((0,jt.z)(Gn=>{const cn=Gn.injector??E,hr=Gn.routes,{segmentGroup:As,slicedSegments:fi}=ds(y,ye,lt,hr),oo=new Nt(As.segments,As.children);if(0===fi.length&&oo.hasChildren())return this.expandChildren(cn,hr,oo).pipe((0,Ve.U)(Aa=>new Nt(ye,Aa)));if(0===hr.length&&0===fi.length)return(0,V.of)(new Nt(ye,{}));const Qr=Ei(A)===W;return this.expandSegment(cn,oo,hr,fi,Qr?qt:W,!0).pipe((0,Ve.U)(Ta=>new Nt(ye.concat(Ta.segments),Ta.children)))})):Ds(y)))}getChildConfig(E,y,A){return y.children?(0,V.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,V.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function _a(_,E,y,A){const P=E.canLoad;if(void 0===P||0===P.length)return(0,V.of)(!0);const W=P.map(he=>{const ye=Yi(he,_);return Zn(function an(_){return _&&Y(_.canLoad)}(ye)?ye.canLoad(E,y):_.runInContext(()=>ye(E,y)))});return(0,V.of)(W).pipe(Is(),eo())}(E,y,A).pipe((0,jt.z)(P=>P?this.configLoader.loadChildren(E,y).pipe((0,$e.b)(W=>{y._loadedRoutes=W.routes,y._loadedInjector=W.injector})):function ia(_){return(0,mt._)(co(Mo,3))}())):(0,V.of)({routes:[],injector:E})}lineralizeSegments(E,y){let A=[],P=y.root;for(;;){if(A=A.concat(P.segments),0===P.numberOfChildren)return(0,V.of)(A);if(P.numberOfChildren>1||!P.children[qt])return(0,mt._)(new d.vHH(4e3,Mo));P=P.children[qt]}}applyRedirectCommands(E,y,A){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,A)}applyRedirectCreateUrlTree(E,y,A,P){const W=this.createSegmentGroup(E,y.root,A,P);return new er(W,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const A={};return Un(E,(P,W)=>{if("string"==typeof P&&P.startsWith(":")){const ye=P.substring(1);A[W]=y[ye]}else A[W]=P}),A}createSegmentGroup(E,y,A,P){const W=this.createSegments(E,y.segments,A,P);let he={};return Un(y.children,(ye,lt)=>{he[lt]=this.createSegmentGroup(E,ye,A,P)}),new Nt(W,he)}createSegments(E,y,A,P){return y.map(W=>W.path.startsWith(":")?this.findPosParam(E,W,P):this.findOrReturn(W,A))}findPosParam(E,y,A){const P=A[y.path.substring(1)];if(!P)throw new d.vHH(4001,Mo);return P}findOrReturn(E,y){let A=0;for(const P of y){if(P.path===E.path)return y.splice(A),P;A++}return E}}class no{}class po{constructor(E,y,A,P,W,he,ye,lt){this.injector=E,this.rootComponentType=y,this.config=A,this.urlTree=P,this.url=W,this.paramsInheritanceStrategy=he,this.relativeLinkResolution=ye,this.urlSerializer=lt}recognize(){const E=ds(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,qt).pipe((0,Ve.U)(y=>{if(null===y)return null;const A=new as([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new ei(A,y),W=new Lo(this.url,P);return this.inheritParamsAndData(W._root),W}))}inheritParamsAndData(E){const y=E.value,A=di(y,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),E.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(E,y,A,P){return 0===A.segments.length&&A.hasChildren()?this.processChildren(E,y,A):this.processSegment(E,y,A,A.segments,P)}processChildren(E,y,A){return(0,F.D)(Object.keys(A.children)).pipe((0,Vn.b)(P=>{const W=A.children[P],he=Lr(y,P);return this.processSegmentGroup(E,he,W,P)}),(0,Xe.R)((P,W)=>P&&W?(P.push(...W),P):null),function Pt(_,E=!1){return(0,Je.e)((y,A)=>{let P=0;y.subscribe((0,me.x)(A,W=>{const he=_(W,P++);(he||E)&&A.next(W),!he&&A.complete()}))})}(P=>null!==P),(0,At.d)(null),zt(),(0,Ve.U)(P=>{if(null===P)return null;const W=U(P);return function xo(_){_.sort((E,y)=>E.value.outlet===qt?-1:y.value.outlet===qt?1:E.value.outlet.localeCompare(y.value.outlet))}(W),W}))}processSegment(E,y,A,P,W){return(0,F.D)(y).pipe((0,Vn.b)(he=>this.processSegmentAgainstRoute(he._injector??E,he,A,P,W)),(0,Vt.P)(he=>!!he),Ge(he=>{if(Bs(he))return ra(A,P,W)?(0,V.of)([]):(0,V.of)(null);throw he}))}processSegmentAgainstRoute(E,y,A,P,W){if(y.redirectTo||!Er(y,A,P,W))return(0,V.of)(null);let he;if("**"===y.path){const ye=P.length>0?ar(P).parameters:{},lt=Ie(A)+P.length,Gt=new as(P,ye,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_t(y),Ei(y),y.component??y._loadedComponent??null,y,K(A),lt,vn(y),lt);he=(0,V.of)({snapshot:Gt,consumedSegments:[],remainingSegments:[]})}else he=So(A,y,P,E).pipe((0,Ve.U)(({matched:ye,consumedSegments:lt,remainingSegments:Gt,parameters:Gn})=>{if(!ye)return null;const cn=Ie(A)+lt.length;return{snapshot:new as(lt,Gn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_t(y),Ei(y),y.component??y._loadedComponent??null,y,K(A),cn,vn(y),cn),consumedSegments:lt,remainingSegments:Gt}}));return he.pipe((0,be.w)(ye=>{if(null===ye)return(0,V.of)(null);const{snapshot:lt,consumedSegments:Gt,remainingSegments:Gn}=ye;E=y._injector??E;const cn=y._loadedInjector??E,hr=function ru(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(y),{segmentGroup:As,slicedSegments:fi}=ds(A,Gt,Gn,hr.filter(Qr=>void 0===Qr.redirectTo),this.relativeLinkResolution);if(0===fi.length&&As.hasChildren())return this.processChildren(cn,hr,As).pipe((0,Ve.U)(Qr=>null===Qr?null:[new ei(lt,Qr)]));if(0===hr.length&&0===fi.length)return(0,V.of)([new ei(lt,[])]);const oo=Ei(y)===W;return this.processSegment(cn,hr,As,fi,oo?qt:W).pipe((0,Ve.U)(Qr=>null===Qr?null:[new ei(lt,Qr)]))}))}}function b(_){const E=_.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function U(_){const E=[],y=new Set;for(const A of _){if(!b(A)){E.push(A);continue}const P=E.find(W=>A.value.routeConfig===W.value.routeConfig);void 0!==P?(P.children.push(...A.children),y.add(P)):E.push(A)}for(const A of y){const P=U(A.children);E.push(new ei(A.value,P))}return E.filter(A=>!y.has(A))}function K(_){let E=_;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Ie(_){let E=_,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function _t(_){return _.data||{}}function vn(_){return _.resolve||{}}function Yr(_){return"string"==typeof _.title||null===_.title}function fs(_){return(0,be.w)(E=>{const y=_(E);return y?(0,F.D)(y).pipe((0,Ve.U)(()=>E)):(0,V.of)(E)})}let Mt=(()=>{class _{buildTitle(y){let A,P=y.root;for(;void 0!==P;)A=this.getResolvedTitleForRoute(P)??A,P=P.children.find(W=>W.outlet===qt);return A}getResolvedTitleForRoute(y){return y.data[on]}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=d.Yz7({token:_,factory:function(){return(0,d.f3M)(Ir)},providedIn:"root"}),_})(),Ir=(()=>{class _ extends Mt{constructor(y){super(),this.title=y}updateTitle(y){const A=this.buildTitle(y);void 0!==A&&this.title.setTitle(A)}}return _.\u0275fac=function(y){return new(y||_)(d.LFG(lr.Dx))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class go{}class pn extends class en{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const Kt=new d.OlP("",{providedIn:"root",factory:()=>({})}),Rt=new d.OlP("ROUTES");let ri=(()=>{class _{constructor(y,A){this.injector=y,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,V.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const A=Zn(y.loadComponent()).pipe((0,$e.b)(W=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=W}),ln(()=>{this.componentLoaders.delete(y)})),P=new st.c(A,()=>new ot.x).pipe((0,mn.x)());return this.componentLoaders.set(y,P),P}loadChildren(y,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,V.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const W=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,Ve.U)(ye=>{this.onLoadEndListener&&this.onLoadEndListener(A);let lt,Gt,Gn=!1;Array.isArray(ye)?Gt=ye:(lt=ye.create(y).injector,Gt=$n(lt.get(Rt,[],d.XFs.Self|d.XFs.Optional)));return{routes:Gt.map(Vs),injector:lt}}),ln(()=>{this.childrenLoaders.delete(A)})),he=new st.c(W,()=>new ot.x).pipe((0,mn.x)());return this.childrenLoaders.set(A,he),he}loadModuleFactoryOrRoutes(y){return Zn(y()).pipe((0,jt.z)(A=>A instanceof d.YKP||Array.isArray(A)?(0,V.of)(A):(0,F.D)(this.compiler.compileModuleAsync(A))))}}return _.\u0275fac=function(y){return new(y||_)(d.LFG(d.zs3),d.LFG(d.Sil))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Su{}class Mu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function tl(_){throw _}function Ba(_,E,y){return E.parse("/")}const oa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ko(){const _=(0,d.f3M)(et),E=(0,d.f3M)(ls),y=(0,d.f3M)(Et.Ye),A=(0,d.f3M)(d.zs3),P=(0,d.f3M)(d.Sil),W=(0,d.f3M)(Rt,{optional:!0})??[],he=(0,d.f3M)(Kt,{optional:!0})??{},ye=(0,d.f3M)(Ir),lt=(0,d.f3M)(Mt,{optional:!0}),Gt=(0,d.f3M)(Su,{optional:!0}),Gn=(0,d.f3M)(go,{optional:!0}),cn=new ii(null,_,E,y,A,P,$n(W));return Gt&&(cn.urlHandlingStrategy=Gt),Gn&&(cn.routeReuseStrategy=Gn),cn.titleStrategy=lt??ye,function Nl(_,E){_.errorHandler&&(E.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(E.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(E.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(E.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(E.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(E.canceledNavigationResolution=_.canceledNavigationResolution)}(he,cn),cn}let ii=(()=>{class _{constructor(y,A,P,W,he,ye,lt){this.rootComponentType=y,this.urlSerializer=A,this.rootContexts=P,this.location=W,this.config=lt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ot.x,this.errorHandler=tl,this.malformedUriErrorHandler=Ba,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,V.of)(void 0),this.urlHandlingStrategy=new Mu,this.routeReuseStrategy=new pn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=he.get(ri),this.configLoader.onLoadEndListener=hr=>this.triggerEvent(new lo(hr)),this.configLoader.onLoadStartListener=hr=>this.triggerEvent(new Do(hr)),this.ngModule=he.get(d.h0i),this.console=he.get(d.c2e);const cn=he.get(d.R0b);this.isNgZoneEnabled=cn instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(lt),this.currentUrlTree=function pe(){return new er(new Nt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=cr(this.currentUrlTree,this.rootComponentType),this.transitions=new ce.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(y){const A=this.events;return y.pipe((0,ft.h)(P=>0!==P.id),(0,Ve.U)(P=>({...P,extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,be.w)(P=>{let W=!1,he=!1;return(0,V.of)(P).pipe((0,$e.b)(ye=>{this.currentNavigation={id:ye.id,initialUrl:ye.rawUrl,extractedUrl:ye.extractedUrl,trigger:ye.source,extras:ye.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,be.w)(ye=>{const lt=this.browserUrlTree.toString(),Gt=!this.navigated||ye.extractedUrl.toString()!==lt||lt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Gt)&&this.urlHandlingStrategy.shouldProcessUrl(ye.rawUrl))return kn(ye.source)&&(this.browserUrlTree=ye.extractedUrl),(0,V.of)(ye).pipe((0,be.w)(cn=>{const hr=this.transitions.getValue();return A.next(new os(cn.id,this.serializeUrl(cn.extractedUrl),cn.source,cn.restoredState)),hr!==this.transitions.getValue()?ge.E:Promise.resolve(cn)}),function Di(_,E,y,A){return(0,be.w)(P=>function hs(_,E,y,A,P){return new $i(_,E,y,A,P).apply()}(_,E,y,P.extractedUrl,A).pipe((0,Ve.U)(W=>({...P,urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$e.b)(cn=>{this.currentNavigation={...this.currentNavigation,finalUrl:cn.urlAfterRedirects},P.urlAfterRedirects=cn.urlAfterRedirects}),function mr(_,E,y,A,P,W){return(0,jt.z)(he=>function ro(_,E,y,A,P,W,he="emptyOnly",ye="legacy"){return new po(_,E,y,A,P,he,ye,W).recognize().pipe((0,be.w)(lt=>null===lt?function Wo(_){return new we.y(E=>E.error(_))}(new no):(0,V.of)(lt)))}(_,E,y,he.urlAfterRedirects,A.serialize(he.urlAfterRedirects),A,P,W).pipe((0,Ve.U)(ye=>({...he,targetSnapshot:ye}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$e.b)(cn=>{if(P.targetSnapshot=cn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!cn.extras.skipLocationChange){const As=this.urlHandlingStrategy.merge(cn.urlAfterRedirects,cn.rawUrl);this.setBrowserUrl(As,cn)}this.browserUrlTree=cn.urlAfterRedirects}const hr=new wo(cn.id,this.serializeUrl(cn.extractedUrl),this.serializeUrl(cn.urlAfterRedirects),cn.targetSnapshot);A.next(hr)}));if(Gt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:hr,extractedUrl:As,source:fi,restoredState:oo,extras:Qr}=ye,Pu=new os(hr,this.serializeUrl(As),fi,oo);A.next(Pu);const Ta=cr(As,this.rootComponentType).snapshot;return P={...ye,targetSnapshot:Ta,urlAfterRedirects:As,extras:{...Qr,skipLocationChange:!1,replaceUrl:!1}},(0,V.of)(P)}return this.rawUrlTree=ye.rawUrl,ye.resolve(null),ge.E}),(0,$e.b)(ye=>{const lt=new Fs(ye.id,this.serializeUrl(ye.extractedUrl),this.serializeUrl(ye.urlAfterRedirects),ye.targetSnapshot);this.triggerEvent(lt)}),(0,Ve.U)(ye=>P={...ye,guards:Xn(ye.targetSnapshot,ye.currentSnapshot,this.rootContexts)}),function Va(_,E){return(0,jt.z)(y=>{const{targetSnapshot:A,currentSnapshot:P,guards:{canActivateChecks:W,canDeactivateChecks:he}}=y;return 0===he.length&&0===W.length?(0,V.of)({...y,guardsResult:!0}):function va(_,E,y,A){return(0,F.D)(_).pipe((0,jt.z)(P=>function js(_,E,y,A,P){const W=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,V.of)(!0);const he=W.map(ye=>{const lt=Us(E)??P,Gt=Yi(ye,lt);return Zn(function ws(_){return _&&Y(_.canDeactivate)}(Gt)?Gt.canDeactivate(_,E,y,A):lt.runInContext(()=>Gt(_,E,y,A))).pipe((0,Vt.P)())});return(0,V.of)(he).pipe(Is())}(P.component,P.route,y,E,A)),(0,Vt.P)(P=>!0!==P,!0))}(he,A,P,_).pipe((0,jt.z)(ye=>ye&&function it(_){return"boolean"==typeof _}(ye)?function $o(_,E,y,A){return(0,F.D)(E).pipe((0,Vn.b)(P=>(0,Be.z)(function Go(_,E){return null!==_&&E&&E(new Oe(_)),(0,V.of)(!0)}(P.route.parent,A),function Ho(_,E){return null!==_&&E&&E(new He(_)),(0,V.of)(!0)}(P.route,A),function Fi(_,E,y){const A=E[E.length-1],W=E.slice(0,E.length-1).reverse().map(he=>function jo(_){const E=_.routeConfig?_.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:_,guards:E}:null}(he)).filter(he=>null!==he).map(he=>(0,Me.P)(()=>{const ye=he.guards.map(lt=>{const Gt=Us(he.node)??y,Gn=Yi(lt,Gt);return Zn(function Xs(_){return _&&Y(_.canActivateChild)}(Gn)?Gn.canActivateChild(A,_):Gt.runInContext(()=>Gn(A,_))).pipe((0,Vt.P)())});return(0,V.of)(ye).pipe(Is())}));return(0,V.of)(W).pipe(Is())}(_,P.path,y),function Ao(_,E,y){const A=E.routeConfig?E.routeConfig.canActivate:null;if(!A||0===A.length)return(0,V.of)(!0);const P=A.map(W=>(0,Me.P)(()=>{const he=Us(E)??y,ye=Yi(W,he);return Zn(function Qn(_){return _&&Y(_.canActivate)}(ye)?ye.canActivate(E,_):he.runInContext(()=>ye(E,_))).pipe((0,Vt.P)())}));return(0,V.of)(P).pipe(Is())}(_,P.route,y))),(0,Vt.P)(P=>!0!==P,!0))}(A,W,_,E):(0,V.of)(ye)),(0,Ve.U)(ye=>({...y,guardsResult:ye})))})}(this.ngModule.injector,ye=>this.triggerEvent(ye)),(0,$e.b)(ye=>{if(P.guardsResult=ye.guardsResult,It(ye.guardsResult))throw _s(0,ye.guardsResult);const lt=new ma(ye.id,this.serializeUrl(ye.extractedUrl),this.serializeUrl(ye.urlAfterRedirects),ye.targetSnapshot,!!ye.guardsResult);this.triggerEvent(lt)}),(0,ft.h)(ye=>!!ye.guardsResult||(this.restoreHistory(ye),this.cancelNavigationTransition(ye,"",3),!1)),fs(ye=>{if(ye.guards.canActivateChecks.length)return(0,V.of)(ye).pipe((0,$e.b)(lt=>{const Gt=new dr(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent(Gt)}),(0,be.w)(lt=>{let Gt=!1;return(0,V.of)(lt).pipe(function rr(_,E){return(0,jt.z)(y=>{const{targetSnapshot:A,guards:{canActivateChecks:P}}=y;if(!P.length)return(0,V.of)(y);let W=0;return(0,F.D)(P).pipe((0,Vn.b)(he=>function wr(_,E,y,A){const P=_.routeConfig,W=_._resolve;return void 0!==P?.title&&!Yr(P)&&(W[on]=P.title),function In(_,E,y,A){const P=function Sr(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===P.length)return(0,V.of)({});const W={};return(0,F.D)(P).pipe((0,jt.z)(he=>function Hn(_,E,y,A){const P=Us(E)??A,W=Yi(_,P);return Zn(W.resolve?W.resolve(E,y):P.runInContext(()=>W(E,y)))}(_[he],E,y,A).pipe((0,Vt.P)(),(0,$e.b)(ye=>{W[he]=ye}))),yt(1),(0,nn.h)(W),Ge(he=>Bs(he)?ge.E:(0,mt._)(he)))}(W,_,E,A).pipe((0,Ve.U)(he=>(_._resolvedData=he,_.data=di(_,y).resolve,P&&Yr(P)&&(_.data[on]=P.title),null)))}(he.route,A,_,E)),(0,$e.b)(()=>W++),yt(1),(0,jt.z)(he=>W===P.length?(0,V.of)(y):ge.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$e.b)({next:()=>Gt=!0,complete:()=>{Gt||(this.restoreHistory(lt),this.cancelNavigationTransition(lt,"",2))}}))}),(0,$e.b)(lt=>{const Gt=new Io(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent(Gt)}))}),fs(ye=>{const lt=Gt=>{const Gn=[];Gt.routeConfig?.loadComponent&&!Gt.routeConfig._loadedComponent&&Gn.push(this.configLoader.loadComponent(Gt.routeConfig).pipe((0,$e.b)(cn=>{Gt.component=cn}),(0,Ve.U)(()=>{})));for(const cn of Gt.children)Gn.push(...lt(cn));return Gn};return ze(lt(ye.targetSnapshot.root)).pipe((0,At.d)(),(0,Re.q)(1))}),fs(()=>this.afterPreactivation()),(0,Ve.U)(ye=>{const lt=function Zi(_,E,y){const A=qs(_,E._root,y?y._root:void 0);return new pi(A,E)}(this.routeReuseStrategy,ye.targetSnapshot,ye.currentRouterState);return P={...ye,targetRouterState:lt}}),(0,$e.b)(ye=>{this.currentUrlTree=ye.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ye.urlAfterRedirects,ye.rawUrl),this.routerState=ye.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ye.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ye),this.browserUrlTree=ye.urlAfterRedirects)}),((_,E,y)=>(0,Ve.U)(A=>(new cs(E,A.targetRouterState,A.currentRouterState,y).activate(_),A)))(this.rootContexts,this.routeReuseStrategy,ye=>this.triggerEvent(ye)),(0,$e.b)({next(){W=!0},complete(){W=!0}}),ln(()=>{W||he||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Ge(ye=>{if(he=!0,pr(ye)){ta(ye)||(this.navigated=!0,this.restoreHistory(P,!0));const lt=new Bi(P.id,this.serializeUrl(P.extractedUrl),ye.message,ye.cancellationCode);if(A.next(lt),ta(ye)){const Gt=this.urlHandlingStrategy.merge(ye.url,this.rawUrlTree),Gn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kn(P.source)};this.scheduleNavigation(Gt,"imperative",null,Gn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{this.restoreHistory(P,!0);const lt=new Zs(P.id,this.serializeUrl(P.extractedUrl),ye,P.targetSnapshot??void 0);A.next(lt);try{P.resolve(this.errorHandler(ye))}catch(Gt){P.reject(Gt)}}return ge.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next({...this.transitions.value,...y})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const A="popstate"===y.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const P={replaceUrl:!0},W=y.state?.navigationId?y.state:null;if(W){const ye={...W};delete ye.navigationId,delete ye.\u0275routerPageId,0!==Object.keys(ye).length&&(P.state=ye)}const he=this.parseUrl(y.url);this.scheduleNavigation(he,A,W,P)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map(Vs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,A={}){const{relativeTo:P,queryParams:W,fragment:he,queryParamsHandling:ye,preserveFragment:lt}=A,Gt=P||this.routerState.root,Gn=lt?this.currentUrlTree.fragment:he;let cn=null;switch(ye){case"merge":cn={...this.currentUrlTree.queryParams,...W};break;case"preserve":cn=this.currentUrlTree.queryParams;break;default:cn=W||null}return null!==cn&&(cn=this.removeEmptyProps(cn)),Bn(Gt,this.currentUrlTree,y,cn,Gn??null)}navigateByUrl(y,A={skipLocationChange:!1}){const P=It(y)?y:this.parseUrl(y),W=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,A)}navigate(y,A={skipLocationChange:!1}){return function yi(_){for(let E=0;E<_.length;E++){if(null==_[E])throw new d.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,A),A)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let A;try{A=this.urlSerializer.parse(y)}catch(P){A=this.malformedUriErrorHandler(P,this.urlSerializer,y)}return A}isActive(y,A){let P;if(P=!0===A?{...oa}:!1===A?{...Pl}:A,It(y))return ut(this.currentUrlTree,y,P);const W=this.parseUrl(y);return ut(this.currentUrlTree,W,P)}removeEmptyProps(y){return Object.keys(y).reduce((A,P)=>{const W=y[P];return null!=W&&(A[P]=W),A},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new kr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,A,P,W,he){if(this.disposed)return Promise.resolve(!1);let ye,lt,Gt;he?(ye=he.resolve,lt=he.reject,Gt=he.promise):Gt=new Promise((hr,As)=>{ye=hr,lt=As});const Gn=++this.navigationId;let cn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),cn=P&&P.\u0275routerPageId?P.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):cn=0,this.setTransition({id:Gn,targetPageId:cn,source:A,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:W,resolve:ye,reject:lt,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(hr=>Promise.reject(hr))}setBrowserUrl(y,A){const P=this.urlSerializer.serialize(y),W={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(P)||A.extras.replaceUrl?this.location.replaceState(P,"",W):this.location.go(P,"",W)}restoreHistory(y,A=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===P?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===P&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,A,P){const W=new Bi(y.id,this.serializeUrl(y.extractedUrl),A,P);this.triggerEvent(W),y.resolve(!1)}generateNgRouterState(y,A){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:A}:{navigationId:y}}}return _.\u0275fac=function(y){d.$Z()},_.\u0275prov=d.Yz7({token:_,factory:function(){return Ko()},providedIn:"root"}),_})();function kn(_){return"imperative"!==_}let bs=(()=>{class _{constructor(y,A,P,W,he){this.router=y,this.route=A,this.tabIndexAttribute=P,this.renderer=W,this.el=he,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ot.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,d.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,d.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,d.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const A=this.renderer,P=this.el.nativeElement;null!==y?A.setAttribute(P,"tabindex",y):A.removeAttribute(P,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(d.Y36(ii),d.Y36(ci),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},_.\u0275dir=d.lG2({type:_,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,A){1&y&&d.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),_})(),ja=(()=>{class _{constructor(y,A,P){this.router=y,this.route=A,this.locationStrategy=P,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ot.x,this.subscription=y.events.subscribe(W=>{W instanceof kr&&this.updateTargetUrlAndHref()})}set preserveFragment(y){this._preserveFragment=(0,d.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,d.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,d.D6c)(y)}get replaceUrl(){return this._replaceUrl}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,A,P,W,he){return!!(0!==y||A||P||W||he||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(d.Y36(ii),d.Y36(ci),d.Y36(Et.S$))},_.\u0275dir=d.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,A){1&y&&d.NdJ("click",function(W){return A.onClick(W.button,W.ctrlKey,W.shiftKey,W.altKey,W.metaKey)}),2&y&&d.uIk("target",A.target)("href",A.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),_})();class Ts{}let sr=(()=>{class _{constructor(y,A,P,W,he){this.router=y,this.injector=P,this.preloadingStrategy=W,this.loader=he}setUpPreloading(){this.subscription=this.router.events.pipe((0,ft.h)(y=>y instanceof kr),(0,Vn.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,A){const P=[];for(const W of A){W.providers&&!W._injector&&(W._injector=(0,d.MMx)(W.providers,y,`Route: ${W.path}`));const he=W._injector??y,ye=W._loadedInjector??he;W.loadChildren&&!W._loadedRoutes&&void 0===W.canLoad||W.loadComponent&&!W._loadedComponent?P.push(this.preloadConfig(he,W)):(W.children||W._loadedRoutes)&&P.push(this.processRoutes(ye,W.children??W._loadedRoutes))}return(0,F.D)(P).pipe((0,Rn.J)())}preloadConfig(y,A){return this.preloadingStrategy.preload(A,()=>{let P;P=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(y,A):(0,V.of)(null);const W=P.pipe((0,jt.z)(he=>null===he?(0,V.of)(void 0):(A._loadedRoutes=he.routes,A._loadedInjector=he.injector,this.processRoutes(he.injector??y,he.routes))));if(A.loadComponent&&!A._loadedComponent){const he=this.loader.loadComponent(A);return(0,F.D)([W,he]).pipe((0,Rn.J)())}return W})}}return _.\u0275fac=function(y){return new(y||_)(d.LFG(ii),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Ts),d.LFG(ri))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Zt=new d.OlP("");let Ji=(()=>{class _{constructor(y,A,P={}){this.router=y,this.viewportScroller=A,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof kr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Lt&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,A){this.router.triggerEvent(new Lt(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(y){d.$Z()},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac}),_})();function Ro(_,E){return{\u0275kind:_,\u0275providers:E}}function Da(_){return[{provide:Rt,multi:!0,useValue:_}]}function Ca(){const _=(0,d.f3M)(d.zs3);return E=>{const y=_.get(d.z2F);if(E!==y.components[0])return;const A=_.get(ii),P=_.get(Ru);1===_.get(ps)&&A.initialNavigation(),_.get(qo,null,d.XFs.Optional)?.setUpPreloading(),_.get(Zt,null,d.XFs.Optional)?.init(),A.resetRootComponentType(y.componentTypes[0]),P.closed||(P.next(),P.unsubscribe())}}const Ru=new d.OlP("",{factory:()=>new ot.x}),ps=new d.OlP("",{providedIn:"root",factory:()=>1});const qo=new d.OlP("");function si(_){return Ro(0,[{provide:qo,useExisting:sr},{provide:Ts,useExisting:_}])}const Ga=new d.OlP("ROUTER_FORROOT_GUARD"),Ci=[Et.Ye,{provide:et,useClass:q},{provide:ii,useFactory:Ko},ls,{provide:ci,useFactory:function Mr(_){return _.routerState.root},deps:[ii]},ri];function Li(){return new d.PXZ("Router",ii)}let iu=(()=>{class _{constructor(y){}static forRoot(y,A){return{ngModule:_,providers:[Ci,[],Da(y),{provide:Ga,useFactory:Ou,deps:[[ii,new d.FiY,new d.tp0]]},{provide:Kt,useValue:A||{}},A?.useHash?{provide:Et.S$,useClass:Et.Do}:{provide:Et.S$,useClass:Et.b0},{provide:Zt,useFactory:()=>{const _=(0,d.f3M)(ii),E=(0,d.f3M)(Et.EM),y=(0,d.f3M)(Kt);return y.scrollOffset&&E.setOffset(y.scrollOffset),new Ji(_,E,y)}},A?.preloadingStrategy?si(A.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:Li},A?.initialNavigation?kl(A):[],[{provide:Xi,useFactory:Ca},{provide:d.tb,multi:!0,useExisting:Xi}]]}}static forChild(y){return{ngModule:_,providers:[Da(y)]}}}return _.\u0275fac=function(y){return new(y||_)(d.LFG(Ga,8))},_.\u0275mod=d.oAB({type:_}),_.\u0275inj=d.cJS({imports:[ki]}),_})();function Ou(_){return"guarded"}function kl(_){return["disabled"===_.initialNavigation?Ro(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const E=(0,d.f3M)(ii);return()=>{E.setUpLocationChangeListener()}}},{provide:ps,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?Ro(2,[{provide:ps,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:E=>{const y=E.get(Et.V_,Promise.resolve());let A=!1;return()=>y.then(()=>new Promise(W=>{const he=E.get(ii),ye=E.get(Ru);(function P(W){E.get(ii).events.pipe((0,ft.h)(ye=>ye instanceof kr||ye instanceof Bi||ye instanceof Zs),(0,Ve.U)(ye=>ye instanceof kr||ye instanceof Bi&&(0===ye.code||1===ye.code)&&null),(0,ft.h)(ye=>null!==ye),(0,Re.q)(1)).subscribe(()=>{W()})})(()=>{W(!0),A=!0}),he.afterPreactivation=()=>(W(!0),A||ye.closed?(0,V.of)(void 0):ye),he.initialNavigation()}))}}]).\u0275providers:[]]}const Xi=new d.OlP("")},3942:(Bt,Fe,R)=>{R.d(Fe,{Z:()=>We});var d=R(2090),F=R(4859),V=R(6881),ce=R(1877);class ae{constructor(Be,Me){this._delegate=Be,this.firebase=Me,(0,V._addComponent)(Be,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(Be,Me=V._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const mt=this._delegate.container.getProvider(Be);return!mt.isInitialized()&&"EXPLICIT"===(null===(Ct=mt.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&mt.initialize(),mt.getImmediate({identifier:Me})}_removeServiceInstance(Be,Me=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(Me)}_addComponent(Be){(0,V._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,V._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Pe(){const wt=function te(wt){const Be={},Me={__esModule:!0,initializeApp:function ge(Ve,be={}){const Re=V.initializeApp(Ve,be);if((0,d.r3)(Be,Re.name))return Be[Re.name];const gt=new wt(Re,Me);return Be[Re.name]=gt,gt},app:mt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function ot(Ve){const be=Ve.name,Re=be.replace("-compat","");if(V._registerComponent(Ve)&&"PUBLIC"===Ve.type){const gt=(ft=mt())=>{if("function"!=typeof ft[Re])throw Ce.create("invalid-app-argument",{appName:be});return ft[Re]()};void 0!==Ve.serviceProps&&(0,d.ZB)(gt,Ve.serviceProps),Me[Re]=gt,wt.prototype[Re]=function(...ft){return this._getService.bind(this,be).apply(this,Ve.multipleInstances?ft:[])}}return"PUBLIC"===Ve.type?Me[Re]:null},removeApp:function Ct(Ve){delete Be[Ve]},useAsService:function Et(Ve,be){return"serverAuth"===be?null:be},modularAPIs:V}};function mt(Ve){if(!(0,d.r3)(Be,Ve=Ve||V._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ve});return Be[Ve]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function st(){return Object.keys(Be).map(Ve=>Be[Ve])}}),mt.App=wt,Me}(ae);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Be(Me){(0,d.ZB)(wt,Me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),wt}(),ue=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=re;!function ze(wt){(0,V.registerVersion)("@firebase/app-compat","0.2.13",wt)}()},6881:(Bt,Fe,R)=>{R.r(Fe),R.d(Fe,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>er,_DEFAULT_ENTRY_NAME:()=>Un,_addComponent:()=>fe,_addOrOverwriteComponent:()=>nt,_apps:()=>rt,_clearComponents:()=>Tn,_components:()=>pe,_getProvider:()=>tn,_registerComponent:()=>ut,_removeServiceInstance:()=>hn,deleteApp:()=>On,getApp:()=>Yt,getApps:()=>Jt,initializeApp:()=>Nt,onLog:()=>q,registerVersion:()=>et,setLogLevel:()=>H});var d=R(5861),F=R(4859),V=R(1877),ce=R(2090);let we,Ce;const re=new WeakMap,ue=new WeakMap,me=new WeakMap,qe=new WeakMap,ze=new WeakMap;let Be={get(Ue,Le,St){if(Ue instanceof IDBTransaction){if("done"===Le)return ue.get(Ue);if("objectStoreNames"===Le)return Ue.objectStoreNames||me.get(Ue);if("store"===Le)return St.objectStoreNames[1]?void 0:St.objectStore(St.objectStoreNames[0])}return ge(Ue[Le])},set:(Ue,Le,St)=>(Ue[Le]=St,!0),has:(Ue,Le)=>Ue instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in Ue};function mt(Ue){return"function"==typeof Ue?function Ct(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...Le){return Ue.apply(st(this),Le),ge(re.get(this))}:function(...Le){return ge(Ue.apply(st(this),Le))}:function(Le,...St){const It=Ue.call(st(this),Le,...St);return me.set(It,Le.sort?Le.sort():[Le]),ge(It)}}(Ue):(Ue instanceof IDBTransaction&&function wt(Ue){if(ue.has(Ue))return;const Le=new Promise((St,It)=>{const wn=()=>{Ue.removeEventListener("complete",Ln),Ue.removeEventListener("error",Yn),Ue.removeEventListener("abort",Yn)},Ln=()=>{St(),wn()},Yn=()=>{It(Ue.error||new DOMException("AbortError","AbortError")),wn()};Ue.addEventListener("complete",Ln),Ue.addEventListener("error",Yn),Ue.addEventListener("abort",Yn)});ue.set(Ue,Le)}(Ue),((Ue,Le)=>Le.some(St=>Ue instanceof St))(Ue,function te(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,Be):Ue)}function ge(Ue){if(Ue instanceof IDBRequest)return function We(Ue){const Le=new Promise((St,It)=>{const wn=()=>{Ue.removeEventListener("success",Ln),Ue.removeEventListener("error",Yn)},Ln=()=>{St(ge(Ue.result)),wn()},Yn=()=>{It(Ue.error),wn()};Ue.addEventListener("success",Ln),Ue.addEventListener("error",Yn)});return Le.then(St=>{St instanceof IDBCursor&&re.set(St,Ue)}).catch(()=>{}),ze.set(Le,Ue),Le}(Ue);if(qe.has(Ue))return qe.get(Ue);const Le=mt(Ue);return Le!==Ue&&(qe.set(Ue,Le),ze.set(Le,Ue)),Le}const st=Ue=>ze.get(Ue),Ve=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Re=new Map;function gt(Ue,Le){if(!(Ue instanceof IDBDatabase)||Le in Ue||"string"!=typeof Le)return;if(Re.get(Le))return Re.get(Le);const St=Le.replace(/FromIndex$/,""),It=Le!==St,wn=be.includes(St);if(!(St in(It?IDBIndex:IDBObjectStore).prototype)||!wn&&!Ve.includes(St))return;const Ln=function(){var Yn=(0,d.Z)(function*(Tr,...Bn){const Rr=this.transaction(Tr,wn?"readwrite":"readonly");let Gr=Rr.store;return It&&(Gr=Gr.index(Bn.shift())),(yield Promise.all([Gr[St](...Bn),wn&&Rr.done]))[0]});return function(Bn){return Yn.apply(this,arguments)}}();return Re.set(Le,Ln),Ln}!function Me(Ue){Be=Ue(Be)}(Ue=>({...Ue,get:(Le,St,It)=>gt(Le,St)||Ue.get(Le,St,It),has:(Le,St)=>!!gt(Le,St)||Ue.has(Le,St)}));class ft{constructor(Le){this.container=Le}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function jt(Ue){return"VERSION"===Ue.getComponent()?.type}(St)){const It=St.getImmediate();return`${It.library}/${It.version}`}return null}).filter(St=>St).join(" ")}}const Vt="@firebase/app",$e=new V.Yd("@firebase/app"),Un="[DEFAULT]",Zn={[Vt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,pe=new Map;function fe(Ue,Le){try{Ue.container.addComponent(Le)}catch(St){$e.debug(`Component ${Le.name} failed to register with FirebaseApp ${Ue.name}`,St)}}function nt(Ue,Le){Ue.container.addOrOverwriteComponent(Le)}function ut(Ue){const Le=Ue.name;if(pe.has(Le))return $e.debug(`There were multiple attempts to register component ${Le}.`),!1;pe.set(Le,Ue);for(const St of rt.values())fe(St,Ue);return!0}function tn(Ue,Le){const St=Ue.container.getProvider("heartbeat").getImmediate({optional:!0});return St&&St.triggerHeartbeat(),Ue.container.getProvider(Le)}function hn(Ue,Le,St=Un){tn(Ue,Le).clearInstance(St)}function Tn(){pe.clear()}const Nn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Le,St,It){this._isDeleted=!1,this._options=Object.assign({},Le),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this.checkDestroyed(),this._automaticDataCollectionEnabled=Le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Le){this._isDeleted=Le}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const er="9.23.0";function Nt(Ue,Le={}){let St=Ue;"object"!=typeof Le&&(Le={name:Le});const It=Object.assign({name:Un,automaticDataCollectionEnabled:!1},Le),wn=It.name;if("string"!=typeof wn||!wn)throw Nn.create("bad-app-name",{appName:String(wn)});if(St||(St=(0,ce.aH)()),!St)throw Nn.create("no-options");const Ln=rt.get(wn);if(Ln){if((0,ce.vZ)(St,Ln.options)&&(0,ce.vZ)(It,Ln.config))return Ln;throw Nn.create("duplicate-app",{appName:wn})}const Yn=new F.H0(wn);for(const Bn of pe.values())Yn.addComponent(Bn);const Tr=new fn(St,It,Yn);return rt.set(wn,Tr),Tr}function Yt(Ue=Un){const Le=rt.get(Ue);if(!Le&&Ue===Un&&(0,ce.aH)())return Nt();if(!Le)throw Nn.create("no-app",{appName:Ue});return Le}function Jt(){return Array.from(rt.values())}function On(Ue){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(Ue){const Le=Ue.name;rt.has(Le)&&(rt.delete(Le),yield Promise.all(Ue.container.getProviders().map(St=>St.delete())),Ue.isDeleted=!0)})).apply(this,arguments)}function et(Ue,Le,St){var It;let wn=null!==(It=Zn[Ue])&&void 0!==It?It:Ue;St&&(wn+=`-${St}`);const Ln=wn.match(/\s|\//),Yn=Le.match(/\s|\//);if(Ln||Yn){const Tr=[`Unable to register library "${wn}" with version "${Le}":`];return Ln&&Tr.push(`library name "${wn}" contains illegal characters (whitespace or "/")`),Ln&&Yn&&Tr.push("and"),Yn&&Tr.push(`version name "${Le}" contains illegal characters (whitespace or "/")`),void $e.warn(Tr.join(" "))}ut(new F.wA(`${wn}-version`,()=>({library:wn,version:Le}),"VERSION"))}function q(Ue,Le){if(null!==Ue&&"function"!=typeof Ue)throw Nn.create("invalid-log-argument");(0,V.Am)(Ue,Le)}function H(Ue){(0,V.Ub)(Ue)}const ee="firebase-heartbeat-store";let ie=null;function Z(){return ie||(ie=function ot(Ue,Le,{blocked:St,upgrade:It,blocking:wn,terminated:Ln}={}){const Yn=indexedDB.open(Ue,Le),Tr=ge(Yn);return It&&Yn.addEventListener("upgradeneeded",Bn=>{It(ge(Yn.result),Bn.oldVersion,Bn.newVersion,ge(Yn.transaction),Bn)}),St&&Yn.addEventListener("blocked",Bn=>St(Bn.oldVersion,Bn.newVersion,Bn)),Tr.then(Bn=>{Ln&&Bn.addEventListener("close",()=>Ln()),wn&&Bn.addEventListener("versionchange",Rr=>wn(Rr.oldVersion,Rr.newVersion,Rr))}).catch(()=>{}),Tr}("firebase-heartbeat-database",1,{upgrade:(Ue,Le)=>{0===Le&&Ue.createObjectStore(ee)}}).catch(Ue=>{throw Nn.create("idb-open",{originalErrorMessage:Ue.message})})),ie}function G(){return(G=(0,d.Z)(function*(Ue){try{return yield(yield Z()).transaction(ee).objectStore(ee).get(Ft(Ue))}catch(Le){if(Le instanceof ce.ZR)$e.warn(Le.message);else{const St=Nn.create("idb-get",{originalErrorMessage:Le?.message});$e.warn(St.message)}}})).apply(this,arguments)}function Te(Ue,Le){return ht.apply(this,arguments)}function ht(){return(ht=(0,d.Z)(function*(Ue,Le){try{const It=(yield Z()).transaction(ee,"readwrite");yield It.objectStore(ee).put(Le,Ft(Ue)),yield It.done}catch(St){if(St instanceof ce.ZR)$e.warn(St.message);else{const It=Nn.create("idb-set",{originalErrorMessage:St?.message});$e.warn(It.message)}}})).apply(this,arguments)}function Ft(Ue){return`${Ue.name}!${Ue.options.appId}`}class de{constructor(Le){this.container=Le,this._heartbeatsCache=null;const St=this.container.getProvider("app").getImmediate();this._storage=new Ke(St),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var Le=this;return(0,d.Z)(function*(){const It=Le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wn=ne();if(null===Le._heartbeatsCache&&(Le._heartbeatsCache=yield Le._heartbeatsCachePromise),Le._heartbeatsCache.lastSentHeartbeatDate!==wn&&!Le._heartbeatsCache.heartbeats.some(Ln=>Ln.date===wn))return Le._heartbeatsCache.heartbeats.push({date:wn,agent:It}),Le._heartbeatsCache.heartbeats=Le._heartbeatsCache.heartbeats.filter(Ln=>{const Yn=new Date(Ln.date).valueOf();return Date.now()-Yn<=2592e6}),Le._storage.overwrite(Le._heartbeatsCache)})()}getHeartbeatsHeader(){var Le=this;return(0,d.Z)(function*(){if(null===Le._heartbeatsCache&&(yield Le._heartbeatsCachePromise),null===Le._heartbeatsCache||0===Le._heartbeatsCache.heartbeats.length)return"";const St=ne(),{heartbeatsToSend:It,unsentEntries:wn}=function Ne(Ue,Le=1024){const St=[];let It=Ue.slice();for(const wn of Ue){const Ln=St.find(Yn=>Yn.agent===wn.agent);if(Ln){if(Ln.dates.push(wn.date),Ut(St)>Le){Ln.dates.pop();break}}else if(St.push({agent:wn.agent,dates:[wn.date]}),Ut(St)>Le){St.pop();break}It=It.slice(1)}return{heartbeatsToSend:St,unsentEntries:It}}(Le._heartbeatsCache.heartbeats),Ln=(0,ce.L)(JSON.stringify({version:2,heartbeats:It}));return Le._heartbeatsCache.lastSentHeartbeatDate=St,wn.length>0?(Le._heartbeatsCache.heartbeats=wn,yield Le._storage.overwrite(Le._heartbeatsCache)):(Le._heartbeatsCache.heartbeats=[],Le._storage.overwrite(Le._heartbeatsCache)),Ln})()}}function ne(){return(new Date).toISOString().substring(0,10)}class Ke{constructor(Le){this.app=Le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Le=this;return(0,d.Z)(function*(){return(yield Le._canUseIndexedDBPromise)&&(yield function z(Ue){return G.apply(this,arguments)}(Le.app))||{heartbeats:[]}})()}overwrite(Le){var St=this;return(0,d.Z)(function*(){var It;if(yield St._canUseIndexedDBPromise){const Ln=yield St.read();return Te(St.app,{lastSentHeartbeatDate:null!==(It=Le.lastSentHeartbeatDate)&&void 0!==It?It:Ln.lastSentHeartbeatDate,heartbeats:Le.heartbeats})}})()}add(Le){var St=this;return(0,d.Z)(function*(){var It;if(yield St._canUseIndexedDBPromise){const Ln=yield St.read();return Te(St.app,{lastSentHeartbeatDate:null!==(It=Le.lastSentHeartbeatDate)&&void 0!==It?It:Ln.lastSentHeartbeatDate,heartbeats:[...Ln.heartbeats,...Le.heartbeats]})}})()}}function Ut(Ue){return(0,ce.L)(JSON.stringify({version:2,heartbeats:Ue})).length}!function yn(Ue){ut(new F.wA("platform-logger",Le=>new ft(Le),"PRIVATE")),ut(new F.wA("heartbeat",Le=>new de(Le),"PRIVATE")),et(Vt,"0.9.13",Ue),et(Vt,"0.9.13","esm2017"),et("fire-js","")}("")},4859:(Bt,Fe,R)=>{R.d(Fe,{H0:()=>te,wA:()=>V});var d=R(5861),F=R(2090);class V{constructor(re,ue,me){this.name=re,this.instanceFactory=ue,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const ce="[DEFAULT]";class ae{constructor(re,ue){this.name=re,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const ue=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(ue)){const me=new F.BH;if(this.instancesDeferred.set(ue,me),this.isInitialized(ue)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:ue});qe&&me.resolve(qe)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(re){var ue;const me=this.normalizeInstanceIdentifier(re?.identifier),qe=null!==(ue=re?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(ze){if(qe)return null;throw ze}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function Ce(Pe){return"EAGER"===Pe.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[ue,me]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(ue);try{const ze=this.getOrInitializeService({instanceIdentifier:qe});me.resolve(ze)}catch{}}}}clearInstance(re=ce){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,d.Z)(function*(){const ue=Array.from(re.instances.values());yield Promise.all([...ue.filter(me=>"INTERNAL"in me).map(me=>me.INTERNAL.delete()),...ue.filter(me=>"_delete"in me).map(me=>me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=ce){return this.instances.has(re)}getOptions(re=ce){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:ue={}}=re,me=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(me))throw Error(`${this.name}(${me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:me,options:ue});for(const[ze,We]of this.instancesDeferred.entries())me===this.normalizeInstanceIdentifier(ze)&&We.resolve(qe);return qe}onInit(re,ue){var me;const qe=this.normalizeInstanceIdentifier(ue),ze=null!==(me=this.onInitCallbacks.get(qe))&&void 0!==me?me:new Set;ze.add(re),this.onInitCallbacks.set(qe,ze);const We=this.instances.get(qe);return We&&re(We,qe),()=>{ze.delete(re)}}invokeOnInitCallbacks(re,ue){const me=this.onInitCallbacks.get(ue);if(me)for(const qe of me)try{qe(re,ue)}catch{}}getOrInitializeService({instanceIdentifier:re,options:ue={}}){let me=this.instances.get(re);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=re,Pe===ce?void 0:Pe),options:ue}),this.instances.set(re,me),this.instancesOptions.set(re,ue),this.invokeOnInitCallbacks(me,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,me)}catch{}var Pe;return me||null}normalizeInstanceIdentifier(re=ce){return this.component?this.component.multipleInstances?re:ce:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const ue=this.getProvider(re.name);if(ue.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);ue.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const ue=new ae(re,this);return this.providers.set(re,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Bt,Fe,R)=>{R.d(Fe,{Am:()=>Pe,Ub:()=>te,Yd:()=>Ce,in:()=>F});const d=[];var F=(()=>{return(re=F||(F={}))[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",F;var re})();const V={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},ce=F.INFO,ae={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},we=(re,ue,...me)=>{if(ue<re.logLevel)return;const qe=(new Date).toISOString(),ze=ae[ue];if(!ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[ze](`[${qe}]  ${re.name}:`,...me)};class Ce{constructor(ue){this.name=ue,this._logLevel=ce,this._logHandler=we,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in F))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?V[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...ue),this._logHandler(this,F.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...ue),this._logHandler(this,F.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,F.INFO,...ue),this._logHandler(this,F.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,F.WARN,...ue),this._logHandler(this,F.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...ue),this._logHandler(this,F.ERROR,...ue)}}function te(re){d.forEach(ue=>{ue.setLogLevel(re)})}function Pe(re,ue){for(const me of d){let qe=null;ue&&ue.level&&(qe=V[ue.level]),me.userLogHandler=null===re?null:(ze,We,...wt)=>{const Be=wt.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");We>=(qe??ze.logLevel)&&re({level:F[We].toLowerCase(),message:Be,args:wt,type:ze.name})}}}},259:(Bt,Fe,R)=>{R.d(Fe,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=R(6881);(0,d.registerVersion)("firebase","9.23.0","app")},9260:(Bt,Fe,R)=>{R.d(Fe,{Z:()=>d.Z});var d=R(3942);d.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Bt,Fe,R)=>{R.r(Fe);var d=R(5861),F=R(3942),V=R(1389),ce=R(2090),Ce=(R(6881),R(1877),R(4859));function te(){return window}function ue(){return(ue=(0,d.Z)(function*(Z,z,G){var Te;const{BuildInfo:ht}=te();(0,V.as)(z.sessionId,"AuthEvent did not contain a session ID");const Ft=yield Me(z.sessionId),sn={};return(0,V.at)()?sn.ibi=ht.packageName:(0,V.au)()?sn.apn=ht.packageName:(0,V.av)(Z,"operation-not-supported-in-this-environment"),ht.displayName&&(sn.appDisplayName=ht.displayName),sn.sessionId=Ft,(0,V.aw)(Z,G,z.type,void 0,null!==(Te=z.eventId)&&void 0!==Te?Te:void 0,sn)})).apply(this,arguments)}function qe(){return(qe=(0,d.Z)(function*(Z){const{BuildInfo:z}=te(),G={};(0,V.at)()?G.iosBundleId=z.packageName:(0,V.au)()?G.androidPackageName=z.packageName:(0,V.av)(Z,"operation-not-supported-in-this-environment"),yield(0,V.ax)(Z,G)})).apply(this,arguments)}function wt(){return(wt=(0,d.Z)(function*(Z,z,G){const{cordova:Te}=te();let ht=()=>{};try{yield new Promise((Ft,sn)=>{let oe=null;function de(){var Ke;Ft();const Ut=null===(Ke=Te.plugins.browsertab)||void 0===Ke?void 0:Ke.close;"function"==typeof Ut&&Ut(),"function"==typeof G?.close&&G.close()}function ne(){oe||(oe=window.setTimeout(()=>{sn((0,V.az)(Z,"redirect-cancelled-by-user"))},2e3))}function Ne(){"visible"===document?.visibilityState&&ne()}z.addPassiveListener(de),document.addEventListener("resume",ne,!1),(0,V.au)()&&document.addEventListener("visibilitychange",Ne,!1),ht=()=>{z.removePassiveListener(de),document.removeEventListener("resume",ne,!1),document.removeEventListener("visibilitychange",Ne,!1),oe&&window.clearTimeout(oe)}})}finally{ht()}})).apply(this,arguments)}function Me(Z){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,d.Z)(function*(Z){const z=mt(Z),G=yield crypto.subtle.digest("SHA-256",z);return Array.from(new Uint8Array(G)).map(ht=>ht.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mt(Z){if((0,V.as)(/[0-9a-zA-Z]+/.test(Z),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Z);const z=new ArrayBuffer(Z.length),G=new Uint8Array(z);for(let Te=0;Te<Z.length;Te++)G[Te]=Z.charCodeAt(Te);return G}class st extends V.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(z=>{this.resolveInialized=z})}addPassiveListener(z){this.passiveListeners.add(z)}removePassiveListener(z){this.passiveListeners.delete(z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(z){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(z)),super.onEvent(z)}initialized(){var z=this;return(0,d.Z)(function*(){yield z.initPromise})()}}function Ve(Z){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(Z){const z=yield ft()._get(jt(Z));return z&&(yield ft()._remove(jt(Z))),z})).apply(this,arguments)}function gt(){const Z=[],z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const Te=Math.floor(Math.random()*z.length);Z.push(z.charAt(Te))}return Z.join("")}function ft(){return(0,V.aC)(V.b)}function jt(Z){return(0,V.aD)("authEvent",Z.config.apiKey,Z.name)}function $e(Z){if(!Z?.includes("?"))return{};const[z,...G]=Z.split("?");return(0,ce.zd)(G.join("?"))}function Xe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,V.az)("no-auth-event")}}function Pt(){var Z;return(null===(Z=self?.location)||void 0===Z?void 0:Z.protocol)||null}function ln(Z=(0,ce.z$)()){return!("file:"!==Pt()&&"ionic:"!==Pt()&&"capacitor:"!==Pt()||!Z.toLowerCase().match(/iphone|ipad|ipod|android/))}function on(){try{const Z=self.localStorage,z=V.aL();if(Z)return Z.setItem(z,"1"),Z.removeItem(z),!function qt(Z=(0,ce.z$)()){return function Rn(){return(0,ce.w1)()&&11===document?.documentMode}()||function lr(Z=(0,ce.z$)()){return/Edge\/\d+/.test(Z)}(Z)}()||(0,ce.hl)()}catch{return Cn()&&(0,ce.hl)()}return!1}function Cn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function nn(){return"http:"===Pt()||"https:"===Pt()}()||(0,ce.ru)()||ln())&&!function mn(){return(0,ce.b$)()||(0,ce.UG)()}()&&on()&&!Cn()}function br(){return ln()&&typeof document<"u"}function xt(){return(xt=(0,d.Z)(function*(){return!!br()&&new Promise(Z=>{const z=setTimeout(()=>{Z(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(z),Z(!0)})})})).apply(this,arguments)}const $n={LOCAL:"local",NONE:"none",SESSION:"session"},ar=V.aA,Pr="persistence";function Zn(Z){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(Z){yield Z._initializationPromise;const z=fe(),G=V.aD(Pr,Z.config.apiKey,Z.name);z&&z.setItem(G,Z._getPersistence())})).apply(this,arguments)}function fe(){var Z;try{return(null===(Z=function bn(){return typeof window<"u"?window:null}())||void 0===Z?void 0:Z.sessionStorage)||null}catch{return null}}const nt=V.aA;class ut{constructor(){this.browserResolver=V.aC(V.k),this.cordovaResolver=V.aC(class Je{constructor(){this._redirectPersistence=V.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=V.aE,this._overrideRedirectResult=V.aF}_initialize(z){var G=this;return(0,d.Z)(function*(){const Te=z._key();let ht=G.eventManagers.get(Te);return ht||(ht=new st(z),G.eventManagers.set(Te,ht),G.attachCallbackListeners(z,ht)),ht})()}_openPopup(z){(0,V.av)(z,"operation-not-supported-in-this-environment")}_openRedirect(z,G,Te,ht){var Ft=this;return(0,d.Z)(function*(){!function Be(Z){var z,G,Te,ht,Ft,sn,oe,de,ne,Ne;const Ke=te();(0,V.aA)("function"==typeof(null===(z=Ke?.universalLinks)||void 0===z?void 0:z.subscribe),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,V.aA)(typeof(null===(G=Ke?.BuildInfo)||void 0===G?void 0:G.packageName)<"u",Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,V.aA)("function"==typeof(null===(Ft=null===(ht=null===(Te=Ke?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===ht?void 0:ht.browsertab)||void 0===Ft?void 0:Ft.openUrl),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aA)("function"==typeof(null===(de=null===(oe=null===(sn=Ke?.cordova)||void 0===sn?void 0:sn.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===de?void 0:de.isAvailable),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,V.aA)("function"==typeof(null===(Ne=null===(ne=Ke?.cordova)||void 0===ne?void 0:ne.InAppBrowser)||void 0===Ne?void 0:Ne.open),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(z);const sn=yield Ft._initialize(z);yield sn.initialized(),sn.resetRedirect(),(0,V.aG)(),yield Ft._originValidation(z);const oe=function ot(Z,z,G=null){return{type:z,eventId:G,urlResponse:null,sessionId:gt(),postBody:null,tenantId:Z.tenantId,error:(0,V.az)(Z,"no-auth-event")}}(z,Te,ht);yield function Et(Z,z){return ft()._set(jt(Z),z)}(z,oe);const de=yield function re(Z,z,G){return ue.apply(this,arguments)}(z,oe,G),ne=yield function ze(Z){const{cordova:z}=te();return new Promise(G=>{z.plugins.browsertab.isAvailable(Te=>{let ht=null;Te?z.plugins.browsertab.openUrl(Z):ht=z.InAppBrowser.open(Z,(0,V.ay)()?"_blank":"_system","location=yes"),G(ht)})})}(de);return function We(Z,z,G){return wt.apply(this,arguments)}(z,sn,ne)})()}_isIframeWebStorageSupported(z,G){throw new Error("Method not implemented.")}_originValidation(z){const G=z._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function me(Z){return qe.apply(this,arguments)}(z)),this.originValidationPromises[G]}attachCallbackListeners(z,G){const{universalLinks:Te,handleOpenURL:ht,BuildInfo:Ft}=te(),sn=setTimeout((0,d.Z)(function*(){yield Ve(z),G.onEvent(Xe())}),500),oe=function(){var Ne=(0,d.Z)(function*(Ke){clearTimeout(sn);const Ut=yield Ve(z);let yn=null;Ut&&Ke?.url&&(yn=function Re(Z,z){var G,Te;const ht=function Vn(Z){const z=$e(Z),G=z.link?decodeURIComponent(z.link):void 0,Te=$e(G).link,ht=z.deep_link_id?decodeURIComponent(z.deep_link_id):void 0;return $e(ht).link||ht||Te||G||Z}(z);if(ht.includes("/__/auth/callback")){const Ft=$e(ht),sn=Ft.firebaseError?function Vt(Z){try{return JSON.parse(Z)}catch{return null}}(decodeURIComponent(Ft.firebaseError)):null,oe=null===(Te=null===(G=sn?.code)||void 0===G?void 0:G.split("auth/"))||void 0===Te?void 0:Te[1],de=oe?(0,V.az)(oe):null;return de?{type:Z.type,eventId:Z.eventId,tenantId:Z.tenantId,error:de,urlResponse:null,sessionId:null,postBody:null}:{type:Z.type,eventId:Z.eventId,tenantId:Z.tenantId,sessionId:Z.sessionId,urlResponse:ht,postBody:null}}return null}(Ut,Ke.url)),G.onEvent(yn||Xe())});return function(Ut){return Ne.apply(this,arguments)}}();typeof Te<"u"&&"function"==typeof Te.subscribe&&Te.subscribe(null,oe);const de=ht,ne=`${Ft.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Ne=(0,d.Z)(function*(Ke){if(Ke.toLowerCase().startsWith(ne)&&oe({url:Ke}),"function"==typeof de)try{de(Ke)}catch(Ut){console.error(Ut)}});return function(Ke){return Ne.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=V.a,this._completeRedirectFn=V.aE,this._overrideRedirectResult=V.aF}_initialize(z){var G=this;return(0,d.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(z)})()}_openPopup(z,G,Te,ht){var Ft=this;return(0,d.Z)(function*(){return yield Ft.selectUnderlyingResolver(),Ft.assertedUnderlyingResolver._openPopup(z,G,Te,ht)})()}_openRedirect(z,G,Te,ht){var Ft=this;return(0,d.Z)(function*(){return yield Ft.selectUnderlyingResolver(),Ft.assertedUnderlyingResolver._openRedirect(z,G,Te,ht)})()}_isIframeWebStorageSupported(z,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(z,G)}_originValidation(z){return this.assertedUnderlyingResolver._originValidation(z)}get _shouldInitProactively(){return br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var z=this;return(0,d.Z)(function*(){if(z.underlyingResolver)return;const G=yield function _r(){return xt.apply(this,arguments)}();z.underlyingResolver=G?z.cordovaResolver:z.browserResolver})()}}function tn(Z){return Z.unwrap()}function Tn(Z){return Nn(Z)}function Nn(Z){const{_tokenResponse:z}=Z instanceof ce.ZR?Z.customData:Z;if(!z)return null;if(!(Z instanceof ce.ZR)&&"temporaryProof"in z&&"phoneNumber"in z)return V.P.credentialFromResult(Z);const G=z.providerId;if(!G||G===V.p.PASSWORD)return null;let Te;switch(G){case V.p.GOOGLE:Te=V.V;break;case V.p.FACEBOOK:Te=V.U;break;case V.p.GITHUB:Te=V.W;break;case V.p.TWITTER:Te=V.Z;break;default:const{oauthIdToken:ht,oauthAccessToken:Ft,oauthTokenSecret:sn,pendingToken:oe,nonce:de}=z;return Ft||sn||ht||oe?oe?G.startsWith("saml.")?V.aO._create(G,oe):V.L._fromParams({providerId:G,signInMethod:G,pendingToken:oe,idToken:ht,accessToken:Ft}):new V.X(G).credential({idToken:ht,accessToken:Ft,rawNonce:de}):null}return Z instanceof ce.ZR?Te.credentialFromError(Z):Te.credentialFromResult(Z)}function fn(Z,z){return z.catch(G=>{throw G instanceof ce.ZR&&function Ot(Z,z){var G;const Te=null===(G=z.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===z?.code)z.resolver=new Yt(Z,V.aq(Z,z));else if(Te){const ht=Nn(z),Ft=z;ht&&(Ft.credential=ht,Ft.tenantId=Te.tenantId||void 0,Ft.email=Te.email||void 0,Ft.phoneNumber=Te.phoneNumber||void 0)}}(Z,G),G}).then(G=>{const ht=G.user;return{operationType:G.operationType,credential:Tn(G),additionalUserInfo:V.ao(G),user:Jt.getOrCreate(ht)}})}function er(Z,z){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(Z,z){const G=yield z;return{verificationId:G.verificationId,confirm:Te=>fn(Z,G.confirm(Te))}})).apply(this,arguments)}class Yt{constructor(z,G){this.resolver=G,this.auth=function hn(Z){return Z.wrapped()}(z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(z){return fn(tn(this.auth),this.resolver.resolveSignIn(z))}}class Jt{constructor(z){this._delegate=z,this.multiFactor=V.ar(z)}static getOrCreate(z){return Jt.USER_MAP.has(z)||Jt.USER_MAP.set(z,new Jt(z)),Jt.USER_MAP.get(z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(z){return this._delegate.getIdTokenResult(z)}getIdToken(z){return this._delegate.getIdToken(z)}linkAndRetrieveDataWithCredential(z){return this.linkWithCredential(z)}linkWithCredential(z){var G=this;return(0,d.Z)(function*(){return fn(G.auth,V.a0(G._delegate,z))})()}linkWithPhoneNumber(z,G){var Te=this;return(0,d.Z)(function*(){return er(Te.auth,V.l(Te._delegate,z,G))})()}linkWithPopup(z){var G=this;return(0,d.Z)(function*(){return fn(G.auth,V.d(G._delegate,z,ut))})()}linkWithRedirect(z){var G=this;return(0,d.Z)(function*(){return yield Zn(V.aH(G.auth)),V.g(G._delegate,z,ut)})()}reauthenticateAndRetrieveDataWithCredential(z){return this.reauthenticateWithCredential(z)}reauthenticateWithCredential(z){var G=this;return(0,d.Z)(function*(){return fn(G.auth,V.a1(G._delegate,z))})()}reauthenticateWithPhoneNumber(z,G){return er(this.auth,V.r(this._delegate,z,G))}reauthenticateWithPopup(z){return fn(this.auth,V.e(this._delegate,z,ut))}reauthenticateWithRedirect(z){var G=this;return(0,d.Z)(function*(){return yield Zn(V.aH(G.auth)),V.h(G._delegate,z,ut)})()}sendEmailVerification(z){return V.ae(this._delegate,z)}unlink(z){var G=this;return(0,d.Z)(function*(){return yield V.an(G._delegate,z),G})()}updateEmail(z){return V.aj(this._delegate,z)}updatePassword(z){return V.ak(this._delegate,z)}updatePhoneNumber(z){return V.u(this._delegate,z)}updateProfile(z){return V.ai(this._delegate,z)}verifyBeforeUpdateEmail(z,G){return V.af(this._delegate,z,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Jt.USER_MAP=new WeakMap;const On=V.aA;let qn=(()=>{class Z{constructor(G,Te){if(this.app=G,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ht}=G.options;On(ht,"invalid-api-key",{appName:G.name}),On(ht,"invalid-api-key",{appName:G.name});const Ft=typeof window<"u"?ut:void 0;this._delegate=Te.initialize({options:{persistence:q(ht,G.name),popupRedirectResolver:Ft}}),this._delegate._updateErrorMap(V.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Jt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,Te){V.I(this._delegate,G,Te)}applyActionCode(G){return V.a5(this._delegate,G)}checkActionCode(G){return V.a6(this._delegate,G)}confirmPasswordReset(G,Te){return V.a4(this._delegate,G,Te)}createUserWithEmailAndPassword(G,Te){var ht=this;return(0,d.Z)(function*(){return fn(ht._delegate,V.a8(ht._delegate,G,Te))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return V.ad(this._delegate,G)}isSignInWithEmailLink(G){return V.ab(this._delegate,G)}getRedirectResult(){var G=this;return(0,d.Z)(function*(){On(jn(),G._delegate,"operation-not-supported-in-this-environment");const Te=yield V.j(G._delegate,ut);return Te?fn(G._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function yt(Z,z){(0,V.aH)(Z)._logFramework(z)}(this._delegate,G)}onAuthStateChanged(G,Te,ht){const{next:Ft,error:sn,complete:oe}=et(G,Te,ht);return this._delegate.onAuthStateChanged(Ft,sn,oe)}onIdTokenChanged(G,Te,ht){const{next:Ft,error:sn,complete:oe}=et(G,Te,ht);return this._delegate.onIdTokenChanged(Ft,sn,oe)}sendSignInLinkToEmail(G,Te){return V.aa(this._delegate,G,Te)}sendPasswordResetEmail(G,Te){return V.a3(this._delegate,G,Te||void 0)}setPersistence(G){var Te=this;return(0,d.Z)(function*(){let ht;switch(function Un(Z,z){ar(Object.values($n).includes(z),Z,"invalid-persistence-type"),(0,ce.b$)()?ar(z!==$n.SESSION,Z,"unsupported-persistence-type"):(0,ce.UG)()?ar(z===$n.NONE,Z,"unsupported-persistence-type"):Cn()?ar(z===$n.NONE||z===$n.LOCAL&&(0,ce.hl)(),Z,"unsupported-persistence-type"):ar(z===$n.NONE||on(),Z,"unsupported-persistence-type")}(Te._delegate,G),G){case $n.SESSION:ht=V.a;break;case $n.LOCAL:ht=(yield V.aC(V.i)._isAvailable())?V.i:V.b;break;case $n.NONE:ht=V.N;break;default:return V.av("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(ht)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return fn(this._delegate,V._(this._delegate))}signInWithCredential(G){return fn(this._delegate,V.$(this._delegate,G))}signInWithCustomToken(G){return fn(this._delegate,V.a2(this._delegate,G))}signInWithEmailAndPassword(G,Te){return fn(this._delegate,V.a9(this._delegate,G,Te))}signInWithEmailLink(G,Te){return fn(this._delegate,V.ac(this._delegate,G,Te))}signInWithPhoneNumber(G,Te){return er(this._delegate,V.s(this._delegate,G,Te))}signInWithPopup(G){var Te=this;return(0,d.Z)(function*(){return On(jn(),Te._delegate,"operation-not-supported-in-this-environment"),fn(Te._delegate,V.c(Te._delegate,G,ut))})()}signInWithRedirect(G){var Te=this;return(0,d.Z)(function*(){return On(jn(),Te._delegate,"operation-not-supported-in-this-environment"),yield Zn(Te._delegate),V.f(Te._delegate,G,ut)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return V.a7(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Z.Persistence=$n,Z})();function et(Z,z,G){let Te=Z;"function"!=typeof Z&&({next:Te,error:z,complete:G}=Z);const ht=Te;return{next:sn=>ht(sn&&Jt.getOrCreate(sn)),error:z,complete:G}}function q(Z,z){const G=function pe(Z,z){const G=fe();if(!G)return[];const Te=V.aD(Pr,Z,z);switch(G.getItem(Te)){case $n.NONE:return[V.N];case $n.LOCAL:return[V.i,V.a];case $n.SESSION:return[V.a];default:return[]}}(Z,z);if(typeof self<"u"&&!G.includes(V.i)&&G.push(V.i),typeof window<"u")for(const Te of[V.b,V.a])G.includes(Te)||G.push(Te);return G.includes(V.N)||G.push(V.N),G}class H{constructor(){this.providerId="phone",this._delegate=new V.P(tn(F.Z.auth()))}static credential(z,G){return V.P.credential(z,G)}verifyPhoneNumber(z,G){return this._delegate.verifyPhoneNumber(z,G)}unwrap(){return this._delegate}}H.PHONE_SIGN_IN_METHOD=V.P.PHONE_SIGN_IN_METHOD,H.PROVIDER_ID=V.P.PROVIDER_ID;const _e=V.aA;class De{constructor(z,G,Te=F.Z.app()){var ht;_e(null===(ht=Te.options)||void 0===ht?void 0:ht.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new V.R(z,G,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ie(Z){Z.INTERNAL.registerComponent(new Ce.wA("auth-compat",z=>{const G=z.getProvider("app-compat").getImmediate(),Te=z.getProvider("auth");return new qn(G,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V.A.EMAIL_SIGNIN,PASSWORD_RESET:V.A.PASSWORD_RESET,RECOVER_EMAIL:V.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V.A.VERIFY_EMAIL}},EmailAuthProvider:V.Q,FacebookAuthProvider:V.U,GithubAuthProvider:V.W,GoogleAuthProvider:V.V,OAuthProvider:V.X,SAMLAuthProvider:V.Y,PhoneAuthProvider:H,PhoneMultiFactorGenerator:V.m,RecaptchaVerifier:De,TwitterAuthProvider:V.Z,Auth:qn,AuthCredential:V.J,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Z.registerVersion("@firebase/auth-compat","0.4.2")}(F.Z)},8179:(Bt,Fe,R)=>{R.d(Fe,{EK:()=>d.EK});var d=R(2810)},5861:(Bt,Fe,R)=>{function d(V,ce,ae,we,Ce,te,Pe){try{var re=V[te](Pe),ue=re.value}catch(me){return void ae(me)}re.done?ce(ue):Promise.resolve(ue).then(we,Ce)}function F(V){return function(){var ce=this,ae=arguments;return new Promise(function(we,Ce){var te=V.apply(ce,ae);function Pe(ue){d(te,we,Ce,Pe,re,"next",ue)}function re(ue){d(te,we,Ce,Pe,re,"throw",ue)}Pe(void 0)})}}R.d(Fe,{Z:()=>F})},7582:(Bt,Fe,R)=>{function ce($e,je){var Je={};for(var Ge in $e)Object.prototype.hasOwnProperty.call($e,Ge)&&je.indexOf(Ge)<0&&(Je[Ge]=$e[Ge]);if(null!=$e&&"function"==typeof Object.getOwnPropertySymbols){var Xe=0;for(Ge=Object.getOwnPropertySymbols($e);Xe<Ge.length;Xe++)je.indexOf(Ge[Xe])<0&&Object.prototype.propertyIsEnumerable.call($e,Ge[Xe])&&(Je[Ge[Xe]]=$e[Ge[Xe]])}return Je}function me($e,je,Je,Ge){return new(Je||(Je=Promise))(function(yt,bt){function At(nn){try{Pt(Ge.next(nn))}catch(ln){bt(ln)}}function zt(nn){try{Pt(Ge.throw(nn))}catch(ln){bt(ln)}}function Pt(nn){nn.done?yt(nn.value):function Xe(yt){return yt instanceof Je?yt:new Je(function(bt){bt(yt)})}(nn.value).then(At,zt)}Pt((Ge=Ge.apply($e,je||[])).next())})}function ge($e){return this instanceof ge?(this.v=$e,this):new ge($e)}function st($e,je,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,Ge=Je.apply($e,je||[]),yt=[];return Xe={},bt("next"),bt("throw"),bt("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe;function bt(mn){Ge[mn]&&(Xe[mn]=function(Rn){return new Promise(function(lr,qt){yt.push([mn,Rn,lr,qt])>1||At(mn,Rn)})})}function At(mn,Rn){try{!function zt(mn){mn.value instanceof ge?Promise.resolve(mn.value.v).then(Pt,nn):ln(yt[0][2],mn)}(Ge[mn](Rn))}catch(lr){ln(yt[0][3],lr)}}function Pt(mn){At("next",mn)}function nn(mn){At("throw",mn)}function ln(mn,Rn){mn(Rn),yt.shift(),yt.length&&At(yt[0][0],yt[0][1])}}function Et($e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,je=$e[Symbol.asyncIterator];return je?je.call($e):($e=function wt($e){var je="function"==typeof Symbol&&Symbol.iterator,Je=je&&$e[je],Ge=0;if(Je)return Je.call($e);if($e&&"number"==typeof $e.length)return{next:function(){return $e&&Ge>=$e.length&&($e=void 0),{value:$e&&$e[Ge++],done:!$e}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}($e),Je={},Ge("next"),Ge("throw"),Ge("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function Ge(yt){Je[yt]=$e[yt]&&function(bt){return new Promise(function(At,zt){!function Xe(yt,bt,At,zt){Promise.resolve(zt).then(function(Pt){yt({value:Pt,done:At})},bt)}(At,zt,(bt=$e[yt](bt)).done,bt.value)})}}}R.d(Fe,{FC:()=>st,KL:()=>Et,_T:()=>ce,mG:()=>me,qq:()=>ge})}},Bt=>{Bt(Bt.s=5877)}]);