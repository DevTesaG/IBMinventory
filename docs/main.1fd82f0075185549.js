"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[179],{6217:(Nt,ke,R)=>{R.d(ke,{nm:()=>ss});var p=R(4976);R(4650),R(259);var fe=R(5861),et=R(6881),Xe=R(4859),mt=R(2090),ot=R(1877);const Te=new Map,St={activated:!1,tokenObservers:[]},Yt={initialized:!1,enabled:!1};function It(Ae){return Te.get(Ae)||Object.assign({},St)}function Rt(){return Yt}class ct{constructor(Ie,Ue,lt,xt,In){if(this.operation=Ie,this.retryPolicy=Ue,this.getWaitDuration=lt,this.lowerBound=xt,this.upperBound=In,this.pending=null,this.nextErrorWaitInterval=xt,xt>In)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var Ue=this;return(0,fe.Z)(function*(){Ue.stop();try{Ue.pending=new mt.BH,yield function yt(Ae){return new Promise(Ie=>{setTimeout(Ie,Ae)})}(Ue.getNextRun(Ie)),Ue.pending.resolve(),yield Ue.pending.promise,Ue.pending=new mt.BH,yield Ue.operation(),Ue.pending.resolve(),yield Ue.pending.promise,Ue.process(!0).catch(()=>{})}catch(lt){Ue.retryPolicy(lt)?Ue.process(!1).catch(()=>{}):Ue.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ue=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ue}}}const $t=new mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qt(Ae){if(!It(Ae).activated)throw $t.create("use-before-activation",{appName:Ae.name})}function Nn(Ae,Ie){return ir.apply(this,arguments)}function ir(){return(ir=(0,fe.Z)(function*({url:Ae,body:Ie},Ue){const lt={"Content-Type":"application/json"},xt=Ue.getImmediate({optional:!0});if(xt){const pi=yield xt.getHeartbeatsHeader();pi&&(lt["X-Firebase-Client"]=pi)}const In={method:"POST",body:JSON.stringify(Ie),headers:lt};let Xn,Zn;try{Xn=yield fetch(Ae,In)}catch(pi){throw $t.create("fetch-network-error",{originalErrorMessage:pi?.message})}if(200!==Xn.status)throw $t.create("fetch-status-error",{httpStatus:Xn.status});try{Zn=yield Xn.json()}catch(pi){throw $t.create("fetch-parse-error",{originalErrorMessage:pi?.message})}const Rn=Zn.ttl.match(/^([\d.]+)(s)$/);if(!Rn||!Rn[2]||isNaN(Number(Rn[1])))throw $t.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Zn.ttl}`});const ei=1e3*Number(Rn[1]),ci=Date.now();return{token:Zn.token,expireTimeMillis:ci+ei,issuedAtTimeMillis:ci}})).apply(this,arguments)}function Mn(Ae,Ie){const{projectId:Ue,appId:lt,apiKey:xt}=Ae.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ue}/apps/${lt}:exchangeDebugToken?key=${xt}`,body:{debug_token:Ie}}}const Pr="firebase-app-check-store";let Tn=null;function Fn(){return Tn||(Tn=new Promise((Ae,Ie)=>{try{const Ue=indexedDB.open("firebase-app-check-database",1);Ue.onsuccess=lt=>{Ae(lt.target.result)},Ue.onerror=lt=>{var xt;Ie($t.create("storage-open",{originalErrorMessage:null===(xt=lt.target.error)||void 0===xt?void 0:xt.message}))},Ue.onupgradeneeded=lt=>{0===lt.oldVersion&&lt.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(Ue){Ie($t.create("storage-open",{originalErrorMessage:Ue?.message}))}}),Tn)}function wn(){return(wn=(0,fe.Z)(function*(Ae,Ie){const lt=(yield Fn()).transaction(Pr,"readwrite"),In=lt.objectStore(Pr).put({compositeKey:Ae,value:Ie});return new Promise((Xn,Zn)=>{In.onsuccess=Rn=>{Xn()},lt.onerror=Rn=>{var ei;Zn($t.create("storage-set",{originalErrorMessage:null===(ei=Rn.target.error)||void 0===ei?void 0:ei.message}))}})})).apply(this,arguments)}const gr=new ot.Yd("@firebase/app-check");function nn(Ae,Ie){return(0,mt.hl)()?function zr(Ae,Ie){return function Pn(Ae,Ie){return wn.apply(this,arguments)}(function xn(Ae){return`${Ae.options.appId}-${Ae.name}`}(Ae),Ie)}(Ae,Ie).catch(Ue=>{gr.warn(`Failed to write token to IndexedDB. Error: ${Ue}`)}):Promise.resolve()}function vr(){return Rt().enabled}function Ft(){return mn.apply(this,arguments)}function mn(){return(mn=(0,fe.Z)(function*(){const Ae=Rt();if(Ae.enabled&&Ae.token)return Ae.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ne={error:"UNKNOWN_ERROR"};function vt(Ae){return mt.US.encodeString(JSON.stringify(Ae),!1)}function me(Ae){return H.apply(this,arguments)}function H(){return(H=(0,fe.Z)(function*(Ae,Ie=!1){const Ue=Ae.app;qt(Ue);const lt=It(Ue);let In,xt=lt.token;if(xt&&!G(xt)&&(lt.token=void 0,xt=void 0),!xt){const Rn=yield lt.cachedTokenPromise;Rn&&(G(Rn)?xt=Rn:yield nn(Ue,void 0))}if(!Ie&&xt&&G(xt))return{token:xt.token};let Zn,Xn=!1;if(vr()){lt.exchangeTokenPromise||(lt.exchangeTokenPromise=Nn(Mn(Ue,yield Ft()),Ae.heartbeatServiceProvider).finally(()=>{lt.exchangeTokenPromise=void 0}),Xn=!0);const Rn=yield lt.exchangeTokenPromise;return yield nn(Ue,Rn),lt.token=Rn,{token:Rn.token}}try{lt.exchangeTokenPromise||(lt.exchangeTokenPromise=lt.provider.getToken().finally(()=>{lt.exchangeTokenPromise=void 0}),Xn=!0),xt=yield It(Ue).exchangeTokenPromise}catch(Rn){"appCheck/throttled"===Rn.code?gr.warn(Rn.message):gr.error(Rn),In=Rn}return xt?In?Zn=G(xt)?{token:xt.token,internalError:In}:De(In):(Zn={token:xt.token},lt.token=xt,yield nn(Ue,xt)):Zn=De(In),Xn&&K(Ue,Zn),Zn})).apply(this,arguments)}function Fe(){return(Fe=(0,fe.Z)(function*(Ae){const Ie=Ae.app;qt(Ie);const{provider:Ue}=It(Ie);if(vr()){const lt=yield Ft(),{token:xt}=yield Nn(Mn(Ie,lt),Ae.heartbeatServiceProvider);return{token:xt}}{const{token:lt}=yield Ue.getToken();return{token:lt}}})).apply(this,arguments)}function ae(Ae,Ie){const Ue=It(Ae),lt=Ue.tokenObservers.filter(xt=>xt.next!==Ie);0===lt.length&&Ue.tokenRefresher&&Ue.tokenRefresher.isRunning()&&Ue.tokenRefresher.stop(),Ue.tokenObservers=lt}function ce(Ae){const{app:Ie}=Ae,Ue=It(Ie);let lt=Ue.tokenRefresher;lt||(lt=function Y(Ae){const{app:Ie}=Ae;return new ct((0,fe.Z)(function*(){let lt;if(lt=It(Ie).token?yield me(Ae,!0):yield me(Ae),lt.error)throw lt.error;if(lt.internalError)throw lt.internalError}),()=>!0,()=>{const Ue=It(Ie);if(Ue.token){let lt=Ue.token.issuedAtTimeMillis+.5*(Ue.token.expireTimeMillis-Ue.token.issuedAtTimeMillis)+3e5;return lt=Math.min(lt,Ue.token.expireTimeMillis-3e5),Math.max(0,lt-Date.now())}return 0},3e4,96e4)}(Ae),Ue.tokenRefresher=lt),!lt.isRunning()&&Ue.isTokenAutoRefreshEnabled&&lt.start()}function K(Ae,Ie){const Ue=It(Ae).tokenObservers;for(const lt of Ue)try{"EXTERNAL"===lt.type&&null!=Ie.error?lt.error(Ie.error):lt.next(Ie)}catch{}}function G(Ae){return Ae.expireTimeMillis-Date.now()>0}function De(Ae){return{token:vt(Ne),error:Ae}}class st{constructor(Ie,Ue){this.app=Ie,this.heartbeatServiceProvider=Ue}_delete(){const{tokenObservers:Ie}=It(this.app);for(const Ue of Ie)ae(this.app,Ue.next);return Promise.resolve()}}const Ki="app-check-internal";!function Kr(){(0,et._registerComponent)(new Xe.wA("app-check",Ae=>function Ot(Ae,Ie){return new st(Ae,Ie)}(Ae.getProvider("app").getImmediate(),Ae.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ae,Ie,Ue)=>{Ae.getProvider(Ki).initialize()})),(0,et._registerComponent)(new Xe.wA(Ki,Ae=>function Jt(Ae){return{getToken:Ie=>me(Ae,Ie),getLimitedUseToken:()=>function ne(Ae){return Fe.apply(this,arguments)}(Ae),addTokenListener:Ie=>function it(Ae,Ie,Ue,lt){const{app:xt}=Ae,In=It(xt);if(In.tokenObservers=[...In.tokenObservers,{next:Ue,error:lt,type:Ie}],In.token&&G(In.token)){const Zn=In.token;Promise.resolve().then(()=>{Ue({token:Zn.token}),ce(Ae)}).catch(()=>{})}In.cachedTokenPromise.then(()=>ce(Ae))}(Ae,"INTERNAL",Ie),removeTokenListener:Ie=>ae(Ae.app,Ie)}}(Ae.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,et.registerVersion)("@firebase/app-check","0.8.0")}();class ss{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Nt,ke,R)=>{R.d(ke,{zQ:()=>ar,rT:()=>Yt,f7:()=>Gt,L6:()=>Te,_Q:()=>St,lh:()=>It,Qv:()=>ot,nw:()=>Rt});var p=R(4650),F=R(7579),B=R(9646),le=R(9751),he=R(8996),Ee=R(6451),we=R(5363),te=R(3900),Se=R(4004),X=R(6063);class ie extends F.x{constructor(ze=1/0,Be=1/0,qe=X.l){super(),this._bufferSize=ze,this._windowTime=Be,this._timestampProvider=qe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Be===1/0,this._bufferSize=Math.max(1,ze),this._windowTime=Math.max(1,Be)}next(ze){const{isStopped:Be,_buffer:qe,_infiniteTimeWindow:ct,_timestampProvider:yt,_windowTime:ht}=this;Be||(qe.push(ze),!ct&&qe.push(yt.now()+ht)),this._trimBuffer(),super.next(ze)}_subscribe(ze){this._throwIfClosed(),this._trimBuffer();const Be=this._innerSubscribe(ze),{_infiniteTimeWindow:qe,_buffer:ct}=this,yt=ct.slice();for(let ht=0;ht<yt.length&&!ze.closed;ht+=qe?1:2)ze.next(yt[ht]);return this._checkFinalizedStatuses(ze),Be}_trimBuffer(){const{_bufferSize:ze,_timestampProvider:Be,_buffer:qe,_infiniteTimeWindow:ct}=this,yt=(ct?1:2)*ze;if(ze<1/0&&yt<qe.length&&qe.splice(0,qe.length-yt),!ct){const ht=Be.now();let $t=0;for(let Mt=1;Mt<qe.length&&qe[Mt]<=ht;Mt+=2)$t=Mt;$t&&qe.splice(0,$t+1)}}}var ve=R(3099);function ut(Le,ze,Be){let qe,ct=!1;return Le&&"object"==typeof Le?({bufferSize:qe=1/0,windowTime:ze=1/0,refCount:ct=!1,scheduler:Be}=Le):qe=Le??1/0,(0,ve.B)({connector:()=>new ie(qe,ze,Be),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ct})}var Ze=R(590),Ye=R(576);function Tt(Le,ze){return(0,Ye.m)(ze)?(0,te.w)(()=>Le,ze):(0,te.w)(()=>Le)}var Ke=R(9468),Oe=R(9300),bt=R(4976),ft=R(2011),fe=R(6895),et=R(6217);R(9260);const ot=new p.OlP("angularfire2.auth.use-emulator"),Te=new p.OlP("angularfire2.auth.settings"),St=new p.OlP("angularfire2.auth.tenant-id"),Yt=new p.OlP("angularfire2.auth.langugage-code"),It=new p.OlP("angularfire2.auth.use-device-language"),Gt=new p.OlP("angularfire.auth.persistence"),Rt=(Le,ze,Be,qe,ct,yt,ht,$t)=>(0,ft.cc)(`${Le.name}.auth`,"AngularFireAuth",Le.name,()=>{const Mt=ze.runOutsideAngular(()=>Le.auth());if(Be&&Mt.useEmulator(...Be),qe&&(Mt.tenantId=qe),Mt.languageCode=ct,yt&&Mt.useDeviceLanguage(),ht)for(const[qt,tn]of Object.entries(ht))Mt.settings[qt]=tn;return $t&&Mt.setPersistence($t),Mt},[Be,qe,ct,yt,ht,$t]);let ar=(()=>{class Le{constructor(Be,qe,ct,yt,ht,$t,Mt,qt,tn,hn,Nn,ir){const Wt=new F.x,cn=(0,B.of)(void 0).pipe((0,we.Q)(ht.outsideAngular),(0,te.w)(()=>yt.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,9568)))),(0,Se.U)(()=>(0,ft.on)(Be,yt,qe)),(0,Se.U)(Mn=>Rt(Mn,yt,$t,qt,tn,hn,Mt,Nn)),ut({bufferSize:1,refCount:!1}));if((0,fe.PM)(ct))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,B.of)(null);else{cn.pipe((0,Ze.P)()).subscribe();const Wn=cn.pipe((0,te.w)(Ct=>Ct.getRedirectResult().then(Tn=>Tn,()=>null)),bt.iC,ut({bufferSize:1,refCount:!1})),Mr=cn.pipe((0,te.w)(Ct=>new le.y(Tn=>({unsubscribe:yt.runOutsideAngular(()=>Ct.onAuthStateChanged(Fn=>Tn.next(Fn),Fn=>Tn.error(Fn),()=>Tn.complete()))})))),Pr=cn.pipe((0,te.w)(Ct=>new le.y(Tn=>({unsubscribe:yt.runOutsideAngular(()=>Ct.onIdTokenChanged(Fn=>Tn.next(Fn),Fn=>Tn.error(Fn),()=>Tn.complete()))}))));this.authState=Wn.pipe(Tt(Mr),(0,Ke.R)(ht.outsideAngular),(0,we.Q)(ht.insideAngular)),this.user=Wn.pipe(Tt(Pr),(0,Ke.R)(ht.outsideAngular),(0,we.Q)(ht.insideAngular)),this.idToken=this.user.pipe((0,te.w)(Ct=>Ct?(0,he.D)(Ct.getIdToken()):(0,B.of)(null))),this.idTokenResult=this.user.pipe((0,te.w)(Ct=>Ct?(0,he.D)(Ct.getIdTokenResult()):(0,B.of)(null))),this.credential=(0,Ee.T)(Wn,Wt,this.authState.pipe((0,Oe.h)(Ct=>!Ct))).pipe((0,Se.U)(Ct=>Ct?.user?Ct:null),(0,Ke.R)(ht.outsideAngular),(0,we.Q)(ht.insideAngular))}return(0,ft.pX)(this,cn,yt,{spy:{apply:(Mn,Wn,Mr)=>{(Mn.startsWith("signIn")||Mn.startsWith("createUser"))&&Mr.then(Pr=>Wt.next(Pr))}}})}}return Le.\u0275fac=function(Be){return new(Be||Le)(p.LFG(ft.Dh),p.LFG(ft.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(bt.HU),p.LFG(ot,8),p.LFG(Te,8),p.LFG(St,8),p.LFG(Yt,8),p.LFG(It,8),p.LFG(Gt,8),p.LFG(et.nm,8))},Le.\u0275prov=p.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"any"}),Le})()},33:(Nt,ke,R)=>{R.d(ke,{ST:()=>Ne,yb:()=>vt});var p=R(4650),F=R(4986),B=R(9751),le=R(8996),he=R(9646),Ee=R(4976),we=R(8675),te=R(4482),Se=R(5403);function X(){return(0,te.e)((me,H)=>{let ne,Fe=!1;me.subscribe((0,Se.x)(H,it=>{const ae=ne;ne=it,Fe&&H.next([ae,it]),Fe=!0}))})}var ie=R(4004),ve=R(5026),ut=R(4671);function Ye(me,H){return me===H}var Tt=R(9300),Ke=R(2011),Oe=R(6895),ft=(R(9568),R(3942)),fe=R(2810),et=R(2090),Xe=R(4859);function Te(me,H){if(void 0===H)return{merge:!1};if(void 0!==H.mergeFields&&void 0!==H.merge)throw new fe.WA("invalid-argument",`Invalid options passed to function ${me}(): You cannot specify both "merge" and "mergeFields".`);return H}function St(){if(typeof Uint8Array>"u")throw new fe.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Yt(){if(!(0,fe.Me)())throw new fe.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class It{constructor(H){this._delegate=H}static fromBase64String(H){return Yt(),new It(fe.Jj.fromBase64String(H))}static fromUint8Array(H){return St(),new It(fe.Jj.fromUint8Array(H))}toBase64(){return Yt(),this._delegate.toBase64()}toUint8Array(){return St(),this._delegate.toUint8Array()}isEqual(H){return this._delegate.isEqual(H._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Gt(me){return function Rt(me,H){if("object"!=typeof me||null===me)return!1;const ne=me;for(const Fe of H)if(Fe in ne&&"function"==typeof ne[Fe])return!0;return!1}(me,["next","error","complete"])}class ar{enableIndexedDbPersistence(H,ne){return(0,fe.ST)(H._delegate,{forceOwnership:ne})}enableMultiTabIndexedDbPersistence(H){return(0,fe.fH)(H._delegate)}clearIndexedDbPersistence(H){return(0,fe.Fc)(H._delegate)}}class Ve{constructor(H,ne,Fe){this._delegate=ne,this._persistenceProvider=Fe,this.INTERNAL={delete:()=>this.terminate()},H instanceof fe.l7||(this._appCompat=H)}get _databaseId(){return this._delegate._databaseId}settings(H){const ne=this._delegate._getSettings();!H.merge&&ne.host!==H.host&&(0,fe.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),H.merge&&delete(H=Object.assign(Object.assign({},ne),H)).merge,this._delegate._setSettings(H)}useEmulator(H,ne,Fe={}){(0,fe.at)(this._delegate,H,ne,Fe)}enableNetwork(){return(0,fe.Ix)(this._delegate)}disableNetwork(){return(0,fe.TF)(this._delegate)}enablePersistence(H){let ne=!1,Fe=!1;return H&&(ne=!!H.synchronizeTabs,Fe=!!H.experimentalForceOwningTab,(0,fe.Wi)("synchronizeTabs",ne,"experimentalForceOwningTab",Fe)),ne?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Fe)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,fe.Mx)(this._delegate)}onSnapshotsInSync(H){return(0,fe.sc)(this._delegate,H)}get app(){if(!this._appCompat)throw new fe.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(H){try{return new Wt(this,(0,fe.hJ)(this._delegate,H))}catch(ne){throw ht(ne,"collection()","Firestore.collection()")}}doc(H){try{return new yt(this,(0,fe.JU)(this._delegate,H))}catch(ne){throw ht(ne,"doc()","Firestore.doc()")}}collectionGroup(H){try{return new hn(this,(0,fe.B$)(this._delegate,H))}catch(ne){throw ht(ne,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(H){return(0,fe.i3)(this._delegate,ne=>H(new Be(this,ne)))}batch(){return(0,fe.qY)(this._delegate),new qe(new fe.PU(this._delegate,H=>(0,fe.GL)(this._delegate,H)))}loadBundle(H){return(0,fe.Pb)(this._delegate,H)}namedQuery(H){return(0,fe.L$)(this._delegate,H).then(ne=>ne?new hn(this,ne):null)}}class Le extends fe.u7{constructor(H){super(),this.firestore=H}convertBytes(H){return new It(new fe.Jj(H))}convertReference(H){const ne=this.convertDocumentKey(H,this.firestore._databaseId);return yt.forKey(ne,this.firestore,null)}}class Be{constructor(H,ne){this._firestore=H,this._delegate=ne,this._userDataWriter=new Le(H)}get(H){const ne=cn(H);return this._delegate.get(ne).then(Fe=>new qt(this._firestore,new fe.xU(this._firestore._delegate,this._userDataWriter,Fe._key,Fe._document,Fe.metadata,ne.converter)))}set(H,ne,Fe){const it=cn(H);return Fe?(Te("Transaction.set",Fe),this._delegate.set(it,ne,Fe)):this._delegate.set(it,ne),this}update(H,ne,Fe,...it){const ae=cn(H);return 2===arguments.length?this._delegate.update(ae,ne):this._delegate.update(ae,ne,Fe,...it),this}delete(H){const ne=cn(H);return this._delegate.delete(ne),this}}class qe{constructor(H){this._delegate=H}set(H,ne,Fe){const it=cn(H);return Fe?(Te("WriteBatch.set",Fe),this._delegate.set(it,ne,Fe)):this._delegate.set(it,ne),this}update(H,ne,Fe,...it){const ae=cn(H);return 2===arguments.length?this._delegate.update(ae,ne):this._delegate.update(ae,ne,Fe,...it),this}delete(H){const ne=cn(H);return this._delegate.delete(ne),this}commit(){return this._delegate.commit()}}class ct{constructor(H,ne,Fe){this._firestore=H,this._userDataWriter=ne,this._delegate=Fe}fromFirestore(H,ne){const Fe=new fe.$q(this._firestore._delegate,this._userDataWriter,H._key,H._document,H.metadata,null);return this._delegate.fromFirestore(new tn(this._firestore,Fe),ne??{})}toFirestore(H,ne){return ne?this._delegate.toFirestore(H,ne):this._delegate.toFirestore(H)}static getInstance(H,ne){const Fe=ct.INSTANCES;let it=Fe.get(H);it||(it=new WeakMap,Fe.set(H,it));let ae=it.get(ne);return ae||(ae=new ct(H,new Le(H),ne),it.set(ne,ae)),ae}}ct.INSTANCES=new WeakMap;class yt{constructor(H,ne){this.firestore=H,this._delegate=ne,this._userDataWriter=new Le(H)}static forPath(H,ne,Fe){if(H.length%2!=0)throw new fe.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${H.canonicalString()} has ${H.length}`);return new yt(ne,new fe.my(ne._delegate,Fe,new fe.Ky(H)))}static forKey(H,ne,Fe){return new yt(ne,new fe.my(ne._delegate,Fe,H))}get id(){return this._delegate.id}get parent(){return new Wt(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(H){try{return new Wt(this.firestore,(0,fe.hJ)(this._delegate,H))}catch(ne){throw ht(ne,"collection()","DocumentReference.collection()")}}isEqual(H){return(H=(0,et.m9)(H))instanceof fe.my&&(0,fe.Eo)(this._delegate,H)}set(H,ne){ne=Te("DocumentReference.set",ne);try{return ne?(0,fe.pl)(this._delegate,H,ne):(0,fe.pl)(this._delegate,H)}catch(Fe){throw ht(Fe,"setDoc()","DocumentReference.set()")}}update(H,ne,...Fe){try{return 1===arguments.length?(0,fe.r7)(this._delegate,H):(0,fe.r7)(this._delegate,H,ne,...Fe)}catch(it){throw ht(it,"updateDoc()","DocumentReference.update()")}}delete(){return(0,fe.oe)(this._delegate)}onSnapshot(...H){const ne=$t(H),Fe=Mt(H,it=>new qt(this.firestore,new fe.xU(this.firestore._delegate,this._userDataWriter,it._key,it._document,it.metadata,this._delegate.converter)));return(0,fe.cf)(this._delegate,ne,Fe)}get(H){let ne;return ne="cache"===H?.source?(0,fe.kl)(this._delegate):"server"===H?.source?(0,fe.Xk)(this._delegate):(0,fe.QT)(this._delegate),ne.then(Fe=>new qt(this.firestore,new fe.xU(this.firestore._delegate,this._userDataWriter,Fe._key,Fe._document,Fe.metadata,this._delegate.converter)))}withConverter(H){return new yt(this.firestore,this._delegate.withConverter(H?ct.getInstance(this.firestore,H):null))}}function ht(me,H,ne){return me.message=me.message.replace(H,ne),me}function $t(me){for(const H of me)if("object"==typeof H&&!Gt(H))return H;return{}}function Mt(me,H){var ne,Fe;let it;return it=Gt(me[0])?me[0]:Gt(me[1])?me[1]:"function"==typeof me[0]?{next:me[0],error:me[1],complete:me[2]}:{next:me[1],error:me[2],complete:me[3]},{next:ae=>{it.next&&it.next(H(ae))},error:null===(ne=it.error)||void 0===ne?void 0:ne.bind(it),complete:null===(Fe=it.complete)||void 0===Fe?void 0:Fe.bind(it)}}class qt{constructor(H,ne){this._firestore=H,this._delegate=ne}get ref(){return new yt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(H){return this._delegate.data(H)}get(H,ne){return this._delegate.get(H,ne)}isEqual(H){return(0,fe.qK)(this._delegate,H._delegate)}}class tn extends qt{data(H){const ne=this._delegate.data(H);return(0,fe.K9)(void 0!==ne,"Document in a QueryDocumentSnapshot should exist"),ne}}class hn{constructor(H,ne){this.firestore=H,this._delegate=ne,this._userDataWriter=new Le(H)}where(H,ne,Fe){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.ar)(H,ne,Fe)))}catch(it){throw ht(it,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(H,ne){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.Xo)(H,ne)))}catch(Fe){throw ht(Fe,/(orderBy|where)\(\)/,"Query.$1()")}}limit(H){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.b9)(H)))}catch(ne){throw ht(ne,"limit()","Query.limit()")}}limitToLast(H){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.vh)(H)))}catch(ne){throw ht(ne,"limitToLast()","Query.limitToLast()")}}startAt(...H){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.e0)(...H)))}catch(ne){throw ht(ne,"startAt()","Query.startAt()")}}startAfter(...H){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.TQ)(...H)))}catch(ne){throw ht(ne,"startAfter()","Query.startAfter()")}}endBefore(...H){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.Lx)(...H)))}catch(ne){throw ht(ne,"endBefore()","Query.endBefore()")}}endAt(...H){try{return new hn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.Wu)(...H)))}catch(ne){throw ht(ne,"endAt()","Query.endAt()")}}isEqual(H){return(0,fe.iE)(this._delegate,H._delegate)}get(H){let ne;return ne="cache"===H?.source?(0,fe.UQ)(this._delegate):"server"===H?.source?(0,fe.zN)(this._delegate):(0,fe.PL)(this._delegate),ne.then(Fe=>new ir(this.firestore,new fe.W(this.firestore._delegate,this._userDataWriter,this._delegate,Fe._snapshot)))}onSnapshot(...H){const ne=$t(H),Fe=Mt(H,it=>new ir(this.firestore,new fe.W(this.firestore._delegate,this._userDataWriter,this._delegate,it._snapshot)));return(0,fe.cf)(this._delegate,ne,Fe)}withConverter(H){return new hn(this.firestore,this._delegate.withConverter(H?ct.getInstance(this.firestore,H):null))}}class Nn{constructor(H,ne){this._firestore=H,this._delegate=ne}get type(){return this._delegate.type}get doc(){return new tn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ir{constructor(H,ne){this._firestore=H,this._delegate=ne}get query(){return new hn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(H=>new tn(this._firestore,H))}docChanges(H){return this._delegate.docChanges(H).map(ne=>new Nn(this._firestore,ne))}forEach(H,ne){this._delegate.forEach(Fe=>{H.call(ne,new tn(this._firestore,Fe))})}isEqual(H){return(0,fe.qK)(this._delegate,H._delegate)}}class Wt extends hn{constructor(H,ne){super(H,ne),this.firestore=H,this._delegate=ne}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const H=this._delegate.parent;return H?new yt(this.firestore,H):null}doc(H){try{return new yt(this.firestore,void 0===H?(0,fe.JU)(this._delegate):(0,fe.JU)(this._delegate,H))}catch(ne){throw ht(ne,"doc()","CollectionReference.doc()")}}add(H){return(0,fe.ET)(this._delegate,H).then(ne=>new yt(this.firestore,ne))}isEqual(H){return(0,fe.Eo)(this._delegate,H._delegate)}withConverter(H){return new Wt(this.firestore,this._delegate.withConverter(H?ct.getInstance(this.firestore,H):null))}}function cn(me){return(0,fe.Cf)(me,fe.my)}class Mn{constructor(...H){this._delegate=new fe.Lz(...H)}static documentId(){return new Mn(fe.Xb.keyField().canonicalString())}isEqual(H){return(H=(0,et.m9)(H))instanceof fe.Lz&&this._delegate._internalPath.isEqual(H._internalPath)}}class Wn{constructor(H){this._delegate=H}static serverTimestamp(){const H=(0,fe.Bt)();return H._methodName="FieldValue.serverTimestamp",new Wn(H)}static delete(){const H=(0,fe.AK)();return H._methodName="FieldValue.delete",new Wn(H)}static arrayUnion(...H){const ne=(0,fe.vr)(...H);return ne._methodName="FieldValue.arrayUnion",new Wn(ne)}static arrayRemove(...H){const ne=(0,fe.Ab)(...H);return ne._methodName="FieldValue.arrayRemove",new Wn(ne)}static increment(H){const ne=(0,fe.nP)(H);return ne._methodName="FieldValue.increment",new Wn(ne)}isEqual(H){return this._delegate.isEqual(H._delegate)}}const Mr={Firestore:Ve,GeoPoint:fe.F8,Timestamp:fe.EK,Blob:It,Transaction:Be,WriteBatch:qe,DocumentReference:yt,DocumentSnapshot:qt,Query:hn,QueryDocumentSnapshot:tn,QuerySnapshot:ir,CollectionReference:Wt,FieldPath:Mn,FieldValue:Wn,setLogLevel:function ze(me){(0,fe.Ub)(me)},CACHE_SIZE_UNLIMITED:fe.IX};!function Ct(me){(function Pr(me,H){me.INTERNAL.registerComponent(new Xe.wA("firestore-compat",ne=>{const Fe=ne.getProvider("app-compat").getImmediate(),it=ne.getProvider("firestore").getImmediate();return H(Fe,it)},"PUBLIC").setServiceProps(Object.assign({},Mr)))})(me,(H,ne)=>new Ve(H,ne,new ar)),me.registerVersion("@firebase/firestore-compat","0.3.12")}(ft.Z);var Tn=R(1205),Fn=R(6217),sr=R(9260);function Ln(me,H){return function zr(me,H=F.z){return new B.y(ne=>{let Fe;return null!=H?H.schedule(()=>{Fe=me.onSnapshot({includeMetadataChanges:!0},ne)}):Fe=me.onSnapshot({includeMetadataChanges:!0},ne),()=>{Fe?.()}})}(me,H)}function Pn(me,H){return Ln(me,H).pipe((0,ie.U)(ne=>({payload:ne,type:"query"})))}function wn(me,H){return Pn(me,H).pipe((0,we.O)(void 0),X(),(0,ie.U)(([ne,Fe])=>{const it=Fe.payload.docChanges(),ae=it.map(ce=>({type:ce.type,payload:ce}));return ne&&JSON.stringify(ne.payload.metadata)!==JSON.stringify(Fe.payload.metadata)&&Fe.payload.docs.forEach((ce,Y)=>{const K=it.find(De=>De.doc.ref.isEqual(ce.ref)),G=ne?.payload.docs.find(De=>De.ref.isEqual(ce.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(ce.metadata)||!K&&G&&JSON.stringify(G.metadata)===JSON.stringify(ce.metadata)||ae.push({type:"modified",payload:{oldIndex:Y,newIndex:Y,type:"modified",doc:ce}})}),ae}))}function zt(me,H,ne){return wn(me,ne).pipe((0,ve.R)((Fe,it)=>function on(me,H,ne){return H.forEach(Fe=>{ne.indexOf(Fe.type)>-1&&(me=function gr(me,H){switch(H.type){case"added":if(!me[H.newIndex]||!me[H.newIndex].doc.ref.isEqual(H.doc.ref))return xn(me,H.newIndex,0,H);break;case"modified":if(null==me[H.oldIndex]||me[H.oldIndex].doc.ref.isEqual(H.doc.ref)){if(H.oldIndex!==H.newIndex){const ne=me.slice();return ne.splice(H.oldIndex,1),ne.splice(H.newIndex,0,H),ne}return xn(me,H.newIndex,1,H)}break;case"removed":if(me[H.oldIndex]&&me[H.oldIndex].doc.ref.isEqual(H.doc.ref))return xn(me,H.oldIndex,1)}return me}(me,Fe))}),me}(Fe,it.map(ae=>ae.payload),H),[]),function Ze(me,H=ut.y){return me=me??Ye,(0,te.e)((ne,Fe)=>{let it,ae=!0;ne.subscribe((0,Se.x)(Fe,ce=>{const Y=H(ce);(ae||!me(it,Y))&&(ae=!1,it=Y,Fe.next(ce))}))})}(),(0,ie.U)(Fe=>Fe.map(it=>({type:it.type,payload:it}))))}function xn(me,H,ne,...Fe){const it=me.slice();return it.splice(H,ne,...Fe),it}function Jn(me){return(!me||0===me.length)&&(me=["added","removed","modified"]),me}class ur{constructor(H,ne,Fe){this.ref=H,this.query=ne,this.afs=Fe}stateChanges(H){let ne=wn(this.query,this.afs.schedulers.outsideAngular);return H&&H.length>0&&(ne=ne.pipe((0,ie.U)(Fe=>Fe.filter(it=>H.indexOf(it.type)>-1)))),ne.pipe((0,we.O)(void 0),X(),(0,Tt.h)(([Fe,it])=>it.length>0||!Fe),(0,ie.U)(([Fe,it])=>it),Ee.iC)}auditTrail(H){return this.stateChanges(H).pipe((0,ve.R)((ne,Fe)=>[...ne,...Fe],[]))}snapshotChanges(H){const ne=Jn(H);return zt(this.query,ne,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(H={}){return Pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(ne=>ne.payload.docs.map(Fe=>H.idField?Object.assign(Object.assign({},Fe.data()),{[H.idField]:Fe.id}):Fe.data())),Ee.iC)}get(H){return(0,le.D)(this.query.get(H)).pipe(Ee.iC)}add(H){return this.ref.add(H)}doc(H){return new nn(this.ref.doc(H),this.afs)}}class nn{constructor(H,ne){this.ref=H,this.afs=ne}set(H,ne){return this.ref.set(H,ne)}update(H){return this.ref.update(H)}delete(){return this.ref.delete()}collection(H,ne){const Fe=this.ref.collection(H),{ref:it,query:ae}=yn(Fe,ne);return new ur(it,ae,this.afs)}snapshotChanges(){return function Hn(me,H){return Ln(me,H).pipe((0,we.O)(void 0),X(),(0,ie.U)(([ne,Fe])=>Fe.exists?ne?.exists?{payload:Fe,type:"modified"}:{payload:Fe,type:"added"}:{payload:Fe,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(H={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:ne})=>H.idField?Object.assign(Object.assign({},ne.data()),{[H.idField]:ne.id}):ne.data()))}get(H){return(0,le.D)(this.ref.get(H)).pipe(Ee.iC)}}class or{constructor(H,ne){this.query=H,this.afs=ne}stateChanges(H){return H&&0!==H.length?wn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(ne=>ne.filter(Fe=>H.indexOf(Fe.type)>-1)),(0,Tt.h)(ne=>ne.length>0),Ee.iC):wn(this.query,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}auditTrail(H){return this.stateChanges(H).pipe((0,ve.R)((ne,Fe)=>[...ne,...Fe],[]))}snapshotChanges(H){const ne=Jn(H);return zt(this.query,ne,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(H={}){return Pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(Fe=>Fe.payload.docs.map(it=>H.idField?Object.assign({[H.idField]:it.id},it.data()):it.data())),Ee.iC)}get(H){return(0,le.D)(this.query.get(H)).pipe(Ee.iC)}}const fn=new p.OlP("angularfire2.enableFirestorePersistence"),vr=new p.OlP("angularfire2.firestore.persistenceSettings"),Ft=new p.OlP("angularfire2.firestore.settings"),mn=new p.OlP("angularfire2.firestore.use-emulator");function yn(me,H=(ne=>ne)){return{query:H(me),ref:me}}let Ne=(()=>{class me{constructor(ne,Fe,it,ae,ce,Y,K,G,De,st,Ot,Jt,se,ue,ee,Me,je){this.schedulers=K;const Pt=(0,Ke.on)(ne,Y,Fe),ln=De;st&&(0,Tn.nw)(Pt,Y,Ot,se,ue,ee,Jt,Me),[this.firestore,this.persistenceEnabled$]=(0,Ke.cc)(`${Pt.name}.firestore`,"AngularFirestore",Pt.name,()=>{const Pe=Y.runOutsideAngular(()=>Pt.firestore());if(ae&&Pe.settings(ae),ln&&Pe.useEmulator(...ln),it&&!(0,Oe.PM)(ce)){const Re=()=>{try{return(0,le.D)(Pe.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(Et){return typeof console<"u"&&console.warn(Et),(0,he.of)(!1)}};return[Pe,Y.runOutsideAngular(Re)]}return[Pe,(0,he.of)(!1)]},[ae,ln,it])}collection(ne,Fe){let it;it="string"==typeof ne?this.firestore.collection(ne):ne;const{ref:ae,query:ce}=yn(it,Fe),Y=this.schedulers.ngZone.run(()=>ae);return new ur(Y,ce,this)}collectionGroup(ne,Fe){const it=Fe||(ce=>ce),ae=this.firestore.collectionGroup(ne);return new or(it(ae),this)}doc(ne){let Fe;Fe="string"==typeof ne?this.firestore.doc(ne):ne;const it=this.schedulers.ngZone.run(()=>Fe);return new nn(it,this)}createId(){return this.firestore.collection("_").doc().id}}return me.\u0275fac=function(ne){return new(ne||me)(p.LFG(Ke.Dh),p.LFG(Ke.xv,8),p.LFG(fn,8),p.LFG(Ft,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ee.HU),p.LFG(vr,8),p.LFG(mn,8),p.LFG(Tn.zQ,8),p.LFG(Tn.Qv,8),p.LFG(Tn.L6,8),p.LFG(Tn._Q,8),p.LFG(Tn.rT,8),p.LFG(Tn.lh,8),p.LFG(Tn.f7,8),p.LFG(Fn.nm,8))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac,providedIn:"any"}),me})(),vt=(()=>{class me{constructor(){sr.Z.registerVersion("angularfire",Ee.q4.full,"fst-compat")}static enablePersistence(ne){return{ngModule:me,providers:[{provide:fn,useValue:!0},{provide:vr,useValue:ne}]}}}return me.\u0275fac=function(ne){return new(ne||me)},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({providers:[Ne]}),me})()},2011:(Nt,ke,R)=>{R.d(ke,{Dh:()=>te,GT:()=>Ee,cc:()=>Ze,hO:()=>ut,on:()=>X,pX:()=>he,xv:()=>Se});var p=R(4650),F=R(9260),B=R(4976);Nt=R.hmd(Nt);const le=["ngOnDestroy"],he=(Oe,bt,ft,fe={})=>new Proxy(Oe,{get:(et,Xe)=>ft.runOutsideAngular(()=>{var mt;if(Oe[Xe])return!(null===(mt=fe?.spy)||void 0===mt)&&mt.get&&fe.spy.get(Xe,Oe[Xe]),Oe[Xe];if(le.indexOf(Xe)>-1)return()=>{};const ot=bt.toPromise().then(Te=>{const St=Te&&Te[Xe];return"function"==typeof St?St.bind(Te):St&&St.then?St.then(Yt=>ft.run(()=>Yt)):ft.run(()=>St)});return new Proxy(()=>{},{get:(Te,St)=>ot[St],apply:(Te,St,Yt)=>ot.then(It=>{var Gt;const Rt=It&&It(...Yt);return!(null===(Gt=fe?.spy)||void 0===Gt)&&Gt.apply&&fe.spy.apply(Xe,Yt,Rt),Rt})})})}),Ee=(Oe,bt)=>{bt.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(fe=>{Object.defineProperty(Oe.prototype,fe,Object.getOwnPropertyDescriptor(ft.prototype||ft,fe))})})};class we{constructor(bt){return bt}}const te=new p.OlP("angularfire2.app.options"),Se=new p.OlP("angularfire2.app.name");function X(Oe,bt,ft){const et="object"==typeof ft&&ft||{};et.name=et.name||"string"==typeof ft&&ft||"[DEFAULT]";const mt=F.Z.apps.filter(ot=>ot&&ot.name===et.name)[0]||bt.runOutsideAngular(()=>F.Z.initializeApp(Oe,et));try{JSON.stringify(Oe)!==JSON.stringify(mt.options)&&ie("error",`${mt.name} Firebase App already initialized with different options${Nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(mt)}const ie=(Oe,...bt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Oe](...bt)},ve={provide:we,useFactory:X,deps:[te,p.R0b,[new p.FiY,Se]]};let ut=(()=>{class Oe{constructor(ft){F.Z.registerVersion("angularfire",B.q4.full,"core"),F.Z.registerVersion("angularfire",B.q4.full,"app-compat"),F.Z.registerVersion("angular",p.q4F.full,ft.toString())}static initializeApp(ft,fe){return{ngModule:Oe,providers:[{provide:te,useValue:ft},{provide:Se,useValue:fe}]}}}return Oe.\u0275fac=function(ft){return new(ft||Oe)(p.LFG(p.Lbi))},Oe.\u0275mod=p.oAB({type:Oe}),Oe.\u0275inj=p.cJS({providers:[ve]}),Oe})();function Ze(Oe,bt,ft,fe,et){const[,Xe,mt]=globalThis.\u0275AngularfireInstanceCache.find(ot=>ot[0]===Oe)||[];if(Xe)return function Ye(Oe,bt){try{return Oe.toString()===bt.toString()}catch{return Oe===bt}}(et,mt)||(Ke("error",`${bt} was already initialized on the ${ft} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:et,was:mt})),Xe;{const ot=fe();return globalThis.\u0275AngularfireInstanceCache.push([Oe,ot,et]),ot}}const Tt=!!Nt.hot,Ke=(Oe,...bt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Oe](...bt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Nt,ke,R)=>{R.d(ke,{q4:()=>xa,iC:()=>lc,HU:()=>td,vb:()=>hu,JM:()=>uc});var p=R(4650),F=R(259),B=R(5861),le=R(6881),he=R(2090),Ee=R(4859),we=R(1877);let Se,X;const ut=new WeakMap,Ze=new WeakMap,Ye=new WeakMap,Tt=new WeakMap,Ke=new WeakMap;let ft={get(w,T,j){if(w instanceof IDBTransaction){if("done"===T)return Ze.get(w);if("objectStoreNames"===T)return w.objectStoreNames||Ye.get(w);if("store"===T)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return mt(w[T])},set:(w,T,j)=>(w[T]=j,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function Xe(w){return"function"==typeof w?function et(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return X||(X=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(ot(this),T),mt(ut.get(this))}:function(...T){return mt(w.apply(ot(this),T))}:function(T,...j){const re=w.call(ot(this),T,...j);return Ye.set(re,T.sort?T.sort():[T]),mt(re)}}(w):(w instanceof IDBTransaction&&function bt(w){if(Ze.has(w))return;const T=new Promise((j,re)=>{const ge=()=>{w.removeEventListener("complete",be),w.removeEventListener("error",rt),w.removeEventListener("abort",rt)},be=()=>{j(),ge()},rt=()=>{re(w.error||new DOMException("AbortError","AbortError")),ge()};w.addEventListener("complete",be),w.addEventListener("error",rt),w.addEventListener("abort",rt)});Ze.set(w,T)}(w),((w,T)=>T.some(j=>w instanceof j))(w,function ie(){return Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ft):w)}function mt(w){if(w instanceof IDBRequest)return function Oe(w){const T=new Promise((j,re)=>{const ge=()=>{w.removeEventListener("success",be),w.removeEventListener("error",rt)},be=()=>{j(mt(w.result)),ge()},rt=()=>{re(w.error),ge()};w.addEventListener("success",be),w.addEventListener("error",rt)});return T.then(j=>{j instanceof IDBCursor&&ut.set(j,w)}).catch(()=>{}),Ke.set(T,w),T}(w);if(Tt.has(w))return Tt.get(w);const T=Xe(w);return T!==w&&(Tt.set(w,T),Ke.set(T,w)),T}const ot=w=>Ke.get(w),Yt=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],Gt=new Map;function Rt(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Gt.get(T))return Gt.get(T);const j=T.replace(/FromIndex$/,""),re=T!==j,ge=It.includes(j);if(!(j in(re?IDBIndex:IDBObjectStore).prototype)||!ge&&!Yt.includes(j))return;const be=function(){var rt=(0,B.Z)(function*(Kt,...Ht){const gn=this.transaction(Kt,ge?"readwrite":"readonly");let En=gn.store;return re&&(En=En.index(Ht.shift())),(yield Promise.all([En[j](...Ht),ge&&gn.done]))[0]});return function(Ht){return rt.apply(this,arguments)}}();return Gt.set(T,be),be}!function fe(w){ft=w(ft)}(w=>({...w,get:(T,j,re)=>Rt(T,j)||w.get(T,j,re),has:(T,j)=>!!Rt(T,j)||w.has(T,j)}));const ar="@firebase/installations",ze="w:0.6.4",Be="FIS_v2",Mt=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qt(w){return w instanceof he.ZR&&w.code.includes("request-failed")}function tn({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function hn(w){return{token:w.token,requestStatus:2,expiresIn:Mr(w.expiresIn),creationTime:Date.now()}}function Nn(w,T){return ir.apply(this,arguments)}function ir(){return(ir=(0,B.Z)(function*(w,T){const re=(yield T.json()).error;return Mt.create("request-failed",{requestName:w,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function Wt({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function cn(w,{refreshToken:T}){const j=Wt(w);return j.append("Authorization",function Pr(w){return`${Be} ${w}`}(T)),j}function Mn(w){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,B.Z)(function*(w){const T=yield w();return T.status>=500&&T.status<600?w():T})).apply(this,arguments)}function Mr(w){return Number(w.replace("s","000"))}function Ct(w,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:T},{fid:j}){const re=tn(w),ge=Wt(w),be=T.getImmediate({optional:!0});if(be){const gn=yield be.getHeartbeatsHeader();gn&&ge.append("x-firebase-client",gn)}const Kt={method:"POST",headers:ge,body:JSON.stringify({fid:j,authVersion:Be,appId:w.appId,sdkVersion:ze})},Ht=yield Mn(()=>fetch(re,Kt));if(Ht.ok){const gn=yield Ht.json();return{fid:gn.fid||j,registrationStatus:2,refreshToken:gn.refreshToken,authToken:hn(gn.authToken)}}throw yield Nn("Create Installation",Ht)})).apply(this,arguments)}function Fn(w){return new Promise(T=>{setTimeout(T,w)})}const zr=/^[cdef][\w-]{21}$/;function Hn(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const j=function Pn(w){return function sr(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return zr.test(j)?j:""}catch{return""}}function wn(w){return`${w.appName}!${w.appId}`}const zt=new Map;function on(w,T){const j=wn(w);Jn(j,T),function ur(w,T){const j=function or(){return!nn&&"BroadcastChannel"in self&&(nn=new BroadcastChannel("[Firebase] FID Change"),nn.onmessage=w=>{Jn(w.data.key,w.data.fid)}),nn}();j&&j.postMessage({key:w,fid:T}),function fn(){0===zt.size&&nn&&(nn.close(),nn=null)}()}(j,T)}function Jn(w,T){const j=zt.get(w);if(j)for(const re of j)re(T)}let nn=null;const mn="firebase-installations-store";let yn=null;function Ne(){return yn||(yn=function Te(w,T,{blocked:j,upgrade:re,blocking:ge,terminated:be}={}){const rt=indexedDB.open(w,T),Kt=mt(rt);return re&&rt.addEventListener("upgradeneeded",Ht=>{re(mt(rt.result),Ht.oldVersion,Ht.newVersion,mt(rt.transaction))}),j&&rt.addEventListener("blocked",()=>j()),Kt.then(Ht=>{be&&Ht.addEventListener("close",()=>be()),ge&&Ht.addEventListener("versionchange",()=>ge())}).catch(()=>{}),Kt}("firebase-installations-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(mn)}})),yn}function vt(w,T){return me.apply(this,arguments)}function me(){return(me=(0,B.Z)(function*(w,T){const j=wn(w),ge=(yield Ne()).transaction(mn,"readwrite"),be=ge.objectStore(mn),rt=yield be.get(j);return yield be.put(T,j),yield ge.done,(!rt||rt.fid!==T.fid)&&on(w,T.fid),T})).apply(this,arguments)}function H(w){return ne.apply(this,arguments)}function ne(){return(ne=(0,B.Z)(function*(w){const T=wn(w),re=(yield Ne()).transaction(mn,"readwrite");yield re.objectStore(mn).delete(T),yield re.done})).apply(this,arguments)}function Fe(w,T){return it.apply(this,arguments)}function it(){return(it=(0,B.Z)(function*(w,T){const j=wn(w),ge=(yield Ne()).transaction(mn,"readwrite"),be=ge.objectStore(mn),rt=yield be.get(j),Kt=T(rt);return void 0===Kt?yield be.delete(j):yield be.put(Kt,j),yield ge.done,Kt&&(!rt||rt.fid!==Kt.fid)&&on(w,Kt.fid),Kt})).apply(this,arguments)}function ae(w){return ce.apply(this,arguments)}function ce(){return(ce=(0,B.Z)(function*(w){let T;const j=yield Fe(w.appConfig,re=>{const ge=Y(re),be=K(w,ge);return T=be.registrationPromise,be.installationEntry});return""===j.fid?{installationEntry:yield T}:{installationEntry:j,registrationPromise:T}})).apply(this,arguments)}function Y(w){return se(w||{fid:Hn(),registrationStatus:0})}function K(w,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Mt.create("app-offline"))};const j={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},re=function G(w,T){return De.apply(this,arguments)}(w,j);return{installationEntry:j,registrationPromise:re}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:st(w)}:{installationEntry:T}}function De(){return(De=(0,B.Z)(function*(w,T){try{const j=yield Ct(w,T);return vt(w.appConfig,j)}catch(j){throw qt(j)&&409===j.customData.serverCode?yield H(w.appConfig):yield vt(w.appConfig,{fid:T.fid,registrationStatus:0}),j}})).apply(this,arguments)}function st(w){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,B.Z)(function*(w){let T=yield Jt(w.appConfig);for(;1===T.registrationStatus;)yield Fn(100),T=yield Jt(w.appConfig);if(0===T.registrationStatus){const{installationEntry:j,registrationPromise:re}=yield ae(w);return re||j}return T})).apply(this,arguments)}function Jt(w){return Fe(w,T=>{if(!T)throw Mt.create("installation-not-found");return se(T)})}function se(w){return function ue(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function ee(w,T){return Me.apply(this,arguments)}function Me(){return(Me=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:T},j){const re=je(w,j),ge=cn(w,j),be=T.getImmediate({optional:!0});if(be){const gn=yield be.getHeartbeatsHeader();gn&&ge.append("x-firebase-client",gn)}const Kt={method:"POST",headers:ge,body:JSON.stringify({installation:{sdkVersion:ze,appId:w.appId}})},Ht=yield Mn(()=>fetch(re,Kt));if(Ht.ok)return hn(yield Ht.json());throw yield Nn("Generate Auth Token",Ht)})).apply(this,arguments)}function je(w,{fid:T}){return`${tn(w)}/${T}/authTokens:generate`}function Pt(w){return ln.apply(this,arguments)}function ln(){return(ln=(0,B.Z)(function*(w,T=!1){let j;const re=yield Fe(w.appConfig,be=>{if(!On(be))throw Mt.create("not-registered");const rt=be.authToken;if(!T&&Gn(rt))return be;if(1===rt.requestStatus)return j=Pe(w,T),be;{if(!navigator.onLine)throw Mt.create("app-offline");const Kt=kn(be);return j=pt(w,Kt),Kt}});return j?yield j:re.authToken})).apply(this,arguments)}function Pe(w,T){return Re.apply(this,arguments)}function Re(){return(Re=(0,B.Z)(function*(w,T){let j=yield Et(w.appConfig);for(;1===j.authToken.requestStatus;)yield Fn(100),j=yield Et(w.appConfig);const re=j.authToken;return 0===re.requestStatus?Pt(w,T):re})).apply(this,arguments)}function Et(w){return Fe(w,T=>{if(!On(T))throw Mt.create("not-registered");return function xr(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function pt(w,T){return vn.apply(this,arguments)}function vn(){return(vn=(0,B.Z)(function*(w,T){try{const j=yield ee(w,T),re=Object.assign(Object.assign({},T),{authToken:j});return yield vt(w.appConfig,re),j}catch(j){if(!qt(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const re=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield vt(w.appConfig,re)}else yield H(w.appConfig);throw j}})).apply(this,arguments)}function On(w){return void 0!==w&&2===w.registrationStatus}function Gn(w){return 2===w.requestStatus&&!function Cr(w){const T=Date.now();return T<w.creationTime||w.creationTime+w.expiresIn<T+36e5}(w)}function kn(w){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:T})}function Wr(){return(Wr=(0,B.Z)(function*(w){const T=w,{installationEntry:j,registrationPromise:re}=yield ae(T);return re?re.catch(console.error):Pt(T).catch(console.error),j.fid})).apply(this,arguments)}function Ns(){return(Ns=(0,B.Z)(function*(w,T=!1){const j=w;return yield Kn(j),(yield Pt(j,T)).token})).apply(this,arguments)}function Kn(w){return ui.apply(this,arguments)}function ui(){return(ui=(0,B.Z)(function*(w){const{registrationPromise:T}=yield ae(w);T&&(yield T)})).apply(this,arguments)}function qr(w){return Mt.create("missing-app-config-values",{valueName:w})}const jr="installations",Xr=w=>{const T=w.getProvider("app").getImmediate(),j=function ss(w){if(!w||!w.options)throw qr("App Configuration");if(!w.name)throw qr("App Name");const T=["projectId","apiKey","appId"];for(const j of T)if(!w.options[j])throw qr(j);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(T);return{app:T,appConfig:j,heartbeatServiceProvider:(0,le._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},os=w=>{const T=w.getProvider("app").getImmediate(),j=(0,le._getProvider)(T,jr).getImmediate();return{getId:()=>function Hr(w){return Wr.apply(this,arguments)}(j),getToken:ge=>function Or(w){return Ns.apply(this,arguments)}(j,ge)}};(function Nr(){(0,le._registerComponent)(new Ee.wA(jr,Xr,"PUBLIC")),(0,le._registerComponent)(new Ee.wA("installations-internal",os,"PRIVATE"))})(),(0,le.registerVersion)(ar,"0.6.4"),(0,le.registerVersion)(ar,"0.6.4","esm2017");const Bi="@firebase/remote-config",cr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ea{constructor(T,j,re,ge){this.client=T,this.storage=j,this.storageCache=re,this.logger=ge}isCachedDataFresh(T,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-j,ge=re<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ge}.`),ge}fetch(T){var j=this;return(0,B.Z)(function*(){const[re,ge]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(ge&&j.isCachedDataFresh(T.cacheMaxAgeMillis,re))return ge;T.eTag=ge&&ge.eTag;const be=yield j.client.fetch(T),rt=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&rt.push(j.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(rt),be})()}}function as(w=navigator){return w.languages&&w.languages[0]||w.language}class Lo{constructor(T,j,re,ge,be,rt){this.firebaseInstallations=T,this.sdkVersion=j,this.namespace=re,this.projectId=ge,this.apiKey=be,this.appId=rt}fetch(T){var j=this;return(0,B.Z)(function*(){const[re,ge]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ht={sdk_version:j.sdkVersion,app_instance_id:re,app_instance_id_token:ge,app_id:j.appId,language_code:as()},gn={method:"POST",headers:Kt,body:JSON.stringify(Ht)},En=fetch(rt,gn),Bn=new Promise((uo,Pa)=>{T.signal.addEventListener(()=>{const gu=new Error("The operation was aborted.");gu.name="AbortError",Pa(gu)})});let gs;try{yield Promise.race([En,Bn]),gs=yield En}catch(uo){let Pa="fetch-client-network";throw"AbortError"===uo?.name&&(Pa="fetch-timeout"),cr.create(Pa,{originalErrorMessage:uo?.message})}let _i=gs.status;const Ui=gs.headers.get("ETag")||void 0;let ha,pu;if(200===gs.status){let uo;try{uo=yield gs.json()}catch(Pa){throw cr.create("fetch-client-parse",{originalErrorMessage:Pa?.message})}ha=uo.entries,pu=uo.state}if("INSTANCE_STATE_UNSPECIFIED"===pu?_i=500:"NO_CHANGE"===pu?_i=304:("NO_TEMPLATE"===pu||"EMPTY_CONFIG"===pu)&&(ha={}),304!==_i&&200!==_i)throw cr.create("fetch-status",{httpStatus:_i});return{status:_i,eTag:Ui,config:ha}})()}}class Co{constructor(T,j){this.client=T,this.storage=j}fetch(T){var j=this;return(0,B.Z)(function*(){const re=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(T,re)})()}attemptFetch(T,{throttleEndTimeMillis:j,backoffCount:re}){var ge=this;return(0,B.Z)(function*(){yield function us(w,T){return new Promise((j,re)=>{const ge=Math.max(T-Date.now(),0),be=setTimeout(j,ge);w.addEventListener(()=>{clearTimeout(be),re(cr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,j);try{const be=yield ge.client.fetch(T);return yield ge.storage.deleteThrottleMetadata(),be}catch(be){if(!function Vo(w){if(!(w instanceof he.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}(be))throw be;const rt={throttleEndTimeMillis:Date.now()+(0,he.$s)(re),backoffCount:re+1};return yield ge.storage.setThrottleMetadata(rt),ge.attemptFetch(T,rt)}})()}}class Zs{constructor(T,j,re,ge,be){this.app=T,this._client=j,this._storageCache=re,this._storage=ge,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kr(w,T){const j=w.target.error||void 0;return cr.create(T,{originalErrorMessage:j&&j?.message})}const Zi="app_namespace_store";class ta{constructor(T,j,re,ge=function lo(){return new Promise((w,T)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=re=>{T(kr(re,"storage-open"))},j.onsuccess=re=>{w(re.target.result)},j.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore(Zi,{keyPath:"compositeKey"})}}catch(j){T(cr.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=T,this.appName=j,this.namespace=re,this.openDbPromise=ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var j=this;return(0,B.Z)(function*(){const re=yield j.openDbPromise;return new Promise((ge,be)=>{const Kt=re.transaction([Zi],"readonly").objectStore(Zi),Ht=j.createCompositeKey(T);try{const gn=Kt.get(Ht);gn.onerror=En=>{be(kr(En,"storage-get"))},gn.onsuccess=En=>{const Bn=En.target.result;ge(Bn?Bn.value:void 0)}}catch(gn){be(cr.create("storage-get",{originalErrorMessage:gn?.message}))}})})()}set(T,j){var re=this;return(0,B.Z)(function*(){const ge=yield re.openDbPromise;return new Promise((be,rt)=>{const Ht=ge.transaction([Zi],"readwrite").objectStore(Zi),gn=re.createCompositeKey(T);try{const En=Ht.put({compositeKey:gn,value:j});En.onerror=Bn=>{rt(kr(Bn,"storage-set"))},En.onsuccess=()=>{be()}}catch(En){rt(cr.create("storage-set",{originalErrorMessage:En?.message}))}})})()}delete(T){var j=this;return(0,B.Z)(function*(){const re=yield j.openDbPromise;return new Promise((ge,be)=>{const Kt=re.transaction([Zi],"readwrite").objectStore(Zi),Ht=j.createCompositeKey(T);try{const gn=Kt.delete(Ht);gn.onerror=En=>{be(kr(En,"storage-delete"))},gn.onsuccess=()=>{ge()}}catch(gn){be(cr.create("storage-delete",{originalErrorMessage:gn?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class mr{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,B.Z)(function*(){const j=T.storage.getLastFetchStatus(),re=T.storage.getLastSuccessfulFetchTimestampMillis(),ge=T.storage.getActiveConfig(),be=yield j;be&&(T.lastFetchStatus=be);const rt=yield re;rt&&(T.lastSuccessfulFetchTimestampMillis=rt);const Kt=yield ge;Kt&&(T.activeConfig=Kt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function hi(){return ho.apply(this,arguments)}function ho(){return(ho=(0,B.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}let ki,ti;!function Ys(){(0,le._registerComponent)(new Ee.wA("remote-config",function w(T,{instanceIdentifier:j}){const re=T.getProvider("app").getImmediate(),ge=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw cr.create("registration-window");if(!(0,he.hl)())throw cr.create("indexed-db-unavailable");const{projectId:be,apiKey:rt,appId:Kt}=re.options;if(!be)throw cr.create("registration-project-id");if(!rt)throw cr.create("registration-api-key");if(!Kt)throw cr.create("registration-app-id");const Ht=new ta(Kt,re.name,j=j||"firebase"),gn=new mr(Ht),En=new we.Yd(Bi);En.logLevel=we.in.ERROR;const Bn=new Lo(ge,le.SDK_VERSION,j,be,rt,Kt),gs=new Co(Bn,Ht),_i=new ea(gs,Ht,gn,En),Ui=new Zs(re,_i,gn,Ht,En);return function Xn(w){const T=(0,he.m9)(w);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ui),Ui},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Bi,"0.4.4"),(0,le.registerVersion)(Bi,"0.4.4","esm2017")}();const Qs=new WeakMap,gi=new WeakMap,Gr=new WeakMap,Es=new WeakMap,An=new WeakMap;let Ei={get(w,T,j){if(w instanceof IDBTransaction){if("done"===T)return gi.get(w);if("objectStoreNames"===T)return w.objectStoreNames||Gr.get(w);if("store"===T)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return ls(w[T])},set:(w,T,j)=>(w[T]=j,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function To(w){return"function"==typeof w?function Us(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Uo(){return ti||(ti=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(Bo(this),T),ls(Qs.get(this))}:function(...T){return ls(w.apply(Bo(this),T))}:function(T,...j){const re=w.call(Bo(this),T,...j);return Gr.set(re,T.sort?T.sort():[T]),ls(re)}}(w):(w instanceof IDBTransaction&&function Vs(w){if(gi.has(w))return;const T=new Promise((j,re)=>{const ge=()=>{w.removeEventListener("complete",be),w.removeEventListener("error",rt),w.removeEventListener("abort",rt)},be=()=>{j(),ge()},rt=()=>{re(w.error||new DOMException("AbortError","AbortError")),ge()};w.addEventListener("complete",be),w.addEventListener("error",rt),w.addEventListener("abort",rt)});gi.set(w,T)}(w),((w,T)=>T.some(j=>w instanceof j))(w,function ya(){return ki||(ki=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Ei):w)}function ls(w){if(w instanceof IDBRequest)return function Js(w){const T=new Promise((j,re)=>{const ge=()=>{w.removeEventListener("success",be),w.removeEventListener("error",rt)},be=()=>{j(ls(w.result)),ge()},rt=()=>{re(w.error),ge()};w.addEventListener("success",be),w.addEventListener("error",rt)});return T.then(j=>{j instanceof IDBCursor&&Qs.set(j,w)}).catch(()=>{}),An.set(T,w),T}(w);if(Es.has(w))return Es.get(w);const T=To(w);return T!==w&&(Es.set(w,T),An.set(T,w)),T}const Bo=w=>An.get(w);function gt(w,T,{blocked:j,upgrade:re,blocking:ge,terminated:be}={}){const rt=indexedDB.open(w,T),Kt=ls(rt);return re&&rt.addEventListener("upgradeneeded",Ht=>{re(ls(rt.result),Ht.oldVersion,Ht.newVersion,ls(rt.transaction))}),j&&rt.addEventListener("blocked",()=>j()),Kt.then(Ht=>{be&&Ht.addEventListener("close",()=>be()),ge&&Ht.addEventListener("versionchange",()=>ge())}).catch(()=>{}),Kt}function qn(w,{blocked:T}={}){const j=indexedDB.deleteDatabase(w);return T&&j.addEventListener("blocked",()=>T()),ls(j).then(()=>{})}const jo=["get","getKey","getAll","getAllKeys","count"],Yi=["put","add","delete","clear"],Rr=new Map;function k(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Rr.get(T))return Rr.get(T);const j=T.replace(/FromIndex$/,""),re=T!==j,ge=Yi.includes(j);if(!(j in(re?IDBIndex:IDBObjectStore).prototype)||!ge&&!jo.includes(j))return;const be=function(){var rt=(0,B.Z)(function*(Kt,...Ht){const gn=this.transaction(Kt,ge?"readwrite":"readonly");let En=gn.store;return re&&(En=En.index(Ht.shift())),(yield Promise.all([En[j](...Ht),ge&&gn.done]))[0]});return function(Ht){return rt.apply(this,arguments)}}();return Rr.set(T,be),be}!function Fr(w){Ei=w(Ei)}(w=>({...w,get:(T,j,re)=>k(T,j)||w.get(T,j,re),has:(T,j)=>!!k(T,j)||w.has(T,j)}));const P="/firebase-messaging-sw.js",M="/firebase-cloud-messaging-push-scope",q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xt="google.c.a.c_id",zn="google.c.a.c_l",Xs="google.c.a.ts",ws="google.c.a.e";var wi=(()=>{return(w=wi||(wi={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",wi;var w})();function Qi(w){const T=new Uint8Array(w);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bs(w){const j=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(j),ge=new Uint8Array(re.length);for(let be=0;be<re.length;++be)ge[be]=re.charCodeAt(be);return ge}const ni="fcm_token_details_db",Va="fcm_token_object_Store";function va(w){return $o.apply(this,arguments)}function $o(){return $o=(0,B.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes(ni))return null;let T=null;return(yield gt(ni,5,{upgrade:(re=(0,B.Z)(function*(ge,be,rt,Kt){var Ht;if(be<2||!ge.objectStoreNames.contains(Va))return;const gn=Kt.objectStore(Va),En=yield gn.index("fcmSenderId").get(w);if(yield gn.clear(),En)if(2===be){const Bn=En;if(!Bn.auth||!Bn.p256dh||!Bn.endpoint)return;T={token:Bn.fcmToken,createTime:null!==(Ht=Bn.createTime)&&void 0!==Ht?Ht:Date.now(),subscriptionOptions:{auth:Bn.auth,p256dh:Bn.p256dh,endpoint:Bn.endpoint,swScope:Bn.swScope,vapidKey:"string"==typeof Bn.vapidKey?Bn.vapidKey:Qi(Bn.vapidKey)}}}else if(3===be){const Bn=En;T={token:Bn.fcmToken,createTime:Bn.createTime,subscriptionOptions:{auth:Qi(Bn.auth),p256dh:Qi(Bn.p256dh),endpoint:Bn.endpoint,swScope:Bn.swScope,vapidKey:Qi(Bn.vapidKey)}}}else if(4===be){const Bn=En;T={token:Bn.fcmToken,createTime:Bn.createTime,subscriptionOptions:{auth:Qi(Bn.auth),p256dh:Qi(Bn.p256dh),endpoint:Bn.endpoint,swScope:Bn.swScope,vapidKey:Qi(Bn.vapidKey)}}}}),function(be,rt,Kt,Ht){return re.apply(this,arguments)})})).close(),yield qn(ni),yield qn("fcm_vapid_details_db"),yield qn("undefined"),Ho(T)?T:null;var re}),$o.apply(this,arguments)}function Ho(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:T}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Fi="firebase-messaging-store";let js=null;function _a(){return js||(js=gt("firebase-messaging-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(Fi)}})),js}function eo(w){return zo.apply(this,arguments)}function zo(){return(zo=(0,B.Z)(function*(w){const T=Ua(w),re=yield(yield _a()).transaction(Fi).objectStore(Fi).get(T);if(re)return re;{const ge=yield va(w.appConfig.senderId);if(ge)return yield fo(w,ge),ge}})).apply(this,arguments)}function fo(w,T){return So.apply(this,arguments)}function So(){return(So=(0,B.Z)(function*(w,T){const j=Ua(w),ge=(yield _a()).transaction(Fi,"readwrite");return yield ge.objectStore(Fi).put(T,j),yield ge.done,T})).apply(this,arguments)}function xi(w){return ds.apply(this,arguments)}function ds(){return(ds=(0,B.Z)(function*(w){const T=Ua(w),re=(yield _a()).transaction(Fi,"readwrite");yield re.objectStore(Fi).delete(T),yield re.done})).apply(this,arguments)}function Ua({appConfig:w}){return w.appId}const hr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ii(w,T){return yr.apply(this,arguments)}function yr(){return(yr=(0,B.Z)(function*(w,T){const j=yield Ds(w),re=to(T),ge={method:"POST",headers:j,body:JSON.stringify(re)};let be;try{be=yield(yield fetch(Ea(w.appConfig),ge)).json()}catch(rt){throw hr.create("token-subscribe-failed",{errorInfo:rt?.toString()})}if(be.error)throw hr.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw hr.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function _r(w,T){return ra.apply(this,arguments)}function ra(){return(ra=(0,B.Z)(function*(w,T){const j=yield Ds(w),re=to(T.subscriptionOptions),ge={method:"PATCH",headers:j,body:JSON.stringify(re)};let be;try{be=yield(yield fetch(`${Ea(w.appConfig)}/${T.token}`,ge)).json()}catch(rt){throw hr.create("token-update-failed",{errorInfo:rt?.toString()})}if(be.error)throw hr.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw hr.create("token-update-no-token");return be.token})).apply(this,arguments)}function Mo(w,T){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,B.Z)(function*(w,T){const re={method:"DELETE",headers:yield Ds(w)};try{const be=yield(yield fetch(`${Ea(w.appConfig)}/${T}`,re)).json();if(be.error)throw hr.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ge){throw hr.create("token-unsubscribe-failed",{errorInfo:ge?.toString()})}})).apply(this,arguments)}function Ea({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function Ds(w){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,B.Z)(function*({appConfig:w,installations:T}){const j=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function to({p256dh:w,auth:T,endpoint:j,vapidKey:re}){const ge={web:{endpoint:j,auth:T,p256dh:w}};return re!==q&&(ge.web.applicationPubKey=re),ge}const ia=6048e5;function hs(w){return $i.apply(this,arguments)}function $i(){return($i=(0,B.Z)(function*(w){const T=yield xo(w.swRegistration,w.vapidKey),j={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:T.endpoint,auth:Qi(T.getKey("auth")),p256dh:Qi(T.getKey("p256dh"))},re=yield eo(w.firebaseDependencies);if(re){if(b(re.subscriptionOptions,j))return Date.now()>=re.createTime+ia?no(w,{token:re.token,createTime:Date.now(),subscriptionOptions:j}):re.token;try{yield Mo(w.firebaseDependencies,re.token)}catch(ge){console.warn(ge)}return ro(w.firebaseDependencies,j)}return ro(w.firebaseDependencies,j)})).apply(this,arguments)}function Di(w){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,B.Z)(function*(w){const T=yield eo(w.firebaseDependencies);T&&(yield Mo(w.firebaseDependencies,T.token),yield xi(w.firebaseDependencies));const j=yield w.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function no(w,T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,B.Z)(function*(w,T){try{const j=yield _r(w.firebaseDependencies,T),re=Object.assign(Object.assign({},T),{token:j,createTime:Date.now()});return yield fo(w.firebaseDependencies,re),j}catch(j){throw yield Di(w),j}})).apply(this,arguments)}function ro(w,T){return po.apply(this,arguments)}function po(){return(po=(0,B.Z)(function*(w,T){const re={token:yield Ii(w,T),createTime:Date.now(),subscriptionOptions:T};return yield fo(w,re),re.token})).apply(this,arguments)}function xo(w,T){return ru.apply(this,arguments)}function ru(){return(ru=(0,B.Z)(function*(w,T){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bs(T)})})).apply(this,arguments)}function b(w,T){return T.vapidKey===w.vapidKey&&T.endpoint===w.endpoint&&T.auth===w.auth&&T.p256dh===w.p256dh}function V(w){const T={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function x(w,T){if(!T.notification)return;w.notification={};const j=T.notification.title;j&&(w.notification.title=j);const re=T.notification.body;re&&(w.notification.body=re);const ge=T.notification.image;ge&&(w.notification.image=ge);const be=T.notification.icon;be&&(w.notification.icon=be)}(T,w),function W(w,T){!T.data||(w.data=T.data)}(T,w),function _e(w,T){var j,re,ge,be,rt;if(!(T.fcmOptions||null!==(j=T.notification)&&void 0!==j&&j.click_action))return;w.fcmOptions={};const Kt=null!==(ge=null===(re=T.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==ge?ge:null===(be=T.notification)||void 0===be?void 0:be.click_action;Kt&&(w.fcmOptions.link=Kt);const Ht=null===(rt=T.fcmOptions)||void 0===rt?void 0:rt.analytics_label;Ht&&(w.fcmOptions.analyticsLabel=Ht)}(T,w),T}function Je(w){return"object"==typeof w&&!!w&&Xt in w}function dt(w,T){const j=[];for(let re=0;re<w.length;re++)j.push(w.charAt(re)),re<T.length&&j.push(T.charAt(re));return j.join("")}function fr(w){return hr.create("missing-app-config-values",{valueName:w})}dt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qn{constructor(T,j,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ge=function dn(w){if(!w||!w.options)throw fr("App Configuration Object");if(!w.name)throw fr("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:j}=w;for(const re of T)if(!j[re])throw fr(re);return{appName:w.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ge,installations:j,analyticsProvider:re}}_delete(){return Promise.resolve()}}function Er(w){return _n.apply(this,arguments)}function _n(){return(_n=(0,B.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(P,{scope:M}),w.swRegistration.update().catch(()=>{})}catch(T){throw hr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Tr(w,T){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,B.Z)(function*(w,T){if(!T&&!w.swRegistration&&(yield Er(w)),T||!w.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw hr.create("invalid-sw-registration");w.swRegistration=T}})).apply(this,arguments)}function Yr(w,T){return fs.apply(this,arguments)}function fs(){return(fs=(0,B.Z)(function*(w,T){T?w.vapidKey=T:w.vapidKey||(w.vapidKey=q)})).apply(this,arguments)}function wr(){return(wr=(0,B.Z)(function*(w,T){if(!navigator)throw hr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hr.create("permission-blocked");return yield Yr(w,T?.vapidKey),yield Tr(w,T?.serviceWorkerRegistration),hs(w)})).apply(this,arguments)}function Lr(w,T,j){return go.apply(this,arguments)}function go(){return(go=(0,B.Z)(function*(w,T,j){const re=Zt(T);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:j[Xt],message_name:j[zn],message_time:j[Xs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zt(w){switch(w){case wi.NOTIFICATION_CLICKED:return"notification_open";case wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sa(){return(sa=(0,B.Z)(function*(w,T){const j=T.data;if(!j.isFirebaseMessaging)return;w.onMessageHandler&&j.messageType===wi.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(V(j)):w.onMessageHandler.next(V(j)));const re=j.data;Je(re)&&"1"===re[ws]&&(yield Lr(w,j.messageType,re))})).apply(this,arguments)}const Bt="@firebase/messaging",Dt=w=>{const T=new Qn(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function an(w,T){return sa.apply(this,arguments)}(T,j)),T},ri=w=>{const T=w.getProvider("messaging").getImmediate();return{getToken:re=>function wt(w,T){return wr.apply(this,arguments)}(T,re)}};function Mu(){return wa.apply(this,arguments)}function wa(){return(wa=(0,B.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Su(){(0,le._registerComponent)(new Ee.wA("messaging",Dt,"PUBLIC")),(0,le._registerComponent)(new Ee.wA("messaging-internal",ri,"PRIVATE")),(0,le.registerVersion)(Bt,"0.12.4"),(0,le.registerVersion)(Bt,"0.12.4","esm2017")}();const Sn="analytics",bs="firebase_id",pn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ts="https://www.googletagmanager.com/gtag/js",Dn=new we.Yd("@firebase/analytics"),er=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function jt(w){if(!w.startsWith(Ts)){const T=er.create("invalid-gtag-resource",{gtagURL:w});return Dn.warn(T.message),""}return w}function Ji(w){return Promise.all(w.map(T=>T.catch(j=>j)))}function Ia(w,T){const j=function qo(w,T){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(w,T)),j}("firebase-js-sdk-policy",{createScriptURL:jt}),re=document.createElement("script"),ge=`${Ts}?l=${w}&id=${T}`;re.src=j?j?.createScriptURL(ge):ge,re.async=!0,document.head.appendChild(re)}function Ro(w,T,j,re,ge,be){return Da.apply(this,arguments)}function Da(){return(Da=(0,B.Z)(function*(w,T,j,re,ge,be){const rt=re[ge];try{if(rt)yield T[rt];else{const Ht=(yield Ji(j)).find(gn=>gn.measurementId===ge);Ht&&(yield T[Ht.appId])}}catch(Kt){Dn.error(Kt)}w("config",ge,be)})).apply(this,arguments)}function xu(w,T,j,re,ge){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,B.Z)(function*(w,T,j,re,ge){try{let be=[];if(ge&&ge.send_to){let rt=ge.send_to;Array.isArray(rt)||(rt=[rt]);const Kt=yield Ji(j);for(const Ht of rt){const gn=Kt.find(Bn=>Bn.measurementId===Ht),En=gn&&T[gn.appId];if(!En){be=[];break}be.push(En)}}0===be.length&&(be=Object.values(T)),yield Promise.all(be),w("event",re,ge||{})}catch(be){Dn.error(be)}})).apply(this,arguments)}function nc(w){const T=window.document.getElementsByTagName("script");for(const j of Object.values(T))if(j.src&&j.src.includes(Ts)&&j.src.includes(w))return j;return null}const si=new class Zo{constructor(T={},j=1e3){this.throttleMetadata=T,this.intervalMillis=j}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,j){this.throttleMetadata[T]=j}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function He(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function io(w){return so.apply(this,arguments)}function so(){return(so=(0,B.Z)(function*(w){var T;const{appId:j,apiKey:re}=w,ge={method:"GET",headers:He(re)},be=pn.replace("{app-id}",j),rt=yield fetch(be,ge);if(200!==rt.status&&304!==rt.status){let Kt="";try{const Ht=yield rt.json();null!==(T=Ht.error)&&void 0!==T&&T.message&&(Kt=Ht.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:rt.status,responseMessage:Kt})}return rt.json()})).apply(this,arguments)}function Ga(w){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,B.Z)(function*(w,T=si,j){const{appId:re,apiKey:ge,measurementId:be}=w.options;if(!re)throw er.create("no-app-id");if(!ge){if(be)return{measurementId:be,appId:re};throw er.create("no-api-key")}const rt=T.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Kt=new su;return setTimeout((0,B.Z)(function*(){Kt.abort()}),void 0!==j?j:6e4),Li({appId:re,apiKey:ge,measurementId:be},rt,Kt,T)})).apply(this,arguments)}function Li(w,T,j){return iu.apply(this,arguments)}function iu(){return(iu=(0,B.Z)(function*(w,{throttleEndTimeMillis:T,backoffCount:j},re,ge=si){var be;const{appId:rt,measurementId:Kt}=w;try{yield $s(re,T)}catch(Ht){if(Kt)return Dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:rt,measurementId:Kt};throw Ht}try{const Ht=yield io(w);return ge.deleteThrottleMetadata(rt),Ht}catch(Ht){const gn=Ht;if(!ba(gn)){if(ge.deleteThrottleMetadata(rt),Kt)return Dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${gn?.message}]`),{appId:rt,measurementId:Kt};throw Ht}const En=503===Number(null===(be=gn?.customData)||void 0===be?void 0:be.httpStatus)?(0,he.$s)(j,ge.intervalMillis,30):(0,he.$s)(j,ge.intervalMillis),Bn={throttleEndTimeMillis:Date.now()+En,backoffCount:j+1};return ge.setThrottleMetadata(rt,Bn),Dn.debug(`Calling attemptFetch again in ${En} millis`),Li(w,Bn,re,ge)}})).apply(this,arguments)}function $s(w,T){return new Promise((j,re)=>{const ge=Math.max(T-Date.now(),0),be=setTimeout(j,ge);w.addEventListener(()=>{clearTimeout(be),re(er.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ba(w){if(!(w instanceof he.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}class su{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Pu,tt;function Xi(){return(Xi=(0,B.Z)(function*(w,T,j,re,ge){if(ge&&ge.global)w("event",j,re);else{const be=yield T;w("event",j,Object.assign(Object.assign({},re),{send_to:be}))}})).apply(this,arguments)}function Vt(w){tt=w}function Un(w){Pu=w}function rn(){return lr.apply(this,arguments)}function lr(){return(lr=(0,B.Z)(function*(){if(!(0,he.hl)())return Dn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(w){return Dn.warn(er.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function fi(){return(fi=(0,B.Z)(function*(w,T,j,re,ge,be,rt){var Kt;const Ht=Ga(w);Ht.then(_i=>{j[_i.measurementId]=_i.appId,w.options.measurementId&&_i.measurementId!==w.options.measurementId&&Dn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${_i.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_i=>Dn.error(_i)),T.push(Ht);const gn=rn().then(_i=>{if(_i)return re.getId()}),[En,Bn]=yield Promise.all([Ht,gn]);nc(be)||Ia(be,En.measurementId),tt&&(ge("consent","default",tt),Vt(void 0)),ge("js",new Date);const gs=null!==(Kt=rt?.config)&&void 0!==Kt?Kt:{};return gs.origin="firebase",gs.update=!0,null!=Bn&&(gs[bs]=Bn),ge("config",En.measurementId,gs),Pu&&(ge("set",Pu),Un(void 0)),En.measurementId})).apply(this,arguments)}class oo{constructor(T){this.app=T}_delete(){return delete Qr[this.app.options.appId],Promise.resolve()}}let Qr={},Ou=[];const Ta={};let ou,Ss,Aa="dataLayer",au=!1;function Fc(w,T,j){!function Nu(){const w=[];if((0,he.ru)()&&w.push("This is a browser extension environment."),(0,he.zI)()||w.push("Cookies are not available."),w.length>0){const T=w.map((re,ge)=>`(${ge+1}) ${re}`).join(" "),j=er.create("invalid-analytics-context",{errorInfo:T});Dn.warn(j.message)}}();const re=w.options.appId;if(!re)throw er.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw er.create("no-api-key");Dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qr[re])throw er.create("already-exists",{id:re});if(!au){!function Ar(w){let T=[];Array.isArray(window[w])?T=window[w]:window[w]=T}(Aa);const{wrappedGtag:be,gtagCore:rt}=function ps(w,T,j,re,ge){let be=function(...rt){window[re].push(arguments)};return window[ge]&&"function"==typeof window[ge]&&(be=window[ge]),window[ge]=function Ru(w,T,j,re){function be(){return(be=(0,B.Z)(function*(rt,...Kt){try{if("event"===rt){const[Ht,gn]=Kt;yield xu(w,T,j,Ht,gn)}else if("config"===rt){const[Ht,gn]=Kt;yield Ro(w,T,j,re,Ht,gn)}else if("consent"===rt){const[Ht]=Kt;w("consent","update",Ht)}else if("get"===rt){const[Ht,gn,En]=Kt;w("get",Ht,gn,En)}else if("set"===rt){const[Ht]=Kt;w("set",Ht)}else w(rt,...Kt)}catch(Ht){Dn.error(Ht)}})).apply(this,arguments)}return function ge(rt){return be.apply(this,arguments)}}(be,w,T,j),{gtagCore:be,wrappedGtag:window[ge]}}(Qr,Ou,Ta,Aa,"gtag");Ss=be,ou=rt,au=!0}return Qr[re]=function As(w,T,j,re,ge,be,rt){return fi.apply(this,arguments)}(w,Ou,Ta,T,ou,Aa,j),new oo(w)}function Hi(){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,B.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const oc="@firebase/analytics";!function bi(){(0,le._registerComponent)(new Ee.wA(Sn,(T,{options:j})=>Fc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,le._registerComponent)(new Ee.wA("analytics-internal",function w(T){try{const j=T.getProvider(Sn).getImmediate();return{logEvent:(re,ge,be)=>function Po(w,T,j,re){w=(0,he.m9)(w),function kc(w,T,j,re,ge){return Xi.apply(this,arguments)}(Ss,Qr[w.app.options.appId],T,j,re).catch(ge=>Dn.error(ge))}(j,re,ge,be)}}catch(j){throw er.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,le.registerVersion)(oc,"0.10.0"),(0,le.registerVersion)(oc,"0.10.0","esm2017")}();var cu=R(4408),ai=R(7565);const ku=new class Ma extends ai.v{}(class mo extends cu.o{constructor(T,j){super(T,j),this.scheduler=T,this.work=j}schedule(T,j=0){return j>0?super.schedule(T,j):(this.delay=j,this.state=T,this.scheduler.flush(this),this)}execute(T,j){return j>0||this.closed?super.execute(T,j):this._execute(T,j)}requestAsyncId(T,j,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(T,j,re):(T.flush(this),0)}});var ac=R(4986),Uc=R(8505),Yo=R(9468),Qo=R(5363);const xa=new p.GfV("7.6.1"),ao="__angularfire_symbol__analyticsIsSupportedValue",yo="__angularfire_symbol__analyticsIsSupported",ca="__angularfire_symbol__remoteConfigIsSupportedValue",Jo="__angularfire_symbol__remoteConfigIsSupported",lu="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function uc(w,T,j){if(T){if(1===T.length)return T[0];const be=T.filter(rt=>rt.app===j);if(1===be.length)return be[0]}return j.container.getProvider(w).getImmediate({optional:!0})}globalThis[yo]||(globalThis[yo]=Hi().then(w=>globalThis[ao]=w).catch(()=>globalThis[ao]=!1)),globalThis[Ka]||(globalThis[Ka]=Mu().then(w=>globalThis[lu]=w).catch(()=>globalThis[lu]=!1)),globalThis[Jo]||(globalThis[Jo]=hi().then(w=>globalThis[ca]=w).catch(()=>globalThis[ca]=!1));const hu=(w,T)=>{const j=T?[T]:(0,F.C6)(),re=[];return j.forEach(ge=>{ge.container.getProvider(w).instances.forEach(rt=>{re.includes(rt)||re.push(rt)})}),re};function fu(){}class cc{constructor(T,j=ku){this.zone=T,this.delegate=j}now(){return this.delegate.now()}schedule(T,j,re){const ge=this.zone;return this.delegate.schedule(function(rt){ge.runGuarded(()=>{T.apply(this,[rt])})},j,re)}}class Vu{constructor(T){this.zone=T,this.task=null}call(T,j){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fu,{},fu,fu)),j.pipe((0,Uc.b)({next:re,complete:re,error:re})).subscribe(T).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let td=(()=>{class w{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new cc(Zone.current)),this.insideAngular=j.run(()=>new cc(Zone.current,ac.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(j){return new(j||w)(p.LFG(p.R0b))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function la(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function lc(w){return la(),function Zr(w){return function(j){return(j=j.lift(new Vu(w.ngZone))).pipe((0,Yo.R)(w.outsideAngular),(0,Qo.Q)(w.insideAngular))}}(la())(w)}},1389:(Nt,ke,R)=>{R.d(ke,{$:()=>P,A:()=>ie,D:()=>Ze,I:()=>Br,J:()=>Xr,L:()=>di,N:()=>Fe,P:()=>As,Q:()=>ta,R:()=>_,U:()=>ji,V:()=>hi,W:()=>ho,X:()=>cs,Y:()=>ya,Z:()=>Uo,_:()=>An,a:()=>oa,a0:()=>q,a1:()=>Xt,a2:()=>mi,a3:()=>Va,a4:()=>$o,a5:()=>Go,a6:()=>Fi,a7:()=>_a,a8:()=>zo,a9:()=>So,aA:()=>Te,aB:()=>ca,aC:()=>H,aD:()=>it,aE:()=>Yo,aF:()=>Vc,aG:()=>oi,aH:()=>br,aL:()=>Ko,aO:()=>ki,aa:()=>xi,ab:()=>Ua,ac:()=>na,ad:()=>_r,ae:()=>Mo,af:()=>Ea,ai:()=>ia,aj:()=>$i,ak:()=>Di,an:()=>Us,ao:()=>x,aq:()=>fs,ar:()=>Bt,as:()=>Yt,at:()=>se,au:()=>st,av:()=>fe,aw:()=>gs,ax:()=>du,ay:()=>ue,az:()=>et,b:()=>tc,c:()=>Ss,d:()=>Fc,e:()=>Vi,f:()=>oc,g:()=>Ma,h:()=>cu,i:()=>rc,j:()=>ac,k:()=>uo,l:()=>z,m:()=>Rf,p:()=>te,r:()=>pe,s:()=>A,u:()=>rn});var p=R(5861),F=R(2090),B=R(6881),le=R(7582),he=R(1877),Ee=R(4859);const te={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ze=function ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ye=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new he.Yd("@firebase/auth");function ft(v,...d){Oe.logLevel<=he.in.ERROR&&Oe.error(`Auth (${B.SDK_VERSION}): ${v}`,...d)}function fe(v,...d){throw ot(v,...d)}function et(v,...d){return ot(v,...d)}function Xe(v,d,g){const I=Object.assign(Object.assign({},Ye()),{[d]:g});return new F.LL("auth","Firebase",I).create(d,{appName:v.name})}function mt(v,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&fe(v,"argument-error"),Xe(v,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(v,...d){if("string"!=typeof v){const g=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return Tt.create(v,...d)}function Te(v,d,...g){if(!v)throw ot(d,...g)}function St(v){const d="INTERNAL ASSERTION FAILED: "+v;throw ft(d),new Error(d)}function Yt(v,d){v||St(d)}function It(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Gt(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Le{constructor(d,g){this.shortDelay=d,this.longDelay=g,Yt(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ar(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ze(v,d){Yt(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class Be{static initialize(d,g,I){this.fetchImpl=d,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void St("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void St("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void St("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ct=new Le(3e4,6e4);function yt(v,d){return v.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:v.tenantId}):d}function ht(v,d,g,I){return $t.apply(this,arguments)}function $t(){return($t=(0,p.Z)(function*(v,d,g,I,$={}){return Mt(v,$,(0,p.Z)(function*(){let J={},xe={};I&&("GET"===d?xe=I:J={body:JSON.stringify(I)});const nt=(0,F.xO)(Object.assign({key:v.config.apiKey},xe)).slice(1),Lt=yield v._getAdditionalHeaders();return Lt["Content-Type"]="application/json",v.languageCode&&(Lt["X-Firebase-Locale"]=v.languageCode),Be.fetch()(Nn(v,v.config.apiHost,g,nt),Object.assign({method:d,headers:Lt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function Mt(v,d,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,p.Z)(function*(v,d,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},qe),d);try{const $=new ir(v),J=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const xe=yield J.json();if("needConfirmation"in xe)throw Wt(v,"account-exists-with-different-credential",xe);if(J.ok&&!("errorMessage"in xe))return xe;{const nt=J.ok?xe.errorMessage:xe.error.message,[Lt,Qt]=nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Lt)throw Wt(v,"credential-already-in-use",xe);if("EMAIL_EXISTS"===Lt)throw Wt(v,"email-already-in-use",xe);if("USER_DISABLED"===Lt)throw Wt(v,"user-disabled",xe);const Cn=I[Lt]||Lt.toLowerCase().replace(/[_\s]+/g,"-");if(Qt)throw Xe(v,Cn,Qt);fe(v,Cn)}}catch($){if($ instanceof F.ZR)throw $;fe(v,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function tn(v,d,g,I){return hn.apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(v,d,g,I,$={}){const J=yield ht(v,d,g,I,$);return"mfaPendingCredential"in J&&fe(v,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function Nn(v,d,g,I){const $=`${d}${g}?${I}`;return v.config.emulator?ze(v.config,$):`${v.config.apiScheme}://${$}`}class ir{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(et(this.auth,"network-request-failed")),ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wt(v,d,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const $=et(v,d,I);return $.customData._tokenResponse=g,$}function Mn(){return(Mn=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Wn(v,d){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Pr(v,d){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Tn(v){if(v)try{const d=new Date(Number(v));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function zr(){return(zr=(0,p.Z)(function*(v,d=!1){const g=(0,F.m9)(v),I=yield g.getIdToken(d),$=Hn(I);Te($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const J="object"==typeof $.firebase?$.firebase:void 0,xe=J?.sign_in_provider;return{claims:$,token:I,authTime:Tn(Ln($.auth_time)),issuedAtTime:Tn(Ln($.iat)),expirationTime:Tn(Ln($.exp)),signInProvider:xe||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function Ln(v){return 1e3*Number(v)}function Hn(v){const[d,g,I]=v.split(".");if(void 0===d||void 0===g||void 0===I)return ft("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,F.tV)(g);return $?JSON.parse($):(ft("Failed to decode base64 JWT payload"),null)}catch($){return ft("Caught error parsing JWT payload as JSON",$?.toString()),null}}function wn(v,d){return zt.apply(this,arguments)}function zt(){return(zt=(0,p.Z)(function*(v,d,g=!1){if(g)return d;try{return yield d}catch(I){throw I instanceof F.ZR&&on(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function on({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class xn{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),I)}iteration(){var d=this;return(0,p.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&d.schedule(!0))}d.schedule()})()}}class gr{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tn(this.lastLoginAt),this.creationTime=Tn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(v){return ur.apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(v){var d;const g=v.auth,I=yield v.getIdToken(),$=yield wn(v,Pr(g,{idToken:I}));Te($?.users.length,g,"internal-error");const J=$.users[0];v._notifyReloadListener(J);const xe=null!==(d=J.providerUserInfo)&&void 0!==d&&d.length?vr(J.providerUserInfo):[],nt=fn(v.providerData,xe),Cn=!!v.isAnonymous&&!(v.email&&J.passwordHash||nt?.length),pr={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:nt,metadata:new gr(J.createdAt,J.lastLoginAt),isAnonymous:Cn};Object.assign(v,pr)})).apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(v){const d=(0,F.m9)(v);yield Jn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function fn(v,d){return[...v.filter(I=>!d.some($=>$.providerId===I.providerId)),...d]}function vr(v){return v.map(d=>{var{providerId:g}=d,I=(0,le._T)(d,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function mn(){return(mn=(0,p.Z)(function*(v,d){const g=yield Mt(v,{},(0,p.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:$,apiKey:J}=v.config,xe=Nn(v,$,"/v1/token",`key=${J}`),nt=yield v._getAdditionalHeaders();return nt["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(xe,{method:"POST",headers:nt,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class yn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Te(d.idToken,"internal-error"),Te(typeof d.idToken<"u","internal-error"),Te(typeof d.refreshToken<"u","internal-error");const g="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Pn(v){const d=Hn(v);return Te(d,"internal-error"),Te(typeof d.exp<"u","internal-error"),Te(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var I=this;return(0,p.Z)(function*(){return Te(!I.accessToken||I.refreshToken,d,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var I=this;return(0,p.Z)(function*(){const{accessToken:$,refreshToken:J,expiresIn:xe}=yield function Ft(v,d){return mn.apply(this,arguments)}(d,g);I.updateTokensAndExpiration($,J,Number(xe))})()}updateTokensAndExpiration(d,g,I){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,g){const{refreshToken:I,accessToken:$,expirationTime:J}=g,xe=new yn;return I&&(Te("string"==typeof I,"internal-error",{appName:d}),xe.refreshToken=I),$&&(Te("string"==typeof $,"internal-error",{appName:d}),xe.accessToken=$),J&&(Te("number"==typeof J,"internal-error",{appName:d}),xe.expirationTime=J),xe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new yn,this.toJSON())}_performRefresh(){return St("not implemented")}}function Ne(v,d){Te("string"==typeof v||typeof v>"u","internal-error",{appName:d})}class vt{constructor(d){var{uid:g,auth:I,stsTokenManager:$}=d,J=(0,le._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new gr(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,p.Z)(function*(){const I=yield wn(g,g.stsTokenManager.getToken(g.auth,d));return Te(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(d){return function sr(v){return zr.apply(this,arguments)}(this,d)}reload(){return function nn(v){return or.apply(this,arguments)}(this)}_assign(d){this!==d&&(Te(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const g=new vt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(d){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var I=this;return(0,p.Z)(function*(){let $=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),$=!0),g&&(yield Jn(I)),yield I.auth._persistUserIfCurrent(I),$&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,p.Z)(function*(){const g=yield d.getIdToken();return yield wn(d,function cn(v,d){return Mn.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var I,$,J,xe,nt,Lt,Qt,Cn;const pr=null!==(I=g.displayName)&&void 0!==I?I:void 0,vo=null!==($=g.email)&&void 0!==$?$:void 0,Hs=null!==(J=g.phoneNumber)&&void 0!==J?J:void 0,$c=null!==(xe=g.photoURL)&&void 0!==xe?xe:void 0,Ms=null!==(nt=g.tenantId)&&void 0!==nt?nt:void 0,Hc=null!==(Lt=g._redirectEventId)&&void 0!==Lt?Lt:void 0,mu=null!==(Qt=g.createdAt)&&void 0!==Qt?Qt:void 0,od=null!==(Cn=g.lastLoginAt)&&void 0!==Cn?Cn:void 0,{uid:Xo,emailVerified:Sl,isAnonymous:ju,providerData:Za,stsTokenManager:ad}=g;Te(Xo&&ad,d,"internal-error");const nr=yn.fromJSON(this.name,ad);Te("string"==typeof Xo,d,"internal-error"),Ne(pr,d.name),Ne(vo,d.name),Te("boolean"==typeof Sl,d,"internal-error"),Te("boolean"==typeof ju,d,"internal-error"),Ne(Hs,d.name),Ne($c,d.name),Ne(Ms,d.name),Ne(Hc,d.name),Ne(mu,d.name),Ne(od,d.name);const ud=new vt({uid:Xo,auth:d,email:vo,emailVerified:Sl,displayName:pr,isAnonymous:ju,photoURL:$c,phoneNumber:Hs,tenantId:Ms,stsTokenManager:nr,createdAt:mu,lastLoginAt:od});return Za&&Array.isArray(Za)&&(ud.providerData=Za.map(dh=>Object.assign({},dh))),Hc&&(ud._redirectEventId=Hc),ud}static _fromIdTokenResponse(d,g,I=!1){return(0,p.Z)(function*(){const $=new yn;$.updateFromServerResponse(g);const J=new vt({uid:g.localId,auth:d,stsTokenManager:$,isAnonymous:I});return yield Jn(J),J})()}}const me=new Map;function H(v){Yt(v instanceof Function,"Expected a class definition");let d=me.get(v);return d?(Yt(d instanceof v,"Instance stored in cache mismatched with class"),d):(d=new v,me.set(v,d),d)}const Fe=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,I){var $=this;return(0,p.Z)(function*(){$.storage[g]=I})()}_get(g){var I=this;return(0,p.Z)(function*(){const $=I.storage[g];return void 0===$?null:$})()}_remove(g){var I=this;return(0,p.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function it(v,d,g){return`firebase:${v}:${d}:${g}`}class ae{constructor(d,g,I){this.persistence=d,this.auth=g,this.userKey=I;const{config:$,name:J}=this.auth;this.fullUserKey=it(this.userKey,$.apiKey,J),this.fullPersistenceKey=it("persistence",$.apiKey,J),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,p.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?vt._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,p.Z)(function*(){if(g.persistence===d)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,I="authUser"){return(0,p.Z)(function*(){if(!g.length)return new ae(H(Fe),d,I);const $=(yield Promise.all(g.map(function(){var Qt=(0,p.Z)(function*(Cn){if(yield Cn._isAvailable())return Cn});return function(Cn){return Qt.apply(this,arguments)}}()))).filter(Qt=>Qt);let J=$[0]||H(Fe);const xe=it(I,d.config.apiKey,d.name);let nt=null;for(const Qt of g)try{const Cn=yield Qt._get(xe);if(Cn){const pr=vt._fromJSON(d,Cn);Qt!==J&&(nt=pr),J=Qt;break}}catch{}const Lt=$.filter(Qt=>Qt._shouldAllowMigration);return J._shouldAllowMigration&&Lt.length?(J=Lt[0],nt&&(yield J._set(xe,nt.toJSON())),yield Promise.all(g.map(function(){var Qt=(0,p.Z)(function*(Cn){if(Cn!==J)try{yield Cn._remove(xe)}catch{}});return function(Cn){return Qt.apply(this,arguments)}}())),new ae(J,d,I)):new ae(J,d,I)})()}}function ce(v){const d=v.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(De(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Y(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Ot(d))return"Blackberry";if(Jt(d))return"Webos";if(K(d))return"Safari";if((d.includes("chrome/")||G(d))&&!d.includes("edge/"))return"Chrome";if(st(d))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Y(v=(0,F.z$)()){return/firefox\//i.test(v)}function K(v=(0,F.z$)()){const d=v.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function G(v=(0,F.z$)()){return/crios\//i.test(v)}function De(v=(0,F.z$)()){return/iemobile/i.test(v)}function st(v=(0,F.z$)()){return/android/i.test(v)}function Ot(v=(0,F.z$)()){return/blackberry/i.test(v)}function Jt(v=(0,F.z$)()){return/webos/i.test(v)}function se(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ue(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function je(v=(0,F.z$)()){return se(v)||st(v)||Jt(v)||Ot(v)||/windows phone/i.test(v)||De(v)}function ln(v,d=[]){let g;switch(v){case"Browser":g=ce((0,F.z$)());break;case"Worker":g=`${ce((0,F.z$)())}-${v}`;break;default:g=v}const I=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${B.SDK_VERSION}/${I}`}function Re(){return(Re=(0,p.Z)(function*(v){return(yield ht(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Et(v,d){return pt.apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(v,d){return ht(v,"GET","/v2/recaptchaConfig",yt(v,d))})).apply(this,arguments)}function vn(v){return void 0!==v&&void 0!==v.getResponse}function On(v){return void 0!==v&&void 0!==v.enterprise}class Gn{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function kn(v){return new Promise((d,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=d,I.onerror=$=>{const J=et("internal-error");J.customData=$,g(J)},I.type="text/javascript",I.charset="UTF-8",function Cr(){var v,d;return null!==(d=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==d?d:document}().appendChild(I)})}function xr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Ns{constructor(d){this.type="recaptcha-enterprise",this.auth=br(d)}verify(d="verify",g=!1){var I=this;return(0,p.Z)(function*(){function J(){return J=(0,p.Z)(function*(nt){if(!g){if(null==nt.tenantId&&null!=nt._agentRecaptchaConfig)return nt._agentRecaptchaConfig.siteKey;if(null!=nt.tenantId&&void 0!==nt._tenantRecaptchaConfigs[nt.tenantId])return nt._tenantRecaptchaConfigs[nt.tenantId].siteKey}return new Promise(function(){var Lt=(0,p.Z)(function*(Qt,Cn){Et(nt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pr=>{if(void 0!==pr.recaptchaKey){const vo=new Gn(pr);return null==nt.tenantId?nt._agentRecaptchaConfig=vo:nt._tenantRecaptchaConfigs[nt.tenantId]=vo,Qt(vo.siteKey)}Cn(new Error("recaptcha Enterprise site key undefined"))}).catch(pr=>{Cn(pr)})});return function(Qt,Cn){return Lt.apply(this,arguments)}}())}),J.apply(this,arguments)}function xe(nt,Lt,Qt){const Cn=window.grecaptcha;On(Cn)?Cn.enterprise.ready(()=>{Cn.enterprise.execute(nt,{action:d}).then(pr=>{Lt(pr)}).catch(()=>{Lt("NO_RECAPTCHA")})}):Qt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((nt,Lt)=>{(function $(nt){return J.apply(this,arguments)})(I.auth).then(Qt=>{if(!g&&On(window.grecaptcha))xe(Qt,nt,Lt);else{if(typeof window>"u")return void Lt(new Error("RecaptchaVerifier is only supported in browser"));kn("https://www.google.com/recaptcha/enterprise.js?render="+Qt).then(()=>{xe(Qt,nt,Lt)}).catch(Cn=>{Lt(Cn)})}}).catch(Qt=>{Lt(Qt)})})})()}}function Kn(v,d,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(v,d,g,I=!1){const $=new Ns(v);let J;try{J=yield $.verify(g)}catch{J=yield $.verify(g,!0)}const xe=Object.assign({},d);return Object.assign(xe,I?{captchaResp:J}:{captchaResponse:J}),Object.assign(xe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(xe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),xe})).apply(this,arguments)}class ks{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const I=J=>new Promise((xe,nt)=>{try{xe(d(J))}catch(Lt){nt(Lt)}});I.onAbort=g,this.queue.push(I);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===d)return;const I=[];try{for(const $ of g.queue)yield $(d),$.onAbort&&I.push($.onAbort)}catch($){I.reverse();for(const J of I)try{J()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class Ni{constructor(d,g,I,$){this.app=d,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(d,g){var I=this;return g&&(this._popupRedirectResolver=H(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var $,J;if(!I._deleted&&(I.persistenceManager=yield ae.create(I,d),!I._deleted)){if(null!==($=I._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(J=I.currentUser)||void 0===J?void 0:J.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,p.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,p.Z)(function*(){var I;const $=yield g.assertedPersistence.getCurrentUser();let J=$,xe=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const nt=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,Lt=J?._redirectEventId,Qt=yield g.tryRedirectSignIn(d);(!nt||nt===Lt)&&Qt?.user&&(J=Qt.user,xe=!0)}if(!J)return g.directlySetCurrentUser(null);if(!J._redirectEventId){if(xe)try{yield g.beforeStateQueue.runMiddleware(J)}catch(nt){J=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(nt))}return J?g.reloadAndSetCurrentUserOrClear(J):g.directlySetCurrentUser(null)}return Te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===J._redirectEventId?g.directlySetCurrentUser(J):g.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(d){var g=this;return(0,p.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,p.Z)(function*(){try{yield Jn(d)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ve(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var d=this;return(0,p.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,p.Z)(function*(){const I=d?(0,F.m9)(d):null;return I&&Te(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(d,g=!1){var I=this;return(0,p.Z)(function*(){if(!I._deleted)return d&&Te(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,p.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,p.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(H(d))}))}initializeRecaptchaConfig(){var d=this;return(0,p.Z)(function*(){const g=yield Et(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Gn(g);null==d.tenantId?d._agentRecaptchaConfig=I:d._tenantRecaptchaConfigs[d.tenantId]=I,I.emailPasswordEnabled&&new Ns(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new F.LL("auth","Firebase",d())}onAuthStateChanged(d,g,I){return this.registerStateListener(this.authStateSubscription,d,g,I)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,I){return this.registerStateListener(this.idTokenSubscription,d,g,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var I=this;return(0,p.Z)(function*(){const $=yield I.getOrInitRedirectPersistenceManager(g);return null===d?$.removeCurrentUser():$.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const I=d&&H(d)||g._popupRedirectResolver;Te(I,g,"argument-error"),g.redirectPersistenceManager=yield ae.create(g,[H(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,p.Z)(function*(){var I,$;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===d?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,p.Z)(function*(){if(d===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,I,$){if(this._deleted)return()=>{};const J="function"==typeof g?g:g.next.bind(g),xe=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(xe,this,"internal-error"),xe.then(()=>J(this.currentUser)),"function"==typeof g?d.addObserver(g,I,$):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==d&&g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh(),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ln(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,p.Z)(function*(){var g;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const $=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();$&&(I["X-Firebase-Client"]=$);const J=yield d._getAppCheckToken();return J&&(I["X-Firebase-AppCheck"]=J),I})()}_getAppCheckToken(){var d=this;return(0,p.Z)(function*(){var g;const I=yield null===(g=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function bt(v,...d){Oe.logLevel<=he.in.WARN&&Oe.warn(`Auth (${B.SDK_VERSION}): ${v}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function br(v){return(0,F.m9)(v)}class Ki{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Br(v,d,g){const I=br(v);Te(I._canInitEmulator,I,"emulator-config-failed"),Te(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const $=!!g?.disableWarnings,J=ss(d),{host:xe,port:nt}=function qr(v){const d=ss(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(d.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(I);if($){const J=$[1];return{host:J,port:jr(I.substr(J.length+1))}}{const[J,xe]=I.split(":");return{host:J,port:jr(xe)}}}(d);I.config.emulator={url:`${J}//${xe}${null===nt?"":`:${nt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:xe,port:nt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Ks(){function v(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ss(v){const d=v.indexOf(":");return d<0?"":v.substr(0,d+1)}function jr(v){if(!v)return null;const d=Number(v);return isNaN(d)?null:d}class Xr{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return St("not implemented")}_getIdTokenResponse(d){return St("not implemented")}_linkToIdToken(d,g){return St("not implemented")}_getReauthenticationResolver(d){return St("not implemented")}}function os(v,d){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:resetPassword",yt(v,d))})).apply(this,arguments)}function Bi(v,d){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function wo(v,d){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:update",yt(v,d))})).apply(this,arguments)}function ma(v,d){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithPassword",yt(v,d))})).apply(this,arguments)}function Io(v,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:sendOobCode",yt(v,d))})).apply(this,arguments)}function co(v,d){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function Ie(v,d){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function lt(v,d){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function In(v,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(v,d){return Io(v,d)})).apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithEmailLink",yt(v,d))})).apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithEmailLink",yt(v,d))})).apply(this,arguments)}class pi extends Xr{constructor(d,g,I,$=null){super("password",I),this._email=d,this._password=g,this._tenantId=$}static _fromEmailAndPassword(d,g){return new pi(d,g,"password")}static _fromEmailAndCode(d,g,I=null){return new pi(d,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,p.Z)(function*(){var I;switch(g.signInMethod){case"password":const $={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=d._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const J=yield Kn(d,$,"signInWithPassword");return ma(d,J)}return ma(d,$).catch(function(){var J=(0,p.Z)(function*(xe){if("auth/missing-recaptcha-token"===xe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const nt=yield Kn(d,$,"signInWithPassword");return ma(d,nt)}return Promise.reject(xe)});return function(xe){return J.apply(this,arguments)}}());case"emailLink":return function Zn(v,d){return Rn.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:fe(d,"internal-error")}})()}_linkToIdToken(d,g){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return Bi(d,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ei(v,d){return ci.apply(this,arguments)}(d,{idToken:g,email:I._email,oobCode:I._password});default:fe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function rr(v,d){return ys.apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithIdp",yt(v,d))})).apply(this,arguments)}class di extends Xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new di(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):fe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$}=g,J=(0,le._T)(g,["providerId","signInMethod"]);if(!I||!$)return null;const xe=new di(I,$);return xe.idToken=J.idToken||void 0,xe.accessToken=J.accessToken||void 0,xe.secret=J.secret,xe.nonce=J.nonce,xe.pendingToken=J.pendingToken||null,xe}_getIdTokenResponse(d){return rr(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,rr(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,rr(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,F.xO)(g)}return d}}function ea(v,d){return as.apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:sendVerificationCode",yt(v,d))})).apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithPhoneNumber",yt(v,d))})).apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(v,d){const g=yield tn(v,"POST","/v1/accounts:signInWithPhoneNumber",yt(v,d));if(g.temporaryProof)throw Wt(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ls={USER_NOT_FOUND:"user-not-found"};function Zs(){return(Zs=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithPhoneNumber",yt(v,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ls)})).apply(this,arguments)}class kr extends Xr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new kr({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new kr({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function Lo(v,d){return us.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function Vo(v,d){return Co.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function qi(v,d){return Zs.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:I,verificationCode:$}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:I,code:$}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}=d;return I||g||$||J?new kr({verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}):null}}class _s{constructor(d){var g,I,$,J,xe,nt;const Lt=(0,F.zd)((0,F.pd)(d)),Qt=null!==(g=Lt.apiKey)&&void 0!==g?g:null,Cn=null!==(I=Lt.oobCode)&&void 0!==I?I:null,pr=function Zi(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Lt.mode)&&void 0!==$?$:null);Te(Qt&&Cn&&pr,"argument-error"),this.apiKey=Qt,this.operation=pr,this.code=Cn,this.continueUrl=null!==(J=Lt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(xe=Lt.languageCode)&&void 0!==xe?xe:null,this.tenantId=null!==(nt=Lt.tenantId)&&void 0!==nt?nt:null}static parseLink(d){const g=function vs(v){const d=(0,F.zd)((0,F.pd)(v)).link,g=d?(0,F.zd)((0,F.pd)(d)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||g||d||v}(d);try{return new _s(g)}catch{return null}}}let ta=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return pi._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const $=_s.parseLink(I);return Te($,"argument-error"),pi._fromEmailAndCode(g,$.code,$.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class mr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ys extends mr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class cs extends Ys{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return Te("providerId"in g&&"signInMethod"in g,"argument-error"),di._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Te(d.idToken||d.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return cs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return cs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:$,pendingToken:J,nonce:xe,providerId:nt}=d;if(!I&&!$&&!g&&!J||!nt)return null;try{return new cs(nt)._credential({idToken:g,accessToken:I,nonce:xe,pendingToken:J})}catch{return null}}}let ji=(()=>{class v extends Ys{constructor(){super("facebook.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),hi=(()=>{class v extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:$}=g;if(!I&&!$)return null;try{return v.credential(I,$)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ho=(()=>{class v extends Ys{constructor(){super("github.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ki extends Xr{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return rr(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,rr(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,rr(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$,pendingToken:J}=g;return I&&$&&J&&I===$?new ki(I,J):null}static _create(d,g){return new ki(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ya extends mr{constructor(d){Te(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return ya.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return ya.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=ki.fromJSON(d);return Te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:I}=d;if(!g||!I)return null;try{return ki._create(I,g)}catch{return null}}}let Uo=(()=>{class v extends Ys{constructor(){super("twitter.com")}static credential(g,I){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:$}=g;if(!I||!$)return null;try{return v.credential(I,$)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Qs(v,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signUp",yt(v,d))})).apply(this,arguments)}class Gr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,I,$=!1){return(0,p.Z)(function*(){const J=yield vt._fromIdTokenResponse(d,I,$),xe=Es(I);return new Gr({user:J,providerId:xe,_tokenResponse:I,operationType:g})})()}static _forOperation(d,g,I){return(0,p.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const $=Es(I);return new Gr({user:d,providerId:$,_tokenResponse:I,operationType:g})})()}}function Es(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function An(v){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(v){var d;const g=br(v);if(yield g._initializationPromise,null!==(d=g.currentUser)&&void 0!==d&&d.isAnonymous)return new Gr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Qs(g,{returnSecureToken:!0}),$=yield Gr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Vs extends F.ZR{constructor(d,g,I,$){var J;super(g.code,g.message),this.operationType=I,this.user=$,Object.setPrototypeOf(this,Vs.prototype),this.customData={appName:d.name,tenantId:null!==(J=d.tenantId)&&void 0!==J?J:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,g,I,$){return new Vs(d,g,I,$)}}function Ei(v,d,g,I){return("reauthenticate"===d?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?Vs._fromErrorAndOperation(v,J,d,I):J})}function Fr(v){return new Set(v.map(({providerId:d})=>d).filter(d=>!!d))}function Us(v,d){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v);yield gt(!0,g,d);const{providerUserInfo:I}=yield Wn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),$=Fr(I||[]);return g.providerData=g.providerData.filter(J=>$.has(J.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ls(v,d){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,p.Z)(function*(v,d,g=!1){const I=yield wn(v,d._linkToIdToken(v.auth,yield v.getIdToken()),g);return Gr._forOperation(v,"link",I)})).apply(this,arguments)}function gt(v,d,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(v,d,g){yield Jn(d);const $=!1===v?"provider-already-linked":"no-such-provider";Te(Fr(d.providerData).has(g)===v,d.auth,$)})).apply(this,arguments)}function jo(v,d){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(v,d,g=!1){const{auth:I}=v,$="reauthenticate";try{const J=yield wn(v,Ei(I,$,d,v),g);Te(J.idToken,I,"internal-error");const xe=Hn(J.idToken);Te(xe,I,"internal-error");const{sub:nt}=xe;return Te(v.uid===nt,I,"user-mismatch"),Gr._forOperation(v,$,J)}catch(J){throw"auth/user-not-found"===J?.code&&fe(I,"user-mismatch"),J}})).apply(this,arguments)}function Rr(v,d){return k.apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(v,d,g=!1){const I="signIn",$=yield Ei(v,I,d),J=yield Gr._fromIdTokenResponse(v,I,$);return g||(yield v._updateCurrentUser(J.user)),J})).apply(this,arguments)}function P(v,d){return M.apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(v,d){return Rr(br(v),d)})).apply(this,arguments)}function q(v,d){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v);return yield gt(!1,g,d.providerId),ls(g,d)})).apply(this,arguments)}function Xt(v,d){return zn.apply(this,arguments)}function zn(){return(zn=(0,p.Z)(function*(v,d){return jo((0,F.m9)(v),d)})).apply(this,arguments)}function Xs(v,d){return ws.apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(v,d){return tn(v,"POST","/v1/accounts:signInWithCustomToken",yt(v,d))})).apply(this,arguments)}function mi(v,d){return wi.apply(this,arguments)}function wi(){return(wi=(0,p.Z)(function*(v,d){const g=br(v),I=yield Xs(g,{token:d,returnSecureToken:!0}),$=yield Gr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class Qi{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?Bs._fromServerResponse(d,g):"totpInfo"in g?ni._fromServerResponse(d,g):fe(d,"internal-error")}}class Bs extends Qi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new Bs(g)}}class ni extends Qi{constructor(d){super("totp",d)}static _fromServerResponse(d,g){return new ni(g)}}function Is(v,d,g){var I;Te((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),Te(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Te(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(Te(g.android.packageName.length>0,v,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function Va(v,d,g){return va.apply(this,arguments)}function va(){return va=(0,p.Z)(function*(v,d,g){var I;const $=br(v),J={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const xe=yield Kn($,J,"getOobCode",!0);g&&Is($,xe,g),yield Ie($,xe)}else g&&Is($,J,g),yield Ie($,J).catch(function(){var xe=(0,p.Z)(function*(nt){if("auth/missing-recaptcha-token"!==nt.code)return Promise.reject(nt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Lt=yield Kn($,J,"getOobCode",!0);g&&Is($,Lt,g),yield Ie($,Lt)}});return function(nt){return xe.apply(this,arguments)}}())}),va.apply(this,arguments)}function $o(v,d,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,p.Z)(function*(v,d,g){yield os((0,F.m9)(v),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Go(v,d){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(v,d){yield wo((0,F.m9)(v),{oobCode:d})})).apply(this,arguments)}function Fi(v,d){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v),I=yield os(g,{oobCode:d}),$=I.requestType;switch(Te($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(I.mfaInfo,g,"internal-error");default:Te(I.email,g,"internal-error")}let J=null;return I.mfaInfo&&(J=Qi._fromServerResponse(br(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:J},operation:$}})).apply(this,arguments)}function _a(v,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(v,d){const{data:g}=yield Fi((0,F.m9)(v),d);return g.email})).apply(this,arguments)}function zo(v,d,g){return fo.apply(this,arguments)}function fo(){return fo=(0,p.Z)(function*(v,d,g){var I;const $=br(v),J={returnSecureToken:!0,email:d,password:g,clientType:"CLIENT_TYPE_WEB"};let xe;if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Qt=yield Kn($,J,"signUpPassword");xe=Qs($,Qt)}else xe=Qs($,J).catch(function(){var Qt=(0,p.Z)(function*(Cn){if("auth/missing-recaptcha-token"===Cn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const pr=yield Kn($,J,"signUpPassword");return Qs($,pr)}return Promise.reject(Cn)});return function(Cn){return Qt.apply(this,arguments)}}());const nt=yield xe.catch(Qt=>Promise.reject(Qt)),Lt=yield Gr._fromIdTokenResponse($,"signIn",nt);return yield $._updateCurrentUser(Lt.user),Lt}),fo.apply(this,arguments)}function So(v,d,g){return P((0,F.m9)(v),ta.credential(d,g))}function xi(v,d,g){return ds.apply(this,arguments)}function ds(){return ds=(0,p.Z)(function*(v,d,g){var I;const $=br(v),J={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function xe(nt,Lt){Te(Lt.handleCodeInApp,$,"argument-error"),Lt&&Is($,nt,Lt)}if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const nt=yield Kn($,J,"getOobCode",!0);xe(nt,g),yield lt($,nt)}else xe(J,g),yield lt($,J).catch(function(){var nt=(0,p.Z)(function*(Lt){if("auth/missing-recaptcha-token"!==Lt.code)return Promise.reject(Lt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Qt=yield Kn($,J,"getOobCode",!0);xe(Qt,g),yield lt($,Qt)}});return function(Lt){return nt.apply(this,arguments)}}())}),ds.apply(this,arguments)}function Ua(v,d){return"EMAIL_SIGNIN"===_s.parseLink(d)?.operation}function na(v,d,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v),$=ta.credentialWithLink(d,g||It());return Te($._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),P(I,$)})).apply(this,arguments)}function Ii(v,d){return yr.apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:createAuthUri",yt(v,d))})).apply(this,arguments)}function _r(v,d){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(v,d){const I={identifier:d,continueUri:Gt()?It():"http://localhost"},{signinMethods:$}=yield Ii((0,F.m9)(v),I);return $||[]})).apply(this,arguments)}function Mo(v,d){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(v,d){const g=(0,F.m9)(v),$={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};d&&Is(g.auth,$,d);const{email:J}=yield co(g.auth,$);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ea(v,d,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:d};g&&Is(I.auth,J,g);const{email:xe}=yield In(I.auth,J);xe!==v.email&&(yield v.reload())})).apply(this,arguments)}function Cs(v,d){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(v,d){return ht(v,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ia(v,d){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(v,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const I=(0,F.m9)(v),J={idToken:yield I.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},xe=yield wn(I,Cs(I.auth,J));I.displayName=xe.displayName||null,I.photoURL=xe.photoUrl||null;const nt=I.providerData.find(({providerId:Lt})=>"password"===Lt);nt&&(nt.displayName=I.displayName,nt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(xe)})).apply(this,arguments)}function $i(v,d){return Pi((0,F.m9)(v),d,null)}function Di(v,d){return Pi((0,F.m9)(v),null,d)}function Pi(v,d,g){return no.apply(this,arguments)}function no(){return(no=(0,p.Z)(function*(v,d,g){const{auth:I}=v,J={idToken:yield v.getIdToken(),returnSecureToken:!0};d&&(J.email=d),g&&(J.password=g);const xe=yield wn(v,Bi(I,J));yield v._updateTokensIfNecessary(xe,!0)})).apply(this,arguments)}class ro{constructor(d,g,I={}){this.isNewUser=d,this.providerId=g,this.profile=I}}class po extends ro{constructor(d,g,I,$){super(d,g,I),this.username=$}}class xo extends ro{constructor(d,g){super(d,"facebook.com",g)}}class ru extends po{constructor(d,g){super(d,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class b extends ro{constructor(d,g){super(d,"google.com",g)}}class V extends po{constructor(d,g,I){super(d,"twitter.com",g,I)}}function x(v){const{user:d,_tokenResponse:g}=v;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Wo(v){var d,g;if(!v)return null;const{providerId:I}=v,$=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},J=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const xe=null===(g=null===(d=Hn(v.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(xe)return new ro(J,"anonymous"!==xe&&"custom"!==xe?xe:null)}if(!I)return null;switch(I){case"facebook.com":return new xo(J,$);case"github.com":return new ru(J,$);case"google.com":return new b(J,$);case"twitter.com":return new V(J,$,v.screenName||null);case"custom":case"anonymous":return new ro(J,null);default:return new ro(J,I,$)}}(g)}class Vn{constructor(d,g,I){this.type=d,this.credential=g,this.auth=I}static _fromIdtoken(d,g){return new Vn("enroll",d,g)}static _fromMfaPendingCredential(d){return new Vn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,I;if(d?.multiFactorSession){if(null!==(g=d.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Vn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return Vn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Yr{constructor(d,g,I){this.session=d,this.hints=g,this.signInResolver=I}static _fromError(d,g){const I=br(d),$=g.customData._serverResponse,J=($.mfaInfo||[]).map(nt=>Qi._fromServerResponse(I,nt));Te($.mfaPendingCredential,I,"internal-error");const xe=Vn._fromMfaPendingCredential($.mfaPendingCredential);return new Yr(xe,J,function(){var nt=(0,p.Z)(function*(Lt){const Qt=yield Lt._process(I,xe);delete $.mfaInfo,delete $.mfaPendingCredential;const Cn=Object.assign(Object.assign({},$),{idToken:Qt.idToken,refreshToken:Qt.refreshToken});switch(g.operationType){case"signIn":const pr=yield Gr._fromIdTokenResponse(I,g.operationType,Cn);return yield I._updateCurrentUser(pr.user),pr;case"reauthenticate":return Te(g.user,I,"internal-error"),Gr._forOperation(g.user,g.operationType,Cn);default:fe(I,"internal-error")}});return function(Lt){return nt.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,p.Z)(function*(){return g.signInResolver(d)})()}}function fs(v,d){var g;const I=(0,F.m9)(v),$=d;return Te(d.customData.operationType,I,"argument-error"),Te(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Yr._fromError(I,$)}function wt(v,d){return ht(v,"POST","/v2/accounts/mfaEnrollment:start",yt(v,d))}class an{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>Qi._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new an(d)}getSession(){var d=this;return(0,p.Z)(function*(){return Vn._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,g){var I=this;return(0,p.Z)(function*(){const $=d,J=yield I.getSession(),xe=yield wn(I.user,$._process(I.user.auth,J,g));return yield I.user._updateTokensIfNecessary(xe),I.user.reload()})()}unenroll(d){var g=this;return(0,p.Z)(function*(){const I="string"==typeof d?d:d.uid,$=yield g.user.getIdToken();try{const J=yield wn(g.user,function Zt(v,d){return ht(v,"POST","/v2/accounts/mfaEnrollment:withdraw",yt(v,d))}(g.user.auth,{idToken:$,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:xe})=>xe!==I),yield g.user._updateTokensIfNecessary(J),yield g.user.reload()}catch(J){throw J}})()}}const sa=new WeakMap;function Bt(v){const d=(0,F.m9)(v);return sa.has(d)||sa.set(d,an._fromUser(d)),sa.get(d)}const We="__sak";class Dt{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(We,"1"),this.storage.removeItem(We),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const tc=(()=>{class v extends Dt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ri(){const v=(0,F.z$)();return K(v)||se(v)}()&&function Pt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=je(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const $=this.storage.getItem(I),J=this.localCache[I];$!==J&&g(I,J,$)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((nt,Lt,Qt)=>{this.notifyListeners(nt,Qt)});const $=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nt=this.storage.getItem($);if(g.newValue!==nt)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!I)return}const J=()=>{const nt=this.storage.getItem($);!I&&this.localCache[$]===nt||this.notifyListeners($,nt)},xe=this.storage.getItem($);!function Me(){return(0,F.w1)()&&10===document.documentMode}()||xe===g.newValue||g.newValue===g.oldValue?J():setTimeout(J,10)}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var $=()=>super._set,J=this;return(0,p.Z)(function*(){yield $().call(J,g,I),J.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,$=this;return(0,p.Z)(function*(){const J=yield I().call($,g);return $.localCache[g]=JSON.stringify(J),J})()}_remove(g){var I=()=>super._remove,$=this;return(0,p.Z)(function*(){yield I().call($,g),delete $.localCache[g]})()}}return v.type="LOCAL",v})(),oa=(()=>{class v extends Dt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let Nc=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(J=>J.isListeningto(g));if(I)return I;const $=new v(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,p.Z)(function*(){const $=g,{eventId:J,eventType:xe,data:nt}=$.data,Lt=I.handlersMap[xe];if(!Lt?.size)return;$.ports[0].postMessage({status:"ack",eventId:J,eventType:xe});const Qt=Array.from(Lt).map(function(){var pr=(0,p.Z)(function*(vo){return vo($.origin,nt)});return function(vo){return pr.apply(this,arguments)}}()),Cn=yield function Oc(v){return Promise.all(v.map(function(){var d=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return d.apply(this,arguments)}}()))}(Qt);$.ports[0].postMessage({status:"done",eventId:J,eventType:xe,response:Cn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ko(v="",d=10){let g="";for(let I=0;I<d;I++)g+=Math.floor(10*Math.random());return v+g}class ii{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,I=50){var $=this;return(0,p.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let xe,nt;return new Promise((Lt,Qt)=>{const Cn=Ko("",20);J.port1.start();const pr=setTimeout(()=>{Qt(new Error("unsupported_event"))},I);nt={messageChannel:J,onMessage(vo){const Hs=vo;if(Hs.data.eventId===Cn)switch(Hs.data.status){case"ack":clearTimeout(pr),xe=setTimeout(()=>{Qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(xe),Lt(Hs.data.response);break;default:clearTimeout(pr),clearTimeout(xe),Qt(new Error("invalid_response"))}}},$.handlers.add(nt),J.port1.addEventListener("message",nt.onMessage),$.target.postMessage({eventType:d,eventId:Cn,data:g},[J.port2])}).finally(()=>{nt&&$.removeMessageHandler(nt)})})()}}function yi(){return window}function bs(){return typeof yi().WorkerGlobalScope<"u"&&"function"==typeof yi().importScripts}function $r(){return($r=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Dn="firebaseLocalStorageDb",er="firebaseLocalStorage",jt="fbase_key";class Ji{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function qo(v,d){return v.transaction([er],d?"readwrite":"readonly").objectStore(er)}function Ar(){const v=indexedDB.open(Dn,1);return new Promise((d,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(er,{keyPath:jt})}catch($){g($)}}),v.addEventListener("success",(0,p.Z)(function*(){const I=v.result;I.objectStoreNames.contains(er)?d(I):(I.close(),yield function Ia(){const v=indexedDB.deleteDatabase(Dn);return new Ji(v).toPromise()}(),d(yield Ar()))}))})}function Ro(v,d,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,p.Z)(function*(v,d,g){const I=qo(v,!0).put({[jt]:d,value:g});return new Ji(I).toPromise()})).apply(this,arguments)}function Ca(){return(Ca=(0,p.Z)(function*(v,d){const g=qo(v,!1).get(d),I=yield new Ji(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ru(v,d){const g=qo(v,!0).delete(d);return new Ji(g).toPromise()}const rc=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Ar()),g.db})()}_withRetries(g){var I=this;return(0,p.Z)(function*(){let $=0;for(;;)try{const J=yield I._openDb();return yield g(J)}catch(J){if($++>3)throw J;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return bs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Nc._getInstance(function Ts(){return bs()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*($,J){return{keyProcessed:(yield g._poll()).includes(J.key)}});return function($,J){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*($,J){return["keyChanged"]});return function($,J){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var I,$;if(g.activeServiceWorker=yield function ja(){return $r.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ii(g.activeServiceWorker);const J=yield g.sender._send("ping",{},800);!J||(null===(I=J[0])||void 0===I?void 0:I.fulfilled)&&(null===($=J[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function pn(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ar();return yield Ro(g,We,"1"),yield Ru(g,We),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var $=this;return(0,p.Z)(function*(){return $._withPendingWrite((0,p.Z)(function*(){return yield $._withRetries(J=>Ro(J,g,I)),$.localCache[g]=I,$.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,p.Z)(function*(){const $=yield I._withRetries(J=>function xu(v,d){return Ca.apply(this,arguments)}(J,g));return I.localCache[g]=$,$})()}_remove(g){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries($=>Ru($,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const I=yield g._withRetries(xe=>{const nt=qo(xe,!1).getAll();return new Ji(nt).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const $=[],J=new Set;for(const{fbase_key:xe,value:nt}of I)J.add(xe),JSON.stringify(g.localCache[xe])!==JSON.stringify(nt)&&(g.notifyListeners(xe,nt),$.push(xe));for(const xe of Object.keys(g.localCache))g.localCache[xe]&&!J.has(xe)&&(g.notifyListeners(xe,null),$.push(xe));return $})()}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Zo(v,d){return ht(v,"POST","/v2/accounts/mfaSignIn:start",yt(v,d))}const Ga=1e12;class Ci{constructor(d){this.auth=d,this.counter=Ga,this._widgets=new Map}render(d,g){const I=this.counter;return this._widgets.set(I,new Li(d,this.auth.name,g||{})),this.counter++,I}reset(d){var g;const I=d||Ga;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(d){var g;return(null===(g=this._widgets.get(d||Ga))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,p.Z)(function*(){var I;return null===(I=g._widgets.get(d||Ga))||void 0===I||I.execute(),""})()}}class Li{constructor(d,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof d?document.getElementById(d):d;Te($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function iu(v){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $s=xr("rcb"),ba=new Le(3e4,6e4);class Pu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=yi().grecaptcha)||void 0===d||!d.render)}load(d,g=""){return Te(function kc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),d,"argument-error"),this.shouldResolveImmediately(g)&&vn(yi().grecaptcha)?Promise.resolve(yi().grecaptcha):new Promise((I,$)=>{const J=yi().setTimeout(()=>{$(et(d,"network-request-failed"))},ba.get());yi()[$s]=()=>{yi().clearTimeout(J),delete yi()[$s];const nt=yi().grecaptcha;if(!nt||!vn(nt))return void $(et(d,"internal-error"));const Lt=nt.render;nt.render=(Qt,Cn)=>{const pr=Lt(Qt,Cn);return this.counter++,pr},this.hostLanguage=g,I(nt)},kn(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:$s,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(J),$(et(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var g;return!(null===(g=yi().grecaptcha)||void 0===g||!g.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xi{load(d){return(0,p.Z)(function*(){return new Ci(d)})()}clearedOneInstance(){}}const za="recaptcha",aa={theme:"light",type:"image"};class _{constructor(d,g=Object.assign({},aa),I){this.parameters=g,this.type=za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=br(I),this.isInvisible="invisible"===this.parameters.size,Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof d?document.getElementById(d):d;Te($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xi:new Pu,this.validateStartingState()}verify(){var d=this;return(0,p.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(g)||new Promise(J=>{const xe=nt=>{!nt||(d.tokenChangeListeners.delete(xe),J(nt))};d.tokenChangeListeners.add(xe),d.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof d)d(g);else if("string"==typeof d){const I=yi()[d];"function"==typeof I&&I(g)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,p.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,p.Z)(function*(){Te(Gt()&&!bs(),d.auth,"internal-error"),yield function E(){let v=null;return new Promise(d=>{"complete"!==document.readyState?(v=()=>d(),window.addEventListener("load",v)):d()}).catch(d=>{throw v&&window.removeEventListener("load",v),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function Pe(v){return Re.apply(this,arguments)}(d.auth);Te(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class y{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=kr._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function A(v,d,g){return O.apply(this,arguments)}function O(){return(O=(0,p.Z)(function*(v,d,g){const I=br(v),$=yield Vt(I,d,(0,F.m9)(g));return new y($,J=>P(I,J))})).apply(this,arguments)}function z(v,d,g){return de.apply(this,arguments)}function de(){return(de=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);yield gt(!1,I,"phone");const $=yield Vt(I.auth,d,(0,F.m9)(g));return new y($,J=>q(I,J))})).apply(this,arguments)}function pe(v,d,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v),$=yield Vt(I.auth,d,(0,F.m9)(g));return new y($,J=>Xt(I,J))})).apply(this,arguments)}function Vt(v,d,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(v,d,g){var I;const $=yield g.verify();try{let J;if(Te("string"==typeof $,v,"argument-error"),Te(g.type===za,v,"argument-error"),J="string"==typeof d?{phoneNumber:d}:d,"session"in J){const xe=J.session;if("phoneNumber"in J)return Te("enroll"===xe.type,v,"internal-error"),(yield wt(v,{idToken:xe.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{Te("signin"===xe.type,v,"internal-error");const nt=(null===(I=J.multiFactorHint)||void 0===I?void 0:I.uid)||J.multiFactorUid;return Te(nt,v,"missing-multi-factor-info"),(yield Zo(v,{mfaPendingCredential:xe.credential,mfaEnrollmentId:nt,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:xe}=yield ea(v,{phoneNumber:J.phoneNumber,recaptchaToken:$});return xe}}finally{g._reset()}})).apply(this,arguments)}function rn(v,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,p.Z)(function*(v,d){yield ls((0,F.m9)(v),d)})).apply(this,arguments)}let As=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=br(g)}verifyPhoneNumber(g,I){return Vt(this.auth,g,(0,F.m9)(I))}static credential(g,I){return kr._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:$}=g;return I&&$?kr._fromTokenResponse(I,$):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function fi(v,d){return d?H(d):(Te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class oo extends Xr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return rr(d,this._buildIdpRequest())}_linkToIdToken(d,g){return rr(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return rr(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function Qr(v){return Rr(v.auth,new oo(v),v.bypassAuthState)}function Ou(v){const{auth:d,user:g}=v;return Te(g,d,"internal-error"),jo(g,new oo(v),v.bypassAuthState)}function Ta(v){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,p.Z)(function*(v){const{auth:d,user:g}=v;return Te(g,d,"internal-error"),ls(g,new oo(v),v.bypassAuthState)})).apply(this,arguments)}class ic{constructor(d,g,I,$,J=!1){this.auth=d,this.resolver=I,this.user=$,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,p.Z)(function*(I,$){d.pendingPromise={resolve:I,reject:$};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(J){d.reject(J)}});return function(I,$){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:$,postBody:J,tenantId:xe,error:nt,type:Lt}=d;if(nt)return void g.reject(nt);const Qt={auth:g.auth,requestUri:I,sessionId:$,tenantId:xe||void 0,postBody:J||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Lt)(Qt))}catch(Cn){g.reject(Cn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Qr;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return Ou;default:fe(this.auth,"internal-error")}}resolve(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ou=new Le(2e3,1e4);function Ss(v,d,g){return au.apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(v,d,g){const I=br(v);mt(v,d,mr);const $=fi(I,g);return new ua(I,"signInViaPopup",d,$).executeNotNull()})).apply(this,arguments)}function Vi(v,d,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);mt(I.auth,d,mr);const $=fi(I.auth,g);return new ua(I.auth,"reauthViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}function Fc(v,d,g){return sc.apply(this,arguments)}function sc(){return(sc=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);mt(I.auth,d,mr);const $=fi(I.auth,g);return new ua(I.auth,"linkViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}let ua=(()=>{class v extends ic{constructor(g,I,$,J,xe){super(g,I,J,xe),this.provider=$,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const I=yield g.execute();return Te(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,p.Z)(function*(){Yt(1===g.filter.length,"Popup operations only handle one event");const I=Ko();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(et(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,$;this.pollId=null!==($=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,ou.get())};g()}}return v.currentPopupAction=null,v})();const Sa=new Map;class Wa extends ic{constructor(d,g,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,p.Z)(function*(){let I=Sa.get(g.auth._key());if(!I){try{const J=(yield function Lc(v,d){return Ir.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;I=()=>Promise.resolve(J)}catch($){I=()=>Promise.reject($)}Sa.set(g.auth._key(),I)}return g.bypassAuthState||Sa.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(I,d);if("unknown"!==d.type){if(d.eventId){const $=yield I.auth._redirectUserForId(d.eventId);if($)return I.user=$,g().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Ir(){return(Ir=(0,p.Z)(function*(v,d){const g=es(d),I=Po(v);if(!(yield I._isAvailable()))return!1;const $="true"===(yield I._get(g));return yield I._remove(g),$})).apply(this,arguments)}function uu(v,d){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(v,d){return Po(v)._set(es(d),"true")})).apply(this,arguments)}function oi(){Sa.clear()}function Vc(v,d){Sa.set(v._key(),d)}function Po(v){return H(v._redirectPersistence)}function es(v){return it("pendingRedirect",v.config.apiKey,v.name)}function oc(v,d,g){return function Tl(v,d,g){return bi.apply(this,arguments)}(v,d,g)}function bi(){return(bi=(0,p.Z)(function*(v,d,g){const I=br(v);mt(v,d,mr),yield I._initializationPromise;const $=fi(I,g);return yield uu($,I),$._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function cu(v,d,g){return function mo(v,d,g){return ai.apply(this,arguments)}(v,d,g)}function ai(){return(ai=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);mt(I.auth,d,mr),yield I.auth._initializationPromise;const $=fi(I.auth,g);yield uu($,I.auth);const J=yield xa(I);return $._openRedirect(I.auth,d,"reauthViaRedirect",J)})).apply(this,arguments)}function Ma(v,d,g){return function ku(v,d,g){return Fu.apply(this,arguments)}(v,d,g)}function Fu(){return(Fu=(0,p.Z)(function*(v,d,g){const I=(0,F.m9)(v);mt(I.auth,d,mr),yield I.auth._initializationPromise;const $=fi(I.auth,g);yield gt(!1,I,d.providerId),yield uu($,I.auth);const J=yield xa(I);return $._openRedirect(I.auth,d,"linkViaRedirect",J)})).apply(this,arguments)}function ac(v,d){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,p.Z)(function*(v,d){return yield br(v)._initializationPromise,Yo(v,d,!1)})).apply(this,arguments)}function Yo(v,d){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(v,d,g=!1){const I=br(v),$=fi(I,d),xe=yield new Wa(I,$,g).execute();return xe&&!g&&(delete xe.user._redirectEventId,yield I._persistUserIfCurrent(xe.user),yield I._setRedirectUser(null,d)),xe})).apply(this,arguments)}function xa(v){return ao.apply(this,arguments)}function ao(){return(ao=(0,p.Z)(function*(v){const d=Ko(`${v.uid}:::`);return v._redirectEventId=d,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),d})).apply(this,arguments)}class ca{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(g=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ka(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lu(v);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var I;if(d.error&&!lu(d)){const $=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(et(this.auth,$))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const I=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jo(d))}saveEventToCache(d){this.cachedEventUids.add(Jo(d)),this.lastProcessedEventTime=Date.now()}}function Jo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(d=>d).join("-")}function lu({type:v,error:d}){return"unknown"===v&&"auth/no-auth-event"===d?.code}function du(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(v,d={}){return ht(v,"GET","/v1/projects",d)})).apply(this,arguments)}const Ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function hu(){return(hu=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:d}=yield du(v);for(const g of d)try{if(fu(g))return}catch{}fe(v,"unauthorized-domain")})).apply(this,arguments)}function fu(v){const d=It(),{protocol:g,hostname:I}=new URL(d);if(v.startsWith("chrome-extension://")){const xe=new URL(v);return""===xe.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&xe.hostname===I}if(!ed.test(g))return!1;if(Ra.test(v))return I===v;const $=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(I)}const cc=new Le(3e4,6e4);function Vu(){const v=yi().___jsl;if(v?.H)for(const d of Object.keys(v.H))if(v.H[d].r=v.H[d].r||[],v.H[d].L=v.H[d].L||[],v.H[d].r=[...v.H[d].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let la=null;function nd(v){return la=la||function td(v){return new Promise((d,g)=>{var I,$,J;function xe(){Vu(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Vu(),g(et(v,"network-request-failed"))},timeout:cc.get()})}if(null!==($=null===(I=yi().gapi)||void 0===I?void 0:I.iframes)&&void 0!==$&&$.Iframe)d(gapi.iframes.getContext());else{if(null===(J=yi().gapi)||void 0===J||!J.load){const nt=xr("iframefcb");return yi()[nt]=()=>{gapi.load?xe():g(et(v,"network-request-failed"))},kn(`https://apis.google.com/js/api.js?onload=${nt}`).catch(Lt=>g(Lt))}xe()}}).catch(d=>{throw la=null,d})}(v),la}const da=new Le(5e3,15e3),lc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(v){const d=v.config;Te(d.authDomain,v,"auth-domain-config-required");const g=d.emulator?ze(d,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:v.name,v:B.SDK_VERSION},$=Zr.get(v.config.apiHost);$&&(I.eid=$);const J=v._getFrameworks();return J.length&&(I.fw=J.join(",")),`${g}?${(0,F.xO)(I).slice(1)}`}function w(){return w=(0,p.Z)(function*(v){const d=yield nd(v),g=yi().gapi;return Te(g,v,"internal-error"),d.open({where:document.body,url:ns(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lc,dontclear:!0},I=>new Promise(function(){var $=(0,p.Z)(function*(J,xe){yield I.restyle({setHideOnLeave:!1});const nt=et(v,"network-request-failed"),Lt=yi().setTimeout(()=>{xe(nt)},da.get());function Qt(){yi().clearTimeout(Lt),J(I)}I.ping(Qt).then(Qt,()=>{xe(nt)})});return function(J,xe){return $.apply(this,arguments)}}()))}),w.apply(this,arguments)}const T={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rt{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bn=encodeURIComponent("fac");function gs(v,d,g,I,$,J){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(v,d,g,I,$,J){Te(v.config.authDomain,v,"auth-domain-config-required"),Te(v.config.apiKey,v,"invalid-api-key");const xe={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:B.SDK_VERSION,eventId:$};if(d instanceof mr){d.setDefaultLanguage(v.languageCode),xe.providerId=d.providerId||"",(0,F.xb)(d.getCustomParameters())||(xe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Cn,pr]of Object.entries(J||{}))xe[Cn]=pr}if(d instanceof Ys){const Cn=d.getScopes().filter(pr=>""!==pr);Cn.length>0&&(xe.scopes=Cn.join(","))}v.tenantId&&(xe.tid=v.tenantId);const nt=xe;for(const Cn of Object.keys(nt))void 0===nt[Cn]&&delete nt[Cn];const Lt=yield v._getAppCheckToken(),Qt=Lt?`#${Bn}=${encodeURIComponent(Lt)}`:"";return`${Ui(v)}?${(0,F.xO)(nt).slice(1)}${Qt}`})).apply(this,arguments)}function Ui({config:v}){return v.emulator?ze(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}const ha="webStorageSupport",uo=class pu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oa,this._completeRedirectFn=Yo,this._overrideRedirectResult=Vc}_openPopup(d,g,I,$){var J=this;return(0,p.Z)(function*(){var xe;Yt(null===(xe=J.eventManagers[d._key()])||void 0===xe?void 0:xe.manager,"_initialize() not called before _openPopup()");const nt=yield gs(d,g,I,It(),$);return function Kt(v,d,g,I=500,$=600){const J=Math.max((window.screen.availHeight-$)/2,0).toString(),xe=Math.max((window.screen.availWidth-I)/2,0).toString();let nt="";const Lt=Object.assign(Object.assign({},T),{width:I.toString(),height:$.toString(),top:J,left:xe}),Qt=(0,F.z$)().toLowerCase();g&&(nt=G(Qt)?"_blank":g),Y(Qt)&&(d=d||"http://localhost",Lt.scrollbars="yes");const Cn=Object.entries(Lt).reduce((vo,[Hs,$c])=>`${vo}${Hs}=${$c},`,"");if(function ee(v=(0,F.z$)()){var d;return se(v)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Qt)&&"_self"!==nt)return function Ht(v,d){const g=document.createElement("a");g.href=v,g.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(d||"",nt),new rt(null);const pr=window.open(d||"",nt,Cn);Te(pr,v,"popup-blocked");try{pr.focus()}catch{}return new rt(pr)}(d,nt,Ko())})()}_openRedirect(d,g,I,$){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(d),function Sn(v){yi().location.href=v}(yield gs(d,g,I,It(),$)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:$,promise:J}=this.eventManagers[g];return $?Promise.resolve($):(Yt(J,"If manager is not set, promise should be"),J)}const I=this.initAndGetManager(d);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(d){var g=this;return(0,p.Z)(function*(){const I=yield function rd(v){return w.apply(this,arguments)}(d),$=new ca(d);return I.register("authEvent",J=>(Te(J?.authEvent,d,"invalid-auth-event"),{status:$.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:$},g.iframes[d._key()]=I,$})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(ha,{type:ha},$=>{var J;const xe=null===(J=$?.[0])||void 0===J?void 0:J[ha];void 0!==xe&&g(!!xe),fe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function uc(v){return hu.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return je()||K()||se()}};class gu extends class Pa{constructor(d){this.factorId=d}_process(d,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,I);case"signin":return this._finalizeSignIn(d,g.credential);default:return St("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new gu(d)}_finalizeEnroll(d,g,I){return function wr(v,d){return ht(v,"POST","/v2/accounts/mfaEnrollment:finalize",yt(v,d))}(d,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function si(v,d){return ht(v,"POST","/v2/accounts/mfaSignIn:finalize",yt(v,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rf=(()=>{class v{constructor(){}static assertion(g){return gu._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var dc="@firebase/auth";class hc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);!g||(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,F.Pz)("authIdTokenMaxAge"),function sd(v){(0,B._registerComponent)(new Ee.wA("auth",(d,{options:g})=>{const I=d.getProvider("app").getImmediate(),$=d.getProvider("heartbeat"),J=d.getProvider("app-check-internal"),{apiKey:xe,authDomain:nt}=I.options;Te(xe&&!xe.includes(":"),"invalid-api-key",{appName:I.name});const Lt={apiKey:xe,authDomain:nt,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ln(v)},Qt=new Ni(I,$,J,Lt);return function Mi(v,d){const g=d?.persistence||[],I=(Array.isArray(g)?g:[g]).map(H);d?.errorMap&&v._updateErrorMap(d.errorMap),v._initializeWithPersistence(I,d?.popupRedirectResolver)}(Qt,g),Qt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,I)=>{d.getProvider("auth-internal").initialize()})),(0,B._registerComponent)(new Ee.wA("auth-internal",d=>{const g=br(d.getProvider("auth").getImmediate());return new hc(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,B.registerVersion)(dc,"0.23.2",function ch(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,B.registerVersion)(dc,"0.23.2","esm2017")}("Browser")},2810:(Nt,ke,R)=>{R.d(ke,{u7:()=>sg,Jj:()=>vl,IX:()=>Cm,my:()=>Ai,xU:()=>Il,Lz:()=>Mc,WA:()=>Dt,F8:()=>yf,$q:()=>sh,W:()=>Dl,EK:()=>$r,PU:()=>og,l7:()=>Yo,Ky:()=>jt,Xb:()=>er,Cf:()=>Sr,K9:()=>sa,Me:()=>Tl,yq:()=>Lr,Wi:()=>Em,ET:()=>Cl,Ab:()=>Jv,vr:()=>my,Fc:()=>Tm,hJ:()=>Kp,B$:()=>qp,at:()=>qd,oe:()=>uy,AK:()=>py,TF:()=>Sm,JU:()=>Zp,ST:()=>Uv,fH:()=>Bv,Ix:()=>Am,Wu:()=>Km,Lx:()=>Wm,qY:()=>zi,GL:()=>nu,QT:()=>ey,kl:()=>ty,Xk:()=>ny,PL:()=>ry,UQ:()=>iy,zN:()=>sy,nP:()=>Xv,b9:()=>Df,vh:()=>rg,Pb:()=>Mm,L$:()=>xm,cf:()=>qv,sc:()=>Zv,Xo:()=>Hm,IO:()=>jm,iE:()=>Zd,Eo:()=>Im,i3:()=>fy,Bt:()=>gy,pl:()=>oy,Ub:()=>fs,qK:()=>Xm,TQ:()=>zm,e0:()=>Gm,r7:()=>ay,Mx:()=>Jp,ar:()=>$m});var te,p=R(5861),F=R(6881),B=R(4859),le=R(1877),he=R(2090),Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},we={},Se=Se||{},X=Ee||self;function ie(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ve(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ze="closure_uid_"+(1e9*Math.random()>>>0),Ye=0;function Tt(i,e,t){return i.call.apply(i.bind,arguments)}function Ke(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function Oe(i,e,t){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tt:Ke).apply(null,arguments)}function bt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function ft(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(s,a,l){for(var f=Array(arguments.length-2),D=2;D<arguments.length;D++)f[D-2]=arguments[D];return e.prototype[a].apply(s,f)}}function fe(){this.s=this.s,this.o=this.o}fe.prototype.s=!1,fe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ut(i){Object.prototype.hasOwnProperty.call(i,Ze)&&i[Ze]||(i[Ze]=++Ye)}(this)},fe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xe=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function mt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function ot(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ie(s)){const a=i.length||0,l=s.length||0;i.length=a+l;for(let f=0;f<l;f++)i[a+f]=s[f]}else i.push(s)}}function Te(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{X.addEventListener("test",()=>{},e),X.removeEventListener("test",()=>{},e)}catch{}return i}();function Yt(i){return/^[\s\xa0]*$/.test(i)}function It(){var i=X.navigator;return i&&(i=i.userAgent)?i:""}function Gt(i){return-1!=It().indexOf(i)}function Rt(i){return Rt[" "](i),i}Rt[" "]=function(){};var ht,i,Ve=Gt("Opera"),Le=Gt("Trident")||Gt("MSIE"),ze=Gt("Edge"),Be=ze||Le,qe=Gt("Gecko")&&!(-1!=It().toLowerCase().indexOf("webkit")&&!Gt("Edge"))&&!(Gt("Trident")||Gt("MSIE"))&&!Gt("Edge"),ct=-1!=It().toLowerCase().indexOf("webkit")&&!Gt("Edge");function yt(){var i=X.document;return i?i.documentMode:void 0}e:{var $t="",Mt=(i=It(),qe?/rv:([^\);]+)(\)|;)/.exec(i):ze?/Edge\/([\d\.]+)/.exec(i):Le?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ct?/WebKit\/(\S+)/.exec(i):Ve?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Mt&&($t=Mt?Mt[1]:""),Le){var qt=yt();if(null!=qt&&qt>parseFloat($t)){ht=String(qt);break e}}ht=$t}var Nn=X.document&&Le&&(yt()||parseInt(ht,10))||void 0;function ir(i,e){if(Te.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(qe){e:{try{Rt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Wt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ir.$.h.call(this)}}ft(ir,Te);var Wt={2:"touch",3:"pen",4:"mouse"};ir.prototype.h=function(){ir.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),Mn=0;function Wn(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Mn,this.fa=this.ia=!1}function Mr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Pr(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Tn(i){const e={};for(const t in i)e[t]=i[t];return e}const Fn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sr(i,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)i[t]=s[t];for(let l=0;l<Fn.length;l++)t=Fn[l],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function zr(i){this.src=i,this.g={},this.h=0}function Ln(i,e){var t=e.type;if(t in i.g){var l,s=i.g[t],a=Xe(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Mr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Hn(i,e,t,s){for(var a=0;a<i.length;++a){var l=i[a];if(!l.fa&&l.listener==e&&l.capture==!!t&&l.la==s)return a}return-1}zr.prototype.add=function(i,e,t,s,a){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var f=Hn(i,e,s,a);return-1<f?(e=i[f],t||(e.ia=!1)):((e=new Wn(e,this.src,l,!!s,a)).ia=t,i.push(e)),e};var Pn="closure_lm_"+(1e6*Math.random()|0),wn={};function zt(i,e,t,s,a){if(s&&s.once)return gr(i,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)zt(i,e[l],t,s,a);return null}return t=Ft(t),i&&i[cn]?i.O(e,t,ve(s)?!!s.capture:!!s,a):on(i,e,t,!1,s,a)}function on(i,e,t,s,a,l){if(!e)throw Error("Invalid event type");var f=ve(a)?!!a.capture:!!a,D=fn(i);if(D||(i[Pn]=D=new zr(i)),(t=D.add(e,t,s,f,l)).proxy)return t;if(s=function xn(){const e=or;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)St||(a=f),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(nn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function gr(i,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)gr(i,e[l],t,s,a);return null}return t=Ft(t),i&&i[cn]?i.P(e,t,ve(s)?!!s.capture:!!s,a):on(i,e,t,!0,s,a)}function Jn(i,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)Jn(i,e[l],t,s,a);else s=ve(s)?!!s.capture:!!s,t=Ft(t),i&&i[cn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Hn(l=i.g[e],t,s,a))&&(Mr(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=fn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Hn(e,t,s,a)),(t=-1<i?e[i]:null)&&ur(t))}function ur(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[cn])Ln(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(nn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=fn(e))?(Ln(t,i),0==t.h&&(t.src=null,e[Pn]=null)):Mr(i)}}}function nn(i){return i in wn?wn[i]:wn[i]="on"+i}function or(i,e){if(i.fa)i=!0;else{e=new ir(e,this);var t=i.listener,s=i.la||i.src;i.ia&&ur(i),i=t.call(s,e)}return i}function fn(i){return(i=i[Pn])instanceof zr?i:null}var vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(i){return"function"==typeof i?i:(i[vr]||(i[vr]=function(e){return i.handleEvent(e)}),i[vr])}function mn(){fe.call(this),this.i=new zr(this),this.S=this,this.J=null}function yn(i,e){var t,s=i.J;if(s)for(t=[];s;s=s.J)t.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new Te(e,i);else if(e instanceof Te)e.target=e.target||i;else{var a=e;sr(e=new Te(s,i),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var f=e.g=t[l];a=Ne(f,s,!0,e)&&a}if(a=Ne(f=e.g=i,s,!0,e)&&a,a=Ne(f,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Ne(f=e.g=t[l],s,!1,e)&&a}function Ne(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.fa&&f.capture==t){var D=f.listener,N=f.la||f.src;f.ia&&Ln(i.i,f),a=!1!==D.call(N,s)&&a}}return a&&!s.defaultPrevented}ft(mn,fe),mn.prototype[cn]=!0,mn.prototype.removeEventListener=function(i,e,t,s){Jn(this,i,e,t,s)},mn.prototype.N=function(){if(mn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Mr(t[s]);delete i.g[e],i.h--}}this.J=null},mn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},mn.prototype.P=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var vt=X.JSON.stringify;function H(){var i=G;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Fe=new class me{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new it,i=>i.reset());class it{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ae(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function ce(i){X.setTimeout(()=>{throw i},0)}let Y,K=!1,G=new class ne{constructor(){this.h=this.g=null}add(e,t){const s=Fe.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},De=()=>{const i=X.Promise.resolve(void 0);Y=()=>{i.then(st)}};var st=()=>{for(var i;i=H();){try{i.h.call(i.g)}catch(t){ce(t)}var e=Fe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}K=!1};function Ot(i,e){mn.call(this),this.h=i||1,this.g=e||X,this.j=Oe(this.qb,this),this.l=Date.now()}function Jt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function se(i,e,t){if("function"==typeof i)t&&(i=Oe(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Oe(i.handleEvent,i)}return 2147483647<Number(e)?-1:X.setTimeout(i,e||0)}function ue(i){i.g=se(()=>{i.g=null,i.i&&(i.i=!1,ue(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ft(Ot,mn),(te=Ot.prototype).ga=!1,te.T=null,te.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yn(this,"tick"),this.ga&&(Jt(this),this.start()))}},te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},te.N=function(){Ot.$.N.call(this),Jt(this),delete this.g};class ee extends fe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(i){fe.call(this),this.h=i,this.g={}}ft(Me,fe);var je=[];function Pt(i,e,t,s){Array.isArray(t)||(t&&(je[0]=t.toString()),t=je);for(var a=0;a<t.length;a++){var l=zt(e,t[a],s||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function ln(i){Pr(i.g,function(e,t){this.g.hasOwnProperty(t)&&ur(e)},i),i.g={}}function Pe(){this.g=!0}function pt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function On(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<a.length;f++)a[f]=""}}}return vt(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Me.prototype.N=function(){Me.$.N.call(this),ln(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pe.prototype.Ea=function(){this.g=!1},Pe.prototype.info=function(){};var Gn={},Cr=null;function kn(){return Cr=Cr||new mn}function xr(i){Te.call(this,Gn.Ta,i)}function Hr(i){const e=kn();yn(e,new xr(e))}function Wr(i,e){Te.call(this,Gn.STAT_EVENT,i),this.stat=e}function Or(i){const e=kn();yn(e,new Wr(e,i))}function Ns(i,e){Te.call(this,Gn.Ua,i),this.size=e}function Kn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){i()},e)}Gn.Ta="serverreachability",ft(xr,Te),Gn.STAT_EVENT="statevent",ft(Wr,Te),Gn.Ua="timingevent",ft(Ns,Te);var ui={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ks={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ni(){}function Ki(){}Ni.prototype.h=null;var ss,Kr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mi(){Te.call(this,"d")}function Br(){Te.call(this,"c")}function qr(){}function jr(i,e,t,s){this.l=i,this.j=e,this.m=t,this.W=s||1,this.U=new Me(this),this.P=Xr,this.V=new Ot(i=Be?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}ft(Mi,Te),ft(Br,Te),ft(qr,Ni),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},ss=new qr;var Xr=45e3,os={},Nr={};function Bi(i,e,t){i.L=1,i.v=ys(Rn(e)),i.s=t,i.S=!0,qs(i,null)}function qs(i,e){i.G=Date.now(),cr(i),i.A=Rn(i.v);var t=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),Zi(t.i,"t",s),i.C=0,t=i.l.J,i.h=new Ks,i.g=zo(i.l,t?e:null,!i.s),0<i.O&&(i.M=new ee(Oe(i.Pa,i,i.g),i.O)),Pt(i.U,i.g,"readystatechange",i.nb),e=i.I?Tn(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Hr(),function Re(i,e,t,s,a,l){i.info(function(){if(i.g)if(l)for(var f="",D=l.split("&"),N=0;N<D.length;N++){var U=D[N].split("=");if(1<U.length){var Q=U[0];U=U[1];var ye=Q.split("_");f=2<=ye.length&&"type"==ye[1]?f+(Q+"=")+U+"&":f+(Q+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(i.j,i.u,i.A,i.m,i.W,i.s)}function wo(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Fs(i,e,t){let a,s=!0;for(;!i.J&&i.C<t.length;){if(a=ma(i,t),a==Nr){4==e&&(i.o=4,Or(14),s=!1),pt(i.j,i.m,null,"[Incomplete Response]");break}if(a==os){i.o=4,Or(15),pt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}pt(i.j,i.m,a,null),Ie(i,a)}wo(i)&&a!=Nr&&a!=os&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Or(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),$o(e),e.M=!0,Or(11))):(pt(i.j,i.m,t,"[Invalid Chunked Response]"),Ae(i),co(i))}function ma(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Nr:(t=Number(e.substring(t,s)),isNaN(t)?os:(s+=1)+t>e.length?Nr:(e=e.slice(s,s+t),i.C=s+t,e))}function cr(i){i.Y=Date.now()+i.P,Io(i,i.P)}function Io(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Kn(Oe(i.lb,i),e)}function Do(i){i.B&&(X.clearTimeout(i.B),i.B=null)}function co(i){0==i.l.H||i.J||Ao(i.l,i)}function Ae(i){Do(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Jt(i.V),ln(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ie(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||ji(t.i,i)))if(!i.K&&ji(t.i,i)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;Go(t),ws(t)}va(t),Or(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Kn(Oe(t.ib,t),6e3));if(1>=cs(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else js(t,11)}else if((i.K||t.g==i)&&Go(t),!Yt(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let U=a[e];if(t.V=U[0],U=U[1],2==t.H)if("c"==U[0]){t.K=U[1],t.pa=U[2];const Q=U[3];null!=Q&&(t.ra=Q,t.l.info("VER="+t.ra));const ye=U[4];null!=ye&&(t.Ga=ye,t.l.info("SVER="+t.Ga));const $e=U[5];null!=$e&&"number"==typeof $e&&0<$e&&(t.L=s=1.5*$e,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const at=i.g;if(at){const kt=at.g?at.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kt){var l=s.i;l.g||-1==kt.indexOf("spdy")&&-1==kt.indexOf("quic")&&-1==kt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(hi(l,l.h),l.h=null))}if(s.F){const sn=at.g?at.g.getResponseHeader("X-HTTP-Session-Id"):null;sn&&(s.Da=sn,rr(s.I,s.F,sn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var f=i;if((s=t).wa=eo(s,s.J?s.pa:null,s.Y),f.K){ho(s.i,f);var D=f,N=s.L;N&&D.setTimeout(N),D.B&&(Do(D),cr(D)),s.g=f}else Va(s);0<t.j.length&&wi(t)}else"stop"!=U[0]&&"close"!=U[0]||js(t,7);else 3==t.H&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?js(t,7):Xs(t):"noop"!=U[0]&&t.h&&t.h.Aa(U),t.A=0)}Hr()}catch{}}function xt(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ie(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function lt(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ie(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Ue(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ie(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),a=s.length,l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],i)}(te=jr.prototype).setTimeout=function(i){this.P=i},te.nb=function(i){i=i.target;const e=this.M;e&&3==k(i)?e.l():this.Pa(i)},te.Pa=function(i){try{if(i==this.g)e:{const Q=k(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Q)&&(3!=Q||Be||this.g&&(this.h.h||this.g.ja()||P(this.g)))){this.J||4!=Q||7==e||Hr(),Do(this);var t=this.g.da();this.ca=t;t:if(wo(this)){var s=P(this.g);i="";var a=s.length,l=4==k(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ae(this),co(this);var f="";break t}this.h.i=new X.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=200==t,function Et(i,e,t,s,a,l,f){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.W,Q,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yt(D)){var U=D;break t}}U=null}if(!(t=U)){this.i=!1,this.o=3,Or(12),Ae(this),co(this);break e}pt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ie(this,t)}this.S?(Fs(this,Q,f),Be&&this.i&&3==Q&&(Pt(this.U,this.V,"tick",this.mb),this.V.start())):(pt(this.j,this.m,f,null),Ie(this,f)),4==Q&&Ae(this),this.i&&!this.J&&(4==Q?Ao(this.l,this):(this.i=!1,cr(this)))}else(function M(i){const e={};i=(i.g&&2<=k(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(Yt(i[s]))continue;var t=ae(i[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const l=e[a]||[];e[a]=l,l.push(t)}!function Ct(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Or(12)):(this.o=0,Or(13)),Ae(this),co(this)}}}catch{}},te.mb=function(){if(this.g){var i=k(this.g),e=this.g.ja();this.C<e.length&&(Do(this),Fs(this,i,e),this.i&&4!=i&&cr(this))}},te.cancel=function(){this.J=!0,Ae(this)},te.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function vn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Hr(),Or(17)),Ae(this),this.o=2,co(this)):Io(this,this.Y-i)};var In=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Zn){this.h=i.h,ei(this,i.j),this.s=i.s,this.g=i.g,ci(this,i.m),this.l=i.l;var e=i.i,t=new Ls;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pi(this,t),this.o=i.o}else i&&(e=String(i).match(In))?(this.h=!1,ei(this,e[1]||"",!0),this.s=li(e[2]||""),this.g=li(e[3]||"",!0),ci(this,e[4]),this.l=li(e[5]||"",!0),pi(this,e[6]||"",!0),this.o=li(e[7]||"")):(this.h=!1,this.i=new Ls(null,this.h))}function Rn(i){return new Zn(i)}function ei(i,e,t){i.j=t?li(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ci(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function pi(i,e,t){e instanceof Ls?(i.i=e,function _s(i,e){e&&!i.j&&(qi(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Zs(this,s),Zi(this,a,t))},i)),i.j=e}(i.i,i.h)):(t||(e=di(e,Vo)),i.i=new Ls(e,i.h))}function rr(i,e,t){i.i.set(e,t)}function ys(i){return rr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function li(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function di(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ea),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ea(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Zn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(di(e,as,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(di(e,as,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(di(t,"/"==t.charAt(0)?us:Lo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",di(t,Co)),i.join("")};var as=/[#\/\?@]/g,Lo=/[#\?:]/g,us=/[#\?]/g,Vo=/[#\?@]/g,Co=/#/g;function Ls(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function qi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Xn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var l=i[t].substring(0,s);a=i[t].substring(s+1)}else l=i[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zs(i,e){qi(i),e=vs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function kr(i,e){return qi(i),e=vs(i,e),i.g.has(e)}function Zi(i,e,t){Zs(i,e),0<t.length&&(i.i=null,i.g.set(vs(i,e),mt(t)),i.h+=t.length)}function vs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ta(i){this.l=i||mr,i=X.PerformanceNavigationTiming?0<(i=X.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(te=Ls.prototype).add=function(i,e){qi(this),this.i=null,i=vs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},te.forEach=function(i,e){qi(this),this.g.forEach(function(t,s){t.forEach(function(a){i.call(e,a,s,this)},this)},this)},te.ta=function(){qi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=i[s];for(let l=0;l<a.length;l++)t.push(e[s])}return t},te.Z=function(i){qi(this);let e=[];if("string"==typeof i)kr(this,i)&&(e=e.concat(this.g.get(vs(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},te.set=function(i,e){return qi(this),this.i=null,kr(this,i=vs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},te.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),f=this.Z(s);for(s=0;s<f.length;s++){var a=l;""!==f[s]&&(a+="="+encodeURIComponent(String(f[s]))),i.push(a)}}return this.i=i.join("&")};var mr=10;function Ys(i){return!!i.h||!!i.g&&i.g.size>=i.j}function cs(i){return i.h?1:i.g?i.g.size:0}function ji(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function hi(i,e){i.g?i.g.add(e):i.h=e}function ho(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function bo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return mt(i.i)}function ti(){this.g=new class{stringify(i){return X.JSON.stringify(i,void 0)}parse(i){return X.JSON.parse(i,void 0)}}}function ya(i,e,t){const s=t||"";try{xt(i,function(a,l){let f=a;ve(a)&&(f=vt(a)),e.push(s+l+"="+encodeURIComponent(f))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Qs(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function gi(i){this.l=i.fc||null,this.j=i.ob||!1}function Gr(i,e){mn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Es,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ta.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ft(gi,Ni),gi.prototype.g=function(){return new Gr(this.l,this.j)},gi.prototype.i=function(i){return function(){return i}}({}),ft(Gr,mn);var Es=0;function An(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Js(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Vs(i)}function Vs(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(te=Gr.prototype).open=function(i,e){if(this.readyState!=Es)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Vs(this)},te.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Js(this)),this.readyState=Es},te.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;An(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},te.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Js(this):Vs(this),3==this.readyState&&An(this)}},te.Za=function(i){this.g&&(this.response=this.responseText=i,Js(this))},te.Ya=function(i){this.g&&(this.response=i,Js(this))},te.ka=function(){this.g&&Js(this)},te.setRequestHeader=function(i,e){this.v.append(i,e)},te.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},te.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ei=X.JSON.parse;function Fr(i){mn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Us,this.L=this.M=!1}ft(Fr,mn);var Us="",To=/^https?$/i,ls=["POST","PUT"];function gt(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,qn(i),Yi(i)}function qn(i){i.F||(i.F=!0,yn(i,"complete"),yn(i,"error"))}function jo(i){if(i.h&&typeof Se<"u"&&(!i.C[1]||4!=k(i)||2!=i.da()))if(i.v&&4==k(i))se(i.La,0,i);else if(yn(i,"readystatechange"),4==k(i)){i.h=!1;try{const f=i.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===f){var a=String(i.I).match(In)[1]||null;!a&&X.self&&X.self.location&&(a=X.self.location.protocol.slice(0,-1)),s=!To.test(a?a.toLowerCase():"")}t=s}if(t)yn(i,"complete"),yn(i,"success");else{i.m=6;try{var l=2<k(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",qn(i)}}finally{Yi(i)}}}function Yi(i,e){if(i.g){Rr(i);const t=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||yn(i,"ready");try{t.onreadystatechange=s}catch{}}}function Rr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(X.clearTimeout(i.A),i.A=null)}function k(i){return i.g?i.g.readyState:0}function P(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Us:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function q(i){let e="";return Pr(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Qe(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=q(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):rr(i,e,t))}function Xt(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function zn(i){this.Ga=0,this.j=[],this.l=new Pe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xt("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xt("baseRetryDelayMs",5e3,i),this.hb=Xt("retryDelaySeedMs",1e4,i),this.eb=Xt("forwardChannelMaxRetries",2,i),this.xa=Xt("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new ta(i&&i.concurrentRequestLimit),this.Ja=new ti,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xs(i){if(mi(i),3==i.H){var e=i.W++,t=Rn(i.I);if(rr(t,"SID",i.K),rr(t,"RID",e),rr(t,"TYPE","terminate"),ni(i,t),(e=new jr(i,i.l,e)).L=2,e.v=ys(Rn(t)),t=!1,X.navigator&&X.navigator.sendBeacon)try{t=X.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&X.Image&&((new Image).src=e.v,t=!0),t||(e.g=zo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),cr(e)}_a(i)}function ws(i){i.g&&($o(i),i.g.cancel(),i.g=null)}function mi(i){ws(i),i.u&&(X.clearTimeout(i.u),i.u=null),Go(i),i.i.cancel(),i.m&&("number"==typeof i.m&&X.clearTimeout(i.m),i.m=null)}function wi(i){if(!Ys(i.i)&&!i.m){i.m=!0;var e=i.Na;Y||De(),K||(Y(),K=!0),G.add(e,i),i.C=0}}function Bs(i,e){var t;t=e?e.m:i.W++;const s=Rn(i.I);rr(s,"SID",i.K),rr(s,"RID",t),rr(s,"AID",i.V),ni(i,s),i.o&&i.s&&Qe(s,i.o,i.s),t=new jr(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Is(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),hi(i.i,t),Bi(t,s,e)}function ni(i,e){i.na&&Pr(i.na,function(t,s){rr(e,s,t)}),i.h&&xt({},function(t,s){rr(e,s,t)})}function Is(i,e,t){t=Math.min(i.j.length,t);var s=i.h?Oe(i.h.Va,i.h,i):null;e:{var a=i.j;let l=-1;for(;;){const f=["count="+t];-1==l?0<t?(l=a[0].g,f.push("ofs="+l)):l=0:f.push("ofs="+l);let D=!0;for(let N=0;N<t;N++){let U=a[N].g;const Q=a[N].map;if(U-=l,0>U)l=Math.max(0,a[N].g-100),D=!1;else try{ya(Q,f,"req"+U+"_")}catch{s&&s(Q)}}if(D){s=f.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,s}function Va(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Y||De(),K||(Y(),K=!0),G.add(e,i),i.A=0}}function va(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Kn(Oe(i.Ma,i),Fi(i,i.A)),i.A++,0))}function $o(i){null!=i.B&&(X.clearTimeout(i.B),i.B=null)}function Ho(i){i.g=new jr(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Rn(i.wa);rr(e,"RID","rpc"),rr(e,"SID",i.K),rr(e,"AID",i.V),rr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&rr(e,"TO",i.qa),rr(e,"TYPE","xmlhttp"),ni(i,e),i.o&&i.s&&Qe(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=ys(Rn(e)),t.s=null,t.S=!0,qs(t,i)}function Go(i){null!=i.v&&(X.clearTimeout(i.v),i.v=null)}function Ao(i,e){var t=null;if(i.g==e){Go(i),$o(i),i.g=null;var s=2}else{if(!ji(i.i,e))return;t=e.F,ho(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=i.C;yn(s=kn(),new Ns(s,t)),wi(i)}else Va(i);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function Qi(i,e){return!(cs(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Kn(Oe(i.Na,i,e),Fi(i,i.C)),i.C++,0)))}(i,e)||2==s&&va(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:js(i,5);break;case 4:js(i,10);break;case 3:js(i,6);break;default:js(i,2)}}function Fi(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function js(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var s=Oe(i.pb,i);t||(t=new Zn("//www.google.com/images/cleardot.gif"),X.location&&"http"==X.location.protocol||ei(t,"https"),ys(t)),function Uo(i,e){const t=new Pe;if(X.Image){const s=new Image;s.onload=bt(Qs,t,s,"TestLoadImage: loaded",!0,e),s.onerror=bt(Qs,t,s,"TestLoadImage: error",!1,e),s.onabort=bt(Qs,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=bt(Qs,t,s,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Or(2);i.H=0,i.h&&i.h.za(e),_a(i),mi(i)}function _a(i){if(i.H=0,i.ma=[],i.h){const e=bo(i.i);(0!=e.length||0!=i.j.length)&&(ot(i.ma,e),ot(i.ma,i.j),i.i.i.length=0,mt(i.j),i.j.length=0),i.h.ya()}}function eo(i,e,t){var s=t instanceof Zn?Rn(t):new Zn(t);if(""!=s.g)e&&(s.g=e+"."+s.g),ci(s,s.m);else{var a=X.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Zn(null);s&&ei(l,s),e&&(l.g=e),a&&ci(l,a),t&&(l.l=t),s=l}return e=i.Da,(t=i.F)&&e&&rr(s,t,e),rr(s,"VER",i.ra),ni(i,s),s}function zo(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fr(t&&i.Ha&&!i.va?new gi({ob:!0}):i.va)).Oa(i.J),e}function fo(){}function So(){if(Le&&!(10<=Number(Nn)))throw Error("Environmental error: no available transport.")}function xi(i,e){mn.call(this),this.g=new zn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Yt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new na(this)}function ds(i){Mi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ua(){Br.call(this),this.status=1}function na(i){this.g=i}function Ii(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function yr(i,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var l=i.g[3],f=(e=i.g[0])+(l^(t=i.g[1])&((a=i.g[2])^l))+s[0]+3614090360&4294967295;f=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=(t=(a=(l=(e=t+(f<<7&4294967295|f>>>25))+((f=l+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^l&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^t&(a^l))+s[4]+4118548399&4294967295)<<7&4294967295|f>>>25))+((f=l+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^l&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^t&(a^l))+s[8]+1770035416&4294967295)<<7&4294967295|f>>>25))+((f=l+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^l&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|f>>>10))+((f=e+(l^t&(a^l))+s[12]+1804603682&4294967295)<<7&4294967295|f>>>25))+((f=l+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^l&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|f>>>10))+((f=e+(a^l&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|f>>>27))+((f=l+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|f>>>18))+((f=t+(l^e&(a^l))+s[0]+3921069994&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^l&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|f>>>27))+((f=l+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|f>>>18))+((f=t+(l^e&(a^l))+s[4]+3889429448&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^l&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|f>>>27))+((f=l+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|f>>>18))+((f=t+(l^e&(a^l))+s[8]+1163531501&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^l&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|f>>>27))+((f=l+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|f>>>18))+((f=t+(l^e&(a^l))+s[12]+2368359562&4294967295)<<20&4294967295|f>>>12))+((f=e+(t^a^l)+s[5]+4294588738&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|f>>>21))+((f=a+(l^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^l)+s[1]+2763975236&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|f>>>21))+((f=a+(l^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^l)+s[13]+681279174&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|f>>>21))+((f=a+(l^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^l^e)+s[6]+76029189&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^l)+s[9]+3654602809&4294967295)<<4&4294967295|f>>>28))+((f=l+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|f>>>21))+((f=a+(l^e^t)+s[15]+530742520&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|f>>>9))+((f=e+(a^(t|~l))+s[0]+4096336452&4294967295)<<6&4294967295|f>>>26))+((f=l+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(l|~t))+s[14]+2878612391&4294967295)<<15&4294967295|f>>>17))+((f=t+(l^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~l))+s[12]+1700485571&4294967295)<<6&4294967295|f>>>26))+((f=l+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(l|~t))+s[10]+4293915773&4294967295)<<15&4294967295|f>>>17))+((f=t+(l^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~l))+s[8]+1873313359&4294967295)<<6&4294967295|f>>>26))+((f=l+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(l|~t))+s[6]+2734768916&4294967295)<<15&4294967295|f>>>17))+((f=t+(l^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|f>>>11))+((l=(e=t+((f=e+(a^(t|~l))+s[4]+4149444226&4294967295)<<6&4294967295|f>>>26))+((f=l+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|f>>>22))^((a=l+((f=a+(e^(l|~t))+s[2]+718787259&4294967295)<<15&4294967295|f>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(f<<21&4294967295|f>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+l&4294967295}function _r(i,e){this.h=e;for(var t=[],s=!0,a=i.length-1;0<=a;a--){var l=0|i[a];s&&l==e||(t[a]=l,s=!1)}this.g=t}(te=Fr.prototype).Oa=function(i){this.M=i},te.ha=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ss.g(),this.C=function br(i){return i.h||(i.h=i.i())}(this.u?this.u:ss),this.g.onreadystatechange=Oe(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void gt(this,l)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=X.FormData&&i instanceof X.FormData,!(0<=Xe(ls,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,f]of t)this.g.setRequestHeader(l,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Rr(this),0<this.B&&((this.L=function Bo(i){return Le&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oe(this.ua,this)):this.A=se(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){gt(this,l)}},te.ua=function(){typeof Se<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))},te.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yn(this,"complete"),yn(this,"abort"),Yi(this))},te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yi(this,!0)),Fr.$.N.call(this)},te.La=function(){this.s||(this.G||this.v||this.l?jo(this):this.kb())},te.kb=function(){jo(this)},te.isActive=function(){return!!this.g},te.da=function(){try{return 2<k(this)?this.g.status:-1}catch{return-1}},te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},te.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ei(e)}},te.Ia=function(){return this.m},te.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(te=zn.prototype).ra=8,te.H=1,te.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new jr(this,this.l,i);let l=this.s;if(this.U&&(l?(l=Tn(l),sr(l,this.U)):l=this.U),null!==this.o||this.O||(a.I=l,l=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Is(this,a,e),rr(t=Rn(this.I),"RID",i),rr(t,"CVER",22),this.F&&rr(t,"X-HTTP-Session-Id",this.F),ni(this,t),l&&(this.O?e="headers="+encodeURIComponent(String(q(l)))+"&"+e:this.o&&Qe(t,this.o,l)),hi(this.i,a),this.bb&&rr(t,"TYPE","init"),this.P?(rr(t,"$req",e),rr(t,"SID","null"),a.aa=!0,Bi(a,t,null)):Bi(a,t,e),this.H=2}}else 3==this.H&&(i?Bs(this,i):0==this.j.length||Ys(this.i)||Bs(this))},te.Ma=function(){if(this.u=null,Ho(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Kn(Oe(this.jb,this),i)}},te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Or(10),ws(this),Ho(this))},te.ib=function(){null!=this.v&&(this.v=null,ws(this),va(this),Or(19))},te.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Or(2)):(this.l.info("Failed to ping google.com"),Or(1))},te.isActive=function(){return!!this.h&&this.h.isActive(this)},(te=fo.prototype).Ba=function(){},te.Aa=function(){},te.za=function(){},te.ya=function(){},te.isActive=function(){return!0},te.Va=function(){},So.prototype.g=function(i,e){return new xi(i,e)},ft(xi,mn),xi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Or(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=eo(i,null,i.Y),wi(i)},xi.prototype.close=function(){Xs(this.g)},xi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=vt(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&wi(e)},xi.prototype.N=function(){this.g.h=null,delete this.j,Xs(this.g),delete this.g,xi.$.N.call(this)},ft(ds,Mi),ft(Ua,Br),ft(na,fo),na.prototype.Ba=function(){yn(this.g,"a")},na.prototype.Aa=function(i){yn(this.g,new ds(i))},na.prototype.za=function(i){yn(this.g,new Ua)},na.prototype.ya=function(){yn(this.g,"b")},ft(Ii,function hr(){this.blockSize=-1}),Ii.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ii.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,s=this.m,a=this.h,l=0;l<e;){if(0==a)for(;l<=t;)yr(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(s[a++]=i.charCodeAt(l++),a==this.blockSize){yr(this,s),a=0;break}}else for(;l<e;)if(s[a++]=i[l++],a==this.blockSize){yr(this,s),a=0;break}}this.h=a,this.i+=e},Ii.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)i[t++]=this.g[e]>>>s&255;return i};var ra={};function Mo(i){return-128<=i&&128>i?function ar(i,e){var t=ra;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new _r([0|e],0>e?-1:0)}):new _r([0|i],0>i?-1:0)}function Ri(i){if(isNaN(i)||!isFinite(i))return Cs;if(0>i)return Di(Ri(-i));for(var e=[],t=1,s=0;i>=t;s++)e[s]=i/t|0,t*=Ds;return new _r(e,0)}var Ds=4294967296,Cs=Mo(0),to=Mo(1),ia=Mo(16777216);function hs(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function $i(i){return-1==i.h}function Di(i){for(var e=i.g.length,t=[],s=0;s<e;s++)t[s]=~i.g[s];return new _r(t,~i.h).add(to)}function Pi(i,e){return i.add(Di(e))}function no(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Wo(i,e){this.g=i,this.h=e}function ro(i,e){if(hs(e))throw Error("division by zero");if(hs(i))return new Wo(Cs,Cs);if($i(i))return e=ro(Di(i),e),new Wo(Di(e.g),Di(e.h));if($i(e))return e=ro(i,Di(e)),new Wo(Di(e.g),e.h);if(30<i.g.length){if($i(i)||$i(e))throw Error("slowDivide_ only works with positive integers.");for(var t=to,s=e;0>=s.X(i);)t=po(t),s=po(s);var a=xo(t,1),l=xo(s,1);for(s=xo(s,2),t=xo(t,2);!hs(s);){var f=l.add(s);0>=f.X(i)&&(a=a.add(t),l=f),s=xo(s,1),t=xo(t,1)}return e=Pi(i,a.R(e)),new Wo(a,e)}for(a=Cs;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),f=(l=Ri(t)).R(e);$i(f)||0<f.X(i);)f=(l=Ri(t-=s)).R(e);hs(l)&&(l=to),a=a.add(l),i=Pi(i,f)}return new Wo(a,i)}function po(i){for(var e=i.g.length+1,t=[],s=0;s<e;s++)t[s]=i.D(s)<<1|i.D(s-1)>>>31;return new _r(t,i.h)}function xo(i,e){var t=e>>5;e%=32;for(var s=i.g.length-t,a=[],l=0;l<s;l++)a[l]=0<e?i.D(l+t)>>>e|i.D(l+t+1)<<32-e:i.D(l+t);return new _r(a,i.h)}(te=_r.prototype).ea=function(){if($i(this))return-Di(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);i+=(0<=s?s:Ds+s)*e,e*=Ds}return i},te.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(hs(this))return"0";if($i(this))return"-"+Di(this).toString(i);for(var e=Ri(Math.pow(i,6)),t=this,s="";;){var a=ro(t,e).g,l=((0<(t=Pi(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(hs(t=a))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},te.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},te.X=function(i){return $i(i=Pi(this,i))?-1:hs(i)?0:1},te.abs=function(){return $i(this)?Di(this):this},te.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0,a=0;a<=e;a++){var l=s+(65535&this.D(a))+(65535&i.D(a)),f=(l>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=f>>>16,t[a]=(f&=65535)<<16|(l&=65535)}return new _r(t,-2147483648&t[t.length-1]?-1:0)},te.R=function(i){if(hs(this)||hs(i))return Cs;if($i(this))return $i(i)?Di(this).R(Di(i)):Di(Di(this).R(i));if($i(i))return Di(this.R(Di(i)));if(0>this.X(ia)&&0>i.X(ia))return Ri(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var l=this.D(s)>>>16,f=65535&this.D(s),D=i.D(a)>>>16,N=65535&i.D(a);t[2*s+2*a]+=f*N,no(t,2*s+2*a),t[2*s+2*a+1]+=l*N,no(t,2*s+2*a+1),t[2*s+2*a+1]+=f*D,no(t,2*s+2*a+1),t[2*s+2*a+2]+=l*D,no(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new _r(t,0)},te.gb=function(i){return ro(this,i).h},te.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&i.D(s);return new _r(t,this.h&i.h)},te.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|i.D(s);return new _r(t,this.h|i.h)},te.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^i.D(s);return new _r(t,this.h^i.h)},So.prototype.createWebChannel=So.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,ks.COMPLETE="complete",Ki.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",mn.prototype.listen=mn.prototype.O,Fr.prototype.listenOnce=Fr.prototype.P,Fr.prototype.getLastError=Fr.prototype.Sa,Fr.prototype.getLastErrorCode=Fr.prototype.Ia,Fr.prototype.getStatus=Fr.prototype.da,Fr.prototype.getResponseJson=Fr.prototype.Wa,Fr.prototype.getResponseText=Fr.prototype.ja,Fr.prototype.send=Fr.prototype.ha,Fr.prototype.setWithCredentials=Fr.prototype.Oa,Ii.prototype.digest=Ii.prototype.l,Ii.prototype.reset=Ii.prototype.reset,Ii.prototype.update=Ii.prototype.j,_r.prototype.add=_r.prototype.add,_r.prototype.multiply=_r.prototype.R,_r.prototype.modulo=_r.prototype.gb,_r.prototype.compare=_r.prototype.X,_r.prototype.toNumber=_r.prototype.ea,_r.prototype.toString=_r.prototype.toString,_r.prototype.getBits=_r.prototype.D,_r.fromNumber=Ri,_r.fromString=function Ea(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Di(Ea(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ri(Math.pow(e,8)),s=Cs,a=0;a<i.length;a+=8){var l=Math.min(8,i.length-a),f=parseInt(i.substring(a,a+l),e);8>l?(l=Ri(Math.pow(e,l)),s=s.R(l).add(Ri(f))):s=(s=s.R(t)).add(Ri(f))}return s};var ru=we.createWebChannelTransport=function(){return new So},b=we.getStatEventTarget=function(){return kn()},V=we.ErrorCode=ui,x=we.EventType=ks,W=we.Event=Gn,_e=we.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Je=we.FetchXmlHttpFactory=gi,dt=we.WebChannel=Ki,dn=we.XhrIo=Fr,fr=we.Md5=Ii,Qn=we.Integer=_r;const Er="@firebase/firestore";class _n{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let Tr="9.23.0";const Vn=new le.Yd("@firebase/firestore");function Yr(){return Vn.logLevel}function fs(i){Vn.setLogLevel(i)}function wt(i,...e){if(Vn.logLevel<=le.in.DEBUG){const t=e.map(go);Vn.debug(`Firestore (${Tr}): ${i}`,...t)}}function wr(i,...e){if(Vn.logLevel<=le.in.ERROR){const t=e.map(go);Vn.error(`Firestore (${Tr}): ${i}`,...t)}}function Lr(i,...e){if(Vn.logLevel<=le.in.WARN){const t=e.map(go);Vn.warn(`Firestore (${Tr}): ${i}`,...t)}}function go(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Zt(i="Unexpected state"){const e=`FIRESTORE (${Tr}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function an(i,e){i||Zt()}function sa(i,e){i||Zt()}function Bt(i,e){return i}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends he.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Su{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}}class wa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tc{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=U=>this.i!==a?(a=this.i,t(U)):Promise.resolve();let f=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new ri,e.enqueueRetryable(()=>l(this.currentUser))};const D=()=>{const U=f;e.enqueueRetryable((0,p.Z)(function*(){yield U.promise,yield l(s.currentUser)}))},N=U=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(U=>N(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?N(U):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new ri)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(an("string"==typeof s.accessToken),new Su(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return an(null===e||"string"==typeof e),new _n(e)}}class Ba{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class oa{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ba(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=l=>{null!=l.error&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.T;return this.T=l.token,wt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?a(l):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(an("string"==typeof t.token),this.T=t.token,new Oc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ii(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class yi{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=ii(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Sn(i,e){return i<e?-1:i>e?1:0}function bs(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}function ja(i){return i+"\0"}class $r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Dt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Dt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Dt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new $r(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sn(this.nanoseconds,e.nanoseconds):Sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pn(e)}static min(){return new pn(new $r(0,0))}static max(){return new pn(new $r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ts{constructor(e,t,s){void 0===t?t=0:t>e.length&&Zt(),void 0===s?s=e.length-t:s>e.length-t&&Zt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ts.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),f=t.get(a);if(l<f)return-1;if(l>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Dn extends Ts{construct(e,t,s){return new Dn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Dt(We.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Dn(t)}static emptyPath(){return new Dn([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Ts{construct(e,t,s){return new er(e,t,s)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Dt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new Dt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[a+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new Dt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=N,a+=2}else"`"===D?(f=!f,a++):"."!==D||f?(s+=D,a++):(l(),a++)}if(l(),f)throw new Dt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class jt{constructor(e){this.path=e}static fromPath(e){return new jt(Dn.fromString(e))}static fromName(e){return new jt(Dn.fromString(e).popFirst(5))}static empty(){return new jt(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new Dn(e.slice()))}}class Ji{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function qo(i){return i.fields.find(e=>2===e.kind)}function Ia(i){return i.fields.filter(e=>2!==e.kind)}Ji.UNKNOWN_ID=-1;class Ro{constructor(e,t){this.fieldPath=e,this.kind=t}}class xu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xu(0,ps.min())}}function Ca(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=pn.fromTimestamp(1e9===s?new $r(t+1,0):new $r(t,s));return new ps(a,jt.empty(),e)}function Ru(i){return new ps(i.readTime,i.key,-1)}class ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ps(pn.min(),jt.empty(),-1)}static max(){return new ps(pn.max(),jt.empty(),-1)}}function nc(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=jt.comparator(i.documentKey,e.documentKey),0!==t?t:Sn(i.largestBatchId,e.largestBatchId))}const Ha="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Zo(i){return si.apply(this,arguments)}function si(){return si=(0,p.Z)(function*(i){if(i.code!==We.FAILED_PRECONDITION||i.message!==Ha)throw i;wt("LocalStore","Unexpectedly lost primary lease")}),si.apply(this,arguments)}class He{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new He((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof He?t:He.resolve(t)}catch(t){return He.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):He.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):He.reject(t)}static resolve(e){return new He((t,s)=>{t(e)})}static reject(e){return new He((t,s)=>{s(e)})}static waitFor(e){return new He((t,s)=>{let a=0,l=0,f=!1;e.forEach(D=>{++a,D.next(()=>{++l,f&&l===a&&t()},N=>s(N))}),f=!0,l===a&&t()})}static or(e){let t=He.resolve(!1);for(const s of e)t=t.next(a=>a?He.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new He((s,a)=>{const l=e.length,f=new Array(l);let D=0;for(let N=0;N<l;N++){const U=N;t(e[U]).next(Q=>{f[U]=Q,++D,D===l&&s(f)},Q=>a(Q))}})}static doWhile(e,t){return new He((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class io{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ri,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ci(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=su(s.target.error);this.v.reject(new Ci(e,a))}}static open(e,t,s,a){try{return new io(t,e.transaction(a,s))}catch(l){throw new Ci(t,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iu(t)}}class so{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===so.S((0,he.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return wt("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,he.hl)())return!1;if(so.C())return!0;const e=(0,he.z$)(),t=so.S(e),s=0<t&&t<10,a=so.N(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,p.Z)(function*(){return t.db||(wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=f=>{s(f.target.result)},l.onblocked=()=>{a(new Ci(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const D=f.target.error;a("VersionError"===D.name?new Dt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Dt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ci(e,D))},l.onupgradeneeded=f=>{wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.V.O(f.target.result,l.transaction,f.oldVersion,t.version).next(()=>{wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,p.Z)(function*(){const f="readonly"===t;let D=0;for(;;){++D;try{l.db=yield l.$(e);const N=io.open(l.db,e,f?"readonly":"readwrite",s),U=a(N).next(Q=>(N.P(),Q)).catch(Q=>(N.abort(Q),He.reject(Q))).toPromise();return U.catch(()=>{}),yield N.R,U}catch(N){const U=N,Q="FirebaseError"!==U.name&&D<3;if(wt("SimpleDb","Transaction failed with error:",U.message,"Retrying:",Q),l.close(),!Q)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ga{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $s(this.L.delete())}}class Ci extends Dt{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Li(i){return"IndexedDbTransactionError"===i.name}class iu{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(wt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),$s(s)}add(e){return wt("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(void 0===t&&(t=null),wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return wt("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return wt("SimpleDb","COUNT",this.store.name),$s(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.W(a,(f,D)=>{l.push(D)}).next(()=>l)}{const a=this.store.getAll(s.range);return new He((l,f)=>{a.onerror=D=>{f(D.target.error)},a.onsuccess=D=>{l(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new He((a,l)=>{s.onerror=f=>{l(f.target.error)},s.onsuccess=f=>{a(f.target.result)}})}J(e,t){wt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(l,f,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new He((s,a)=>{t.onerror=l=>{const f=su(l.target.error);a(f)},t.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(D=>{D?f.continue():s()}):s()}})}W(e,t){const s=[];return new He((a,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const D=f.target.result;if(!D)return void a();const N=new Ga(D),U=t(D.primaryKey,D.value,N);if(U instanceof He){const Q=U.catch(ye=>(N.done(),He.reject(ye)));s.push(Q)}N.isDone?a():null===N.K?D.continue():D.continue(N.K)}}).next(()=>He.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(i){return new He((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const a=su(s.target.error);t(a)}})}let ba=!1;function su(i){const e=so.S((0,he.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Dt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ba||(ba=!0,setTimeout(()=>{throw s},0)),s}}return i}class Pu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;wt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,p.Z)(function*(){t.task=null;try{wt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Li(s)?wt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Zo(s)}yield t.et(6e4)}))}}class kc{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,p.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,l=!0;return He.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!s.has(f))return wt("IndexBackiller",`Processing collection: ${f}`),this.it(e,f,a).next(D=>{a-=D,s.add(f)});l=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const f=l.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.rt(a,l)).next(D=>(wt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>f.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,l)=>{const f=Ru(l);nc(f,s)>0&&(s=f)}),new ps(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xi=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function za(i){return null==i}function aa(i){return 0===i&&1/i==-1/0}function _(i){return"number"==typeof i&&Number.isInteger(i)&&!aa(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function E(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=A(e)),e=y(i.get(t),e);return A(e)}function y(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const l=i.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function A(i){return i+"\x01\x01"}function O(i){const e=i.length;if(an(e>=2),2===e)return an("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Dn.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const f=i.indexOf("\x01",l);switch((f<0||f>t)&&Zt(),i.charAt(f+1)){case"\x01":const D=i.substring(l,f);let N;0===a.length?N=D:(a+=D,N=a,a=""),s.push(N);break;case"\x10":a+=i.substring(l,f),a+="\0";break;case"\x11":a+=i.substring(l,f+1);break;default:Zt()}l=f+2}return new Dn(s)}const z=["userId","batchId"];function de(i,e){return[i,E(e)]}function pe(i,e,t){return[i,E(e),t]}const tt={},Vt=["prefixPath","collectionGroup","readTime","documentId"],Un=["prefixPath","collectionGroup","documentId"],rn=["collectionGroup","readTime","prefixPath","documentId"],lr=["canonicalId","targetId"],As=["targetId","path"],fi=["path","targetId"],oo=["collectionId","parent"],Qr=["indexId","uid"],Ou=["uid","sequenceNumber"],Ta=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Aa=["indexId","uid","orderedDocumentKey"],ic=["userId","collectionPath","documentId"],ou=["userId","collectionPath","largestBatchId"],Ss=["userId","collectionGroup","largestBatchId"],au=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vi=[...au,"documentOverlays"],Nu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fc=Nu,sc=[...Fc,"indexConfiguration","indexState","indexEntries"];class ua extends rc{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hi(i,e){const t=Bt(i);return so.M(t.ht,e)}function Sa(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Wa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Lc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ir{constructor(e,t){this.comparator=e,this.root=t||vi.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??vi.RED,this.left=a??vi.EMPTY,this.right=l??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new vi(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return vi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zt();const e=this.left.check();if(e!==this.right.check())throw Zt();return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1,vi.EMPTY=new class{constructor(){this.size=0}get key(){throw Zt()}get value(){throw Zt()}get color(){throw Zt()}get left(){throw Zt()}get right(){throw Zt()}copy(i,e,t,s,a){return this}insert(i,e,t){return new vi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oi{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vc(this.data.getIterator())}getIteratorFrom(e){return new Vc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new oi(this.comparator);return t.data=e,t}}class Vc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Po(i){return i.hasNext()?i.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new es([])}unionWith(e){let t=new oi(er.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class oc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tl(){return typeof atob<"u"}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new oc("Invalid base64 string: "+a):a}}(e);return new bi(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const cu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(i){if(an(!!i),"string"==typeof i){let e=0;const t=cu.exec(i);if(an(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ai(i.seconds),nanos:ai(i.nanos)}}function ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ma(i){return"string"==typeof i?bi.fromBase64String(i):bi.fromUint8Array(i)}function ku(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fu(i){const e=i.mapValue.fields.__previous_value__;return ku(e)?Fu(e):e}function ac(i){const e=mo(i.mapValue.fields.__local_write_time__.timestampValue);return new $r(e.seconds,e.nanos)}class Uc{constructor(e,t,s,a,l,f,D,N,U){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=D,this.longPollingOptions=N,this.useFetchStreams=U}}class Yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xa={nullValue:"NULL_VALUE"};function ao(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ku(i)?4:td(i)?9007199254740991:10:Zt()}function yo(i,e){if(i===e)return!0;const t=ao(i);if(t!==ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ac(i).isEqual(ac(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=mo(s.timestampValue),f=mo(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,Ma(i.bytesValue).isEqual(Ma(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return ai(s.geoPointValue.latitude)===ai(a.geoPointValue.latitude)&&ai(s.geoPointValue.longitude)===ai(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ai(s.integerValue)===ai(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ai(s.doubleValue),f=ai(a.doubleValue);return l===f?aa(l)===aa(f):isNaN(l)&&isNaN(f)}return!1}(i,e);case 9:return bs(i.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(s,a){const l=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Sa(l)!==Sa(f))return!1;for(const D in l)if(l.hasOwnProperty(D)&&(void 0===f[D]||!yo(l[D],f[D])))return!1;return!0}(i,e);default:return Zt()}var a}function ca(i,e){return void 0!==(i.values||[]).find(t=>yo(t,e))}function Jo(i,e){if(i===e)return 0;const t=ao(i),s=ao(e);if(t!==s)return Sn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Sn(i.booleanValue,e.booleanValue);case 2:return function(a,l){const f=ai(a.integerValue||a.doubleValue),D=ai(l.integerValue||l.doubleValue);return f<D?-1:f>D?1:f===D?0:isNaN(f)?isNaN(D)?0:-1:1}(i,e);case 3:return lu(i.timestampValue,e.timestampValue);case 4:return lu(ac(i),ac(e));case 5:return Sn(i.stringValue,e.stringValue);case 6:return function(a,l){const f=Ma(a),D=Ma(l);return f.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(a,l){const f=a.split("/"),D=l.split("/");for(let N=0;N<f.length&&N<D.length;N++){const U=Sn(f[N],D[N]);if(0!==U)return U}return Sn(f.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,l){const f=Sn(ai(a.latitude),ai(l.latitude));return 0!==f?f:Sn(ai(a.longitude),ai(l.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,l){const f=a.values||[],D=l.values||[];for(let N=0;N<f.length&&N<D.length;++N){const U=Jo(f[N],D[N]);if(U)return U}return Sn(f.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Qo.mapValue&&l===Qo.mapValue)return 0;if(a===Qo.mapValue)return 1;if(l===Qo.mapValue)return-1;const f=a.fields||{},D=Object.keys(f),N=l.fields||{},U=Object.keys(N);D.sort(),U.sort();for(let Q=0;Q<D.length&&Q<U.length;++Q){const ye=Sn(D[Q],U[Q]);if(0!==ye)return ye;const $e=Jo(f[D[Q]],N[U[Q]]);if(0!==$e)return $e}return Sn(D.length,U.length)}(i.mapValue,e.mapValue);default:throw Zt()}}function lu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Sn(i,e);const t=mo(i),s=mo(e),a=Sn(t.seconds,s.seconds);return 0!==a?a:Sn(t.nanos,s.nanos)}function Ka(i){return du(i)}function du(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=mo(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ma(i.bytesValue).toBase64():"referenceValue"in i?jt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let a="[",l=!0;for(const f of s.values||[])l?l=!1:a+=",",a+=du(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",f=!0;for(const D of a)f?f=!1:l+=",",l+=`${D}:${du(s.fields[D])}`;return l+"}"}(i.mapValue):Zt();var e}function Ra(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ed(i){return!!i&&"integerValue"in i}function uc(i){return!!i&&"arrayValue"in i}function hu(i){return!!i&&"nullValue"in i}function fu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function cc(i){return!!i&&"mapValue"in i}function Vu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Wa(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Vu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function la(i){return"nullValue"in i?xa:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ra(Yo.empty(),jt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Zt()}function nd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ra(Yo.empty(),jt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Qo:Zt()}function da(i,e){const t=Jo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bc(i,e){const t=Jo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=er.emptyPath(),s={},a=[];e.forEach((f,D)=>{if(!t.isImmediateParentOf(D)){const N=this.getFieldsMap(t);this.applyChanges(N,s,a),s={},a=[],t=D.popLast()}f?s[D.lastSegment()]=Vu(f):a.push(D.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];cc(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Wa(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new ts(Vu(this.value))}}function lc(i){const e=[];return Wa(i.fields,(t,s)=>{const a=new er([t]);if(cc(s)){const l=lc(s.mapValue).fields;if(0===l.length)e.push(a);else for(const f of l)e.push(a.child(f))}else e.push(a)}),new es(e)}class Zr{constructor(e,t,s,a,l,f,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=f,this.documentState=D}static newInvalidDocument(e){return new Zr(e,0,pn.min(),pn.min(),pn.min(),ts.empty(),0)}static newFoundDocument(e,t,s,a){return new Zr(e,1,t,pn.min(),s,a,0)}static newNoDocument(e,t){return new Zr(e,2,t,pn.min(),pn.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new Zr(e,3,t,pn.min(),pn.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ns{constructor(e,t){this.position=e,this.inclusive=t}}function rd(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const l=e[a],f=i.position[a];if(s=l.field.isKeyField()?jt.comparator(jt.fromName(f.referenceValue),t.key):Jo(f,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function w(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!yo(i.position[t],e.position[t]))return!1;return!0}class T{constructor(e,t="asc"){this.field=e,this.dir=t}}function j(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class re{}class ge extends re{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ui(e,t,s):"array-contains"===t?new Pa(e,s):"in"===t?new gu(e,s):"not-in"===t?new Rf(e,s):"array-contains-any"===t?new Pf(e,s):new ge(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ha(e,s):new pu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jo(t,this.value)):null!==t&&ao(this.value)===ao(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class be extends re{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new be(e,t)}matches(e){return rt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rt(i){return"and"===i.op}function Kt(i){return"or"===i.op}function Ht(i){return gn(i)&&rt(i)}function gn(i){for(const e of i.filters)if(e instanceof be)return!1;return!0}function En(i){if(i instanceof ge)return i.field.canonicalString()+i.op.toString()+Ka(i.value);if(Ht(i))return i.filters.map(e=>En(e)).join(",");{const e=i.filters.map(t=>En(t)).join(",");return`${i.op}(${e})`}}function Bn(i,e){return i instanceof ge?(t=i,(s=e)instanceof ge&&t.op===s.op&&t.field.isEqual(s.field)&&yo(t.value,s.value)):i instanceof be?function(t,s){return s instanceof be&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,l,f)=>a&&Bn(l,s.filters[f]),!0)}(i,e):void Zt();var t,s}function gs(i,e){const t=i.filters.concat(e);return be.create(t,i.op)}function _i(i){return i instanceof ge?`${(e=i).field.canonicalString()} ${e.op} ${Ka(e.value)}`:i instanceof be?function(e){return e.op.toString()+" {"+e.getFilters().map(_i).join(" ,")+"}"}(i):"Filter";var e}class Ui extends ge{constructor(e,t,s){super(e,t,s),this.key=jt.fromName(s.referenceValue)}matches(e){const t=jt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ha extends ge{constructor(e,t){super(e,"in",t),this.keys=uo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pu extends ge{constructor(e,t){super(e,"not-in",t),this.keys=uo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uo(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>jt.fromName(s.referenceValue))}class Pa extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uc(t)&&ca(t.arrayValue,this.value)}}class gu extends ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ca(this.value.arrayValue,t)}}class Rf extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ca(this.value.arrayValue,t)}}class Pf extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ca(this.value.arrayValue,s))}}class id{constructor(e,t=null,s=[],a=[],l=null,f=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=f,this.endAt=D,this.dt=null}}function jc(i,e=null,t=[],s=[],a=null,l=null,f=null){return new id(i,e,t,s,a,l,f)}function Oa(i){const e=Bt(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>En(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),za(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),e.dt=t}return e.dt}function dc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!j(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Bn(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!w(i.startAt,e.startAt)&&w(i.endAt,e.endAt)}function Uu(i){return jt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function hc(i,e){return i.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function ch(i,e,t){let s=xa,a=!0;for(const l of hc(i,e)){let f=xa,D=!0;switch(l.op){case"<":case"<=":f=la(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,D=!1;break;case"!=":case"not-in":f=xa}da({value:s,inclusive:a},{value:f,inclusive:D})<0&&(s=f,a=D)}if(null!==t)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const f=t.position[l];da({value:s,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}function sd(i,e,t){let s=Qo,a=!0;for(const l of hc(i,e)){let f=Qo,D=!0;switch(l.op){case">=":case">":f=nd(l.value),D=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,D=!1;break;case"!=":case"not-in":f=Qo}Bc({value:s,inclusive:a},{value:f,inclusive:D})>0&&(s=f,a=D)}if(null!==t)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const f=t.position[l];Bc({value:s,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}class qa{constructor(e,t=null,s=[],a=[],l=null,f="F",D=null,N=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=f,this.startAt=D,this.endAt=N,this.wt=null,this._t=null}}function fc(i,e,t,s,a,l,f,D){return new qa(i,e,t,s,a,l,f,D)}function Bu(i){return new qa(i)}function lh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Al(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function v(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function d(i){return null!==i.collectionGroup}function g(i){const e=Bt(i);if(null===e.wt){e.wt=[];const t=v(e),s=Al(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new T(t)),e.wt.push(new T(er.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new T(er.keyField(),l))}}}return e.wt}function I(i){const e=Bt(i);if(!e._t)if("F"===e.limitType)e._t=jc(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of g(e))t.push(new T(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new ns(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ns(e.startAt.position,e.startAt.inclusive):null;e._t=jc(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function $(i,e){e.getFirstInequalityField(),v(i);const t=i.filters.concat([e]);return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function J(i,e,t){return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function xe(i,e){return dc(I(i),I(e))&&i.limitType===e.limitType}function nt(i){return`${Oa(I(i))}|lt:${i.limitType}`}function Lt(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>_i(s)).join(", ")}]`),za(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),`Target(${t})`}(I(i))}; limitType=${i.limitType})`}function Qt(i,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):jt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(i,e)&&function(t,s){for(const a of g(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(a,l,f){const D=rd(a,l,f);return a.inclusive?D<=0:D<0}(t.startAt,g(t),s)||t.endAt&&!function(a,l,f){const D=rd(a,l,f);return a.inclusive?D>=0:D>0}(t.endAt,g(t),s)));var t,s}function Cn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function pr(i){return(e,t)=>{let s=!1;for(const a of g(i)){const l=vo(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function vo(i,e,t){const s=i.field.isKeyField()?jt.comparator(e.key,t.key):function(a,l,f){const D=l.data.field(a),N=f.data.field(a);return null!==D&&null!==N?Jo(D,N):Zt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Zt()}}class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return Lc(this.inner)}size(){return this.innerSize}}const $c=new Ir(jt.comparator);function Ms(){return $c}const Hc=new Ir(jt.comparator);function mu(...i){let e=Hc;for(const t of i)e=e.insert(t.key,t);return e}function od(i){let e=Hc;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xo(){return ju()}function Sl(){return ju()}function ju(){return new Hs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Za=new Ir(jt.comparator),ad=new oi(jt.comparator);function nr(...i){let e=ad;for(const t of i)e=e.add(t);return e}const ud=new oi(Sn);function dh(){return ud}function cd(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function fg(i){return{integerValue:""+i}}function Of(i,e){return _(e)?fg(e):cd(i,e)}class ld{constructor(){this._=void 0}}function pg(i,e,t){return i instanceof $u?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&ku(a)&&(a=Fu(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):i instanceof yu?Ff(i,e):i instanceof Hu?hh(i,e):function(s,a){const l=kf(s,a),f=Ml(l)+Ml(s.gt);return ed(l)&&ed(s.gt)?fg(f):cd(s.serializer,f)}(i,e)}function Nf(i,e,t){return i instanceof yu?Ff(i,e):i instanceof Hu?hh(i,e):t}function kf(i,e){return i instanceof pc?ed(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class $u extends ld{}class yu extends ld{constructor(e){super(),this.elements=e}}function Ff(i,e){const t=gg(e);for(const s of i.elements)t.some(a=>yo(a,s))||t.push(s);return{arrayValue:{values:t}}}class Hu extends ld{constructor(e){super(),this.elements=e}}function hh(i,e){let t=gg(e);for(const s of i.elements)t=t.filter(a=>!yo(a,s));return{arrayValue:{values:t}}}class pc extends ld{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Ml(i){return ai(i.integerValue||i.doubleValue)}function gg(i){return uc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xl{constructor(e,t){this.field=e,this.transform=t}}class xy{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Gc{}function fh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new gc(i.key,Ti.none()):new Pl(i.key,i.data,Ti.none());{const t=i.data,s=ts.empty();let a=new oi(er.comparator);for(let l of e.fields)if(!a.has(l)){let f=t.field(l);null===f&&l.length>1&&(l=l.popLast(),f=t.field(l)),null===f?s.delete(l):s.set(l,f),a=a.add(l)}return new Ya(i.key,s,new es(a.toArray()),Ti.none())}}function zc(i,e,t){i instanceof Pl?function(s,a,l){const f=s.value.clone(),D=Lf(s.fieldTransforms,a,l.transformResults);f.setAll(D),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(i,e,t):i instanceof Ya?function(s,a,l){if(!Rl(s.precondition,a))return void a.convertToUnknownDocument(l.version);const f=Lf(s.fieldTransforms,a,l.transformResults),D=a.data;D.setAll(mg(s)),D.setAll(f),a.convertToFoundDocument(l.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dd(i,e,t,s){return i instanceof Pl?function(a,l,f,D){if(!Rl(a.precondition,l))return f;const N=a.value.clone(),U=hd(a.fieldTransforms,D,l);return N.setAll(U),l.convertToFoundDocument(l.version,N).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ya?function(a,l,f,D){if(!Rl(a.precondition,l))return f;const N=hd(a.fieldTransforms,D,l),U=l.data;return U.setAll(mg(a)),U.setAll(N),l.convertToFoundDocument(l.version,U).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(Q=>Q.field))}(i,e,t,s):(f=t,Rl(i.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f);var l,f}function Ry(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),l=kf(s.transform,a||null);null!=l&&(null===t&&(t=ts.empty()),t.set(s.field,l))}return t||null}function Py(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&bs(t,s,(a,l)=>function My(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof yu&&s instanceof yu||t instanceof Hu&&s instanceof Hu?bs(t.elements,s.elements,yo):t instanceof pc&&s instanceof pc?yo(t.gt,s.gt):t instanceof $u&&s instanceof $u);var t,s}(a,l))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Pl extends Gc{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ya extends Gc{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function mg(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Lf(i,e,t){const s=new Map;an(i.length===t.length);for(let a=0;a<t.length;a++){const l=i[a],f=l.transform,D=e.data.field(l.field);s.set(l.field,Nf(f,D,t[a]))}return s}function hd(i,e,t){const s=new Map;for(const a of i){const l=a.transform,f=t.data.field(a.field);s.set(a.field,pg(l,f,e))}return s}class gc extends Gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ph extends Gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&zc(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Sl();return this.mutations.forEach(a=>{const l=e.get(a.key),f=l.overlayedDocument;let D=this.applyToLocalView(f,l.mutatedFields);D=t.has(a.key)?null:D;const N=fh(f,D);null!==N&&s.set(a.key,N),f.isValidDocument()||f.convertToNoDocument(pn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nr())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(t,s)=>Py(t,s))&&bs(this.baseMutations,e.baseMutations,(t,s)=>Py(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){an(e.mutations.length===s.length);let a=Za;const l=e.mutations;for(let f=0;f<l.length;f++)a=a.insert(l[f].key,s[f].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,t){this.count=e,this.unchangedNames=t}}var ms,Vr;function yg(i){switch(i){default:return Zt();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function Gu(i){if(void 0===i)return wr("GRPC error has no .code"),We.UNKNOWN;switch(i){case ms.OK:return We.OK;case ms.CANCELLED:return We.CANCELLED;case ms.UNKNOWN:return We.UNKNOWN;case ms.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ms.INTERNAL:return We.INTERNAL;case ms.UNAVAILABLE:return We.UNAVAILABLE;case ms.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ms.NOT_FOUND:return We.NOT_FOUND;case ms.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ms.ABORTED:return We.ABORTED;case ms.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ms.DATA_LOSS:return We.DATA_LOSS;default:return Zt()}}(Vr=ms||(ms={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";class Wc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vh}static getOrCreateInstance(){return null===vh&&(vh=new Wc),vh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vh=null;function ky(){return new TextEncoder}const H_=new Qn([4294967295,4294967295],0);function Fy(i){const e=ky().encode(i),t=new fr;return t.update(e),new Uint8Array(t.digest())}function Ly(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Qn([t,s],0),new Qn([a,l],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ol(`Invalid padding: ${t}`);if(s<0)throw new Ol(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Ol(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Ol(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Qn.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(Qn.fromNumber(s)));return 1===a.compare(H_)&&(a=new Qn([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fy(e),[s,a]=Ly(t);for(let l=0;l<this.hashCount;l++){const f=this.Et(s,a,l);if(!this.At(f))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new vg(l,a,t);return s.forEach(D=>f.insert(D)),f}insert(e){if(0===this.It)return;const t=Fy(e),[s,a]=Ly(t);for(let l=0;l<this.hashCount;l++){const f=this.Et(s,a,l);this.Rt(f)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fd(pn.min(),a,new Ir(Sn),Ms(),nr())}}class pd{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pd(s,t,nr(),nr(),nr())}}class _h{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _g{constructor(e,t){this.targetId=e,this.Vt=t}}class Eh{constructor(e,t,s=bi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class vu{constructor(){this.St=0,this.Dt=Uf(),this.Ct=bi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=nr(),t=nr(),s=nr();return this.Dt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Zt()}}),new pd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Uf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ms(),this.zt=Vf(),this.Wt=new Ir(Sn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,l=this.se(s);if(l){const f=l.target;if(Uu(f))if(0===a){const D=new jt(f.path);this.Yt(s,D,Zr.newNoDocument(D,pn.min()))}else an(1===a);else{const D=this.ie(s);if(D!==a){const N=this.re(e,D);0!==N&&(this.ee(s),this.Wt=this.Wt.insert(s,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wc.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(U,Q,ye){var $e,at,kt,sn,un,dr;const Ur={localCacheCount:Q,existenceFilterCount:ye.count},Dr=ye.unchangedNames;return Dr&&(Ur.bloomFilter={applied:0===U,hashCount:null!==($e=Dr?.hashCount)&&void 0!==$e?$e:0,bitmapLength:null!==(sn=null===(kt=null===(at=Dr?.bits)||void 0===at?void 0:at.bitmap)||void 0===kt?void 0:kt.length)&&void 0!==sn?sn:0,padding:null!==(dr=null===(un=Dr?.bits)||void 0===un?void 0:un.padding)&&void 0!==dr?dr:0}),Ur}(N,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:l="",padding:f=0},hashCount:D=0}=s;let N,U;try{N=Ma(l).toUint8Array()}catch(Q){if(Q instanceof oc)return Lr("Decoding the base64 bloom filter in existence filter failed ("+Q.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Q}try{U=new vg(N,f,D)}catch(Q){return Lr(Q instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",Q),1}return 0===U.It?1:a!==t-this.oe(e.targetId,U)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(l=>{const f=this.Gt.ue(),D=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;t.vt(D)||(this.Yt(e,l,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((l,f)=>{const D=this.se(f);if(D){if(l.current&&Uu(D.target)){const N=new jt(D.target.path);null!==this.jt.get(N)||this.ae(f,N)||this.Yt(f,N,Zr.newNoDocument(N,e))}l.Mt&&(t.set(f,l.Ot()),l.Ft())}});let s=nr();this.zt.forEach((l,f)=>{let D=!0;f.forEachWhile(N=>{const U=this.se(N);return!U||"TargetPurposeLimboResolution"===U.purpose||(D=!1,!1)}),D&&(s=s.add(l))}),this.jt.forEach((l,f)=>f.setReadTime(e));const a=new fd(e,t,this.Wt,this.jt,s);return this.jt=Ms(),this.zt=Vf(),this.Wt=new Ir(Sn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new vu,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new oi(Sn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||wt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new vu),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new Ir(jt.comparator)}function Uf(){return new Ir(jt.comparator)}const Eg={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z_={and:"AND",or:"OR"};class W_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(i,e){return i.useProto3Json||za(e)?e:{value:e}}function mc(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function K_(i,e){return mc(i,e.toTimestamp())}function Gi(i){return an(!!i),pn.fromTimestamp(function(e){const t=mo(e);return new $r(t.seconds,t.nanos)}(i))}function Bf(i,e){return(t=i,new Dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wg(i){const e=Dn.fromString(i);return an(Gf(e)),e}function yd(i,e){return Bf(i.databaseId,e.path)}function _u(i,e){const t=wg(e);if(t.get(1)!==i.databaseId.projectId)throw new Dt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Dt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new jt(Ih(t))}function wh(i,e){return Bf(i.databaseId,e)}function vd(i){const e=wg(i);return 4===e.length?Dn.emptyPath():Ih(e)}function _d(i){return new Dn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ih(i){return an(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ig(i,e,t){return{name:yd(i,e),fields:t.value.mapValue.fields}}function rs(i,e,t){const s=_u(i,e.name),a=Gi(e.updateTime),l=e.createTime?Gi(e.createTime):pn.min(),f=new ts({mapValue:{fields:e.fields}}),D=Zr.newFoundDocument(s,a,l,f);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function Kc(i,e){let t;if(e instanceof Pl)t={update:Ig(i,e.key,e.value)};else if(e instanceof gc)t={delete:yd(i,e.key)};else if(e instanceof Ya)t={update:Ig(i,e.key,e.data),updateMask:Gy(e.fieldMask)};else{if(!(e instanceof ph))return Zt();t={verify:yd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const f=l.transform;if(f instanceof $u)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof yu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Hu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:l.field.canonicalString(),increment:f.gt};throw Zt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:K_(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Zt()),t;var a}function Dh(i,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ti.updateTime(Gi(a.updateTime)):void 0!==a.exists?Ti.exists(a.exists):Ti.none():Ti.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,f){let D=null;"setToServerValue"in f?(an("REQUEST_TIME"===f.setToServerValue),D=new $u):"appendMissingElements"in f?D=new yu(f.appendMissingElements.values||[]):"removeAllFromArray"in f?D=new Hu(f.removeAllFromArray.values||[]):"increment"in f?D=new pc(l,f.increment):Zt();const N=er.fromServerFormat(f.fieldPath);return new xl(N,D)}(i,a)):[];var a;if(e.update){const a=_u(i,e.update.name),l=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new es((e.updateMask.fieldPaths||[]).map(U=>er.fromServerFormat(U)));return new Ya(a,l,f,t,s)}return new Pl(a,l,t,s)}if(e.delete){const a=_u(i,e.delete);return new gc(a,t)}if(e.verify){const a=_u(i,e.verify);return new ph(a,t)}return Zt()}function Dg(i,e){return{documents:[wh(i,e.path)]}}function jf(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wh(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wh(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(N){if(0!==N.length)return Hf(be.create(N,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(N){if(0!==N.length)return N.map(U=>{return{field:zu((Q=U).field),direction:q_(Q.dir)};var Q})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=md(i,e.limit);var D,N;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(N=e.endAt).inclusive,values:N.position}),t}function Cg(i){let e=vd(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){an(1===s);const Q=t.from[0];Q.allDescendants?a=Q.collectionId:e=e.child(Q.collectionId)}let l=[];t.where&&(l=function(Q){const ye=Hy(Q);return ye instanceof be&&Ht(ye)?ye.getFilters():[ye]}(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(Q=>{return new T(qc((ye=Q).field),function($e){switch($e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ye.direction));var ye}));let D=null;t.limit&&(D=function(Q){let ye;return ye="object"==typeof Q?Q.value:Q,za(ye)?null:ye}(t.limit));let N=null;var Q;t.startAt&&(N=new ns((Q=t.startAt).values||[],!!Q.before));let U=null;return t.endAt&&(U=function(Q){return new ns(Q.values||[],!Q.before)}(t.endAt)),fc(e,a,f,l,D,"F",N,U)}function Hy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qc(e.unaryFilter.field);return ge.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=qc(e.unaryFilter.field);return ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=qc(e.unaryFilter.field);return ge.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=qc(e.unaryFilter.field);return ge.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Zt()}}(i):void 0!==i.fieldFilter?ge.create(qc((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return be.create(e.compositeFilter.filters.map(t=>Hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Zt()}}(e.compositeFilter.op))}(i):Zt();var e}function q_(i){return Eg[i]}function Ed(i){return G_[i]}function $f(i){return z_[i]}function zu(i){return{fieldPath:i.canonicalString()}}function qc(i){return er.fromServerFormat(i.fieldPath)}function Hf(i){return i instanceof ge?function(e){if("=="===e.op){if(fu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NAN"}};if(hu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NAN"}};if(hu(e.value))return{unaryFilter:{field:zu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(e.field),op:Ed(e.op),value:e.value}}}(i):i instanceof be?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:$f(e.op),filters:t}}}(i):Zt()}function Gy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Eu{constructor(e,t,s,a,l=pn.min(),f=pn.min(),D=bi.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=D,this.expectedCount=N}withSequenceNumber(e){return new Eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ch{constructor(e){this.fe=e}}function bg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yd(a=i.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:mc(a,l.version.toTimestamp()),createTime:mc(a,l.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:yc(e.version)};else{if(!e.isUnknownDocument())return Zt();s.unknownDocument={path:t.path.toArray(),version:yc(e.version)}}var a,l;return s}function Nl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function yc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vc(i){const e=new $r(i.seconds,i.nanoseconds);return pn.fromTimestamp(e)}function fa(i,e){const t=(e.baseMutations||[]).map(l=>Dh(i.fe,l));for(let l=0;l<e.mutations.length-1;++l){const f=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(f.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>Dh(i.fe,l)),a=$r.fromMillis(e.localWriteTimeMs);return new gh(e.batchId,a,t,s)}function wd(i){const e=vc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?vc(i.lastLimboFreeSnapshotVersion):pn.min();let s;var a;return void 0!==i.query.documents?(an(1===(a=i.query).documents.length),s=I(Bu(vd(a.documents[0])))):s=I(Cg(i.query)),new Eu(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,bi.fromBase64String(i.resumeToken))}function bh(i,e){const t=yc(e.snapshotVersion),s=yc(e.lastLimboFreeSnapshotVersion);let a;a=Uu(e.target)?Dg(i.fe,e.target):jf(i.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function kl(i){const e=Cg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?J(e,e.limit,"L"):e}function zf(i,e){return new yh(e.largestBatchId,Dh(i.fe,e.overlayMutation))}function Th(i,e){const t=e.path.lastSegment();return[i,E(e.path.popLast()),t]}function Id(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:yc(s.readTime),documentKey:E(s.documentKey.path),largestBatchId:s.largestBatchId}}class Zc{getBundleMetadata(e,t){return Wf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:vc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(s=t).id,createTime:yc(Gi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ah(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:kl(a.bundledQuery),readTime:vc(a.readTime)};var a})}saveNamedQuery(e,t){return Ah(e).put({name:(s=t).name,readTime:yc(Gi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Wf(i){return Hi(i,"bundles")}function Ah(i){return Hi(i,"namedQueries")}class Sh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sh(e,t.uid||"")}getOverlay(e,t){return Dd(e).get(Th(this.userId,t)).next(s=>s?zf(this.serializer,s):null)}getOverlays(e,t){const s=Xo();return He.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,f)=>{const D=new yh(t,f);a.push(this.we(e,D))}),He.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(f=>a.add(E(f.getCollectionPath())));const l=[];return a.forEach(f=>{const D=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,s+1],!1,!0);l.push(Dd(e).J("collectionPathOverlayIndex",D))}),He.waitFor(l)}getOverlaysForCollection(e,t,s){const a=Xo(),l=E(t),f=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Dd(e).j("collectionPathOverlayIndex",f).next(D=>{for(const N of D){const U=zf(this.serializer,N);a.set(U.getKey(),U)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=Xo();let f;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dd(e).X({index:"collectionGroupOverlayIndex",range:D},(N,U,Q)=>{const ye=zf(this.serializer,U);l.size()<a||ye.largestBatchId===f?(l.set(ye.getKey(),ye),f=ye.largestBatchId):Q.done()}).next(()=>l)}we(e,t){return Dd(e).put(function(s,a,l){const[f,D,N]=Th(a,l.mutation.key);return{userId:a,collectionPath:D,documentId:N,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Kc(s.fe,l.mutation)}}(this.serializer,this.userId,t))}}function Dd(i){return Hi(i,"documentOverlays")}class _c{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ai(e.integerValue));else if("doubleValue"in e){const s=ai(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),aa(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ma(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Zt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),jt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Fl(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tg(i){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=Fl(255&t[a]);if(s+=l,8!==l)break}return s}(i);return Math.ceil(e/8)}_c.Ve=new _c;class zy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Wy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ky{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yc{constructor(){this.je=new zy,this.ze=new Wy(this.je),this.We=new Ky(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Qc{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Qc(this.indexId,this.documentKey,this.arrayValue,s)}}function Wu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ag(i.arrayValue,e.arrayValue),0!==t?t:(t=Ag(i.directionalValue,e.directionalValue),0!==t?t:jt.comparator(i.documentKey,e.documentKey)))}function Ag(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Sg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){an(e.collectionGroup===this.collectionId);const t=qo(e);if(void 0!==t&&!this.en(t))return!1;const s=Ia(e);let a=new Set,l=0,f=0;for(;l<s.length&&this.en(s[l]);++l)a=a.add(s[l].fieldPath.canonicalString());if(l===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const D=s[l];if(!this.nn(this.Ze,D)||!this.sn(this.Ye[f++],D))return!1}++l}for(;l<s.length;++l){const D=s[l];if(f>=this.Ye.length||!this.sn(this.Ye[f++],D))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qy(i){var e,t;if(an(i instanceof ge||i instanceof be),i instanceof ge){if(i instanceof gu){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>ge.create(i.field,"==",l)))||[];return be.create(a,"or")}return i}const s=i.filters.map(a=>qy(a));return be.create(s,i.op)}function Zy(i){if(0===i.getFilters().length)return[];const e=el(qy(i));return an(Xc(e)),Jc(e)||Kf(e)?[e]:e.getFilters()}function Jc(i){return i instanceof ge}function Kf(i){return i instanceof be&&Ht(i)}function Xc(i){return Jc(i)||Kf(i)||function(e){if(e instanceof be&&Kt(e)){for(const t of e.getFilters())if(!Jc(t)&&!Kf(t))return!1;return!0}return!1}(i)}function el(i){if(an(i instanceof ge||i instanceof be),i instanceof ge)return i;if(1===i.filters.length)return el(i.filters[0]);const e=i.filters.map(s=>el(s));let t=be.create(e,i.op);return t=Cd(t),Xc(t)?t:(an(t instanceof be),an(rt(t)),an(t.filters.length>1),t.filters.reduce((s,a)=>qf(s,a)))}function qf(i,e){let t;return an(i instanceof ge||i instanceof be),an(e instanceof ge||e instanceof be),t=i instanceof ge?e instanceof ge?be.create([i,e],"and"):Yy(i,e):e instanceof ge?Yy(e,i):function(s,a){if(an(s.filters.length>0&&a.filters.length>0),rt(s)&&rt(a))return gs(s,a.getFilters());const l=Kt(s)?s:a,f=Kt(s)?a:s,D=l.filters.map(N=>qf(N,f));return be.create(D,"or")}(i,e),Cd(t)}function Yy(i,e){if(rt(e))return gs(e,i.getFilters());{const t=e.filters.map(s=>qf(i,s));return be.create(t,"or")}}function Cd(i){if(an(i instanceof ge||i instanceof be),i instanceof ge)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(gn(i))return i;const t=e.map(a=>Cd(a)),s=[];return t.forEach(a=>{a instanceof ge?s.push(a):a instanceof be&&(a.op===i.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:be.create(s,i.op)}class Qy{constructor(){this.rn=new Zf}addToCollectionParentIndex(e,t){return this.rn.add(t),He.resolve()}getCollectionParents(e,t){return He.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return He.resolve()}deleteFieldIndex(e,t){return He.resolve()}getDocumentsMatchingTarget(e,t){return He.resolve(null)}getIndexType(e,t){return He.resolve(0)}getFieldIndexes(e,t){return He.resolve([])}getNextCollectionGroupToUpdate(e){return He.resolve(null)}getMinOffset(e,t){return He.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return He.resolve(ps.min())}updateCollectionGroup(e,t,s){return He.resolve()}updateIndexEntries(e,t){return He.resolve()}}class Zf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new oi(Dn.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new oi(Dn.comparator)).toArray()}}const Mh=new Uint8Array(0);class Mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Zf,this.un=new Hs(s=>Oa(s),(s,a)=>dc(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const l={collectionId:s,parent:E(a)};return Yf(e).put(l)}return He.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[ja(t),""],!1,!0);return Yf(e).j(a).next(l=>{for(const f of l){if(f.collectionId!==t)break;s.push(O(f.parent))}return s})}addFieldIndex(e,t){const s=Ll(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var f;delete a.indexId;const l=s.add(a);if(t.indexState){const f=bd(e);return l.next(D=>{f.put(Id(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Ll(e),a=bd(e),l=tl(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=tl(e);let a=!0;const l=new Map;return He.forEach(this.cn(t),f=>this.an(e,f).next(D=>{a&&(a=!!D),l.set(f,D)})).next(()=>{if(a){let f=nr();const D=[];return He.forEach(l,(N,U)=>{var Q;wt("IndexedDbIndexManager",`Using index ${Q=N,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(Dr=>`${Dr.fieldPath}:${Dr.kind}`).join(",")}`} to execute ${Oa(t)}`);const ye=function(Dr,Ws){const Os=qo(Ws);if(void 0===Os)return null;for(const Oi of hc(Dr,Os.fieldPath))switch(Oi.op){case"array-contains-any":return Oi.value.arrayValue.values||[];case"array-contains":return[Oi.value]}return null}(U,N),$e=function(Dr,Ws){const Os=new Map;for(const Oi of Ia(Ws))for(const Fo of hc(Dr,Oi.fieldPath))switch(Fo.op){case"==":case"in":Os.set(Oi.fieldPath.canonicalString(),Fo.value);break;case"not-in":case"!=":return Os.set(Oi.fieldPath.canonicalString(),Fo.value),Array.from(Os.values())}return null}(U,N),at=function(Dr,Ws){const Os=[];let Oi=!0;for(const Fo of Ia(Ws)){const Tu=0===Fo.kind?ch(Dr,Fo.fieldPath,Dr.startAt):sd(Dr,Fo.fieldPath,Dr.startAt);Os.push(Tu.value),Oi&&(Oi=Tu.inclusive)}return new ns(Os,Oi)}(U,N),kt=function(Dr,Ws){const Os=[];let Oi=!0;for(const Fo of Ia(Ws)){const Tu=0===Fo.kind?sd(Dr,Fo.fieldPath,Dr.endAt):ch(Dr,Fo.fieldPath,Dr.endAt);Os.push(Tu.value),Oi&&(Oi=Tu.inclusive)}return new ns(Os,Oi)}(U,N),sn=this.hn(N,U,at),un=this.hn(N,U,kt),dr=this.ln(N,U,$e),Ur=this.fn(N.indexId,ye,sn,at.inclusive,un,kt.inclusive,dr);return He.forEach(Ur,Dr=>s.H(Dr,t.limit).next(Ws=>{Ws.forEach(Os=>{const Oi=jt.fromSegments(Os.documentKey);f.has(Oi)||(f=f.add(Oi),D.push(Oi))})}))}).next(()=>D)}return He.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Zy(be.create(e.filters,"and")).map(s=>jc(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,l,f,D){const N=(null!=t?t.length:1)*Math.max(s.length,l.length),U=N/(null!=t?t.length:1),Q=[];for(let ye=0;ye<N;++ye){const $e=t?this.dn(t[ye/U]):Mh,at=this.wn(e,$e,s[ye%U],a),kt=this._n(e,$e,l[ye%U],f),sn=D.map(un=>this.wn(e,$e,un,!0));Q.push(...this.createRange(at,kt,sn))}return Q}wn(e,t,s,a){const l=new Qc(e,jt.empty(),t,s);return a?l:l.Je()}_n(e,t,s,a){const l=new Qc(e,jt.empty(),t,s);return a?l.Je():l}an(e,t){const s=new Sg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let f=null;for(const D of l)s.tn(D)&&(!f||D.fields.length>f.fields.length)&&(f=D);return f})}getIndexType(e,t){let s=2;const a=this.cn(t);return He.forEach(a,l=>this.an(e,l).next(f=>{f?0!==s&&f.fields.length<function(D){let N=new oi(er.comparator),U=!1;for(const Q of D.filters)for(const ye of Q.getFlattenedFilters())ye.field.isKeyField()||("array-contains"===ye.op||"array-contains-any"===ye.op?U=!0:N=N.add(ye.field));for(const Q of D.orderBy)Q.field.isKeyField()||(N=N.add(Q.field));return N.size+(U?1:0)}(l)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Yc;for(const a of Ia(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const f=s.He(a.kind);_c.Ve._e(l,f)}return s.Qe()}dn(e){const t=new Yc;return _c.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Yc;return _c.Ve._e(Ra(this.databaseId,t),s.He(function(a){const l=Ia(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Yc);let l=0;for(const f of Ia(e)){const D=s[l++];for(const N of a)if(this.yn(t,f.fieldPath)&&uc(D))a=this.pn(a,f,D);else{const U=N.He(f.kind);_c.Ve._e(D,U)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],l=[];for(const f of s.arrayValue.values||[])for(const D of a){const N=new Yc;N.seed(D.Qe()),_c.Ve._e(f,N.He(t.kind)),l.push(N)}return l}yn(e,t){return!!e.filters.find(s=>s instanceof ge&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Ll(e),a=bd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(l=>{const f=[];return He.forEach(l,D=>a.get([D.indexId,this.uid]).next(N=>{f.push(function(U,Q){const ye=Q?new xu(Q.sequenceNumber,new ps(vc(Q.readTime),new jt(O(Q.documentKey)),Q.largestBatchId)):xu.empty(),$e=U.fields.map(([at,kt])=>new Ro(er.fromServerFormat(at),kt));return new Ji(U.indexId,U.collectionGroup,$e,ye)}(D,N))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Sn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Ll(e),l=bd(e);return this.Tn(e).next(f=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>He.forEach(D,N=>l.put(Id(N.indexId,this.user,f,s)))))}updateIndexEntries(e,t){const s=new Map;return He.forEach(t,(a,l)=>{const f=s.get(a.collectionGroup);return(f?He.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),He.forEach(D,N=>this.En(e,a,N).next(U=>{const Q=this.An(l,N);return U.isEqual(Q)?He.resolve():this.vn(e,l,N,U,Q)}))))})}Rn(e,t,s,a){return tl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return tl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=tl(e);let l=new oi(Wu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(f,D)=>{l=l.add(new Qc(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>l)}An(e,t){let s=new oi(Wu);const a=this.mn(t,e);if(null==a)return s;const l=qo(t);if(null!=l){const f=e.data.field(l.fieldPath);if(uc(f))for(const D of f.arrayValue.values||[])s=s.add(new Qc(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Qc(t.indexId,e.key,Mh,a));return s}vn(e,t,s,a,l){wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(D,N,U,Q,ye){const $e=D.getIterator(),at=N.getIterator();let kt=Po($e),sn=Po(at);for(;kt||sn;){let un=!1,dr=!1;if(kt&&sn){const Ur=U(kt,sn);Ur<0?dr=!0:Ur>0&&(un=!0)}else null!=kt?dr=!0:un=!0;un?(Q(sn),sn=Po(at)):dr?(ye(kt),kt=Po($e)):(kt=Po($e),sn=Po(at))}}(a,l,Wu,D=>{f.push(this.Rn(e,t,s,D))},D=>{f.push(this.Pn(e,t,s,D))}),He.waitFor(f)}Tn(e){let t=1;return bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((f,D)=>Wu(f,D)).filter((f,D,N)=>!D||0!==Wu(f,N[D-1]));const a=[];a.push(e);for(const f of s){const D=Wu(f,e),N=Wu(f,t);if(0===D)a[0]=e.Je();else if(D>0&&N<0)a.push(f),a.push(f.Je());else if(N>0)break}a.push(t);const l=[];for(let f=0;f<a.length;f+=2){if(this.bn(a[f],a[f+1]))return[];l.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,Mh,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,Mh,[]]))}return l}bn(e,t){return Wu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return He.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Zt())).next(xh)}}function Yf(i){return Hi(i,"collectionParents")}function tl(i){return Hi(i,"indexEntries")}function Ll(i){return Hi(i,"indexConfiguration")}function bd(i){return Hi(i,"indexState")}function xh(i){an(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const a=i[s].indexState.offset;nc(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const Vl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),a=i.store("documentMutations"),l=[],f=IDBKeyRange.only(t.batchId);let D=0;const N=s.X({range:f},(Q,ye,$e)=>(D++,$e.delete()));l.push(N.next(()=>{an(1===D)}));const U=[];for(const Q of t.mutations){const ye=pe(e,Q.key.path,t.batchId);l.push(a.delete(ye)),U.push(Q.key)}return He.waitFor(l).next(()=>U)}function Rh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Zt();e=i.noDocument}return JSON.stringify(e).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class Ph{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){an(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Ph(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ec(e).X({index:"userMutationsIndex",range:s},(a,l,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=Ul(e),f=Ec(e);return f.add({}).next(D=>{an("number"==typeof D);const N=new gh(D,t,s,a),U=function($e,at,kt){const sn=kt.baseMutations.map(dr=>Kc($e.fe,dr)),un=kt.mutations.map(dr=>Kc($e.fe,dr));return{userId:at,batchId:kt.batchId,localWriteTimeMs:kt.localWriteTime.toMillis(),baseMutations:sn,mutations:un}}(this.serializer,this.userId,N),Q=[];let ye=new oi(($e,at)=>Sn($e.canonicalString(),at.canonicalString()));for(const $e of a){const at=pe(this.userId,$e.key.path,D);ye=ye.add($e.key.path.popLast()),Q.push(f.put(U)),Q.push(l.put(at,tt))}return ye.forEach($e=>{Q.push(this.indexManager.addToCollectionParentIndex(e,$e))}),e.addOnCommittedListener(()=>{this.Vn[D]=N.keys()}),He.waitFor(Q).next(()=>N)})}lookupMutationBatch(e,t){return Ec(e).get(t).next(s=>s?(an(s.userId===this.userId),fa(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?He.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Ec(e).X({index:"userMutationsIndex",range:a},(f,D,N)=>{D.userId===this.userId&&(an(D.batchId>=s),l=fa(this.serializer,D)),N.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Ec(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,l,f)=>{s=l.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ec(e).j("userMutationsIndex",t).next(s=>s.map(a=>fa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=de(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return Ul(e).X({range:a},(f,D,N)=>{const[U,Q,ye]=f,$e=O(Q);if(U===this.userId&&t.path.isEqual($e))return Ec(e).get(ye).next(at=>{if(!at)throw Zt();an(at.userId===this.userId),l.push(fa(this.serializer,at))});N.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new oi(Sn);const a=[];return t.forEach(l=>{const f=de(this.userId,l.path),D=IDBKeyRange.lowerBound(f),N=Ul(e).X({range:D},(U,Q,ye)=>{const[$e,at,kt]=U,sn=O(at);$e===this.userId&&l.path.isEqual(sn)?s=s.add(kt):ye.done()});a.push(N)}),He.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=de(this.userId,s),f=IDBKeyRange.lowerBound(l);let D=new oi(Sn);return Ul(e).X({range:f},(N,U,Q)=>{const[ye,$e,at]=N,kt=O($e);ye===this.userId&&s.isPrefixOf(kt)?kt.length===a&&(D=D.add(at)):Q.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Ec(e).get(l).next(f=>{if(null===f)throw Zt();an(f.userId===this.userId),s.push(fa(this.serializer,f))}))}),He.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return xg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),He.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return He.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Ul(e).X({range:s},(l,f,D)=>{if(l[0]===this.userId){const N=O(l[1]);a.push(N)}else D.done()}).next(()=>{an(0===a.length)})})}containsKey(e,t){return Rg(e,this.userId,t)}xn(e){return nl(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rg(i,e,t){const s=de(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let f=!1;return Ul(i).X({range:l,Y:!0},(D,N,U)=>{const[Q,ye,$e]=D;Q===e&&ye===a&&(f=!0),U.done()}).next(()=>f)}function Ec(i){return Hi(i,"mutations")}function Ul(i){return Hi(i,"documentMutations")}function nl(i){return Hi(i,"mutationQueues")}class Oo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Oo(0)}static Mn(){return new Oo(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Oo(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>pn.fromTimestamp(new $r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bl(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(an(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return Bl(e).X((f,D)=>{const N=wd(D);N.sequenceNumber<=t&&null===s.get(N.targetId)&&(a++,l.push(this.removeTargetData(e,N)))}).next(()=>He.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Bl(e).X((s,a)=>{const l=wd(a);t(l)})}$n(e){return Xy(e).get("targetGlobalKey").next(t=>(an(null!==t),t))}On(e,t){return Xy(e).put("targetGlobalKey",t)}Fn(e,t){return Bl(e).put(bh(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Oa(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Bl(e).X({range:a,index:"queryTargetsIndex"},(f,D,N)=>{const U=wd(D);dc(t,U.target)&&(l=U,N.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=rl(e);return t.forEach(f=>{const D=E(f.path);a.push(l.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,f))}),He.waitFor(a)}removeMatchingKeys(e,t,s){const a=rl(e);return He.forEach(t,l=>{const f=E(l.path);return He.waitFor([a.delete([s,f]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=rl(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=rl(e);let l=nr();return a.X({range:s,Y:!0},(f,D,N)=>{const U=O(f[1]),Q=new jt(U);l=l.add(Q)}).next(()=>l)}containsKey(e,t){const s=E(t.path),a=IDBKeyRange.bound([s],[ja(s)],!1,!0);let l=0;return rl(e).X({index:"documentTargetsIndex",Y:!0,range:a},([f,D],N,U)=>{0!==f&&(l++,U.done())}).next(()=>l>0)}le(e,t){return Bl(e).get(t).next(s=>s?wd(s):null)}}function Bl(i){return Hi(i,"targets")}function Xy(i){return Hi(i,"targetGlobal")}function rl(i){return Hi(i,"targetDocuments")}function Qf([i,e],[t,s]){const a=Sn(i,t);return 0===a?Sn(e,s):a}class Y_{constructor(e){this.Ln=e,this.buffer=new oi(Qf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jf{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;wt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,p.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Li(s)?wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Zo(s)}yield t.Qn(3e5)}))}}class Q_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return He.resolve(Xi.ct);const s=new Y_(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector","Garbage collection skipped; disabled"),He.resolve(Vl)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vl):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,l,f,D,N,U;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ye=>(ye>this.params.maximumSequenceNumbersToCollect?(wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ye}`),a=this.params.maximumSequenceNumbersToCollect):a=ye,f=Date.now(),this.nthSequenceNumber(e,a))).next(ye=>(s=ye,D=Date.now(),this.removeTargets(e,s,t))).next(ye=>(l=ye,N=Date.now(),this.removeOrphanedDocuments(e,s))).next(ye=>(U=Date.now(),Yr()<=le.in.DEBUG&&wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-Q}ms\n\tDetermined least recently used ${a} in `+(D-f)+`ms\n\tRemoved ${l} targets in `+(N-D)+`ms\n\tRemoved ${ye} documents in `+(U-N)+`ms\nTotal Duration: ${U-Q}ms`),He.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:ye})))}}class ev{constructor(e,t){this.db=e,this.garbageCollector=function Xf(i,e){return new Q_(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Td(e,s)}removeReference(e,t,s){return Td(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Td(e,t)}Xn(e,t){return function(s,a){let l=!1;return nl(s).Z(f=>Rg(s,f,a).next(D=>(D&&(l=!0),He.resolve(!D)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Yn(e,(f,D)=>{if(D<=t){const N=this.Xn(e,f).next(U=>{if(!U)return l++,s.getEntry(e,f).next(()=>(s.removeEntry(f,pn.min()),rl(e).delete([0,E(f.path)])))});a.push(N)}}).next(()=>He.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Td(e,t)}Yn(e,t){const s=rl(e);let a,l=Xi.ct;return s.X({index:"documentTargetsIndex"},([f,D],{path:N,sequenceNumber:U})=>{0===f?(l!==Xi.ct&&t(new jt(O(a)),l),l=U,a=N):l=Xi.ct}).next(()=>{l!==Xi.ct&&t(new jt(O(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return rl(i).put((s=i.currentSequenceNumber,{targetId:0,path:E(e.path),sequenceNumber:s}));var s}class Pg{constructor(){this.changes=new Hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?He.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return il(e).put(s)}removeEntry(e,t,s){return il(e).delete(function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Nl(l),f[f.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Zr.newInvalidDocument(t);return il(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,l)=>{s=this.ts(t,l)}).next(()=>s)}es(e,t){let s={size:0,document:Zr.newInvalidDocument(t)};return il(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,l)=>{s={document:this.ts(t,l),size:Rh(l)}}).next(()=>s)}getEntries(e,t){let s=Ms();return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);s=s.insert(a,f)}).next(()=>s)}ss(e,t){let s=Ms(),a=new Ir(jt.comparator);return this.ns(e,t,(l,f)=>{const D=this.ts(l,f);s=s.insert(l,D),a=a.insert(l,Rh(f))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return He.resolve();let a=new oi(Ng);t.forEach(N=>a=a.add(N));const l=IDBKeyRange.bound(Ad(a.first()),Ad(a.last())),f=a.getIterator();let D=f.getNext();return il(e).X({index:"documentKeyIndex",range:l},(N,U,Q)=>{const ye=jt.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;D&&Ng(D,ye)<0;)s(D,null),D=f.getNext();D&&D.isEqual(ye)&&(s(D,U),D=f.hasNext()?f.getNext():null),D?Q.G(Ad(D)):Q.done()}).next(()=>{for(;D;)s(D,null),D=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const l=t.path,f=[l.popLast().toArray(),l.lastSegment(),Nl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return il(e).j(IDBKeyRange.bound(f,D,!0)).next(N=>{let U=Ms();for(const Q of N){const ye=this.ts(jt.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);ye.isFoundDocument()&&(Qt(t,ye)||a.has(ye.key))&&(U=U.insert(ye.key,ye))}return U})}getAllFromCollectionGroup(e,t,s,a){let l=Ms();const f=Og(t,s),D=Og(t,ps.max());return il(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,D,!0)},(N,U,Q)=>{const ye=this.ts(jt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);l=l.insert(ye.key,ye),l.size===a&&Q.done()}).next(()=>l)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(an(!!t),t))}Zn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function Z_(i,e){let t;if(e.document)t=rs(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=jt.fromSegments(e.noDocument.path),a=vc(e.noDocument.readTime);t=Zr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Zt();{const s=jt.fromSegments(e.unknownDocument.path),a=vc(e.unknownDocument.version);t=Zr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new $r(s[0],s[1]);return pn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(pn.min()))return s}return Zr.newInvalidDocument(e)}}function Na(i){return new tv(i)}class nv extends Pg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Hs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new oi((l,f)=>Sn(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const D=this.us.get(l);if(t.push(this.os.removeEntry(e,l,D.readTime)),f.isValidDocument()){const N=bg(this.os.serializer,f);a=a.add(l.path.popLast()),s+=Rh(N)-D.size,t.push(this.os.addEntry(e,l,N))}else if(s-=D.size,this.trackRemovals){const N=bg(this.os.serializer,f.convertToNoDocument(pn.min()));t.push(this.os.addEntry(e,l,N))}}),a.forEach(l=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.os.updateMetadata(e,s)),He.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((l,f)=>{this.us.set(l,{size:f,readTime:s.get(l).readTime})}),s))}}function ep(i){return Hi(i,"remoteDocumentGlobal")}function il(i){return Hi(i,"remoteDocumentsV14")}function Ad(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Og(i,e){const t=e.documentKey.path.toArray();return[i,Nl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ng(i,e){const t=i.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=Sn(t[l],s[l]),a)return a;return a=Sn(t.length,s.length),a||(a=Sn(t[t.length-2],s[s.length-2]),a||Sn(t[t.length-1],s[s.length-1]))}class kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&dd(s.mutation,a,es.empty(),$r.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,nr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=nr()){const a=Xo();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let f=mu();return l.forEach((D,N)=>{f=f.insert(D,N.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=Xo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,nr()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((f,D)=>{t.set(f,D)})})}computeViews(e,t,s,a){let l=Ms();const f=ju(),D=ju();return t.forEach((N,U)=>{const Q=s.get(U.key);a.has(U.key)&&(void 0===Q||Q.mutation instanceof Ya)?l=l.insert(U.key,U):void 0!==Q?(f.set(U.key,Q.mutation.getFieldMask()),dd(Q.mutation,U,Q.mutation.getFieldMask(),$r.now())):f.set(U.key,es.empty())}),this.recalculateAndSaveOverlays(e,l).next(N=>(N.forEach((U,Q)=>f.set(U,Q)),t.forEach((U,Q)=>{var ye;return D.set(U,new kg(Q,null!==(ye=f.get(U))&&void 0!==ye?ye:null))}),D))}recalculateAndSaveOverlays(e,t){const s=ju();let a=new Ir((f,D)=>f-D),l=nr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const D of f)D.keys().forEach(N=>{const U=t.get(N);if(null===U)return;let Q=s.get(N)||es.empty();Q=D.applyToLocalView(U,Q),s.set(N,Q);const ye=(a.get(D.batchId)||nr()).add(N);a=a.insert(D.batchId,ye)})}).next(()=>{const f=[],D=a.getReverseIterator();for(;D.hasNext();){const N=D.getNext(),U=N.key,Q=N.value,ye=Sl();Q.forEach($e=>{if(!l.has($e)){const at=fh(t.get($e),s.get($e));null!==at&&ye.set($e,at),l=l.add($e)}}),f.push(this.documentOverlayCache.saveOverlays(e,U,ye))}return He.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return jt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const f=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):He.resolve(Xo());let D=-1,N=l;return f.next(U=>He.forEach(U,(Q,ye)=>(D<ye.largestBatchId&&(D=ye.largestBatchId),l.get(Q)?He.resolve():this.remoteDocumentCache.getEntry(e,Q).next($e=>{N=N.insert(Q,$e)}))).next(()=>this.populateOverlays(e,U,l)).next(()=>this.computeViews(e,N,U,nr())).next(Q=>({batchId:D,changes:od(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new jt(t)).next(s=>{let a=mu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=mu();return this.indexManager.getCollectionParents(e,a).next(f=>He.forEach(f,D=>{const N=(U=t,Q=D.child(a),new qa(Q,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,Q;return this.getDocumentsMatchingCollectionQuery(e,N,s).next(U=>{U.forEach((Q,ye)=>{l=l.insert(Q,ye)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(l=>{a.forEach((D,N)=>{const U=N.getKey();null===l.get(U)&&(l=l.insert(U,Zr.newInvalidDocument(U)))});let f=mu();return l.forEach((D,N)=>{const U=a.get(D);void 0!==U&&dd(U.mutation,N,es.empty(),$r.now()),Qt(t,N)&&(f=f.insert(D,N))}),f})}}class rv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return He.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Gi(s.createTime)}),He.resolve()}getNamedQuery(e,t){return He.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:kl(s.bundledQuery),readTime:Gi(s.readTime)}),He.resolve();var s}}class iv{constructor(){this.overlays=new Ir(jt.comparator),this.ls=new Map}getOverlay(e,t){return He.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xo();return He.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.we(e,t,l)}),He.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(s)),He.resolve()}getOverlaysForCollection(e,t,s){const a=Xo(),l=t.length+1,f=new jt(t.child("")),D=this.overlays.getIteratorFrom(f);for(;D.hasNext();){const N=D.getNext().value,U=N.getKey();if(!t.isPrefixOf(U.path))break;U.path.length===l&&N.largestBatchId>s&&a.set(N.getKey(),N)}return He.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Ir((U,Q)=>U-Q);const f=this.overlays.getIterator();for(;f.hasNext();){const U=f.getNext().value;if(U.getKey().getCollectionGroup()===t&&U.largestBatchId>s){let Q=l.get(U.largestBatchId);null===Q&&(Q=Xo(),l=l.insert(U.largestBatchId,Q)),Q.set(U.getKey(),U)}}const D=Xo(),N=l.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((U,Q)=>D.set(U,Q)),!(D.size()>=a)););return He.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const f=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let l=this.ls.get(t);void 0===l&&(l=nr(),this.ls.set(t,l)),this.ls.set(t,l.add(s.key))}}class tr{constructor(){this.fs=new oi(xs.ds),this.ws=new oi(xs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new xs(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new xs(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new jt(new Dn([])),s=new xs(t,e),a=new xs(t,e+1),l=[];return this.ws.forEachInRange([s,a],f=>{this.ys(f),l.push(f.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new jt(new Dn([])),s=new xs(t,e),a=new xs(t,e+1);let l=nr();return this.ws.forEachInRange([s,a],f=>{l=l.add(f.key)}),l}containsKey(e){const t=new xs(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class xs{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return jt.comparator(e.key,t.key)||Sn(e.As,t.As)}static _s(e,t){return Sn(e.As,t.As)||jt.comparator(e.key,t.key)}}class Lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new oi(xs.ds)}checkEmpty(e){return He.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.vs;this.vs++;const f=new gh(l,t,s,a);this.mutationQueue.push(f);for(const D of a)this.Rs=this.Rs.add(new xs(D.key,l)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return He.resolve(f)}lookupMutationBatch(e,t){return He.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),l=a<0?0:a;return He.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return He.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return He.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xs(t,0),a=new xs(t,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([s,a],f=>{const D=this.Ps(f.As);l.push(D)}),He.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new oi(Sn);return t.forEach(a=>{const l=new xs(a,0),f=new xs(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,f],D=>{s=s.add(D.As)})}),He.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;jt.isDocumentKey(l)||(l=l.child(""));const f=new xs(new jt(l),0);let D=new oi(Sn);return this.Rs.forEachWhile(N=>{const U=N.key.path;return!!s.isPrefixOf(U)&&(U.length===a&&(D=D.add(N.As)),!0)},f),He.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){an(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return He.forEach(t.mutations,a=>{const l=new xs(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new xs(t,0),a=this.Rs.firstAfterOrEqual(s);return He.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return He.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vg{constructor(e){this.Ds=e,this.docs=new Ir(jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,f=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return He.resolve(s?s.document.mutableCopy():Zr.newInvalidDocument(t))}getEntries(e,t){let s=Ms();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Zr.newInvalidDocument(a))}),He.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Ms();const f=t.path,D=new jt(f.child("")),N=this.docs.getIteratorFrom(D);for(;N.hasNext();){const{key:U,value:{document:Q}}=N.getNext();if(!f.isPrefixOf(U.path))break;U.path.length>f.length+1||nc(Ru(Q),s)<=0||(a.has(Q.key)||Qt(t,Q))&&(l=l.insert(Q.key,Q.mutableCopy()))}return He.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Zt()}Cs(e,t){return He.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new sv(this)}getSize(e){return He.resolve(this.size)}}class sv extends Pg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),He.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ov{constructor(e){this.persistence=e,this.xs=new Hs(t=>Oa(t),dc),this.lastRemoteSnapshotVersion=pn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new tr,this.targetCount=0,this.Ms=Oo.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),He.resolve()}getLastRemoteSnapshotVersion(e){return He.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return He.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),He.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),He.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,He.resolve()}updateTargetData(e,t){return this.Fn(t),He.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,He.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.xs.forEach((f,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(f),l.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),He.waitFor(l).next(()=>a)}getTargetCount(e){return He.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return He.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),He.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(f=>{l.push(a.markPotentiallyOrphaned(e,f))}),He.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),He.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return He.resolve(s)}containsKey(e,t){return He.resolve(this.ks.containsKey(t))}}class Oh{constructor(e,t){this.$s={},this.overlays={},this.Os=new Xi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ov(this),this.indexManager=new Qy,this.remoteDocumentCache=new Vg(s=>this.referenceDelegate.Ls(s)),this.serializer=new Ch(t),this.qs=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Lg(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){wt("MemoryPersistence","Starting transaction:",e);const a=new av(this.Os.next());return this.referenceDelegate.Us(),s(a).next(l=>this.referenceDelegate.Ks(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Gs(e,t){return He.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class av extends rc{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Qs=new tr,this.js=null}static zs(e){return new Sd(e)}get Ws(){if(this.js)return this.js;throw Zt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),He.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),He.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),He.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ws.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return He.forEach(this.Ws,s=>{const a=jt.fromPath(s);return this.Hs(e,a).next(l=>{l||t.removeEntry(a,pn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return He.or([()=>He.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uv{constructor(e){this.serializer=e}O(e,t,s,a){const l=new io("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",z,{unique:!0}),D.createObjectStore("documentMutations"),cv(e),function(D){D.createObjectStore("remoteDocuments")}(e));let f=He.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),cv(e)),f=f.next(()=>function(D){const N=D.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pn.min().toTimestamp(),targetCount:0};return N.put("targetGlobalKey",U)}(l))),s<4&&a>=4&&(0!==s&&(f=f.next(()=>function(D,N){return N.store("mutations").j().next(U=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",z,{unique:!0});const Q=N.store("mutations"),ye=U.map($e=>Q.put($e));return He.waitFor(ye)})}(e,l))),f=f.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(f=f.next(()=>this.Ys(l))),s<6&&a>=6&&(f=f.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),s<7&&a>=7&&(f=f.next(()=>this.Zs(l))),s<8&&a>=8&&(f=f.next(()=>this.ti(e,l))),s<9&&a>=9&&(f=f.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(f=f.next(()=>this.ei(l))),s<11&&a>=11&&(f=f.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(f=f.next(()=>{!function(D){const N=D.createObjectStore("documentOverlays",{keyPath:ic});N.createIndex("collectionPathOverlayIndex",ou,{unique:!1}),N.createIndex("collectionGroupOverlayIndex",Ss,{unique:!1})}(e)})),s<13&&a>=13&&(f=f.next(()=>function(D){const N=D.createObjectStore("remoteDocumentsV14",{keyPath:Vt});N.createIndex("documentKeyIndex",Un),N.createIndex("collectionGroupIndex",rn)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(f=f.next(()=>this.si(e,l))),s<15&&a>=15&&(f=f.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Qr}).createIndex("sequenceNumberIndex",Ou,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Ta}).createIndex("documentKeyIndex",Aa,{unique:!1})}(e))),f}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Rh(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>He.forEach(a,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",f).next(D=>He.forEach(D,N=>{an(N.userId===l.userId);const U=fa(this.serializer,N);return xg(e,l.userId,U).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.X((f,D)=>{const N=new Dn(f),U=[0,E(N)];l.push(t.get(U).next(Q=>Q?He.resolve():t.put({targetId:0,path:E(N),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>He.waitFor(l))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:oo});const s=t.store("collectionParents"),a=new Zf,l=f=>{if(a.add(f)){const D=f.lastSegment(),N=f.popLast();return s.put({collectionId:D,parent:E(N)})}};return t.store("remoteDocuments").X({Y:!0},(f,D)=>{const N=new Dn(f);return l(N.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([f,D,N],U)=>{const Q=O(D);return l(Q.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const l=wd(a),f=bh(this.serializer,l);return t.put(f)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((l,f)=>{const D=t.store("remoteDocumentsV14"),N=(U=f,U.document?new jt(Dn.fromString(U.document.name).popFirst(5)):U.noDocument?jt.fromSegments(U.noDocument.path):U.unknownDocument?jt.fromSegments(U.unknownDocument.path):Zt()).path.toArray();var U;const Q={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(D.put(Q))}).next(()=>He.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Na(this.serializer),l=new Oh(Sd.zs,this.serializer.fe);return s.j().next(f=>{const D=new Map;return f.forEach(N=>{var U;let Q=null!==(U=D.get(N.userId))&&void 0!==U?U:nr();fa(this.serializer,N).keys().forEach(ye=>Q=Q.add(ye)),D.set(N.userId,Q)}),He.forEach(D,(N,U)=>{const Q=new _n(U),ye=Sh.de(this.serializer,Q),$e=l.getIndexManager(Q),at=Ph.de(Q,this.serializer,$e,l.referenceDelegate);return new Fg(a,at,ye,$e).recalculateAndSaveOverlaysForDocumentKeys(new ua(t,Xi.ct),N).next()})})}}function cv(i){i.createObjectStore("targetDocuments",{keyPath:As}).createIndex("documentTargetsIndex",fi,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lr,{unique:!0}),i.createObjectStore("targetGlobal")}const kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,t,s,a,l,f,D,N,U,Q,ye=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=l,this.window=f,this.document=D,this.ri=U,this.oi=Q,this.ui=ye,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$e=>Promise.resolve(),!Fh.D())throw new Dt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,a),this.di=t+"main",this.serializer=new Ch(N),this.wi=new so(this.di,this.ui,new uv(this.serializer)),this.Bs=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Na(this.serializer),this.qs=new Zc,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Q&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Dt(We.FAILED_PRECONDITION,kh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Xi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,p.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,p.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,p.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Li(e))return wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Qa(e).get("owner").next(t=>He.resolve(this.Ri(t)))}Pi(e){return Lh(e).delete(this.clientId)}bi(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Hi(s,"clientMetadata");return a.j().next(l=>{const f=e.Si(l,18e5),D=l.filter(N=>-1===f.indexOf(N));return He.forEach(D,N=>a.delete(N.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?He.resolve(!0):Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Dt(We.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,p.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new ua(t,Xi.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Ph.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){wt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(f=this.ui)?sc:14===f?Fc:13===f?Nu:12===f?Vi:11===f?au:void Zt();var f;let D;return this.wi.runTransaction(e,a,l,N=>(D=new ua(N,this.Os?this.Os.next():Xi.ct),"readwrite-primary"===t?this.Ti(D).next(U=>!!U||this.Ei(D)).next(U=>{if(!U)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Dt(We.FAILED_PRECONDITION,Ha);return s(D)}).next(U=>this.vi(D).next(()=>U)):this.Oi(D).next(()=>s(D)))).then(N=>(D.raiseOnCommittedEvent(),N))}Oi(e){return Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Dt(We.FAILED_PRECONDITION,kh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static D(){return so.D()}Ai(e){const t=Qa(e);return t.get("owner").next(s=>this.Ri(s)?(wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):He.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(wr(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,he.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return wt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return wr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qa(i){return Hi(i,"owner")}function Lh(i){return Hi(i,"clientMetadata")}function Md(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class xd{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=nr(),a=nr();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new xd(e,t.fromCache,s,a)}}class Ug{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(l=>l||this.Gi(e,t,a,s)).next(l=>l||this.Qi(e,t))}Ki(e,t){if(lh(t))return He.resolve(null);let s=I(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=J(t,null,"F"),s=I(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const f=nr(...l);return this.Ui.getDocuments(e,f).next(D=>this.indexManager.getMinOffset(e,s).next(N=>{const U=this.ji(t,D);return this.zi(t,U,f,N.readTime)?this.Ki(e,J(t,null,"F")):this.Wi(e,U,t,N)}))})))}Gi(e,t,s,a){return lh(t)||a.isEqual(pn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(l=>{const f=this.ji(t,l);return this.zi(t,f,s,a)?this.Qi(e,t):(Yr()<=le.in.DEBUG&&wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lt(t)),this.Wi(e,f,t,Ca(a,-1)))})}ji(e,t){let s=new oi(pr(e));return t.forEach((a,l)=>{Qt(e,l)&&(s=s.add(l))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Qi(e,t){return Yr()<=le.in.DEBUG&&wt("QueryEngine","Using full collection scan to execute query:",Lt(t)),this.Ui.getDocumentsMatchingQuery(e,t,ps.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(f=>{l=l.insert(f.key,f)}),l))}}class J_{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Ir(Sn),this.Yi=new Hs(l=>Oa(l),dc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function lv(i,e,t,s){return new J_(i,e,t,s)}function dv(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,p.Z)(function*(i,e){const t=Bt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const f=[],D=[];let N=nr();for(const U of a){f.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}for(const U of l){D.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}return t.localDocuments.getDocuments(s,N).next(U=>({er:U,removedBatchIds:f,addedBatchIds:D}))})})}),tp.apply(this,arguments)}function Bg(i,e){const t=Bt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Zi.newChangeBuffer({trackRemovals:!0});return function(f,D,N,U){const Q=N.batch,ye=Q.keys();let $e=He.resolve();return ye.forEach(at=>{$e=$e.next(()=>U.getEntry(D,at)).next(kt=>{const sn=N.docVersions.get(at);an(null!==sn),kt.version.compareTo(sn)<0&&(Q.applyToRemoteDocument(kt,N),kt.isValidDocument()&&(kt.setReadTime(N.commitVersion),U.addEntry(kt)))})}),$e.next(()=>f.mutationQueue.removeMutationBatch(D,Q))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let D=nr();for(let N=0;N<f.mutationResults.length;++N)f.mutationResults[N].transformResults.length>0&&(D=D.add(f.batch.mutations[N].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hv(i){const e=Bt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fv(i,e){const t=Bt(i),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((Q,ye)=>{const $e=a.get(ye);if(!$e)return;D.push(t.Bs.removeMatchingKeys(l,Q.removedDocuments,ye).next(()=>t.Bs.addMatchingKeys(l,Q.addedDocuments,ye)));let at=$e.withSequenceNumber(l.currentSequenceNumber);var kt,sn,un;null!==e.targetMismatches.get(ye)?at=at.withResumeToken(bi.EMPTY_BYTE_STRING,pn.min()).withLastLimboFreeSnapshotVersion(pn.min()):Q.resumeToken.approximateByteSize()>0&&(at=at.withResumeToken(Q.resumeToken,s)),a=a.insert(ye,at),sn=at,un=Q,(0===(kt=$e).resumeToken.approximateByteSize()||sn.snapshotVersion.toMicroseconds()-kt.snapshotVersion.toMicroseconds()>=3e8||un.addedDocuments.size+un.modifiedDocuments.size+un.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(l,at))});let N=Ms(),U=nr();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(l,Q))}),D.push(sl(l,f,e.documentUpdates).next(Q=>{N=Q.nr,U=Q.sr})),!s.isEqual(pn.min())){const Q=t.Bs.getLastRemoteSnapshotVersion(l).next(ye=>t.Bs.setTargetsMetadata(l,l.currentSequenceNumber,s));D.push(Q)}return He.waitFor(D).next(()=>f.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,N,U)).next(()=>N)}).then(l=>(t.Ji=a,l))}function sl(i,e,t){let s=nr(),a=nr();return t.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let f=Ms();return t.forEach((D,N)=>{const U=l.get(D);N.isFoundDocument()!==U.isFoundDocument()&&(a=a.add(D)),N.isNoDocument()&&N.version.isEqual(pn.min())?(e.removeEntry(D,N.readTime),f=f.insert(D,N)):!U.isValidDocument()||N.version.compareTo(U.version)>0||0===N.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(N),f=f.insert(D,N)):wt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",U.version," Watch version:",N.version)}),{nr:f,sr:a}})}function pv(i,e){const t=Bt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ol(i,e){const t=Bt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(l=>l?(a=l,He.resolve(a)):t.Bs.allocateTargetId(s).next(f=>(a=new Eu(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Ku(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,p.Z)(function*(i,e,t){const s=Bt(i),a=s.Ji.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Li(f))throw f;wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),np.apply(this,arguments)}function Rd(i,e,t){const s=Bt(i);let a=pn.min(),l=nr();return s.persistence.runTransaction("Execute query","readonly",f=>function(D,N,U){const Q=Bt(D),ye=Q.Yi.get(U);return void 0!==ye?He.resolve(Q.Ji.get(ye)):Q.Bs.getTargetData(N,U)}(s,f,I(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(f,D.targetId).next(N=>{l=N})}).next(()=>s.Hi.getDocumentsMatchingQuery(f,e,t?a:pn.min(),t?l:nr())).next(D=>(Hg(s,Cn(e),D),{documents:D,ir:l})))}function jg(i,e){const t=Bt(i),s=Bt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.le(l,e).next(f=>f?f.target:null))}function $g(i,e){const t=Bt(i),s=t.Xi.get(e)||pn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Ca(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hg(t,e,a),a))}function Hg(i,e,t){let s=i.Xi.get(e)||pn.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.Xi.set(e,s)}function rp(){return rp=(0,p.Z)(function*(i,e,t,s){const a=Bt(i);let l=nr(),f=Ms();for(const U of t){const Q=e.rr(U.metadata.name);U.document&&(l=l.add(Q));const ye=e.ur(U);ye.setReadTime(e.cr(U.metadata.readTime)),f=f.insert(Q,ye)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),N=yield ol(a,(U=s,I(Bu(Dn.fromString(`__bundle__/docs/${U}`)))));var U;return a.persistence.runTransaction("Apply bundle documents","readwrite",U=>sl(U,D,f).next(Q=>(D.apply(U),Q)).next(Q=>a.Bs.removeMatchingKeysForTargetId(U,N.targetId).next(()=>a.Bs.addMatchingKeys(U,l,N.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(U,Q.nr,Q.sr)).next(()=>Q.nr)))}),rp.apply(this,arguments)}function Gg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,p.Z)(function*(i,e,t=nr()){const s=yield ol(i,I(kl(e.bundledQuery))),a=Bt(i);return a.persistence.runTransaction("Save named query","readwrite",l=>{const f=Gi(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return a.qs.saveNamedQuery(l,e);const D=s.withResumeToken(bi.EMPTY_BYTE_STRING,f);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(l,D).next(()=>a.Bs.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Bs.addMatchingKeys(l,t,s.targetId)).next(()=>a.qs.saveNamedQuery(l,e))})}),ip.apply(this,arguments)}function sp(i,e){return`firestore_clients_${i}_${e}`}function op(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pd(i,e){return`firestore_targets_${i}_${e}`}class ap{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let l,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(l=new Dt(a.error.code,a.error.message))),f?new ap(e,t,a.state,l):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class al{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Dt(s.error.code,s.error.message))),l?new al(e,s.state,a):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=dh();for(let f=0;a&&f<s.activeTargetIds.length;++f)a=_(s.activeTargetIds[f]),l=l.add(s.activeTargetIds[f]);return a?new Vh(e,l):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zg(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wc{constructor(){this.activeTargetIds=dh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,s,a,l){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ir(Sn),this.started=!1,this.yr=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=sp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wc),this.Tr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const l=e.getItem(sp(e.persistenceKey,a));if(l){const f=Vh.ar(a,l);f&&(e.gr=e.gr.insert(f.clientId,f))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pd(this.persistenceKey,e));if(s){const a=al.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return wt("SharedClientState","READ",e,t),t}setItem(e,t){wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(wt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,p.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(l){let f=Xi.ct;if(null!=l)try{const D=JSON.parse(l);an("number"==typeof D),f=D}catch(D){wr("SharedClientState","Failed to read sequence number from WebStorage",D)}return f}(s.newValue);a!==Xi.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Qr(l)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ap(this.currentUser,e,t,s),l=op(this.persistenceKey,this.currentUser,e);this.setItem(l,a.hr())}Cr(e){const t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Pd(this.persistenceKey,e),l=new al(e,t,s);this.setItem(a,l.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Vh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ap.ar(new _n(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return al.ar(a,t)}br(e){return zg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,p.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),l=this.Sr(s),f=[],D=[];return l.forEach(N=>{a.has(N)||f.push(N)}),a.forEach(N=>{l.has(N)||D.push(N)}),this.syncEngine.Wr(f,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class up{constructor(){this.Hr=new wc,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wc,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bh{Yr(e){}shutdown(){}}class ka{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Od=null;function cp(){return null===Od?Od=268435456+Math.round(2147483648*Math.random()):Od++,"0x"+Od.toString(16)}const lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gs="WebChannelConnection";class Wg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,l){const f=cp(),D=this.To(e,t);wt("RestConnection",`Sending RPC '${e}' ${f}:`,D,s);const N={};return this.Eo(N,a,l),this.Ao(e,D,N,s).then(U=>(wt("RestConnection",`Received RPC '${e}' ${f}: `,U),U),U=>{throw Lr("RestConnection",`RPC '${e}' ${f} failed with error: `,U,"url: ",D,"request:",s),U})}vo(e,t,s,a,l,f){return this.Io(e,t,s,a,l)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}To(e,t){return`${this.mo}/v1/${t}:${lp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const l=cp();return new Promise((f,D)=>{const N=new dn;N.setWithCredentials(!0),N.listenOnce(x.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case V.NO_ERROR:const Q=N.getResponseJson();wt(Gs,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(Q)),f(Q);break;case V.TIMEOUT:wt(Gs,`RPC '${e}' ${l} timed out`),D(new Dt(We.DEADLINE_EXCEEDED,"Request time out"));break;case V.HTTP_ERROR:const ye=N.getStatus();if(wt(Gs,`RPC '${e}' ${l} failed with status:`,ye,"response text:",N.getResponseText()),ye>0){let $e=N.getResponseJson();Array.isArray($e)&&($e=$e[0]);const at=$e?.error;if(at&&at.status&&at.message){const kt=function(sn){const un=sn.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(un)>=0?un:We.UNKNOWN}(at.status);D(new Dt(kt,at.message))}else D(new Dt(We.UNKNOWN,"Server responded with status "+N.getStatus()))}else D(new Dt(We.UNAVAILABLE,"Connection failed."));break;default:Zt()}}finally{wt(Gs,`RPC '${e}' ${l} completed.`)}});const U=JSON.stringify(a);wt(Gs,`RPC '${e}' ${l} sending request:`,a),N.send(t,"POST",U,s,15)})}Ro(e,t,s){const a=cp(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ru(),D=b(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;void 0!==U&&(N.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(N.xmlHttpFactory=new Je({})),this.Eo(N.initMessageHeaders,t,s),N.encodeInitMessageHeaders=!0;const Q=l.join("");wt(Gs,`Creating RPC '${e}' stream ${a}: ${Q}`,N);const ye=f.createWebChannel(Q,N);let $e=!1,at=!1;const kt=new qu({ro:un=>{at?wt(Gs,`Not sending because RPC '${e}' stream ${a} is closed:`,un):($e||(wt(Gs,`Opening RPC '${e}' stream ${a} transport.`),ye.open(),$e=!0),wt(Gs,`RPC '${e}' stream ${a} sending:`,un),ye.send(un))},oo:()=>ye.close()}),sn=(un,dr,Ur)=>{un.listen(dr,Dr=>{try{Ur(Dr)}catch(Ws){setTimeout(()=>{throw Ws},0)}})};return sn(ye,dt.EventType.OPEN,()=>{at||wt(Gs,`RPC '${e}' stream ${a} transport opened.`)}),sn(ye,dt.EventType.CLOSE,()=>{at||(at=!0,wt(Gs,`RPC '${e}' stream ${a} transport closed`),kt.wo())}),sn(ye,dt.EventType.ERROR,un=>{at||(at=!0,Lr(Gs,`RPC '${e}' stream ${a} transport errored:`,un),kt.wo(new Dt(We.UNAVAILABLE,"The operation could not be completed")))}),sn(ye,dt.EventType.MESSAGE,un=>{var dr;if(!at){const Ur=un.data[0];an(!!Ur);const Dr=Ur,Ws=Dr.error||(null===(dr=Dr[0])||void 0===dr?void 0:dr.error);if(Ws){wt(Gs,`RPC '${e}' stream ${a} received error:`,Ws);const Os=Ws.status;let Oi=function(Tu){const vy=ms[Tu];if(void 0!==vy)return Gu(vy)}(Os),Fo=Ws.message;void 0===Oi&&(Oi=We.INTERNAL,Fo="Unknown error status: "+Os+" with message "+Ws.message),at=!0,kt.wo(new Dt(Oi,Fo)),ye.close()}else wt(Gs,`RPC '${e}' stream ${a} received:`,Ur),kt._o(Ur)}}),sn(D,W.STAT_EVENT,un=>{un.stat===_e.PROXY?wt(Gs,`RPC '${e}' stream ${a} detected buffering proxy`):un.stat===_e.NOPROXY&&wt(Gs,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{kt.fo()},0),kt}}function jh(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function jl(i){return new W_(i,!0)}class Kg{constructor(e,t,s=1e3,a=1.5,l=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Nd{constructor(e,t,s,a,l,f,D,N){this.ii=e,this.$o=s,this.Oo=a,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=D,this.listener=N,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Kg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,p.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,p.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,p.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===We.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new Dt(We.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,p.Z)(function*(){e.state=0,e.start()}))}tu(e){return wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Nd{constructor(e,t,s,a,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.serializer=l}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function By(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(N=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===N?1:"REMOVE"===N?2:"CURRENT"===N?3:"RESET"===N?4:Zt(),a=e.targetChange.targetIds||[],l=function(N,U){return N.useProto3Json?(an(void 0===U||"string"==typeof U),bi.fromBase64String(U||"")):(an(void 0===U||U instanceof Uint8Array),bi.fromUint8Array(U||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,D=f&&function(N){const U=void 0===N.code?We.UNKNOWN:Gu(N.code);return new Dt(U,N.message||"")}(f);t=new Eh(s,a,l,D||null)}else if("documentChange"in e){const s=e.documentChange,a=_u(i,s.document.name),l=Gi(s.document.updateTime),f=s.document.createTime?Gi(s.document.createTime):pn.min(),D=new ts({mapValue:{fields:s.document.fields}}),N=Zr.newFoundDocument(a,l,f,D);t=new _h(s.targetIds||[],s.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const s=e.documentDelete,a=_u(i,s.document),l=s.readTime?Gi(s.readTime):pn.min(),f=Zr.newNoDocument(a,l);t=new _h([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,a=_u(i,s.document);t=new _h([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Zt();{const s=e.filter,{count:a=0,unchangedNames:l}=s,f=new Ny(a,l);t=new _g(s.targetId,f)}}var N;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return pn.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?pn.min():l.readTime?Gi(l.readTime):pn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(a,l){let f;const D=l.target;if(f=Uu(D)?{documents:Dg(a,D)}:{query:jf(a,D)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=Vy(a,l.resumeToken);const N=md(a,l.expectedCount);null!==N&&(f.expectedCount=N)}else if(l.snapshotVersion.compareTo(pn.min())>0){f.readTime=mc(a,l.snapshotVersion.toTimestamp());const N=md(a,l.expectedCount);null!==N&&(f.expectedCount=N)}return f}(this.serializer,e);const s=function $y(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class hp extends Nd{constructor(e,t,s,a,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(an(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jy(i,e){return i&&i.length>0?(an(void 0!==e),i.map(t=>function(s,a){let l=Gi(s.updateTime?s.updateTime:a);return l.isEqual(pn.min())&&(l=Gi(a)),new xy(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Gi(e.commitTime);return this.listener.cu(s,t)}return an(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Kc(this.serializer,s))};this.Wo(t)}}class fp extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Dt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Io(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Dt(We.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.vo(e,t,s,l,f,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Dt(We.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class mv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(wr(t),this.mu=!1):wt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yv{constructor(e,t,s,a,l){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(D=>{s.enqueueAndForget((0,p.Z)(function*(){var N;cl(f)&&(wt("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,p.Z)(function*(U){const Q=Bt(U);Q.vu.add(4),yield ul(Q),Q.bu.set("Unknown"),Q.vu.delete(4),yield kd(Q)}),function(U){return N.apply(this,arguments)})(f))}))}),this.bu=new mv(s,a)}}function kd(i){return gp.apply(this,arguments)}function gp(){return gp=(0,p.Z)(function*(i){if(cl(i))for(const e of i.Ru)yield e(!0)}),gp.apply(this,arguments)}function ul(i){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,p.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Zg.apply(this,arguments)}function Hh(i,e){const t=Bt(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Fd(t)?yp(t):bc(t).Ko()&&zh(t,e))}function Gh(i,e){const t=Bt(i),s=bc(t);t.Au.delete(e),s.Ko()&&mp(t,e),0===t.Au.size&&(s.Ko()?s.jo():cl(t)&&t.bu.set("Unknown"))}function zh(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bc(i).su(e)}function mp(i,e){i.Vu.qt(e),bc(i).iu(e)}function yp(i){i.Vu=new gd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),bc(i).start(),i.bu.gu()}function Fd(i){return cl(i)&&!bc(i).Uo()&&i.Au.size>0}function cl(i){return 0===Bt(i).vu.size}function vv(i){i.Vu=void 0}function X_(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,p.Z)(function*(i){i.Au.forEach((e,t)=>{zh(i,e)})}),Yg.apply(this,arguments)}function e0(i,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,p.Z)(function*(i,e){vv(i),Fd(i)?(i.bu.Iu(e),yp(i)):i.bu.set("Unknown")}),Qg.apply(this,arguments)}function t0(i,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,p.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Eh&&2===e.state&&e.cause)try{yield(s=(0,p.Z)(function*(a,l){const f=l.cause;for(const D of l.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,f),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,l){return s.apply(this,arguments)})(i,e)}catch(s){wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vp(i,s)}else if(e instanceof _h?i.Vu.Ht(e):e instanceof _g?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(pn.min()))try{const s=yield hv(i.localStore);t.compareTo(s)>=0&&(yield function(a,l){const f=a.Vu.ce(l);return f.targetChanges.forEach((D,N)=>{if(D.resumeToken.approximateByteSize()>0){const U=a.Au.get(N);U&&a.Au.set(N,U.withResumeToken(D.resumeToken,l))}}),f.targetMismatches.forEach((D,N)=>{const U=a.Au.get(D);if(!U)return;a.Au.set(D,U.withResumeToken(bi.EMPTY_BYTE_STRING,U.snapshotVersion)),mp(a,D);const Q=new Eu(U.target,D,N,U.sequenceNumber);zh(a,Q)}),a.remoteSyncer.applyRemoteEvent(f)}(i,t))}catch(s){wt("RemoteStore","Failed to raise snapshot:",s),yield vp(i,s)}var s}),Jg.apply(this,arguments)}function vp(i,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,p.Z)(function*(i,e,t){if(!Li(e))throw e;i.vu.add(1),yield ul(i),i.bu.set("Offline"),t||(t=()=>hv(i.localStore)),i.asyncQueue.enqueueRetryable((0,p.Z)(function*(){wt("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield kd(i)}))}),Xg.apply(this,arguments)}function Zu(i,e){return e().catch(t=>vp(i,t,e))}function Ic(i){return _p.apply(this,arguments)}function _p(){return _p=(0,p.Z)(function*(i){const e=Bt(i),t=Ja(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;em(e);)try{const a=yield pv(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Ep(e,a)}catch(a){yield vp(e,a)}wp(e)&&Wh(e)}),_p.apply(this,arguments)}function em(i){return cl(i)&&i.Eu.length<10}function Ep(i,e){i.Eu.push(e);const t=Ja(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function wp(i){return cl(i)&&!Ja(i).Uo()&&i.Eu.length>0}function Wh(i){Ja(i).start()}function _v(i){return wu.apply(this,arguments)}function wu(){return wu=(0,p.Z)(function*(i){Ja(i).hu()}),wu.apply(this,arguments)}function tm(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,p.Z)(function*(i){const e=Ja(i);for(const t of i.Eu)e.uu(t.mutations)}),Ip.apply(this,arguments)}function Ev(i,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,p.Z)(function*(i,e,t){const s=i.Eu.shift(),a=mh.from(s,e,t);yield Zu(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield Ic(i)}),Kh.apply(this,arguments)}function wv(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,p.Z)(function*(i,e){var t;e&&Ja(i).ou&&(yield(t=(0,p.Z)(function*(s,a){if(yg(l=a.code)&&l!==We.ABORTED){const f=s.Eu.shift();Ja(s).Qo(),yield Zu(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield Ic(s)}var l}),function(s,a){return t.apply(this,arguments)})(i,e)),wp(i)&&Wh(i)}),Dp.apply(this,arguments)}function Ld(i,e){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,p.Z)(function*(i,e){const t=Bt(i);t.asyncQueue.verifyOperationInProgress(),wt("RemoteStore","RemoteStore received new credentials");const s=cl(t);t.vu.add(3),yield ul(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kd(t)}),Dc.apply(this,arguments)}function Vd(i,e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,p.Z)(function*(i,e){const t=Bt(i);e?(t.vu.delete(2),yield kd(t)):e||(t.vu.add(2),yield ul(t),t.bu.set("Unknown"))}),Cc.apply(this,arguments)}function bc(i){return i.Su||(i.Su=function(e,t,s){const a=Bt(e);return a.fu(),new $h(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:X_.bind(null,i),ao:e0.bind(null,i),nu:t0.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(t){t?(i.Su.Qo(),Fd(i)?yp(i):i.bu.set("Unknown")):(yield i.Su.stop(),vv(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Ja(i){return i.Du||(i.Du=function(e,t,s){const a=Bt(e);return a.fu(),new hp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:_v.bind(null,i),ao:wv.bind(null,i),au:tm.bind(null,i),cu:Ev.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(t){t?(i.Du.Qo(),yield Ic(i)):(yield i.Du.stop(),i.Eu.length>0&&(wt("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class qh{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,a,l){const f=Date.now()+s,D=new qh(e,t,f,a,l);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ll(i,e){if(wr("AsyncQueue",`${e}: ${i}`),Li(i))return new Dt(We.UNAVAILABLE,`${e}: ${i}`);throw i}class Tc{constructor(e){this.comparator=e?(t,s)=>e(t,s)||jt.comparator(t.key,s.key):(t,s)=>jt.comparator(t.key,s.key),this.keyedMap=mu(),this.sortedSet=new Ir(this.comparator)}static emptySet(e){return new Tc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Tc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Zh{constructor(){this.Cu=new Ir(jt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Zt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class dl{constructor(e,t,s,a,l,f,D,N,U){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=D,this.excludesMetadataChanges=N,this.hasCachedResults=U}static fromInitialDocuments(e,t,s,a,l){const f=[];return t.forEach(D=>{f.push({type:0,doc:D})}),new dl(e,t,Tc.emptySet(t),f,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Cp{constructor(){this.Nu=void 0,this.listeners=[]}}class Iv{constructor(){this.queries=new Hs(e=>nt(e),xe),this.onlineState="Unknown",this.ku=new Set}}function nm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,p.Z)(function*(i,e){const t=Bt(i),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new Cp),a)try{l.Nu=yield t.onListen(s)}catch(f){const D=ll(f,`Initialization of query '${Lt(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,l),l.listeners.push(e),e.Mu(t.onlineState),l.Nu&&e.$u(l.Nu)&&Ap(t)}),bp.apply(this,arguments)}function Yh(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,p.Z)(function*(i,e){const t=Bt(i),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Tp.apply(this,arguments)}function rm(i,e){const t=Bt(i);let s=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const D of f.listeners)D.$u(a)&&(s=!0);f.Nu=a}}s&&Ap(t)}function im(i,e,t){const s=Bt(i),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function Ap(i){i.ku.forEach(e=>{e.next()})}class No{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class om{constructor(e){this.serializer=e}rr(e){return _u(this.serializer,e)}ur(e){return e.metadata.exists?rs(this.serializer,e.document,!1):Zr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Gi(e)}}class n0{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=am(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=Dn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new om(this.serializer);for(const a of e)if(a.metadata.queries){const l=s.rr(a.metadata.name);for(const f of a.metadata.queries){const D=(t.get(f)||nr()).add(l);t.set(f,D)}}return t}complete(){var e=this;return(0,p.Z)(function*(){const t=yield function gv(i,e,t,s){return rp.apply(this,arguments)}(e.localStore,new om(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Gg(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function am(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Qh{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=nr(),this.mutatedKeys=nr(),this.tc=pr(e),this.ec=new Tc(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Zh,a=t?t.ec:this.ec;let l=t?t.mutatedKeys:this.mutatedKeys,f=a,D=!1;const N="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,U="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((Q,ye)=>{const $e=a.get(Q),at=Qt(this.query,ye)?ye:null,kt=!!$e&&this.mutatedKeys.has($e.key),sn=!!at&&(at.hasLocalMutations||this.mutatedKeys.has(at.key)&&at.hasCommittedMutations);let un=!1;$e&&at?$e.data.isEqual(at.data)?kt!==sn&&(s.track({type:3,doc:at}),un=!0):this.rc($e,at)||(s.track({type:2,doc:at}),un=!0,(N&&this.tc(at,N)>0||U&&this.tc(at,U)<0)&&(D=!0)):!$e&&at?(s.track({type:0,doc:at}),un=!0):$e&&!at&&(s.track({type:1,doc:$e}),un=!0,(N||U)&&(D=!0)),un&&(at?(f=f.add(at),l=sn?l.add(Q):l.delete(Q)):(f=f.delete(Q),l=l.delete(Q)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const Q="F"===this.query.limitType?f.last():f.first();f=f.delete(Q.key),l=l.delete(Q.key),s.track({type:1,doc:Q})}return{ec:f,ic:s,zi:D,mutatedKeys:l}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((U,Q)=>function(ye,$e){const at=kt=>{switch(kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zt()}};return at(ye)-at($e)}(U.type,Q.type)||this.tc(U.doc,Q.doc)),this.oc(s);const f=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,N=D!==this.Xu;return this.Xu=D,0!==l.length||N?{snapshot:new dl(this.query,e.ec,a,l,e.mutatedKeys,0===D,N,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:f}:{cc:f}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Zh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=nr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Sp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Qh(s))}),t}hc(e){this.Yu=e.ir,this.Zu=nr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Dv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Cv{constructor(e){this.key=e,this.fc=!1}}class cm{constructor(e,t,s,a,l,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.dc={},this.wc=new Hs(D=>nt(D),xe),this._c=new Map,this.mc=new Set,this.gc=new Ir(jt.comparator),this.yc=new Map,this.Ic=new tr,this.Tc={},this.Ec=new Map,this.Ac=Oo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function bv(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,p.Z)(function*(i,e){const t=uf(i);let s,a;const l=t.wc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.lc();else{const f=yield ol(t.localStore,I(e)),D=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,a=yield Mp(t,e,s,"current"===D,f.resumeToken),t.isPrimaryClient&&Hh(t.remoteStore,f)}return a}),Jh.apply(this,arguments)}function Mp(i,e,t,s,a){return xp.apply(this,arguments)}function xp(){return xp=(0,p.Z)(function*(i,e,t,s,a){i.Rc=(ye,$e,at)=>{return(kt=(0,p.Z)(function*(sn,un,dr,Ur){let Dr=un.view.sc(dr);Dr.zi&&(Dr=yield Rd(sn.localStore,un.query,!1).then(({documents:Oi})=>un.view.sc(Oi,Dr)));const Ws=Ur&&Ur.targetChanges.get(un.targetId),Os=un.view.applyChanges(Dr,sn.isPrimaryClient,Ws);return jd(sn,un.targetId,Os.cc),Os.snapshot}),function(sn,un,dr,Ur){return kt.apply(this,arguments)})(i,ye,$e,at);var kt};const l=yield Rd(i.localStore,e,!0),f=new um(e,l.ir),D=f.sc(l.documents),N=pd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,a),U=f.applyChanges(D,i.isPrimaryClient,N);jd(i,t,U.cc);const Q=new Dv(e,t,f);return i.wc.set(e,Q),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),U.snapshot}),xp.apply(this,arguments)}function lm(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,p.Z)(function*(i,e){const t=Bt(i),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(l=>!xe(l,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Ku(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Gh(t.remoteStore,s.targetId),Yu(t,s.targetId)}).catch(Zo))):(Yu(t,s.targetId),yield Ku(t.localStore,s.targetId,!0))}),Xh.apply(this,arguments)}function Fa(){return Fa=(0,p.Z)(function*(i,e,t){const s=Gd(i);try{const a=yield function(l,f){const D=Bt(l),N=$r.now(),U=f.reduce(($e,at)=>$e.add(at.key),nr());let Q,ye;return D.persistence.runTransaction("Locally write mutations","readwrite",$e=>{let at=Ms(),kt=nr();return D.Zi.getEntries($e,U).next(sn=>{at=sn,at.forEach((un,dr)=>{dr.isValidDocument()||(kt=kt.add(un))})}).next(()=>D.localDocuments.getOverlayedDocuments($e,at)).next(sn=>{Q=sn;const un=[];for(const dr of f){const Ur=Ry(dr,Q.get(dr.key).overlayedDocument);null!=Ur&&un.push(new Ya(dr.key,Ur,lc(Ur.value.mapValue),Ti.exists(!0)))}return D.mutationQueue.addMutationBatch($e,N,un,f)}).next(sn=>{ye=sn;const un=sn.applyToLocalDocumentSet(Q,kt);return D.documentOverlayCache.saveOverlays($e,sn.batchId,un)})}).then(()=>({batchId:ye.batchId,changes:od(Q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,f,D){let N=l.Tc[l.currentUser.toKey()];N||(N=new Ir(Sn)),N=N.insert(f,D),l.Tc[l.currentUser.toKey()]=N}(s,a.batchId,t),yield Iu(s,a.changes),yield Ic(s.remoteStore)}catch(a){const l=ll(a,"Failed to persist write");t.reject(l)}}),Fa.apply(this,arguments)}function ef(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,p.Z)(function*(i,e){const t=Bt(i);try{const s=yield fv(t.localStore,e);e.targetChanges.forEach((a,l)=>{const f=t.yc.get(l);f&&(an(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.fc=!0:a.modifiedDocuments.size>0?an(f.fc):a.removedDocuments.size>0&&(an(f.fc),f.fc=!1))}),yield Iu(t,s,e)}catch(s){yield Zo(s)}}),Rp.apply(this,arguments)}function dm(i,e,t){const s=Bt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((l,f)=>{const D=f.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(l,f){const D=Bt(l);D.onlineState=f;let N=!1;D.queries.forEach((U,Q)=>{for(const ye of Q.listeners)ye.Mu(f)&&(N=!0)}),N&&Ap(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function r0(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,p.Z)(function*(i,e,t){const s=Bt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),l=a&&a.key;if(l){let f=new Ir(jt.comparator);f=f.insert(l,Zr.newNoDocument(l,pn.min()));const D=nr().add(l),N=new fd(pn.min(),new Map,new Ir(Sn),f,D);yield ef(s,N),s.gc=s.gc.remove(l),s.yc.delete(e),nf(s)}else yield Ku(s.localStore,e,!1).then(()=>Yu(s,e,t)).catch(Zo)}),tf.apply(this,arguments)}function Av(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,p.Z)(function*(i,e){const t=Bt(i),s=e.batch.batchId;try{const a=yield Bg(t.localStore,e);Bd(t,s,null),$l(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Iu(t,a)}catch(a){yield Zo(a)}}),Pp.apply(this,arguments)}function Sv(i,e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,p.Z)(function*(i,e,t){const s=Bt(i);try{const a=yield function(l,f){const D=Bt(l);return D.persistence.runTransaction("Reject batch","readwrite-primary",N=>{let U;return D.mutationQueue.lookupMutationBatch(N,f).next(Q=>(an(null!==Q),U=Q.keys(),D.mutationQueue.removeMutationBatch(N,Q))).next(()=>D.mutationQueue.performConsistencyCheck(N)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(N,U,f)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(N,U)).next(()=>D.localDocuments.getDocuments(N,U))})}(s.localStore,e);Bd(s,e,t),$l(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Iu(s,a)}catch(a){yield Zo(a)}}),Ud.apply(this,arguments)}function Op(){return Op=(0,p.Z)(function*(i,e){const t=Bt(i);cl(t.remoteStore)||wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const f=Bt(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>f.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=ll(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Op.apply(this,arguments)}function $l(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Bd(i,e,t){const s=Bt(i);let a=s.Tc[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Yu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),t&&i.dc.Pc(s,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||xv(i,s)})}function xv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Gh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),nf(i))}function jd(i,e,t){for(const s of t)s instanceof Qh?(i.Ic.addReference(s.key,e),s0(i,s)):s instanceof Sp?(wt("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||xv(i,s.key)):Zt()}function s0(i,e){const t=e.key,s=t.path.canonicalString();i.gc.get(t)||i.mc.has(s)||(wt("SyncEngine","New document in limbo: "+t),i.mc.add(s),nf(i))}function nf(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new jt(Dn.fromString(e)),s=i.Ac.next();i.yc.set(s,new Cv(t)),i.gc=i.gc.insert(t,s),Hh(i.remoteStore,new Eu(I(Bu(t.path)),s,"TargetPurposeLimboResolution",Xi.ct))}}function Iu(i,e,t){return rf.apply(this,arguments)}function rf(){return rf=(0,p.Z)(function*(i,e,t){const s=Bt(i),a=[],l=[],f=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,N)=>{f.push(s.Rc(N,e,t).then(U=>{if((U||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(N.targetId,U?.fromCache?"not-current":"current"),U){a.push(U);const Q=xd.Li(N.targetId,U);l.push(Q)}}))}),yield Promise.all(f),s.dc.nu(a),yield(D=(0,p.Z)(function*(N,U){const Q=Bt(N);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ye=>He.forEach(U,$e=>He.forEach($e.Fi,at=>Q.persistence.referenceDelegate.addReference(ye,$e.targetId,at)).next(()=>He.forEach($e.Bi,at=>Q.persistence.referenceDelegate.removeReference(ye,$e.targetId,at)))))}catch(ye){if(!Li(ye))throw ye;wt("LocalStore","Failed to update sequence numbers: "+ye)}for(const ye of U){const $e=ye.targetId;if(!ye.fromCache){const at=Q.Ji.get($e),sn=at.withLastLimboFreeSnapshotVersion(at.snapshotVersion);Q.Ji=Q.Ji.insert($e,sn)}}}),function(N,U){return D.apply(this,arguments)})(s.localStore,l))}),rf.apply(this,arguments)}function hm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,p.Z)(function*(i,e){const t=Bt(i);if(!t.currentUser.isEqual(e)){wt("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(f=>{f.forEach(D=>{D.reject(new Dt(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Iu(t,s.er)}var a}),$d.apply(this,arguments)}function Qu(i,e){const t=Bt(i),s=t.yc.get(e);if(s&&s.fc)return nr().add(s.key);{let a=nr();const l=t._c.get(e);if(!l)return a;for(const f of l){const D=t.wc.get(f);a=a.unionWith(D.view.nc)}return a}}function sf(i,e){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,p.Z)(function*(i,e){const t=Bt(i),s=yield Rd(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&jd(t,e.targetId,a.cc),a}),Hl.apply(this,arguments)}function Hd(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,p.Z)(function*(i,e){const t=Bt(i);return $g(t.localStore,e).then(s=>Iu(t,s))}),Np.apply(this,arguments)}function kp(i,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,p.Z)(function*(i,e,t,s){const a=Bt(i),l=yield function(f,D){const N=Bt(f),U=Bt(N.mutationQueue);return N.persistence.runTransaction("Lookup mutation documents","readonly",Q=>U.Sn(Q,D).next(ye=>ye?N.localDocuments.getDocuments(Q,ye):He.resolve(null)))}(a.localStore,e);var D;null!==l?("pending"===t?yield Ic(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),$l(a,e),D=e,Bt(Bt(a.localStore).mutationQueue).Cn(D)):Zt(),yield Iu(a,l)):wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function Fp(){return Fp=(0,p.Z)(function*(i,e){const t=Bt(i);if(uf(t),Gd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Gl(t,s.toArray());t.vc=!0,yield Vd(t.remoteStore,!0);for(const l of a)Hh(t.remoteStore,l)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((l,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):a=a.then(()=>(Yu(t,f),Ku(t.localStore,f,!0))),Gh(t.remoteStore,f)}),yield a,yield Gl(t,s),function(l){const f=Bt(l);f.yc.forEach((D,N)=>{Gh(f.remoteStore,N)}),f.Ic.Ts(),f.yc=new Map,f.gc=new Ir(jt.comparator)}(t),t.vc=!1,yield Vd(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function Gl(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,p.Z)(function*(i,e,t){const s=Bt(i),a=[],l=[];for(const f of e){let D;const N=s._c.get(f);if(N&&0!==N.length){D=yield ol(s.localStore,I(N[0]));for(const U of N){const Q=s.wc.get(U),ye=yield sf(s,Q);ye.snapshot&&l.push(ye.snapshot)}}else{const U=yield jg(s.localStore,f);D=yield ol(s.localStore,U),yield Mp(s,Pv(U),f,!1,D.resumeToken)}a.push(D)}return s.dc.nu(l),a}),Lp.apply(this,arguments)}function Pv(i){return fc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Ov(i){const e=Bt(i);return Bt(Bt(e.localStore).persistence).$i()}function o0(i,e,t,s){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,p.Z)(function*(i,e,t,s){const a=Bt(i);if(a.vc)return void wt("SyncEngine","Ignoring unexpected query state notification.");const l=a._c.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const f=yield $g(a.localStore,Cn(l[0])),D=fd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield Iu(a,f,D);break}case"rejected":yield Ku(a.localStore,e,!0),Yu(a,e,s);break;default:Zt()}}),Vp.apply(this,arguments)}function Nv(i,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,p.Z)(function*(i,e,t){const s=uf(i);if(s.vc){for(const a of e){if(s._c.has(a)){wt("SyncEngine","Adding an already active target "+a);continue}const l=yield jg(s.localStore,a),f=yield ol(s.localStore,l);yield Mp(s,Pv(l),f.targetId,!1,f.resumeToken),Hh(s.remoteStore,f)}for(const a of t)s._c.has(a)&&(yield Ku(s.localStore,a,!1).then(()=>{Gh(s.remoteStore,a),Yu(s,a)}).catch(Zo))}}),Up.apply(this,arguments)}function uf(i){const e=Bt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r0.bind(null,e),e.dc.nu=rm.bind(null,e.eventManager),e.dc.Pc=im.bind(null,e.eventManager),e}function Gd(i){const e=Bt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sv.bind(null,e),e}class hl{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,p.Z)(function*(){t.serializer=jl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return lv(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new Oh(Sd.zs,this.serializer)}createSharedClientState(e){return new up}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends hl{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,p.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gd(s.Vc.syncEngine),yield Ic(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return lv(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Jf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new kc(t,this.persistence);return new Pu(e.asyncQueue,s)}createPersistence(e){const t=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new Fh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jh(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new up}}class fm extends Bp{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,p.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Uh&&(s.sharedClientState.syncEngine={jr:kp.bind(null,a),zr:o0.bind(null,a),Wr:Nv.bind(null,a),$i:Ov.bind(null,a),Qr:Hd.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var l=(0,p.Z)(function*(f){yield function Rv(i,e){return Fp.apply(this,arguments)}(s.Vc.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start():f||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(f&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():f||s.indexBackfillerScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jh();if(!Uh.D(t))throw new Dt(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class zl{initialize(e,t){var s=this;return(0,p.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>dm(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=hm.bind(null,s.syncEngine),yield Vd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iv}createDatastore(e){const t=jl(e.databaseInfo.databaseId),s=new Wg(e.databaseInfo);return new fp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=D=>dm(this.syncEngine,D,0),f=ka.D()?new ka:new Bh,new yv(t,s,a,l,f);var t,s,a,l,f}createSyncEngine(e,t){return function(s,a,l,f,D,N,U){const Q=new cm(s,a,l,f,D,N);return U&&(Q.vc=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,p.Z)(function*(t){const s=Bt(t);wt("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield ul(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pm(i,e=10240){let t=0;return{read:()=>(0,p.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class cf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,p.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const l=yield e.$c(a);return new sm(JSON.parse(l),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,p.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,p.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,p.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fl{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,p.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Dt(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,p.Z)(function*(l,f){const D=Bt(l),N=_d(D.serializer)+"/documents",U={documents:f.map(at=>yd(D.serializer,at))},Q=yield D.vo("BatchGetDocuments",N,U,f.length),ye=new Map;Q.forEach(at=>{const kt=function Uy(i,e){return"found"in e?function(t,s){an(!!s.found);const a=_u(t,s.found.name),l=Gi(s.found.updateTime),f=s.found.createTime?Gi(s.found.createTime):pn.min(),D=new ts({mapValue:{fields:s.found.fields}});return Zr.newFoundDocument(a,l,f,D)}(i,e):"missing"in e?function(t,s){an(!!s.missing),an(!!s.readTime);const a=_u(t,s.missing),l=Gi(s.readTime);return Zr.newNoDocument(a,l)}(i,e):Zt()}(D.serializer,at);ye.set(kt.key.toString(),kt)});const $e=[];return f.forEach(at=>{const kt=ye.get(at.toString());an(!!kt),$e.push(kt)}),$e}),function(l,f){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=jt.fromPath(a);e.mutations.push(new ph(l,e.precondition(l)))}),yield(s=(0,p.Z)(function*(a,l){const f=Bt(a),D=_d(f.serializer)+"/documents",N={writes:l.map(U=>Kc(f.serializer,U))};yield f.Io("Commit",D,N)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zt();t=pn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Dt(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pn.min())?Ti.exists(!1):Ti.updateTime(t):Ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pn.min()))throw new Dt(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(t)}return Ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a0{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Bc=s.maxAttempts,this.qo=new Kg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,p.Z)(function*(){const t=new fl(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Uc(l)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!za(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yg(t)}return!1}}class zd{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=_n.UNAUTHENTICATED,this.clientId=yi.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var f=(0,p.Z)(function*(D){wt("FirestoreClient","Received user=",D.uid),yield l.authCredentialListener(D),l.user=D});return function(D){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(s,f=>(wt("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Dt(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=ll(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,p.Z)(function*(l){s.isEqual(l)||(yield dv(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jp.apply(this,arguments)}function Wd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield pl(i);wt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(a=>Ld(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,l)=>Ld(e.remoteStore,l)),i._onlineComponents=e}),$p.apply(this,arguments)}function Xa(i){return"FirebaseError"===i.name?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function pl(i){return zs.apply(this,arguments)}function zs(){return zs=(0,p.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){wt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Xa(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),yield df(i,new hl)}}else wt("FirestoreClient","Using default OfflineComponentProvider"),yield df(i,new hl);return i._offlineComponents}),zs.apply(this,arguments)}function Du(i){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,p.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(wt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wd(i,i._uninitializedComponentsProvider._online)):(wt("FirestoreClient","Using default OnlineComponentProvider"),yield Wd(i,new zl))),i._onlineComponents}),Wl.apply(this,arguments)}function pa(i){return pl(i).then(e=>e.persistence)}function Kl(i){return pl(i).then(e=>e.localStore)}function gl(i){return Du(i).then(e=>e.remoteStore)}function Ac(i){return Du(i).then(e=>e.syncEngine)}function eu(i){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,p.Z)(function*(i){const e=yield Du(i),t=e.eventManager;return t.onListen=bv.bind(null,e.syncEngine),t.onUnlisten=lm.bind(null,e.syncEngine),t}),Sc.apply(this,arguments)}function yl(i,e,t={}){const s=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(a,l,f,D,N){const U=new cf({next:ye=>{l.enqueueAndForget(()=>Yh(a,Q));const $e=ye.docs.has(f);!$e&&ye.fromCache?N.reject(new Dt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):$e&&ye.fromCache&&D&&"server"===D.source?N.reject(new Dt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):N.resolve(ye)},error:ye=>N.reject(ye)}),Q=new No(Bu(f.path),U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Hp(i,e,t={}){const s=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(a,l,f,D,N){const U=new cf({next:ye=>{l.enqueueAndForget(()=>Yh(a,Q)),ye.fromCache&&"server"===D.source?N.reject(new Dt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):N.resolve(ye)},error:ye=>N.reject(ye)}),Q=new No(f,U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Gp(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const zp=new Map;function hf(i,e,t){if(!t)throw new Dt(We.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Em(i,e,t,s){if(!0===e&&!0===s)throw new Dt(We.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wm(i){if(!jt.isDocumentKey(i))throw new Dt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wp(i){if(jt.isDocumentKey(i))throw new Dt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Zt()}function Sr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Dt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new Dt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pf(i,e){if(e<=0)throw new Dt(We.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class gf{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Dt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Dt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Em("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gp(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Dt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Dt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Dt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Dt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Dt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Mu;switch(t.type){case"firstParty":return new oa(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Dt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zp.get(e);t&&(wt("ComponentProvider","Removing Datastore"),zp.delete(e),t.terminate())}(this),Promise.resolve()}}function qd(i,e,t,s={}){var a;const l=(i=Sr(i,Kd))._getSettings(),f=`${e}:${t}`;if("firestore.googleapis.com"!==l.host&&l.host!==f&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:f,ssl:!1})),s.mockUserToken){let D,N;if("string"==typeof s.mockUserToken)D=s.mockUserToken,N=_n.MOCK_USER;else{D=(0,he.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new Dt(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new _n(U)}i._authCredentials=new wa(new Su(D,N))}}class Ai{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ai(this.firestore,e,this._key)}}class Rs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Cu extends Rs{constructor(e,t,s){super(e,t,Bu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ai(this.firestore,null,new jt(e))}withConverter(e){return new Cu(this.firestore,e,this._path)}}function Kp(i,e,...t){if(i=(0,he.m9)(i),hf("collection","path",e),i instanceof Kd){const s=Dn.fromString(e,...t);return Wp(s),new Cu(i,null,s)}{if(!(i instanceof Ai||i instanceof Cu))throw new Dt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Dn.fromString(e,...t));return Wp(s),new Cu(i.firestore,null,s)}}function qp(i,e){if(i=Sr(i,Kd),hf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Dt(We.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rs(i,null,(t=e,new qa(Dn.emptyPath(),t)));var t}function Zp(i,e,...t){if(i=(0,he.m9)(i),1===arguments.length&&(e=yi.A()),hf("doc","path",e),i instanceof Kd){const s=Dn.fromString(e,...t);return wm(s),new Ai(i,null,new jt(s))}{if(!(i instanceof Ai||i instanceof Cu))throw new Dt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Dn.fromString(e,...t));return wm(s),new Ai(i.firestore,i instanceof Cu?i.converter:null,new jt(s))}}function Im(i,e){return i=(0,he.m9)(i),e=(0,he.m9)(e),(i instanceof Ai||i instanceof Cu)&&(e instanceof Ai||e instanceof Cu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Zd(i,e){return i=(0,he.m9)(i),e=(0,he.m9)(e),i instanceof Rs&&e instanceof Rs&&i.firestore===e.firestore&&xe(i._query,e._query)&&i.converter===e.converter}class Dm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Kg(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,p.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Li(t))throw t;wt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=qh.createAndSchedule(this,e,t,s,l=>this.na(l));return this.zc.push(a),a}Zc(){this.Wc&&Zt()}verifyOperationInProgress(){}sa(){var e=this;return(0,p.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class Yp{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Cm=-1;class Si extends Kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Dm,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qp(this),this._firestoreClient.terminate()}}function zi(i){return i._firestoreClient||Qp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qp(i){var e,t,s;const a=i._freezeSettings(),l=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Uc(i._databaseId,D,i._persistenceKey,(U=a).host,U.ssl,U.experimentalForceLongPolling,U.experimentalAutoDetectLongPolling,Gp(U.experimentalLongPollingOptions),U.useFetchStreams));var D,U;i._firestoreClient=new zd(i._authCredentials,i._appCheckCredentials,i._queue,l),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Uv(i,e){Xp(i=Sr(i,Si));const t=zi(i);if(t._uninitializedComponentsProvider)throw new Dt(We.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),a=new zl;return bm(t,a,new Bp(a,s.cacheSizeBytes,e?.forceOwnership))}function Bv(i){Xp(i=Sr(i,Si));const e=zi(i);if(e._uninitializedComponentsProvider)throw new Dt(We.FAILED_PRECONDITION,"SDK cache is already specified.");Lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new zl;return bm(e,s,new fm(s,t.cacheSizeBytes))}function bm(i,e,t){const s=new ri;return i.asyncQueue.enqueue((0,p.Z)(function*(){try{yield df(i,t),yield Wd(i,e),s.resolve()}catch(a){const l=a;if(!Xa(l))throw l;Lr("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function Tm(i){if(i._initialized&&!i._terminated)throw new Dt(We.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return i._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(t=(0,p.Z)(function*(s){if(!so.D())return Promise.resolve();const a=s+"main";yield so.delete(a)}),function(s){return t.apply(this,arguments)})(Md(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Jp(i){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Mv(i,e){return Op.apply(this,arguments)}(yield Ac(e),t)})),t.promise}(zi(i=Sr(i,Si)))}function Am(i){return function ql(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield pa(i),t=yield gl(i);return e.setNetworkEnabled(!0),function(s){const a=Bt(s);return a.vu.delete(0),kd(a)}(t)}))}(zi(i=Sr(i,Si)))}function Sm(i){return function Zl(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield pa(i),t=yield gl(i);return e.setNetworkEnabled(!1),(s=(0,p.Z)(function*(a){const l=Bt(a);l.vu.add(0),yield ul(l),l.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(zi(i=Sr(i,Si)))}function Mm(i,e){const t=zi(i=Sr(i,Si)),s=new Yp;return function ym(i,e,t,s){const a=function(l,f){let D;return D="string"==typeof l?ky().encode(l):l,N=function(N,U){if(N instanceof Uint8Array)return pm(N,U);if(N instanceof ArrayBuffer)return pm(new Uint8Array(N),U);if(N instanceof ReadableStream)return N.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new lf(N,f);var N}(t,jl(e));i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function kv(i,e,t){const s=Bt(i);var a;(a=(0,p.Z)(function*(l,f,D){try{const N=yield f.getMetadata();if(yield function($e,at){const kt=Bt($e),sn=Gi(at.createTime);return kt.persistence.runTransaction("hasNewerBundle","readonly",un=>kt.qs.getBundleMetadata(un,at.id)).then(un=>!!un&&un.createTime.compareTo(sn)>=0)}(l.localStore,N))return yield f.close(),D._completeWith({taskState:"Success",documentsLoaded:($e=N).totalDocuments,bytesLoaded:$e.totalBytes,totalDocuments:$e.totalDocuments,totalBytes:$e.totalBytes}),Promise.resolve(new Set);D._updateProgress(am(N));const U=new n0(N,l.localStore,f.serializer);let Q=yield f.bc();for(;Q;){const $e=yield U.zu(Q);$e&&D._updateProgress($e),Q=yield f.bc()}const ye=yield U.complete();return yield Iu(l,ye.Ju,void 0),yield function($e,at){const kt=Bt($e);return kt.persistence.runTransaction("Save bundle","readwrite",sn=>kt.qs.saveBundleMetadata(sn,at))}(l.localStore,N),D._completeWith(ye.progress),Promise.resolve(ye.Hu)}catch(N){return Lr("SyncEngine",`Loading bundle failed with ${N}`),D._failWith(N),Promise.resolve(new Set)}var $e}),function(l,f,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Ac(i),a,s)}))}(t,i._databaseId,e,s),s}function xm(i,e){return function vm(i,e){return i.asyncQueue.enqueue((0,p.Z)(function*(){return function(t,s){const a=Bt(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.qs.getNamedQuery(l,s))}(yield Kl(i),e)}))}(zi(i=Sr(i,Si)),e).then(t=>t?new Rs(i,null,t.query):null)}function Xp(i){if(i._initialized||i._terminated)throw new Dt(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vl(bi.fromBase64String(e))}catch(t){throw new Dt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vl(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Dt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xc{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Dt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Dt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sn(this._lat,e._lat)||Sn(this._long,e._long)}}const Ps=/^__.*__$/;class Pm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class Om{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zt()}}class Yd{constructor(e,t,s,a,l,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Nm(this.ca)&&Ps.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $v{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jl(e)}ya(e,t,s,a=!1){return new Yd({ca:e,methodName:t,ga:s,path:er.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rc(i){const e=i._freezeSettings(),t=jl(i._databaseId);return new $v(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Qd(i,e,t,s,a,l={}){const f=i.ya(l.merge||l.mergeFields?2:0,e,t,a);La("Data must be an object, but it was:",f,s);const D=Um(s,f);let N,U;if(l.merge)N=new es(f.fieldMask),U=f.fieldTransforms;else if(l.mergeFields){const Q=[];for(const ye of l.mergeFields){const $e=ko(e,ye,t);if(!f.contains($e))throw new Dt(We.INVALID_ARGUMENT,`Field '${$e}' is specified in your field mask but missing from your input data.`);Bm(Q,$e)||Q.push($e)}N=new es(Q),U=f.fieldTransforms.filter(ye=>N.covers(ye.field))}else N=null,U=f.fieldTransforms;return new Pm(new ts(D),N,U)}class bu extends xc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bu}}function km(i,e,t){return new Yd({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends xc{_toFieldTransform(e){return new xl(e.path,new $u)}isEqual(e){return e instanceof eg}}class Fm extends xc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(l=>Eo(l,t)),a=new yu(s);return new xl(e.path,a)}isEqual(e){return this===e}}class Hv extends xc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(l=>Eo(l,t)),a=new Hu(s);return new xl(e.path,a)}isEqual(e){return this===e}}class Lm extends xc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new pc(e.serializer,Of(e.serializer,this.Ia));return new xl(e.path,t)}isEqual(e){return this===e}}function Vm(i,e,t,s){const a=i.ya(1,e,t);La("Data must be an object, but it was:",a,s);const l=[],f=ts.empty();Wa(s,(N,U)=>{const Q=Jd(e,N,t);U=(0,he.m9)(U);const ye=a.da(Q);if(U instanceof bu)l.push(Q);else{const $e=Eo(U,ye);null!=$e&&(l.push(Q),f.set(Q,$e))}});const D=new es(l);return new Om(f,D,a.fieldTransforms)}function vf(i,e,t,s,a,l){const f=i.ya(1,e,t),D=[ko(e,s,t)],N=[a];if(l.length%2!=0)throw new Dt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $e=0;$e<l.length;$e+=2)D.push(ko(e,l[$e])),N.push(l[$e+1]);const U=[],Q=ts.empty();for(let $e=D.length-1;$e>=0;--$e)if(!Bm(U,D[$e])){const at=D[$e];let kt=N[$e];kt=(0,he.m9)(kt);const sn=f.da(at);if(kt instanceof bu)U.push(at);else{const un=Eo(kt,sn);null!=un&&(U.push(at),Q.set(at,un))}}const ye=new es(U);return new Om(Q,ye,f.fieldTransforms)}function _f(i,e,t,s=!1){return Eo(t,i.ya(s?4:3,e))}function Eo(i,e){if(tg(i=(0,he.m9)(i)))return La("Unsupported field value:",e,i),Um(i,e);if(i instanceof xc)return function(t,s){if(!Nm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const f of t){let D=Eo(f,s.wa(l));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),l++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,he.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Of(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=$r.fromDate(t);return{timestampValue:mc(s.serializer,a)}}if(t instanceof $r){const a=new $r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mc(s.serializer,a)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vl)return{bytesValue:Vy(s.serializer,t._byteString)};if(t instanceof Ai){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ff(t)}`)}(i,e)}function Um(i,e){const t={};return Lc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(i,(s,a)=>{const l=Eo(a,e.ha(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof $r||i instanceof yf||i instanceof vl||i instanceof Ai||i instanceof xc)}function La(i,e,t){if(!tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ff(t);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function ko(i,e,t){if((e=(0,he.m9)(e))instanceof Mc)return e._internalPath;if("string"==typeof e)return Jd(i,e);throw Xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const tu=new RegExp("[~\\*/\\[\\]]");function Jd(i,e,t){if(e.search(tu)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xd(i,e,t,s,a){const l=s&&!s.isEmpty(),f=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let N="";return(l||f)&&(N+=" (found",l&&(N+=` in field ${s}`),f&&(N+=` in document ${a}`),N+=")"),new Dt(We.INVALID_ARGUMENT,D+i+N)}function Bm(i,e){return i.some(t=>t.isEqual(e))}class eh{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ai(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends eh{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Jd(i,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}function wf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Dt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _l{}class th extends _l{}function jm(i,e,...t){let s=[];e instanceof _l&&s.push(e),s=s.concat(t),function(a){const l=a.filter(D=>D instanceof El).length,f=a.filter(D=>D instanceof nh).length;if(l>1||l>0&&f>0)throw new Dt(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class nh extends th{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Rs(e.firestore,e.converter,$(e._query,t))}_parse(e){const t=Rc(e.firestore);return function(a,l,f,D,N,U,Q){let ye;if(N.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new Dt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){Zm(Q,U);const $e=[];for(const at of Q)$e.push(qm(D,a,at));ye={arrayValue:{values:$e}}}else ye=qm(D,a,Q)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||Zm(Q,U),ye=_f(f,"where",Q,"in"===U||"not-in"===U);return ge.create(N,U,ye)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $m(i,e,t){const s=e,a=Ef("where",i);return nh._create(a,s,t)}class El extends _l{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new El(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:be.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let l=s;const f=a.getFlattenedFilters();for(const D of f)Ym(l,D),l=$(l,D)}(e._query,t),new Rs(e.firestore,e.converter,$(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new If(e,t)}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Dt(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Dt(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new T(a,l);return function(D,N){if(null===Al(D)){const U=v(D);null!==U&&Qm(0,U,N.field)}}(s,f),f}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new qa(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Hm(i,e="asc"){const t=e,s=Ef("orderBy",i);return If._create(s,t)}class Jl extends th{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jl(e,t,s)}_apply(e){return new Rs(e.firestore,e.converter,J(e._query,this._limit,this._limitType))}}function Df(i){return pf("limit",i),Jl._create("limit",i,"F")}function rg(i){return pf("limitToLast",i),Jl._create("limitToLast",i,"L")}class rh extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(a=t,new qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Gm(...i){return rh._create("startAt",i,!0)}function zm(...i){return rh._create("startAfter",i,!1)}class ih extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Rs(e.firestore,e.converter,(a=t,new qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Wm(...i){return ih._create("endBefore",i,!1)}function Km(...i){return ih._create("endAt",i,!0)}function ig(i,e,t,s){if(t[0]=(0,he.m9)(t[0]),t[0]instanceof eh)return function(a,l,f,D,N){if(!D)throw new Dt(We.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const U=[];for(const Q of g(a))if(Q.field.isKeyField())U.push(Ra(l,D.key));else{const ye=D.data.field(Q.field);if(ku(ye))throw new Dt(We.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ye){const $e=Q.field.canonicalString();throw new Dt(We.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$e}' (used as the orderBy) does not exist.`)}U.push(ye)}return new ns(U,N)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const a=Rc(i.firestore);return function(l,f,D,N,U,Q){const ye=l.explicitOrderBy;if(U.length>ye.length)throw new Dt(We.INVALID_ARGUMENT,`Too many arguments provided to ${N}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $e=[];for(let at=0;at<U.length;at++){const kt=U[at];if(ye[at].field.isKeyField()){if("string"!=typeof kt)throw new Dt(We.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${N}(), but got a ${typeof kt}`);if(!d(l)&&-1!==kt.indexOf("/"))throw new Dt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${N}() must be a plain document ID, but '${kt}' contains a slash.`);const sn=l.path.child(Dn.fromString(kt));if(!jt.isDocumentKey(sn))throw new Dt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${N}() must result in a valid document path, but '${sn}' is not because it contains an odd number of segments.`);const un=new jt(sn);$e.push(Ra(f,un))}else{const sn=_f(D,N,kt);$e.push(sn)}}return new ns($e,Q)}(i._query,i.firestore._databaseId,a,e,t,s)}}function qm(i,e,t){if("string"==typeof(t=(0,he.m9)(t))){if(""===t)throw new Dt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d(e)&&-1!==t.indexOf("/"))throw new Dt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Dn.fromString(t));if(!jt.isDocumentKey(s))throw new Dt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ra(i,new jt(s))}if(t instanceof Ai)return Ra(i,t._key);throw new Dt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function Zm(i,e){if(!Array.isArray(i)||0===i.length)throw new Dt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ym(i,e){if(e.isInequality()){const s=v(i),a=e.field;if(null!==s&&!s.isEqual(a))throw new Dt(We.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const l=Al(i);null!==l&&Qm(0,a,l)}const t=function(s,a){for(const l of s)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Dt(We.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qm(i,e,t){if(!t.isEqual(e))throw new Dt(We.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sg{convertValue(e,t="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wa(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new yf(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Fu(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const t=mo(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Dn.fromString(e);an(Gf(s));const a=new Yo(s.get(1),s.get(3)),l=new jt(s.popFirst(5));return a.isEqual(t)||wr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Cf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class zv extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ai(this.firestore,null,t)}}class wl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Il extends eh{constructor(e,t,s,a,l,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class sh extends Il{data(e={}){return super.data(e)}}class Dl{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new wl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Dt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new wl(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const D=new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new wl(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let N=-1,U=-1;return 0!==f.type&&(N=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),U=l.indexOf(f.doc.key)),{type:Kv(f.type),doc:D,oldIndex:N,newIndex:U}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zt()}}function Xm(i,e){return i instanceof Il&&e instanceof Il?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Dl&&e instanceof Dl&&i._firestore===e._firestore&&Zd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ey(i){i=Sr(i,Ai);const e=Sr(i.firestore,Si);return yl(zi(e),i._key).then(t=>cy(e,i,t))}class Ju extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ai(this.firestore,null,t)}}function ty(i){i=Sr(i,Ai);const e=Sr(i.firestore,Si),t=zi(e),s=new Ju(e);return function Yl(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(s=(0,p.Z)(function*(a,l,f){try{const D=yield function(N,U){const Q=Bt(N);return Q.persistence.runTransaction("read document","readonly",ye=>Q.localDocuments.getDocument(ye,U))}(a,l);D.isFoundDocument()?f.resolve(D):D.isNoDocument()?f.resolve(null):f.reject(new Dt(We.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const N=ll(D,`Failed to get document '${l} from cache`);f.reject(N)}}),function(a,l,f){return s.apply(this,arguments)})(yield Kl(i),e,t);var s})),t.promise}(t,i._key).then(a=>new Il(e,s,i._key,a,new wl(null!==a&&a.hasLocalMutations,!0),i.converter))}function ny(i){i=Sr(i,Ai);const e=Sr(i.firestore,Si);return yl(zi(e),i._key,{source:"server"}).then(t=>cy(e,i,t))}function ry(i){i=Sr(i,Rs);const e=Sr(i.firestore,Si),t=zi(e),s=new Ju(e);return wf(i._query),Hp(t,i._query).then(a=>new Dl(e,s,i,a))}function iy(i){i=Sr(i,Rs);const e=Sr(i.firestore,Si),t=zi(e),s=new Ju(e);return function gm(i,e){const t=new ri;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(s=(0,p.Z)(function*(a,l,f){try{const D=yield Rd(a,l,!0),N=new um(l,D.ir),U=N.sc(D.documents),Q=N.applyChanges(U,!1);f.resolve(Q.snapshot)}catch(D){const N=ll(D,`Failed to execute query '${l} against cache`);f.reject(N)}}),function(a,l,f){return s.apply(this,arguments)})(yield Kl(i),e,t);var s})),t.promise}(t,i._query).then(a=>new Dl(e,s,i,a))}function sy(i){i=Sr(i,Rs);const e=Sr(i.firestore,Si),t=zi(e),s=new Ju(e);return Hp(t,i._query,{source:"server"}).then(a=>new Dl(e,s,i,a))}function oy(i,e,t){i=Sr(i,Ai);const s=Sr(i.firestore,Si),a=Cf(i.converter,e,t);return nu(s,[Qd(Rc(s),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,Ti.none())])}function ay(i,e,t,...s){i=Sr(i,Ai);const a=Sr(i.firestore,Si),l=Rc(a);let f;return f="string"==typeof(e=(0,he.m9)(e))||e instanceof Mc?vf(l,"updateDoc",i._key,e,t,s):Vm(l,"updateDoc",i._key,e),nu(a,[f.toMutation(i._key,Ti.exists(!0))])}function uy(i){return nu(Sr(i.firestore,Si),[new gc(i._key,Ti.none())])}function Cl(i,e){const t=Sr(i.firestore,Si),s=Zp(i),a=Cf(i.converter,e);return nu(t,[Qd(Rc(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,Ti.exists(!1))]).then(()=>s)}function qv(i,...e){var t,s,a;i=(0,he.m9)(i);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||mf(e[f])||(l=e[f],f++);const D={includeMetadataChanges:l.includeMetadataChanges};if(mf(e[f])){const ye=e[f];e[f]=null===(t=ye.next)||void 0===t?void 0:t.bind(ye),e[f+1]=null===(s=ye.error)||void 0===s?void 0:s.bind(ye),e[f+2]=null===(a=ye.complete)||void 0===a?void 0:a.bind(ye)}let N,U,Q;if(i instanceof Ai)U=Sr(i.firestore,Si),Q=Bu(i._key.path),N={next:ye=>{e[f]&&e[f](cy(U,i,ye))},error:e[f+1],complete:e[f+2]};else{const ye=Sr(i,Rs);U=Sr(ye.firestore,Si),Q=ye._query;const $e=new Ju(U);N={next:at=>{e[f]&&e[f](new Dl(U,$e,ye,at))},error:e[f+1],complete:e[f+2]},wf(i._query)}return function(ye,$e,at,kt){const sn=new cf(kt),un=new No($e,sn,at);return ye.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return nm(yield eu(ye),un)})),()=>{sn.Dc(),ye.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Yh(yield eu(ye),un)}))}}(zi(U),Q,D,N)}function Zv(i,e){return function mm(i,e){const t=new cf(e);return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return s=yield eu(i),a=t,Bt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return s=yield eu(i),a=t,void Bt(s).ku.delete(a);var s,a}))}}(zi(i=Sr(i,Si)),mf(e)?e:{next:e})}function nu(i,e){return function(t,s){const a=new ri;return t.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Tv(i,e,t){return Fa.apply(this,arguments)}(yield Ac(t),s,a)})),a.promise}(zi(i),e)}function cy(i,e,t){const s=t.docs.get(e._key),a=new Ju(i);return new Il(i,a,e._key,s,new wl(t.hasPendingWrites,t.fromCache),e.converter)}const _0={maxAttempts:5};class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rc(e)}set(e,t,s){this._verifyNotCommitted();const a=Xu(e,this._firestore),l=Cf(a.converter,t,s),f=Qd(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(f.toMutation(a._key,Ti.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=Xu(e,this._firestore);let f;return f="string"==typeof(t=(0,he.m9)(t))||t instanceof Mc?vf(this._dataReader,"WriteBatch.update",l._key,t,s,a):Vm(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(f.toMutation(l._key,Ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xu(e,this._firestore);return this._mutations=this._mutations.concat(new gc(t._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Dt(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xu(i,e){if((i=(0,he.m9)(i)).firestore!==e)throw new Dt(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rc(e)}get(e){const t=Xu(e,this._firestore),s=new zv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Zt();const l=a[0];if(l.isFoundDocument())return new eh(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new eh(this._firestore,s,t._key,null,t.converter);throw Zt()})}set(e,t,s){const a=Xu(e,this._firestore),l=Cf(a.converter,t,s),f=Qd(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,f),this}update(e,t,s,...a){const l=Xu(e,this._firestore);let f;return f="string"==typeof(t=(0,he.m9)(t))||t instanceof Mc?vf(this._dataReader,"Transaction.update",l._key,t,s,a):Vm(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,f),this}delete(e){const t=Xu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xu(e,this._firestore),s=new Ju(this._firestore);return super.get(e).then(a=>new Il(this._firestore,s,t._key,a._document,new wl(!1,!1),t.converter))}}function fy(i,e,t){i=Sr(i,Si);const s=Object.assign(Object.assign({},_0),t);return function(a){if(a.maxAttempts<1)throw new Dt(We.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,l,f){const D=new ri;return a.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const N=yield function ml(i){return Du(i).then(e=>e.datastore)}(a);new a0(a.asyncQueue,N,f,l,D).run()})),D.promise}(zi(i),a=>e(new Qv(i,a)),s)}function py(){return new bu("deleteField")}function gy(){return new eg("serverTimestamp")}function my(...i){return new Fm("arrayUnion",i)}function Jv(...i){return new Hv("arrayRemove",i)}function Xv(i){return new Lm("increment",i)}!function(i,e=!0){Tr=F.SDK_VERSION,(0,F._registerComponent)(new B.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const l=t.getProvider("app").getImmediate(),f=new Si(new tc(t.getProvider("auth-internal")),new Nc(t.getProvider("app-check-internal")),function(D,N){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Dt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(D.options.projectId,N)}(l,s),l);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(Er,"3.13.0",i),(0,F.registerVersion)(Er,"3.13.0","esm2017")}()},2090:(Nt,ke,R)=>{R.d(ke,{$s:()=>H,BH:()=>Xe,G6:()=>ze,L:()=>Se,LL:()=>$t,Pz:()=>et,Sg:()=>mt,UG:()=>St,US:()=>Ee,ZB:()=>ve,ZR:()=>ht,aH:()=>fe,b$:()=>Gt,eu:()=>qe,hl:()=>Be,jU:()=>Yt,m9:()=>it,ne:()=>wn,pd:()=>Hn,r3:()=>Wn,ru:()=>It,tV:()=>X,uI:()=>Te,vZ:()=>Tn,w1:()=>ar,xO:()=>zr,xb:()=>Pr,z$:()=>ot,zI:()=>ct,zd:()=>Ln});const le=function(ae){const ce=[];let Y=0;for(let K=0;K<ae.length;K++){let G=ae.charCodeAt(K);G<128?ce[Y++]=G:G<2048?(ce[Y++]=G>>6|192,ce[Y++]=63&G|128):55296==(64512&G)&&K+1<ae.length&&56320==(64512&ae.charCodeAt(K+1))?(G=65536+((1023&G)<<10)+(1023&ae.charCodeAt(++K)),ce[Y++]=G>>18|240,ce[Y++]=G>>12&63|128,ce[Y++]=G>>6&63|128,ce[Y++]=63&G|128):(ce[Y++]=G>>12|224,ce[Y++]=G>>6&63|128,ce[Y++]=63&G|128)}return ce},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ae,ce){if(!Array.isArray(ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let G=0;G<ae.length;G+=3){const De=ae[G],st=G+1<ae.length,Ot=st?ae[G+1]:0,Jt=G+2<ae.length,se=Jt?ae[G+2]:0;let Me=(15&Ot)<<2|se>>6,je=63&se;Jt||(je=64,st||(Me=64)),K.push(Y[De>>2],Y[(3&De)<<4|Ot>>4],Y[Me],Y[je])}return K.join("")},encodeString(ae,ce){return this.HAS_NATIVE_SUPPORT&&!ce?btoa(ae):this.encodeByteArray(le(ae),ce)},decodeString(ae,ce){return this.HAS_NATIVE_SUPPORT&&!ce?atob(ae):function(ae){const ce=[];let Y=0,K=0;for(;Y<ae.length;){const G=ae[Y++];if(G<128)ce[K++]=String.fromCharCode(G);else if(G>191&&G<224){const De=ae[Y++];ce[K++]=String.fromCharCode((31&G)<<6|63&De)}else if(G>239&&G<365){const Jt=((7&G)<<18|(63&ae[Y++])<<12|(63&ae[Y++])<<6|63&ae[Y++])-65536;ce[K++]=String.fromCharCode(55296+(Jt>>10)),ce[K++]=String.fromCharCode(56320+(1023&Jt))}else{const De=ae[Y++],st=ae[Y++];ce[K++]=String.fromCharCode((15&G)<<12|(63&De)<<6|63&st)}}return ce.join("")}(this.decodeStringToByteArray(ae,ce))},decodeStringToByteArray(ae,ce){this.init_();const Y=ce?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let G=0;G<ae.length;){const De=Y[ae.charAt(G++)],Ot=G<ae.length?Y[ae.charAt(G)]:0;++G;const se=G<ae.length?Y[ae.charAt(G)]:64;++G;const ee=G<ae.length?Y[ae.charAt(G)]:64;if(++G,null==De||null==Ot||null==se||null==ee)throw new we;K.push(De<<2|Ot>>4),64!==se&&(K.push(Ot<<4&240|se>>2),64!==ee&&K.push(se<<6&192|ee))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ae=0;ae<this.ENCODED_VALS.length;ae++)this.byteToCharMap_[ae]=this.ENCODED_VALS.charAt(ae),this.charToByteMap_[this.byteToCharMap_[ae]]=ae,this.byteToCharMapWebSafe_[ae]=this.ENCODED_VALS_WEBSAFE.charAt(ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ae]]=ae,ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ae)]=ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ae)]=ae)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(ae){return function(ae){const ce=le(ae);return Ee.encodeByteArray(ce,!0)}(ae).replace(/\./g,"")},X=function(ae){try{return Ee.decodeString(ae,!0)}catch(ce){console.error("base64Decode failed: ",ce)}return null};function ve(ae,ce){if(!(ce instanceof Object))return ce;switch(ce.constructor){case Date:return new Date(ce.getTime());case Object:void 0===ae&&(ae={});break;case Array:ae=[];break;default:return ce}for(const Y in ce)!ce.hasOwnProperty(Y)||!ut(Y)||(ae[Y]=ve(ae[Y],ce[Y]));return ae}function ut(ae){return"__proto__"!==ae}const Oe=()=>{try{return function Ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ae=process.env.__FIREBASE_DEFAULTS__;return ae?JSON.parse(ae):void 0})()||(()=>{if(typeof document>"u")return;let ae;try{ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ce=ae&&X(ae[1]);return ce&&JSON.parse(ce)})()}catch(ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ae}`)}},fe=()=>{var ae;return null===(ae=Oe())||void 0===ae?void 0:ae.config},et=ae=>{var ce;return null===(ce=Oe())||void 0===ce?void 0:ce[`_${ae}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ce,Y)=>{this.resolve=ce,this.reject=Y})}wrapCallback(ce){return(Y,K)=>{Y?this.reject(Y):this.resolve(K),"function"==typeof ce&&(this.promise.catch(()=>{}),1===ce.length?ce(Y):ce(Y,K))}}}function mt(ae,ce){if(ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=ce||"demo-project",G=ae.iat||0,De=ae.sub||ae.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:G,exp:G+3600,auth_time:G,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},ae);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(st)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function St(){var ae;const ce=null===(ae=Oe())||void 0===ae?void 0:ae.forceEnvironment;if("node"===ce)return!0;if("browser"===ce)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Yt(){return"object"==typeof self&&self.self===self}function It(){const ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ae&&void 0!==ae.id}function Gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ar(){const ae=ot();return ae.indexOf("MSIE ")>=0||ae.indexOf("Trident/")>=0}function ze(){return!St()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){try{return"object"==typeof indexedDB}catch{return!1}}function qe(){return new Promise((ae,ce)=>{try{let Y=!0;const K="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(K);G.onsuccess=()=>{G.result.close(),Y||self.indexedDB.deleteDatabase(K),ae(!0)},G.onupgradeneeded=()=>{Y=!1},G.onerror=()=>{var De;ce((null===(De=G.error)||void 0===De?void 0:De.message)||"")}}catch(Y){ce(Y)}})}function ct(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ht extends Error{constructor(ce,Y,K){super(Y),this.code=ce,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,ht.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(ce,Y,K){this.service=ce,this.serviceName=Y,this.errors=K}create(ce,...Y){const K=Y[0]||{},G=`${this.service}/${ce}`,De=this.errors[ce],st=De?function Mt(ae,ce){return ae.replace(qt,(Y,K)=>{const G=ce[K];return null!=G?String(G):`<${K}?>`})}(De,K):"Error";return new ht(G,`${this.serviceName}: ${st} (${G}).`,K)}}const qt=/\{\$([^}]+)}/g;function Wn(ae,ce){return Object.prototype.hasOwnProperty.call(ae,ce)}function Pr(ae){for(const ce in ae)if(Object.prototype.hasOwnProperty.call(ae,ce))return!1;return!0}function Tn(ae,ce){if(ae===ce)return!0;const Y=Object.keys(ae),K=Object.keys(ce);for(const G of Y){if(!K.includes(G))return!1;const De=ae[G],st=ce[G];if(Fn(De)&&Fn(st)){if(!Tn(De,st))return!1}else if(De!==st)return!1}for(const G of K)if(!Y.includes(G))return!1;return!0}function Fn(ae){return null!==ae&&"object"==typeof ae}function zr(ae){const ce=[];for(const[Y,K]of Object.entries(ae))Array.isArray(K)?K.forEach(G=>{ce.push(encodeURIComponent(Y)+"="+encodeURIComponent(G))}):ce.push(encodeURIComponent(Y)+"="+encodeURIComponent(K));return ce.length?"&"+ce.join("&"):""}function Ln(ae){const ce={};return ae.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[G,De]=K.split("=");ce[decodeURIComponent(G)]=decodeURIComponent(De)}}),ce}function Hn(ae){const ce=ae.indexOf("?");if(!ce)return"";const Y=ae.indexOf("#",ce);return ae.substring(ce,Y>0?Y:void 0)}function wn(ae,ce){const Y=new zt(ae,ce);return Y.subscribe.bind(Y)}class zt{constructor(ce,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{ce(this)}).catch(K=>{this.error(K)})}next(ce){this.forEachObserver(Y=>{Y.next(ce)})}error(ce){this.forEachObserver(Y=>{Y.error(ce)}),this.close(ce)}complete(){this.forEachObserver(ce=>{ce.complete()}),this.close()}subscribe(ce,Y,K){let G;if(void 0===ce&&void 0===Y&&void 0===K)throw new Error("Missing Observer.");G=function xn(ae,ce){if("object"!=typeof ae||null===ae)return!1;for(const Y of ce)if(Y in ae&&"function"==typeof ae[Y])return!0;return!1}(ce,["next","error","complete"])?ce:{next:ce,error:Y,complete:K},void 0===G.next&&(G.next=gr),void 0===G.error&&(G.error=gr),void 0===G.complete&&(G.complete=gr);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),De}unsubscribeOne(ce){void 0===this.observers||void 0===this.observers[ce]||(delete this.observers[ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ce){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,ce)}sendOne(ce,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ce])try{Y(this.observers[ce])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(ce){this.finalized||(this.finalized=!0,void 0!==ce&&(this.finalError=ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}function H(ae,ce=1e3,Y=2){const K=ce*Math.pow(Y,ae),G=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+G)}function it(ae){return ae&&ae._delegate?ae._delegate:ae}},3651:(Nt,ke,R)=>{R.d(ke,{e:()=>Tt});var p=R(5861),F=R(1389),we=(R(2090),R(6881),R(1877),R(4859),R(3900)),te=R(9646),Se=R(5698),X=R(4004),ie=R(8505),ve=R(4650),ut=R(1205),Ze=R(33),Ye=R(2827);let Tt=(()=>{class Ke{constructor(bt,ft,fe,et){this.afAuth=bt,this.afs=ft,this.router=fe,this.ngZone=et,this.username="Anonimo",this.user$=this.afAuth.authState.pipe((0,we.w)(Xe=>Xe?this.afs.doc(`users/${Xe.uid}`).valueChanges():(0,te.of)(null)),(0,Se.q)(1),(0,X.U)(Xe=>!0))}isLoggedIn(){var bt=!1;return this.user$.pipe((0,Se.q)(1),(0,ie.b)(ft=>this.username=ft?.displayName),(0,X.U)(ft=>!!ft),(0,ie.b)(ft=>{ft&&(bt=!0)})),bt}googleSignin(){var bt=this;return(0,p.Z)(function*(){const ft=yield bt.afAuth.signInWithPopup(new F.V);return ft.user&&bt.router.navigate(["/home"]),bt.updateUserData(ft.user)})()}GoogleAuth(){return this.AuthLogin(new F.V)}AuthLogin(bt){var ft=this;return(0,p.Z)(function*(){return ft.afAuth.signInWithPopup(bt).then(fe=>{console.log("You have been successfully logged in!")}).catch(fe=>{console.log(fe)})})()}updateUserData(bt){return this.afs.doc(`users/${bt.uid}`).set({uid:bt.uid,email:bt.email,displayName:bt.displayName},{merge:!0})}signOut(){var bt=this;return(0,p.Z)(function*(){bt.username="Anonimo",yield bt.afAuth.signOut(),bt.router.navigate(["/login"])})()}}return Ke.\u0275fac=function(bt){return new(bt||Ke)(ve.LFG(ut.zQ),ve.LFG(Ze.ST),ve.LFG(Ye.F0),ve.LFG(ve.R0b))},Ke.\u0275prov=ve.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})()},2622:(Nt,ke,R)=>{R.d(ke,{Q:()=>Ee});var p=R(1135),F=R(9646),B=R(8505),le=R(4650),he=R(6535);let Ee=(()=>{class we{constructor(Se){this.fos=Se,this.hashMapRoutes=new Map}getCollection(Se,X,ie,ve){return console.log(this.hashMapRoutes.has(Se)),!ve&&this.hashMapRoutes.has(Se)||(this.hashMapRoutes.has(Se)?this.hashMapRoutes.get(Se)?.next(this.performGetRequest(Se,X,ie)):this.hashMapRoutes.set(Se,new p.X(this.performGetRequest(Se,X,ie))),console.log(this.hashMapRoutes.has(Se))),this.hashMapRoutes.get(Se)??new p.X((0,F.of)([{}]))}performGetRequest(Se,X,ie){return this.fos.pathSetter(Se),this.fos.filterByKeyBatch(X,ie).pipe((0,B.b)(ve=>this.hashMapRoutes.get(Se)?.next((0,F.of)(ve))))}}return we.\u0275fac=function(Se){return new(Se||we)(le.LFG(he.U))},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})()},6535:(Nt,ke,R)=>{R.d(ke,{U:()=>we});var p=R(8505),F=R(4004),B=R(8996),le=R(590),he=R(4650),Ee=R(33);let we=(()=>{class te{constructor(X,ie){this.db=X,this.path=ie,this.objectRef=X.collection(this.path)}pathSetter(X){this.path=X,this.objectRef=this.db.collection(this.path)}pathGetter(){return this.path}getNextBatch(){return this.db.collection(this.path,X=>X.orderBy("timestamp","desc")).get().pipe((0,p.b)(()=>console.log("From Firestore")),(0,F.U)(X=>X.docs.map(ie=>({id:ie.id,...ie.data()}))))}getAll(){return this.objectRef}getByKey(X,ie){return this.db.collection(this.path,ve=>ve.where(X,"==",ie))}create(X,ie){return ie?this.objectRef.doc(ie).set(X):this.objectRef.add({...X})}update(X,ie){return(0,B.D)(this.objectRef.doc(X).update(ie)).pipe((0,le.P)())}delete(X){return this.objectRef.doc(X).delete()}filterByNameBatch(X,ie,ve){return this.db.collection(this.path,ut=>ut.where("name",">=",X).where("name","<=",X+"\uf8ff").orderBy("name","desc"))}filterUrgent(X){return this.db.collection(this.path,ie=>ie.where("orderDeadline","<=",X).orderBy("orderDeadline","asc")).get().pipe((0,F.U)(ie=>ie.docs.map(ve=>({id:ve.id,...ve.data()}))))}filterByKeyBatch(X,ie,ve){return X&&ie?"orderDeadline"==X?this.filterUrgent(ie):ve?this.db.collection(this.path,ut=>ut.where(X,"==",ie).orderBy("timestamp","desc")).get().pipe((0,F.U)(ut=>ut.docs.map(Ze=>({id:Ze.id,...Ze.data()})))):this.db.collection(this.path,ut=>ut.where(X,">=",ie).where(X,"<=",ie+"\uf8ff").orderBy(X,"desc")).get().pipe((0,F.U)(ut=>ut.docs.map(Ze=>({id:Ze.id,...Ze.data()})))):this.getNextBatch()}}return te.\u0275fac=function(X){return new(X||te)(he.LFG(Ee.ST),he.LFG("path"))},te.\u0275prov=he.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"}),te})()},4466:(Nt,ke,R)=>{R.d(ke,{m:()=>le});var p=R(6895),F=R(4006),B=R(4650);let le=(()=>{class he{}return he.\u0275fac=function(we){return new(we||he)},he.\u0275mod=B.oAB({type:he}),he.\u0275inj=B.cJS({imports:[p.ez,F.u5,F.UX,F.u5]}),he})()},2445:(Nt,ke,R)=>{var p=R(1481),F=R(4650),B=R(2827),le=R(5698),he=R(4004),Ee=R(8505),we=R(3651);let te=(()=>{class Ne{constructor(me,H){this.auth=me,this.router=H}canActivate(me,H){return this.auth.user$.pipe((0,le.q)(1),(0,he.U)(ne=>!!ne),(0,Ee.b)(ne=>{}))}}return Ne.\u0275fac=function(me){return new(me||Ne)(F.LFG(we.e),F.LFG(B.F0))},Ne.\u0275prov=F.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})();const X=[{path:"clients",loadChildren:()=>Promise.all([R.e(167),R.e(737)]).then(R.bind(R,1737)).then(Ne=>Ne.ClientModule),canActivate:[te]},{path:"materials",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(434)]).then(R.bind(R,2434)).then(Ne=>Ne.MaterialModule),canActivate:[te]},{path:"products",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(596)]).then(R.bind(R,2596)).then(Ne=>Ne.ProductModule),canActivate:[te]},{path:"orders",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(437)]).then(R.bind(R,5437)).then(Ne=>Ne.OrdersModule),canActivate:[te]},{path:"shop",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(117)]).then(R.bind(R,9117)).then(Ne=>Ne.ShoppingModule),canActivate:[te]},{path:"history",loadChildren:()=>R.e(72).then(R.bind(R,2072)).then(Ne=>Ne.HistoryModule),canActivate:[te]},{path:"login",component:(()=>{class Ne{constructor(me){this.authService=me}ngOnInit(){}authenticate(){this.authService.googleSignin()}}return Ne.\u0275fac=function(me){return new(me||Ne)(F.Y36(we.e))},Ne.\u0275cmp=F.Xpm({type:Ne,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"d-flex","text-center","text-bg-dark","h-100",2,"background-image","url(assets/img/bg.png)"],[1,"d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"my-auto"],["type","button",1,"btn","btn-lg","btn-outline-light","fw-bold","border-white","rounded-pill",3,"click"],[1,"ms-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"]],template:function(me,H){1&me&&(F.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),F._uU(4," IBM Furniture"),F.qZA(),F.TgZ(5,"button",3),F.NdJ("click",function(){return H.authenticate()}),F._uU(6," Iniciar Sesion con Google "),F.TgZ(7,"span",4),F.O4$(),F.TgZ(8,"svg",5),F._UZ(9,"path",6),F.qZA()()()()()())}}),Ne})()},{path:"",redirectTo:"orders",pathMatch:"full"}];let ie=(()=>{class Ne{}return Ne.\u0275fac=function(me){return new(me||Ne)},Ne.\u0275mod=F.oAB({type:Ne}),Ne.\u0275inj=F.cJS({imports:[B.Bz.forRoot(X),B.Bz]}),Ne})();var ve=R(2011),ut=R(33),Ze=R(6895);let Ye=(()=>{class Ne{constructor(me){this.auth=me,this.signOut=()=>this.auth.signOut()}ngOnInit(){}}return Ne.\u0275fac=function(me){return new(me||Ne)(F.Y36(we.e))},Ne.\u0275cmp=F.Xpm({type:Ne,selectors:[["app-navbar"]],decls:33,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","orders",1,"navbar-brand"],["height","30","src","/assets/img/ibmFurniture_logo.png","alt","ibmFurniture_logo","srcset","",1,"rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","products",1,"nav-link"],["routerLink","clients",1,"nav-link"],["routerLink","materials",1,"nav-link"],["routerLink","orders",1,"nav-link"],["routerLink","shop",1,"nav-link"],["routerLink","history",1,"nav-link"],[1,"navbar-nav"],[1,"fs-3","nav-link","me-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"]],template:function(me,H){1&me&&(F.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),F._UZ(3,"img",3),F._uU(4," IBM Furniture "),F.qZA(),F.TgZ(5,"button",4),F._UZ(6,"span",5),F.qZA(),F.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),F._uU(11,"Productos"),F.qZA()(),F.TgZ(12,"li",8)(13,"a",10),F._uU(14,"Clientes"),F.qZA()(),F.TgZ(15,"li",8)(16,"a",11),F._uU(17,"Materiales"),F.qZA()(),F.TgZ(18,"li",8)(19,"a",12),F._uU(20,"Ordenes"),F.qZA()(),F.TgZ(21,"li",8)(22,"a",13),F._uU(23,"Compras"),F.qZA()(),F.TgZ(24,"li",8)(25,"a",14),F._uU(26,"Historial"),F.qZA()()(),F.TgZ(27,"ul",15)(28,"li",8)(29,"a",16),F.NdJ("click",function(){return H.signOut()}),F.O4$(),F.TgZ(30,"svg",17),F._UZ(31,"path",18)(32,"path",19),F.qZA()()()()()()())},dependencies:[B.yS]}),Ne})();function Tt(Ne,vt){1&Ne&&F._UZ(0,"app-navbar")}let Ke=(()=>{class Ne{constructor(me){this.auth=me,this.title="IBMFurniture",this.isloggedIn$=this.auth.user$.pipe((0,he.U)(H=>!!H))}}return Ne.\u0275fac=function(me){return new(me||Ne)(F.Y36(we.e))},Ne.\u0275cmp=F.Xpm({type:Ne,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"vh-100"]],template:function(me,H){1&me&&(F.YNc(0,Tt,1,0,"app-navbar",0),F.ALo(1,"async"),F.TgZ(2,"div",1),F._UZ(3,"router-outlet"),F.qZA()),2&me&&F.Q6J("ngIf",F.lcZ(1,1,H.isloggedIn$))},dependencies:[Ze.O5,B.lC,Ye,Ze.Ov]}),Ne})();const Oe_firebase={apiKey:"AIzaSyCmya1htVh_wLXOc0zUSpurtnKYROqfSoU",authDomain:"ibmfurniture.firebaseapp.com",projectId:"ibmfurniture",storageBucket:"ibmfurniture.appspot.com",messagingSenderId:"313012116484",appId:"1:313012116484:web:1b535bfdb657c90b742951"};var bt=R(4466),ft=R(9770),fe=R(2843),et=R(8421),Xe=R(9751),mt=R(5577),ot=R(1144),Te=R(576),St=R(3268);const Yt=["addListener","removeListener"],It=["addEventListener","removeEventListener"],Gt=["on","off"];function Rt(Ne,vt,me,H){if((0,Te.m)(me)&&(H=me,me=void 0),H)return Rt(Ne,vt,me).pipe((0,St.Z)(H));const[ne,Fe]=function ze(Ne){return(0,Te.m)(Ne.addEventListener)&&(0,Te.m)(Ne.removeEventListener)}(Ne)?It.map(it=>ae=>Ne[it](vt,ae,me)):function Ve(Ne){return(0,Te.m)(Ne.addListener)&&(0,Te.m)(Ne.removeListener)}(Ne)?Yt.map(ar(Ne,vt)):function Le(Ne){return(0,Te.m)(Ne.on)&&(0,Te.m)(Ne.off)}(Ne)?Gt.map(ar(Ne,vt)):[];if(!ne&&(0,ot.z)(Ne))return(0,mt.z)(it=>Rt(it,vt,me))((0,et.Xf)(Ne));if(!ne)throw new TypeError("Invalid event target");return new Xe.y(it=>{const ae=(...ce)=>it.next(1<ce.length?ce:ce[0]);return ne(ae),()=>Fe(ae)})}function ar(Ne,vt){return me=>H=>Ne[me](vt,H)}var Be=R(9646),qe=R(1350),ct=R(7579),yt=R(5032);const ht=new Xe.y(yt.Z);var Mt=R(6451),qt=R(9300),tn=R(3900),hn=R(4033),Nn=R(4482);const Wt={connector:()=>new ct.x};function cn(Ne,vt=Wt){const{connector:me}=vt;return(0,Nn.e)((H,ne)=>{const Fe=me();(0,et.Xf)(Ne(function ir(Ne){return new Xe.y(vt=>Ne.subscribe(vt))}(Fe))).subscribe(ne),ne.add(H.subscribe(Fe))})}var Mr=R(4986),Pr=R(5403),Tn=R(9718);function Fn(Ne,vt){return vt?me=>(0,qe.z)(vt.pipe((0,le.q)(1),function Ct(){return(0,Nn.e)((Ne,vt)=>{Ne.subscribe((0,Pr.x)(vt,yt.Z))})}()),me.pipe(Fn(Ne))):(0,mt.z)((me,H)=>Ne(me,H).pipe((0,le.q)(1),(0,Tn.h)(me)))}var sr=R(3532);const Pn="Service workers are disabled or not supported by this browser";class zt{constructor(vt){if(this.serviceWorker=vt,vt){const H=Rt(vt,"controllerchange").pipe((0,he.U)(()=>vt.controller)),ne=(0,ft.P)(()=>(0,Be.of)(vt.controller)),Fe=(0,qe.z)(ne,H);this.worker=Fe.pipe((0,qt.h)(K=>!!K)),this.registration=this.worker.pipe((0,tn.w)(()=>vt.getRegistration()));const Y=Rt(vt,"message").pipe((0,he.U)(K=>K.data)).pipe((0,qt.h)(K=>K&&K.type)).pipe(function Wn(Ne){return Ne?vt=>cn(Ne)(vt):vt=>function Mn(Ne,vt){const me=(0,Te.m)(Ne)?Ne:()=>Ne;return(0,Te.m)(vt)?cn(vt,{connector:me}):H=>new hn.c(H,me)}(new ct.x)(vt)}());Y.connect(),this.events=Y}else this.worker=this.events=this.registration=function wn(Ne){return(0,ft.P)(()=>(0,fe._)(new Error(Ne)))}(Pn)}postMessage(vt,me){return this.worker.pipe((0,le.q)(1),(0,Ee.b)(H=>{H.postMessage({action:vt,...me})})).toPromise().then(()=>{})}postMessageWithOperation(vt,me,H){const ne=this.waitForOperationCompleted(H),Fe=this.postMessage(vt,me);return Promise.all([Fe,ne]).then(([,it])=>it)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(vt){let me;return me="string"==typeof vt?H=>H.type===vt:H=>vt.includes(H.type),this.events.pipe((0,qt.h)(me))}nextEventOfType(vt){return this.eventsOfType(vt).pipe((0,le.q)(1))}waitForOperationCompleted(vt){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,qt.h)(me=>me.nonce===vt),(0,le.q)(1),(0,he.U)(me=>{if(void 0!==me.result)return me.result;throw new Error(me.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let on=(()=>{class Ne{constructor(me){if(this.sw=me,this.subscriptionChanges=new ct.x,!me.isEnabled)return this.messages=ht,this.notificationClicks=ht,void(this.subscription=ht);this.messages=this.sw.eventsOfType("PUSH").pipe((0,he.U)(ne=>ne.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,he.U)(ne=>ne.data)),this.pushManager=this.sw.registration.pipe((0,he.U)(ne=>ne.pushManager));const H=this.pushManager.pipe((0,tn.w)(ne=>ne.getSubscription()));this.subscription=(0,Mt.T)(H,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(me){if(!this.sw.isEnabled)return Promise.reject(new Error(Pn));const H={userVisibleOnly:!0};let ne=this.decodeBase64(me.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Fe=new Uint8Array(new ArrayBuffer(ne.length));for(let it=0;it<ne.length;it++)Fe[it]=ne.charCodeAt(it);return H.applicationServerKey=Fe,this.pushManager.pipe((0,tn.w)(it=>it.subscribe(H)),(0,le.q)(1)).toPromise().then(it=>(this.subscriptionChanges.next(it),it))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,le.q)(1),(0,tn.w)(H=>{if(null===H)throw new Error("Not subscribed to push notifications.");return H.unsubscribe().then(ne=>{if(!ne)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Pn))}decodeBase64(me){return atob(me)}}return Ne.\u0275fac=function(me){return new(me||Ne)(F.LFG(zt))},Ne.\u0275prov=F.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})(),xn=(()=>{class Ne{constructor(me){if(this.sw=me,!me.isEnabled)return this.versionUpdates=ht,this.available=ht,this.activated=ht,void(this.unrecoverable=ht);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,qt.h)(H=>"VERSION_READY"===H.type),(0,he.U)(H=>({type:"UPDATE_AVAILABLE",current:H.currentVersion,available:H.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Pn));const me=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:me},me)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Pn));const me=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:me},me)}}return Ne.\u0275fac=function(me){return new(me||Ne)(F.LFG(zt))},Ne.\u0275prov=F.Yz7({token:Ne,factory:Ne.\u0275fac}),Ne})();class gr{}const Jn=new F.OlP("NGSW_REGISTER_SCRIPT");function ur(Ne,vt,me,H){return()=>{if(!(0,Ze.NF)(H)||!("serviceWorker"in navigator)||!1===me.enabled)return;let ne;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof me.registrationStrategy)ne=me.registrationStrategy();else{const[it,...ae]=(me.registrationStrategy||"registerWhenStable:30000").split(":");switch(it){case"registerImmediately":ne=(0,Be.of)(null);break;case"registerWithDelay":ne=nn(+ae[0]||0);break;case"registerWhenStable":ne=ae[0]?(0,Mt.T)(or(Ne),nn(+ae[0])):or(Ne);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${me.registrationStrategy}`)}}Ne.get(F.R0b).runOutsideAngular(()=>ne.pipe((0,le.q)(1)).subscribe(()=>navigator.serviceWorker.register(vt,{scope:me.scope}).catch(it=>console.error("Service worker registration failed with:",it))))}}function nn(Ne){return(0,Be.of)(null).pipe(function Hn(Ne,vt=Mr.z){const me=function Ln(Ne=0,vt,me=Mr.P){let H=-1;return null!=vt&&((0,sr.K)(vt)?me=vt:H=vt),new Xe.y(ne=>{let Fe=function zr(Ne){return Ne instanceof Date&&!isNaN(Ne)}(Ne)?+Ne-me.now():Ne;Fe<0&&(Fe=0);let it=0;return me.schedule(function(){ne.closed||(ne.next(it++),0<=H?this.schedule(void 0,H):ne.complete())},Fe)})}(Ne,vt);return Fn(()=>me)}(Ne))}function or(Ne){return Ne.get(F.z2F).isStable.pipe((0,qt.h)(me=>me))}function fn(Ne,vt){return new zt((0,Ze.NF)(vt)&&!1!==Ne.enabled?navigator.serviceWorker:void 0)}let vr=(()=>{class Ne{static register(me,H={}){return{ngModule:Ne,providers:[{provide:Jn,useValue:me},{provide:gr,useValue:H},{provide:zt,useFactory:fn,deps:[gr,F.Lbi]},{provide:F.ip1,useFactory:ur,deps:[F.zs3,Jn,gr,F.Lbi],multi:!0}]}}}return Ne.\u0275fac=function(me){return new(me||Ne)},Ne.\u0275mod=F.oAB({type:Ne}),Ne.\u0275inj=F.cJS({providers:[on,xn]}),Ne})();var Ft=R(2622),mn=R(6535);let yn=(()=>{class Ne{}return Ne.\u0275fac=function(me){return new(me||Ne)},Ne.\u0275mod=F.oAB({type:Ne,bootstrap:[Ke]}),Ne.\u0275inj=F.cJS({providers:[mn.U,{provide:"path",useValue:"/RMreport"},Ft.Q],imports:[p.b2,ie,ve.hO.initializeApp(Oe_firebase),ut.yb,bt.m,vr.register("./ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),Ne})();(0,F.G48)(),p.q6().bootstrapModule(yn).catch(Ne=>console.error(Ne))},1135:(Nt,ke,R)=>{R.d(ke,{X:()=>F});var p=R(7579);class F extends p.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const he=super._subscribe(le);return!he.closed&&le.next(this._value),he}getValue(){const{hasError:le,thrownError:he,_value:Ee}=this;if(le)throw he;return this._throwIfClosed(),Ee}next(le){super.next(this._value=le)}}},9751:(Nt,ke,R)=>{R.d(ke,{y:()=>te});var p=R(930),F=R(727),B=R(8822),le=R(9635),he=R(2416),Ee=R(576),we=R(2806);let te=(()=>{class ve{constructor(Ze){Ze&&(this._subscribe=Ze)}lift(Ze){const Ye=new ve;return Ye.source=this,Ye.operator=Ze,Ye}subscribe(Ze,Ye,Tt){const Ke=function ie(ve){return ve&&ve instanceof p.Lv||function X(ve){return ve&&(0,Ee.m)(ve.next)&&(0,Ee.m)(ve.error)&&(0,Ee.m)(ve.complete)}(ve)&&(0,F.Nn)(ve)}(Ze)?Ze:new p.Hp(Ze,Ye,Tt);return(0,we.x)(()=>{const{operator:Oe,source:bt}=this;Ke.add(Oe?Oe.call(Ke,bt):bt?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Ze){try{return this._subscribe(Ze)}catch(Ye){Ze.error(Ye)}}forEach(Ze,Ye){return new(Ye=Se(Ye))((Tt,Ke)=>{const Oe=new p.Hp({next:bt=>{try{Ze(bt)}catch(ft){Ke(ft),Oe.unsubscribe()}},error:Ke,complete:Tt});this.subscribe(Oe)})}_subscribe(Ze){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ze)}[B.L](){return this}pipe(...Ze){return(0,le.U)(Ze)(this)}toPromise(Ze){return new(Ze=Se(Ze))((Ye,Tt)=>{let Ke;this.subscribe(Oe=>Ke=Oe,Oe=>Tt(Oe),()=>Ye(Ke))})}}return ve.create=ut=>new ve(ut),ve})();function Se(ve){var ut;return null!==(ut=ve??he.v.Promise)&&void 0!==ut?ut:Promise}},7579:(Nt,ke,R)=>{R.d(ke,{x:()=>we});var p=R(9751),F=R(727);const le=(0,R(3888).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=R(8737),Ee=R(2806);let we=(()=>{class Se extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const ve=new te(this,this);return ve.operator=ie,ve}_throwIfClosed(){if(this.closed)throw new le}next(ie){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(ie)}})}error(ie){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:ve}=this;for(;ve.length;)ve.shift().error(ie)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:ve,isStopped:ut,observers:Ze}=this;return ve||ut?F.Lc:(this.currentObservers=null,Ze.push(ie),new F.w0(()=>{this.currentObservers=null,(0,he.P)(Ze,ie)}))}_checkFinalizedStatuses(ie){const{hasError:ve,thrownError:ut,isStopped:Ze}=this;ve?ie.error(ut):Ze&&ie.complete()}asObservable(){const ie=new p.y;return ie.source=this,ie}}return Se.create=(X,ie)=>new te(X,ie),Se})();class te extends we{constructor(X,ie){super(),this.destination=X,this.source=ie}next(X){var ie,ve;null===(ve=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===ve||ve.call(ie,X)}error(X){var ie,ve;null===(ve=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===ve||ve.call(ie,X)}complete(){var X,ie;null===(ie=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===ie||ie.call(X)}_subscribe(X){var ie,ve;return null!==(ve=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(X))&&void 0!==ve?ve:F.Lc}}},930:(Nt,ke,R)=>{R.d(ke,{Hp:()=>Tt,Lv:()=>ve});var p=R(576),F=R(727),B=R(2416),le=R(7849),he=R(5032);const Ee=Se("C",void 0,void 0);function Se(fe,et,Xe){return{kind:fe,value:et,error:Xe}}var X=R(3410),ie=R(2806);class ve extends F.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,F.Nn)(et)&&et.add(this)):this.destination=ft}static create(et,Xe,mt){return new Tt(et,Xe,mt)}next(et){this.isStopped?bt(function te(fe){return Se("N",fe,void 0)}(et),this):this._next(et)}error(et){this.isStopped?bt(function we(fe){return Se("E",void 0,fe)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?bt(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function Ze(fe,et){return ut.call(fe,et)}class Ye{constructor(et){this.partialObserver=et}next(et){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(et)}catch(mt){Ke(mt)}}error(et){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(et)}catch(mt){Ke(mt)}else Ke(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(Xe){Ke(Xe)}}}class Tt extends ve{constructor(et,Xe,mt){let ot;if(super(),(0,p.m)(et)||!et)ot={next:et??void 0,error:Xe??void 0,complete:mt??void 0};else{let Te;this&&B.v.useDeprecatedNextContext?(Te=Object.create(et),Te.unsubscribe=()=>this.unsubscribe(),ot={next:et.next&&Ze(et.next,Te),error:et.error&&Ze(et.error,Te),complete:et.complete&&Ze(et.complete,Te)}):ot=et}this.destination=new Ye(ot)}}function Ke(fe){B.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(fe):(0,le.h)(fe)}function bt(fe,et){const{onStoppedNotification:Xe}=B.v;Xe&&X.z.setTimeout(()=>Xe(fe,et))}const ft={closed:!0,next:he.Z,error:function Oe(fe){throw fe},complete:he.Z}},727:(Nt,ke,R)=>{R.d(ke,{Lc:()=>Ee,w0:()=>he,Nn:()=>we});var p=R(576);const B=(0,R(3888).d)(Se=>function(ie){Se(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((ve,ut)=>`${ut+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var le=R(8737);class he{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const Ze of ie)Ze.remove(this);else ie.remove(this);const{initialTeardown:ve}=this;if((0,p.m)(ve))try{ve()}catch(Ze){X=Ze instanceof B?Ze.errors:[Ze]}const{_finalizers:ut}=this;if(ut){this._finalizers=null;for(const Ze of ut)try{te(Ze)}catch(Ye){X=X??[],Ye instanceof B?X=[...X,...Ye.errors]:X.push(Ye)}}if(X)throw new B(X)}}add(X){var ie;if(X&&X!==this)if(this.closed)te(X);else{if(X instanceof he){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(X)}}_hasParent(X){const{_parentage:ie}=this;return ie===X||Array.isArray(ie)&&ie.includes(X)}_addParent(X){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(X),ie):ie?[ie,X]:X}_removeParent(X){const{_parentage:ie}=this;ie===X?this._parentage=null:Array.isArray(ie)&&(0,le.P)(ie,X)}remove(X){const{_finalizers:ie}=this;ie&&(0,le.P)(ie,X),X instanceof he&&X._removeParent(this)}}he.EMPTY=(()=>{const Se=new he;return Se.closed=!0,Se})();const Ee=he.EMPTY;function we(Se){return Se instanceof he||Se&&"closed"in Se&&(0,p.m)(Se.remove)&&(0,p.m)(Se.add)&&(0,p.m)(Se.unsubscribe)}function te(Se){(0,p.m)(Se)?Se():Se.unsubscribe()}},2416:(Nt,ke,R)=>{R.d(ke,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Nt,ke,R)=>{R.d(ke,{c:()=>Ee});var p=R(9751),F=R(727),B=R(8343),le=R(5403),he=R(4482);class Ee extends p.y{constructor(te,Se){super(),this.source=te,this.subjectFactory=Se,this._subject=null,this._refCount=0,this._connection=null,(0,he.A)(te)&&(this.lift=te.lift)}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:te}=this;this._subject=this._connection=null,te?.unsubscribe()}connect(){let te=this._connection;if(!te){te=this._connection=new F.w0;const Se=this.getSubject();te.add(this.source.subscribe((0,le.x)(Se,void 0,()=>{this._teardown(),Se.complete()},X=>{this._teardown(),Se.error(X)},()=>this._teardown()))),te.closed&&(this._connection=null,te=F.w0.EMPTY)}return te}refCount(){return(0,B.x)()(this)}}},1350:(Nt,ke,R)=>{R.d(ke,{z:()=>le});var p=R(7886),F=R(3269),B=R(8996);function le(...he){return(0,p.u)()((0,B.D)(he,(0,F.yG)(he)))}},9770:(Nt,ke,R)=>{R.d(ke,{P:()=>B});var p=R(9751),F=R(8421);function B(le){return new p.y(he=>{(0,F.Xf)(le()).subscribe(he)})}},515:(Nt,ke,R)=>{R.d(ke,{E:()=>F});const F=new(R(9751).y)(he=>he.complete())},4128:(Nt,ke,R)=>{R.d(ke,{D:()=>te});var p=R(9751),F=R(4742),B=R(8421),le=R(3269),he=R(5403),Ee=R(3268),we=R(1810);function te(...Se){const X=(0,le.jO)(Se),{args:ie,keys:ve}=(0,F.D)(Se),ut=new p.y(Ze=>{const{length:Ye}=ie;if(!Ye)return void Ze.complete();const Tt=new Array(Ye);let Ke=Ye,Oe=Ye;for(let bt=0;bt<Ye;bt++){let ft=!1;(0,B.Xf)(ie[bt]).subscribe((0,he.x)(Ze,fe=>{ft||(ft=!0,Oe--),Tt[bt]=fe},()=>Ke--,void 0,()=>{(!Ke||!ft)&&(Oe||Ze.next(ve?(0,we.n)(ve,Tt):Tt),Ze.complete())}))}});return X?ut.pipe((0,Ee.Z)(X)):ut}},8996:(Nt,ke,R)=>{R.d(ke,{D:()=>et});var p=R(8421),F=R(5363),B=R(9468),Ee=R(9751),te=R(2202),Se=R(576),X=R(9672);function ve(Xe,mt){if(!Xe)throw new Error("Iterable cannot be null");return new Ee.y(ot=>{(0,X.f)(ot,mt,()=>{const Te=Xe[Symbol.asyncIterator]();(0,X.f)(ot,mt,()=>{Te.next().then(St=>{St.done?ot.complete():ot.next(St.value)})},0,!0)})})}var ut=R(3670),Ze=R(8239),Ye=R(1144),Tt=R(6495),Ke=R(2206),Oe=R(4532),bt=R(3260);function et(Xe,mt){return mt?function fe(Xe,mt){if(null!=Xe){if((0,ut.c)(Xe))return function le(Xe,mt){return(0,p.Xf)(Xe).pipe((0,B.R)(mt),(0,F.Q)(mt))}(Xe,mt);if((0,Ye.z)(Xe))return function we(Xe,mt){return new Ee.y(ot=>{let Te=0;return mt.schedule(function(){Te===Xe.length?ot.complete():(ot.next(Xe[Te++]),ot.closed||this.schedule())})})}(Xe,mt);if((0,Ze.t)(Xe))return function he(Xe,mt){return(0,p.Xf)(Xe).pipe((0,B.R)(mt),(0,F.Q)(mt))}(Xe,mt);if((0,Ke.D)(Xe))return ve(Xe,mt);if((0,Tt.T)(Xe))return function ie(Xe,mt){return new Ee.y(ot=>{let Te;return(0,X.f)(ot,mt,()=>{Te=Xe[te.h](),(0,X.f)(ot,mt,()=>{let St,Yt;try{({value:St,done:Yt}=Te.next())}catch(It){return void ot.error(It)}Yt?ot.complete():ot.next(St)},0,!0)}),()=>(0,Se.m)(Te?.return)&&Te.return()})}(Xe,mt);if((0,bt.L)(Xe))return function ft(Xe,mt){return ve((0,bt.Q)(Xe),mt)}(Xe,mt)}throw(0,Oe.z)(Xe)}(Xe,mt):(0,p.Xf)(Xe)}},8421:(Nt,ke,R)=>{R.d(ke,{Xf:()=>ut});var p=R(7582),F=R(1144),B=R(8239),le=R(9751),he=R(3670),Ee=R(2206),we=R(4532),te=R(6495),Se=R(3260),X=R(576),ie=R(7849),ve=R(8822);function ut(fe){if(fe instanceof le.y)return fe;if(null!=fe){if((0,he.c)(fe))return function Ze(fe){return new le.y(et=>{const Xe=fe[ve.L]();if((0,X.m)(Xe.subscribe))return Xe.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,F.z)(fe))return function Ye(fe){return new le.y(et=>{for(let Xe=0;Xe<fe.length&&!et.closed;Xe++)et.next(fe[Xe]);et.complete()})}(fe);if((0,B.t)(fe))return function Tt(fe){return new le.y(et=>{fe.then(Xe=>{et.closed||(et.next(Xe),et.complete())},Xe=>et.error(Xe)).then(null,ie.h)})}(fe);if((0,Ee.D)(fe))return Oe(fe);if((0,te.T)(fe))return function Ke(fe){return new le.y(et=>{for(const Xe of fe)if(et.next(Xe),et.closed)return;et.complete()})}(fe);if((0,Se.L)(fe))return function bt(fe){return Oe((0,Se.Q)(fe))}(fe)}throw(0,we.z)(fe)}function Oe(fe){return new le.y(et=>{(function ft(fe,et){var Xe,mt,ot,Te;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,p.KL)(fe);!(mt=yield Xe.next()).done;)if(et.next(mt.value),et.closed)return}catch(St){ot={error:St}}finally{try{mt&&!mt.done&&(Te=Xe.return)&&(yield Te.call(Xe))}finally{if(ot)throw ot.error}}et.complete()})})(fe,et).catch(Xe=>et.error(Xe))})}},6451:(Nt,ke,R)=>{R.d(ke,{T:()=>Ee});var p=R(8189),F=R(8421),B=R(515),le=R(3269),he=R(8996);function Ee(...we){const te=(0,le.yG)(we),Se=(0,le._6)(we,1/0),X=we;return X.length?1===X.length?(0,F.Xf)(X[0]):(0,p.J)(Se)((0,he.D)(X,te)):B.E}},9646:(Nt,ke,R)=>{R.d(ke,{of:()=>B});var p=R(3269),F=R(8996);function B(...le){const he=(0,p.yG)(le);return(0,F.D)(le,he)}},2843:(Nt,ke,R)=>{R.d(ke,{_:()=>B});var p=R(9751),F=R(576);function B(le,he){const Ee=(0,F.m)(le)?le:()=>le,we=te=>te.error(Ee());return new p.y(he?te=>he.schedule(we,0,te):we)}},5403:(Nt,ke,R)=>{R.d(ke,{x:()=>F});var p=R(930);function F(le,he,Ee,we,te){return new B(le,he,Ee,we,te)}class B extends p.Lv{constructor(he,Ee,we,te,Se,X){super(he),this.onFinalize=Se,this.shouldUnsubscribe=X,this._next=Ee?function(ie){try{Ee(ie)}catch(ve){he.error(ve)}}:super._next,this._error=te?function(ie){try{te(ie)}catch(ve){he.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(ie){he.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},7886:(Nt,ke,R)=>{R.d(ke,{u:()=>F});var p=R(8189);function F(){return(0,p.J)(1)}},4351:(Nt,ke,R)=>{R.d(ke,{b:()=>B});var p=R(5577),F=R(576);function B(le,he){return(0,F.m)(he)?(0,p.z)(le,he,1):(0,p.z)(le,1)}},6590:(Nt,ke,R)=>{R.d(ke,{d:()=>B});var p=R(4482),F=R(5403);function B(le){return(0,p.e)((he,Ee)=>{let we=!1;he.subscribe((0,F.x)(Ee,te=>{we=!0,Ee.next(te)},()=>{we||Ee.next(le),Ee.complete()}))})}},9300:(Nt,ke,R)=>{R.d(ke,{h:()=>B});var p=R(4482),F=R(5403);function B(le,he){return(0,p.e)((Ee,we)=>{let te=0;Ee.subscribe((0,F.x)(we,Se=>le.call(he,Se,te++)&&we.next(Se)))})}},590:(Nt,ke,R)=>{R.d(ke,{P:()=>we});var p=R(6805),F=R(9300),B=R(5698),le=R(6590),he=R(8068),Ee=R(4671);function we(te,Se){const X=arguments.length>=2;return ie=>ie.pipe(te?(0,F.h)((ve,ut)=>te(ve,ut,ie)):Ee.y,(0,B.q)(1),X?(0,le.d)(Se):(0,he.T)(()=>new p.K))}},4004:(Nt,ke,R)=>{R.d(ke,{U:()=>B});var p=R(4482),F=R(5403);function B(le,he){return(0,p.e)((Ee,we)=>{let te=0;Ee.subscribe((0,F.x)(we,Se=>{we.next(le.call(he,Se,te++))}))})}},9718:(Nt,ke,R)=>{R.d(ke,{h:()=>F});var p=R(4004);function F(B){return(0,p.U)(()=>B)}},8189:(Nt,ke,R)=>{R.d(ke,{J:()=>B});var p=R(5577),F=R(4671);function B(le=1/0){return(0,p.z)(F.y,le)}},5577:(Nt,ke,R)=>{R.d(ke,{z:()=>te});var p=R(4004),F=R(8421),B=R(4482),le=R(9672),he=R(5403),we=R(576);function te(Se,X,ie=1/0){return(0,we.m)(X)?te((ve,ut)=>(0,p.U)((Ze,Ye)=>X(ve,Ze,ut,Ye))((0,F.Xf)(Se(ve,ut))),ie):("number"==typeof X&&(ie=X),(0,B.e)((ve,ut)=>function Ee(Se,X,ie,ve,ut,Ze,Ye,Tt){const Ke=[];let Oe=0,bt=0,ft=!1;const fe=()=>{ft&&!Ke.length&&!Oe&&X.complete()},et=mt=>Oe<ve?Xe(mt):Ke.push(mt),Xe=mt=>{Ze&&X.next(mt),Oe++;let ot=!1;(0,F.Xf)(ie(mt,bt++)).subscribe((0,he.x)(X,Te=>{ut?.(Te),Ze?et(Te):X.next(Te)},()=>{ot=!0},void 0,()=>{if(ot)try{for(Oe--;Ke.length&&Oe<ve;){const Te=Ke.shift();Ye?(0,le.f)(X,Ye,()=>Xe(Te)):Xe(Te)}fe()}catch(Te){X.error(Te)}}))};return Se.subscribe((0,he.x)(X,et,()=>{ft=!0,fe()})),()=>{Tt?.()}}(ve,ut,Se,ie)))}},5363:(Nt,ke,R)=>{R.d(ke,{Q:()=>le});var p=R(9672),F=R(4482),B=R(5403);function le(he,Ee=0){return(0,F.e)((we,te)=>{we.subscribe((0,B.x)(te,Se=>(0,p.f)(te,he,()=>te.next(Se),Ee),()=>(0,p.f)(te,he,()=>te.complete(),Ee),Se=>(0,p.f)(te,he,()=>te.error(Se),Ee)))})}},8343:(Nt,ke,R)=>{R.d(ke,{x:()=>B});var p=R(4482),F=R(5403);function B(){return(0,p.e)((le,he)=>{let Ee=null;le._refCount++;const we=(0,F.x)(he,void 0,void 0,void 0,()=>{if(!le||le._refCount<=0||0<--le._refCount)return void(Ee=null);const te=le._connection,Se=Ee;Ee=null,te&&(!Se||te===Se)&&te.unsubscribe(),he.unsubscribe()});le.subscribe(we),we.closed||(Ee=le.connect())})}},5026:(Nt,ke,R)=>{R.d(ke,{R:()=>le});var p=R(4482),F=R(5403);function B(he,Ee,we,te,Se){return(X,ie)=>{let ve=we,ut=Ee,Ze=0;X.subscribe((0,F.x)(ie,Ye=>{const Tt=Ze++;ut=ve?he(ut,Ye,Tt):(ve=!0,Ye),te&&ie.next(ut)},Se&&(()=>{ve&&ie.next(ut),ie.complete()})))}}function le(he,Ee){return(0,p.e)(B(he,Ee,arguments.length>=2,!0))}},3099:(Nt,ke,R)=>{R.d(ke,{B:()=>he});var p=R(8421),F=R(7579),B=R(930),le=R(4482);function he(we={}){const{connector:te=(()=>new F.x),resetOnError:Se=!0,resetOnComplete:X=!0,resetOnRefCountZero:ie=!0}=we;return ve=>{let ut,Ze,Ye,Tt=0,Ke=!1,Oe=!1;const bt=()=>{Ze?.unsubscribe(),Ze=void 0},ft=()=>{bt(),ut=Ye=void 0,Ke=Oe=!1},fe=()=>{const et=ut;ft(),et?.unsubscribe()};return(0,le.e)((et,Xe)=>{Tt++,!Oe&&!Ke&&bt();const mt=Ye=Ye??te();Xe.add(()=>{Tt--,0===Tt&&!Oe&&!Ke&&(Ze=Ee(fe,ie))}),mt.subscribe(Xe),!ut&&Tt>0&&(ut=new B.Hp({next:ot=>mt.next(ot),error:ot=>{Oe=!0,bt(),Ze=Ee(ft,Se,ot),mt.error(ot)},complete:()=>{Ke=!0,bt(),Ze=Ee(ft,X),mt.complete()}}),(0,p.Xf)(et).subscribe(ut))})(ve)}}function Ee(we,te,...Se){if(!0===te)return void we();if(!1===te)return;const X=new B.Hp({next:()=>{X.unsubscribe(),we()}});return te(...Se).subscribe(X)}},8675:(Nt,ke,R)=>{R.d(ke,{O:()=>le});var p=R(1350),F=R(3269),B=R(4482);function le(...he){const Ee=(0,F.yG)(he);return(0,B.e)((we,te)=>{(Ee?(0,p.z)(he,we,Ee):(0,p.z)(he,we)).subscribe(te)})}},9468:(Nt,ke,R)=>{R.d(ke,{R:()=>F});var p=R(4482);function F(B,le=0){return(0,p.e)((he,Ee)=>{Ee.add(B.schedule(()=>he.subscribe(Ee),le))})}},3900:(Nt,ke,R)=>{R.d(ke,{w:()=>le});var p=R(8421),F=R(4482),B=R(5403);function le(he,Ee){return(0,F.e)((we,te)=>{let Se=null,X=0,ie=!1;const ve=()=>ie&&!Se&&te.complete();we.subscribe((0,B.x)(te,ut=>{Se?.unsubscribe();let Ze=0;const Ye=X++;(0,p.Xf)(he(ut,Ye)).subscribe(Se=(0,B.x)(te,Tt=>te.next(Ee?Ee(ut,Tt,Ye,Ze++):Tt),()=>{Se=null,ve()}))},()=>{ie=!0,ve()}))})}},5698:(Nt,ke,R)=>{R.d(ke,{q:()=>le});var p=R(515),F=R(4482),B=R(5403);function le(he){return he<=0?()=>p.E:(0,F.e)((Ee,we)=>{let te=0;Ee.subscribe((0,B.x)(we,Se=>{++te<=he&&(we.next(Se),he<=te&&we.complete())}))})}},8505:(Nt,ke,R)=>{R.d(ke,{b:()=>he});var p=R(576),F=R(4482),B=R(5403),le=R(4671);function he(Ee,we,te){const Se=(0,p.m)(Ee)||we||te?{next:Ee,error:we,complete:te}:Ee;return Se?(0,F.e)((X,ie)=>{var ve;null===(ve=Se.subscribe)||void 0===ve||ve.call(Se);let ut=!0;X.subscribe((0,B.x)(ie,Ze=>{var Ye;null===(Ye=Se.next)||void 0===Ye||Ye.call(Se,Ze),ie.next(Ze)},()=>{var Ze;ut=!1,null===(Ze=Se.complete)||void 0===Ze||Ze.call(Se),ie.complete()},Ze=>{var Ye;ut=!1,null===(Ye=Se.error)||void 0===Ye||Ye.call(Se,Ze),ie.error(Ze)},()=>{var Ze,Ye;ut&&(null===(Ze=Se.unsubscribe)||void 0===Ze||Ze.call(Se)),null===(Ye=Se.finalize)||void 0===Ye||Ye.call(Se)}))}):le.y}},8068:(Nt,ke,R)=>{R.d(ke,{T:()=>le});var p=R(6805),F=R(4482),B=R(5403);function le(Ee=he){return(0,F.e)((we,te)=>{let Se=!1;we.subscribe((0,B.x)(te,X=>{Se=!0,te.next(X)},()=>Se?te.complete():te.error(Ee())))})}function he(){return new p.K}},4408:(Nt,ke,R)=>{R.d(ke,{o:()=>he});var p=R(727);class F extends p.w0{constructor(we,te){super()}schedule(we,te=0){return this}}const B={setInterval(Ee,we,...te){const{delegate:Se}=B;return Se?.setInterval?Se.setInterval(Ee,we,...te):setInterval(Ee,we,...te)},clearInterval(Ee){const{delegate:we}=B;return(we?.clearInterval||clearInterval)(Ee)},delegate:void 0};var le=R(8737);class he extends F{constructor(we,te){super(we,te),this.scheduler=we,this.work=te,this.pending=!1}schedule(we,te=0){var Se;if(this.closed)return this;this.state=we;const X=this.id,ie=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(ie,X,te)),this.pending=!0,this.delay=te,this.id=null!==(Se=this.id)&&void 0!==Se?Se:this.requestAsyncId(ie,this.id,te),this}requestAsyncId(we,te,Se=0){return B.setInterval(we.flush.bind(we,this),Se)}recycleAsyncId(we,te,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return te;null!=te&&B.clearInterval(te)}execute(we,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(we,te);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,te){let X,Se=!1;try{this.work(we)}catch(ie){Se=!0,X=ie||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:we,scheduler:te}=this,{actions:Se}=te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Se,this),null!=we&&(this.id=this.recycleAsyncId(te,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(Nt,ke,R)=>{R.d(ke,{v:()=>B});var p=R(6063);class F{constructor(he,Ee=F.now){this.schedulerActionCtor=he,this.now=Ee}schedule(he,Ee=0,we){return new this.schedulerActionCtor(this,he).schedule(we,Ee)}}F.now=p.l.now;class B extends F{constructor(he,Ee=F.now){super(he,Ee),this.actions=[],this._active=!1}flush(he){const{actions:Ee}=this;if(this._active)return void Ee.push(he);let we;this._active=!0;do{if(we=he.execute(he.state,he.delay))break}while(he=Ee.shift());if(this._active=!1,we){for(;he=Ee.shift();)he.unsubscribe();throw we}}}},4986:(Nt,ke,R)=>{R.d(ke,{P:()=>le,z:()=>B});var p=R(4408);const B=new(R(7565).v)(p.o),le=B},6063:(Nt,ke,R)=>{R.d(ke,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Nt,ke,R)=>{R.d(ke,{z:()=>p});const p={setTimeout(F,B,...le){const{delegate:he}=p;return he?.setTimeout?he.setTimeout(F,B,...le):setTimeout(F,B,...le)},clearTimeout(F){const{delegate:B}=p;return(B?.clearTimeout||clearTimeout)(F)},delegate:void 0}},2202:(Nt,ke,R)=>{R.d(ke,{h:()=>F});const F=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Nt,ke,R)=>{R.d(ke,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Nt,ke,R)=>{R.d(ke,{K:()=>F});const F=(0,R(3888).d)(B=>function(){B(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Nt,ke,R)=>{R.d(ke,{_6:()=>Ee,jO:()=>le,yG:()=>he});var p=R(576),F=R(3532);function B(we){return we[we.length-1]}function le(we){return(0,p.m)(B(we))?we.pop():void 0}function he(we){return(0,F.K)(B(we))?we.pop():void 0}function Ee(we,te){return"number"==typeof B(we)?we.pop():te}},4742:(Nt,ke,R)=>{R.d(ke,{D:()=>he});const{isArray:p}=Array,{getPrototypeOf:F,prototype:B,keys:le}=Object;function he(we){if(1===we.length){const te=we[0];if(p(te))return{args:te,keys:null};if(function Ee(we){return we&&"object"==typeof we&&F(we)===B}(te)){const Se=le(te);return{args:Se.map(X=>te[X]),keys:Se}}}return{args:we,keys:null}}},8737:(Nt,ke,R)=>{function p(F,B){if(F){const le=F.indexOf(B);0<=le&&F.splice(le,1)}}R.d(ke,{P:()=>p})},3888:(Nt,ke,R)=>{function p(F){const le=F(he=>{Error.call(he),he.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}R.d(ke,{d:()=>p})},1810:(Nt,ke,R)=>{function p(F,B){return F.reduce((le,he,Ee)=>(le[he]=B[Ee],le),{})}R.d(ke,{n:()=>p})},2806:(Nt,ke,R)=>{R.d(ke,{O:()=>le,x:()=>B});var p=R(2416);let F=null;function B(he){if(p.v.useDeprecatedSynchronousErrorHandling){const Ee=!F;if(Ee&&(F={errorThrown:!1,error:null}),he(),Ee){const{errorThrown:we,error:te}=F;if(F=null,we)throw te}}else he()}function le(he){p.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=he)}},9672:(Nt,ke,R)=>{function p(F,B,le,he=0,Ee=!1){const we=B.schedule(function(){le(),Ee?F.add(this.schedule(null,he)):this.unsubscribe()},he);if(F.add(we),!Ee)return we}R.d(ke,{f:()=>p})},4671:(Nt,ke,R)=>{function p(F){return F}R.d(ke,{y:()=>p})},1144:(Nt,ke,R)=>{R.d(ke,{z:()=>p});const p=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(Nt,ke,R)=>{R.d(ke,{D:()=>F});var p=R(576);function F(B){return Symbol.asyncIterator&&(0,p.m)(B?.[Symbol.asyncIterator])}},576:(Nt,ke,R)=>{function p(F){return"function"==typeof F}R.d(ke,{m:()=>p})},3670:(Nt,ke,R)=>{R.d(ke,{c:()=>B});var p=R(8822),F=R(576);function B(le){return(0,F.m)(le[p.L])}},6495:(Nt,ke,R)=>{R.d(ke,{T:()=>B});var p=R(2202),F=R(576);function B(le){return(0,F.m)(le?.[p.h])}},8239:(Nt,ke,R)=>{R.d(ke,{t:()=>F});var p=R(576);function F(B){return(0,p.m)(B?.then)}},3260:(Nt,ke,R)=>{R.d(ke,{L:()=>le,Q:()=>B});var p=R(7582),F=R(576);function B(he){return(0,p.FC)(this,arguments,function*(){const we=he.getReader();try{for(;;){const{value:te,done:Se}=yield(0,p.qq)(we.read());if(Se)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(te)}}finally{we.releaseLock()}})}function le(he){return(0,F.m)(he?.getReader)}},3532:(Nt,ke,R)=>{R.d(ke,{K:()=>F});var p=R(576);function F(B){return B&&(0,p.m)(B.schedule)}},4482:(Nt,ke,R)=>{R.d(ke,{A:()=>F,e:()=>B});var p=R(576);function F(le){return(0,p.m)(le?.lift)}function B(le){return he=>{if(F(he))return he.lift(function(Ee){try{return le(Ee,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Nt,ke,R)=>{R.d(ke,{Z:()=>le});var p=R(4004);const{isArray:F}=Array;function le(he){return(0,p.U)(Ee=>function B(he,Ee){return F(Ee)?he(...Ee):he(Ee)}(he,Ee))}},5032:(Nt,ke,R)=>{function p(){}R.d(ke,{Z:()=>p})},9635:(Nt,ke,R)=>{R.d(ke,{U:()=>B,z:()=>F});var p=R(4671);function F(...le){return B(le)}function B(le){return 0===le.length?p.y:1===le.length?le[0]:function(Ee){return le.reduce((we,te)=>te(we),Ee)}}},7849:(Nt,ke,R)=>{R.d(ke,{h:()=>B});var p=R(2416),F=R(3410);function B(le){F.z.setTimeout(()=>{const{onUnhandledError:he}=p.v;if(!he)throw le;he(le)})}},4532:(Nt,ke,R)=>{function p(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(ke,{z:()=>p})},6895:(Nt,ke,R)=>{R.d(ke,{Do:()=>ft,EM:()=>Ys,H9:()=>as,HT:()=>he,JF:()=>bo,K0:()=>we,Mx:()=>Ns,NF:()=>vs,O5:()=>Br,Ov:()=>Ie,PM:()=>_s,S$:()=>Ke,V_:()=>X,Ye:()=>fe,b0:()=>bt,bD:()=>qi,ez:()=>Ls,mk:()=>Kn,q:()=>B,sg:()=>Ki,w_:()=>Ee});var p=R(4650);let F=null;function B(){return F}function he(b){F||(F=b)}class Ee{}const we=new p.OlP("DocumentToken");let te=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=p.Yz7({token:b,factory:function(){return function Se(){return(0,p.LFG)(ie)}()},providedIn:"platform"}),b})();const X=new p.OlP("Location Initialized");let ie=(()=>{class b extends te{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(x){const W=B().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",x,!1),()=>W.removeEventListener("popstate",x)}onHashChange(x){const W=B().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",x,!1),()=>W.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,W,_e){ve()?this._history.pushState(x,W,_e):this.location.hash=_e}replaceState(x,W,_e){ve()?this._history.replaceState(x,W,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(we))},b.\u0275prov=p.Yz7({token:b,factory:function(){return function ut(){return new ie((0,p.LFG)(we))}()},providedIn:"platform"}),b})();function ve(){return!!window.history.pushState}function Ze(b,V){if(0==b.length)return V;if(0==V.length)return b;let x=0;return b.endsWith("/")&&x++,V.startsWith("/")&&x++,2==x?b+V.substring(1):1==x?b+V:b+"/"+V}function Ye(b){const V=b.match(/#|\?|$/),x=V&&V.index||b.length;return b.slice(0,x-("/"===b[x-1]?1:0))+b.slice(x)}function Tt(b){return b&&"?"!==b[0]?"?"+b:b}let Ke=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=p.Yz7({token:b,factory:function(){return(0,p.f3M)(bt)},providedIn:"root"}),b})();const Oe=new p.OlP("appBaseHref");let bt=(()=>{class b extends Ke{constructor(x,W){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=W??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return Ze(this._baseHref,x)}path(x=!1){const W=this._platformLocation.pathname+Tt(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&x?`${W}${_e}`:W}pushState(x,W,_e,Je){const dt=this.prepareExternalUrl(_e+Tt(Je));this._platformLocation.pushState(x,W,dt)}replaceState(x,W,_e,Je){const dt=this.prepareExternalUrl(_e+Tt(Je));this._platformLocation.replaceState(x,W,dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(te),p.LFG(Oe,8))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),ft=(()=>{class b extends Ke{constructor(x,W){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(x){const W=Ze(this._baseHref,x);return W.length>0?"#"+W:W}pushState(x,W,_e,Je){let dt=this.prepareExternalUrl(_e+Tt(Je));0==dt.length&&(dt=this._platformLocation.pathname),this._platformLocation.pushState(x,W,dt)}replaceState(x,W,_e,Je){let dt=this.prepareExternalUrl(_e+Tt(Je));0==dt.length&&(dt=this._platformLocation.pathname),this._platformLocation.replaceState(x,W,dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(te),p.LFG(Oe,8))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac}),b})(),fe=(()=>{class b{constructor(x){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const W=this._locationStrategy.getBaseHref();this._baseHref=Ye(mt(W)),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,W=""){return this.path()==this.normalize(x+Tt(W))}normalize(x){return b.stripTrailingSlash(function Xe(b,V){return b&&V.startsWith(b)?V.substring(b.length):V}(this._baseHref,mt(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,W="",_e=null){this._locationStrategy.pushState(_e,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Tt(W)),_e)}replaceState(x,W="",_e=null){this._locationStrategy.replaceState(_e,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Tt(W)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)})),()=>{const W=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",W){this._urlChangeListeners.forEach(_e=>_e(x,W))}subscribe(x,W,_e){return this._subject.subscribe({next:x,error:W,complete:_e})}}return b.normalizeQueryParams=Tt,b.joinWithSlash=Ze,b.stripTrailingSlash=Ye,b.\u0275fac=function(x){return new(x||b)(p.LFG(Ke))},b.\u0275prov=p.Yz7({token:b,factory:function(){return function et(){return new fe((0,p.LFG)(Ke))}()},providedIn:"root"}),b})();function mt(b){return b.replace(/\/index.html$/,"")}const ot={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Percent=1]="Percent",Te[Te.Currency=2]="Currency",Te[Te.Scientific=3]="Scientific",Te))(),Rt=(()=>((Rt=Rt||{})[Rt.Decimal=0]="Decimal",Rt[Rt.Group=1]="Group",Rt[Rt.List=2]="List",Rt[Rt.PercentSign=3]="PercentSign",Rt[Rt.PlusSign=4]="PlusSign",Rt[Rt.MinusSign=5]="MinusSign",Rt[Rt.Exponential=6]="Exponential",Rt[Rt.SuperscriptingExponent=7]="SuperscriptingExponent",Rt[Rt.PerMille=8]="PerMille",Rt[Rt.Infinity=9]="Infinity",Rt[Rt.NaN=10]="NaN",Rt[Rt.TimeSeparator=11]="TimeSeparator",Rt[Rt.CurrencyDecimal=12]="CurrencyDecimal",Rt[Rt.CurrencyGroup=13]="CurrencyGroup",Rt))();function qt(b,V){const x=(0,p.cg1)(b),W=x[p.wAp.NumberSymbols][V];if(typeof W>"u"){if(V===Rt.CurrencyDecimal)return x[p.wAp.NumberSymbols][Rt.Decimal];if(V===Rt.CurrencyGroup)return x[p.wAp.NumberSymbols][Rt.Group]}return W}const Ot=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Re(b,V,x,W,_e){const dt=function vn(b,V="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},W=b.split(";"),_e=W[0],Je=W[1],dt=-1!==_e.indexOf(".")?_e.split("."):[_e.substring(0,_e.lastIndexOf("0")+1),_e.substring(_e.lastIndexOf("0")+1)],dn=dt[0],fr=dt[1]||"";x.posPre=dn.substring(0,dn.indexOf("#"));for(let Er=0;Er<fr.length;Er++){const _n=fr.charAt(Er);"0"===_n?x.minFrac=x.maxFrac=Er+1:"#"===_n?x.maxFrac=Er+1:x.posSuf+=_n}const Qn=dn.split(",");if(x.gSize=Qn[1]?Qn[1].length:0,x.lgSize=Qn[2]||Qn[1]?(Qn[2]||Qn[1]).length:0,Je){const Er=_e.length-x.posPre.length-x.posSuf.length,_n=Je.indexOf("#");x.negPre=Je.substring(0,_n).replace(/'/g,""),x.negSuf=Je.slice(_n+Er).replace(/'/g,"")}else x.negPre=V+x.posPre,x.negSuf=x.posSuf;return x}(function tn(b,V){return(0,p.cg1)(b)[p.wAp.NumberFormats][V]}(V,Te.Currency),qt(V,Rt.MinusSign));return dt.minFrac=function zr(b){let V;const x=ot[b];return x&&(V=x[2]),"number"==typeof V?V:2}(W),dt.maxFrac=dt.minFrac,function Pe(b,V,x,W,_e,Je,dt=!1){let dn="",fr=!1;if(isFinite(b)){let Qn=function Gn(b){let W,_e,Je,dt,dn,V=Math.abs(b)+"",x=0;for((_e=V.indexOf("."))>-1&&(V=V.replace(".","")),(Je=V.search(/e/i))>0?(_e<0&&(_e=Je),_e+=+V.slice(Je+1),V=V.substring(0,Je)):_e<0&&(_e=V.length),Je=0;"0"===V.charAt(Je);Je++);if(Je===(dn=V.length))W=[0],_e=1;else{for(dn--;"0"===V.charAt(dn);)dn--;for(_e-=Je,W=[],dt=0;Je<=dn;Je++,dt++)W[dt]=Number(V.charAt(Je))}return _e>22&&(W=W.splice(0,21),x=_e-1,_e=1),{digits:W,exponent:x,integerLen:_e}}(b);dt&&(Qn=function On(b){if(0===b.digits[0])return b;const V=b.digits.length-b.integerLen;return b.exponent?b.exponent+=2:(0===V?b.digits.push(0,0):1===V&&b.digits.push(0),b.integerLen+=2),b}(Qn));let Er=V.minInt,_n=V.minFrac,Tr=V.maxFrac;if(Je){const Lr=Je.match(Ot);if(null===Lr)throw new Error(`${Je} is not a valid digit info`);const go=Lr[1],Zt=Lr[3],an=Lr[5];null!=go&&(Er=kn(go)),null!=Zt&&(_n=kn(Zt)),null!=an?Tr=kn(an):null!=Zt&&_n>Tr&&(Tr=_n)}!function Cr(b,V,x){if(V>x)throw new Error(`The minimum number of digits after fraction (${V}) is higher than the maximum (${x}).`);let W=b.digits,_e=W.length-b.integerLen;const Je=Math.min(Math.max(V,_e),x);let dt=Je+b.integerLen,dn=W[dt];if(dt>0){W.splice(Math.max(b.integerLen,dt));for(let _n=dt;_n<W.length;_n++)W[_n]=0}else{_e=Math.max(0,_e),b.integerLen=1,W.length=Math.max(1,dt=Je+1),W[0]=0;for(let _n=1;_n<dt;_n++)W[_n]=0}if(dn>=5)if(dt-1<0){for(let _n=0;_n>dt;_n--)W.unshift(0),b.integerLen++;W.unshift(1),b.integerLen++}else W[dt-1]++;for(;_e<Math.max(0,Je);_e++)W.push(0);let fr=0!==Je;const Qn=V+b.integerLen,Er=W.reduceRight(function(_n,Tr,Vn,Yr){return Yr[Vn]=(Tr+=_n)<10?Tr:Tr-10,fr&&(0===Yr[Vn]&&Vn>=Qn?Yr.pop():fr=!1),Tr>=10?1:0},0);Er&&(W.unshift(Er),b.integerLen++)}(Qn,_n,Tr);let Vn=Qn.digits,Yr=Qn.integerLen;const fs=Qn.exponent;let wt=[];for(fr=Vn.every(Lr=>!Lr);Yr<Er;Yr++)Vn.unshift(0);for(;Yr<0;Yr++)Vn.unshift(0);Yr>0?wt=Vn.splice(Yr,Vn.length):(wt=Vn,Vn=[0]);const wr=[];for(Vn.length>=V.lgSize&&wr.unshift(Vn.splice(-V.lgSize,Vn.length).join(""));Vn.length>V.gSize;)wr.unshift(Vn.splice(-V.gSize,Vn.length).join(""));Vn.length&&wr.unshift(Vn.join("")),dn=wr.join(qt(x,W)),wt.length&&(dn+=qt(x,_e)+wt.join("")),fs&&(dn+=qt(x,Rt.Exponential)+"+"+fs)}else dn=qt(x,Rt.Infinity);return dn=b<0&&!fr?V.negPre+dn+V.negSuf:V.posPre+dn+V.posSuf,dn}(b,dt,V,Rt.CurrencyGroup,Rt.CurrencyDecimal,_e).replace("\xa4",x).replace("\xa4","").trim()}function kn(b){const V=parseInt(b);if(isNaN(V))throw new Error("Invalid integer literal when parsing "+b);return V}function Ns(b,V){V=encodeURIComponent(V);for(const x of b.split(";")){const W=x.indexOf("="),[_e,Je]=-1==W?[x,""]:[x.slice(0,W),x.slice(W+1)];if(_e.trim()===V)return decodeURIComponent(Je)}return null}let Kn=(()=>{class b{constructor(x,W,_e,Je){this._iterableDiffers=x,this._keyValueDiffers=W,this._ngEl=_e,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),x.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!0)):Object.keys(x).forEach(W=>this._toggleClass(W,!!x[W])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!1)):Object.keys(x).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(x,W){(x=x.trim())&&x.split(/\s+/g).forEach(_e=>{W?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),b})();class br{constructor(V,x,W,_e){this.$implicit=V,this.ngForOf=x,this.index=W,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ki=(()=>{class b{constructor(x,W,_e){this._viewContainer=x,this._template=W,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const W=this._viewContainer;x.forEachOperation((_e,Je,dt)=>{if(null==_e.previousIndex)W.createEmbeddedView(this._template,new br(_e.item,this._ngForOf,-1,-1),null===dt?void 0:dt);else if(null==dt)W.remove(null===Je?void 0:Je);else if(null!==Je){const dn=W.get(Je);W.move(dn,dt),Kr(dn,_e)}});for(let _e=0,Je=W.length;_e<Je;_e++){const dn=W.get(_e).context;dn.index=_e,dn.count=Je,dn.ngForOf=this._ngForOf}x.forEachIdentityChange(_e=>{Kr(W.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(x,W){return!0}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),b})();function Kr(b,V){b.context.$implicit=V.item}let Br=(()=>{class b{constructor(x,W){this._viewContainer=x,this._context=new ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){qr("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){qr("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,W){return!0}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.s_b),p.Y36(p.Rgc))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),b})();class ss{constructor(){this.$implicit=null,this.ngIf=null}}function qr(b,V){if(V&&!V.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,p.AaK)(V)}'.`)}function cr(b,V){return new p.vHH(2100,!1)}class Io{createSubscription(V,x){return V.subscribe({next:x,error:W=>{throw W}})}dispose(V){V.unsubscribe()}}class Do{createSubscription(V,x){return V.then(x,W=>{throw W})}dispose(V){}}const co=new Do,Ae=new Io;let Ie=(()=>{class b{constructor(x){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=x}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,W=>this._updateLatestValue(x,W))}_selectStrategy(x){if((0,p.QGY)(x))return co;if((0,p.F4k)(x))return Ae;throw cr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,W){x===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.sBO,16))},b.\u0275pipe=p.Yjl({name:"async",type:b,pure:!1,standalone:!0}),b})(),as=(()=>{class b{constructor(x,W="USD"){this._locale=x,this._defaultCurrencyCode=W}transform(x,W=this._defaultCurrencyCode,_e="symbol",Je,dt){if(!function Lo(b){return!(null==b||""===b||b!=b)}(x))return null;dt=dt||this._locale,"boolean"==typeof _e&&(_e=_e?"symbol":"code");let dn=W||this._defaultCurrencyCode;"code"!==_e&&(dn="symbol"===_e||"symbol-narrow"===_e?function Fn(b,V,x="en"){const W=function Wt(b){return(0,p.cg1)(b)[p.wAp.Currencies]}(x)[b]||ot[b]||[],_e=W[1];return"narrow"===V&&"string"==typeof _e?_e:W[0]||b}(dn,"symbol"===_e?"wide":"narrow",dt):_e);try{return Re(function us(b){if("string"==typeof b&&!isNaN(Number(b)-parseFloat(b)))return Number(b);if("number"!=typeof b)throw new Error(`${b} is not a number`);return b}(x),dt,dn,W,Je)}catch(fr){throw cr()}}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.soG,16),p.Y36(p.EJc,16))},b.\u0275pipe=p.Yjl({name:"currency",type:b,pure:!0,standalone:!0}),b})();let Ls=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=p.oAB({type:b}),b.\u0275inj=p.cJS({}),b})();const qi="browser";function vs(b){return b===qi}function _s(b){return"server"===b}let Ys=(()=>{class b{}return b.\u0275prov=(0,p.Yz7)({token:b,providedIn:"root",factory:()=>new cs((0,p.LFG)(we),window)}),b})();class cs{constructor(V,x){this.document=V,this.window=x,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const x=function hi(b,V){const x=b.getElementById(V)||b.getElementsByName(V)[0];if(x)return x;if("function"==typeof b.createTreeWalker&&b.body&&(b.body.createShadowRoot||b.body.attachShadow)){const W=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let _e=W.currentNode;for(;_e;){const Je=_e.shadowRoot;if(Je){const dt=Je.getElementById(V)||Je.querySelector(`[name="${V}"]`);if(dt)return dt}_e=W.nextNode()}}return null}(this.document,V);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=V)}}scrollToElement(V){const x=V.getBoundingClientRect(),W=x.left+this.window.pageXOffset,_e=x.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(W-Je[0],_e-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=ji(this.window.history)||ji(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ji(b){return Object.getOwnPropertyDescriptor(b,"scrollRestoration")}class bo{}},4650:(Nt,ke,R)=>{R.d(ke,{$8M:()=>pn,$Z:()=>Uh,AFp:()=>xE,ALo:()=>Y0,AaK:()=>te,AsE:()=>rg,CHM:()=>jo,CRH:()=>aE,CZH:()=>Dy,CqO:()=>mf,D6c:()=>OD,DdM:()=>H0,EJc:()=>qI,EpF:()=>Im,F4k:()=>Dm,FYo:()=>Cd,FiY:()=>Ir,G48:()=>gD,Gf:()=>sE,GfV:()=>Mg,Gpc:()=>ie,JOm:()=>ns,KtG:()=>Yi,LFG:()=>Vi,LSH:()=>Kc,Lbi:()=>zI,Lck:()=>jw,MMx:()=>a_,NdJ:()=>Yp,O4$:()=>_r,OlP:()=>Ar,Oqu:()=>Jl,PXZ:()=>cD,Q6J:()=>pf,QGY:()=>Zd,QP$:()=>st,Qsj:()=>Qy,R0b:()=>Au,RDi:()=>mg,Rgc:()=>dg,SBq:()=>el,Sil:()=>YI,Suo:()=>oE,TTD:()=>ea,TgZ:()=>qd,Tol:()=>tg,VKq:()=>G0,X6Q:()=>pD,XFs:()=>Ct,Xpm:()=>vt,Xts:()=>$f,Y36:()=>wc,YKP:()=>N0,YNc:()=>Wp,Yjl:()=>Y,Yz7:()=>$t,Z0I:()=>hn,ZZ4:()=>P_,_Bn:()=>O0,_UZ:()=>Rs,_Vd:()=>Jc,_c5:()=>RD,_uU:()=>Hm,aQg:()=>O_,c2e:()=>WI,cJS:()=>qt,cg1:()=>ly,dDg:()=>sD,dqk:()=>xn,eFA:()=>HE,ekj:()=>_f,eoX:()=>BE,f3M:()=>Fc,g9A:()=>PE,h0i:()=>Sf,hGG:()=>PD,hij:()=>Df,iGM:()=>iE,ifc:()=>on,ip1:()=>ME,jDz:()=>F0,kL8:()=>dy,kcU:()=>Mo,lG2:()=>ce,lcZ:()=>Q0,lqb:()=>Zc,lri:()=>VE,n5z:()=>Sn,oAB:()=>Fe,oxw:()=>Qp,q4F:()=>Yf,qLn:()=>Vl,qOj:()=>Gd,qZA:()=>Ai,rWj:()=>UE,sBO:()=>mD,sIi:()=>zd,s_b:()=>Ey,soG:()=>Cy,tb:()=>OE,tp0:()=>vi,uIk:()=>Kl,vHH:()=>Ye,vpe:()=>Pc,wAp:()=>jn,xi3:()=>J0,xp6:()=>xs,z2F:()=>by,zSh:()=>bh,zs3:()=>Qa});var p=R(7579),F=R(727),B=R(9751),le=R(6451),he=R(3099);function Ee(n){for(let r in n)if(n[r]===Ee)return r;throw Error("Could not find renamed property on target object.")}function we(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function te(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(te).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Se(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const X=Ee({__forward_ref__:Ee});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return te(this())},n}function ve(n){return ut(n)?n():n}function ut(n){return"function"==typeof n&&n.hasOwnProperty(X)&&n.__forward_ref__===ie}class Ye extends Error{constructor(r,o){super(function Tt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function Ke(n){return"string"==typeof n?n:null==n?"":String(n)}function et(n,r){throw new Ye(-201,!1)}function Be(n,r){null==n&&function qe(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function $t(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function tn(n){return Nn(n,Mn)||Nn(n,Mr)}function hn(n){return null!==tn(n)}function Nn(n,r){return n.hasOwnProperty(r)?n[r]:null}function cn(n){return n&&(n.hasOwnProperty(Wn)||n.hasOwnProperty(Pr))?n[Wn]:null}const Mn=Ee({\u0275prov:Ee}),Wn=Ee({\u0275inj:Ee}),Mr=Ee({ngInjectableDef:Ee}),Pr=Ee({ngInjectorDef:Ee});var Ct=(()=>((Ct=Ct||{})[Ct.Default=0]="Default",Ct[Ct.Host=1]="Host",Ct[Ct.Self=2]="Self",Ct[Ct.SkipSelf=4]="SkipSelf",Ct[Ct.Optional=8]="Optional",Ct))();let Tn;function sr(n){const r=Tn;return Tn=n,r}function zr(n,r,o){const u=tn(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Ct.Optional?null:void 0!==r?r:void et(te(n))}function Hn(n){return{toString:n}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),on=(()=>{return(n=on||(on={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",on;var n})();const xn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ur={},nn=[],or=Ee({\u0275cmp:Ee}),fn=Ee({\u0275dir:Ee}),vr=Ee({\u0275pipe:Ee}),Ft=Ee({\u0275mod:Ee}),mn=Ee({\u0275fac:Ee}),yn=Ee({__NG_ELEMENT_ID__:Ee});let Ne=0;function vt(n){return Hn(()=>{const o=!0===n.standalone,u={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||nn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,id:"c"+Ne++,styles:n.styles||nn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,m=n.features;return c.inputs=ae(n.inputs,u),c.outputs=ae(n.outputs),m&&m.forEach(C=>C(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(H).filter(ne):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(De).filter(ne):null,c})}function H(n){return K(n)||G(n)}function ne(n){return null!==n}function Fe(n){return Hn(()=>({type:n.type,bootstrap:n.bootstrap||nn,declarations:n.declarations||nn,imports:n.imports||nn,exports:n.exports||nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ae(n,r){if(null==n)return ur;const o={};for(const u in n)if(n.hasOwnProperty(u)){let c=n[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,r&&(r[c]=h)}return o}const ce=vt;function Y(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function K(n){return n[or]||null}function G(n){return n[fn]||null}function De(n){return n[vr]||null}function st(n){const r=K(n)||G(n)||De(n);return null!==r&&r.standalone}function Ot(n,r){const o=n[Ft]||null;if(!o&&!0===r)throw new Error(`Type ${te(n)} does not have '\u0275mod' property.`);return o}function qr(n){return Array.isArray(n)&&"object"==typeof n[1]}function jr(n){return Array.isArray(n)&&!0===n[1]}function Ks(n){return 0!=(8&n.flags)}function Xr(n){return 2==(2&n.flags)}function os(n){return 1==(1&n.flags)}function Nr(n){return null!==n.template}function Bi(n){return 0!=(256&n[2])}function li(n,r){return n.hasOwnProperty(mn)?n[mn]:null}class di{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ea(){return as}function as(n){return n.type.prototype.ngOnChanges&&(n.setInput=us),Lo}function Lo(){const n=Co(this),r=n?.current;if(r){const o=n.previous;if(o===ur)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function us(n,r,o,u){const c=Co(n)||function Ls(n,r){return n[Vo]=r}(n,{previous:ur,current:null}),h=c.current||(c.current={}),m=c.previous,C=this.declaredInputs[o],S=m[C];h[C]=new di(S&&S.currentValue,r,m===ur),n[u]=r}ea.ngInherit=!0;const Vo="__ngSimpleChanges__";function Co(n){return n[Vo]||null}function mr(n){for(;Array.isArray(n);)n=n[0];return n}function ji(n,r){return mr(r[n])}function hi(n,r){return mr(r[n.index])}function bo(n,r){return n.data[r]}function ki(n,r){return n[r]}function ti(n,r){const o=r[n];return qr(o)?o:o[0]}function Uo(n){return 64==(64&n[2])}function gi(n,r){return null==r?null:n[r]}function Gr(n){n[18]=0}function Es(n,r){n[5]+=r;let o=n,u=n[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const An={lFrame:fo(null),bindingsEnabled:!0};function To(){return An.bindingsEnabled}function gt(){return An.lFrame.lView}function qn(){return An.lFrame.tView}function jo(n){return An.lFrame.contextLView=n,n[8]}function Yi(n){return An.lFrame.contextLView=null,n}function Rr(){let n=k();for(;null!==n&&64===n.type;)n=n.parent;return n}function k(){return An.lFrame.currentTNode}function M(n,r){const o=An.lFrame;o.currentTNode=n,o.isParent=r}function q(){return An.lFrame.isParent}function mi(){const n=An.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Bs(){return An.lFrame.bindingIndex++}function ni(n){const r=An.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function va(n,r){const o=An.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ho(r)}function Ho(n){An.lFrame.currentDirectiveIndex=n}function Ao(){return An.lFrame.currentQueryIndex}function Fi(n){An.lFrame.currentQueryIndex=n}function js(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function _a(n,r,o){if(o&Ct.SkipSelf){let c=r,h=n;for(;!(c=c.parent,null!==c||o&Ct.Host||(c=js(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;r=c,n=h}const u=An.lFrame=zo();return u.currentTNode=r,u.lView=n,!0}function eo(n){const r=zo(),o=n[1];An.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function zo(){const n=An.lFrame,r=null===n?null:n.child;return null===r?fo(n):r}function fo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function So(){const n=An.lFrame;return An.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xi=So;function ds(){const n=So();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hr(){return An.lFrame.selectedIndex}function Ii(n){An.lFrame.selectedIndex=n}function yr(){const n=An.lFrame;return bo(n.tView,n.selectedIndex)}function _r(){An.lFrame.currentNamespace="svg"}function Mo(){!function Ri(){An.lFrame.currentNamespace=null}()}function Cs(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const h=n.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:L,ngOnDestroy:Z}=h;m&&(n.contentHooks||(n.contentHooks=[])).push(-o,m),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),S&&(n.viewHooks||(n.viewHooks=[])).push(-o,S),L&&((n.viewHooks||(n.viewHooks=[])).push(o,L),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,L)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Z)}}function to(n,r,o){$i(n,r,3,o)}function ia(n,r,o,u){(3&n[2])===o&&$i(n,r,o,u)}function hs(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function $i(n,r,o,u){const h=u??-1,m=r.length-1;let C=0;for(let S=void 0!==u?65535&n[18]:0;S<m;S++)if("number"==typeof r[S+1]){if(C=r[S],null!=u&&C>=u)break}else r[S]<0&&(n[18]+=65536),(C<h||-1==h)&&(Di(n,o,r,S),n[18]=(4294901760&n[18])+S+2),S++}function Di(n,r,o,u){const c=o[u]<0,h=o[u+1],C=n[c?-o[u]:o[u]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class no{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function W(n,r,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const h=o[u++],m=o[u++],C=o[u++];n.setAttribute(r,m,C,h)}else{const h=c,m=o[++u];Je(h)?n.setProperty(r,h,m):n.setAttribute(r,h,m),u++}}return u}function _e(n){return 3===n||4===n||6===n}function Je(n){return 64===n.charCodeAt(0)}function dt(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const c=r[u];"number"==typeof c?o=c:0===o||dn(n,o,c,null,-1===o||2===o?r[++u]:null)}}return n}function dn(n,r,o,u,c){let h=0,m=n.length;if(-1===r)m=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){m=-1;break}if(C>r){m=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==c&&(n[h+1]=c));if(u===n[h+1])return void(n[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==m&&(n.splice(m,0,r),h=m+1),n.splice(h++,0,o),null!==u&&n.splice(h++,0,u),null!==c&&n.splice(h++,0,c)}function fr(n){return-1!==n}function Qn(n){return 32767&n}function _n(n,r){let o=function Er(n){return n>>16}(n),u=r;for(;o>0;)u=u[15],o--;return u}let Tr=!0;function Vn(n){const r=Tr;return Tr=n,r}let wr=0;const Lr={};function Zt(n,r){const o=sa(n,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,an(u.data,n),an(r,null),an(u.blueprint,null));const c=Bt(n,r),h=n.injectorIndex;if(fr(c)){const m=Qn(c),C=_n(c,r),S=C[1].data;for(let L=0;L<8;L++)r[h+L]=C[m+L]|S[m+L]}return r[h+8]=c,h}function an(n,r){n.push(0,0,0,0,0,0,0,0,r)}function sa(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Bt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,c=r;for(;null!==c;){if(u=$r(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function We(n,r,o){!function go(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(yn)&&(u=o[yn]),null==u&&(u=o[yn]=wr++);const c=255&u;r.data[n+(c>>5)]|=1<<c}(n,r,o)}function ri(n,r,o){if(o&Ct.Optional||void 0!==n)return n;et()}function Su(n,r,o,u){if(o&Ct.Optional&&void 0===u&&(u=null),0==(o&(Ct.Self|Ct.Host))){const c=n[9],h=sr(void 0);try{return c?c.get(r,u,o&Ct.Optional):zr(r,u,o&Ct.Optional)}finally{sr(h)}}return ri(u,0,o)}function Mu(n,r,o,u=Ct.Default,c){if(null!==n){if(1024&r[2]){const m=function ja(n,r,o,u,c){let h=n,m=r;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const C=wa(h,m,o,u|Ct.Self,Lr);if(C!==Lr)return C;let S=h.parent;if(!S){const L=m[21];if(L){const Z=L.get(o,Lr,u);if(Z!==Lr)return Z}S=$r(m),m=m[15]}h=S}return c}(n,r,o,u,Lr);if(m!==Lr)return m}const h=wa(n,r,o,u,Lr);if(h!==Lr)return h}return Su(r,o,u,c)}function wa(n,r,o,u,c){const h=function Oc(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(yn)?n[yn]:void 0;return"number"==typeof r?r>=0?255&r:yi:r}(o);if("function"==typeof h){if(!_a(r,n,u))return u&Ct.Host?ri(c,0,u):Su(r,o,u,c);try{const m=h(u);if(null!=m||u&Ct.Optional)return m;et()}finally{xi()}}else if("number"==typeof h){let m=null,C=sa(n,r),S=-1,L=u&Ct.Host?r[16][6]:null;for((-1===C||u&Ct.SkipSelf)&&(S=-1===C?Bt(n,r):r[C+8],-1!==S&&Ko(u,!1)?(m=r[1],C=Qn(S),r=_n(S,r)):C=-1);-1!==C;){const Z=r[1];if(Nc(h,C,Z.data)){const oe=tc(C,r,o,m,u,L);if(oe!==Lr)return oe}S=r[C+8],-1!==S&&Ko(u,r[1].data[C+8]===L)&&Nc(h,C,r)?(m=Z,C=Qn(S),r=_n(S,r)):C=-1}}return c}function tc(n,r,o,u,c,h){const m=r[1],C=m.data[n+8],Z=Ba(C,m,o,null==u?Xr(C)&&Tr:u!=m&&0!=(3&C.type),c&Ct.Host&&h===C);return null!==Z?oa(r,m,Z,C):Lr}function Ba(n,r,o,u,c){const h=n.providerIndexes,m=r.data,C=1048575&h,S=n.directiveStart,Z=h>>20,Ce=c?C+Z:n.directiveEnd;for(let Ge=u?C:C+Z;Ge<Ce;Ge++){const _t=m[Ge];if(Ge<S&&o===_t||Ge>=S&&_t.type===o)return Ge}if(c){const Ge=m[S];if(Ge&&Nr(Ge)&&Ge.type===o)return S}return null}function oa(n,r,o,u){let c=n[o];const h=r.data;if(function Wo(n){return n instanceof no}(c)){const m=c;m.resolving&&function bt(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Oe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ke(n)}(h[o]));const C=Vn(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?sr(m.injectImpl):null;_a(n,u,Ct.Default);try{c=n[o]=m.factory(void 0,h,n,u),r.firstCreatePass&&o>=u.directiveStart&&function Ds(n,r,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=r.type.prototype;if(u){const m=as(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,h))}(o,h[o],r)}finally{null!==S&&sr(S),Vn(C),m.resolving=!1,xi()}}return c}function Nc(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Ko(n,r){return!(n&Ct.Self||n&Ct.Host&&r)}class ii{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return Mu(this._tNode,this._lView,r,u,o)}}function yi(){return new ii(Rr(),gt())}function Sn(n){return Hn(()=>{const r=n.prototype.constructor,o=r[mn]||bs(r),u=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==u;){const h=c[mn]||bs(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function bs(n){return ut(n)?()=>{const r=bs(ve(n));return r&&r()}:li(n)}function $r(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function pn(n){return function Dt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(_e(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===r)return o[c+1];c+=2}}}return null}(Rr(),n)}const Dn="__parameters__";function Ji(n,r,o){return Hn(()=>{const u=function jt(n){return function(...o){if(n){const u=n(...o);for(const c in u)this[c]=u[c]}}}(r);function c(...h){if(this instanceof c)return u.apply(this,h),this;const m=new c(...h);return C.annotation=m,C;function C(S,L,Z){const oe=S.hasOwnProperty(Dn)?S[Dn]:Object.defineProperty(S,Dn,{value:[]})[Dn];for(;oe.length<=Z;)oe.push(null);return(oe[Z]=oe[Z]||[]).push(m),S}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class Ar{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=$t({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ci(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(r===n&&(r=n.slice(0,o)),Ci(u,r)):r!==n&&r.push(u)}return r}function Li(n,r){n.forEach(o=>Array.isArray(o)?Li(o,r):r(o))}function iu(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function $s(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function _(n,r,o){let u=y(n,r);return u>=0?n[1|u]=o:(u=~u,function kc(n,r,o,u){let c=n.length;if(c==r)n.push(o,u);else if(1===c)n.push(u,n[0]),n[0]=o;else{for(c--,n.push(n[c-1],n[c]);c>r;)n[c]=n[c-2],c--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function E(n,r){const o=y(n,r);if(o>=0)return n[1|o]}function y(n,r){return function O(n,r,o){let u=0,c=n.length>>o;for(;c!==u;){const h=u+(c-u>>1),m=n[h<<o];if(r===m)return h<<o;m>r?c=h:u=h+1}return~(c<<o)}(n,r,1)}const fi={},oo="__NG_DI_FLAG__",Qr="ngTempTokenPath",Ta=/\n/gm,ic="__source";let ou;function Ss(n){const r=ou;return ou=n,r}function au(n,r=Ct.Default){if(void 0===ou)throw new Ye(-203,!1);return null===ou?zr(n,void 0,r):ou.get(n,r&Ct.Optional?null:void 0,r)}function Vi(n,r=Ct.Default){return(function Fn(){return Tn}()||au)(ve(n),r)}function Fc(n,r=Ct.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Vi(n,r)}function sc(n){const r=[];for(let o=0;o<n.length;o++){const u=ve(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Ye(900,!1);let c,h=Ct.Default;for(let m=0;m<u.length;m++){const C=u[m],S=Hi(C);"number"==typeof S?-1===S?c=C.token:h|=S:c=C}r.push(Vi(c,h))}else r.push(Vi(u))}return r}function ua(n,r){return n[oo]=r,n.prototype[oo]=r,n}function Hi(n){return n[oo]}const Ir=ua(Ji("Optional"),8),vi=ua(Ji("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const re=new Map;let ge=0;const _i="__ngContext__";function Ui(n,r){qr(r)?(n[_i]=r[20],function rt(n){re.set(n[20],n)}(r)):n[_i]=r}function hc(n,r){return undefined(n,r)}function fc(n){const r=n[3];return jr(r)?r[3]:r}function Al(n){return d(n[13])}function v(n){return d(n[4])}function d(n){for(;null!==n&&!jr(n);)n=n[4];return n}function I(n,r,o,u,c){if(null!=u){let h,m=!1;jr(u)?h=u:qr(u)&&(m=!0,u=u[0]);const C=mr(u);0===n&&null!==o?null==c?ad(r,o,C):Za(r,o,C,c||null,!0):1===n&&null!==o?Za(r,o,C,c||null,!0):2===n?function hh(n,r,o){const u=cd(n,r);u&&function ud(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}(r,C,m):3===n&&r.destroyNode(C),null!=h&&function My(n,r,o,u,c){const h=o[7];h!==mr(o)&&I(r,n,u,h,c);for(let C=10;C<o.length;C++){const S=o[C];Ml(S[1],S,n,r,u,h)}}(r,n,h,o,c)}}function nt(n,r,o){return n.createElement(r,o)}function $c(n,r){const o=n[9],u=o.indexOf(r),c=r[3];512&r[2]&&(r[2]&=-513,Es(c,-1)),o.splice(u,1)}function Ms(n,r){if(n.length<=10)return;const o=10+r,u=n[o];if(u){const c=u[17];null!==c&&c!==n&&$c(c,u),r>0&&(n[o-1][4]=u[4]);const h=$s(n,10+r);!function Lt(n,r){Ml(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Hc(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Ml(n,r,o,3,null,null),function pr(n){let r=n[13];if(!r)return mu(n[1],n);for(;r;){let o=null;if(qr(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==n;)qr(r)&&mu(r[1],r),r=r[3];null===r&&(r=n),qr(r)&&mu(r[1],r),o=r&&r[4]}r=o}}(r)}}function mu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Xo(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const c=r[o[u]];if(!(c instanceof no)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const C=c[h[m]],S=h[m+1];try{S.call(C)}finally{}}else try{h.call(c)}finally{}}}}(n,r),function od(n,r){const o=n.cleanup,u=r[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],C="function"==typeof m?m(r):mr(r[m]),S=u[c=o[h+2]],L=o[h+3];"boolean"==typeof L?C.removeEventListener(o[h],S,L):L>=0?u[c=L]():u[c=-L].unsubscribe(),h+=2}else{const m=u[c=o[h+1]];o[h].call(m)}if(null!==u){for(let h=c+1;h<u.length;h++)(0,u[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&jr(r[3])){o!==r[3]&&$c(o,r);const u=r[19];null!==u&&u.detachView(n)}!function Ht(n){re.delete(n[20])}(r)}}function Sl(n,r,o){return function ju(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const c=n.data[u.directiveStart].encapsulation;if(c===on.None||c===on.Emulated)return null}return hi(u,o)}(n,r.parent,o)}function Za(n,r,o,u,c){n.insertBefore(r,o,u,c)}function ad(n,r,o){n.appendChild(r,o)}function nr(n,r,o,u,c){null!==u?Za(n,r,o,u,c):ad(n,r,o)}function cd(n,r){return n.parentNode(r)}let Ya,pg=function ld(n,r,o){return 40&n.type?hi(n,o):null};function $u(n,r,o,u){const c=Sl(n,u,r),h=r[11],C=function Of(n,r,o){return pg(n,r,o)}(u.parent||r[6],u,r);if(null!=c)if(Array.isArray(o))for(let S=0;S<o.length;S++)nr(h,c,o[S],C,!1);else nr(h,c,o,C,!1)}function yu(n,r){if(null!==r){const o=r.type;if(3&o)return hi(r,n);if(4&o)return Hu(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return yu(n,u);{const c=n[r.index];return jr(c)?Hu(-1,c):mr(c)}}if(32&o)return hc(r,n)()||mr(n[r.index]);{const u=Ff(n,r);return null!==u?Array.isArray(u)?u[0]:yu(fc(n[16]),u):yu(n,r.next)}}return null}function Ff(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Hu(n,r){const o=10+n+1;if(o<r.length){const u=r[o],c=u[1].firstChild;if(null!==c)return yu(u,c)}return r[7]}function pc(n,r,o,u,c,h,m){for(;null!=o;){const C=u[o.index],S=o.type;if(m&&0===r&&(C&&Ui(mr(C),u),o.flags|=4),64!=(64&o.flags))if(8&S)pc(n,r,o.child,u,c,h,!1),I(r,n,c,C,h);else if(32&S){const L=hc(o,u);let Z;for(;Z=L();)I(r,n,c,Z,h);I(r,n,c,C,h)}else 16&S?xl(n,r,u,o,c,h):I(r,n,c,C,h);o=m?o.projectionNext:o.next}}function Ml(n,r,o,u,c,h){pc(o,u,n.firstChild,r,c,h,!1)}function xl(n,r,o,u,c,h){const m=o[16],S=m[6].projection[u.projection];if(Array.isArray(S))for(let L=0;L<S.length;L++)I(r,n,c,S[L],h);else pc(n,r,S,m[3],c,h,!0)}function Ti(n,r,o){n.setAttribute(r,"style",o)}function Rl(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function mg(n){Ya=n}class yh{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Gu(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rs=(()=>((rs=rs||{})[rs.NONE=0]="NONE",rs[rs.HTML=1]="HTML",rs[rs.STYLE=2]="STYLE",rs[rs.SCRIPT=3]="SCRIPT",rs[rs.URL=4]="URL",rs[rs.RESOURCE_URL=5]="RESOURCE_URL",rs))();function Kc(n){const r=function Ed(){const n=gt();return n&&n[12]}();return r?r.sanitize(rs.URL,n)||"":function Wc(n,r){const o=function vh(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?Gu(n):function Eh(n){return(n=String(n)).match(_g)?n:"unsafe:"+n}(Ke(n))}const $f=new Ar("ENVIRONMENT_INITIALIZER"),zu=new Ar("INJECTOR",-1),qc=new Ar("INJECTOR_DEF_TYPES");class Hf{get(r,o=fi){if(o===fi){const u=new Error(`NullInjectorError: No provider for ${te(r)}!`);throw u.name="NullInjectorError",u}return o}}function Gy(...n){return{\u0275providers:Gf(0,n)}}function Gf(n,...r){const o=[],u=new Set;let c;return Li(r,h=>{const m=h;Ch(m,o,[],u)&&(c||(c=[]),c.push(m))}),void 0!==c&&Eu(c,o),o}function Eu(n,r){for(let o=0;o<n.length;o++){const{providers:c}=n[o];Li(c,h=>{r.push(h)})}}function Ch(n,r,o,u){if(!(n=ve(n)))return!1;let c=null,h=cn(n);const m=!h&&K(n);if(h||m){if(m&&!m.standalone)return!1;c=n}else{const S=n.ngModule;if(h=cn(S),!h)return!1;c=S}const C=u.has(c);if(m){if(C)return!1;if(u.add(c),m.dependencies){const S="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const L of S)Ch(L,r,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let L;u.add(c);try{Li(h.imports,Z=>{Ch(Z,r,o,u)&&(L||(L=[]),L.push(Z))})}finally{}void 0!==L&&Eu(L,r)}if(!C){const L=li(c)||(()=>new c);r.push({provide:c,useFactory:L,deps:nn},{provide:qc,useValue:c,multi:!0},{provide:$f,useValue:()=>Vi(c),multi:!0})}const S=h.providers;null==S||C||Li(S,Z=>{r.push(Z)})}}return c!==n&&void 0!==n.providers}const bg=Ee({provide:String,useValue:Ee});function Nl(n){return null!==n&&"object"==typeof n&&bg in n}function fa(n){return"function"==typeof n}const bh=new Ar("Set Injector scope."),kl={},zf={};let Th;function Id(){return void 0===Th&&(Th=new Hf),Th}class Zc{}class Wf extends Zc{constructor(r,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yc(r,m=>this.processProvider(m)),this.records.set(zu,Fl(void 0,this)),c.has("environment")&&this.records.set(Zc,Fl(void 0,this));const h=this.records.get(bh);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(qc.multi,nn,Ct.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ss(this),u=sr(void 0);try{return r()}finally{Ss(o),sr(u)}}get(r,o=fi,u=Ct.Default){this.assertNotDestroyed();const c=Ss(this),h=sr(void 0);try{if(!(u&Ct.SkipSelf)){let C=this.records.get(r);if(void 0===C){const S=function Wy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ar}(r)&&tn(r);C=S&&this.injectableDefInScope(S)?Fl(Ah(r),kl):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(u&Ct.Self?Id():this.parent).get(r,o=u&Ct.Optional&&o===fi?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Qr]=m[Qr]||[]).unshift(te(r)),c)throw m;return function Sa(n,r,o,u){const c=n[Qr];throw r[ic]&&c.unshift(r[ic]),n.message=function Wa(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let c=te(r);if(Array.isArray(r))c=r.map(te).join(" -> ");else if("object"==typeof r){let h=[];for(let m in r)if(r.hasOwnProperty(m)){let C=r[m];h.push(m+":"+("string"==typeof C?JSON.stringify(C):te(C)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${n.replace(Ta,"\n  ")}`}("\n"+n.message,c,o,u),n.ngTokenPath=c,n[Qr]=null,n}(m,r,"R3InjectorError",this.source)}throw m}finally{sr(h),Ss(c)}}resolveInjectorInitializers(){const r=Ss(this),o=sr(void 0);try{const u=this.get($f.multi,nn,Ct.Self);for(const c of u)c()}finally{Ss(r),sr(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(te(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processProvider(r){let o=fa(r=ve(r))?r:ve(r&&r.provide);const u=function Dd(n){return Nl(n)?Fl(void 0,n.useValue):Fl(_c(n),kl)}(r);if(fa(r)||!0!==r.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Fl(void 0,kl,!0),c.factory=()=>sc(c.multi),this.records.set(o,c)),o=r,c.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kl&&(o.value=zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function zy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=ve(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ah(n){const r=tn(n),o=null!==r?r.factory:li(n);if(null!==o)return o;if(n instanceof Ar)throw new Ye(204,!1);if(n instanceof Function)return function Sh(n){const r=n.length;if(r>0)throw function ba(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}(r,"?"),new Ye(204,!1);const o=function ir(n){const r=n&&(n[Mn]||n[Mr]);if(r){const o=function Wt(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ye(204,!1)}function _c(n,r,o){let u;if(fa(n)){const c=ve(n);return li(c)||Ah(c)}if(Nl(n))u=()=>ve(n.useValue);else if(function vc(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...sc(n.deps||[]));else if(function yc(n){return!(!n||!n.useExisting)}(n))u=()=>Vi(ve(n.useExisting));else{const c=ve(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return li(c)||Ah(c);u=()=>new c(...sc(n.deps))}return u}function Fl(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ky(n){return!!n.\u0275providers}function Yc(n,r){for(const o of n)Array.isArray(o)?Yc(o,r):Ky(o)?Yc(o.\u0275providers,r):r(o)}class Wu{}class Zy{resolveComponentFactory(r){throw function Ag(n){const r=Error(`No component factory found for ${te(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jc=(()=>{class n{}return n.NULL=new Zy,n})();function Kf(){return Xc(Rr(),gt())}function Xc(n,r){return new el(hi(n,r))}let el=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Kf,n})();function qf(n){return n instanceof el?n.nativeElement:n}class Cd{}let Qy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Zf(){const n=gt(),o=ti(Rr().index,n);return(qr(o)?o:n)[11]}(),n})(),Mh=(()=>{class n{}return n.\u0275prov=$t({token:n,providedIn:"root",factory:()=>null}),n})();class Mg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Yf=new Mg("14.3.0"),tl={};function xh(n){return n.ngOriginalError}class Vl{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&xh(r);for(;o&&xh(o);)o=xh(o);return o||null}}function Oo(n){return n instanceof Function?n():n}function Jf(n,r,o){let u=n.length;for(;;){const c=n.indexOf(r,o);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const h=r.length;if(c+h===u||n.charCodeAt(c+h)<=32)return c}o=c+1}}const Xf="ng-template";function ev(n,r,o){let u=0;for(;u<n.length;){let c=n[u++];if(o&&"class"===c){if(c=n[u],-1!==Jf(c.toLowerCase(),r,0))return!0}else if(1===c){for(;u<n.length&&"string"==typeof(c=n[u++]);)if(c.toLowerCase()===r)return!0;return!1}}return!1}function Td(n){return 4===n.type&&n.value!==Xf}function Pg(n,r,o){return r===(4!==n.type||o?n.value:Xf)}function tv(n,r,o){let u=4;const c=n.attrs||[],h=function Ad(n){for(let r=0;r<n.length;r++)if(_e(n[r]))return r;return n.length}(c);let m=!1;for(let C=0;C<r.length;C++){const S=r[C];if("number"!=typeof S){if(!m)if(4&u){if(u=2|1&u,""!==S&&!Pg(n,S,o)||""===S&&1===r.length){if(Na(u))return!1;m=!0}}else{const L=8&u?S:r[++C];if(8&u&&null!==n.attrs){if(!ev(n.attrs,L,o)){if(Na(u))return!1;m=!0}continue}const oe=nv(8&u?"class":S,c,Td(n),o);if(-1===oe){if(Na(u))return!1;m=!0;continue}if(""!==L){let Ce;Ce=oe>h?"":c[oe+1].toLowerCase();const Ge=8&u?Ce:null;if(Ge&&-1!==Jf(Ge,L,0)||2&u&&L!==Ce){if(Na(u))return!1;m=!0}}}}else{if(!m&&!Na(u)&&!Na(S))return!1;if(m&&Na(S))continue;m=!1,u=S|1&u}}return Na(u)||m}function Na(n){return 0==(1&n)}function nv(n,r,o,u){if(null===r)return-1;let c=0;if(u||!o){let h=!1;for(;c<r.length;){const m=r[c];if(m===n)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let C=r[++c];for(;"string"==typeof C;)C=r[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function Og(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ep(n,r,o=!1){for(let u=0;u<r.length;u++)if(tv(n,r[u],o))return!0;return!1}function kg(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],o=1,u=2,c="",h=!1;for(;o<n.length;){let m=n[o];if("string"==typeof m)if(2&u){const C=n[++o];c+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Na(m)&&(r+=kg(h,c),c=""),u=m,h=h||!Na(u);o++}return""!==c&&(r+=kg(h,c)),r}const tr={};function xs(n){Lg(qn(),gt(),hr()+n,!1)}function Lg(n,r,o,u){if(!u)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&to(r,h,o)}else{const h=n.preOrderHooks;null!==h&&ia(r,h,0,o)}Ii(o)}function kh(n,r=null,o=null,u){const c=Fh(n,r,o,u);return c.resolveInjectorInitializers(),c}function Fh(n,r=null,o=null,u,c=new Set){const h=[o||nn,Gy(n)];return u=u||("object"==typeof n?void 0:te(n)),new Wf(h,r||Id(),u||null,c)}let Qa=(()=>{class n{static create(o,u){if(Array.isArray(o))return kh({name:""},u,o,"");{const c=o.name??"";return kh({name:c},o.parent,o.providers,c)}}}return n.THROW_IF_NOT_FOUND=fi,n.NULL=new Hf,n.\u0275prov=$t({token:n,providedIn:"any",factory:()=>Vi(zu)}),n.__NG_ELEMENT_ID__=-1,n})();function wc(n,r=Ct.Default){const o=gt();return null===o?Vi(n,r):Mu(Rr(),o,ve(n),r)}function Uh(){throw new Error("invalid")}function Bh(n,r){return n<<17|r<<2}function ka(n){return n>>17&32767}function lp(n){return 2|n}function qu(n){return(131068&n)>>2}function Gs(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function Kh(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],h=o[u+1];if(-1!==h){const m=n.data[h];Fi(c),m.contentQueries(2,r[h],h)}}}function Ld(n,r,o,u,c,h,m,C,S,L,Z){const oe=r.blueprint.slice();return oe[0]=c,oe[2]=76|u,(null!==Z||n&&1024&n[2])&&(oe[2]|=1024),Gr(oe),oe[3]=oe[15]=n,oe[8]=o,oe[10]=m||n&&n[10],oe[11]=C||n&&n[11],oe[12]=S||n&&n[12]||null,oe[9]=L||n&&n[9]||null,oe[6]=h,oe[20]=function be(){return ge++}(),oe[21]=Z,oe[16]=2==r.type?n[16]:oe,oe}function Dc(n,r,o,u,c){let h=n.data[r];if(null===h)h=function Vd(n,r,o,u,c){const h=k(),m=q(),S=n.data[r]=function Tp(n,r,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,r,u,c);return null===n.firstChild&&(n.firstChild=S),null!==h&&(m?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(n,r,o,u,c),function Is(){return An.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const m=function P(){const n=An.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return M(h,!0),h}function Cc(n,r,o,u){if(0===o)return-1;const c=r.length;for(let h=0;h<o;h++)r.push(u),n.blueprint.push(u),n.data.push(null);return c}function bc(n,r,o){eo(r);try{const u=n.viewQuery;null!==u&&jd(1,u,o);const c=n.template;null!==c&&qh(n,r,c,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kh(n,r),n.staticViewQueries&&jd(2,n.viewQuery,o);const h=n.components;null!==h&&function Dp(n,r){for(let o=0;o<r.length;o++)Mv(n,r[o])}(r,h)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,ds()}}function Ja(n,r,o,u){const c=r[2];if(128!=(128&c)){eo(r);try{Gr(r),function Qi(n){return An.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&qh(n,r,o,2,u);const m=3==(3&c);if(m){const L=n.preOrderCheckHooks;null!==L&&to(r,L,null)}else{const L=n.preOrderHooks;null!==L&&ia(r,L,0,null),hs(r,0)}if(function Pp(n){for(let r=Al(n);null!==r;r=v(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const c=o[u],h=c[3];0==(512&c[2])&&Es(h,1),c[2]|=512}}}(r),function Av(n){for(let r=Al(n);null!==r;r=v(r))for(let o=10;o<r.length;o++){const u=r[o],c=u[1];Uo(u)&&Ja(c,u,c.template,u[8])}}(r),null!==n.contentQueries&&Kh(n,r),m){const L=n.contentCheckHooks;null!==L&&to(r,L)}else{const L=n.contentHooks;null!==L&&ia(r,L,1),hs(r,1)}!function Ev(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Ii(~c);else{const h=c,m=o[++u],C=o[++u];va(m,h),C(2,r[h])}}}finally{Ii(-1)}}(n,r);const C=n.components;null!==C&&function wv(n,r){for(let o=0;o<r.length;o++)Sv(n,r[o])}(r,C);const S=n.viewQuery;if(null!==S&&jd(2,S,u),m){const L=n.viewCheckHooks;null!==L&&to(r,L)}else{const L=n.viewHooks;null!==L&&ia(r,L,2),hs(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Es(r[3],-1))}finally{ds()}}}function qh(n,r,o,u,c){const h=hr(),m=2&u;try{Ii(-1),m&&r.length>22&&Lg(n,r,22,!1),o(u,c)}finally{Ii(h)}}function Tc(n,r,o){!To()||(function Dv(n,r,o,u){const c=o.directiveStart,h=o.directiveEnd;n.firstCreatePass||Zt(o,r),Ui(u,r);const m=o.initialInputs;for(let C=c;C<h;C++){const S=n.data[C],L=Nr(S);L&&Tv(r,o,S);const Z=oa(r,n,C,o);Ui(Z,r),null!==m&&Rp(0,C-c,Z,S,0,m),L&&(ti(o.index,r)[8]=Z)}}(n,r,o,hi(o,r)),128==(128&o.flags)&&function Cv(n,r,o){const u=o.directiveStart,c=o.directiveEnd,h=o.index,m=function $o(){return An.lFrame.currentDirectiveIndex}();try{Ii(h);for(let C=u;C<c;C++){const S=n.data[C],L=r[C];Ho(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&cm(S,L)}}finally{Ii(-1),Ho(m)}}(n,r,o))}function Zh(n,r,o=hi){const u=r.localNames;if(null!==u){let c=r.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],C=-1===m?o(r,n):n[m];n[c++]=C}}}function dl(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cp(n,r,o,u,c,h,m,C,S,L){const Z=22+u,oe=Z+c,Ce=function Iv(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:tr);return o}(Z,oe),Ge="function"==typeof L?L():L;return Ce[1]={type:n,blueprint:Ce,template:o,queries:null,viewQuery:C,declTNode:r,data:Ce.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:Ge,incompleteFirstPass:!1}}function Yh(n,r,o,u){const c=nf(r);null===o?c.push(u):(c.push(o),n.firstCreatePass&&Iu(n).push(u,c.length-1))}function rm(n,r,o){for(let u in n)if(n.hasOwnProperty(u)){const c=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,c):o[u]=[r,c]}return o}function im(n,r){const u=r.directiveEnd,c=n.data,h=r.attrs,m=[];let C=null,S=null;for(let L=r.directiveStart;L<u;L++){const Z=c[L],oe=Z.inputs,Ce=null===h||Td(r)?null:dm(oe,h);m.push(Ce),C=rm(oe,L,C),S=rm(Z.outputs,L,S)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=m,r.inputs=C,r.outputs=S}function sm(n,r){const o=ti(r,n);16&o[2]||(o[2]|=32)}function Qh(n,r,o,u){let c=!1;if(To()){const h=function bv(n,r,o){const u=n.directiveRegistry;let c=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];ep(o,m.selectors,!1)&&(c||(c=[]),We(Zt(o,r),n,m.type),Nr(m)?(Jh(n,o),c.unshift(m)):c.push(m))}return c}(n,r,o),m=null===u?null:{"":-1};if(null!==h){c=!0,lm(o,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const oe=h[Z];oe.providersResolver&&oe.providersResolver(oe)}let C=!1,S=!1,L=Cc(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const oe=h[Z];o.mergedAttrs=dt(o.mergedAttrs,oe.hostAttrs),Xh(n,o,r,L,oe),xp(L,oe,m),null!==oe.contentQueries&&(o.flags|=8),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(o.flags|=128);const Ce=oe.type.prototype;!C&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!S&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),S=!0),L++}im(n,o)}m&&function Mp(n,r,o){if(r){const u=n.localNames=[];for(let c=0;c<r.length;c+=2){const h=o[r[c+1]];if(null==h)throw new Ye(-301,!1);u.push(r[c],h)}}}(o,u,m)}return o.mergedAttrs=dt(o.mergedAttrs,o.attrs),c}function Sp(n,r,o,u,c,h){const m=h.hostBindings;if(m){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const S=~r.index;(function um(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(C)!=S&&C.push(S),C.push(u,c,m)}}function cm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Jh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;Nr(r)&&(o[""]=n)}}function lm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Xh(n,r,o,u,c){n.data[u]=c;const h=c.factory||(c.factory=li(c.type)),m=new no(h,Nr(c),wc);n.blueprint[u]=m,o[u]=m,Sp(n,r,0,u,Cc(n,o,c.hostVars,tr),c)}function Tv(n,r,o){const u=hi(r,n),c=dl(o),h=n[10],m=$l(n,Ld(n,c,null,o.onPush?32:16,u,r,h,h.createRenderer(u,o),null,null,null));n[r.index]=m}function Fa(n,r,o,u,c,h){const m=hi(n,r);!function ef(n,r,o,u,c,h,m){if(null==h)n.removeAttribute(r,c,o);else{const C=null==m?Ke(h):m(h,u||"",c);n.setAttribute(r,c,C,o)}}(r[11],m,h,n.value,o,u,c)}function Rp(n,r,o,u,c,h){const m=h[r];if(null!==m){const C=u.setInput;for(let S=0;S<m.length;){const L=m[S++],Z=m[S++],oe=m[S++];null!==C?u.setInput(o,oe,L,Z):o[Z]=oe}}}function dm(n,r){let o=null,u=0;for(;u<r.length;){const c=r[u];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,n[c],r[u+1])),u+=2}else u+=2;else u+=4}return o}function tf(n,r,o,u){return new Array(n,!0,!1,r,null,0,u,o,null,null)}function Sv(n,r){const o=ti(r,n);if(Uo(o)){const u=o[1];48&o[2]?Ja(u,o,u.template,o[8]):o[5]>0&&Ud(o)}}function Ud(n){for(let u=Al(n);null!==u;u=v(u))for(let c=10;c<u.length;c++){const h=u[c];if(Uo(h))if(512&h[2]){const m=h[1];Ja(m,h,m.template,h[8])}else h[5]>0&&Ud(h)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=ti(o[u],n);Uo(c)&&c[5]>0&&Ud(c)}}function Mv(n,r){const o=ti(r,n),u=o[1];(function Op(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),bc(u,o,o[8])}function $l(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bd(n){for(;n;){n[2]|=32;const r=fc(n);if(Bi(n)&&!r)return n;n=r}return null}function Yu(n,r,o,u=!0){const c=r[10];c.begin&&c.begin();try{Ja(n,r,n.template,o)}catch(m){throw u&&hm(r,m),m}finally{c.end&&c.end()}}function jd(n,r,o){Fi(0),r(n,o)}function nf(n){return n[7]||(n[7]=[])}function Iu(n){return n.cleanup||(n.cleanup=[])}function hm(n,r){const o=n[9],u=o?o.get(Vl,null):null;u&&u.handleError(r)}function $d(n,r,o,u,c){for(let h=0;h<o.length;){const m=o[h++],C=o[h++],S=r[m],L=n.data[m];null!==L.setInput?L.setInput(S,c,u,C):S[C]=c}}function Qu(n,r,o){const u=ji(r,n);!function J(n,r,o){n.setValue(r,o)}(n[11],u,o)}function sf(n,r,o){let u=o?n.styles:null,c=o?n.classes:null,h=0;if(null!==r)for(let m=0;m<r.length;m++){const C=r[m];"number"==typeof C?h=C:1==h?c=Se(c,C):2==h&&(u=Se(u,C+": "+r[++m]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=c:n.classesWithoutHost=c}function Hl(n,r,o,u,c=!1){for(;null!==o;){const h=r[o.index];if(null!==h&&u.push(mr(h)),jr(h))for(let C=10;C<h.length;C++){const S=h[C],L=S[1].firstChild;null!==L&&Hl(S[1],S,L,u)}const m=o.type;if(8&m)Hl(n,r,o.child,u);else if(32&m){const C=hc(o,r);let S;for(;S=C();)u.push(S)}else if(16&m){const C=Ff(r,o);if(Array.isArray(C))u.push(...C);else{const S=fc(r[16]);Hl(S[1],S,C,u,!0)}}o=c?o.projectionNext:o.next}return u}class Hd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Hl(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(jr(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(Ms(r,u),$s(o,u))}this._attachedToViewContainer=!1}Hc(this._lView[1],this._lView)}onDestroy(r){Yh(this._lView[1],this._lView,null,r)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cn(n,r){Ml(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ye(902,!1);this._appRef=r}}class Np extends Hd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Yu(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class kp extends Jc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=K(r);return new Gl(o,this.ngModule)}}function af(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Fp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const c=this.injector.get(r,tl,u);return c!==tl||o===tl?c:this.parentInjector.get(r,o,u)}}class Gl extends Wu{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return af(this.componentDef.inputs)}get outputs(){return af(this.componentDef.outputs)}create(r,o,u,c){let h=(c=c||this.ngModule)instanceof Zc?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Fp(r,h):r,C=m.get(Cd,null);if(null===C)throw new Ye(407,!1);const S=m.get(Mh,null),L=C.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",oe=u?function bp(n,r,o){return n.selectRootElement(r,o===on.ShadowDom)}(L,u,this.componentDef.encapsulation):nt(L,Z,function Rv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Ce=this.componentDef.onPush?288:272,Ge=Cp(0,null,null,1,0,null,null,null,null,null),_t=Ld(null,Ge,null,Ce,null,null,C,L,S,m,null);let Ut,en;eo(_t);try{const bn=function Vp(n,r,o,u,c,h){const m=o[1];o[22]=n;const S=Dc(m,22,2,"#host",null),L=S.mergedAttrs=r.hostAttrs;null!==L&&(sf(S,L,!0),null!==n&&(W(c,n,L),null!==S.classes&&Rl(c,n,S.classes),null!==S.styles&&Ti(c,n,S.styles)));const Z=u.createRenderer(n,r),oe=Ld(o,dl(r),null,r.onPush?32:16,o[22],S,u,Z,h||null,null,null);return m.firstCreatePass&&(We(Zt(S,o),m,r.type),Jh(m,S),lm(S,o.length,1)),$l(o,oe),o[22]=oe}(oe,this.componentDef,_t,C,L);if(oe)if(u)W(L,oe,["ng-version",Yf.full]);else{const{attrs:$n,classes:At}=function iv(n){const r=[],o=[];let u=1,c=2;for(;u<n.length;){let h=n[u];if("string"==typeof h)2===c?""!==h&&r.push(h,n[++u]):8===c&&o.push(h);else{if(!Na(c))break;c=h}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);$n&&W(L,oe,$n),At&&At.length>0&&Rl(L,oe,At.join(" "))}if(en=bo(Ge,22),void 0!==o){const $n=en.projection=[];for(let At=0;At<this.ngContentSelectors.length;At++){const Yn=o[At];$n.push(null!=Yn?Array.from(Yn):null)}}Ut=function Nv(n,r,o,u){const c=o[1],h=function am(n,r,o){const u=Rr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xh(n,u,r,Cc(n,r,1,null),o),im(n,u));const c=oa(r,n,u.directiveStart,u);Ui(c,r);const h=hi(u,r);return h&&Ui(h,r),c}(c,o,r);if(n[8]=o[8]=h,null!==u)for(const C of u)C(h,r);if(r.contentQueries){const C=Rr();r.contentQueries(1,h,C.directiveStart)}const m=Rr();return!c.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ii(m.index),Sp(o[1],m,0,m.directiveStart,m.directiveEnd,r),cm(r,h)),h}(bn,this.componentDef,_t,[Up]),bc(Ge,_t,null)}finally{ds()}return new Ov(this.componentType,Ut,Xc(en,_t),_t,en)}}class Ov extends class Qc{}{constructor(r,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Np(c),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[r])){const h=this._rootLView;$d(h[1],h,c,r,o),sm(h,this._tNode.index)}}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Up(){const n=Rr();Cs(gt()[1],n)}function Gd(n){let r=function uf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let c;if(Nr(n))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ye(903,!1);c=r.\u0275dir}if(c){if(o){u.push(c);const m=n;m.inputs=hl(n.inputs),m.declaredInputs=hl(n.declaredInputs),m.outputs=hl(n.outputs);const C=c.hostBindings;C&&fm(n,C);const S=c.viewQuery,L=c.contentQueries;if(S&&Fv(n,S),L&&Bp(n,L),we(n.inputs,c.inputs),we(n.declaredInputs,c.declaredInputs),we(n.outputs,c.outputs),Nr(c)&&c.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const C=h[m];C&&C.ngInherit&&C(n),C===Gd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function kv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const c=n[u];c.hostVars=r+=c.hostVars,c.hostAttrs=dt(c.hostAttrs,o=dt(o,c.hostAttrs))}}(u)}function hl(n){return n===ur?{}:n===nn?[]:n}function Fv(n,r){const o=n.viewQuery;n.viewQuery=o?(u,c)=>{r(u,c),o(u,c)}:r}function Bp(n,r){const o=n.contentQueries;n.contentQueries=o?(u,c,h)=>{r(u,c,h),o(u,c,h)}:r}function fm(n,r){const o=n.hostBindings;n.hostBindings=o?(u,c)=>{r(u,c),o(u,c)}:r}let lf=null;function fl(){if(!lf){const n=xn.Symbol;if(n&&n.iterator)lf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(lf=u)}}}return lf}function zd(n){return!!Wd(n)&&(Array.isArray(n)||!(n instanceof Map)&&fl()in n)}function Wd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xa(n,r,o){return n[r]=o}function zs(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Du(n,r,o,u){const c=zs(n,r,o);return zs(n,r+1,u)||c}function Kl(n,r,o,u){const c=gt();return zs(c,Bs(),r)&&(qn(),Fa(yr(),c,n,r,o,u)),Kl}function ml(n,r,o,u,c,h){const C=Du(n,function wi(){return An.lFrame.bindingIndex}(),o,c);return ni(2),C?r+Ke(o)+u+Ke(c)+h:tr}function Wp(n,r,o,u,c,h,m,C){const S=gt(),L=qn(),Z=n+22,oe=L.firstCreatePass?function wm(n,r,o,u,c,h,m,C,S){const L=r.consts,Z=Dc(r,n,4,m||null,gi(L,C));Qh(r,o,Z,gi(L,S)),Cs(r,Z);const oe=Z.tViews=Cp(2,Z,u,c,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L);return null!==r.queries&&(r.queries.template(r,Z),oe.queries=r.queries.embeddedTView(Z)),Z}(Z,L,S,r,o,u,c,h,m):L.data[Z];M(oe,!1);const Ce=S[11].createComment("");$u(L,S,Ce,oe),Ui(Ce,S),$l(S,S[Z]=tf(Ce,S,Ce,oe)),os(oe)&&Tc(L,S,oe),null!=m&&Zh(S,oe,C)}function pf(n,r,o){const u=gt();return zs(u,Bs(),r)&&function No(n,r,o,u,c,h,m,C){const S=hi(r,o);let Z,L=r.inputs;!C&&null!=L&&(Z=L[u])?($d(n,o,Z,u,c),Xr(r)&&sm(o,r.index)):3&r.type&&(u=function Ap(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),c=null!=m?m(c,r.value||"",u):c,h.setProperty(S,u,c))}(qn(),yr(),u,n,r,u[11],o,!1),pf}function gf(n,r,o,u,c){const m=c?"class":"style";$d(n,o,r.inputs[m],m,u)}function qd(n,r,o,u){const c=gt(),h=qn(),m=22+n,C=c[11],S=c[m]=nt(C,r,function Ea(){return An.lFrame.currentNamespace}()),L=h.firstCreatePass?function Kd(n,r,o,u,c,h,m){const C=r.consts,L=Dc(r,n,2,c,gi(C,h));return Qh(r,o,L,gi(C,m)),null!==L.attrs&&sf(L,L.attrs,!1),null!==L.mergedAttrs&&sf(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(m,h,c,0,r,o,u):h.data[m];M(L,!0);const Z=L.mergedAttrs;null!==Z&&W(C,S,Z);const oe=L.classes;null!==oe&&Rl(C,S,oe);const Ce=L.styles;return null!==Ce&&Ti(C,S,Ce),64!=(64&L.flags)&&$u(h,c,S,L),0===function Ei(){return An.lFrame.elementDepthCount}()&&Ui(S,c),function Fr(){An.lFrame.elementDepthCount++}(),os(L)&&(Tc(h,c,L),function ll(n,r,o){if(Ks(r)){const c=r.directiveEnd;for(let h=r.directiveStart;h<c;h++){const m=n.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,L,c)),null!==u&&Zh(c,L),qd}function Ai(){let n=Rr();q()?function Qe(){An.lFrame.isParent=!1}():(n=n.parent,M(n,!1));const r=n;!function Us(){An.lFrame.elementDepthCount--}();const o=qn();return o.firstCreatePass&&(Cs(o,n),Ks(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ru(n){return 0!=(16&n.flags)}(r)&&gf(o,r,gt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function b(n){return 0!=(32&n.flags)}(r)&&gf(o,r,gt(),r.stylesWithoutHost,!1),Ai}function Rs(n,r,o,u){return qd(n,r,o,u),Ai(),Rs}function Im(){return gt()}function Zd(n){return!!n&&"function"==typeof n.then}function Dm(n){return!!n&&"function"==typeof n.subscribe}const mf=Dm;function Yp(n,r,o,u){const c=gt(),h=qn(),m=Rr();return function Lv(n,r,o,u,c,h,m,C){const S=os(u),Z=n.firstCreatePass&&Iu(n),oe=r[8],Ce=nf(r);let Ge=!0;if(3&u.type||C){const en=hi(u,r),bn=C?C(en):en,$n=Ce.length,At=C?Jr=>C(mr(Jr[u.index])):u.index;let Yn=null;if(!C&&S&&(Yn=function Si(n,r,o,u){const c=n.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===o&&c[h+1]===u){const C=r[7],S=c[h+2];return C.length>S?C[S]:null}"string"==typeof m&&(h+=2)}return null}(n,r,c,u.index)),null!==Yn)(Yn.__ngLastListenerFn__||Yn).__ngNextListenerFn__=h,Yn.__ngLastListenerFn__=h,Ge=!1;else{h=zi(u,r,oe,h,!1);const Jr=o.listen(bn,c,h);Ce.push(h,Jr),Z&&Z.push(c,At,$n,$n+1)}}else h=zi(u,r,oe,h,!1);const _t=u.outputs;let Ut;if(Ge&&null!==_t&&(Ut=_t[c])){const en=Ut.length;if(en)for(let bn=0;bn<en;bn+=2){const Wi=r[Ut[bn]][Ut[bn+1]].subscribe(h),uh=Ce.length;Ce.push(h,Wi),Z&&Z.push(c,u.index,uh,-(uh+1))}}}(h,c,c[11],m,n,r,0,u),Yp}function Vv(n,r,o,u){try{return!1!==o(u)}catch(c){return hm(n,c),!1}}function zi(n,r,o,u,c){return function h(m){if(m===Function)return u;Bd(2&n.flags?ti(n.index,r):r);let S=Vv(r,0,u,m),L=h.__ngNextListenerFn__;for(;L;)S=Vv(r,0,L,m)&&S,L=L.__ngNextListenerFn__;return c&&!1===S&&(m.preventDefault(),m.returnValue=!1),S}}function Qp(n=1){return function Ua(n){return(An.lFrame.contextLView=function na(n,r){for(;n>0;)r=r[15],n--;return r}(n,An.lFrame.contextLView))[8]}(n)}function xc(n,r,o,u,c){const h=n[o+1],m=null===r;let C=u?ka(h):qu(h),S=!1;for(;0!==C&&(!1===S||m);){const Z=n[C+1];yf(n[C],r)&&(S=!0,n[C+1]=u?jh(Z):lp(Z)),C=u?ka(Z):qu(Z)}S&&(n[o+1]=u?lp(h):jh(h))}function yf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&y(n,r)>=0}const Ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pm(n){return n.substring(Ps.key,Ps.keyEnd)}function Yd(n,r){const o=Ps.textEnd;return o===r?-1:(r=Ps.keyEnd=function km(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,Ps.key=r,o),bu(n,r,o))}function bu(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function _f(n,r){return function ko(n,r,o,u){const c=gt(),h=qn(),m=ni(2);h.firstUpdatePass&&Xd(h,n,m,u),r!==tr&&zs(c,m,r)&&$m(h,h.data[hr()],c,c[11],n,c[m+1]=function c0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=te(Gu(n)))),n}(r,o),u,m)}(n,r,null,!0),_f}function tg(n){!function tu(n,r,o,u){const c=qn(),h=ni(2);c.firstUpdatePass&&Xd(c,null,h,u);const m=gt();if(o!==tr&&zs(m,h,o)){const C=c.data[hr()];if(If(C,u)&&!Jd(c,h)){let S=u?C.classesWithoutHost:C.stylesWithoutHost;null!==S&&(o=Se(S,o||"")),gf(c,C,m,o,u)}else!function nh(n,r,o,u,c,h,m,C){c===tr&&(c=nn);let S=0,L=0,Z=0<c.length?c[0]:null,oe=0<h.length?h[0]:null;for(;null!==Z||null!==oe;){const Ce=S<c.length?c[S+1]:void 0,Ge=L<h.length?h[L+1]:void 0;let Ut,_t=null;Z===oe?(S+=2,L+=2,Ce!==Ge&&(_t=oe,Ut=Ge)):null===oe||null!==Z&&Z<oe?(S+=2,_t=Z):(L+=2,_t=oe,Ut=Ge),null!==_t&&$m(n,r,o,u,_t,Ut,m,C),Z=S<c.length?c[S]:null,oe=L<h.length?h[L]:null}}(c,C,m,m[11],m[h+1],m[h+1]=function th(n,r,o){if(null==o||""===o)return nn;const u=[],c=Gu(o);if(Array.isArray(c))for(let h=0;h<c.length;h++)n(u,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&n(u,h,c[h]);else"string"==typeof c&&r(u,c);return u}(n,r,o),u,h)}}(_,La,n,!0)}function La(n,r){for(let o=function Nm(n){return function Qd(n){Ps.key=0,Ps.keyEnd=0,Ps.value=0,Ps.valueEnd=0,Ps.textEnd=n.length}(n),Yd(n,bu(n,0,Ps.textEnd))}(r);o>=0;o=Yd(r,o))_(n,Pm(r),!0)}function Jd(n,r){return r>=n.expandoStartIndex}function Xd(n,r,o,u){const c=n.data;if(null===c[o+1]){const h=c[hr()],m=Jd(n,o);If(h,u)&&null===r&&!m&&(r=!1),r=function Bm(n,r,o,u){const c=function Go(n){const r=An.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=u?r.residualClasses:r.residualStyles;if(null===c)0===(u?r.classBindings:r.styleBindings)&&(o=_l(o=wf(null,n,r,o,u),r.attrs,u),h=null);else{const m=r.directiveStylingLast;if(-1===m||n[m]!==c)if(o=wf(c,n,r,o,u),null===h){let S=function eh(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==qu(u))return n[ka(u)]}(n,r,u);void 0!==S&&Array.isArray(S)&&(S=wf(null,n,r,S[1],u),S=_l(S,r.attrs,u),function Gv(n,r,o,u){n[ka(o?r.classBindings:r.styleBindings)]=u}(n,r,u,S))}else h=function Ef(n,r,o){let u;const c=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<c;h++)u=_l(u,n[h].hostAttrs,o);return _l(u,r.attrs,o)}(n,r,u)}return void 0!==h&&(u?r.residualClasses=h:r.residualStyles=h),o}(c,h,r,u),function Mc(n,r,o,u,c,h){let m=h?r.classBindings:r.styleBindings,C=ka(m),S=qu(m);n[u]=o;let Z,L=!1;if(Array.isArray(o)){const oe=o;Z=oe[1],(null===Z||y(oe,Z)>0)&&(L=!0)}else Z=o;if(c)if(0!==S){const Ce=ka(n[C+1]);n[u+1]=Bh(Ce,C),0!==Ce&&(n[Ce+1]=Gs(n[Ce+1],u)),n[C+1]=function cp(n,r){return 131071&n|r<<17}(n[C+1],u)}else n[u+1]=Bh(C,0),0!==C&&(n[C+1]=Gs(n[C+1],u)),C=u;else n[u+1]=Bh(S,0),0===C?C=u:n[S+1]=Gs(n[S+1],u),S=u;L&&(n[u+1]=lp(n[u+1])),xc(n,Z,u,!0),xc(n,Z,u,!1),function u0(n,r,o,u,c){const h=c?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&y(h,r)>=0&&(o[u+1]=jh(o[u+1]))}(r,Z,n,u,h),m=Bh(C,S),h?r.classBindings=m:r.styleBindings=m}(c,h,r,o,m,u)}}function wf(n,r,o,u,c){let h=null;const m=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<m&&(h=r[C],u=_l(u,h.hostAttrs,c),h!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function _l(n,r,o){const u=o?1:2;let c=-1;if(null!==r)for(let h=0;h<r.length;h++){const m=r[h];"number"==typeof m?c=m:c===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_(n,m,!!o||r[++h]))}return void 0===n?null:n}function $m(n,r,o,u,c,h,m,C){if(!(3&r.type))return;const S=n.data,L=S[C+1];ng(function Wg(n){return 1==(1&n)}(L)?El(S,r,o,c,qu(L),m):void 0)||(ng(h)||function Od(n){return 2==(2&n)}(L)&&(h=El(S,null,o,c,C,m)),function xy(n,r,o,u,c){if(r)c?n.addClass(o,u):n.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:ns.DashCase;null==c?n.removeStyle(o,u,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=ns.Important),n.setStyle(o,u,c,h))}}(u,m,ji(hr(),o),c,h))}function El(n,r,o,u,c,h){const m=null===r;let C;for(;c>0;){const S=n[c],L=Array.isArray(S),Z=L?S[1]:S,oe=null===Z;let Ce=o[c+1];Ce===tr&&(Ce=oe?nn:void 0);let Ge=oe?E(Ce,u):Z===u?Ce:void 0;if(L&&!ng(Ge)&&(Ge=E(S,u)),ng(Ge)&&(C=Ge,m))return C;const _t=n[c+1];c=m?ka(_t):qu(_t)}if(null!==r){let S=h?r.residualClasses:r.residualStyles;null!=S&&(C=E(S,u))}return C}function ng(n){return void 0!==n}function If(n,r){return 0!=(n.flags&(r?16:32))}function Hm(n,r=""){const o=gt(),u=qn(),c=n+22,h=u.firstCreatePass?Dc(u,c,1,r,null):u.data[c],m=o[c]=function $(n,r){return n.createText(r)}(o[11],r);$u(u,o,m,h),M(h,!1)}function Jl(n){return Df("",n,""),Jl}function Df(n,r,o){const u=gt(),c=function Ac(n,r,o,u){return zs(n,Bs(),o)?r+Ke(o)+u:tr}(u,n,r,o);return c!==tr&&Qu(u,hr(),c),Df}function rg(n,r,o,u,c){const h=gt(),m=ml(h,n,r,o,u,c);return m!==tr&&Qu(h,hr(),m),rg}const Cl=void 0;var Zv=["en",[["a","p"],["AM","PM"],Cl],[["AM","PM"],Cl,Cl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cl,"{1} 'at' {0}",Cl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let nu={};function ly(n){const r=function m0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const u=r.split("-")[0];if(o=hy(u),o)return o;if("en"===u)return Zv;throw new Ye(701,!1)}function dy(n){return ly(n)[jn.PluralCase]}function hy(n){return n in nu||(nu[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),nu[n]}var jn=(()=>((jn=jn||{})[jn.LocaleId=0]="LocaleId",jn[jn.DayPeriodsFormat=1]="DayPeriodsFormat",jn[jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",jn[jn.DaysFormat=3]="DaysFormat",jn[jn.DaysStandalone=4]="DaysStandalone",jn[jn.MonthsFormat=5]="MonthsFormat",jn[jn.MonthsStandalone=6]="MonthsStandalone",jn[jn.Eras=7]="Eras",jn[jn.FirstDayOfWeek=8]="FirstDayOfWeek",jn[jn.WeekendRange=9]="WeekendRange",jn[jn.DateFormat=10]="DateFormat",jn[jn.TimeFormat=11]="TimeFormat",jn[jn.DateTimeFormat=12]="DateTimeFormat",jn[jn.NumberSymbols=13]="NumberSymbols",jn[jn.NumberFormats=14]="NumberFormats",jn[jn.CurrencyCode=15]="CurrencyCode",jn[jn.CurrencySymbol=16]="CurrencySymbol",jn[jn.CurrencyName=17]="CurrencyName",jn[jn.Currencies=18]="Currencies",jn[jn.Directionality=19]="Directionality",jn[jn.PluralCase=20]="PluralCase",jn[jn.ExtraData=21]="ExtraData",jn))();const oh="en-US";let og=oh;function n_(n,r,o,u,c){if(n=ve(n),Array.isArray(n))for(let h=0;h<n.length;h++)n_(n[h],r,o,u,c);else{const h=qn(),m=gt();let C=fa(n)?n:ve(n.provide),S=_c(n);const L=Rr(),Z=1048575&L.providerIndexes,oe=L.directiveStart,Ce=L.providerIndexes>>20;if(fa(n)||!n.multi){const Ge=new no(S,c,wc),_t=i_(C,r,c?Z:Z+Ce,oe);-1===_t?(We(Zt(L,m),h,C),r_(h,n,r.length),r.push(C),L.directiveStart++,L.directiveEnd++,c&&(L.providerIndexes+=1048576),o.push(Ge),m.push(Ge)):(o[_t]=Ge,m[_t]=Ge)}else{const Ge=i_(C,r,Z+Ce,oe),_t=i_(C,r,Z,Z+Ce),Ut=Ge>=0&&o[Ge],en=_t>=0&&o[_t];if(c&&!en||!c&&!Ut){We(Zt(L,m),h,C);const bn=function Bw(n,r,o,u,c){const h=new no(n,o,wc);return h.multi=[],h.index=r,h.componentProviders=0,P0(h,c,u&&!o),h}(c?Uw:Vw,o.length,c,u,S);!c&&en&&(o[_t].providerFactory=bn),r_(h,n,r.length,0),r.push(C),L.directiveStart++,L.directiveEnd++,c&&(L.providerIndexes+=1048576),o.push(bn),m.push(bn)}else r_(h,n,Ge>-1?Ge:_t,P0(o[c?_t:Ge],S,!c&&u));!c&&u&&en&&o[_t].componentProviders++}}}function r_(n,r,o,u){const c=fa(r),h=function wd(n){return!!n.useClass}(r);if(c||h){const S=(h?ve(r.useClass):r).prototype.ngOnDestroy;if(S){const L=n.destroyHooks||(n.destroyHooks=[]);if(!c&&r.multi){const Z=L.indexOf(o);-1===Z?L.push(o,[u,S]):L[Z+1].push(u,S)}else L.push(o,S)}}}function P0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,u){for(let c=o;c<u;c++)if(r[c]===n)return c;return-1}function Vw(n,r,o,u){return s_(this.multi,[])}function Uw(n,r,o,u){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,C=oa(o,o[1],this.providerFactory.index,u);h=C.slice(0,m),s_(c,h);for(let S=m;S<C.length;S++)h.push(C[S])}else h=[],s_(c,h);return h}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function O0(n,r=[]){return o=>{o.providersResolver=(u,c)=>function Lw(n,r,o){const u=qn();if(u.firstCreatePass){const c=Nr(n);n_(o,u.data,u.blueprint,c,!0),n_(r,u.data,u.blueprint,c,!1)}}(u,c?c(n):n,r)}}class Sf{}class N0{}function jw(n,r){return new k0(n,r??null)}class k0 extends Sf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kp(this);const u=Ot(r);this._bootstrapComponents=Oo(u.bootstrap),this._r3Injector=Fh(r,o,[{provide:Sf,useValue:this},{provide:Jc,useValue:this.componentFactoryResolver}],te(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class o_ extends N0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class $w extends Sf{constructor(r,o,u){super(),this.componentFactoryResolver=new kp(this),this.instance=null;const c=new Wf([...r,{provide:Sf,useValue:this},{provide:Jc,useValue:this.componentFactoryResolver}],o||Id(),u,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function a_(n,r,o=null){return new $w(n,r,o).injector}let Hw=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Gf(0,o.type),c=u.length>0?a_([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=$t({token:n,providedIn:"environment",factory:()=>new n(Vi(Zc))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get(Hw).getOrCreateStandaloneInjector(n)}function H0(n,r,o){const u=mi()+n,c=gt();return c[u]===tr?Xa(c,u,o?r.call(o):r()):function pl(n,r){return n[r]}(c,u)}function G0(n,r,o,u){return z0(gt(),mi(),n,r,o,u)}function cg(n,r){const o=n[r];return o===tr?void 0:o}function z0(n,r,o,u,c,h){const m=r+o;return zs(n,m,c)?Xa(n,m+1,h?u.call(h,c):u(c)):cg(n,m+1)}function Y0(n,r){const o=qn();let u;const c=n+22;o.firstCreatePass?(u=function oI(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=li(u.type)),m=sr(wc);try{const C=Vn(!1),S=h();return Vn(C),function ff(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,gt(),c,S),S}finally{sr(m)}}function Q0(n,r,o){const u=n+22,c=gt(),h=ki(c,u);return lg(c,u)?z0(c,mi(),r,h.transform,o,h):h.transform(o)}function J0(n,r,o,u){const c=n+22,h=gt(),m=ki(h,c);return lg(h,c)?function W0(n,r,o,u,c,h,m){const C=r+o;return Du(n,C,c,h)?Xa(n,C+2,m?u.call(m,c,h):u(c,h)):cg(n,C+2)}(h,mi(),r,m.transform,o,u,m):m.transform(o,u)}function lg(n,r){return n[1].data[r].pure}function c_(n){return r=>{setTimeout(n,void 0,r)}}const Pc=class lI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let c=r,h=o||(()=>null),m=u;if(r&&"object"==typeof r){const S=r;c=S.next?.bind(S),h=S.error?.bind(S),m=S.complete?.bind(S)}this.__isAsync&&(h=c_(h),c&&(c=c_(c)),m&&(m=c_(m)));const C=super.subscribe({next:c,error:h,complete:m});return r instanceof F.w0&&r.add(C),C}};function dI(){return this._results[fl()]()}class l_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=fl(),u=l_.prototype;u[o]||(u[o]=dI)}get changes(){return this._changes||(this._changes=new Pc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const c=Ci(r);(this._changesDetected=!function Ga(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let c=n[u],h=r[u];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=dg,fI=class extends hI{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,c=Ld(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(u)),bc(u,c,r),new Hd(c)}};function pI(){return _y(Rr(),gt())}function _y(n,r){return 4&n.type?new fI(r,n,Xc(n,r)):null}let Ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return tE(Rr(),gt())}const mI=Ey,X0=class extends mI{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){const r=Bt(this._hostTNode,this._hostLView);if(fr(r)){const o=_n(r,this._hostLView),u=Qn(r);return new ii(o[1].data[u+8],o)}return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=eE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let c,h;"number"==typeof u?c=u:null!=u&&(c=u.index,h=u.injector);const m=r.createEmbeddedView(o||{},h);return this.insert(m,c),m}createComponent(r,o,u,c,h){const m=r&&!function io(n){return"function"==typeof n}(r);let C;if(m)C=o;else{const oe=o||{};C=oe.index,u=oe.injector,c=oe.projectableNodes,h=oe.environmentInjector||oe.ngModuleRef}const S=m?r:new Gl(K(r)),L=u||this.parentInjector;if(!h&&null==S.ngModule){const Ce=(m?L:this.parentInjector).get(Zc,null);Ce&&(h=Ce)}const Z=S.create(L,c,void 0,h);return this.insert(Z.hostView,C),Z}insert(r,o){const u=r._lView,c=u[1];if(function Qs(n){return jr(n[3])}(u)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const oe=u[3],Ce=new X0(oe,oe[6],oe[3]);Ce.detach(Ce.indexOf(r))}}const h=this._adjustIndex(o),m=this._lContainer;!function vo(n,r,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=r),u<h-10?(r[4]=o[c],iu(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const m=r[17];null!==m&&o!==m&&function Hs(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(m,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(c,u,m,h);const C=Hu(h,m),S=u[11],L=cd(S,m[7]);return null!==L&&function Qt(n,r,o,u,c,h){u[0]=c,u[6]=r,Ml(n,u,o,1,c,h)}(c,m[6],S,u,L,C),r.attachToViewContainerRef(),iu(d_(m),h,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=eE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=Ms(this._lContainer,o);u&&($s(d_(this._lContainer),o),Hc(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=Ms(this._lContainer,o);return u&&null!=$s(d_(this._lContainer),o)?new Hd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function eE(n){return n[8]}function d_(n){return n[8]||(n[8]=[])}function tE(n,r){let o;const u=r[n.index];if(jr(u))o=u;else{let c;if(8&n.type)c=mr(u);else{const h=r[11];c=h.createComment("");const m=hi(n,r);Za(h,cd(h,m),c,function fg(n,r){return n.nextSibling(r)}(h,m),!1)}r[n.index]=o=tf(u,r,c,n),$l(r,o)}return new X0(o,n,r)}class h_{constructor(r){this.queryList=r,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,c=[];for(let h=0;h<u;h++){const m=o.getByIndex(h);c.push(this.queries[m.indexInDeclarationView].clone())}return new f_(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==lE(r,o).matches&&this.queries[o].setDirty()}}class nE{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class p_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(r,c);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new p_(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class g_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new g_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(r,o,_I(o,h)),this.matchTNodeWithReadOption(r,o,Ba(o,r,h,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Ba(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===el||c===Ey||c===dg&&4&o.type)this.addMatch(o.index,-2);else{const h=Ba(o,r,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function _I(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function wI(n,r,o,u){return-1===o?function EI(n,r){return 11&n.type?Xc(n,r):4&n.type?_y(n,r):null}(r,n):-2===o?function II(n,r,o){return o===el?Xc(r,n):o===dg?_y(r,n):o===Ey?tE(r,n):void 0}(n,r,u):oa(n,n[1],o,r)}function rE(n,r,o,u){const c=r[19].queries[u];if(null===c.matches){const h=n.data,m=o.matches,C=[];for(let S=0;S<m.length;S+=2){const L=m[S];C.push(L<0?null:wI(r,h[L],m[S+1],o.metadata.read))}c.matches=C}return c.matches}function m_(n,r,o,u){const c=n.queries.getByIndex(o),h=c.matches;if(null!==h){const m=rE(n,r,c,o);for(let C=0;C<h.length;C+=2){const S=h[C];if(S>0)u.push(m[C/2]);else{const L=h[C+1],Z=r[-S];for(let oe=10;oe<Z.length;oe++){const Ce=Z[oe];Ce[17]===Ce[3]&&m_(Ce[1],Ce,L,u)}if(null!==Z[9]){const oe=Z[9];for(let Ce=0;Ce<oe.length;Ce++){const Ge=oe[Ce];m_(Ge[1],Ge,L,u)}}}}}return u}function iE(n){const r=gt(),o=qn(),u=Ao();Fi(u+1);const c=lE(o,u);if(n.dirty&&function ya(n){return 4==(4&n[2])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const h=c.crossesNgTemplate?m_(o,r,u,[]):rE(o,r,c,u);n.reset(h,qf),n.notifyOnChanges()}return!0}return!1}function sE(n,r,o){const u=qn();u.firstCreatePass&&(cE(u,new nE(n,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),uE(u,gt(),r)}function oE(n,r,o,u){const c=qn();if(c.firstCreatePass){const h=Rr();cE(c,new nE(r,o,u),h.index),function CI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(c,n),2==(2&o)&&(c.staticContentQueries=!0)}uE(c,gt(),o)}function aE(){return function DI(n,r){return n[19].queries[r].queryList}(gt(),Ao())}function uE(n,r,o){const u=new l_(4==(4&o));Yh(n,r,u,u.destroy),null===r[19]&&(r[19]=new f_),r[19].queries.push(new h_(u))}function cE(n,r,o){null===n.queries&&(n.queries=new p_),n.queries.track(new g_(r,o))}function lE(n,r){return n.queries.getByIndex(r)}function Iy(...n){}const ME=new Ar("Application Initializer");let Dy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Iy,this.reject=Iy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Zd(h))o.push(h);else if(mf(h)){const m=new Promise((C,S)=>{h.subscribe({complete:C,error:S})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Vi(ME,8))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xE=new Ar("AppId",{providedIn:"root",factory:function RE(){return`${w_()}${w_()}${w_()}`}});function w_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PE=new Ar("Platform Initializer"),zI=new Ar("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),OE=new Ar("appBootstrapListener");let WI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cy=new Ar("LocaleId",{providedIn:"root",factory:()=>Fc(Cy,Ct.Optional|Ct.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||oh}()}),qI=new Ar("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let YI=(()=>{class n{compileModuleSync(o){return new o_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=Oo(Ot(o).declarations).reduce((m,C)=>{const S=K(C);return S&&m.push(new Gl(S)),m},[]);return new ZI(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function I_(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Au{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pc(!1),this.onMicrotaskEmpty=new Pc(!1),this.onStable=new Pc(!1),this.onError=new Pc(!1),typeof Zone>"u")throw new Ye(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function eD(){let n=xn.requestAnimationFrame,r=xn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rD(n){const r=()=>{!function nD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,C_(n),n.isCheckStableRunning=!0,D_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),C_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,m,C)=>{try{return FE(n),o.invokeTask(c,h,m,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),LE(n)}},onInvoke:(o,u,c,h,m,C,S)=>{try{return FE(n),o.invoke(c,h,m,C,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),LE(n)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,C_(n),D_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Au.isInAngularZone())throw new Ye(909,!1)}static assertNotInAngularZone(){if(Au.isInAngularZone())throw new Ye(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,r,tD,Iy,Iy);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const tD={};function D_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function C_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function FE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function LE(n){n._nesting--,D_(n)}class iD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pc,this.onMicrotaskEmpty=new Pc,this.onStable=new Pc,this.onError=new Pc}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,c){return r.apply(o,u)}}const VE=new Ar(""),UE=new Ar("");let b_,sD=(()=>{class n{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function oD(n){b_=n}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Au.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return n.\u0275fac=function(o){return new(o||n)(Vi(Au),Vi(BE),Vi(UE))},n.\u0275prov=$t({token:n,factory:n.\u0275fac}),n})(),BE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return b_?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xl=null;const jE=new Ar("AllowMultipleToken"),T_=new Ar("PlatformDestroyListeners");class cD{constructor(r,o){this.name=r,this.token=o}}function HE(n,r,o=[]){const u=`Platform: ${r}`,c=new Ar(u);return(h=[])=>{let m=A_();if(!m||m.injector.get(jE,!1)){const C=[...o,...h,{provide:c,useValue:!0}];n?n(C):function lD(n){if(Xl&&!Xl.get(jE,!1))throw new Ye(400,!1);Xl=n;const r=n.get(zE);(function $E(n){const r=n.get(PE,null);r&&r.forEach(o=>o())})(n)}(function GE(n=[],r){return Qa.create({name:r,providers:[{provide:bh,useValue:"platform"},{provide:T_,useValue:new Set([()=>Xl=null])},...n]})}(C,u))}return function hD(n){const r=A_();if(!r)throw new Ye(401,!1);return r}()}}function A_(){return Xl?.get(zE)??null}let zE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function KE(n,r){let o;return o="noop"===n?new iD:("zone.js"===n?void 0:n)||new Au(r),o}(u?.ngZone,function WE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Au,useValue:c}];return c.run(()=>{const m=Qa.create({providers:h,parent:this.injector,name:o.moduleType.name}),C=o.create(m),S=C.injector.get(Vl,null);if(!S)throw new Ye(402,!1);return c.runOutsideAngular(()=>{const L=c.onError.subscribe({next:Z=>{S.handleError(Z)}});C.onDestroy(()=>{Ty(this._modules,C),L.unsubscribe()})}),function qE(n,r,o){try{const u=o();return Zd(u)?u.catch(c=>{throw r.runOutsideAngular(()=>n.handleError(c)),c}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(S,c,()=>{const L=C.injector.get(Dy);return L.runInitializers(),L.donePromise.then(()=>(function Xu(n){Be(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Cy,oh)||oh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const c=ZE({},u);return function aD(n,r,o){const u=new o_(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(by);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Ye(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(T_,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Vi(Qa))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function ZE(n,r){return Array.isArray(r)?r.reduce(ZE,n):{...n,...r}}let by=(()=>{class n{constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new B.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),m=new B.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Au.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),L.unsubscribe()}});this.isStable=(0,le.T)(h,m.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const c=o instanceof Wu;if(!this._injector.get(Dy).done)throw!c&&st(o),new Ye(405,false);let m;m=c?o:this._injector.get(Jc).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const C=function uD(n){return n.isBoundToModule}(m)?void 0:this._injector.get(Sf),L=m.create(Qa.NULL,[],u||m.selector,C),Z=L.location.nativeElement,oe=L.injector.get(VE,null);return oe?.registerApplication(Z),L.onDestroy(()=>{this.detachView(L.hostView),Ty(this.components,L),oe?.unregisterApplication(Z)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new Ye(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ty(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(OE,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ty(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ye(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Vi(Au),Vi(Zc),Vi(Vl))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ty(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let QE=!0,JE=!1;function pD(){return JE=!0,QE}function gD(){if(JE)throw new Error("Cannot enable prod mode after platform setup.");QE=!1}let mD=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,o){if(Xr(n)&&!o){const u=ti(n.index,r);return new Hd(u,u)}return 47&n.type?new Hd(r[16],r):null}(Rr(),gt(),16==(16&n))}class nw{constructor(){}supports(r){return zd(r)}create(r){return new CD(r)}}const DD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DD}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<iw(u,c,h)?o:u,C=iw(m,c,h),S=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{h||(h=[]);const L=C-c,Z=S-c;if(L!=Z){for(let Ce=0;Ce<L;Ce++){const Ge=Ce<h.length?h[Ce]:h[Ce]=0,_t=Ge+Ce;Z<=_t&&_t<L&&(h[Ce]=Ge+1)}h[m.previousIndex]=Z-L}}C!==S&&r(m,C,S)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!zd(r))throw new Ye(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,h,m,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],m=this._trackByFn(C,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,C)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,C),u=!0),o=o._next}else c=0,function jp(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[fl()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,C=>{m=this._trackByFn(c,C),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,C,m,c)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,c){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,c)):r=this._addAfter(new bD(o,u),h,c),r}_verifyReinsertion(r,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?r=this._reinsertAfter(h,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,h=r._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const c=null===o?this._itHead:o._next;return r._next=c,r._prev=o,null===c?this._itTail=r:c._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new rw),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class bD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class rw{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new TD,this.map.set(o,u)),u.add(r)}get(r,o){const c=this.map.get(r);return c?c.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iw(n,r,o){const u=n.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+r+c}class sw{constructor(){}supports(r){return r instanceof Map||Wd(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Wd(r)))throw new Ye(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,o);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const u=new SD(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class SD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ow(){return new P_([new nw])}let P_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||ow()),deps:[[n,new vi,new Ir]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Ye(901,!1)}}return n.\u0275prov=$t({token:n,providedIn:"root",factory:ow}),n})();function aw(){return new O_([new sw])}let O_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||aw()),deps:[[n,new vi,new Ir]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Ye(901,!1)}}return n.\u0275prov=$t({token:n,providedIn:"root",factory:aw}),n})();const RD=HE(null,"core",[]);let PD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Vi(by))},n.\u0275mod=Fe({type:n}),n.\u0275inj=qt({}),n})();function OD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(Nt,ke,R)=>{R.d(ke,{EJ:()=>us,F:()=>Ni,Fj:()=>Ze,JJ:()=>Ct,JL:()=>Tn,Kr:()=>Zi,NI:()=>Kr,On:()=>wo,Q7:()=>ho,UX:()=>Us,Wl:()=>X,YN:()=>Vo,_Y:()=>Fs,j3:()=>jo,kI:()=>fe,qQ:()=>cs,sg:()=>Rn,u:()=>di,u5:()=>Fr,wV:()=>cr});var p=R(4650),F=R(6895),B=R(8996),le=R(4128),he=R(4004);let Ee=(()=>{class k{constructor(M,q){this._renderer=M,this._elementRef=q,this.onChange=Qe=>{},this.onTouched=()=>{}}setProperty(M,q){this._renderer.setProperty(this._elementRef.nativeElement,M,q)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),we=(()=>{class k extends Ee{}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const te=new p.OlP("NgValueAccessor"),Se={provide:te,useExisting:(0,p.Gpc)(()=>X),multi:!0};let X=(()=>{class k extends we{writeValue(M){this.setProperty("checked",M)}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(Xt){return q.onChange(Xt.target.checked)})("blur",function(){return q.onTouched()})},features:[p._Bn([Se]),p.qOj]}),k})();const ie={provide:te,useExisting:(0,p.Gpc)(()=>Ze),multi:!0},ut=new p.OlP("CompositionEventMode");let Ze=(()=>{class k extends Ee{constructor(M,q,Qe){super(M,q),this._compositionMode=Qe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ve(){const k=(0,F.q)()?(0,F.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ut,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,q){1&M&&p.NdJ("input",function(Xt){return q._handleInput(Xt.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(Xt){return q._compositionEnd(Xt.target.value)})},features:[p._Bn([ie]),p.qOj]}),k})();function Tt(k){return null==k||("string"==typeof k||Array.isArray(k))&&0===k.length}function Ke(k){return null!=k&&"number"==typeof k.length}const Oe=new p.OlP("NgValidators"),bt=new p.OlP("NgAsyncValidators"),ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fe{static min(P){return et(P)}static max(P){return function Xe(k){return P=>{if(Tt(P.value)||Tt(k))return null;const M=parseFloat(P.value);return!isNaN(M)&&M>k?{max:{max:k,actual:P.value}}:null}}(P)}static required(P){return mt(P)}static requiredTrue(P){return function ot(k){return!0===k.value?null:{required:!0}}(P)}static email(P){return function Te(k){return Tt(k.value)||ft.test(k.value)?null:{email:!0}}(P)}static minLength(P){return function St(k){return P=>Tt(P.value)||!Ke(P.value)?null:P.value.length<k?{minlength:{requiredLength:k,actualLength:P.value.length}}:null}(P)}static maxLength(P){return function Yt(k){return P=>Ke(P.value)&&P.value.length>k?{maxlength:{requiredLength:k,actualLength:P.value.length}}:null}(P)}static pattern(P){return function It(k){if(!k)return Gt;let P,M;return"string"==typeof k?(M="","^"!==k.charAt(0)&&(M+="^"),M+=k,"$"!==k.charAt(k.length-1)&&(M+="$"),P=new RegExp(M)):(M=k.toString(),P=k),q=>{if(Tt(q.value))return null;const Qe=q.value;return P.test(Qe)?null:{pattern:{requiredPattern:M,actualValue:Qe}}}}(P)}static nullValidator(P){return null}static compose(P){return qe(P)}static composeAsync(P){return yt(P)}}function et(k){return P=>{if(Tt(P.value)||Tt(k))return null;const M=parseFloat(P.value);return!isNaN(M)&&M<k?{min:{min:k,actual:P.value}}:null}}function mt(k){return Tt(k.value)?{required:!0}:null}function Gt(k){return null}function Rt(k){return null!=k}function ar(k){return(0,p.QGY)(k)?(0,B.D)(k):k}function Ve(k){let P={};return k.forEach(M=>{P=null!=M?{...P,...M}:P}),0===Object.keys(P).length?null:P}function Le(k,P){return P.map(M=>M(k))}function Be(k){return k.map(P=>function ze(k){return!k.validate}(P)?P:M=>P.validate(M))}function qe(k){if(!k)return null;const P=k.filter(Rt);return 0==P.length?null:function(M){return Ve(Le(M,P))}}function ct(k){return null!=k?qe(Be(k)):null}function yt(k){if(!k)return null;const P=k.filter(Rt);return 0==P.length?null:function(M){const q=Le(M,P).map(ar);return(0,le.D)(q).pipe((0,he.U)(Ve))}}function ht(k){return null!=k?yt(Be(k)):null}function $t(k,P){return null===k?[P]:Array.isArray(k)?[...k,P]:[k,P]}function Mt(k){return k._rawValidators}function qt(k){return k._rawAsyncValidators}function tn(k){return k?Array.isArray(k)?k:[k]:[]}function hn(k,P){return Array.isArray(k)?k.includes(P):k===P}function Nn(k,P){const M=tn(P);return tn(k).forEach(Qe=>{hn(M,Qe)||M.push(Qe)}),M}function ir(k,P){return tn(P).filter(M=>!hn(k,M))}class Wt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=ct(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=ht(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,M){return!!this.control&&this.control.hasError(P,M)}getError(P,M){return this.control?this.control.getError(P,M):null}}class cn extends Wt{get formDirective(){return null}get path(){return null}}class Mn extends Wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wn{constructor(P){this._cd=P}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ct=(()=>{class k extends Wn{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Mn,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,q){2&M&&p.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)},features:[p.qOj]}),k})(),Tn=(()=>{class k extends Wn{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(cn,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,q){2&M&&p.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)("ng-submitted",q.isSubmitted)},features:[p.qOj]}),k})();const mn="VALID",yn="INVALID",Ne="PENDING",vt="DISABLED";function me(k){return(it(k)?k.validators:k)||null}function H(k){return Array.isArray(k)?ct(k):k||null}function ne(k,P){return(it(P)?P.asyncValidators:k)||null}function Fe(k){return Array.isArray(k)?ht(k):k||null}function it(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}function ae(k,P,M){const q=k.controls;if(!(P?Object.keys(q):q).length)throw new p.vHH(1e3,"");if(!q[M])throw new p.vHH(1001,"")}function ce(k,P,M){k._forEachChild((q,Qe)=>{if(void 0===M[Qe])throw new p.vHH(1002,"")})}class Y{constructor(P,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=M,this._composedValidatorFn=H(this._rawValidators),this._composedAsyncValidatorFn=Fe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===mn}get invalid(){return this.status===yn}get pending(){return this.status==Ne}get disabled(){return this.status===vt}get enabled(){return this.status!==vt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=H(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=Fe(P)}addValidators(P){this.setValidators(Nn(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(Nn(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(ir(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(ir(P,this._rawAsyncValidators))}hasValidator(P){return hn(this._rawValidators,P)}hasAsyncValidator(P){return hn(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=Ne,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const M=this._parentMarkedDirty(P.onlySelf);this.status=vt,this.errors=null,this._forEachChild(q=>{q.disable({...P,onlySelf:!0})}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...P,skipPristineCheck:M}),this._onDisabledChange.forEach(q=>q(!0))}enable(P={}){const M=this._parentMarkedDirty(P.onlySelf);this.status=mn,this._forEachChild(q=>{q.enable({...P,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors({...P,skipPristineCheck:M}),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}getRawValue(){return this.value}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mn||this.status===Ne)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vt:mn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=Ne,this._hasOwnPendingAsyncValidator=!0;const M=ar(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,M={}){this.errors=P,this._updateControlsErrors(!1!==M.emitEvent)}get(P){let M=P;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((q,Qe)=>q&&q._find(Qe),this)}getError(P,M){const q=M?this.get(M):this;return q&&q.errors?q.errors[P]:null}hasError(P,M){return!!this.getError(P,M)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?vt:this.errors?yn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ne)?Ne:this._anyControlsHaveStatus(yn)?yn:mn}_anyControlsHaveStatus(P){return this._anyControls(M=>M.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){it(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(P){return null}}class K extends Y{constructor(P,M,q){super(me(M),ne(q,M)),this.controls=P,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,M){return this.controls[P]?this.controls[P]:(this.controls[P]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(P,M,q={}){this.registerControl(P,M),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(P,M={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(P,M,q={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],M&&this.registerControl(P,M),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,M={}){ce(this,0,P),Object.keys(P).forEach(q=>{ae(this,!0,q),this.controls[q].setValue(P[q],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(P,M={}){null!=P&&(Object.keys(P).forEach(q=>{const Qe=this.controls[q];Qe&&Qe.patchValue(P[q],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(P={},M={}){this._forEachChild((q,Qe)=>{q.reset(P[Qe],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(P,M,q)=>(P[q]=M.getRawValue(),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(M,q)=>!!q._syncPendingControls()||M);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){Object.keys(this.controls).forEach(M=>{const q=this.controls[M];q&&P(q,M)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const[M,q]of Object.entries(this.controls))if(this.contains(M)&&P(q))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,q,Qe)=>((q.enabled||this.disabled)&&(M[Qe]=q.value),M))}_reduceChildren(P,M){let q=P;return this._forEachChild((Qe,Xt)=>{q=M(q,Qe,Xt)}),q}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(P){return this.controls.hasOwnProperty(P)?this.controls[P]:null}}class st extends K{}function Jt(k,P){return[...P.path,k]}function se(k,P){je(k,P),P.valueAccessor.writeValue(k.value),k.disabled&&P.valueAccessor.setDisabledState?.(!0),function ln(k,P){P.valueAccessor.registerOnChange(M=>{k._pendingValue=M,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&Re(k,P)})}(k,P),function Et(k,P){const M=(q,Qe)=>{P.valueAccessor.writeValue(q),Qe&&P.viewToModelUpdate(q)};k.registerOnChange(M),P._registerOnDestroy(()=>{k._unregisterOnChange(M)})}(k,P),function Pe(k,P){P.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&Re(k,P),"submit"!==k.updateOn&&k.markAsTouched()})}(k,P),function Me(k,P){if(P.valueAccessor.setDisabledState){const M=q=>{P.valueAccessor.setDisabledState(q)};k.registerOnDisabledChange(M),P._registerOnDestroy(()=>{k._unregisterOnDisabledChange(M)})}}(k,P)}function ue(k,P,M=!0){const q=()=>{};P.valueAccessor&&(P.valueAccessor.registerOnChange(q),P.valueAccessor.registerOnTouched(q)),Pt(k,P),k&&(P._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function ee(k,P){k.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(P)})}function je(k,P){const M=Mt(k);null!==P.validator?k.setValidators($t(M,P.validator)):"function"==typeof M&&k.setValidators([M]);const q=qt(k);null!==P.asyncValidator?k.setAsyncValidators($t(q,P.asyncValidator)):"function"==typeof q&&k.setAsyncValidators([q]);const Qe=()=>k.updateValueAndValidity();ee(P._rawValidators,Qe),ee(P._rawAsyncValidators,Qe)}function Pt(k,P){let M=!1;if(null!==k){if(null!==P.validator){const Qe=Mt(k);if(Array.isArray(Qe)&&Qe.length>0){const Xt=Qe.filter(zn=>zn!==P.validator);Xt.length!==Qe.length&&(M=!0,k.setValidators(Xt))}}if(null!==P.asyncValidator){const Qe=qt(k);if(Array.isArray(Qe)&&Qe.length>0){const Xt=Qe.filter(zn=>zn!==P.asyncValidator);Xt.length!==Qe.length&&(M=!0,k.setAsyncValidators(Xt))}}}const q=()=>{};return ee(P._rawValidators,q),ee(P._rawAsyncValidators,q),M}function Re(k,P){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function pt(k,P){je(k,P)}function xr(k,P){if(!k.hasOwnProperty("model"))return!1;const M=k.model;return!!M.isFirstChange()||!Object.is(P,M.currentValue)}function Wr(k,P){k._syncPendingControls(),P.forEach(M=>{const q=M.control;"submit"===q.updateOn&&q._pendingChange&&(M.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}function Or(k,P){if(!P)return null;let M,q,Qe;return Array.isArray(P),P.forEach(Xt=>{Xt.constructor===Ze?M=Xt:function Hr(k){return Object.getPrototypeOf(k.constructor)===we}(Xt)?q=Xt:Qe=Xt}),Qe||q||M||null}const ui={provide:cn,useExisting:(0,p.Gpc)(()=>Ni)},ks=(()=>Promise.resolve())();let Ni=(()=>{class k extends cn{constructor(M,q){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new K({},ct(M),ht(q))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(M){ks.then(()=>{const q=this._findContainer(M.path);M.control=q.registerControl(M.name,M.control),se(M.control,M),M.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(M)})}getControl(M){return this.form.get(M.path)}removeControl(M){ks.then(()=>{const q=this._findContainer(M.path);q&&q.removeControl(M.name),this._directives.delete(M)})}addFormGroup(M){ks.then(()=>{const q=this._findContainer(M.path),Qe=new K({});pt(Qe,M),q.registerControl(M.name,Qe),Qe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(M){ks.then(()=>{const q=this._findContainer(M.path);q&&q.removeControl(M.name)})}getFormGroup(M){return this.form.get(M.path)}updateModel(M,q){ks.then(()=>{this.form.get(M.path).setValue(q)})}setValue(M){this.control.setValue(M)}onSubmit(M){return this.submitted=!0,Wr(this.form,this._directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(M){return M.pop(),M.length?this.form.get(M):this.form}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Oe,10),p.Y36(bt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(M,q){1&M&&p.NdJ("submit",function(Xt){return q.onSubmit(Xt)})("reset",function(){return q.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ui]),p.qOj]}),k})();function br(k,P){const M=k.indexOf(P);M>-1&&k.splice(M,1)}function Ki(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}const Kr=class extends Y{constructor(P=null,M,q){super(me(M),ne(q,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),it(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=Ki(P)?P.value:P)}setValue(P,M={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(P,M={}){this.setValue(P,M)}reset(P=this.defaultValue,M={}){this._applyFormState(P),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){br(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){br(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){Ki(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}},Bi={provide:Mn,useExisting:(0,p.Gpc)(()=>wo)},qs=(()=>Promise.resolve())();let wo=(()=>{class k extends Mn{constructor(M,q,Qe,Xt,zn){super(),this._changeDetectorRef=zn,this.control=new Kr,this._registered=!1,this.update=new p.vpe,this._parent=M,this._setValidators(q),this._setAsyncValidators(Qe),this.valueAccessor=Or(0,Xt)}ngOnChanges(M){if(this._checkForErrors(),!this._registered||"name"in M){if(this._registered&&(this._checkName(),this.formDirective)){const q=M.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in M&&this._updateDisabled(M),xr(M,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){se(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(M){qs.then(()=>{this.control.setValue(M,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(M){const q=M.isDisabled.currentValue,Qe=0!==q&&(0,p.D6c)(q);qs.then(()=>{Qe&&!this.control.disabled?this.control.disable():!Qe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(M){return this._parent?Jt(M,this._parent):[M]}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(cn,9),p.Y36(Oe,10),p.Y36(bt,10),p.Y36(te,10),p.Y36(p.sBO,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Bi]),p.qOj,p.TTD]}),k})(),Fs=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})();const ma={provide:te,useExisting:(0,p.Gpc)(()=>cr),multi:!0};let cr=(()=>{class k extends we{writeValue(M){this.setProperty("value",M??"")}registerOnChange(M){this.onChange=q=>{M(""==q?null:parseFloat(q))}}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("input",function(Xt){return q.onChange(Xt.target.value)})("blur",function(){return q.onTouched()})},features:[p._Bn([ma]),p.qOj]}),k})(),co=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const xt=new p.OlP("NgModelWithFormControlWarning"),Zn={provide:cn,useExisting:(0,p.Gpc)(()=>Rn)};let Rn=(()=>{class k extends cn{constructor(M,q){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(M),this._setAsyncValidators(q)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const q=this.form.get(M.path);return se(q,M),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),q}getControl(M){return this.form.get(M.path)}removeControl(M){ue(M.control||null,M,!1),function Ns(k,P){const M=k.indexOf(P);M>-1&&k.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,q){this.form.get(M.path).setValue(q)}onSubmit(M){return this.submitted=!0,Wr(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const q=M.control,Qe=this.form.get(M.path);q!==Qe&&(ue(q||null,M),(k=>k instanceof Kr)(Qe)&&(se(Qe,M),M.control=Qe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const q=this.form.get(M.path);pt(q,M),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const q=this.form.get(M.path);q&&function vn(k,P){return Pt(k,P)}(q,M)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){je(this.form,this),this._oldForm&&Pt(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Oe,10),p.Y36(bt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(M,q){1&M&&p.NdJ("submit",function(Xt){return q.onSubmit(Xt)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Zn]),p.qOj,p.TTD]}),k})();const li={provide:Mn,useExisting:(0,p.Gpc)(()=>di)};let di=(()=>{class k extends Mn{constructor(M,q,Qe,Xt,zn){super(),this._ngModelWarningConfig=zn,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(q),this._setAsyncValidators(Qe),this.valueAccessor=Or(0,Xt)}set isDisabled(M){}ngOnChanges(M){this._added||this._setUpControl(),xr(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return Jt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(M){return new(M||k)(p.Y36(cn,13),p.Y36(Oe,10),p.Y36(bt,10),p.Y36(te,10),p.Y36(xt,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([li]),p.qOj,p.TTD]}),k})();const ea={provide:te,useExisting:(0,p.Gpc)(()=>us),multi:!0};function as(k,P){return null==k?`${P}`:(P&&"object"==typeof P&&(P="Object"),`${k}: ${P}`.slice(0,50))}let us=(()=>{class k extends we{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const Qe=as(this._getOptionId(M),M);this.setProperty("value",Qe)}registerOnChange(M){this.onChange=q=>{this.value=this._getOptionValue(q),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q),M))return q;return null}_getOptionValue(M){const q=function Lo(k){return k.split(":")[0]}(M);return this._optionMap.has(q)?this._optionMap.get(q):M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(Xt){return q.onChange(Xt.target.value)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([ea]),p.qOj]}),k})(),Vo=(()=>{class k{constructor(M,q,Qe){this._element=M,this._renderer=q,this._select=Qe,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(as(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(us,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const Co={provide:te,useExisting:(0,p.Gpc)(()=>kr),multi:!0};function Ls(k,P){return null==k?`${P}`:("string"==typeof P&&(P=`'${P}'`),P&&"object"==typeof P&&(P="Object"),`${k}: ${P}`.slice(0,50))}let kr=(()=>{class k extends we{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let q;if(this.value=M,Array.isArray(M)){const Qe=M.map(Xt=>this._getOptionId(Xt));q=(Xt,zn)=>{Xt._setSelected(Qe.indexOf(zn.toString())>-1)}}else q=(Qe,Xt)=>{Qe._setSelected(!1)};this._optionMap.forEach(q)}registerOnChange(M){this.onChange=q=>{const Qe=[],Xt=q.selectedOptions;if(void 0!==Xt){const zn=Xt;for(let Xs=0;Xs<zn.length;Xs++){const mi=this._getOptionValue(zn[Xs].value);Qe.push(mi)}}else{const zn=q.options;for(let Xs=0;Xs<zn.length;Xs++){const ws=zn[Xs];if(ws.selected){const mi=this._getOptionValue(ws.value);Qe.push(mi)}}}this.value=Qe,M(Qe)}}_registerOption(M){const q=(this._idCounter++).toString();return this._optionMap.set(q,M),q}_getOptionId(M){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q)._value,M))return q;return null}_getOptionValue(M){const q=function qi(k){return k.split(":")[0]}(M);return this._optionMap.has(q)?this._optionMap.get(q)._value:M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(Xt){return q.onChange(Xt.target)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Co]),p.qOj]}),k})(),Zi=(()=>{class k{constructor(M,q,Qe){this._element=M,this._renderer=q,this._select=Qe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue(Ls(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue(Ls(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(kr,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();let lo=(()=>{class k{constructor(){this._validator=Gt}ngOnChanges(M){if(this.inputName in M){const q=this.normalizeInput(M[this.inputName].currentValue);this._enabled=this.enabled(q),this._validator=this._enabled?this.createValidator(q):Gt,this._onChange&&this._onChange()}}validate(M){return this._validator(M)}registerOnValidatorChange(M){this._onChange=M}enabled(M){return null!=M}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=p.lG2({type:k,features:[p.TTD]}),k})();const Ys={provide:Oe,useExisting:(0,p.Gpc)(()=>cs),multi:!0};let cs=(()=>{class k extends lo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=M=>function _s(k){return"number"==typeof k?k:parseFloat(k)}(M),this.createValidator=M=>et(M)}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(M,q){2&M&&p.uIk("min",q._enabled?q.min:null)},inputs:{min:"min"},features:[p._Bn([Ys]),p.qOj]}),k})();const ji={provide:Oe,useExisting:(0,p.Gpc)(()=>ho),multi:!0};let ho=(()=>{class k extends lo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=M=>mt}enabled(M){return M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(M,q){2&M&&p.uIk("required",q._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([ji]),p.qOj]}),k})(),Ei=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[co]}),k})(),Fr=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Ei]}),k})(),Us=(()=>{class k{static withConfig(M){return{ngModule:k,providers:[{provide:xt,useValue:M.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[Ei]}),k})();class To extends Y{constructor(P,M,q){super(me(M),ne(q,M)),this.controls=P,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[this._adjustIndex(P)]}push(P,M={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(P,M,q={}){this.controls.splice(P,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(P,M={}){let q=this._adjustIndex(P);q<0&&(q=0),this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(P,M,q={}){let Qe=this._adjustIndex(P);Qe<0&&(Qe=0),this.controls[Qe]&&this.controls[Qe]._registerOnCollectionChange(()=>{}),this.controls.splice(Qe,1),M&&(this.controls.splice(Qe,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,M={}){ce(this,0,P),P.forEach((q,Qe)=>{ae(this,!1,Qe),this.at(Qe).setValue(q,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(P,M={}){null!=P&&(P.forEach((q,Qe)=>{this.at(Qe)&&this.at(Qe).patchValue(q,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(P=[],M={}){this._forEachChild((q,Qe)=>{q.reset(P[Qe],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(P=>P.getRawValue())}clear(P={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_adjustIndex(P){return P<0?P+this.length:P}_syncPendingControls(){let P=this.controls.reduce((M,q)=>!!q._syncPendingControls()||M,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){this.controls.forEach((M,q)=>{P(M,q)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(M=>M.enabled&&P(M))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}_find(P){return this.at(P)??null}}function gt(k){return!!k&&(void 0!==k.asyncValidators||void 0!==k.validators||void 0!==k.updateOn)}let qn=(()=>{class k{constructor(){this.useNonNullable=!1}get nonNullable(){const M=new k;return M.useNonNullable=!0,M}group(M,q=null){const Qe=this._reduceControls(M);let Xt={};return gt(q)?Xt=q:null!==q&&(Xt.validators=q.validator,Xt.asyncValidators=q.asyncValidator),new K(Qe,Xt)}record(M,q=null){const Qe=this._reduceControls(M);return new st(Qe,q)}control(M,q,Qe){let Xt={};return this.useNonNullable?(gt(q)?Xt=q:(Xt.validators=q,Xt.asyncValidators=Qe),new Kr(M,{...Xt,nonNullable:!0})):new Kr(M,q,Qe)}array(M,q,Qe){const Xt=M.map(zn=>this._createControl(zn));return new To(Xt,q,Qe)}_reduceControls(M){const q={};return Object.keys(M).forEach(Qe=>{q[Qe]=this._createControl(M[Qe])}),q}_createControl(M){return M instanceof Kr||M instanceof Y?M:Array.isArray(M)?this.control(M[0],M.length>1?M[1]:null,M.length>2?M[2]:null):this.control(M)}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=p.Yz7({token:k,factory:k.\u0275fac,providedIn:Us}),k})(),jo=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=p.Yz7({token:k,factory:function(){return(0,p.f3M)(qn).nonNullable},providedIn:Us}),k})()},1481:(Nt,ke,R)=>{R.d(ke,{Dx:()=>Pn,b2:()=>Fn,q6:()=>Mr});var p=R(6895),F=R(4650);class B extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends B{static makeCurrent(){(0,p.HT)(new le)}onAndCancel(ue,ee,Me){return ue.addEventListener(ee,Me,!1),()=>{ue.removeEventListener(ee,Me,!1)}}dispatchEvent(ue,ee){ue.dispatchEvent(ee)}remove(ue){ue.parentNode&&ue.parentNode.removeChild(ue)}createElement(ue,ee){return(ee=ee||this.getDefaultDocument()).createElement(ue)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ue){return ue.nodeType===Node.ELEMENT_NODE}isShadowRoot(ue){return ue instanceof DocumentFragment}getGlobalEventTarget(ue,ee){return"window"===ee?window:"document"===ee?ue:"body"===ee?ue.body:null}getBaseHref(ue){const ee=function Ee(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==ee?null:function te(se){we=we||document.createElement("a"),we.setAttribute("href",se);const ue=we.pathname;return"/"===ue.charAt(0)?ue:`/${ue}`}(ee)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(ue){return(0,p.Mx)(document.cookie,ue)}}let we,he=null;const Se=new F.OlP("TRANSITION_ID"),ie=[{provide:F.ip1,useFactory:function X(se,ue,ee){return()=>{ee.get(F.CZH).donePromise.then(()=>{const Me=(0,p.q)(),je=ue.querySelectorAll(`style[ng-transition="${se}"]`);for(let Pt=0;Pt<je.length;Pt++)Me.remove(je[Pt])})}},deps:[Se,p.K0,F.zs3],multi:!0}];let ut=(()=>{class se{build(){return new XMLHttpRequest}}return se.\u0275fac=function(ee){return new(ee||se)},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})();const Ze=new F.OlP("EventManagerPlugins");let Ye=(()=>{class se{constructor(ee,Me){this._zone=Me,this._eventNameToPlugin=new Map,ee.forEach(je=>je.manager=this),this._plugins=ee.slice().reverse()}addEventListener(ee,Me,je){return this._findPluginFor(Me).addEventListener(ee,Me,je)}addGlobalEventListener(ee,Me,je){return this._findPluginFor(Me).addGlobalEventListener(ee,Me,je)}getZone(){return this._zone}_findPluginFor(ee){const Me=this._eventNameToPlugin.get(ee);if(Me)return Me;const je=this._plugins;for(let Pt=0;Pt<je.length;Pt++){const ln=je[Pt];if(ln.supports(ee))return this._eventNameToPlugin.set(ee,ln),ln}throw new Error(`No event manager plugin found for event ${ee}`)}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(Ze),F.LFG(F.R0b))},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})();class Tt{constructor(ue){this._doc=ue}addGlobalEventListener(ue,ee,Me){const je=(0,p.q)().getGlobalEventTarget(this._doc,ue);if(!je)throw new Error(`Unsupported event target ${je} for event ${ee}`);return this.addEventListener(je,ee,Me)}}let Ke=(()=>{class se{constructor(){this._stylesSet=new Set}addStyles(ee){const Me=new Set;ee.forEach(je=>{this._stylesSet.has(je)||(this._stylesSet.add(je),Me.add(je))}),this.onStylesAdded(Me)}onStylesAdded(ee){}getAllStyles(){return Array.from(this._stylesSet)}}return se.\u0275fac=function(ee){return new(ee||se)},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})(),Oe=(()=>{class se extends Ke{constructor(ee){super(),this._doc=ee,this._hostNodes=new Map,this._hostNodes.set(ee.head,[])}_addStylesToHost(ee,Me,je){ee.forEach(Pt=>{const ln=this._doc.createElement("style");ln.textContent=Pt,je.push(Me.appendChild(ln))})}addHost(ee){const Me=[];this._addStylesToHost(this._stylesSet,ee,Me),this._hostNodes.set(ee,Me)}removeHost(ee){const Me=this._hostNodes.get(ee);Me&&Me.forEach(bt),this._hostNodes.delete(ee)}onStylesAdded(ee){this._hostNodes.forEach((Me,je)=>{this._addStylesToHost(ee,je,Me)})}ngOnDestroy(){this._hostNodes.forEach(ee=>ee.forEach(bt))}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(p.K0))},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})();function bt(se){(0,p.q)().remove(se)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fe=/%COMP%/g;function Yt(se,ue,ee){for(let Me=0;Me<ue.length;Me++){let je=ue[Me];Array.isArray(je)?Yt(se,je,ee):(je=je.replace(fe,se),ee.push(je))}return ee}function It(se){return ue=>{if("__ngUnwrap__"===ue)return se;!1===se(ue)&&(ue.preventDefault(),ue.returnValue=!1)}}let Rt=(()=>{class se{constructor(ee,Me,je){this.eventManager=ee,this.sharedStylesHost=Me,this.appId=je,this.rendererByCompId=new Map,this.defaultRenderer=new ar(ee)}createRenderer(ee,Me){if(!ee||!Me)return this.defaultRenderer;switch(Me.encapsulation){case F.ifc.Emulated:{let je=this.rendererByCompId.get(Me.id);return je||(je=new Be(this.eventManager,this.sharedStylesHost,Me,this.appId),this.rendererByCompId.set(Me.id,je)),je.applyToHost(ee),je}case 1:case F.ifc.ShadowDom:return new qe(this.eventManager,this.sharedStylesHost,ee,Me);default:if(!this.rendererByCompId.has(Me.id)){const je=Yt(Me.id,Me.styles,[]);this.sharedStylesHost.addStyles(je),this.rendererByCompId.set(Me.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(Ye),F.LFG(Oe),F.LFG(F.AFp))},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})();class ar{constructor(ue){this.eventManager=ue,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ue,ee){return ee?document.createElementNS(ft[ee]||ee,ue):document.createElement(ue)}createComment(ue){return document.createComment(ue)}createText(ue){return document.createTextNode(ue)}appendChild(ue,ee){(ze(ue)?ue.content:ue).appendChild(ee)}insertBefore(ue,ee,Me){ue&&(ze(ue)?ue.content:ue).insertBefore(ee,Me)}removeChild(ue,ee){ue&&ue.removeChild(ee)}selectRootElement(ue,ee){let Me="string"==typeof ue?document.querySelector(ue):ue;if(!Me)throw new Error(`The selector "${ue}" did not match any elements`);return ee||(Me.textContent=""),Me}parentNode(ue){return ue.parentNode}nextSibling(ue){return ue.nextSibling}setAttribute(ue,ee,Me,je){if(je){ee=je+":"+ee;const Pt=ft[je];Pt?ue.setAttributeNS(Pt,ee,Me):ue.setAttribute(ee,Me)}else ue.setAttribute(ee,Me)}removeAttribute(ue,ee,Me){if(Me){const je=ft[Me];je?ue.removeAttributeNS(je,ee):ue.removeAttribute(`${Me}:${ee}`)}else ue.removeAttribute(ee)}addClass(ue,ee){ue.classList.add(ee)}removeClass(ue,ee){ue.classList.remove(ee)}setStyle(ue,ee,Me,je){je&(F.JOm.DashCase|F.JOm.Important)?ue.style.setProperty(ee,Me,je&F.JOm.Important?"important":""):ue.style[ee]=Me}removeStyle(ue,ee,Me){Me&F.JOm.DashCase?ue.style.removeProperty(ee):ue.style[ee]=""}setProperty(ue,ee,Me){ue[ee]=Me}setValue(ue,ee){ue.nodeValue=ee}listen(ue,ee,Me){return"string"==typeof ue?this.eventManager.addGlobalEventListener(ue,ee,It(Me)):this.eventManager.addEventListener(ue,ee,It(Me))}}function ze(se){return"TEMPLATE"===se.tagName&&void 0!==se.content}class Be extends ar{constructor(ue,ee,Me,je){super(ue),this.component=Me;const Pt=Yt(je+"-"+Me.id,Me.styles,[]);ee.addStyles(Pt),this.contentAttr=function Te(se){return"_ngcontent-%COMP%".replace(fe,se)}(je+"-"+Me.id),this.hostAttr=function St(se){return"_nghost-%COMP%".replace(fe,se)}(je+"-"+Me.id)}applyToHost(ue){super.setAttribute(ue,this.hostAttr,"")}createElement(ue,ee){const Me=super.createElement(ue,ee);return super.setAttribute(Me,this.contentAttr,""),Me}}class qe extends ar{constructor(ue,ee,Me,je){super(ue),this.sharedStylesHost=ee,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Pt=Yt(je.id,je.styles,[]);for(let ln=0;ln<Pt.length;ln++){const Pe=document.createElement("style");Pe.textContent=Pt[ln],this.shadowRoot.appendChild(Pe)}}nodeOrShadowRoot(ue){return ue===this.hostEl?this.shadowRoot:ue}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ue,ee){return super.appendChild(this.nodeOrShadowRoot(ue),ee)}insertBefore(ue,ee,Me){return super.insertBefore(this.nodeOrShadowRoot(ue),ee,Me)}removeChild(ue,ee){return super.removeChild(this.nodeOrShadowRoot(ue),ee)}parentNode(ue){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ue)))}}let ct=(()=>{class se extends Tt{constructor(ee){super(ee)}supports(ee){return!0}addEventListener(ee,Me,je){return ee.addEventListener(Me,je,!1),()=>this.removeEventListener(ee,Me,je)}removeEventListener(ee,Me,je){return ee.removeEventListener(Me,je)}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(p.K0))},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})();const yt=["alt","control","meta","shift"],ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$t={alt:se=>se.altKey,control:se=>se.ctrlKey,meta:se=>se.metaKey,shift:se=>se.shiftKey};let Mt=(()=>{class se extends Tt{constructor(ee){super(ee)}supports(ee){return null!=se.parseEventName(ee)}addEventListener(ee,Me,je){const Pt=se.parseEventName(Me),ln=se.eventCallback(Pt.fullKey,je,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(ee,Pt.domEventName,ln))}static parseEventName(ee){const Me=ee.toLowerCase().split("."),je=Me.shift();if(0===Me.length||"keydown"!==je&&"keyup"!==je)return null;const Pt=se._normalizeKey(Me.pop());let ln="",Pe=Me.indexOf("code");if(Pe>-1&&(Me.splice(Pe,1),ln="code."),yt.forEach(Et=>{const pt=Me.indexOf(Et);pt>-1&&(Me.splice(pt,1),ln+=Et+".")}),ln+=Pt,0!=Me.length||0===Pt.length)return null;const Re={};return Re.domEventName=je,Re.fullKey=ln,Re}static matchEventFullKeyCode(ee,Me){let je=ht[ee.key]||ee.key,Pt="";return Me.indexOf("code.")>-1&&(je=ee.code,Pt="code."),!(null==je||!je)&&(je=je.toLowerCase()," "===je?je="space":"."===je&&(je="dot"),yt.forEach(ln=>{ln!==je&&(0,$t[ln])(ee)&&(Pt+=ln+".")}),Pt+=je,Pt===Me)}static eventCallback(ee,Me,je){return Pt=>{se.matchEventFullKeyCode(Pt,ee)&&je.runGuarded(()=>Me(Pt))}}static _normalizeKey(ee){return"esc"===ee?"escape":ee}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(p.K0))},se.\u0275prov=F.Yz7({token:se,factory:se.\u0275fac}),se})();const Mr=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:p.bD},{provide:F.g9A,useValue:function Wt(){le.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function Mn(){return(0,F.RDi)(document),document},deps:[]}]),Pr=new F.OlP(""),Ct=[{provide:F.rWj,useClass:class ve{addToWindow(ue){F.dqk.getAngularTestability=(Me,je=!0)=>{const Pt=ue.findTestabilityInTree(Me,je);if(null==Pt)throw new Error("Could not find testability for element.");return Pt},F.dqk.getAllAngularTestabilities=()=>ue.getAllTestabilities(),F.dqk.getAllAngularRootElements=()=>ue.getAllRootElements(),F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(Me=>{const je=F.dqk.getAllAngularTestabilities();let Pt=je.length,ln=!1;const Pe=function(Re){ln=ln||Re,Pt--,0==Pt&&Me(ln)};je.forEach(function(Re){Re.whenStable(Pe)})})}findTestabilityInTree(ue,ee,Me){return null==ee?null:ue.getTestability(ee)??(Me?(0,p.q)().isShadowRoot(ee)?this.findTestabilityInTree(ue,ee.host,!0):this.findTestabilityInTree(ue,ee.parentElement,!0):null)}},deps:[]},{provide:F.lri,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]}],Tn=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function cn(){return new F.qLn},deps:[]},{provide:Ze,useClass:ct,multi:!0,deps:[p.K0,F.R0b,F.Lbi]},{provide:Ze,useClass:Mt,multi:!0,deps:[p.K0]},{provide:Rt,useClass:Rt,deps:[Ye,Oe,F.AFp]},{provide:F.FYo,useExisting:Rt},{provide:Ke,useExisting:Oe},{provide:Oe,useClass:Oe,deps:[p.K0]},{provide:Ye,useClass:Ye,deps:[Ze,F.R0b]},{provide:p.JF,useClass:ut,deps:[]},[]];let Fn=(()=>{class se{constructor(ee){}static withServerTransition(ee){return{ngModule:se,providers:[{provide:F.AFp,useValue:ee.appId},{provide:Se,useExisting:F.AFp},ie]}}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(Pr,12))},se.\u0275mod=F.oAB({type:se}),se.\u0275inj=F.cJS({providers:[...Tn,...Ct],imports:[p.ez,F.hGG]}),se})(),Pn=(()=>{class se{constructor(ee){this._doc=ee}getTitle(){return this._doc.title}setTitle(ee){this._doc.title=ee||""}}return se.\u0275fac=function(ee){return new(ee||se)(F.LFG(p.K0))},se.\u0275prov=F.Yz7({token:se,factory:function(ee){let Me=null;return Me=ee?new ee:function Hn(){return new Pn((0,F.LFG)(p.K0))}(),Me},providedIn:"root"}),se})();typeof window<"u"&&window},2827:(Nt,ke,R)=>{R.d(ke,{F0:()=>ii,rH:()=>bs,yS:()=>ja,Bz:()=>iu,lC:()=>hi});var p=R(4650),F=R(8996),B=R(9646),le=R(1135),he=R(6805),Ee=R(9751),we=R(4742),te=R(4671),Se=R(3268),X=R(3269),ie=R(1810),ve=R(5403),ut=R(9672);function Ze(..._){const E=(0,X.yG)(_),y=(0,X.jO)(_),{args:A,keys:O}=(0,we.D)(_);if(0===A.length)return(0,F.D)([],E);const z=new Ee.y(function Ye(_,E,y=te.y){return A=>{Tt(E,()=>{const{length:O}=_,z=new Array(O);let de=O,pe=O;for(let tt=0;tt<O;tt++)Tt(E,()=>{const Vt=(0,F.D)(_[tt],E);let Un=!1;Vt.subscribe((0,ve.x)(A,rn=>{z[tt]=rn,Un||(Un=!0,pe--),pe||A.next(y(z.slice()))},()=>{--de||A.complete()}))},A)},A)}}(A,E,O?de=>(0,ie.n)(O,de):te.y));return y?z.pipe((0,Se.Z)(y)):z}function Tt(_,E,y){_?(0,ut.f)(y,_,E):E()}var Ke=R(1350),Oe=R(9770),bt=R(9635),ft=R(2843),fe=R(515),et=R(4033),Xe=R(7579),mt=R(6895),ot=R(4004),Te=R(3900),St=R(5698),Yt=R(8675),It=R(9300),Gt=R(5577),Rt=R(590),ar=R(4351),Ve=R(8505),Le=R(8421),ze=R(4482);function Be(_){return(0,ze.e)((E,y)=>{let z,A=null,O=!1;A=E.subscribe((0,ve.x)(y,void 0,void 0,de=>{z=(0,Le.Xf)(_(de,Be(_)(E))),A?(A.unsubscribe(),A=null,z.subscribe(y)):O=!0})),O&&(A.unsubscribe(),A=null,z.subscribe(y))})}var qe=R(5026);function ct(_){return _<=0?()=>fe.E:(0,ze.e)((E,y)=>{let A=[];E.subscribe((0,ve.x)(y,O=>{A.push(O),_<A.length&&A.shift()},()=>{for(const O of A)y.next(O);y.complete()},void 0,()=>{A=null}))})}var yt=R(8068),ht=R(6590);function $t(_,E){const y=arguments.length>=2;return A=>A.pipe(_?(0,It.h)((O,z)=>_(O,z,A)):te.y,ct(1),y?(0,ht.d)(E):(0,yt.T)(()=>new he.K))}var qt=R(9718);function tn(_){return(0,ze.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(_)}})}var hn=R(8343),Nn=R(8189),ir=R(1481);const Wt="primary",cn=Symbol("RouteTitle");class Mn{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Wn(_){return new Mn(_)}function Mr(_,E,y){const A=y.path.split("/");if(A.length>_.length||"full"===y.pathMatch&&(E.hasChildren()||A.length<_.length))return null;const O={};for(let z=0;z<A.length;z++){const de=A[z],pe=_[z];if(de.startsWith(":"))O[de.substring(1)]=pe;else if(de!==pe.path)return null}return{consumed:_.slice(0,A.length),posParams:O}}function Ct(_,E){const y=_?Object.keys(_):void 0,A=E?Object.keys(E):void 0;if(!y||!A||y.length!=A.length)return!1;let O;for(let z=0;z<y.length;z++)if(O=y[z],!Tn(_[O],E[O]))return!1;return!0}function Tn(_,E){if(Array.isArray(_)&&Array.isArray(E)){if(_.length!==E.length)return!1;const y=[..._].sort(),A=[...E].sort();return y.every((O,z)=>A[z]===O)}return _===E}function Fn(_){return Array.prototype.concat.apply([],_)}function sr(_){return _.length>0?_[_.length-1]:null}function Ln(_,E){for(const y in _)_.hasOwnProperty(y)&&E(_[y],y)}function Hn(_){return(0,p.CqO)(_)?_:(0,p.QGY)(_)?(0,F.D)(Promise.resolve(_)):(0,B.of)(_)}const zt={exact:function Jn(_,E,y){if(!Ne(_.segments,E.segments)||!fn(_.segments,E.segments,y)||_.numberOfChildren!==E.numberOfChildren)return!1;for(const A in E.children)if(!_.children[A]||!Jn(_.children[A],E.children[A],y))return!1;return!0},subset:nn},on={exact:function gr(_,E){return Ct(_,E)},subset:function ur(_,E){return Object.keys(E).length<=Object.keys(_).length&&Object.keys(E).every(y=>Tn(_[y],E[y]))},ignored:()=>!0};function xn(_,E,y){return zt[y.paths](_.root,E.root,y.matrixParams)&&on[y.queryParams](_.queryParams,E.queryParams)&&!("exact"===y.fragment&&_.fragment!==E.fragment)}function nn(_,E,y){return or(_,E,E.segments,y)}function or(_,E,y,A){if(_.segments.length>y.length){const O=_.segments.slice(0,y.length);return!(!Ne(O,y)||E.hasChildren()||!fn(O,y,A))}if(_.segments.length===y.length){if(!Ne(_.segments,y)||!fn(_.segments,y,A))return!1;for(const O in E.children)if(!_.children[O]||!nn(_.children[O],E.children[O],A))return!1;return!0}{const O=y.slice(0,_.segments.length),z=y.slice(_.segments.length);return!!(Ne(_.segments,O)&&fn(_.segments,O,A)&&_.children[Wt])&&or(_.children[Wt],E,z,A)}}function fn(_,E,y){return E.every((A,O)=>on[y](_[O].parameters,A.parameters))}class vr{constructor(E,y,A){this.root=E,this.queryParams=y,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wn(this.queryParams)),this._queryParamMap}toString(){return ne.serialize(this)}}class Ft{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Ln(y,(A,O)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fe(this)}}class mn{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Wn(this.parameters)),this._parameterMap}toString(){return st(this)}}function Ne(_,E){return _.length===E.length&&_.every((y,A)=>y.path===E[A].path)}let me=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return new H},providedIn:"root"}),_})();class H{parse(E){const y=new ln(E);return new vr(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${it(E.root,!0)}`,A=function Jt(_){const E=Object.keys(_).map(y=>{const A=_[y];return Array.isArray(A)?A.map(O=>`${ce(y)}=${ce(O)}`).join("&"):`${ce(y)}=${ce(A)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${A}${"string"==typeof E.fragment?`#${function Y(_){return encodeURI(_)}(E.fragment)}`:""}`}}const ne=new H;function Fe(_){return _.segments.map(E=>st(E)).join("/")}function it(_,E){if(!_.hasChildren())return Fe(_);if(E){const y=_.children[Wt]?it(_.children[Wt],!1):"",A=[];return Ln(_.children,(O,z)=>{z!==Wt&&A.push(`${z}:${it(O,!1)}`)}),A.length>0?`${y}(${A.join("//")})`:y}{const y=function vt(_,E){let y=[];return Ln(_.children,(A,O)=>{O===Wt&&(y=y.concat(E(A,O)))}),Ln(_.children,(A,O)=>{O!==Wt&&(y=y.concat(E(A,O)))}),y}(_,(A,O)=>O===Wt?[it(_.children[Wt],!1)]:[`${O}:${it(A,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[Wt]?`${Fe(_)}/${y[0]}`:`${Fe(_)}/(${y.join("//")})`}}function ae(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ce(_){return ae(_).replace(/%3B/gi,";")}function K(_){return ae(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function G(_){return decodeURIComponent(_)}function De(_){return G(_.replace(/\+/g,"%20"))}function st(_){return`${K(_.path)}${function Ot(_){return Object.keys(_).map(E=>`;${K(E)}=${K(_[E])}`).join("")}(_.parameters)}`}const se=/^[^\/()?;=#]+/;function ue(_){const E=_.match(se);return E?E[0]:""}const ee=/^[^=?&#]+/,je=/^[^&#]+/;class ln{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(A[Wt]=new Ft(E,y)),A}parseSegment(){const E=ue(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(E),new mn(G(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=ue(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const O=ue(this.remaining);O&&(A=O,this.capture(A))}E[G(y)]=G(A)}parseQueryParam(E){const y=function Me(_){const E=_.match(ee);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const de=function Pt(_){const E=_.match(je);return E?E[0]:""}(this.remaining);de&&(A=de,this.capture(A))}const O=De(y),z=De(A);if(E.hasOwnProperty(O)){let de=E[O];Array.isArray(de)||(de=[de],E[O]=de),de.push(z)}else E[O]=z}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=ue(this.remaining),O=this.remaining[A.length];if("/"!==O&&")"!==O&&";"!==O)throw new p.vHH(4010,!1);let z;A.indexOf(":")>-1?(z=A.slice(0,A.indexOf(":")),this.capture(z),this.capture(":")):E&&(z=Wt);const de=this.parseChildren();y[z]=1===Object.keys(de).length?de[Wt]:new Ft([],de),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new p.vHH(4011,!1)}}function Pe(_){return _.segments.length>0?new Ft([],{[Wt]:_}):_}function Re(_){const E={};for(const A of Object.keys(_.children)){const z=Re(_.children[A]);(z.segments.length>0||z.hasChildren())&&(E[A]=z)}return function Et(_){if(1===_.numberOfChildren&&_.children[Wt]){const E=_.children[Wt];return new Ft(_.segments.concat(E.segments),E.children)}return _}(new Ft(_.segments,E))}function pt(_){return _ instanceof vr}function kn(_,E,y,A,O){if(0===y.length)return Wr(E.root,E.root,E.root,A,O);const z=function Kn(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new Ns(!0,0,_);let E=0,y=!1;const A=_.reduce((O,z,de)=>{if("object"==typeof z&&null!=z){if(z.outlets){const pe={};return Ln(z.outlets,(tt,Vt)=>{pe[Vt]="string"==typeof tt?tt.split("/"):tt}),[...O,{outlets:pe}]}if(z.segmentPath)return[...O,z.segmentPath]}return"string"!=typeof z?[...O,z]:0===de?(z.split("/").forEach((pe,tt)=>{0==tt&&"."===pe||(0==tt&&""===pe?y=!0:".."===pe?E++:""!=pe&&O.push(pe))}),O):[...O,z]},[]);return new Ns(y,E,A)}(y);return z.toRoot()?Wr(E.root,E.root,new Ft([],{}),A,O):function de(tt){const Vt=function Ni(_,E,y,A){if(_.isAbsolute)return new ui(E.root,!0,0);if(-1===A)return new ui(y,y===E.root,0);return function br(_,E,y){let A=_,O=E,z=y;for(;z>O;){if(z-=O,A=A.parent,!A)throw new p.vHH(4005,!1);O=A.segments.length}return new ui(A,!1,O-z)}(y,A+(xr(_.commands[0])?0:1),_.numberOfDoubleDots)}(z,E,_.snapshot?._urlSegment,tt),Un=Vt.processChildren?Mi(Vt.segmentGroup,Vt.index,z.commands):Kr(Vt.segmentGroup,Vt.index,z.commands);return Wr(E.root,Vt.segmentGroup,Un,A,O)}(_.snapshot?._lastPathIndex)}function xr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function Hr(_){return"object"==typeof _&&null!=_&&_.outlets}function Wr(_,E,y,A,O){let de,z={};A&&Ln(A,(tt,Vt)=>{z[Vt]=Array.isArray(tt)?tt.map(Un=>`${Un}`):`${tt}`}),de=_===E?y:Or(_,E,y);const pe=Pe(Re(de));return new vr(pe,z,O)}function Or(_,E,y){const A={};return Ln(_.children,(O,z)=>{A[z]=O===E?y:Or(O,E,y)}),new Ft(_.segments,A)}class Ns{constructor(E,y,A){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=A,E&&A.length>0&&xr(A[0]))throw new p.vHH(4003,!1);const O=A.find(Hr);if(O&&O!==sr(A))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ui{constructor(E,y,A){this.segmentGroup=E,this.processChildren=y,this.index=A}}function Kr(_,E,y){if(_||(_=new Ft([],{})),0===_.segments.length&&_.hasChildren())return Mi(_,E,y);const A=function Br(_,E,y){let A=0,O=E;const z={match:!1,pathIndex:0,commandIndex:0};for(;O<_.segments.length;){if(A>=y.length)return z;const de=_.segments[O],pe=y[A];if(Hr(pe))break;const tt=`${pe}`,Vt=A<y.length-1?y[A+1]:null;if(O>0&&void 0===tt)break;if(tt&&Vt&&"object"==typeof Vt&&void 0===Vt.outlets){if(!Ks(tt,Vt,de))return z;A+=2}else{if(!Ks(tt,{},de))return z;A++}O++}return{match:!0,pathIndex:O,commandIndex:A}}(_,E,y),O=y.slice(A.commandIndex);if(A.match&&A.pathIndex<_.segments.length){const z=new Ft(_.segments.slice(0,A.pathIndex),{});return z.children[Wt]=new Ft(_.segments.slice(A.pathIndex),_.children),Mi(z,0,O)}return A.match&&0===O.length?new Ft(_.segments,{}):A.match&&!_.hasChildren()?ss(_,E,y):A.match?Mi(_,0,O):ss(_,E,y)}function Mi(_,E,y){if(0===y.length)return new Ft(_.segments,{});{const A=function Ki(_){return Hr(_[0])?_[0].outlets:{[Wt]:_}}(y),O={};return Ln(A,(z,de)=>{"string"==typeof z&&(z=[z]),null!==z&&(O[de]=Kr(_.children[de],E,z))}),Ln(_.children,(z,de)=>{void 0===A[de]&&(O[de]=z)}),new Ft(_.segments,O)}}function ss(_,E,y){const A=_.segments.slice(0,E);let O=0;for(;O<y.length;){const z=y[O];if(Hr(z)){const tt=qr(z.outlets);return new Ft(A,tt)}if(0===O&&xr(y[0])){A.push(new mn(_.segments[E].path,jr(y[0]))),O++;continue}const de=Hr(z)?z.outlets[Wt]:`${z}`,pe=O<y.length-1?y[O+1]:null;de&&pe&&xr(pe)?(A.push(new mn(de,jr(pe))),O+=2):(A.push(new mn(de,{})),O++)}return new Ft(A,{})}function qr(_){const E={};return Ln(_,(y,A)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[A]=ss(new Ft([],{}),0,y))}),E}function jr(_){const E={};return Ln(_,(y,A)=>E[A]=`${y}`),E}function Ks(_,E,y){return _==y.path&&Ct(E,y.parameters)}class Xr{constructor(E,y){this.id=E,this.url=y}}class os extends Xr{constructor(E,y,A="imperative",O=null){super(E,y),this.type=0,this.navigationTrigger=A,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nr extends Xr{constructor(E,y,A){super(E,y),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bi extends Xr{constructor(E,y,A,O){super(E,y),this.reason=A,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qs extends Xr{constructor(E,y,A,O){super(E,y),this.error=A,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wo extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fs extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ma extends Xr{constructor(E,y,A,O,z){super(E,y),this.urlAfterRedirects=A,this.state=O,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cr extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Io extends Xr{constructor(E,y,A,O){super(E,y),this.urlAfterRedirects=A,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Do{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class co{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ae{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ie{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lt{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xt{constructor(E,y,A){this.routerEvent=E,this.position=y,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Xn{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=Zn(E,this._root);return y?y.children.map(A=>A.value):[]}firstChild(E){const y=Zn(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Rn(E,this._root);return y.length<2?[]:y[y.length-2].children.map(O=>O.value).filter(O=>O!==E)}pathFromRoot(E){return Rn(E,this._root).map(y=>y.value)}}function Zn(_,E){if(_===E.value)return E;for(const y of E.children){const A=Zn(_,y);if(A)return A}return null}function Rn(_,E){if(_===E.value)return[E];for(const y of E.children){const A=Rn(_,y);if(A.length)return A.unshift(E),A}return[]}class ei{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function ci(_){const E={};return _&&_.children.forEach(y=>E[y.value.outlet]=y),E}class pi extends Xn{constructor(E,y){super(E),this.snapshot=y,us(this,E)}toString(){return this.snapshot.toString()}}function rr(_,E){const y=function ys(_,E){const de=new as([],{},{},"",{},Wt,E,null,_.root,-1,{});return new Lo("",new ei(de,[]))}(_,E),A=new le.X([new mn("",{})]),O=new le.X({}),z=new le.X({}),de=new le.X({}),pe=new le.X(""),tt=new li(A,O,de,pe,z,Wt,E,y.root);return tt.snapshot=y.root,new pi(new ei(tt,[]),y)}class li{constructor(E,y,A,O,z,de,pe,tt){this.url=E,this.params=y,this.queryParams=A,this.fragment=O,this.data=z,this.outlet=de,this.component=pe,this.title=this.data?.pipe((0,ot.U)(Vt=>Vt[cn]))??(0,B.of)(void 0),this._futureSnapshot=tt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(E=>Wn(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(E=>Wn(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function di(_,E="emptyOnly"){const y=_.pathFromRoot;let A=0;if("always"!==E)for(A=y.length-1;A>=1;){const O=y[A],z=y[A-1];if(O.routeConfig&&""===O.routeConfig.path)A--;else{if(z.component)break;A--}}return function ea(_){return _.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(A))}class as{constructor(E,y,A,O,z,de,pe,tt,Vt,Un,rn,lr){this.url=E,this.params=y,this.queryParams=A,this.fragment=O,this.data=z,this.outlet=de,this.component=pe,this.title=this.data?.[cn],this.routeConfig=tt,this._urlSegment=Vt,this._lastPathIndex=Un,this._correctedLastPathIndex=lr??Un,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lo extends Xn{constructor(E,y){super(y),this.url=E,us(this,y)}toString(){return Vo(this._root)}}function us(_,E){E.value._routerState=_,E.children.forEach(y=>us(_,y))}function Vo(_){const E=_.children.length>0?` { ${_.children.map(Vo).join(", ")} } `:"";return`${_.value}${E}`}function Co(_){if(_.snapshot){const E=_.snapshot,y=_._futureSnapshot;_.snapshot=y,Ct(E.queryParams,y.queryParams)||_.queryParams.next(y.queryParams),E.fragment!==y.fragment&&_.fragment.next(y.fragment),Ct(E.params,y.params)||_.params.next(y.params),function Pr(_,E){if(_.length!==E.length)return!1;for(let y=0;y<_.length;++y)if(!Ct(_[y],E[y]))return!1;return!0}(E.url,y.url)||_.url.next(y.url),Ct(E.data,y.data)||_.data.next(y.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function Ls(_,E){const y=Ct(_.params,E.params)&&function yn(_,E){return Ne(_,E)&&_.every((y,A)=>Ct(y.parameters,E[A].parameters))}(_.url,E.url);return y&&!(!_.parent!=!E.parent)&&(!_.parent||Ls(_.parent,E.parent))}function Zs(_,E,y){if(y&&_.shouldReuseRoute(E.value,y.value.snapshot)){const A=y.value;A._futureSnapshot=E.value;const O=function kr(_,E,y){return E.children.map(A=>{for(const O of y.children)if(_.shouldReuseRoute(A.value,O.value.snapshot))return Zs(_,A,O);return Zs(_,A)})}(_,E,y);return new ei(A,O)}{if(_.shouldAttach(E.value)){const z=_.retrieve(E.value);if(null!==z){const de=z.route;return de.value._futureSnapshot=E.value,de.children=E.children.map(pe=>Zs(_,pe)),de}}const A=function Zi(_){return new li(new le.X(_.url),new le.X(_.params),new le.X(_.queryParams),new le.X(_.fragment),new le.X(_.data),_.outlet,_.component,_)}(E.value),O=E.children.map(z=>Zs(_,z));return new ei(A,O)}}const vs="ngNavigationCancelingError";function _s(_,E){const{redirectTo:y,navigationBehaviorOptions:A}=pt(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,O=lo(!1,0,E);return O.url=y,O.navigationBehaviorOptions=A,O}function lo(_,E,y){const A=new Error("NavigationCancelingError: "+(_||""));return A[vs]=!0,A.cancellationCode=E,y&&(A.url=y),A}function ta(_){return mr(_)&&pt(_.url)}function mr(_){return _&&_[vs]}class Ys{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new cs,this.attachRef=null}}let cs=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(y,A){const O=this.getOrCreateContext(y);O.outlet=A,this.contexts.set(y,O)}onChildOutletDestroyed(y){const A=this.getContext(y);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let A=this.getContext(y);return A||(A=new Ys,this.contexts.set(y,A)),A}getContext(y){return this.contexts.get(y)||null}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const ji=!1;let hi=(()=>{class _{constructor(y,A,O,z,de){this.parentContexts=y,this.location=A,this.changeDetector=z,this.environmentInjector=de,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=O||Wt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,ji);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,ji);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,ji);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,A){this.activated=y,this._activatedRoute=A,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,A){if(this.isActivated)throw new p.vHH(4013,ji);this._activatedRoute=y;const O=this.location,de=y._futureSnapshot.component,pe=this.parentContexts.getOrCreateContext(this.name).children,tt=new ho(y,pe,O.injector);if(A&&function bo(_){return!!_.resolveComponentFactory}(A)){const Vt=A.resolveComponentFactory(de);this.activated=O.createComponent(Vt,O.length,tt)}else this.activated=O.createComponent(de,{index:O.length,injector:tt,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(cs),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},_.\u0275dir=p.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class ho{constructor(E,y,A){this.route=E,this.childContexts=y,this.parent=A}get(E,y){return E===li?this.route:E===cs?this.childContexts:this.parent.get(E,y)}}let ki=(()=>{class _{}return _.\u0275fac=function(y){return new(y||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(y,A){1&y&&p._UZ(0,"router-outlet")},dependencies:[hi],encapsulation:2}),_})();function ti(_,E){return _.providers&&!_._injector&&(_._injector=(0,p.MMx)(_.providers,E,`Route: ${_.path}`)),_._injector??E}function Vs(_){const E=_.children&&_.children.map(Vs),y=E?{..._,children:E}:{..._};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==Wt&&(y.component=ki),y}function Ei(_){return _.outlet||Wt}function Fr(_,E){const y=_.filter(A=>Ei(A)===E);return y.push(..._.filter(A=>Ei(A)!==E)),y}function Us(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let E=_.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class ls{constructor(E,y,A,O){this.routeReuseStrategy=E,this.futureState=y,this.currState=A,this.forwardEvent=O}activate(E){const y=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,A,E),Co(this.futureState.root),this.activateChildRoutes(y,A,E)}deactivateChildRoutes(E,y,A){const O=ci(y);E.children.forEach(z=>{const de=z.value.outlet;this.deactivateRoutes(z,O[de],A),delete O[de]}),Ln(O,(z,de)=>{this.deactivateRouteAndItsChildren(z,A)})}deactivateRoutes(E,y,A){const O=E.value,z=y?y.value:null;if(O===z)if(O.component){const de=A.getContext(O.outlet);de&&this.deactivateChildRoutes(E,y,de.children)}else this.deactivateChildRoutes(E,y,A);else z&&this.deactivateRouteAndItsChildren(y,A)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const A=y.getContext(E.value.outlet),O=A&&E.value.component?A.children:y,z=ci(E);for(const de of Object.keys(z))this.deactivateRouteAndItsChildren(z[de],O);if(A&&A.outlet){const de=A.outlet.detach(),pe=A.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:de,route:E,contexts:pe})}}deactivateRouteAndOutlet(E,y){const A=y.getContext(E.value.outlet),O=A&&E.value.component?A.children:y,z=ci(E);for(const de of Object.keys(z))this.deactivateRouteAndItsChildren(z[de],O);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(E,y,A){const O=ci(y);E.children.forEach(z=>{this.activateRoutes(z,O[z.value.outlet],A),this.forwardEvent(new lt(z.value.snapshot))}),E.children.length&&this.forwardEvent(new Ie(E.value.snapshot))}activateRoutes(E,y,A){const O=E.value,z=y?y.value:null;if(Co(O),O===z)if(O.component){const de=A.getOrCreateContext(O.outlet);this.activateChildRoutes(E,y,de.children)}else this.activateChildRoutes(E,y,A);else if(O.component){const de=A.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const pe=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),de.children.onOutletReAttached(pe.contexts),de.attachRef=pe.componentRef,de.route=pe.route.value,de.outlet&&de.outlet.attach(pe.componentRef,pe.route.value),Co(pe.route.value),this.activateChildRoutes(E,null,de.children)}else{const pe=Us(O.snapshot),tt=pe?.get(p._Vd)??null;de.attachRef=null,de.route=O,de.resolver=tt,de.injector=pe,de.outlet&&de.outlet.activateWith(O,de.injector),this.activateChildRoutes(E,null,de.children)}}else this.activateChildRoutes(E,null,A)}}class Bo{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class gt{constructor(E,y){this.component=E,this.route=y}}function qn(_,E,y){const A=_._root;return Rr(A,E?E._root:null,y,[A.value])}function Yi(_,E){const y=Symbol(),A=E.get(_,y);return A===y?"function"!=typeof _||(0,p.Z0I)(_)?E.get(_):_:A}function Rr(_,E,y,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const z=ci(E);return _.children.forEach(de=>{(function k(_,E,y,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const z=_.value,de=E?E.value:null,pe=y?y.getContext(_.value.outlet):null;if(de&&z.routeConfig===de.routeConfig){const tt=function P(_,E,y){if("function"==typeof y)return y(_,E);switch(y){case"pathParamsChange":return!Ne(_.url,E.url);case"pathParamsOrQueryParamsChange":return!Ne(_.url,E.url)||!Ct(_.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ls(_,E)||!Ct(_.queryParams,E.queryParams);default:return!Ls(_,E)}}(de,z,z.routeConfig.runGuardsAndResolvers);tt?O.canActivateChecks.push(new Bo(A)):(z.data=de.data,z._resolvedData=de._resolvedData),Rr(_,E,z.component?pe?pe.children:null:y,A,O),tt&&pe&&pe.outlet&&pe.outlet.isActivated&&O.canDeactivateChecks.push(new gt(pe.outlet.component,de))}else de&&M(E,pe,O),O.canActivateChecks.push(new Bo(A)),Rr(_,null,z.component?pe?pe.children:null:y,A,O)})(de,z[de.value.outlet],y,A.concat([de.value]),O),delete z[de.value.outlet]}),Ln(z,(de,pe)=>M(de,y.getContext(pe),O)),O}function M(_,E,y){const A=ci(_),O=_.value;Ln(A,(z,de)=>{M(z,O.component?E?E.children.getContext(de):null:E,y)}),y.canDeactivateChecks.push(new gt(O.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,O))}function q(_){return"function"==typeof _}function Bs(_){return _ instanceof he.K||"EmptyError"===_?.name}const ni=Symbol("INITIAL_VALUE");function Is(){return(0,Te.w)(_=>Ze(_.map(E=>E.pipe((0,St.q)(1),(0,Yt.O)(ni)))).pipe((0,ot.U)(E=>{for(const y of E)if(!0!==y){if(y===ni)return ni;if(!1===y||y instanceof vr)return y}return!0}),(0,It.h)(E=>E!==ni),(0,St.q)(1)))}function eo(_){return(0,bt.z)((0,Ve.b)(E=>{if(pt(E))throw _s(0,E)}),(0,ot.U)(E=>!0===E))}const fo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function So(_,E,y,A,O){const z=xi(_,E,y);return z.matched?function zo(_,E,y,A){const O=E.canMatch;if(!O||0===O.length)return(0,B.of)(!0);const z=O.map(de=>{const pe=Yi(de,_);return Hn(function mi(_){return _&&q(_.canMatch)}(pe)?pe.canMatch(E,y):_.runInContext(()=>pe(E,y)))});return(0,B.of)(z).pipe(Is(),eo())}(A=ti(E,A),E,y).pipe((0,ot.U)(de=>!0===de?z:{...fo})):(0,B.of)(z)}function xi(_,E,y){if(""===E.path)return"full"===E.pathMatch&&(_.hasChildren()||y.length>0)?{...fo}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const O=(E.matcher||Mr)(y,_,E);if(!O)return{...fo};const z={};Ln(O.posParams,(pe,tt)=>{z[tt]=pe.path});const de=O.consumed.length>0?{...z,...O.consumed[O.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:O.consumed,remainingSegments:y.slice(O.consumed.length),parameters:de,positionalParamSegments:O.posParams??{}}}function ds(_,E,y,A,O="corrected"){if(y.length>0&&function hr(_,E,y){return y.some(A=>yr(_,E,A)&&Ei(A)!==Wt)}(_,y,A)){const de=new Ft(E,function na(_,E,y,A){const O={};O[Wt]=A,A._sourceSegment=_,A._segmentIndexShift=E.length;for(const z of y)if(""===z.path&&Ei(z)!==Wt){const de=new Ft([],{});de._sourceSegment=_,de._segmentIndexShift=E.length,O[Ei(z)]=de}return O}(_,E,A,new Ft(y,_.children)));return de._sourceSegment=_,de._segmentIndexShift=E.length,{segmentGroup:de,slicedSegments:[]}}if(0===y.length&&function Ii(_,E,y){return y.some(A=>yr(_,E,A))}(_,y,A)){const de=new Ft(_.segments,function Ua(_,E,y,A,O,z){const de={};for(const pe of A)if(yr(_,y,pe)&&!O[Ei(pe)]){const tt=new Ft([],{});tt._sourceSegment=_,tt._segmentIndexShift="legacy"===z?_.segments.length:E.length,de[Ei(pe)]=tt}return{...O,...de}}(_,E,y,A,_.children,O));return de._sourceSegment=_,de._segmentIndexShift=E.length,{segmentGroup:de,slicedSegments:y}}const z=new Ft(_.segments,_.children);return z._sourceSegment=_,z._segmentIndexShift=E.length,{segmentGroup:z,slicedSegments:y}}function yr(_,E,y){return(!(_.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function _r(_,E,y,A){return!!(Ei(_)===A||A!==Wt&&yr(E,y,_))&&("**"===_.path||xi(E,_,y).matched)}function ra(_,E,y){return 0===E.length&&!_.children[y]}const Mo=!1;class Ri{constructor(E){this.segmentGroup=E||null}}class Ea{constructor(E){this.urlTree=E}}function Ds(_){return(0,ft._)(new Ri(_))}function Cs(_){return(0,ft._)(new Ea(_))}class $i{constructor(E,y,A,O,z){this.injector=E,this.configLoader=y,this.urlSerializer=A,this.urlTree=O,this.config=z,this.allowRedirects=!0}apply(){const E=ds(this.urlTree.root,[],[],this.config).segmentGroup,y=new Ft(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,Wt).pipe((0,ot.U)(z=>this.createUrlTree(Re(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Be(z=>{if(z instanceof Ea)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof Ri?this.noMatchError(z):z}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,Wt).pipe((0,ot.U)(O=>this.createUrlTree(Re(O),E.queryParams,E.fragment))).pipe(Be(O=>{throw O instanceof Ri?this.noMatchError(O):O}))}noMatchError(E){return new p.vHH(4002,Mo)}createUrlTree(E,y,A){const O=Pe(E);return new vr(O,y,A)}expandSegmentGroup(E,y,A,O){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(E,y,A).pipe((0,ot.U)(z=>new Ft([],z))):this.expandSegment(E,A,y,A.segments,O,!0)}expandChildren(E,y,A){const O=[];for(const z of Object.keys(A.children))"primary"===z?O.unshift(z):O.push(z);return(0,F.D)(O).pipe((0,ar.b)(z=>{const de=A.children[z],pe=Fr(y,z);return this.expandSegmentGroup(E,pe,de,z).pipe((0,ot.U)(tt=>({segment:tt,outlet:z})))}),(0,qe.R)((z,de)=>(z[de.outlet]=de.segment,z),{}),$t())}expandSegment(E,y,A,O,z,de){return(0,F.D)(A).pipe((0,ar.b)(pe=>this.expandSegmentAgainstRoute(E,y,A,pe,O,z,de).pipe(Be(Vt=>{if(Vt instanceof Ri)return(0,B.of)(null);throw Vt}))),(0,Rt.P)(pe=>!!pe),Be((pe,tt)=>{if(Bs(pe))return ra(y,O,z)?(0,B.of)(new Ft([],{})):Ds(y);throw pe}))}expandSegmentAgainstRoute(E,y,A,O,z,de,pe){return _r(O,y,z,de)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(E,y,O,z,de):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,A,O,z,de):Ds(y):Ds(y)}expandSegmentAgainstRouteUsingRedirect(E,y,A,O,z,de){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,A,O,de):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,O,z,de)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,A,O){const z=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Cs(z):this.lineralizeSegments(A,z).pipe((0,Gt.z)(de=>{const pe=new Ft(de,{});return this.expandSegment(E,pe,y,de,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,O,z,de){const{matched:pe,consumedSegments:tt,remainingSegments:Vt,positionalParamSegments:Un}=xi(y,O,z);if(!pe)return Ds(y);const rn=this.applyRedirectCommands(tt,O.redirectTo,Un);return O.redirectTo.startsWith("/")?Cs(rn):this.lineralizeSegments(O,rn).pipe((0,Gt.z)(lr=>this.expandSegment(E,y,A,lr.concat(Vt),de,!1)))}matchSegmentAgainstRoute(E,y,A,O,z){return"**"===A.path?(E=ti(A,E),A.loadChildren?(A._loadedRoutes?(0,B.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(E,A)).pipe((0,ot.U)(pe=>(A._loadedRoutes=pe.routes,A._loadedInjector=pe.injector,new Ft(O,{})))):(0,B.of)(new Ft(O,{}))):So(y,A,O,E).pipe((0,Te.w)(({matched:de,consumedSegments:pe,remainingSegments:tt})=>de?this.getChildConfig(E=A._injector??E,A,O).pipe((0,Gt.z)(Un=>{const rn=Un.injector??E,lr=Un.routes,{segmentGroup:As,slicedSegments:fi}=ds(y,pe,tt,lr),oo=new Ft(As.segments,As.children);if(0===fi.length&&oo.hasChildren())return this.expandChildren(rn,lr,oo).pipe((0,ot.U)(Aa=>new Ft(pe,Aa)));if(0===lr.length&&0===fi.length)return(0,B.of)(new Ft(pe,{}));const Qr=Ei(A)===z;return this.expandSegment(rn,oo,lr,fi,Qr?Wt:z,!0).pipe((0,ot.U)(Ta=>new Ft(pe.concat(Ta.segments),Ta.children)))})):Ds(y)))}getChildConfig(E,y,A){return y.children?(0,B.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,B.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function _a(_,E,y,A){const O=E.canLoad;if(void 0===O||0===O.length)return(0,B.of)(!0);const z=O.map(de=>{const pe=Yi(de,_);return Hn(function Xt(_){return _&&q(_.canLoad)}(pe)?pe.canLoad(E,y):_.runInContext(()=>pe(E,y)))});return(0,B.of)(z).pipe(Is(),eo())}(E,y,A).pipe((0,Gt.z)(O=>O?this.configLoader.loadChildren(E,y).pipe((0,Ve.b)(z=>{y._loadedRoutes=z.routes,y._loadedInjector=z.injector})):function ia(_){return(0,ft._)(lo(Mo,3))}())):(0,B.of)({routes:[],injector:E})}lineralizeSegments(E,y){let A=[],O=y.root;for(;;){if(A=A.concat(O.segments),0===O.numberOfChildren)return(0,B.of)(A);if(O.numberOfChildren>1||!O.children[Wt])return(0,ft._)(new p.vHH(4e3,Mo));O=O.children[Wt]}}applyRedirectCommands(E,y,A){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,A)}applyRedirectCreateUrlTree(E,y,A,O){const z=this.createSegmentGroup(E,y.root,A,O);return new vr(z,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const A={};return Ln(E,(O,z)=>{if("string"==typeof O&&O.startsWith(":")){const pe=O.substring(1);A[z]=y[pe]}else A[z]=O}),A}createSegmentGroup(E,y,A,O){const z=this.createSegments(E,y.segments,A,O);let de={};return Ln(y.children,(pe,tt)=>{de[tt]=this.createSegmentGroup(E,pe,A,O)}),new Ft(z,de)}createSegments(E,y,A,O){return y.map(z=>z.path.startsWith(":")?this.findPosParam(E,z,O):this.findOrReturn(z,A))}findPosParam(E,y,A){const O=A[y.path.substring(1)];if(!O)throw new p.vHH(4001,Mo);return O}findOrReturn(E,y){let A=0;for(const O of y){if(O.path===E.path)return y.splice(A),O;A++}return E}}class no{}class po{constructor(E,y,A,O,z,de,pe,tt){this.injector=E,this.rootComponentType=y,this.config=A,this.urlTree=O,this.url=z,this.paramsInheritanceStrategy=de,this.relativeLinkResolution=pe,this.urlSerializer=tt}recognize(){const E=ds(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,Wt).pipe((0,ot.U)(y=>{if(null===y)return null;const A=new as([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new ei(A,y),z=new Lo(this.url,O);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(E){const y=E.value,A=di(y,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),E.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(E,y,A,O){return 0===A.segments.length&&A.hasChildren()?this.processChildren(E,y,A):this.processSegment(E,y,A,A.segments,O)}processChildren(E,y,A){return(0,F.D)(Object.keys(A.children)).pipe((0,ar.b)(O=>{const z=A.children[O],de=Fr(y,O);return this.processSegmentGroup(E,de,z,O)}),(0,qe.R)((O,z)=>O&&z?(O.push(...z),O):null),function Mt(_,E=!1){return(0,ze.e)((y,A)=>{let O=0;y.subscribe((0,ve.x)(A,z=>{const de=_(z,O++);(de||E)&&A.next(z),!de&&A.complete()}))})}(O=>null!==O),(0,ht.d)(null),$t(),(0,ot.U)(O=>{if(null===O)return null;const z=V(O);return function xo(_){_.sort((E,y)=>E.value.outlet===Wt?-1:y.value.outlet===Wt?1:E.value.outlet.localeCompare(y.value.outlet))}(z),z}))}processSegment(E,y,A,O,z){return(0,F.D)(y).pipe((0,ar.b)(de=>this.processSegmentAgainstRoute(de._injector??E,de,A,O,z)),(0,Rt.P)(de=>!!de),Be(de=>{if(Bs(de))return ra(A,O,z)?(0,B.of)([]):(0,B.of)(null);throw de}))}processSegmentAgainstRoute(E,y,A,O,z){if(y.redirectTo||!_r(y,A,O,z))return(0,B.of)(null);let de;if("**"===y.path){const pe=O.length>0?sr(O).parameters:{},tt=_e(A)+O.length,Vt=new as(O,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dt(y),Ei(y),y.component??y._loadedComponent??null,y,W(A),tt,dn(y),tt);de=(0,B.of)({snapshot:Vt,consumedSegments:[],remainingSegments:[]})}else de=So(A,y,O,E).pipe((0,ot.U)(({matched:pe,consumedSegments:tt,remainingSegments:Vt,parameters:Un})=>{if(!pe)return null;const rn=_e(A)+tt.length;return{snapshot:new as(tt,Un,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dt(y),Ei(y),y.component??y._loadedComponent??null,y,W(A),rn,dn(y),rn),consumedSegments:tt,remainingSegments:Vt}}));return de.pipe((0,Te.w)(pe=>{if(null===pe)return(0,B.of)(null);const{snapshot:tt,consumedSegments:Vt,remainingSegments:Un}=pe;E=y._injector??E;const rn=y._loadedInjector??E,lr=function ru(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(y),{segmentGroup:As,slicedSegments:fi}=ds(A,Vt,Un,lr.filter(Qr=>void 0===Qr.redirectTo),this.relativeLinkResolution);if(0===fi.length&&As.hasChildren())return this.processChildren(rn,lr,As).pipe((0,ot.U)(Qr=>null===Qr?null:[new ei(tt,Qr)]));if(0===lr.length&&0===fi.length)return(0,B.of)([new ei(tt,[])]);const oo=Ei(y)===z;return this.processSegment(rn,lr,As,fi,oo?Wt:z).pipe((0,ot.U)(Qr=>null===Qr?null:[new ei(tt,Qr)]))}))}}function b(_){const E=_.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function V(_){const E=[],y=new Set;for(const A of _){if(!b(A)){E.push(A);continue}const O=E.find(z=>A.value.routeConfig===z.value.routeConfig);void 0!==O?(O.children.push(...A.children),y.add(O)):E.push(A)}for(const A of y){const O=V(A.children);E.push(new ei(A.value,O))}return E.filter(A=>!y.has(A))}function W(_){let E=_;for(;E._sourceSegment;)E=E._sourceSegment;return E}function _e(_){let E=_,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function dt(_){return _.data||{}}function dn(_){return _.resolve||{}}function Yr(_){return"string"==typeof _.title||null===_.title}function fs(_){return(0,Te.w)(E=>{const y=_(E);return y?(0,F.D)(y).pipe((0,ot.U)(()=>E)):(0,B.of)(E)})}let wt=(()=>{class _{buildTitle(y){let A,O=y.root;for(;void 0!==O;)A=this.getResolvedTitleForRoute(O)??A,O=O.children.find(z=>z.outlet===Wt);return A}getResolvedTitleForRoute(y){return y.data[cn]}}return _.\u0275fac=function(y){return new(y||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(wr)},providedIn:"root"}),_})(),wr=(()=>{class _ extends wt{constructor(y){super(),this.title=y}updateTitle(y){const A=this.buildTitle(y);void 0!==A&&this.title.setTitle(A)}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(ir.Dx))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class go{}class an extends class Zt{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const Bt=new p.OlP("",{providedIn:"root",factory:()=>({})}),Dt=new p.OlP("ROUTES");let ri=(()=>{class _{constructor(y,A){this.injector=y,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,B.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const A=Hn(y.loadComponent()).pipe((0,Ve.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=z}),tn(()=>{this.componentLoaders.delete(y)})),O=new et.c(A,()=>new Xe.x).pipe((0,hn.x)());return this.componentLoaders.set(y,O),O}loadChildren(y,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,B.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const z=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,ot.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(A);let tt,Vt,Un=!1;Array.isArray(pe)?Vt=pe:(tt=pe.create(y).injector,Vt=Fn(tt.get(Dt,[],p.XFs.Self|p.XFs.Optional)));return{routes:Vt.map(Vs),injector:tt}}),tn(()=>{this.childrenLoaders.delete(A)})),de=new et.c(z,()=>new Xe.x).pipe((0,hn.x)());return this.childrenLoaders.set(A,de),de}loadModuleFactoryOrRoutes(y){return Hn(y()).pipe((0,Gt.z)(A=>A instanceof p.YKP||Array.isArray(A)?(0,B.of)(A):(0,F.D)(this.compiler.compileModuleAsync(A))))}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(p.zs3),p.LFG(p.Sil))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Su{}class Mu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function tc(_){throw _}function Ba(_,E,y){return E.parse("/")}const oa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ko(){const _=(0,p.f3M)(me),E=(0,p.f3M)(cs),y=(0,p.f3M)(mt.Ye),A=(0,p.f3M)(p.zs3),O=(0,p.f3M)(p.Sil),z=(0,p.f3M)(Dt,{optional:!0})??[],de=(0,p.f3M)(Bt,{optional:!0})??{},pe=(0,p.f3M)(wr),tt=(0,p.f3M)(wt,{optional:!0}),Vt=(0,p.f3M)(Su,{optional:!0}),Un=(0,p.f3M)(go,{optional:!0}),rn=new ii(null,_,E,y,A,O,Fn(z));return Vt&&(rn.urlHandlingStrategy=Vt),Un&&(rn.routeReuseStrategy=Un),rn.titleStrategy=tt??pe,function Nc(_,E){_.errorHandler&&(E.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(E.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(E.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(E.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(E.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(E.canceledNavigationResolution=_.canceledNavigationResolution)}(de,rn),rn}let ii=(()=>{class _{constructor(y,A,O,z,de,pe,tt){this.rootComponentType=y,this.urlSerializer=A,this.rootContexts=O,this.location=z,this.config=tt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xe.x,this.errorHandler=tc,this.malformedUriErrorHandler=Ba,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,B.of)(void 0),this.urlHandlingStrategy=new Mu,this.routeReuseStrategy=new an,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=de.get(ri),this.configLoader.onLoadEndListener=lr=>this.triggerEvent(new co(lr)),this.configLoader.onLoadStartListener=lr=>this.triggerEvent(new Do(lr)),this.ngModule=de.get(p.h0i),this.console=de.get(p.c2e);const rn=de.get(p.R0b);this.isNgZoneEnabled=rn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(tt),this.currentUrlTree=function wn(){return new vr(new Ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rr(this.currentUrlTree,this.rootComponentType),this.transitions=new le.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(y){const A=this.events;return y.pipe((0,It.h)(O=>0!==O.id),(0,ot.U)(O=>({...O,extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Te.w)(O=>{let z=!1,de=!1;return(0,B.of)(O).pipe((0,Ve.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Te.w)(pe=>{const tt=this.browserUrlTree.toString(),Vt=!this.navigated||pe.extractedUrl.toString()!==tt||tt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Vt)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Sn(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,B.of)(pe).pipe((0,Te.w)(rn=>{const lr=this.transitions.getValue();return A.next(new os(rn.id,this.serializeUrl(rn.extractedUrl),rn.source,rn.restoredState)),lr!==this.transitions.getValue()?fe.E:Promise.resolve(rn)}),function Di(_,E,y,A){return(0,Te.w)(O=>function hs(_,E,y,A,O){return new $i(_,E,y,A,O).apply()}(_,E,y,O.extractedUrl,A).pipe((0,ot.U)(z=>({...O,urlAfterRedirects:z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ve.b)(rn=>{this.currentNavigation={...this.currentNavigation,finalUrl:rn.urlAfterRedirects},O.urlAfterRedirects=rn.urlAfterRedirects}),function fr(_,E,y,A,O,z){return(0,Gt.z)(de=>function ro(_,E,y,A,O,z,de="emptyOnly",pe="legacy"){return new po(_,E,y,A,O,de,pe,z).recognize().pipe((0,Te.w)(tt=>null===tt?function Wo(_){return new Ee.y(E=>E.error(_))}(new no):(0,B.of)(tt)))}(_,E,y,de.urlAfterRedirects,A.serialize(de.urlAfterRedirects),A,O,z).pipe((0,ot.U)(pe=>({...de,targetSnapshot:pe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ve.b)(rn=>{if(O.targetSnapshot=rn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const As=this.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);this.setBrowserUrl(As,rn)}this.browserUrlTree=rn.urlAfterRedirects}const lr=new wo(rn.id,this.serializeUrl(rn.extractedUrl),this.serializeUrl(rn.urlAfterRedirects),rn.targetSnapshot);A.next(lr)}));if(Vt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:lr,extractedUrl:As,source:fi,restoredState:oo,extras:Qr}=pe,Ou=new os(lr,this.serializeUrl(As),fi,oo);A.next(Ou);const Ta=rr(As,this.rootComponentType).snapshot;return O={...pe,targetSnapshot:Ta,urlAfterRedirects:As,extras:{...Qr,skipLocationChange:!1,replaceUrl:!1}},(0,B.of)(O)}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),fe.E}),(0,Ve.b)(pe=>{const tt=new Fs(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(tt)}),(0,ot.U)(pe=>O={...pe,guards:qn(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function Va(_,E){return(0,Gt.z)(y=>{const{targetSnapshot:A,currentSnapshot:O,guards:{canActivateChecks:z,canDeactivateChecks:de}}=y;return 0===de.length&&0===z.length?(0,B.of)({...y,guardsResult:!0}):function va(_,E,y,A){return(0,F.D)(_).pipe((0,Gt.z)(O=>function js(_,E,y,A,O){const z=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,B.of)(!0);const de=z.map(pe=>{const tt=Us(E)??O,Vt=Yi(pe,tt);return Hn(function ws(_){return _&&q(_.canDeactivate)}(Vt)?Vt.canDeactivate(_,E,y,A):tt.runInContext(()=>Vt(_,E,y,A))).pipe((0,Rt.P)())});return(0,B.of)(de).pipe(Is())}(O.component,O.route,y,E,A)),(0,Rt.P)(O=>!0!==O,!0))}(de,A,O,_).pipe((0,Gt.z)(pe=>pe&&function Qe(_){return"boolean"==typeof _}(pe)?function $o(_,E,y,A){return(0,F.D)(E).pipe((0,ar.b)(O=>(0,Ke.z)(function Go(_,E){return null!==_&&E&&E(new Ae(_)),(0,B.of)(!0)}(O.route.parent,A),function Ho(_,E){return null!==_&&E&&E(new Ue(_)),(0,B.of)(!0)}(O.route,A),function Fi(_,E,y){const A=E[E.length-1],z=E.slice(0,E.length-1).reverse().map(de=>function jo(_){const E=_.routeConfig?_.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:_,guards:E}:null}(de)).filter(de=>null!==de).map(de=>(0,Oe.P)(()=>{const pe=de.guards.map(tt=>{const Vt=Us(de.node)??y,Un=Yi(tt,Vt);return Hn(function Xs(_){return _&&q(_.canActivateChild)}(Un)?Un.canActivateChild(A,_):Vt.runInContext(()=>Un(A,_))).pipe((0,Rt.P)())});return(0,B.of)(pe).pipe(Is())}));return(0,B.of)(z).pipe(Is())}(_,O.path,y),function Ao(_,E,y){const A=E.routeConfig?E.routeConfig.canActivate:null;if(!A||0===A.length)return(0,B.of)(!0);const O=A.map(z=>(0,Oe.P)(()=>{const de=Us(E)??y,pe=Yi(z,de);return Hn(function zn(_){return _&&q(_.canActivate)}(pe)?pe.canActivate(E,_):de.runInContext(()=>pe(E,_))).pipe((0,Rt.P)())}));return(0,B.of)(O).pipe(Is())}(_,O.route,y))),(0,Rt.P)(O=>!0!==O,!0))}(A,z,_,E):(0,B.of)(pe)),(0,ot.U)(pe=>({...y,guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,Ve.b)(pe=>{if(O.guardsResult=pe.guardsResult,pt(pe.guardsResult))throw _s(0,pe.guardsResult);const tt=new ma(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(tt)}),(0,It.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),fs(pe=>{if(pe.guards.canActivateChecks.length)return(0,B.of)(pe).pipe((0,Ve.b)(tt=>{const Vt=new cr(tt.id,this.serializeUrl(tt.extractedUrl),this.serializeUrl(tt.urlAfterRedirects),tt.targetSnapshot);this.triggerEvent(Vt)}),(0,Te.w)(tt=>{let Vt=!1;return(0,B.of)(tt).pipe(function Qn(_,E){return(0,Gt.z)(y=>{const{targetSnapshot:A,guards:{canActivateChecks:O}}=y;if(!O.length)return(0,B.of)(y);let z=0;return(0,F.D)(O).pipe((0,ar.b)(de=>function Er(_,E,y,A){const O=_.routeConfig,z=_._resolve;return void 0!==O?.title&&!Yr(O)&&(z[cn]=O.title),function _n(_,E,y,A){const O=function Tr(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===O.length)return(0,B.of)({});const z={};return(0,F.D)(O).pipe((0,Gt.z)(de=>function Vn(_,E,y,A){const O=Us(E)??A,z=Yi(_,O);return Hn(z.resolve?z.resolve(E,y):O.runInContext(()=>z(E,y)))}(_[de],E,y,A).pipe((0,Rt.P)(),(0,Ve.b)(pe=>{z[de]=pe}))),ct(1),(0,qt.h)(z),Be(de=>Bs(de)?fe.E:(0,ft._)(de)))}(z,_,E,A).pipe((0,ot.U)(de=>(_._resolvedData=de,_.data=di(_,y).resolve,O&&Yr(O)&&(_.data[cn]=O.title),null)))}(de.route,A,_,E)),(0,Ve.b)(()=>z++),ct(1),(0,Gt.z)(de=>z===O.length?(0,B.of)(y):fe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ve.b)({next:()=>Vt=!0,complete:()=>{Vt||(this.restoreHistory(tt),this.cancelNavigationTransition(tt,"",2))}}))}),(0,Ve.b)(tt=>{const Vt=new Io(tt.id,this.serializeUrl(tt.extractedUrl),this.serializeUrl(tt.urlAfterRedirects),tt.targetSnapshot);this.triggerEvent(Vt)}))}),fs(pe=>{const tt=Vt=>{const Un=[];Vt.routeConfig?.loadComponent&&!Vt.routeConfig._loadedComponent&&Un.push(this.configLoader.loadComponent(Vt.routeConfig).pipe((0,Ve.b)(rn=>{Vt.component=rn}),(0,ot.U)(()=>{})));for(const rn of Vt.children)Un.push(...tt(rn));return Un};return Ze(tt(pe.targetSnapshot.root)).pipe((0,ht.d)(),(0,St.q)(1))}),fs(()=>this.afterPreactivation()),(0,ot.U)(pe=>{const tt=function qi(_,E,y){const A=Zs(_,E._root,y?y._root:void 0);return new pi(A,E)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return O={...pe,targetRouterState:tt}}),(0,Ve.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((_,E,y)=>(0,ot.U)(A=>(new ls(E,A.targetRouterState,A.currentRouterState,y).activate(_),A)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,Ve.b)({next(){z=!0},complete(){z=!0}}),tn(()=>{z||de||this.cancelNavigationTransition(O,"",1),this.currentNavigation?.id===O.id&&(this.currentNavigation=null)}),Be(pe=>{if(de=!0,mr(pe)){ta(pe)||(this.navigated=!0,this.restoreHistory(O,!0));const tt=new Bi(O.id,this.serializeUrl(O.extractedUrl),pe.message,pe.cancellationCode);if(A.next(tt),ta(pe)){const Vt=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),Un={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Sn(O.source)};this.scheduleNavigation(Vt,"imperative",null,Un,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{this.restoreHistory(O,!0);const tt=new qs(O.id,this.serializeUrl(O.extractedUrl),pe,O.targetSnapshot??void 0);A.next(tt);try{O.resolve(this.errorHandler(pe))}catch(Vt){O.reject(Vt)}}return fe.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next({...this.transitions.value,...y})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const A="popstate"===y.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const O={replaceUrl:!0},z=y.state?.navigationId?y.state:null;if(z){const pe={...z};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(O.state=pe)}const de=this.parseUrl(y.url);this.scheduleNavigation(de,A,z,O)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map(Vs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,A={}){const{relativeTo:O,queryParams:z,fragment:de,queryParamsHandling:pe,preserveFragment:tt}=A,Vt=O||this.routerState.root,Un=tt?this.currentUrlTree.fragment:de;let rn=null;switch(pe){case"merge":rn={...this.currentUrlTree.queryParams,...z};break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=z||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),kn(Vt,this.currentUrlTree,y,rn,Un??null)}navigateByUrl(y,A={skipLocationChange:!1}){const O=pt(y)?y:this.parseUrl(y),z=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,A)}navigate(y,A={skipLocationChange:!1}){return function yi(_){for(let E=0;E<_.length;E++){if(null==_[E])throw new p.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,A),A)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let A;try{A=this.urlSerializer.parse(y)}catch(O){A=this.malformedUriErrorHandler(O,this.urlSerializer,y)}return A}isActive(y,A){let O;if(O=!0===A?{...oa}:!1===A?{...Oc}:A,pt(y))return xn(this.currentUrlTree,y,O);const z=this.parseUrl(y);return xn(this.currentUrlTree,z,O)}removeEmptyProps(y){return Object.keys(y).reduce((A,O)=>{const z=y[O];return null!=z&&(A[O]=z),A},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Nr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,A,O,z,de){if(this.disposed)return Promise.resolve(!1);let pe,tt,Vt;de?(pe=de.resolve,tt=de.reject,Vt=de.promise):Vt=new Promise((lr,As)=>{pe=lr,tt=As});const Un=++this.navigationId;let rn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(O=this.location.getState()),rn=O&&O.\u0275routerPageId?O.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):rn=0,this.setTransition({id:Un,targetPageId:rn,source:A,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:z,resolve:pe,reject:tt,promise:Vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vt.catch(lr=>Promise.reject(lr))}setBrowserUrl(y,A){const O=this.urlSerializer.serialize(y),z={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(O)||A.extras.replaceUrl?this.location.replaceState(O,"",z):this.location.go(O,"",z)}restoreHistory(y,A=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===O?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===O&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,A,O){const z=new Bi(y.id,this.serializeUrl(y.extractedUrl),A,O);this.triggerEvent(z),y.resolve(!1)}generateNgRouterState(y,A){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:A}:{navigationId:y}}}return _.\u0275fac=function(y){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:function(){return Ko()},providedIn:"root"}),_})();function Sn(_){return"imperative"!==_}let bs=(()=>{class _{constructor(y,A,O,z,de){this.router=y,this.route=A,this.tabIndexAttribute=O,this.renderer=z,this.el=de,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Xe.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const A=this.renderer,O=this.el.nativeElement;null!==y?A.setAttribute(O,"tabindex",y):A.removeAttribute(O,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(ii),p.Y36(li),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},_.\u0275dir=p.lG2({type:_,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,A){1&y&&p.NdJ("click",function(){return A.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})(),ja=(()=>{class _{constructor(y,A,O){this.router=y,this.route=A,this.locationStrategy=O,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Xe.x,this.subscription=y.events.subscribe(z=>{z instanceof Nr&&this.updateTargetUrlAndHref()})}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,A,O,z,de){return!!(0!==y||A||O||z||de||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(y){return new(y||_)(p.Y36(ii),p.Y36(li),p.Y36(mt.S$))},_.\u0275dir=p.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,A){1&y&&p.NdJ("click",function(z){return A.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&y&&p.uIk("target",A.target)("href",A.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})();class Ts{}let er=(()=>{class _{constructor(y,A,O,z,de){this.router=y,this.injector=O,this.preloadingStrategy=z,this.loader=de}setUpPreloading(){this.subscription=this.router.events.pipe((0,It.h)(y=>y instanceof Nr),(0,ar.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,A){const O=[];for(const z of A){z.providers&&!z._injector&&(z._injector=(0,p.MMx)(z.providers,y,`Route: ${z.path}`));const de=z._injector??y,pe=z._loadedInjector??de;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?O.push(this.preloadConfig(de,z)):(z.children||z._loadedRoutes)&&O.push(this.processRoutes(pe,z.children??z._loadedRoutes))}return(0,F.D)(O).pipe((0,Nn.J)())}preloadConfig(y,A){return this.preloadingStrategy.preload(A,()=>{let O;O=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(y,A):(0,B.of)(null);const z=O.pipe((0,Gt.z)(de=>null===de?(0,B.of)(void 0):(A._loadedRoutes=de.routes,A._loadedInjector=de.injector,this.processRoutes(de.injector??y,de.routes))));if(A.loadComponent&&!A._loadedComponent){const de=this.loader.loadComponent(A);return(0,F.D)([z,de]).pipe((0,Nn.J)())}return z})}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(ii),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Ts),p.LFG(ri))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const jt=new p.OlP("");let Ji=(()=>{class _{constructor(y,A,O={}){this.router=y,this.viewportScroller=A,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Nr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof xt&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,A){this.router.triggerEvent(new xt(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(y){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac}),_})();function Ro(_,E){return{\u0275kind:_,\u0275providers:E}}function Da(_){return[{provide:Dt,multi:!0,useValue:_}]}function Ca(){const _=(0,p.f3M)(p.zs3);return E=>{const y=_.get(p.z2F);if(E!==y.components[0])return;const A=_.get(ii),O=_.get(Ru);1===_.get(ps)&&A.initialNavigation(),_.get(Zo,null,p.XFs.Optional)?.setUpPreloading(),_.get(jt,null,p.XFs.Optional)?.init(),A.resetRootComponentType(y.componentTypes[0]),O.closed||(O.next(),O.unsubscribe())}}const Ru=new p.OlP("",{factory:()=>new Xe.x}),ps=new p.OlP("",{providedIn:"root",factory:()=>1});const Zo=new p.OlP("");function si(_){return Ro(0,[{provide:Zo,useExisting:er},{provide:Ts,useExisting:_}])}const Ga=new p.OlP("ROUTER_FORROOT_GUARD"),Ci=[mt.Ye,{provide:me,useClass:H},{provide:ii,useFactory:Ko},cs,{provide:li,useFactory:function Ar(_){return _.routerState.root},deps:[ii]},ri];function Li(){return new p.PXZ("Router",ii)}let iu=(()=>{class _{constructor(y){}static forRoot(y,A){return{ngModule:_,providers:[Ci,[],Da(y),{provide:Ga,useFactory:Pu,deps:[[ii,new p.FiY,new p.tp0]]},{provide:Bt,useValue:A||{}},A?.useHash?{provide:mt.S$,useClass:mt.Do}:{provide:mt.S$,useClass:mt.b0},{provide:jt,useFactory:()=>{const _=(0,p.f3M)(ii),E=(0,p.f3M)(mt.EM),y=(0,p.f3M)(Bt);return y.scrollOffset&&E.setOffset(y.scrollOffset),new Ji(_,E,y)}},A?.preloadingStrategy?si(A.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Li},A?.initialNavigation?kc(A):[],[{provide:Xi,useFactory:Ca},{provide:p.tb,multi:!0,useExisting:Xi}]]}}static forChild(y){return{ngModule:_,providers:[Da(y)]}}}return _.\u0275fac=function(y){return new(y||_)(p.LFG(Ga,8))},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[ki]}),_})();function Pu(_){return"guarded"}function kc(_){return["disabled"===_.initialNavigation?Ro(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const E=(0,p.f3M)(ii);return()=>{E.setUpLocationChangeListener()}}},{provide:ps,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?Ro(2,[{provide:ps,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:E=>{const y=E.get(mt.V_,Promise.resolve());let A=!1;return()=>y.then(()=>new Promise(z=>{const de=E.get(ii),pe=E.get(Ru);(function O(z){E.get(ii).events.pipe((0,It.h)(pe=>pe instanceof Nr||pe instanceof Bi||pe instanceof qs),(0,ot.U)(pe=>pe instanceof Nr||pe instanceof Bi&&(0===pe.code||1===pe.code)&&null),(0,It.h)(pe=>null!==pe),(0,St.q)(1)).subscribe(()=>{z()})})(()=>{z(!0),A=!0}),de.afterPreactivation=()=>(z(!0),A||pe.closed?(0,B.of)(void 0):pe),de.initialNavigation()}))}}]).\u0275providers:[]]}const Xi=new p.OlP("")},3942:(Nt,ke,R)=>{R.d(ke,{Z:()=>Ye});var p=R(2090),F=R(4859),B=R(6881),le=R(1877);class he{constructor(Ke,Oe){this._delegate=Ke,this.firebase=Oe,(0,B._addComponent)(Ke,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(Ke,Oe=B._DEFAULT_ENTRY_NAME){var bt;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(Ke);return!ft.isInitialized()&&"EXPLICIT"===(null===(bt=ft.getComponent())||void 0===bt?void 0:bt.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:Oe})}_removeServiceInstance(Ke,Oe=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(Oe)}_addComponent(Ke){(0,B._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,B._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Se(){const Tt=function te(Tt){const Ke={},Oe={__esModule:!0,initializeApp:function fe(ot,Te={}){const St=B.initializeApp(ot,Te);if((0,p.r3)(Ke,St.name))return Ke[St.name];const Yt=new Tt(St,Oe);return Ke[St.name]=Yt,Yt},app:ft,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Xe(ot){const Te=ot.name,St=Te.replace("-compat","");if(B._registerComponent(ot)&&"PUBLIC"===ot.type){const Yt=(It=ft())=>{if("function"!=typeof It[St])throw we.create("invalid-app-argument",{appName:Te});return It[St]()};void 0!==ot.serviceProps&&(0,p.ZB)(Yt,ot.serviceProps),Oe[St]=Yt,Tt.prototype[St]=function(...It){return this._getService.bind(this,Te).apply(this,ot.multipleInstances?It:[])}}return"PUBLIC"===ot.type?Oe[St]:null},removeApp:function bt(ot){delete Ke[ot]},useAsService:function mt(ot,Te){return"serverAuth"===Te?null:Te},modularAPIs:B}};function ft(ot){if(!(0,p.r3)(Ke,ot=ot||B._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:ot});return Ke[ot]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function et(){return Object.keys(Ke).map(ot=>Ke[ot])}}),ft.App=Tt,Oe}(he);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function Ke(Oe){(0,p.ZB)(Tt,Oe)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Tt}(),ie=new le.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=X;!function Ze(Tt){(0,B.registerVersion)("@firebase/app-compat","0.2.13",Tt)}()},6881:(Nt,ke,R)=>{R.r(ke),R.d(ke,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>vr,_DEFAULT_ENTRY_NAME:()=>Ln,_addComponent:()=>zt,_addOrOverwriteComponent:()=>on,_apps:()=>Pn,_clearComponents:()=>ur,_components:()=>wn,_getProvider:()=>gr,_registerComponent:()=>xn,_removeServiceInstance:()=>Jn,deleteApp:()=>Ne,getApp:()=>mn,getApps:()=>yn,initializeApp:()=>Ft,onLog:()=>H,registerVersion:()=>me,setLogLevel:()=>ne});var p=R(5861),F=R(4859),B=R(1877),le=R(2090);let Ee,we;const X=new WeakMap,ie=new WeakMap,ve=new WeakMap,ut=new WeakMap,Ze=new WeakMap;let Ke={get(Pe,Re,Et){if(Pe instanceof IDBTransaction){if("done"===Re)return ie.get(Pe);if("objectStoreNames"===Re)return Pe.objectStoreNames||ve.get(Pe);if("store"===Re)return Et.objectStoreNames[1]?void 0:Et.objectStore(Et.objectStoreNames[0])}return fe(Pe[Re])},set:(Pe,Re,Et)=>(Pe[Re]=Et,!0),has:(Pe,Re)=>Pe instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in Pe};function ft(Pe){return"function"==typeof Pe?function bt(Pe){return Pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Pe)?function(...Re){return Pe.apply(et(this),Re),fe(X.get(this))}:function(...Re){return fe(Pe.apply(et(this),Re))}:function(Re,...Et){const pt=Pe.call(et(this),Re,...Et);return ve.set(pt,Re.sort?Re.sort():[Re]),fe(pt)}}(Pe):(Pe instanceof IDBTransaction&&function Tt(Pe){if(ie.has(Pe))return;const Re=new Promise((Et,pt)=>{const vn=()=>{Pe.removeEventListener("complete",On),Pe.removeEventListener("error",Gn),Pe.removeEventListener("abort",Gn)},On=()=>{Et(),vn()},Gn=()=>{pt(Pe.error||new DOMException("AbortError","AbortError")),vn()};Pe.addEventListener("complete",On),Pe.addEventListener("error",Gn),Pe.addEventListener("abort",Gn)});ie.set(Pe,Re)}(Pe),((Pe,Re)=>Re.some(Et=>Pe instanceof Et))(Pe,function te(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Pe,Ke):Pe)}function fe(Pe){if(Pe instanceof IDBRequest)return function Ye(Pe){const Re=new Promise((Et,pt)=>{const vn=()=>{Pe.removeEventListener("success",On),Pe.removeEventListener("error",Gn)},On=()=>{Et(fe(Pe.result)),vn()},Gn=()=>{pt(Pe.error),vn()};Pe.addEventListener("success",On),Pe.addEventListener("error",Gn)});return Re.then(Et=>{Et instanceof IDBCursor&&X.set(Et,Pe)}).catch(()=>{}),Ze.set(Re,Pe),Re}(Pe);if(ut.has(Pe))return ut.get(Pe);const Re=ft(Pe);return Re!==Pe&&(ut.set(Pe,Re),Ze.set(Re,Pe)),Re}const et=Pe=>Ze.get(Pe),ot=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],St=new Map;function Yt(Pe,Re){if(!(Pe instanceof IDBDatabase)||Re in Pe||"string"!=typeof Re)return;if(St.get(Re))return St.get(Re);const Et=Re.replace(/FromIndex$/,""),pt=Re!==Et,vn=Te.includes(Et);if(!(Et in(pt?IDBIndex:IDBObjectStore).prototype)||!vn&&!ot.includes(Et))return;const On=function(){var Gn=(0,p.Z)(function*(Cr,...kn){const xr=this.transaction(Cr,vn?"readwrite":"readonly");let Hr=xr.store;return pt&&(Hr=Hr.index(kn.shift())),(yield Promise.all([Hr[Et](...kn),vn&&xr.done]))[0]});return function(kn){return Gn.apply(this,arguments)}}();return St.set(Re,On),On}!function Oe(Pe){Ke=Pe(Ke)}(Pe=>({...Pe,get:(Re,Et,pt)=>Yt(Re,Et)||Pe.get(Re,Et,pt),has:(Re,Et)=>!!Yt(Re,Et)||Pe.has(Re,Et)}));class It{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(Et=>{if(function Gt(Pe){return"VERSION"===Pe.getComponent()?.type}(Et)){const pt=Et.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Et=>Et).join(" ")}}const Rt="@firebase/app",Ve=new B.Yd("@firebase/app"),Ln="[DEFAULT]",Hn={[Rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,wn=new Map;function zt(Pe,Re){try{Pe.container.addComponent(Re)}catch(Et){Ve.debug(`Component ${Re.name} failed to register with FirebaseApp ${Pe.name}`,Et)}}function on(Pe,Re){Pe.container.addOrOverwriteComponent(Re)}function xn(Pe){const Re=Pe.name;if(wn.has(Re))return Ve.debug(`There were multiple attempts to register component ${Re}.`),!1;wn.set(Re,Pe);for(const Et of Pn.values())zt(Et,Pe);return!0}function gr(Pe,Re){const Et=Pe.container.getProvider("heartbeat").getImmediate({optional:!0});return Et&&Et.triggerHeartbeat(),Pe.container.getProvider(Re)}function Jn(Pe,Re,Et=Ln){gr(Pe,Re).clearInstance(Et)}function ur(){wn.clear()}const or=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Re,Et,pt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},Et),this._name=Et.name,this._automaticDataCollectionEnabled=Et.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}const vr="9.23.0";function Ft(Pe,Re={}){let Et=Pe;"object"!=typeof Re&&(Re={name:Re});const pt=Object.assign({name:Ln,automaticDataCollectionEnabled:!1},Re),vn=pt.name;if("string"!=typeof vn||!vn)throw or.create("bad-app-name",{appName:String(vn)});if(Et||(Et=(0,le.aH)()),!Et)throw or.create("no-options");const On=Pn.get(vn);if(On){if((0,le.vZ)(Et,On.options)&&(0,le.vZ)(pt,On.config))return On;throw or.create("duplicate-app",{appName:vn})}const Gn=new F.H0(vn);for(const kn of wn.values())Gn.addComponent(kn);const Cr=new fn(Et,pt,Gn);return Pn.set(vn,Cr),Cr}function mn(Pe=Ln){const Re=Pn.get(Pe);if(!Re&&Pe===Ln&&(0,le.aH)())return Ft();if(!Re)throw or.create("no-app",{appName:Pe});return Re}function yn(){return Array.from(Pn.values())}function Ne(Pe){return vt.apply(this,arguments)}function vt(){return(vt=(0,p.Z)(function*(Pe){const Re=Pe.name;Pn.has(Re)&&(Pn.delete(Re),yield Promise.all(Pe.container.getProviders().map(Et=>Et.delete())),Pe.isDeleted=!0)})).apply(this,arguments)}function me(Pe,Re,Et){var pt;let vn=null!==(pt=Hn[Pe])&&void 0!==pt?pt:Pe;Et&&(vn+=`-${Et}`);const On=vn.match(/\s|\//),Gn=Re.match(/\s|\//);if(On||Gn){const Cr=[`Unable to register library "${vn}" with version "${Re}":`];return On&&Cr.push(`library name "${vn}" contains illegal characters (whitespace or "/")`),On&&Gn&&Cr.push("and"),Gn&&Cr.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void Ve.warn(Cr.join(" "))}xn(new F.wA(`${vn}-version`,()=>({library:vn,version:Re}),"VERSION"))}function H(Pe,Re){if(null!==Pe&&"function"!=typeof Pe)throw or.create("invalid-log-argument");(0,B.Am)(Pe,Re)}function ne(Pe){(0,B.Ub)(Pe)}const ae="firebase-heartbeat-store";let ce=null;function Y(){return ce||(ce=function Xe(Pe,Re,{blocked:Et,upgrade:pt,blocking:vn,terminated:On}={}){const Gn=indexedDB.open(Pe,Re),Cr=fe(Gn);return pt&&Gn.addEventListener("upgradeneeded",kn=>{pt(fe(Gn.result),kn.oldVersion,kn.newVersion,fe(Gn.transaction),kn)}),Et&&Gn.addEventListener("blocked",kn=>Et(kn.oldVersion,kn.newVersion,kn)),Cr.then(kn=>{On&&kn.addEventListener("close",()=>On()),vn&&kn.addEventListener("versionchange",xr=>vn(xr.oldVersion,xr.newVersion,xr))}).catch(()=>{}),Cr}("firebase-heartbeat-database",1,{upgrade:(Pe,Re)=>{0===Re&&Pe.createObjectStore(ae)}}).catch(Pe=>{throw or.create("idb-open",{originalErrorMessage:Pe.message})})),ce}function G(){return(G=(0,p.Z)(function*(Pe){try{return yield(yield Y()).transaction(ae).objectStore(ae).get(Ot(Pe))}catch(Re){if(Re instanceof le.ZR)Ve.warn(Re.message);else{const Et=or.create("idb-get",{originalErrorMessage:Re?.message});Ve.warn(Et.message)}}})).apply(this,arguments)}function De(Pe,Re){return st.apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(Pe,Re){try{const pt=(yield Y()).transaction(ae,"readwrite");yield pt.objectStore(ae).put(Re,Ot(Pe)),yield pt.done}catch(Et){if(Et instanceof le.ZR)Ve.warn(Et.message);else{const pt=or.create("idb-set",{originalErrorMessage:Et?.message});Ve.warn(pt.message)}}})).apply(this,arguments)}function Ot(Pe){return`${Pe.name}!${Pe.options.appId}`}class ue{constructor(Re){this.container=Re,this._heartbeatsCache=null;const Et=this.container.getProvider("app").getImmediate();this._storage=new je(Et),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var Re=this;return(0,p.Z)(function*(){const pt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vn=ee();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==vn&&!Re._heartbeatsCache.heartbeats.some(On=>On.date===vn))return Re._heartbeatsCache.heartbeats.push({date:vn,agent:pt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(On=>{const Gn=new Date(On.date).valueOf();return Date.now()-Gn<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,p.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const Et=ee(),{heartbeatsToSend:pt,unsentEntries:vn}=function Me(Pe,Re=1024){const Et=[];let pt=Pe.slice();for(const vn of Pe){const On=Et.find(Gn=>Gn.agent===vn.agent);if(On){if(On.dates.push(vn.date),Pt(Et)>Re){On.dates.pop();break}}else if(Et.push({agent:vn.agent,dates:[vn.date]}),Pt(Et)>Re){Et.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Et,unsentEntries:pt}}(Re._heartbeatsCache.heartbeats),On=(0,le.L)(JSON.stringify({version:2,heartbeats:pt}));return Re._heartbeatsCache.lastSentHeartbeatDate=Et,vn.length>0?(Re._heartbeatsCache.heartbeats=vn,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),On})()}}function ee(){return(new Date).toISOString().substring(0,10)}class je{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,p.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function K(Pe){return G.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var Et=this;return(0,p.Z)(function*(){var pt;if(yield Et._canUseIndexedDBPromise){const On=yield Et.read();return De(Et.app,{lastSentHeartbeatDate:null!==(pt=Re.lastSentHeartbeatDate)&&void 0!==pt?pt:On.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var Et=this;return(0,p.Z)(function*(){var pt;if(yield Et._canUseIndexedDBPromise){const On=yield Et.read();return De(Et.app,{lastSentHeartbeatDate:null!==(pt=Re.lastSentHeartbeatDate)&&void 0!==pt?pt:On.lastSentHeartbeatDate,heartbeats:[...On.heartbeats,...Re.heartbeats]})}})()}}function Pt(Pe){return(0,le.L)(JSON.stringify({version:2,heartbeats:Pe})).length}!function ln(Pe){xn(new F.wA("platform-logger",Re=>new It(Re),"PRIVATE")),xn(new F.wA("heartbeat",Re=>new ue(Re),"PRIVATE")),me(Rt,"0.9.13",Pe),me(Rt,"0.9.13","esm2017"),me("fire-js","")}("")},4859:(Nt,ke,R)=>{R.d(ke,{H0:()=>te,wA:()=>B});var p=R(5861),F=R(2090);class B{constructor(X,ie,ve){this.name=X,this.instanceFactory=ie,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const le="[DEFAULT]";class he{constructor(X,ie){this.name=X,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const ie=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(ie)){const ve=new F.BH;if(this.instancesDeferred.set(ie,ve),this.isInitialized(ie)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:ie});ut&&ve.resolve(ut)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(X){var ie;const ve=this.normalizeInstanceIdentifier(X?.identifier),ut=null!==(ie=X?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(Ze){if(ut)return null;throw Ze}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function we(Se){return"EAGER"===Se.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[ie,ve]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(ie);try{const Ze=this.getOrInitializeService({instanceIdentifier:ut});ve.resolve(Ze)}catch{}}}}clearInstance(X=le){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,p.Z)(function*(){const ie=Array.from(X.instances.values());yield Promise.all([...ie.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...ie.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=le){return this.instances.has(X)}getOptions(X=le){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:ie={}}=X,ve=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:ve,options:ie});for(const[Ze,Ye]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(Ze)&&Ye.resolve(ut);return ut}onInit(X,ie){var ve;const ut=this.normalizeInstanceIdentifier(ie),Ze=null!==(ve=this.onInitCallbacks.get(ut))&&void 0!==ve?ve:new Set;Ze.add(X),this.onInitCallbacks.set(ut,Ze);const Ye=this.instances.get(ut);return Ye&&X(Ye,ut),()=>{Ze.delete(X)}}invokeOnInitCallbacks(X,ie){const ve=this.onInitCallbacks.get(ie);if(ve)for(const ut of ve)try{ut(X,ie)}catch{}}getOrInitializeService({instanceIdentifier:X,options:ie={}}){let ve=this.instances.get(X);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=X,Se===le?void 0:Se),options:ie}),this.instances.set(X,ve),this.instancesOptions.set(X,ie),this.invokeOnInitCallbacks(ve,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,ve)}catch{}var Se;return ve||null}normalizeInstanceIdentifier(X=le){return this.component?this.component.multipleInstances?X:le:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const ie=this.getProvider(X.name);if(ie.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);ie.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const ie=new he(X,this);return this.providers.set(X,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Nt,ke,R)=>{R.d(ke,{Am:()=>Se,Ub:()=>te,Yd:()=>we,in:()=>F});const p=[];var F=(()=>{return(X=F||(F={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",F;var X})();const B={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},le=F.INFO,he={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Ee=(X,ie,...ve)=>{if(ie<X.logLevel)return;const ut=(new Date).toISOString(),Ze=he[ie];if(!Ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Ze](`[${ut}]  ${X.name}:`,...ve)};class we{constructor(ie){this.name=ie,this._logLevel=le,this._logHandler=Ee,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in F))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?B[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...ie),this._logHandler(this,F.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...ie),this._logHandler(this,F.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,F.INFO,...ie),this._logHandler(this,F.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,F.WARN,...ie),this._logHandler(this,F.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...ie),this._logHandler(this,F.ERROR,...ie)}}function te(X){p.forEach(ie=>{ie.setLogLevel(X)})}function Se(X,ie){for(const ve of p){let ut=null;ie&&ie.level&&(ut=B[ie.level]),ve.userLogHandler=null===X?null:(Ze,Ye,...Tt)=>{const Ke=Tt.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Ye>=(ut??Ze.logLevel)&&X({level:F[Ye].toLowerCase(),message:Ke,args:Tt,type:Ze.name})}}}},259:(Nt,ke,R)=>{R.d(ke,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=R(6881);(0,p.registerVersion)("firebase","9.23.0","app")},9260:(Nt,ke,R)=>{R.d(ke,{Z:()=>p.Z});var p=R(3942);p.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Nt,ke,R)=>{R.r(ke);var p=R(5861),F=R(3942),B=R(1389),le=R(2090),we=(R(6881),R(1877),R(4859));function te(){return window}function ie(){return(ie=(0,p.Z)(function*(Y,K,G){var De;const{BuildInfo:st}=te();(0,B.as)(K.sessionId,"AuthEvent did not contain a session ID");const Ot=yield Oe(K.sessionId),Jt={};return(0,B.at)()?Jt.ibi=st.packageName:(0,B.au)()?Jt.apn=st.packageName:(0,B.av)(Y,"operation-not-supported-in-this-environment"),st.displayName&&(Jt.appDisplayName=st.displayName),Jt.sessionId=Ot,(0,B.aw)(Y,G,K.type,void 0,null!==(De=K.eventId)&&void 0!==De?De:void 0,Jt)})).apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(Y){const{BuildInfo:K}=te(),G={};(0,B.at)()?G.iosBundleId=K.packageName:(0,B.au)()?G.androidPackageName=K.packageName:(0,B.av)(Y,"operation-not-supported-in-this-environment"),yield(0,B.ax)(Y,G)})).apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*(Y,K,G){const{cordova:De}=te();let st=()=>{};try{yield new Promise((Ot,Jt)=>{let se=null;function ue(){var je;Ot();const Pt=null===(je=De.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof Pt&&Pt(),"function"==typeof G?.close&&G.close()}function ee(){se||(se=window.setTimeout(()=>{Jt((0,B.az)(Y,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&ee()}K.addPassiveListener(ue),document.addEventListener("resume",ee,!1),(0,B.au)()&&document.addEventListener("visibilitychange",Me,!1),st=()=>{K.removePassiveListener(ue),document.removeEventListener("resume",ee,!1),document.removeEventListener("visibilitychange",Me,!1),se&&window.clearTimeout(se)}})}finally{st()}})).apply(this,arguments)}function Oe(Y){return bt.apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(Y){const K=ft(Y),G=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(G)).map(st=>st.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ft(Y){if((0,B.as)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const K=new ArrayBuffer(Y.length),G=new Uint8Array(K);for(let De=0;De<Y.length;De++)G[De]=Y.charCodeAt(De);return G}class et extends B.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(K)),super.onEvent(K)}initialized(){var K=this;return(0,p.Z)(function*(){yield K.initPromise})()}}function ot(Y){return Te.apply(this,arguments)}function Te(){return(Te=(0,p.Z)(function*(Y){const K=yield It()._get(Gt(Y));return K&&(yield It()._remove(Gt(Y))),K})).apply(this,arguments)}function Yt(){const Y=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const De=Math.floor(Math.random()*K.length);Y.push(K.charAt(De))}return Y.join("")}function It(){return(0,B.aC)(B.b)}function Gt(Y){return(0,B.aD)("authEvent",Y.config.apiKey,Y.name)}function Ve(Y){if(!Y?.includes("?"))return{};const[K,...G]=Y.split("?");return(0,le.zd)(G.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,B.az)("no-auth-event")}}function Mt(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function tn(Y=(0,le.z$)()){return!("file:"!==Mt()&&"ionic:"!==Mt()&&"capacitor:"!==Mt()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function cn(){try{const Y=self.localStorage,K=B.aL();if(Y)return Y.setItem(K,"1"),Y.removeItem(K),!function Wt(Y=(0,le.z$)()){return function Nn(){return(0,le.w1)()&&11===document?.documentMode}()||function ir(Y=(0,le.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,le.hl)()}catch{return Mn()&&(0,le.hl)()}return!1}function Mn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wn(){return(function qt(){return"http:"===Mt()||"https:"===Mt()}()||(0,le.ru)()||tn())&&!function hn(){return(0,le.b$)()||(0,le.UG)()}()&&cn()&&!Mn()}function Mr(){return tn()&&typeof document<"u"}function Ct(){return(Ct=(0,p.Z)(function*(){return!!Mr()&&new Promise(Y=>{const K=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),Y(!0)})})})).apply(this,arguments)}const Fn={LOCAL:"local",NONE:"none",SESSION:"session"},sr=B.aA,zr="persistence";function Hn(Y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(Y){yield Y._initializationPromise;const K=zt(),G=B.aD(zr,Y.config.apiKey,Y.name);K&&K.setItem(G,Y._getPersistence())})).apply(this,arguments)}function zt(){var Y;try{return(null===(Y=function Tn(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const on=B.aA;class xn{constructor(){this.browserResolver=B.aC(B.k),this.cordovaResolver=B.aC(class ze{constructor(){this._redirectPersistence=B.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(K){var G=this;return(0,p.Z)(function*(){const De=K._key();let st=G.eventManagers.get(De);return st||(st=new et(K),G.eventManagers.set(De,st),G.attachCallbackListeners(K,st)),st})()}_openPopup(K){(0,B.av)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,G,De,st){var Ot=this;return(0,p.Z)(function*(){!function Ke(Y){var K,G,De,st,Ot,Jt,se,ue,ee,Me;const je=te();(0,B.aA)("function"==typeof(null===(K=je?.universalLinks)||void 0===K?void 0:K.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,B.aA)(typeof(null===(G=je?.BuildInfo)||void 0===G?void 0:G.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,B.aA)("function"==typeof(null===(Ot=null===(st=null===(De=je?.cordova)||void 0===De?void 0:De.plugins)||void 0===st?void 0:st.browsertab)||void 0===Ot?void 0:Ot.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(ue=null===(se=null===(Jt=je?.cordova)||void 0===Jt?void 0:Jt.plugins)||void 0===se?void 0:se.browsertab)||void 0===ue?void 0:ue.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(Me=null===(ee=je?.cordova)||void 0===ee?void 0:ee.InAppBrowser)||void 0===Me?void 0:Me.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const Jt=yield Ot._initialize(K);yield Jt.initialized(),Jt.resetRedirect(),(0,B.aG)(),yield Ot._originValidation(K);const se=function Xe(Y,K,G=null){return{type:K,eventId:G,urlResponse:null,sessionId:Yt(),postBody:null,tenantId:Y.tenantId,error:(0,B.az)(Y,"no-auth-event")}}(K,De,st);yield function mt(Y,K){return It()._set(Gt(Y),K)}(K,se);const ue=yield function X(Y,K,G){return ie.apply(this,arguments)}(K,se,G),ee=yield function Ze(Y){const{cordova:K}=te();return new Promise(G=>{K.plugins.browsertab.isAvailable(De=>{let st=null;De?K.plugins.browsertab.openUrl(Y):st=K.InAppBrowser.open(Y,(0,B.ay)()?"_blank":"_system","location=yes"),G(st)})})}(ue);return function Ye(Y,K,G){return Tt.apply(this,arguments)}(K,Jt,ee)})()}_isIframeWebStorageSupported(K,G){throw new Error("Method not implemented.")}_originValidation(K){const G=K._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function ve(Y){return ut.apply(this,arguments)}(K)),this.originValidationPromises[G]}attachCallbackListeners(K,G){const{universalLinks:De,handleOpenURL:st,BuildInfo:Ot}=te(),Jt=setTimeout((0,p.Z)(function*(){yield ot(K),G.onEvent(qe())}),500),se=function(){var Me=(0,p.Z)(function*(je){clearTimeout(Jt);const Pt=yield ot(K);let ln=null;Pt&&je?.url&&(ln=function St(Y,K){var G,De;const st=function ar(Y){const K=Ve(Y),G=K.link?decodeURIComponent(K.link):void 0,De=Ve(G).link,st=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Ve(st).link||st||De||G||Y}(K);if(st.includes("/__/auth/callback")){const Ot=Ve(st),Jt=Ot.firebaseError?function Rt(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent(Ot.firebaseError)):null,se=null===(De=null===(G=Jt?.code)||void 0===G?void 0:G.split("auth/"))||void 0===De?void 0:De[1],ue=se?(0,B.az)(se):null;return ue?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:ue,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:st,postBody:null}}return null}(Pt,je.url)),G.onEvent(ln||qe())});return function(Pt){return Me.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,se);const ue=st,ee=`${Ot.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Me=(0,p.Z)(function*(je){if(je.toLowerCase().startsWith(ee)&&se({url:je}),"function"==typeof ue)try{ue(je)}catch(Pt){console.error(Pt)}});return function(je){return Me.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=B.a,this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(K){var G=this;return(0,p.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,G,De,st){var Ot=this;return(0,p.Z)(function*(){return yield Ot.selectUnderlyingResolver(),Ot.assertedUnderlyingResolver._openPopup(K,G,De,st)})()}_openRedirect(K,G,De,st){var Ot=this;return(0,p.Z)(function*(){return yield Ot.selectUnderlyingResolver(),Ot.assertedUnderlyingResolver._openRedirect(K,G,De,st)})()}_isIframeWebStorageSupported(K,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,G)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Mr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return on(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,p.Z)(function*(){if(K.underlyingResolver)return;const G=yield function Pr(){return Ct.apply(this,arguments)}();K.underlyingResolver=G?K.cordovaResolver:K.browserResolver})()}}function gr(Y){return Y.unwrap()}function ur(Y){return or(Y)}function or(Y){const{_tokenResponse:K}=Y instanceof le.ZR?Y.customData:Y;if(!K)return null;if(!(Y instanceof le.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return B.P.credentialFromResult(Y);const G=K.providerId;if(!G||G===B.p.PASSWORD)return null;let De;switch(G){case B.p.GOOGLE:De=B.V;break;case B.p.FACEBOOK:De=B.U;break;case B.p.GITHUB:De=B.W;break;case B.p.TWITTER:De=B.Z;break;default:const{oauthIdToken:st,oauthAccessToken:Ot,oauthTokenSecret:Jt,pendingToken:se,nonce:ue}=K;return Ot||Jt||st||se?se?G.startsWith("saml.")?B.aO._create(G,se):B.L._fromParams({providerId:G,signInMethod:G,pendingToken:se,idToken:st,accessToken:Ot}):new B.X(G).credential({idToken:st,accessToken:Ot,rawNonce:ue}):null}return Y instanceof le.ZR?De.credentialFromError(Y):De.credentialFromResult(Y)}function fn(Y,K){return K.catch(G=>{throw G instanceof le.ZR&&function nn(Y,K){var G;const De=null===(G=K.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===K?.code)K.resolver=new mn(Y,B.aq(Y,K));else if(De){const st=or(K),Ot=K;st&&(Ot.credential=st,Ot.tenantId=De.tenantId||void 0,Ot.email=De.email||void 0,Ot.phoneNumber=De.phoneNumber||void 0)}}(Y,G),G}).then(G=>{const st=G.user;return{operationType:G.operationType,credential:ur(G),additionalUserInfo:B.ao(G),user:yn.getOrCreate(st)}})}function vr(Y,K){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(Y,K){const G=yield K;return{verificationId:G.verificationId,confirm:De=>fn(Y,G.confirm(De))}})).apply(this,arguments)}class mn{constructor(K,G){this.resolver=G,this.auth=function Jn(Y){return Y.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return fn(gr(this.auth),this.resolver.resolveSignIn(K))}}class yn{constructor(K){this._delegate=K,this.multiFactor=B.ar(K)}static getOrCreate(K){return yn.USER_MAP.has(K)||yn.USER_MAP.set(K,new yn(K)),yn.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var G=this;return(0,p.Z)(function*(){return fn(G.auth,B.a0(G._delegate,K))})()}linkWithPhoneNumber(K,G){var De=this;return(0,p.Z)(function*(){return vr(De.auth,B.l(De._delegate,K,G))})()}linkWithPopup(K){var G=this;return(0,p.Z)(function*(){return fn(G.auth,B.d(G._delegate,K,xn))})()}linkWithRedirect(K){var G=this;return(0,p.Z)(function*(){return yield Hn(B.aH(G.auth)),B.g(G._delegate,K,xn)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var G=this;return(0,p.Z)(function*(){return fn(G.auth,B.a1(G._delegate,K))})()}reauthenticateWithPhoneNumber(K,G){return vr(this.auth,B.r(this._delegate,K,G))}reauthenticateWithPopup(K){return fn(this.auth,B.e(this._delegate,K,xn))}reauthenticateWithRedirect(K){var G=this;return(0,p.Z)(function*(){return yield Hn(B.aH(G.auth)),B.h(G._delegate,K,xn)})()}sendEmailVerification(K){return B.ae(this._delegate,K)}unlink(K){var G=this;return(0,p.Z)(function*(){return yield B.an(G._delegate,K),G})()}updateEmail(K){return B.aj(this._delegate,K)}updatePassword(K){return B.ak(this._delegate,K)}updatePhoneNumber(K){return B.u(this._delegate,K)}updateProfile(K){return B.ai(this._delegate,K)}verifyBeforeUpdateEmail(K,G){return B.af(this._delegate,K,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yn.USER_MAP=new WeakMap;const Ne=B.aA;let vt=(()=>{class Y{constructor(G,De){if(this.app=G,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:st}=G.options;Ne(st,"invalid-api-key",{appName:G.name}),Ne(st,"invalid-api-key",{appName:G.name});const Ot=typeof window<"u"?xn:void 0;this._delegate=De.initialize({options:{persistence:H(st,G.name),popupRedirectResolver:Ot}}),this._delegate._updateErrorMap(B.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,De){B.I(this._delegate,G,De)}applyActionCode(G){return B.a5(this._delegate,G)}checkActionCode(G){return B.a6(this._delegate,G)}confirmPasswordReset(G,De){return B.a4(this._delegate,G,De)}createUserWithEmailAndPassword(G,De){var st=this;return(0,p.Z)(function*(){return fn(st._delegate,B.a8(st._delegate,G,De))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return B.ad(this._delegate,G)}isSignInWithEmailLink(G){return B.ab(this._delegate,G)}getRedirectResult(){var G=this;return(0,p.Z)(function*(){Ne(Wn(),G._delegate,"operation-not-supported-in-this-environment");const De=yield B.j(G._delegate,xn);return De?fn(G._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function ct(Y,K){(0,B.aH)(Y)._logFramework(K)}(this._delegate,G)}onAuthStateChanged(G,De,st){const{next:Ot,error:Jt,complete:se}=me(G,De,st);return this._delegate.onAuthStateChanged(Ot,Jt,se)}onIdTokenChanged(G,De,st){const{next:Ot,error:Jt,complete:se}=me(G,De,st);return this._delegate.onIdTokenChanged(Ot,Jt,se)}sendSignInLinkToEmail(G,De){return B.aa(this._delegate,G,De)}sendPasswordResetEmail(G,De){return B.a3(this._delegate,G,De||void 0)}setPersistence(G){var De=this;return(0,p.Z)(function*(){let st;switch(function Ln(Y,K){sr(Object.values(Fn).includes(K),Y,"invalid-persistence-type"),(0,le.b$)()?sr(K!==Fn.SESSION,Y,"unsupported-persistence-type"):(0,le.UG)()?sr(K===Fn.NONE,Y,"unsupported-persistence-type"):Mn()?sr(K===Fn.NONE||K===Fn.LOCAL&&(0,le.hl)(),Y,"unsupported-persistence-type"):sr(K===Fn.NONE||cn(),Y,"unsupported-persistence-type")}(De._delegate,G),G){case Fn.SESSION:st=B.a;break;case Fn.LOCAL:st=(yield B.aC(B.i)._isAvailable())?B.i:B.b;break;case Fn.NONE:st=B.N;break;default:return B.av("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(st)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return fn(this._delegate,B._(this._delegate))}signInWithCredential(G){return fn(this._delegate,B.$(this._delegate,G))}signInWithCustomToken(G){return fn(this._delegate,B.a2(this._delegate,G))}signInWithEmailAndPassword(G,De){return fn(this._delegate,B.a9(this._delegate,G,De))}signInWithEmailLink(G,De){return fn(this._delegate,B.ac(this._delegate,G,De))}signInWithPhoneNumber(G,De){return vr(this._delegate,B.s(this._delegate,G,De))}signInWithPopup(G){var De=this;return(0,p.Z)(function*(){return Ne(Wn(),De._delegate,"operation-not-supported-in-this-environment"),fn(De._delegate,B.c(De._delegate,G,xn))})()}signInWithRedirect(G){var De=this;return(0,p.Z)(function*(){return Ne(Wn(),De._delegate,"operation-not-supported-in-this-environment"),yield Hn(De._delegate),B.f(De._delegate,G,xn)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return B.a7(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=Fn,Y})();function me(Y,K,G){let De=Y;"function"!=typeof Y&&({next:De,error:K,complete:G}=Y);const st=De;return{next:Jt=>st(Jt&&yn.getOrCreate(Jt)),error:K,complete:G}}function H(Y,K){const G=function wn(Y,K){const G=zt();if(!G)return[];const De=B.aD(zr,Y,K);switch(G.getItem(De)){case Fn.NONE:return[B.N];case Fn.LOCAL:return[B.i,B.a];case Fn.SESSION:return[B.a];default:return[]}}(Y,K);if(typeof self<"u"&&!G.includes(B.i)&&G.push(B.i),typeof window<"u")for(const De of[B.b,B.a])G.includes(De)||G.push(De);return G.includes(B.N)||G.push(B.N),G}class ne{constructor(){this.providerId="phone",this._delegate=new B.P(gr(F.Z.auth()))}static credential(K,G){return B.P.credential(K,G)}verifyPhoneNumber(K,G){return this._delegate.verifyPhoneNumber(K,G)}unwrap(){return this._delegate}}ne.PHONE_SIGN_IN_METHOD=B.P.PHONE_SIGN_IN_METHOD,ne.PROVIDER_ID=B.P.PROVIDER_ID;const Fe=B.aA;class it{constructor(K,G,De=F.Z.app()){var st;Fe(null===(st=De.options)||void 0===st?void 0:st.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new B.R(K,G,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ce(Y){Y.INTERNAL.registerComponent(new we.wA("auth-compat",K=>{const G=K.getProvider("app-compat").getImmediate(),De=K.getProvider("auth");return new vt(G,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:B.A.EMAIL_SIGNIN,PASSWORD_RESET:B.A.PASSWORD_RESET,RECOVER_EMAIL:B.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:B.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:B.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:B.A.VERIFY_EMAIL}},EmailAuthProvider:B.Q,FacebookAuthProvider:B.U,GithubAuthProvider:B.W,GoogleAuthProvider:B.V,OAuthProvider:B.X,SAMLAuthProvider:B.Y,PhoneAuthProvider:ne,PhoneMultiFactorGenerator:B.m,RecaptchaVerifier:it,TwitterAuthProvider:B.Z,Auth:vt,AuthCredential:B.J,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.4.2")}(F.Z)},5861:(Nt,ke,R)=>{function p(B,le,he,Ee,we,te,Se){try{var X=B[te](Se),ie=X.value}catch(ve){return void he(ve)}X.done?le(ie):Promise.resolve(ie).then(Ee,we)}function F(B){return function(){var le=this,he=arguments;return new Promise(function(Ee,we){var te=B.apply(le,he);function Se(ie){p(te,Ee,we,Se,X,"next",ie)}function X(ie){p(te,Ee,we,Se,X,"throw",ie)}Se(void 0)})}}R.d(ke,{Z:()=>F})},7582:(Nt,ke,R)=>{function le(Ve,Le){var ze={};for(var Be in Ve)Object.prototype.hasOwnProperty.call(Ve,Be)&&Le.indexOf(Be)<0&&(ze[Be]=Ve[Be]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(Be=Object.getOwnPropertySymbols(Ve);qe<Be.length;qe++)Le.indexOf(Be[qe])<0&&Object.prototype.propertyIsEnumerable.call(Ve,Be[qe])&&(ze[Be[qe]]=Ve[Be[qe]])}return ze}function ve(Ve,Le,ze,Be){return new(ze||(ze=Promise))(function(ct,yt){function ht(qt){try{Mt(Be.next(qt))}catch(tn){yt(tn)}}function $t(qt){try{Mt(Be.throw(qt))}catch(tn){yt(tn)}}function Mt(qt){qt.done?ct(qt.value):function qe(ct){return ct instanceof ze?ct:new ze(function(yt){yt(ct)})}(qt.value).then(ht,$t)}Mt((Be=Be.apply(Ve,Le||[])).next())})}function fe(Ve){return this instanceof fe?(this.v=Ve,this):new fe(Ve)}function et(Ve,Le,ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Be=ze.apply(Ve,Le||[]),ct=[];return qe={},yt("next"),yt("throw"),yt("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function yt(hn){Be[hn]&&(qe[hn]=function(Nn){return new Promise(function(ir,Wt){ct.push([hn,Nn,ir,Wt])>1||ht(hn,Nn)})})}function ht(hn,Nn){try{!function $t(hn){hn.value instanceof fe?Promise.resolve(hn.value.v).then(Mt,qt):tn(ct[0][2],hn)}(Be[hn](Nn))}catch(ir){tn(ct[0][3],ir)}}function Mt(hn){ht("next",hn)}function qt(hn){ht("throw",hn)}function tn(hn,Nn){hn(Nn),ct.shift(),ct.length&&ht(ct[0][0],ct[0][1])}}function mt(Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Le=Ve[Symbol.asyncIterator];return Le?Le.call(Ve):(Ve=function Tt(Ve){var Le="function"==typeof Symbol&&Symbol.iterator,ze=Le&&Ve[Le],Be=0;if(ze)return ze.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&Be>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[Be++],done:!Ve}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ve),ze={},Be("next"),Be("throw"),Be("return"),ze[Symbol.asyncIterator]=function(){return this},ze);function Be(ct){ze[ct]=Ve[ct]&&function(yt){return new Promise(function(ht,$t){!function qe(ct,yt,ht,$t){Promise.resolve($t).then(function(Mt){ct({value:Mt,done:ht})},yt)}(ht,$t,(yt=Ve[ct](yt)).done,yt.value)})}}}R.d(ke,{FC:()=>et,KL:()=>mt,_T:()=>le,mG:()=>ve,qq:()=>fe})}},Nt=>{Nt(Nt.s=2445)}]);