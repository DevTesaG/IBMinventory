"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[282],{7915:(P,h,s)=>{s.d(h,{U:()=>B});var e=s(4650),p=s(4985),v=s(8179),f=s(4006),_=s(6895),g=s(2121);function b(r,d){if(1&r&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&r){const t=d.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t," ")}}const c=function(r){return{"is-invalid":r}};function x(r,d){if(1&r&&(e.TgZ(0,"select",11)(1,"option",12),e._uU(2,"Seleccione una opcion"),e.qZA(),e.YNc(3,b,2,2,"option",13),e.qZA()),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("id",t.label)("name",t.label)("ngClass",e.VKq(6,c,(i.f[t.label].touched||i.submitted)&&i.f[t.label].errors))("formControlName",t.label),e.xp6(1),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",t.value)}}function o(r,d){if(1&r&&e._UZ(0,"input",15),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.Tol("form-control"+t.classlist),e.Q6J("formControlName",t.label)("id",t.label)("name",t.label)("type",t.type)("placeholder",t.placeholder)("value",t.valueCallback?t.getValue():t.value)("ngClass",e.VKq(10,c,(i.f[t.label].touched||i.submitted)&&i.f[t.label].errors))("readonly",i.mode||t.readonly)}}function n(r,d){1&r&&(e.TgZ(0,"div"),e._uU(1,"El Email es invalido"),e.qZA())}function a(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.placeholder," es requerido ")}}function l(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.placeholder," debe estar seleccionado ")}}function u(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.placeholder," no tiene el patron requerido ")}}function C(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," debe tener almenos ",i.f[t.label].errors.minlength.requiredLength," caracteres ")}}function M(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," debe tener menos de ",i.f[t.label].errors.maxlength.requiredLength," caracteres ")}}function w(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," debe tener menos de ",i.f[t.label].errors.maxlength.requiredLength," caracteres ")}}function T(r,d){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.AsE(" ",t.placeholder," ",i.f[t.label].errors.custom,"")}}function I(r,d){if(1&r&&(e.TgZ(0,"div",16),e.YNc(1,n,2,0,"div",17),e.YNc(2,a,2,1,"div",17),e.YNc(3,l,2,1,"div",17),e.YNc(4,u,2,1,"div",17),e.YNc(5,C,2,2,"div",17),e.YNc(6,M,2,2,"div",17),e.YNc(7,w,2,2,"div",17),e.YNc(8,T,2,2,"div",17),e.qZA()),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.email),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.required),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.requiredTrue),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.pattern),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.minlength),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.maxlength),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.maxlength),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors.custom)}}function O(r,d){1&r&&e._UZ(0,"div",18)}function A(r,d){if(1&r&&(e.TgZ(0,"div",5),e.YNc(1,x,4,8,"select",6),e.YNc(2,o,1,12,"input",7),e.TgZ(3,"label",8),e._uU(4),e.qZA(),e.YNc(5,I,9,8,"div",9),e.YNc(6,O,1,0,"div",10),e.qZA()),2&r){const t=d.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf","select"==t.type),e.xp6(1),e.Q6J("ngIf","select"!=t.type),e.xp6(1),e.Q6J("for",t.label),e.xp6(1),e.hij("",t.placeholder," "),e.xp6(1),e.Q6J("ngIf",i.f[t.label].errors),e.xp6(1),e.Q6J("ngIf","radio"==t.type)}}function D(r,d){if(1&r&&(e.TgZ(0,"div",3),e.YNc(1,A,7,6,"div",4),e.qZA()),2&r){const t=d.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function R(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"app-warn-modal",20),e.NdJ("continue",function(m){e.CHM(t);const E=e.oxw();return e.KtG(E.onSubmit(m))})("modalMessage",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.modalMessage)}),e.qZA(),e.TgZ(2,"button",21),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.onReset())}),e._uU(3," Resetear "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("btnMessage",t.btnMes)}}let B=(()=>{class r{constructor(t,i){this.cdref=t,this.fb=i,this.formModel=new e.vpe,this.reject=new e.vpe,this.mode=!1,this.showBtns=!0,this.btnMes="Registrar",this.modalMessage="\xbf Desea continuar con este proceso ? ",this.formObj=[[new p.O("Nombre Completo","fullname","text"),new p.O("Nombre de Usuario","username","text")],[new p.O("Correo Electronico","email","text")],[new p.O("Password","password","password"),new p.O("Confirmar Password","Confirm Password","password")],[new p.O("Aceptar los Terminos","Accept Terms","radio",[],"form-check-input",!1)]],this.continue=!1,this.submitted=!1,this.firstCall=!0}ngOnInit(){var t={};t=this.formObj.flat().reduce((i,m)=>{if(this.placeHolder){var E=this.placeHolder[m.getLabel()];E instanceof v.EK&&(E=this.formatDateString(E.toDate().toLocaleDateString())),m.control?.patchValue(E)}return this.mode&&m.control?.clearValidators(),i[m.label]=m.control,i},t),this._form=this.fb.group(t)}get f(){return this._form.controls}onContinue(t){this.continue=t}initPlaceHolder(){this.placeHolder&&this.formObj.forEach(t=>t.forEach(i=>{if(this.placeHolder){var m=this.placeHolder[i.getLabel()];m instanceof v.EK&&(m=this.formatDateString(m.toDate().toLocaleDateString())),this.f[i.getLabel()].patchValue(m)}}))}ngOnChanges(){this.firstCall||this.initPlaceHolder(),this.firstCall=!1}formatDateString(t){return t.split("/").reverse().join("/").replace(/\//g,"-")}ngAfterContentChecked(){this.cdref.detectChanges()}onSubmit(t){this.submitted=!0,!this._form.invalid&&this.formModel.emit(this._form.getRawValue())}onReset(){this._form.reset(),this.continue=!1,this.submitted=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(f.j3))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-form"]],inputs:{placeHolder:"placeHolder",mode:"mode",showBtns:"showBtns",btnMes:"btnMes",modalMessage:"modalMessage",formObj:"formObj"},outputs:{formModel:"formModel",reject:"reject"},features:[e.TTD],decls:3,vars:3,consts:[["name","form",3,"formGroup","ngSubmit"],["class","input-group mb-2",4,"ngFor","ngForOf"],["class","form-group mt-3",4,"ngIf"],[1,"input-group","mb-2"],["class","form-floating",4,"ngFor","ngForOf"],[1,"form-floating"],["class","form-select",3,"id","name","ngClass","formControlName",4,"ngIf"],["oninput","this.value = this.value.toLowerCase()","min","1","step","1",3,"formControlName","class","id","name","type","placeholder","value","ngClass","readonly",4,"ngIf"],[1,"",3,"for"],["class","invalid-feedback",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"form-select",3,"id","name","ngClass","formControlName"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["oninput","this.value = this.value.toLowerCase()","min","1","step","1",3,"formControlName","id","name","type","placeholder","value","ngClass","readonly"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-4"],[1,"form-group","mt-3"],["id","1","name","btn1","type","submit",3,"btnMessage","continue","modalMessage"],["type","button",1,"ms-2","btn","btn-outline-primary","rounded-pill",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onContinue(!0)}),e.YNc(1,D,2,1,"div",1),e.YNc(2,R,4,1,"div",2),e.qZA()),2&t&&(e.Q6J("formGroup",i._form),e.xp6(1),e.Q6J("ngForOf",i.formObj),e.xp6(1),e.Q6J("ngIf",!i.mode&&i.showBtns))},dependencies:[_.mk,_.sg,_.O5,f._Y,f.YN,f.Kr,f.Fj,f.EJ,f.JJ,f.JL,f.sg,f.u,g.u]}),r})()},4985:(P,h,s)=>{s.d(h,{O:()=>v});var e=s(4006),p=s(8505);class v{constructor(_,g,b,c=[e.kI.required],x,o,n,a,l=!1){this.value=x,this.label=g,this.type=b,this.placeholder=_,this.classlist=o||" ",this.ref=a||void 0,this.valueCallback=n,this.readonly=l,c.push(e.kI.required),this.control=new e.NI({value:null,disabled:l},c),this.respondTo$=this.control.valueChanges.pipe((0,p.b)({next:n,error:u=>console.log(u),complete:()=>console.log("Completed")}))}setReadOnly(_){return this.readonly=_,this}setValue(_){return this.value=_,this}getValue(){this.value=this.ref?this.valueCallback(...this.ref.map(_=>_.value)):this.valueCallback()}getLabel(){return this.label}}},3602:(P,h,s)=>{s.d(h,{N:()=>e});class e{}},490:(P,h,s)=>{s.d(h,{y:()=>b});var e=s(9646),p=s(5698),v=s(4004),f=s(8179),_=s(4650),g=s(33);let b=(()=>{class c{constructor(o){this.db=o,this.dbPath="/RMreport",this.InvRawMaterialsRef=o.collection(this.dbPath)}getNextBatch(o,n){return this.db.collection(this.dbPath,n?a=>a.orderBy("materialId","desc").startAfter(n.materialId).limit(o):a=>a.orderBy("materialId","desc").limit(o))}getAll(){return this.InvRawMaterialsRef}create(o,n){return n?this.InvRawMaterialsRef.doc(n).set(o):this.InvRawMaterialsRef.add({...o})}update(o,n){return console.log("Update",o,n),this.InvRawMaterialsRef.doc(o).update({timestamp:f.EK.fromDate(new Date),...n})}delete(o){return this.InvRawMaterialsRef.doc(o).delete()}getStock(o){return o?this.InvRawMaterialsRef.doc(o).get().pipe((0,p.q)(1),(0,v.U)(a=>({id:a.id,available:a.data()?a.data()?.available:0,wating:a.data()?a.data()?.wating:0,watingCommited:a.data()?a.data()?.watingCommited:0,commited:a.data()?a.data()?.commited:0}))):(0,e.of)({})}filterByDateBatch(o,n,a,l,u){return console.log(a),this.db.collection(this.dbPath,C=>C.where("timestamp",">=",o).where("timestamp","<=",n).orderBy("timestamp","desc").limit(l))}filterByNameBatch(o,n,a){return this.db.collection(this.dbPath,a?l=>l.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").startAfter(a.name).limit(n):l=>l.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").limit(n))}filterByCodeBatch(o,n,a){return this.db.collection(this.dbPath,a?l=>l.where("code",">=",o).where("code","<=",o+"\uf8ff").orderBy("code","desc").startAfter(a.code).limit(n):l=>l.where("code",">=",o).where("code","<=",o+"\uf8ff").orderBy("code","desc").limit(n))}}return c.\u0275fac=function(o){return new(o||c)(_.LFG(g.ST))},c.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5872:(P,h,s)=>{s.d(h,{H:()=>b});var e=s(5861),p=s(4004),v=s(7886),f=s(5577),_=s(4650),g=s(33);let b=(()=>{class c{constructor(o){this.db=o,this.dbPath="/providers",this.ProvidersRef=o.collection(this.dbPath)}getNextBatch(o,n){return this.db.collection(this.dbPath,n?a=>a.orderBy("materialId","desc").startAfter(n.materialId).limit(o):a=>a.orderBy("materialId","desc").limit(o))}getAll(){return this.ProvidersRef}getById(o){return this.ProvidersRef.doc(o).valueChanges({idField:"id"})}create(o){return this.ProvidersRef.add({...o})}update(o,n){return console.log("Update",o,n),this.ProvidersRef.doc(o).update(n)}delete(o){return this.db.collection(this.dbPath,n=>n.where("materialId","==",o)).get().pipe((0,p.U)(n=>n.docs),(0,v.u)(),(0,f.z)(n=>n.ref.delete()))}getProvidersByMaterial(o){var n=this;return(0,e.Z)(function*(){return o?new Promise(function(){var a=(0,e.Z)(function*(l){n.db.collection(n.dbPath,u=>u.where("materialId","==",o)).snapshotChanges().pipe((0,p.U)(u=>u.map(C=>({id:C.payload.doc.id,...C.payload.doc.data()})))).subscribe(u=>{l(u)})});return function(l){return a.apply(this,arguments)}}()):[]})()}filterByNameBatch(o,n,a){return this.db.collection(this.dbPath,a?l=>l.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").startAfter(a.name).limit(n):l=>l.where("name",">=",o).where("name","<=",o+"\uf8ff").orderBy("name","desc").limit(n))}}return c.\u0275fac=function(o){return new(o||c)(_.LFG(g.ST))},c.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);