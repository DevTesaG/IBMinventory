"use strict";(self.webpackChunkInvFurniture=self.webpackChunkInvFurniture||[]).push([[179],{6217:(Lt,Le,R)=>{R.d(Le,{nm:()=>xs});var p=R(4976);R(4650),R(259);var fe=R(5861),Xe=R(6881),nt=R(4859),yt=R(2090),st=R(1877);const Se=new Map,xt={activated:!1,tokenObservers:[]},Yt={initialized:!1,enabled:!1};function It(Ae){return Se.get(Ae)||Object.assign({},xt)}function Nt(){return Yt}class ht{constructor(Ie,Ve,ct,Rt,Cn){if(this.operation=Ie,this.retryPolicy=Ve,this.getWaitDuration=ct,this.lowerBound=Rt,this.upperBound=Cn,this.pending=null,this.nextErrorWaitInterval=Rt,Rt>Cn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var Ve=this;return(0,fe.Z)(function*(){Ve.stop();try{Ve.pending=new yt.BH,yield function lt(Ae){return new Promise(Ie=>{setTimeout(Ie,Ae)})}(Ve.getNextRun(Ie)),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new yt.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(ct){Ve.retryPolicy(ct)?Ve.process(!1).catch(()=>{}):Ve.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const jt=new yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Qt(Ae){if(!It(Ae).activated)throw jt.create("use-before-activation",{appName:Ae.name})}function $n(Ae,Ie){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,fe.Z)(function*({url:Ae,body:Ie},Ve){const ct={"Content-Type":"application/json"},Rt=Ve.getImmediate({optional:!0});if(Rt){const Qr=yield Rt.getHeartbeatsHeader();Qr&&(ct["X-Firebase-Client"]=Qr)}const Cn={method:"POST",body:JSON.stringify(Ie),headers:ct};let Xn,qn;try{Xn=yield fetch(Ae,Cn)}catch(Qr){throw jt.create("fetch-network-error",{originalErrorMessage:Qr?.message})}if(200!==Xn.status)throw jt.create("fetch-status-error",{httpStatus:Xn.status});try{qn=yield Xn.json()}catch(Qr){throw jt.create("fetch-parse-error",{originalErrorMessage:Qr?.message})}const On=qn.ttl.match(/^([\d.]+)(s)$/);if(!On||!On[2]||isNaN(Number(On[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${qn.ttl}`});const Ui=1e3*Number(On[1]),Yr=Date.now();return{token:qn.token,expireTimeMillis:Yr+Ui,issuedAtTimeMillis:Yr}})).apply(this,arguments)}function An(Ae,Ie){const{projectId:Ve,appId:ct,apiKey:Rt}=Ae.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ve}/apps/${ct}:exchangeDebugToken?key=${Rt}`,body:{debug_token:Ie}}}const kr="firebase-app-check-store";let gn=null;function Bn(){return gn||(gn=new Promise((Ae,Ie)=>{try{const Ve=indexedDB.open("firebase-app-check-database",1);Ve.onsuccess=ct=>{Ae(ct.target.result)},Ve.onerror=ct=>{var Rt;Ie(jt.create("storage-open",{originalErrorMessage:null===(Rt=ct.target.error)||void 0===Rt?void 0:Rt.message}))},Ve.onupgradeneeded=ct=>{0===ct.oldVersion&&ct.target.result.createObjectStore(kr,{keyPath:"compositeKey"})}}catch(Ve){Ie(jt.create("storage-open",{originalErrorMessage:Ve?.message}))}}),gn)}function dn(){return(dn=(0,fe.Z)(function*(Ae,Ie){const ct=(yield Bn()).transaction(kr,"readwrite"),Cn=ct.objectStore(kr).put({compositeKey:Ae,value:Ie});return new Promise((Xn,qn)=>{Cn.onsuccess=On=>{Xn()},ct.onerror=On=>{var Ui;qn(jt.create("storage-set",{originalErrorMessage:null===(Ui=On.target.error)||void 0===Ui?void 0:Ui.message}))}})})).apply(this,arguments)}const mr=new st.Yd("@firebase/app-check");function rn(Ae,Ie){return(0,yt.hl)()?function jr(Ae,Ie){return function Pn(Ae,Ie){return dn.apply(this,arguments)}(function Mn(Ae){return`${Ae.options.appId}-${Ae.name}`}(Ae),Ie)}(Ae,Ie).catch(Ve=>{mr.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function Fr(){return Nt().enabled}function wn(){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,fe.Z)(function*(){const Ae=Nt();if(Ae.enabled&&Ae.token)return Ae.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Et={error:"UNKNOWN_ERROR"};function Qe(Ae){return yt.US.encodeString(JSON.stringify(Ae),!1)}function ke(Ae){return H.apply(this,arguments)}function H(){return(H=(0,fe.Z)(function*(Ae,Ie=!1){const Ve=Ae.app;Qt(Ve);const ct=It(Ve);let Cn,Rt=ct.token;if(Rt&&!G(Rt)&&(ct.token=void 0,Rt=void 0),!Rt){const On=yield ct.cachedTokenPromise;On&&(G(On)?Rt=On:yield rn(Ve,void 0))}if(!Ie&&Rt&&G(Rt))return{token:Rt.token};let qn,Xn=!1;if(Fr()){ct.exchangeTokenPromise||(ct.exchangeTokenPromise=$n(An(Ve,yield wn()),Ae.heartbeatServiceProvider).finally(()=>{ct.exchangeTokenPromise=void 0}),Xn=!0);const On=yield ct.exchangeTokenPromise;return yield rn(Ve,On),ct.token=On,{token:On.token}}try{ct.exchangeTokenPromise||(ct.exchangeTokenPromise=ct.provider.getToken().finally(()=>{ct.exchangeTokenPromise=void 0}),Xn=!0),Rt=yield It(Ve).exchangeTokenPromise}catch(On){"appCheck/throttled"===On.code?mr.warn(On.message):mr.error(On),Cn=On}return Rt?Cn?qn=G(Rt)?{token:Rt.token,internalError:Cn}:De(Cn):(qn={token:Rt.token},ct.token=Rt,yield rn(Ve,Rt)):qn=De(Cn),Xn&&Y(Ve,qn),qn})).apply(this,arguments)}function Fe(){return(Fe=(0,fe.Z)(function*(Ae){const Ie=Ae.app;Qt(Ie);const{provider:Ve}=It(Ie);if(Fr()){const ct=yield wn(),{token:Rt}=yield $n(An(Ie,ct),Ae.heartbeatServiceProvider);return{token:Rt}}{const{token:ct}=yield Ve.getToken();return{token:ct}}})).apply(this,arguments)}function se(Ae,Ie){const Ve=It(Ae),ct=Ve.tokenObservers.filter(Rt=>Rt.next!==Ie);0===ct.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),Ve.tokenObservers=ct}function de(Ae){const{app:Ie}=Ae,Ve=It(Ie);let ct=Ve.tokenRefresher;ct||(ct=function K(Ae){const{app:Ie}=Ae;return new ht((0,fe.Z)(function*(){let ct;if(ct=It(Ie).token?yield ke(Ae,!0):yield ke(Ae),ct.error)throw ct.error;if(ct.internalError)throw ct.internalError}),()=>!0,()=>{const Ve=It(Ie);if(Ve.token){let ct=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return ct=Math.min(ct,Ve.token.expireTimeMillis-3e5),Math.max(0,ct-Date.now())}return 0},3e4,96e4)}(Ae),Ve.tokenRefresher=ct),!ct.isRunning()&&Ve.isTokenAutoRefreshEnabled&&ct.start()}function Y(Ae,Ie){const Ve=It(Ae).tokenObservers;for(const ct of Ve)try{"EXTERNAL"===ct.type&&null!=Ie.error?ct.error(Ie.error):ct.next(Ie)}catch{}}function G(Ae){return Ae.expireTimeMillis-Date.now()>0}function De(Ae){return{token:Qe(Et),error:Ae}}class ot{constructor(Ie,Ve){this.app=Ie,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:Ie}=It(this.app);for(const Ve of Ie)se(this.app,Ve.next);return Promise.resolve()}}const Li="app-check-internal";!function ri(){(0,Xe._registerComponent)(new nt.wA("app-check",Ae=>function kt(Ae,Ie){return new ot(Ae,Ie)}(Ae.getProvider("app").getImmediate(),Ae.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ae,Ie,Ve)=>{Ae.getProvider(Li).initialize()})),(0,Xe._registerComponent)(new nt.wA(Li,Ae=>function en(Ae){return{getToken:Ie=>ke(Ae,Ie),getLimitedUseToken:()=>function oe(Ae){return Fe.apply(this,arguments)}(Ae),addTokenListener:Ie=>function pt(Ae,Ie,Ve,ct){const{app:Rt}=Ae,Cn=It(Rt);if(Cn.tokenObservers=[...Cn.tokenObservers,{next:Ve,error:ct,type:Ie}],Cn.token&&G(Cn.token)){const qn=Cn.token;Promise.resolve().then(()=>{Ve({token:qn.token}),de(Ae)}).catch(()=>{})}Cn.cachedTokenPromise.then(()=>de(Ae))}(Ae,"INTERNAL",Ie),removeTokenListener:Ie=>se(Ae.app,Ie)}}(Ae.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.8.0")}();class xs{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Lt,Le,R)=>{R.d(Le,{zQ:()=>Or,rT:()=>Yt,f7:()=>Bt,L6:()=>Se,_Q:()=>xt,lh:()=>It,Qv:()=>st,nw:()=>Nt});var p=R(4650),F=R(7579),B=R(9646),le=R(9751),he=R(8996),we=R(6451),Ee=R(5363),te=R(3900),_e=R(4004),ee=R(6063);class ue extends F.x{constructor(qe=1/0,He=1/0,Ge=ee.l){super(),this._bufferSize=qe,this._windowTime=He,this._timestampProvider=Ge,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=He===1/0,this._bufferSize=Math.max(1,qe),this._windowTime=Math.max(1,He)}next(qe){const{isStopped:He,_buffer:Ge,_infiniteTimeWindow:ht,_timestampProvider:lt,_windowTime:Dt}=this;He||(Ge.push(qe),!ht&&Ge.push(lt.now()+Dt)),this._trimBuffer(),super.next(qe)}_subscribe(qe){this._throwIfClosed(),this._trimBuffer();const He=this._innerSubscribe(qe),{_infiniteTimeWindow:Ge,_buffer:ht}=this,lt=ht.slice();for(let Dt=0;Dt<lt.length&&!qe.closed;Dt+=Ge?1:2)qe.next(lt[Dt]);return this._checkFinalizedStatuses(qe),He}_trimBuffer(){const{_bufferSize:qe,_timestampProvider:He,_buffer:Ge,_infiniteTimeWindow:ht}=this,lt=(ht?1:2)*qe;if(qe<1/0&&lt<Ge.length&&Ge.splice(0,Ge.length-lt),!ht){const Dt=He.now();let jt=0;for(let At=1;At<Ge.length&&Ge[At]<=Dt;At+=2)jt=At;jt&&Ge.splice(0,jt+1)}}}var ye=R(3099);function ut(Pe,qe,He){let Ge,ht=!1;return Pe&&"object"==typeof Pe?({bufferSize:Ge=1/0,windowTime:qe=1/0,refCount:ht=!1,scheduler:He}=Pe):Ge=Pe??1/0,(0,ye.B)({connector:()=>new ue(Ge,qe,He),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ht})}var rt=R(590),Ye=R(576);function Tt(Pe,qe){return(0,Ye.m)(qe)?(0,te.w)(()=>Pe,qe):(0,te.w)(()=>Pe)}var Ke=R(9468),Ne=R(9300),Ct=R(4976),ft=R(2011),fe=R(6895),Xe=R(6217);R(9260);const st=new p.OlP("angularfire2.auth.use-emulator"),Se=new p.OlP("angularfire2.auth.settings"),xt=new p.OlP("angularfire2.auth.tenant-id"),Yt=new p.OlP("angularfire2.auth.langugage-code"),It=new p.OlP("angularfire2.auth.use-device-language"),Bt=new p.OlP("angularfire.auth.persistence"),Nt=(Pe,qe,He,Ge,ht,lt,Dt,jt)=>(0,ft.cc)(`${Pe.name}.auth`,"AngularFireAuth",Pe.name,()=>{const At=qe.runOutsideAngular(()=>Pe.auth());if(He&&At.useEmulator(...He),Ge&&(At.tenantId=Ge),At.languageCode=ht,lt&&At.useDeviceLanguage(),Dt)for(const[Qt,ln]of Object.entries(Dt))At.settings[Qt]=ln;return jt&&At.setPersistence(jt),At},[He,Ge,ht,lt,Dt,jt]);let Or=(()=>{class Pe{constructor(He,Ge,ht,lt,Dt,jt,At,Qt,ln,cn,$n,Yn){const Wn=new F.x,Pt=(0,B.of)(void 0).pipe((0,Ee.Q)(Dt.outsideAngular),(0,te.w)(()=>lt.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,9568)))),(0,_e.U)(()=>(0,ft.on)(He,lt,Ge)),(0,_e.U)(An=>Nt(An,lt,jt,Qt,ln,cn,At,$n)),ut({bufferSize:1,refCount:!1}));if((0,fe.PM)(ht))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,B.of)(null);else{Pt.pipe((0,rt.P)()).subscribe();const Jn=Pt.pipe((0,te.w)(St=>St.getRedirectResult().then(gn=>gn,()=>null)),Ct.iC,ut({bufferSize:1,refCount:!1})),gr=Pt.pipe((0,te.w)(St=>new le.y(gn=>({unsubscribe:lt.runOutsideAngular(()=>St.onAuthStateChanged(Bn=>gn.next(Bn),Bn=>gn.error(Bn),()=>gn.complete()))})))),kr=Pt.pipe((0,te.w)(St=>new le.y(gn=>({unsubscribe:lt.runOutsideAngular(()=>St.onIdTokenChanged(Bn=>gn.next(Bn),Bn=>gn.error(Bn),()=>gn.complete()))}))));this.authState=Jn.pipe(Tt(gr),(0,Ke.R)(Dt.outsideAngular),(0,Ee.Q)(Dt.insideAngular)),this.user=Jn.pipe(Tt(kr),(0,Ke.R)(Dt.outsideAngular),(0,Ee.Q)(Dt.insideAngular)),this.idToken=this.user.pipe((0,te.w)(St=>St?(0,he.D)(St.getIdToken()):(0,B.of)(null))),this.idTokenResult=this.user.pipe((0,te.w)(St=>St?(0,he.D)(St.getIdTokenResult()):(0,B.of)(null))),this.credential=(0,we.T)(Jn,Wn,this.authState.pipe((0,Ne.h)(St=>!St))).pipe((0,_e.U)(St=>St?.user?St:null),(0,Ke.R)(Dt.outsideAngular),(0,Ee.Q)(Dt.insideAngular))}return(0,ft.pX)(this,Pt,lt,{spy:{apply:(An,Jn,gr)=>{(An.startsWith("signIn")||An.startsWith("createUser"))&&gr.then(kr=>Wn.next(kr))}}})}}return Pe.\u0275fac=function(He){return new(He||Pe)(p.LFG(ft.Dh),p.LFG(ft.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ct.HU),p.LFG(st,8),p.LFG(Se,8),p.LFG(xt,8),p.LFG(Yt,8),p.LFG(It,8),p.LFG(Bt,8),p.LFG(Xe.nm,8))},Pe.\u0275prov=p.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"any"}),Pe})()},33:(Lt,Le,R)=>{R.d(Le,{ST:()=>Et});var p=R(4650),F=R(4986),B=R(9751),le=R(8996),he=R(9646),we=R(4976),Ee=R(8675),te=R(4482),_e=R(5403);function ee(){return(0,te.e)((ke,H)=>{let oe,Fe=!1;ke.subscribe((0,_e.x)(H,pt=>{const se=oe;oe=pt,Fe&&H.next([se,pt]),Fe=!0}))})}var ue=R(4004),ye=R(5026),ut=R(4671);function Ye(ke,H){return ke===H}var Tt=R(9300),Ke=R(2011),Ne=R(6895),ft=(R(9568),R(3942)),fe=R(2810),Xe=R(2090),nt=R(4859);function Se(ke,H){if(void 0===H)return{merge:!1};if(void 0!==H.mergeFields&&void 0!==H.merge)throw new fe.WA("invalid-argument",`Invalid options passed to function ${ke}(): You cannot specify both "merge" and "mergeFields".`);return H}function xt(){if(typeof Uint8Array>"u")throw new fe.WA("unimplemented","Uint8Arrays are not available in this environment.")}function Yt(){if(!(0,fe.Me)())throw new fe.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class It{constructor(H){this._delegate=H}static fromBase64String(H){return Yt(),new It(fe.Jj.fromBase64String(H))}static fromUint8Array(H){return xt(),new It(fe.Jj.fromUint8Array(H))}toBase64(){return Yt(),this._delegate.toBase64()}toUint8Array(){return xt(),this._delegate.toUint8Array()}isEqual(H){return this._delegate.isEqual(H._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Bt(ke){return function Nt(ke,H){if("object"!=typeof ke||null===ke)return!1;const oe=ke;for(const Fe of H)if(Fe in oe&&"function"==typeof oe[Fe])return!0;return!1}(ke,["next","error","complete"])}class Or{enableIndexedDbPersistence(H,oe){return(0,fe.ST)(H._delegate,{forceOwnership:oe})}enableMultiTabIndexedDbPersistence(H){return(0,fe.fH)(H._delegate)}clearIndexedDbPersistence(H){return(0,fe.Fc)(H._delegate)}}class $e{constructor(H,oe,Fe){this._delegate=oe,this._persistenceProvider=Fe,this.INTERNAL={delete:()=>this.terminate()},H instanceof fe.l7||(this._appCompat=H)}get _databaseId(){return this._delegate._databaseId}settings(H){const oe=this._delegate._getSettings();!H.merge&&oe.host!==H.host&&(0,fe.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),H.merge&&delete(H=Object.assign(Object.assign({},oe),H)).merge,this._delegate._setSettings(H)}useEmulator(H,oe,Fe={}){(0,fe.at)(this._delegate,H,oe,Fe)}enableNetwork(){return(0,fe.Ix)(this._delegate)}disableNetwork(){return(0,fe.TF)(this._delegate)}enablePersistence(H){let oe=!1,Fe=!1;return H&&(oe=!!H.synchronizeTabs,Fe=!!H.experimentalForceOwningTab,(0,fe.Wi)("synchronizeTabs",oe,"experimentalForceOwningTab",Fe)),oe?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Fe)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,fe.Mx)(this._delegate)}onSnapshotsInSync(H){return(0,fe.sc)(this._delegate,H)}get app(){if(!this._appCompat)throw new fe.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(H){try{return new Wn(this,(0,fe.hJ)(this._delegate,H))}catch(oe){throw Dt(oe,"collection()","Firestore.collection()")}}doc(H){try{return new lt(this,(0,fe.JU)(this._delegate,H))}catch(oe){throw Dt(oe,"doc()","Firestore.doc()")}}collectionGroup(H){try{return new cn(this,(0,fe.B$)(this._delegate,H))}catch(oe){throw Dt(oe,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(H){return(0,fe.i3)(this._delegate,oe=>H(new He(this,oe)))}batch(){return(0,fe.qY)(this._delegate),new Ge(new fe.PU(this._delegate,H=>(0,fe.GL)(this._delegate,H)))}loadBundle(H){return(0,fe.Pb)(this._delegate,H)}namedQuery(H){return(0,fe.L$)(this._delegate,H).then(oe=>oe?new cn(this,oe):null)}}class Pe extends fe.u7{constructor(H){super(),this.firestore=H}convertBytes(H){return new It(new fe.Jj(H))}convertReference(H){const oe=this.convertDocumentKey(H,this.firestore._databaseId);return lt.forKey(oe,this.firestore,null)}}class He{constructor(H,oe){this._firestore=H,this._delegate=oe,this._userDataWriter=new Pe(H)}get(H){const oe=Pt(H);return this._delegate.get(oe).then(Fe=>new Qt(this._firestore,new fe.xU(this._firestore._delegate,this._userDataWriter,Fe._key,Fe._document,Fe.metadata,oe.converter)))}set(H,oe,Fe){const pt=Pt(H);return Fe?(Se("Transaction.set",Fe),this._delegate.set(pt,oe,Fe)):this._delegate.set(pt,oe),this}update(H,oe,Fe,...pt){const se=Pt(H);return 2===arguments.length?this._delegate.update(se,oe):this._delegate.update(se,oe,Fe,...pt),this}delete(H){const oe=Pt(H);return this._delegate.delete(oe),this}}class Ge{constructor(H){this._delegate=H}set(H,oe,Fe){const pt=Pt(H);return Fe?(Se("WriteBatch.set",Fe),this._delegate.set(pt,oe,Fe)):this._delegate.set(pt,oe),this}update(H,oe,Fe,...pt){const se=Pt(H);return 2===arguments.length?this._delegate.update(se,oe):this._delegate.update(se,oe,Fe,...pt),this}delete(H){const oe=Pt(H);return this._delegate.delete(oe),this}commit(){return this._delegate.commit()}}class ht{constructor(H,oe,Fe){this._firestore=H,this._userDataWriter=oe,this._delegate=Fe}fromFirestore(H,oe){const Fe=new fe.$q(this._firestore._delegate,this._userDataWriter,H._key,H._document,H.metadata,null);return this._delegate.fromFirestore(new ln(this._firestore,Fe),oe??{})}toFirestore(H,oe){return oe?this._delegate.toFirestore(H,oe):this._delegate.toFirestore(H)}static getInstance(H,oe){const Fe=ht.INSTANCES;let pt=Fe.get(H);pt||(pt=new WeakMap,Fe.set(H,pt));let se=pt.get(oe);return se||(se=new ht(H,new Pe(H),oe),pt.set(oe,se)),se}}ht.INSTANCES=new WeakMap;class lt{constructor(H,oe){this.firestore=H,this._delegate=oe,this._userDataWriter=new Pe(H)}static forPath(H,oe,Fe){if(H.length%2!=0)throw new fe.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${H.canonicalString()} has ${H.length}`);return new lt(oe,new fe.my(oe._delegate,Fe,new fe.Ky(H)))}static forKey(H,oe,Fe){return new lt(oe,new fe.my(oe._delegate,Fe,H))}get id(){return this._delegate.id}get parent(){return new Wn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(H){try{return new Wn(this.firestore,(0,fe.hJ)(this._delegate,H))}catch(oe){throw Dt(oe,"collection()","DocumentReference.collection()")}}isEqual(H){return(H=(0,Xe.m9)(H))instanceof fe.my&&(0,fe.Eo)(this._delegate,H)}set(H,oe){oe=Se("DocumentReference.set",oe);try{return oe?(0,fe.pl)(this._delegate,H,oe):(0,fe.pl)(this._delegate,H)}catch(Fe){throw Dt(Fe,"setDoc()","DocumentReference.set()")}}update(H,oe,...Fe){try{return 1===arguments.length?(0,fe.r7)(this._delegate,H):(0,fe.r7)(this._delegate,H,oe,...Fe)}catch(pt){throw Dt(pt,"updateDoc()","DocumentReference.update()")}}delete(){return(0,fe.oe)(this._delegate)}onSnapshot(...H){const oe=jt(H),Fe=At(H,pt=>new Qt(this.firestore,new fe.xU(this.firestore._delegate,this._userDataWriter,pt._key,pt._document,pt.metadata,this._delegate.converter)));return(0,fe.cf)(this._delegate,oe,Fe)}get(H){let oe;return oe="cache"===H?.source?(0,fe.kl)(this._delegate):"server"===H?.source?(0,fe.Xk)(this._delegate):(0,fe.QT)(this._delegate),oe.then(Fe=>new Qt(this.firestore,new fe.xU(this.firestore._delegate,this._userDataWriter,Fe._key,Fe._document,Fe.metadata,this._delegate.converter)))}withConverter(H){return new lt(this.firestore,this._delegate.withConverter(H?ht.getInstance(this.firestore,H):null))}}function Dt(ke,H,oe){return ke.message=ke.message.replace(H,oe),ke}function jt(ke){for(const H of ke)if("object"==typeof H&&!Bt(H))return H;return{}}function At(ke,H){var oe,Fe;let pt;return pt=Bt(ke[0])?ke[0]:Bt(ke[1])?ke[1]:"function"==typeof ke[0]?{next:ke[0],error:ke[1],complete:ke[2]}:{next:ke[1],error:ke[2],complete:ke[3]},{next:se=>{pt.next&&pt.next(H(se))},error:null===(oe=pt.error)||void 0===oe?void 0:oe.bind(pt),complete:null===(Fe=pt.complete)||void 0===Fe?void 0:Fe.bind(pt)}}class Qt{constructor(H,oe){this._firestore=H,this._delegate=oe}get ref(){return new lt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(H){return this._delegate.data(H)}get(H,oe){return this._delegate.get(H,oe)}isEqual(H){return(0,fe.qK)(this._delegate,H._delegate)}}class ln extends Qt{data(H){const oe=this._delegate.data(H);return(0,fe.K9)(void 0!==oe,"Document in a QueryDocumentSnapshot should exist"),oe}}class cn{constructor(H,oe){this.firestore=H,this._delegate=oe,this._userDataWriter=new Pe(H)}where(H,oe,Fe){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.ar)(H,oe,Fe)))}catch(pt){throw Dt(pt,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(H,oe){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.Xo)(H,oe)))}catch(Fe){throw Dt(Fe,/(orderBy|where)\(\)/,"Query.$1()")}}limit(H){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.b9)(H)))}catch(oe){throw Dt(oe,"limit()","Query.limit()")}}limitToLast(H){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.vh)(H)))}catch(oe){throw Dt(oe,"limitToLast()","Query.limitToLast()")}}startAt(...H){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.e0)(...H)))}catch(oe){throw Dt(oe,"startAt()","Query.startAt()")}}startAfter(...H){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.TQ)(...H)))}catch(oe){throw Dt(oe,"startAfter()","Query.startAfter()")}}endBefore(...H){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.Lx)(...H)))}catch(oe){throw Dt(oe,"endBefore()","Query.endBefore()")}}endAt(...H){try{return new cn(this.firestore,(0,fe.IO)(this._delegate,(0,fe.Wu)(...H)))}catch(oe){throw Dt(oe,"endAt()","Query.endAt()")}}isEqual(H){return(0,fe.iE)(this._delegate,H._delegate)}get(H){let oe;return oe="cache"===H?.source?(0,fe.UQ)(this._delegate):"server"===H?.source?(0,fe.zN)(this._delegate):(0,fe.PL)(this._delegate),oe.then(Fe=>new Yn(this.firestore,new fe.W(this.firestore._delegate,this._userDataWriter,this._delegate,Fe._snapshot)))}onSnapshot(...H){const oe=jt(H),Fe=At(H,pt=>new Yn(this.firestore,new fe.W(this.firestore._delegate,this._userDataWriter,this._delegate,pt._snapshot)));return(0,fe.cf)(this._delegate,oe,Fe)}withConverter(H){return new cn(this.firestore,this._delegate.withConverter(H?ht.getInstance(this.firestore,H):null))}}class $n{constructor(H,oe){this._firestore=H,this._delegate=oe}get type(){return this._delegate.type}get doc(){return new ln(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yn{constructor(H,oe){this._firestore=H,this._delegate=oe}get query(){return new cn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(H=>new ln(this._firestore,H))}docChanges(H){return this._delegate.docChanges(H).map(oe=>new $n(this._firestore,oe))}forEach(H,oe){this._delegate.forEach(Fe=>{H.call(oe,new ln(this._firestore,Fe))})}isEqual(H){return(0,fe.qK)(this._delegate,H._delegate)}}class Wn extends cn{constructor(H,oe){super(H,oe),this.firestore=H,this._delegate=oe}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const H=this._delegate.parent;return H?new lt(this.firestore,H):null}doc(H){try{return new lt(this.firestore,void 0===H?(0,fe.JU)(this._delegate):(0,fe.JU)(this._delegate,H))}catch(oe){throw Dt(oe,"doc()","CollectionReference.doc()")}}add(H){return(0,fe.ET)(this._delegate,H).then(oe=>new lt(this.firestore,oe))}isEqual(H){return(0,fe.Eo)(this._delegate,H._delegate)}withConverter(H){return new Wn(this.firestore,this._delegate.withConverter(H?ht.getInstance(this.firestore,H):null))}}function Pt(ke){return(0,fe.Cf)(ke,fe.my)}class An{constructor(...H){this._delegate=new fe.Lz(...H)}static documentId(){return new An(fe.Xb.keyField().canonicalString())}isEqual(H){return(H=(0,Xe.m9)(H))instanceof fe.Lz&&this._delegate._internalPath.isEqual(H._internalPath)}}class Jn{constructor(H){this._delegate=H}static serverTimestamp(){const H=(0,fe.Bt)();return H._methodName="FieldValue.serverTimestamp",new Jn(H)}static delete(){const H=(0,fe.AK)();return H._methodName="FieldValue.delete",new Jn(H)}static arrayUnion(...H){const oe=(0,fe.vr)(...H);return oe._methodName="FieldValue.arrayUnion",new Jn(oe)}static arrayRemove(...H){const oe=(0,fe.Ab)(...H);return oe._methodName="FieldValue.arrayRemove",new Jn(oe)}static increment(H){const oe=(0,fe.nP)(H);return oe._methodName="FieldValue.increment",new Jn(oe)}isEqual(H){return this._delegate.isEqual(H._delegate)}}const gr={Firestore:$e,GeoPoint:fe.F8,Timestamp:fe.EK,Blob:It,Transaction:He,WriteBatch:Ge,DocumentReference:lt,DocumentSnapshot:Qt,Query:cn,QueryDocumentSnapshot:ln,QuerySnapshot:Yn,CollectionReference:Wn,FieldPath:An,FieldValue:Jn,setLogLevel:function qe(ke){(0,fe.Ub)(ke)},CACHE_SIZE_UNLIMITED:fe.IX};!function St(ke){(function kr(ke,H){ke.INTERNAL.registerComponent(new nt.wA("firestore-compat",oe=>{const Fe=oe.getProvider("app-compat").getImmediate(),pt=oe.getProvider("firestore").getImmediate();return H(Fe,pt)},"PUBLIC").setServiceProps(Object.assign({},gr)))})(ke,(H,oe)=>new $e(H,oe,new Or)),ke.registerVersion("@firebase/firestore-compat","0.3.12")}(ft.Z);var gn=R(1205),Bn=R(6217);function Nr(ke,H){return function jr(ke,H=F.z){return new B.y(oe=>{let Fe;return null!=H?H.schedule(()=>{Fe=ke.onSnapshot({includeMetadataChanges:!0},oe)}):Fe=ke.onSnapshot({includeMetadataChanges:!0},oe),()=>{Fe?.()}})}(ke,H)}function Pn(ke,H){return Nr(ke,H).pipe((0,ue.U)(oe=>({payload:oe,type:"query"})))}function dn(ke,H){return Pn(ke,H).pipe((0,Ee.O)(void 0),ee(),(0,ue.U)(([oe,Fe])=>{const pt=Fe.payload.docChanges(),se=pt.map(de=>({type:de.type,payload:de}));return oe&&JSON.stringify(oe.payload.metadata)!==JSON.stringify(Fe.payload.metadata)&&Fe.payload.docs.forEach((de,K)=>{const Y=pt.find(De=>De.doc.ref.isEqual(de.ref)),G=oe?.payload.docs.find(De=>De.ref.isEqual(de.ref));Y&&JSON.stringify(Y.doc.metadata)===JSON.stringify(de.metadata)||!Y&&G&&JSON.stringify(G.metadata)===JSON.stringify(de.metadata)||se.push({type:"modified",payload:{oldIndex:K,newIndex:K,type:"modified",doc:de}})}),se}))}function qt(ke,H,oe){return dn(ke,oe).pipe((0,ye.R)((Fe,pt)=>function on(ke,H,oe){return H.forEach(Fe=>{oe.indexOf(Fe.type)>-1&&(ke=function mr(ke,H){switch(H.type){case"added":if(!ke[H.newIndex]||!ke[H.newIndex].doc.ref.isEqual(H.doc.ref))return Mn(ke,H.newIndex,0,H);break;case"modified":if(null==ke[H.oldIndex]||ke[H.oldIndex].doc.ref.isEqual(H.doc.ref)){if(H.oldIndex!==H.newIndex){const oe=ke.slice();return oe.splice(H.oldIndex,1),oe.splice(H.newIndex,0,H),oe}return Mn(ke,H.newIndex,1,H)}break;case"removed":if(ke[H.oldIndex]&&ke[H.oldIndex].doc.ref.isEqual(H.doc.ref))return Mn(ke,H.oldIndex,1)}return ke}(ke,Fe))}),ke}(Fe,pt.map(se=>se.payload),H),[]),function rt(ke,H=ut.y){return ke=ke??Ye,(0,te.e)((oe,Fe)=>{let pt,se=!0;oe.subscribe((0,_e.x)(Fe,de=>{const K=H(de);(se||!ke(pt,K))&&(se=!1,pt=K,Fe.next(de))}))})}(),(0,ue.U)(Fe=>Fe.map(pt=>({type:pt.type,payload:pt}))))}function Mn(ke,H,oe,...Fe){const pt=ke.slice();return pt.splice(H,oe,...Fe),pt}function nr(ke){return(!ke||0===ke.length)&&(ke=["added","removed","modified"]),ke}R(9260);class rr{constructor(H,oe,Fe){this.ref=H,this.query=oe,this.afs=Fe}stateChanges(H){let oe=dn(this.query,this.afs.schedulers.outsideAngular);return H&&H.length>0&&(oe=oe.pipe((0,ue.U)(Fe=>Fe.filter(pt=>H.indexOf(pt.type)>-1)))),oe.pipe((0,Ee.O)(void 0),ee(),(0,Tt.h)(([Fe,pt])=>pt.length>0||!Fe),(0,ue.U)(([Fe,pt])=>pt),we.iC)}auditTrail(H){return this.stateChanges(H).pipe((0,ye.R)((oe,Fe)=>[...oe,...Fe],[]))}snapshotChanges(H){const oe=nr(H);return qt(this.query,oe,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(H={}){return Pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(oe=>oe.payload.docs.map(Fe=>H.idField?Object.assign(Object.assign({},Fe.data()),{[H.idField]:Fe.id}):Fe.data())),we.iC)}get(H){return(0,le.D)(this.query.get(H)).pipe(we.iC)}add(H){return this.ref.add(H)}doc(H){return new rn(this.ref.doc(H),this.afs)}}class rn{constructor(H,oe){this.ref=H,this.afs=oe}set(H,oe){return this.ref.set(H,oe)}update(H){return this.ref.update(H)}delete(){return this.ref.delete()}collection(H,oe){const Fe=this.ref.collection(H),{ref:pt,query:se}=Te(Fe,oe);return new rr(pt,se,this.afs)}snapshotChanges(){return function Dn(ke,H){return Nr(ke,H).pipe((0,Ee.O)(void 0),ee(),(0,ue.U)(([oe,Fe])=>Fe.exists?oe?.exists?{payload:Fe,type:"modified"}:{payload:Fe,type:"added"}:{payload:Fe,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(H={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:oe})=>H.idField?Object.assign(Object.assign({},oe.data()),{[H.idField]:oe.id}):oe.data()))}get(H){return(0,le.D)(this.ref.get(H)).pipe(we.iC)}}class ur{constructor(H,oe){this.query=H,this.afs=oe}stateChanges(H){return H&&0!==H.length?dn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(oe=>oe.filter(Fe=>H.indexOf(Fe.type)>-1)),(0,Tt.h)(oe=>oe.length>0),we.iC):dn(this.query,this.afs.schedulers.outsideAngular).pipe(we.iC)}auditTrail(H){return this.stateChanges(H).pipe((0,ye.R)((oe,Fe)=>[...oe,...Fe],[]))}snapshotChanges(H){const oe=nr(H);return qt(this.query,oe,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(H={}){return Pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(Fe=>Fe.payload.docs.map(pt=>H.idField?Object.assign({[H.idField]:pt.id},pt.data()):pt.data())),we.iC)}get(H){return(0,le.D)(this.query.get(H)).pipe(we.iC)}}const En=new p.OlP("angularfire2.enableFirestorePersistence"),Fr=new p.OlP("angularfire2.firestore.persistenceSettings"),wn=new p.OlP("angularfire2.firestore.settings"),Ft=new p.OlP("angularfire2.firestore.use-emulator");function Te(ke,H=(oe=>oe)){return{query:H(ke),ref:ke}}let Et=(()=>{class ke{constructor(oe,Fe,pt,se,de,K,Y,G,De,ot,kt,en,re,ae,X,Me,Ue){this.schedulers=Y;const Ot=(0,Ke.on)(oe,K,Fe),hn=De;ot&&(0,gn.nw)(Ot,K,kt,re,ae,X,en,Me),[this.firestore,this.persistenceEnabled$]=(0,Ke.cc)(`${Ot.name}.firestore`,"AngularFirestore",Ot.name,()=>{const Oe=K.runOutsideAngular(()=>Ot.firestore());if(se&&Oe.settings(se),hn&&Oe.useEmulator(...hn),pt&&!(0,Ne.PM)(de)){const Re=()=>{try{return(0,le.D)(Oe.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(gt){return typeof console<"u"&&console.warn(gt),(0,he.of)(!1)}};return[Oe,K.runOutsideAngular(Re)]}return[Oe,(0,he.of)(!1)]},[se,hn,pt])}collection(oe,Fe){let pt;pt="string"==typeof oe?this.firestore.collection(oe):oe;const{ref:se,query:de}=Te(pt,Fe),K=this.schedulers.ngZone.run(()=>se);return new rr(K,de,this)}collectionGroup(oe,Fe){const pt=Fe||(de=>de),se=this.firestore.collectionGroup(oe);return new ur(pt(se),this)}doc(oe){let Fe;Fe="string"==typeof oe?this.firestore.doc(oe):oe;const pt=this.schedulers.ngZone.run(()=>Fe);return new rn(pt,this)}createId(){return this.firestore.collection("_").doc().id}}return ke.\u0275fac=function(oe){return new(oe||ke)(p.LFG(Ke.Dh),p.LFG(Ke.xv,8),p.LFG(En,8),p.LFG(wn,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(we.HU),p.LFG(Fr,8),p.LFG(Ft,8),p.LFG(gn.zQ,8),p.LFG(gn.Qv,8),p.LFG(gn.L6,8),p.LFG(gn._Q,8),p.LFG(gn.rT,8),p.LFG(gn.lh,8),p.LFG(gn.f7,8),p.LFG(Bn.nm,8))},ke.\u0275prov=p.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"any"}),ke})()},2011:(Lt,Le,R)=>{R.d(Le,{Dh:()=>te,GT:()=>we,cc:()=>rt,hO:()=>ut,on:()=>ee,pX:()=>he,xv:()=>_e});var p=R(4650),F=R(9260),B=R(4976);Lt=R.hmd(Lt);const le=["ngOnDestroy"],he=(Ne,Ct,ft,fe={})=>new Proxy(Ne,{get:(Xe,nt)=>ft.runOutsideAngular(()=>{var yt;if(Ne[nt])return!(null===(yt=fe?.spy)||void 0===yt)&&yt.get&&fe.spy.get(nt,Ne[nt]),Ne[nt];if(le.indexOf(nt)>-1)return()=>{};const st=Ct.toPromise().then(Se=>{const xt=Se&&Se[nt];return"function"==typeof xt?xt.bind(Se):xt&&xt.then?xt.then(Yt=>ft.run(()=>Yt)):ft.run(()=>xt)});return new Proxy(()=>{},{get:(Se,xt)=>st[xt],apply:(Se,xt,Yt)=>st.then(It=>{var Bt;const Nt=It&&It(...Yt);return!(null===(Bt=fe?.spy)||void 0===Bt)&&Bt.apply&&fe.spy.apply(nt,Yt,Nt),Nt})})})}),we=(Ne,Ct)=>{Ct.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(fe=>{Object.defineProperty(Ne.prototype,fe,Object.getOwnPropertyDescriptor(ft.prototype||ft,fe))})})};class Ee{constructor(Ct){return Ct}}const te=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function ee(Ne,Ct,ft){const Xe="object"==typeof ft&&ft||{};Xe.name=Xe.name||"string"==typeof ft&&ft||"[DEFAULT]";const yt=F.Z.apps.filter(st=>st&&st.name===Xe.name)[0]||Ct.runOutsideAngular(()=>F.Z.initializeApp(Ne,Xe));try{JSON.stringify(Ne)!==JSON.stringify(yt.options)&&ue("error",`${yt.name} Firebase App already initialized with different options${Lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(yt)}const ue=(Ne,...Ct)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ne](...Ct)},ye={provide:Ee,useFactory:ee,deps:[te,p.R0b,[new p.FiY,_e]]};let ut=(()=>{class Ne{constructor(ft){F.Z.registerVersion("angularfire",B.q4.full,"core"),F.Z.registerVersion("angularfire",B.q4.full,"app-compat"),F.Z.registerVersion("angular",p.q4F.full,ft.toString())}static initializeApp(ft,fe){return{ngModule:Ne,providers:[{provide:te,useValue:ft},{provide:_e,useValue:fe}]}}}return Ne.\u0275fac=function(ft){return new(ft||Ne)(p.LFG(p.Lbi))},Ne.\u0275mod=p.oAB({type:Ne}),Ne.\u0275inj=p.cJS({providers:[ye]}),Ne})();function rt(Ne,Ct,ft,fe,Xe){const[,nt,yt]=globalThis.\u0275AngularfireInstanceCache.find(st=>st[0]===Ne)||[];if(nt)return function Ye(Ne,Ct){try{return Ne.toString()===Ct.toString()}catch{return Ne===Ct}}(Xe,yt)||(Ke("error",`${Ct} was already initialized on the ${ft} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:Xe,was:yt})),nt;{const st=fe();return globalThis.\u0275AngularfireInstanceCache.push([Ne,st,Xe]),st}}const Tt=!!Lt.hot,Ke=(Ne,...Ct)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ne](...Ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Lt,Le,R)=>{R.d(Le,{q4:()=>Ra,iC:()=>cl,HU:()=>td,vb:()=>gu,JM:()=>ul});var p=R(4650),F=R(259),B=R(5861),le=R(6881),he=R(2090),we=R(4859),Ee=R(1877);let _e,ee;const ut=new WeakMap,rt=new WeakMap,Ye=new WeakMap,Tt=new WeakMap,Ke=new WeakMap;let ft={get(w,A,j){if(w instanceof IDBTransaction){if("done"===A)return rt.get(w);if("objectStoreNames"===A)return w.objectStoreNames||Ye.get(w);if("store"===A)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return yt(w[A])},set:(w,A,j)=>(w[A]=j,!0),has:(w,A)=>w instanceof IDBTransaction&&("done"===A||"store"===A)||A in w};function nt(w){return"function"==typeof w?function Xe(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...A){return w.apply(st(this),A),yt(ut.get(this))}:function(...A){return yt(w.apply(st(this),A))}:function(A,...j){const ne=w.call(st(this),A,...j);return Ye.set(ne,A.sort?A.sort():[A]),yt(ne)}}(w):(w instanceof IDBTransaction&&function Ct(w){if(rt.has(w))return;const A=new Promise((j,ne)=>{const ge=()=>{w.removeEventListener("complete",be),w.removeEventListener("error",it),w.removeEventListener("abort",it)},be=()=>{j(),ge()},it=()=>{ne(w.error||new DOMException("AbortError","AbortError")),ge()};w.addEventListener("complete",be),w.addEventListener("error",it),w.addEventListener("abort",it)});rt.set(w,A)}(w),((w,A)=>A.some(j=>w instanceof j))(w,function ue(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ft):w)}function yt(w){if(w instanceof IDBRequest)return function Ne(w){const A=new Promise((j,ne)=>{const ge=()=>{w.removeEventListener("success",be),w.removeEventListener("error",it)},be=()=>{j(yt(w.result)),ge()},it=()=>{ne(w.error),ge()};w.addEventListener("success",be),w.addEventListener("error",it)});return A.then(j=>{j instanceof IDBCursor&&ut.set(j,w)}).catch(()=>{}),Ke.set(A,w),A}(w);if(Tt.has(w))return Tt.get(w);const A=nt(w);return A!==w&&(Tt.set(w,A),Ke.set(A,w)),A}const st=w=>Ke.get(w),Yt=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],Bt=new Map;function Nt(w,A){if(!(w instanceof IDBDatabase)||A in w||"string"!=typeof A)return;if(Bt.get(A))return Bt.get(A);const j=A.replace(/FromIndex$/,""),ne=A!==j,ge=It.includes(j);if(!(j in(ne?IDBIndex:IDBObjectStore).prototype)||!ge&&!Yt.includes(j))return;const be=function(){var it=(0,B.Z)(function*(Kt,...Gt){const yn=this.transaction(Kt,ge?"readwrite":"readonly");let _n=yn.store;return ne&&(_n=_n.index(Gt.shift())),(yield Promise.all([_n[j](...Gt),ge&&yn.done]))[0]});return function(Gt){return it.apply(this,arguments)}}();return Bt.set(A,be),be}!function fe(w){ft=w(ft)}(w=>({...w,get:(A,j,ne)=>Nt(A,j)||w.get(A,j,ne),has:(A,j)=>!!Nt(A,j)||w.has(A,j)}));const Or="@firebase/installations",qe="w:0.6.4",He="FIS_v2",At=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qt(w){return w instanceof he.ZR&&w.code.includes("request-failed")}function ln({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function cn(w){return{token:w.token,requestStatus:2,expiresIn:gr(w.expiresIn),creationTime:Date.now()}}function $n(w,A){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,B.Z)(function*(w,A){const ne=(yield A.json()).error;return At.create("request-failed",{requestName:w,serverCode:ne.code,serverMessage:ne.message,serverStatus:ne.status})})).apply(this,arguments)}function Wn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Pt(w,{refreshToken:A}){const j=Wn(w);return j.append("Authorization",function kr(w){return`${He} ${w}`}(A)),j}function An(w){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,B.Z)(function*(w){const A=yield w();return A.status>=500&&A.status<600?w():A})).apply(this,arguments)}function gr(w){return Number(w.replace("s","000"))}function St(w,A){return gn.apply(this,arguments)}function gn(){return(gn=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:A},{fid:j}){const ne=ln(w),ge=Wn(w),be=A.getImmediate({optional:!0});if(be){const yn=yield be.getHeartbeatsHeader();yn&&ge.append("x-firebase-client",yn)}const Kt={method:"POST",headers:ge,body:JSON.stringify({fid:j,authVersion:He,appId:w.appId,sdkVersion:qe})},Gt=yield An(()=>fetch(ne,Kt));if(Gt.ok){const yn=yield Gt.json();return{fid:yn.fid||j,registrationStatus:2,refreshToken:yn.refreshToken,authToken:cn(yn.authToken)}}throw yield $n("Create Installation",Gt)})).apply(this,arguments)}function Bn(w){return new Promise(A=>{setTimeout(A,w)})}const jr=/^[cdef][\w-]{21}$/;function Dn(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const j=function Pn(w){return function ar(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return jr.test(j)?j:""}catch{return""}}function dn(w){return`${w.appName}!${w.appId}`}const qt=new Map;function on(w,A){const j=dn(w);nr(j,A),function rr(w,A){const j=function ur(){return!rn&&"BroadcastChannel"in self&&(rn=new BroadcastChannel("[Firebase] FID Change"),rn.onmessage=w=>{nr(w.data.key,w.data.fid)}),rn}();j&&j.postMessage({key:w,fid:A}),function En(){0===qt.size&&rn&&(rn.close(),rn=null)}()}(j,A)}function nr(w,A){const j=qt.get(w);if(j)for(const ne of j)ne(A)}let rn=null;const Ft="firebase-installations-store";let Te=null;function Et(){return Te||(Te=function Se(w,A,{blocked:j,upgrade:ne,blocking:ge,terminated:be}={}){const it=indexedDB.open(w,A),Kt=yt(it);return ne&&it.addEventListener("upgradeneeded",Gt=>{ne(yt(it.result),Gt.oldVersion,Gt.newVersion,yt(it.transaction))}),j&&it.addEventListener("blocked",()=>j()),Kt.then(Gt=>{be&&Gt.addEventListener("close",()=>be()),ge&&Gt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),Kt}("firebase-installations-database",1,{upgrade:(w,A)=>{0===A&&w.createObjectStore(Ft)}})),Te}function Qe(w,A){return ke.apply(this,arguments)}function ke(){return(ke=(0,B.Z)(function*(w,A){const j=dn(w),ge=(yield Et()).transaction(Ft,"readwrite"),be=ge.objectStore(Ft),it=yield be.get(j);return yield be.put(A,j),yield ge.done,(!it||it.fid!==A.fid)&&on(w,A.fid),A})).apply(this,arguments)}function H(w){return oe.apply(this,arguments)}function oe(){return(oe=(0,B.Z)(function*(w){const A=dn(w),ne=(yield Et()).transaction(Ft,"readwrite");yield ne.objectStore(Ft).delete(A),yield ne.done})).apply(this,arguments)}function Fe(w,A){return pt.apply(this,arguments)}function pt(){return(pt=(0,B.Z)(function*(w,A){const j=dn(w),ge=(yield Et()).transaction(Ft,"readwrite"),be=ge.objectStore(Ft),it=yield be.get(j),Kt=A(it);return void 0===Kt?yield be.delete(j):yield be.put(Kt,j),yield ge.done,Kt&&(!it||it.fid!==Kt.fid)&&on(w,Kt.fid),Kt})).apply(this,arguments)}function se(w){return de.apply(this,arguments)}function de(){return(de=(0,B.Z)(function*(w){let A;const j=yield Fe(w.appConfig,ne=>{const ge=K(ne),be=Y(w,ge);return A=be.registrationPromise,be.installationEntry});return""===j.fid?{installationEntry:yield A}:{installationEntry:j,registrationPromise:A}})).apply(this,arguments)}function K(w){return re(w||{fid:Dn(),registrationStatus:0})}function Y(w,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(At.create("app-offline"))};const j={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},ne=function G(w,A){return De.apply(this,arguments)}(w,j);return{installationEntry:j,registrationPromise:ne}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:ot(w)}:{installationEntry:A}}function De(){return(De=(0,B.Z)(function*(w,A){try{const j=yield St(w,A);return Qe(w.appConfig,j)}catch(j){throw Qt(j)&&409===j.customData.serverCode?yield H(w.appConfig):yield Qe(w.appConfig,{fid:A.fid,registrationStatus:0}),j}})).apply(this,arguments)}function ot(w){return kt.apply(this,arguments)}function kt(){return(kt=(0,B.Z)(function*(w){let A=yield en(w.appConfig);for(;1===A.registrationStatus;)yield Bn(100),A=yield en(w.appConfig);if(0===A.registrationStatus){const{installationEntry:j,registrationPromise:ne}=yield se(w);return ne||j}return A})).apply(this,arguments)}function en(w){return Fe(w,A=>{if(!A)throw At.create("installation-not-found");return re(A)})}function re(w){return function ae(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function X(w,A){return Me.apply(this,arguments)}function Me(){return(Me=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:A},j){const ne=Ue(w,j),ge=Pt(w,j),be=A.getImmediate({optional:!0});if(be){const yn=yield be.getHeartbeatsHeader();yn&&ge.append("x-firebase-client",yn)}const Kt={method:"POST",headers:ge,body:JSON.stringify({installation:{sdkVersion:qe,appId:w.appId}})},Gt=yield An(()=>fetch(ne,Kt));if(Gt.ok)return cn(yield Gt.json());throw yield $n("Generate Auth Token",Gt)})).apply(this,arguments)}function Ue(w,{fid:A}){return`${ln(w)}/${A}/authTokens:generate`}function Ot(w){return hn.apply(this,arguments)}function hn(){return(hn=(0,B.Z)(function*(w,A=!1){let j;const ne=yield Fe(w.appConfig,be=>{if(!xn(be))throw At.create("not-registered");const it=be.authToken;if(!A&&Gn(it))return be;if(1===it.requestStatus)return j=Oe(w,A),be;{if(!navigator.onLine)throw At.create("app-offline");const Kt=Nn(be);return j=wt(w,Kt),Kt}});return j?yield j:ne.authToken})).apply(this,arguments)}function Oe(w,A){return Re.apply(this,arguments)}function Re(){return(Re=(0,B.Z)(function*(w,A){let j=yield gt(w.appConfig);for(;1===j.authToken.requestStatus;)yield Bn(100),j=yield gt(w.appConfig);const ne=j.authToken;return 0===ne.requestStatus?Ot(w,A):ne})).apply(this,arguments)}function gt(w){return Fe(w,A=>{if(!xn(A))throw At.create("not-registered");return function Kr(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function wt(w,A){return fn.apply(this,arguments)}function fn(){return(fn=(0,B.Z)(function*(w,A){try{const j=yield X(w,A),ne=Object.assign(Object.assign({},A),{authToken:j});return yield Qe(w.appConfig,ne),j}catch(j){if(!Qt(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const ne=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Qe(w.appConfig,ne)}else yield H(w.appConfig);throw j}})).apply(this,arguments)}function xn(w){return void 0!==w&&2===w.registrationStatus}function Gn(w){return 2===w.requestStatus&&!function Cr(w){const A=Date.now();return A<w.creationTime||w.creationTime+w.expiresIn<A+36e5}(w)}function Nn(w){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:A})}function qr(){return(qr=(0,B.Z)(function*(w){const A=w,{installationEntry:j,registrationPromise:ne}=yield se(A);return ne?ne.catch(console.error):Ot(A).catch(console.error),j.fid})).apply(this,arguments)}function Ms(){return(Ms=(0,B.Z)(function*(w,A=!1){const j=w;return yield zn(j),(yield Ot(j,A)).token})).apply(this,arguments)}function zn(w){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,B.Z)(function*(w){const{registrationPromise:A}=yield se(w);A&&(yield A)})).apply(this,arguments)}function Hr(w){return At.create("missing-app-config-values",{valueName:w})}const Gr="installations",Ki=w=>{const A=w.getProvider("app").getImmediate(),j=function xs(w){if(!w||!w.options)throw Hr("App Configuration");if(!w.name)throw Hr("App Name");const A=["projectId","apiKey","appId"];for(const j of A)if(!w.options[j])throw Hr(j);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(A);return{app:A,appConfig:j,heartbeatServiceProvider:(0,le._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},ci=w=>{const A=w.getProvider("app").getImmediate(),j=(0,le._getProvider)(A,Gr).getImmediate();return{getId:()=>function $r(w){return qr.apply(this,arguments)}(j),getToken:ge=>function vr(w){return Ms.apply(this,arguments)}(j,ge)}};(function Zr(){(0,le._registerComponent)(new we.wA(Gr,Ki,"PUBLIC")),(0,le._registerComponent)(new we.wA("installations-internal",ci,"PRIVATE"))})(),(0,le.registerVersion)(Or,"0.6.4"),(0,le.registerVersion)(Or,"0.6.4","esm2017");const yi="@firebase/remote-config",lr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vo{constructor(A,j,ne,ge){this.client=A,this.storage=j,this.storageCache=ne,this.logger=ge}isCachedDataFresh(A,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ne=Date.now()-j,ge=ne<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ne}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ge}.`),ge}fetch(A){var j=this;return(0,B.Z)(function*(){const[ne,ge]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(ge&&j.isCachedDataFresh(A.cacheMaxAgeMillis,ne))return ge;A.eTag=ge&&ge.eTag;const be=yield j.client.fetch(A),it=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&it.push(j.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(it),be})()}}function zs(w=navigator){return w.languages&&w.languages[0]||w.language}class ro{constructor(A,j,ne,ge,be,it){this.firebaseInstallations=A,this.sdkVersion=j,this.namespace=ne,this.projectId=ge,this.apiKey=be,this.appId=it}fetch(A){var j=this;return(0,B.Z)(function*(){const[ne,ge]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),it=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Kt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Gt={sdk_version:j.sdkVersion,app_instance_id:ne,app_instance_id_token:ge,app_id:j.appId,language_code:zs()},yn={method:"POST",headers:Kt,body:JSON.stringify(Gt)},_n=fetch(it,yn),Ln=new Promise((eo,Oa)=>{A.signal.addEventListener(()=>{const vu=new Error("The operation was aborted.");vu.name="AbortError",Oa(vu)})});let hs;try{yield Promise.race([_n,Ln]),hs=yield _n}catch(eo){let Oa="fetch-client-network";throw"AbortError"===eo?.name&&(Oa="fetch-timeout"),lr.create(Oa,{originalErrorMessage:eo?.message})}let mi=hs.status;const Fi=hs.headers.get("ETag")||void 0;let ya,yu;if(200===hs.status){let eo;try{eo=yield hs.json()}catch(Oa){throw lr.create("fetch-client-parse",{originalErrorMessage:Oa?.message})}ya=eo.entries,yu=eo.state}if("INSTANCE_STATE_UNSPECIFIED"===yu?mi=500:"NO_CHANGE"===yu?mi=304:("NO_TEMPLATE"===yu||"EMPTY_CONFIG"===yu)&&(ya={}),304!==mi&&200!==mi)throw lr.create("fetch-status",{httpStatus:mi});return{status:mi,eTag:Fi,config:ya}})()}}class Uo{constructor(A,j){this.client=A,this.storage=j}fetch(A){var j=this;return(0,B.Z)(function*(){const ne=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(A,ne)})()}attemptFetch(A,{throttleEndTimeMillis:j,backoffCount:ne}){var ge=this;return(0,B.Z)(function*(){yield function gs(w,A){return new Promise((j,ne)=>{const ge=Math.max(A-Date.now(),0),be=setTimeout(j,ge);w.addEventListener(()=>{clearTimeout(be),ne(lr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,j);try{const be=yield ge.client.fetch(A);return yield ge.storage.deleteThrottleMetadata(),be}catch(be){if(!function bo(w){if(!(w instanceof he.ZR&&w.customData))return!1;const A=Number(w.customData.httpStatus);return 429===A||500===A||503===A||504===A}(be))throw be;const it={throttleEndTimeMillis:Date.now()+(0,he.$s)(ne),backoffCount:ne+1};return yield ge.storage.setThrottleMetadata(it),ge.attemptFetch(A,it)}})()}}class ta{constructor(A,j,ne,ge,be){this.app=A,this._client=j,this._storageCache=ne,this._storage=ge,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _r(w,A){const j=w.target.error||void 0;return lr.create(A,{originalErrorMessage:j&&j?.message})}const Zi="app_namespace_store";class na{constructor(A,j,ne,ge=function io(){return new Promise((w,A)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ne=>{A(_r(ne,"storage-open"))},j.onsuccess=ne=>{w(ne.target.result)},j.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Zi,{keyPath:"compositeKey"})}}catch(j){A(lr.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=A,this.appName=j,this.namespace=ne,this.openDbPromise=ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var j=this;return(0,B.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((ge,be)=>{const Kt=ne.transaction([Zi],"readonly").objectStore(Zi),Gt=j.createCompositeKey(A);try{const yn=Kt.get(Gt);yn.onerror=_n=>{be(_r(_n,"storage-get"))},yn.onsuccess=_n=>{const Ln=_n.target.result;ge(Ln?Ln.value:void 0)}}catch(yn){be(lr.create("storage-get",{originalErrorMessage:yn?.message}))}})})()}set(A,j){var ne=this;return(0,B.Z)(function*(){const ge=yield ne.openDbPromise;return new Promise((be,it)=>{const Gt=ge.transaction([Zi],"readwrite").objectStore(Zi),yn=ne.createCompositeKey(A);try{const _n=Gt.put({compositeKey:yn,value:j});_n.onerror=Ln=>{it(_r(Ln,"storage-set"))},_n.onsuccess=()=>{be()}}catch(_n){it(lr.create("storage-set",{originalErrorMessage:_n?.message}))}})})()}delete(A){var j=this;return(0,B.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((ge,be)=>{const Kt=ne.transaction([Zi],"readwrite").objectStore(Zi),Gt=j.createCompositeKey(A);try{const yn=Kt.delete(Gt);yn.onerror=_n=>{be(_r(_n,"storage-delete"))},yn.onsuccess=()=>{ge()}}catch(yn){be(lr.create("storage-delete",{originalErrorMessage:yn?.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class yr{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,B.Z)(function*(){const j=A.storage.getLastFetchStatus(),ne=A.storage.getLastSuccessfulFetchTimestampMillis(),ge=A.storage.getActiveConfig(),be=yield j;be&&(A.lastFetchStatus=be);const it=yield ne;it&&(A.lastSuccessfulFetchTimestampMillis=it);const Kt=yield ge;Kt&&(A.activeConfig=Kt)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function ii(){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,B.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}let Yi,Xr;!function Os(){(0,le._registerComponent)(new we.wA("remote-config",function w(A,{instanceIdentifier:j}){const ne=A.getProvider("app").getImmediate(),ge=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw lr.create("registration-window");if(!(0,he.hl)())throw lr.create("indexed-db-unavailable");const{projectId:be,apiKey:it,appId:Kt}=ne.options;if(!be)throw lr.create("registration-project-id");if(!it)throw lr.create("registration-api-key");if(!Kt)throw lr.create("registration-app-id");const Gt=new na(Kt,ne.name,j=j||"firebase"),yn=new yr(Gt),_n=new Ee.Yd(yi);_n.logLevel=Ee.in.ERROR;const Ln=new ro(ge,le.SDK_VERSION,j,be,it,Kt),hs=new Uo(Ln,Gt),mi=new Vo(hs,Gt,yn,_n),Fi=new ta(ne,mi,yn,Gt,_n);return function Xn(w){const A=(0,he.m9)(w);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Fi),Fi},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(yi,"0.4.4"),(0,le.registerVersion)(yi,"0.4.4","esm2017")}();const Ks=new WeakMap,di=new WeakMap,ei=new WeakMap,Qi=new WeakMap,Sn=new WeakMap;let ao={get(w,A,j){if(w instanceof IDBTransaction){if("done"===A)return di.get(w);if("objectStoreNames"===A)return w.objectStoreNames||ei.get(w);if("store"===A)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return as(w[A])},set:(w,A,j)=>(w[A]=j,!0),has:(w,A)=>w instanceof IDBTransaction&&("done"===A||"store"===A)||A in w};function ms(w){return"function"==typeof w?function Ao(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jo(){return Xr||(Xr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...A){return w.apply(ra(this),A),as(Ks.get(this))}:function(...A){return as(w.apply(ra(this),A))}:function(A,...j){const ne=w.call(ra(this),A,...j);return ei.set(ne,A.sort?A.sort():[A]),as(ne)}}(w):(w instanceof IDBTransaction&&function oo(w){if(di.has(w))return;const A=new Promise((j,ne)=>{const ge=()=>{w.removeEventListener("complete",be),w.removeEventListener("error",it),w.removeEventListener("abort",it)},be=()=>{j(),ge()},it=()=>{ne(w.error||new DOMException("AbortError","AbortError")),ge()};w.addEventListener("complete",be),w.addEventListener("error",it),w.addEventListener("abort",it)});di.set(w,A)}(w),((w,A)=>A.some(j=>w instanceof j))(w,function Bo(){return Yi||(Yi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ao):w)}function as(w){if(w instanceof IDBRequest)return function qs(w){const A=new Promise((j,ne)=>{const ge=()=>{w.removeEventListener("success",be),w.removeEventListener("error",it)},be=()=>{j(as(w.result)),ge()},it=()=>{ne(w.error),ge()};w.addEventListener("success",be),w.addEventListener("error",it)});return A.then(j=>{j instanceof IDBCursor&&Ks.set(j,w)}).catch(()=>{}),Sn.set(A,w),A}(w);if(Qi.has(w))return Qi.get(w);const A=ms(w);return A!==w&&(Qi.set(w,A),Sn.set(A,w)),A}const ra=w=>Sn.get(w);function mt(w,A,{blocked:j,upgrade:ne,blocking:ge,terminated:be}={}){const it=indexedDB.open(w,A),Kt=as(it);return ne&&it.addEventListener("upgradeneeded",Gt=>{ne(as(it.result),Gt.oldVersion,Gt.newVersion,as(it.transaction))}),j&&it.addEventListener("blocked",()=>j()),Kt.then(Gt=>{be&&Gt.addEventListener("close",()=>be()),ge&&Gt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),Kt}function kn(w,{blocked:A}={}){const j=indexedDB.deleteDatabase(w);return A&&j.addEventListener("blocked",()=>A()),as(j).then(()=>{})}const $o=["get","getKey","getAll","getAllKeys","count"],uo=["put","add","delete","clear"],Ar=new Map;function k(w,A){if(!(w instanceof IDBDatabase)||A in w||"string"!=typeof A)return;if(Ar.get(A))return Ar.get(A);const j=A.replace(/FromIndex$/,""),ne=A!==j,ge=uo.includes(j);if(!(j in(ne?IDBIndex:IDBObjectStore).prototype)||!ge&&!$o.includes(j))return;const be=function(){var it=(0,B.Z)(function*(Kt,...Gt){const yn=this.transaction(Kt,ge?"readwrite":"readonly");let _n=yn.store;return ne&&(_n=_n.index(Gt.shift())),(yield Promise.all([_n[j](...Gt),ge&&yn.done]))[0]});return function(Gt){return it.apply(this,arguments)}}();return Ar.set(A,be),be}!function sr(w){ao=w(ao)}(w=>({...w,get:(A,j,ne)=>k(A,j)||w.get(A,j,ne),has:(A,j)=>!!k(A,j)||w.has(A,j)}));const P="/firebase-messaging-sw.js",M="/firebase-cloud-messaging-push-scope",q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tn="google.c.a.c_id",Hn="google.c.a.c_l",Zs="google.c.a.ts",ys="google.c.a.e";var fi=(()=>{return(w=fi||(fi={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",fi;var w})();function us(w){const A=new Uint8Array(w);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lo(w){const j=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(j),ge=new Uint8Array(ne.length);for(let be=0;be<ne.length;++be)ge[be]=ne.charCodeAt(be);return ge}const li="fcm_token_details_db",co="fcm_token_object_Store";function Ia(w){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,B.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes(li))return null;let A=null;return(yield mt(li,5,{upgrade:(ne=(0,B.Z)(function*(ge,be,it,Kt){var Gt;if(be<2||!ge.objectStoreNames.contains(co))return;const yn=Kt.objectStore(co),_n=yield yn.index("fcmSenderId").get(w);if(yield yn.clear(),_n)if(2===be){const Ln=_n;if(!Ln.auth||!Ln.p256dh||!Ln.endpoint)return;A={token:Ln.fcmToken,createTime:null!==(Gt=Ln.createTime)&&void 0!==Gt?Gt:Date.now(),subscriptionOptions:{auth:Ln.auth,p256dh:Ln.p256dh,endpoint:Ln.endpoint,swScope:Ln.swScope,vapidKey:"string"==typeof Ln.vapidKey?Ln.vapidKey:us(Ln.vapidKey)}}}else if(3===be){const Ln=_n;A={token:Ln.fcmToken,createTime:Ln.createTime,subscriptionOptions:{auth:us(Ln.auth),p256dh:us(Ln.p256dh),endpoint:Ln.endpoint,swScope:Ln.swScope,vapidKey:us(Ln.vapidKey)}}}else if(4===be){const Ln=_n;A={token:Ln.fcmToken,createTime:Ln.createTime,subscriptionOptions:{auth:us(Ln.auth),p256dh:us(Ln.p256dh),endpoint:Ln.endpoint,swScope:Ln.swScope,vapidKey:us(Ln.vapidKey)}}}}),function(be,it,Kt,Gt){return ne.apply(this,arguments)})})).close(),yield kn(li),yield kn("fcm_vapid_details_db"),yield kn("undefined"),Go(A)?A:null;var ne}),Ho.apply(this,arguments)}function Go(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:A}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Pi="firebase-messaging-store";let ks=null;function Da(){return ks||(ks=mt("firebase-messaging-database",1,{upgrade:(w,A)=>{0===A&&w.createObjectStore(Pi)}})),ks}function ho(w){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,B.Z)(function*(w){const A=Ko(w),ne=yield(yield Da()).transaction(Pi).objectStore(Pi).get(A);if(ne)return ne;{const ge=yield Ia(w.appConfig.senderId);if(ge)return yield Wo(w,ge),ge}})).apply(this,arguments)}function Wo(w,A){return fo.apply(this,arguments)}function fo(){return(fo=(0,B.Z)(function*(w,A){const j=Ko(w),ge=(yield Da()).transaction(Pi,"readwrite");return yield ge.objectStore(Pi).put(A,j),yield ge.done,A})).apply(this,arguments)}function Oi(w){return vs.apply(this,arguments)}function vs(){return(vs=(0,B.Z)(function*(w){const A=Ko(w),ne=(yield Da()).transaction(Pi,"readwrite");yield ne.objectStore(Pi).delete(A),yield ne.done})).apply(this,arguments)}function Ko({appConfig:w}){return w.appId}const hr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vi(w,A){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,B.Z)(function*(w,A){const j=yield po(w),ne=Fs(A),ge={method:"POST",headers:j,body:JSON.stringify(ne)};let be;try{be=yield(yield fetch(qo(w.appConfig),ge)).json()}catch(it){throw hr.create("token-subscribe-failed",{errorInfo:it?.toString()})}if(be.error)throw hr.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw hr.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function fr(w,A){return sa.apply(this,arguments)}function sa(){return(sa=(0,B.Z)(function*(w,A){const j=yield po(w),ne=Fs(A.subscriptionOptions),ge={method:"PATCH",headers:j,body:JSON.stringify(ne)};let be;try{be=yield(yield fetch(`${qo(w.appConfig)}/${A.token}`,ge)).json()}catch(it){throw hr.create("token-update-failed",{errorInfo:it?.toString()})}if(be.error)throw hr.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw hr.create("token-update-no-token");return be.token})).apply(this,arguments)}function oa(w,A){return bi.apply(this,arguments)}function bi(){return(bi=(0,B.Z)(function*(w,A){const ne={method:"DELETE",headers:yield po(w)};try{const be=yield(yield fetch(`${qo(w.appConfig)}/${A}`,ne)).json();if(be.error)throw hr.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ge){throw hr.create("token-unsubscribe-failed",{errorInfo:ge?.toString()})}})).apply(this,arguments)}function qo({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function po(w){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,B.Z)(function*({appConfig:w,installations:A}){const j=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function Fs({p256dh:w,auth:A,endpoint:j,vapidKey:ne}){const ge={web:{endpoint:j,auth:A,p256dh:w}};return ne!==q&&(ge.web.applicationPubKey=ne),ge}const aa=6048e5;function ls(w){return ji.apply(this,arguments)}function ji(){return(ji=(0,B.Z)(function*(w){const A=yield xo(w.swRegistration,w.vapidKey),j={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:A.endpoint,auth:us(A.getKey("auth")),p256dh:us(A.getKey("p256dh"))},ne=yield ho(w.firebaseDependencies);if(ne){if(b(ne.subscriptionOptions,j))return Date.now()>=ne.createTime+aa?cs(w,{token:ne.token,createTime:Date.now(),subscriptionOptions:j}):ne.token;try{yield oa(w.firebaseDependencies,ne.token)}catch(ge){console.warn(ge)}return Qs(w.firebaseDependencies,j)}return Qs(w.firebaseDependencies,j)})).apply(this,arguments)}function _i(w){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,B.Z)(function*(w){const A=yield ho(w.firebaseDependencies);A&&(yield oa(w.firebaseDependencies,A.token),yield Oi(w.firebaseDependencies));const j=yield w.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function cs(w,A){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,B.Z)(function*(w,A){try{const j=yield fr(w.firebaseDependencies,A),ne=Object.assign(Object.assign({},A),{token:j,createTime:Date.now()});return yield Wo(w.firebaseDependencies,ne),j}catch(j){throw yield _i(w),j}})).apply(this,arguments)}function Qs(w,A){return go.apply(this,arguments)}function go(){return(go=(0,B.Z)(function*(w,A){const ne={token:yield vi(w,A),createTime:Date.now(),subscriptionOptions:A};return yield Wo(w,ne),ne.token})).apply(this,arguments)}function xo(w,A){return ru.apply(this,arguments)}function ru(){return(ru=(0,B.Z)(function*(w,A){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lo(A)})})).apply(this,arguments)}function b(w,A){return A.vapidKey===w.vapidKey&&A.endpoint===w.endpoint&&A.auth===w.auth&&A.p256dh===w.p256dh}function V(w){const A={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function x(w,A){if(!A.notification)return;w.notification={};const j=A.notification.title;j&&(w.notification.title=j);const ne=A.notification.body;ne&&(w.notification.body=ne);const ge=A.notification.image;ge&&(w.notification.image=ge);const be=A.notification.icon;be&&(w.notification.icon=be)}(A,w),function W(w,A){!A.data||(w.data=A.data)}(A,w),function ve(w,A){var j,ne,ge,be,it;if(!(A.fcmOptions||null!==(j=A.notification)&&void 0!==j&&j.click_action))return;w.fcmOptions={};const Kt=null!==(ge=null===(ne=A.fcmOptions)||void 0===ne?void 0:ne.link)&&void 0!==ge?ge:null===(be=A.notification)||void 0===be?void 0:be.click_action;Kt&&(w.fcmOptions.link=Kt);const Gt=null===(it=A.fcmOptions)||void 0===it?void 0:it.analytics_label;Gt&&(w.fcmOptions.analyticsLabel=Gt)}(A,w),A}function Je(w){return"object"==typeof w&&!!w&&tn in w}function dt(w,A){const j=[];for(let ne=0;ne<w.length;ne++)j.push(w.charAt(ne)),ne<A.length&&j.push(A.charAt(ne));return j.join("")}function dr(w){return hr.create("missing-app-config-values",{valueName:w})}dt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zn{constructor(A,j,ne){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ge=function pn(w){if(!w||!w.options)throw dr("App Configuration Object");if(!w.name)throw dr("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:j}=w;for(const ne of A)if(!j[ne])throw dr(ne);return{appName:w.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ge,installations:j,analyticsProvider:ne}}_delete(){return Promise.resolve()}}function Er(w){return vn.apply(this,arguments)}function vn(){return(vn=(0,B.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(P,{scope:M}),w.swRegistration.update().catch(()=>{})}catch(A){throw hr.create("failed-service-worker-registration",{browserErrorMessage:A?.message})}})).apply(this,arguments)}function Mr(w,A){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,B.Z)(function*(w,A){if(!A&&!w.swRegistration&&(yield Er(w)),A||!w.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw hr.create("invalid-sw-registration");w.swRegistration=A}})).apply(this,arguments)}function si(w,A){return _s.apply(this,arguments)}function _s(){return(_s=(0,B.Z)(function*(w,A){A?w.vapidKey=A:w.vapidKey||(w.vapidKey=q)})).apply(this,arguments)}function wr(){return(wr=(0,B.Z)(function*(w,A){if(!navigator)throw hr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw hr.create("permission-blocked");return yield si(w,A?.vapidKey),yield Mr(w,A?.serviceWorkerRegistration),ls(w)})).apply(this,arguments)}function xr(w,A,j){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,B.Z)(function*(w,A,j){const ne=Zt(A);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(ne,{message_id:j[tn],message_name:j[Hn],message_time:j[Zs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zt(w){switch(w){case fi.NOTIFICATION_CLICKED:return"notification_open";case fi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ua(){return(ua=(0,B.Z)(function*(w,A){const j=A.data;if(!j.isFirebaseMessaging)return;w.onMessageHandler&&j.messageType===fi.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(V(j)):w.onMessageHandler.next(V(j)));const ne=j.data;Je(ne)&&"1"===ne[ys]&&(yield xr(w,j.messageType,ne))})).apply(this,arguments)}const Wt="@firebase/messaging",bt=w=>{const A=new Zn(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function an(w,A){return ua.apply(this,arguments)}(A,j)),A},oi=w=>{const A=w.getProvider("messaging").getImmediate();return{getToken:ne=>function _t(w,A){return wr.apply(this,arguments)}(A,ne)}};function Ru(){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,B.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ua(){(0,le._registerComponent)(new we.wA("messaging",bt,"PUBLIC")),(0,le._registerComponent)(new we.wA("messaging-internal",oi,"PRIVATE")),(0,le.registerVersion)(Wt,"0.12.4"),(0,le.registerVersion)(Wt,"0.12.4","esm2017")}();const Rn="analytics",Js="firebase_id",mn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ls="https://www.googletagmanager.com/gtag/js",In=new Ee.Yd("@firebase/analytics"),er=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function zt(w){if(!w.startsWith(Ls)){const A=er.create("invalid-gtag-resource",{gtagURL:w});return In.warn(A.message),""}return w}function $i(w){return Promise.all(w.map(A=>A.catch(j=>j)))}function mo(w,A){const j=function ba(w,A){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(w,A)),j}("firebase-js-sdk-policy",{createScriptURL:zt}),ne=document.createElement("script"),ge=`${Ls}?l=${w}&id=${A}`;ne.src=j?j?.createScriptURL(ge):ge,ne.async=!0,document.head.appendChild(ne)}function Ga(w,A,j,ne,ge,be){return Po.apply(this,arguments)}function Po(){return(Po=(0,B.Z)(function*(w,A,j,ne,ge,be){const it=ne[ge];try{if(it)yield A[it];else{const Gt=(yield $i(j)).find(yn=>yn.measurementId===ge);Gt&&(yield A[Gt.appId])}}catch(Kt){In.error(Kt)}w("config",ge,be)})).apply(this,arguments)}function Ta(w,A,j,ne,ge){return iu.apply(this,arguments)}function iu(){return(iu=(0,B.Z)(function*(w,A,j,ne,ge){try{let be=[];if(ge&&ge.send_to){let it=ge.send_to;Array.isArray(it)||(it=[it]);const Kt=yield $i(j);for(const Gt of it){const yn=Kt.find(Ln=>Ln.measurementId===Gt),_n=yn&&A[yn.appId];if(!_n){be=[];break}be.push(_n)}}0===be.length&&(be=Object.values(A)),yield Promise.all(be),w("event",ne,ge||{})}catch(be){In.error(be)}})).apply(this,arguments)}function su(w){const A=window.document.getElementsByTagName("script");for(const j of Object.values(A))if(j.src&&j.src.includes(Ls)&&j.src.includes(w))return j;return null}const ti=new class da{constructor(A={},j=1e3){this.throttleMetadata=A,this.intervalMillis=j}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,j){this.throttleMetadata[A]=j}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function je(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function ha(w){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,B.Z)(function*(w){var A;const{appId:j,apiKey:ne}=w,ge={method:"GET",headers:je(ne)},be=mn.replace("{app-id}",j),it=yield fetch(be,ge);if(200!==it.status&&304!==it.status){let Kt="";try{const Gt=yield it.json();null!==(A=Gt.error)&&void 0!==A&&A.message&&(Kt=Gt.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:it.status,responseMessage:Kt})}return it.json()})).apply(this,arguments)}function Nu(w){return pi.apply(this,arguments)}function pi(){return(pi=(0,B.Z)(function*(w,A=ti,j){const{appId:ne,apiKey:ge,measurementId:be}=w.options;if(!ne)throw er.create("no-app-id");if(!ge){if(be)return{measurementId:be,appId:ne};throw er.create("no-api-key")}const it=A.getThrottleMetadata(ne)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Kt=new au;return setTimeout((0,B.Z)(function*(){Kt.abort()}),void 0!==j?j:6e4),Ni({appId:ne,apiKey:ge,measurementId:be},it,Kt,A)})).apply(this,arguments)}function Ni(w,A,j){return ou.apply(this,arguments)}function ou(){return(ou=(0,B.Z)(function*(w,{throttleEndTimeMillis:A,backoffCount:j},ne,ge=ti){var be;const{appId:it,measurementId:Kt}=w;try{yield Vs(ne,A)}catch(Gt){if(Kt)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${Gt?.message}]`),{appId:it,measurementId:Kt};throw Gt}try{const Gt=yield ha(w);return ge.deleteThrottleMetadata(it),Gt}catch(Gt){const yn=Gt;if(!Aa(yn)){if(ge.deleteThrottleMetadata(it),Kt)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kt} provided in the "measurementId" field in the local Firebase config. [${yn?.message}]`),{appId:it,measurementId:Kt};throw Gt}const _n=503===Number(null===(be=yn?.customData)||void 0===be?void 0:be.httpStatus)?(0,he.$s)(j,ge.intervalMillis,30):(0,he.$s)(j,ge.intervalMillis),Ln={throttleEndTimeMillis:Date.now()+_n,backoffCount:j+1};return ge.setThrottleMetadata(it,Ln),In.debug(`Calling attemptFetch again in ${_n} millis`),Ni(w,Ln,ne,ge)}})).apply(this,arguments)}function Vs(w,A){return new Promise((j,ne)=>{const ge=Math.max(A-Date.now(),0),be=setTimeout(j,ge);w.addEventListener(()=>{clearTimeout(be),ne(er.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Aa(w){if(!(w instanceof he.ZR&&w.customData))return!1;const A=Number(w.customData.httpStatus);return 429===A||500===A||503===A||504===A}class au{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let ku,pe;function ds(){return(ds=(0,B.Z)(function*(w,A,j,ne,ge){if(ge&&ge.global)w("event",j,ne);else{const be=yield A;w("event",j,Object.assign(Object.assign({},ne),{send_to:be}))}})).apply(this,arguments)}function et(w){pe=w}function $t(w){ku=w}function jn(){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,B.Z)(function*(){if(!(0,he.hl)())return In.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(w){return In.warn(er.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wr(){return(Wr=(0,B.Z)(function*(w,A,j,ne,ge,be,it){var Kt;const Gt=Nu(w);Gt.then(mi=>{j[mi.measurementId]=mi.appId,w.options.measurementId&&mi.measurementId!==w.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${mi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mi=>In.error(mi)),A.push(Gt);const yn=jn().then(mi=>{if(mi)return ne.getId()}),[_n,Ln]=yield Promise.all([Gt,yn]);su(be)||mo(be,_n.measurementId),pe&&(ge("consent","default",pe),et(void 0)),ge("js",new Date);const hs=null!==(Kt=it?.config)&&void 0!==Kt?Kt:{};return hs.origin="firebase",hs.update=!0,null!=Ln&&(hs[Js]=Ln),ge("config",_n.measurementId,hs),ku&&(ge("set",ku),$t(void 0)),_n.measurementId})).apply(this,arguments)}class Is{constructor(A){this.app=A}_delete(){return delete Ei[this.app.options.appId],Promise.resolve()}}let Ei={},Us=[];const Fu={};let lu,Ds,yo="dataLayer",cu=!1;function Fl(w,A,j){!function Lu(){const w=[];if((0,he.ru)()&&w.push("This is a browser extension environment."),(0,he.zI)()||w.push("Cookies are not available."),w.length>0){const A=w.map((ne,ge)=>`(${ge+1}) ${ne}`).join(" "),j=er.create("invalid-analytics-context",{errorInfo:A});In.warn(j.message)}}();const ne=w.options.appId;if(!ne)throw er.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw er.create("no-api-key");In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ei[ne])throw er.create("already-exists",{id:ne});if(!cu){!function Lr(w){let A=[];Array.isArray(window[w])?A=window[w]:window[w]=A}(yo);const{wrappedGtag:be,gtagCore:it}=function Es(w,A,j,ne,ge){let be=function(...it){window[ne].push(arguments)};return window[ge]&&"function"==typeof window[ge]&&(be=window[ge]),window[ge]=function Ou(w,A,j,ne){function be(){return(be=(0,B.Z)(function*(it,...Kt){try{if("event"===it){const[Gt,yn]=Kt;yield Ta(w,A,j,Gt,yn)}else if("config"===it){const[Gt,yn]=Kt;yield Ga(w,A,j,ne,Gt,yn)}else if("consent"===it){const[Gt]=Kt;w("consent","update",Gt)}else if("get"===it){const[Gt,yn,_n]=Kt;w("get",Gt,yn,_n)}else if("set"===it){const[Gt]=Kt;w("set",Gt)}else w(it,...Kt)}catch(Gt){In.error(Gt)}})).apply(this,arguments)}return function ge(it){return be.apply(this,arguments)}}(be,w,A,j),{gtagCore:be,wrappedGtag:window[ge]}}(Ei,Us,Fu,yo,"gtag");Ds=be,lu=it,cu=!0}return Ei[ne]=function Vr(w,A,j,ne,ge,be,it){return Wr.apply(this,arguments)}(w,Us,Fu,A,lu,yo,j),new Is(w)}function Hi(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,B.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const ol="@firebase/analytics";!function wi(){(0,le._registerComponent)(new we.wA(Rn,(A,{options:j})=>Fl(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,le._registerComponent)(new we.wA("analytics-internal",function w(A){try{const j=A.getProvider(Rn).getImmediate();return{logEvent:(ne,ge,be)=>function Oo(w,A,j,ne){w=(0,he.m9)(w),function kl(w,A,j,ne,ge){return ds.apply(this,arguments)}(Ds,Ei[w.app.options.appId],A,j,ne).catch(ge=>In.error(ge))}(j,ne,ge,be)}}catch(j){throw er.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,le.registerVersion)(ol,"0.10.0"),(0,le.registerVersion)(ol,"0.10.0","esm2017")}();var hu=R(4408),ui=R(7565);const Vu=new class xa extends ui.v{}(class vo extends hu.o{constructor(A,j){super(A,j),this.scheduler=A,this.work=j}schedule(A,j=0){return j>0?super.schedule(A,j):(this.delay=j,this.state=A,this.scheduler.flush(this),this)}execute(A,j){return j>0||this.closed?super.execute(A,j):this._execute(A,j)}requestAsyncId(A,j,ne=0){return null!=ne&&ne>0||null==ne&&this.delay>0?super.requestAsyncId(A,j,ne):(A.flush(this),0)}});var al=R(4986),Ul=R(8505),Qo=R(9468),Jo=R(5363);const Ra=new p.GfV("7.6.1"),Xs="__angularfire_symbol__analyticsIsSupportedValue",_o="__angularfire_symbol__analyticsIsSupported",pa="__angularfire_symbol__remoteConfigIsSupportedValue",Xo="__angularfire_symbol__remoteConfigIsSupported",fu="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function ul(w,A,j){if(A){if(1===A.length)return A[0];const be=A.filter(it=>it.app===j);if(1===be.length)return be[0]}return j.container.getProvider(w).getImmediate({optional:!0})}globalThis[_o]||(globalThis[_o]=Hi().then(w=>globalThis[Xs]=w).catch(()=>globalThis[Xs]=!1)),globalThis[Ka]||(globalThis[Ka]=Ru().then(w=>globalThis[fu]=w).catch(()=>globalThis[fu]=!1)),globalThis[Xo]||(globalThis[Xo]=ii().then(w=>globalThis[pa]=w).catch(()=>globalThis[pa]=!1));const gu=(w,A)=>{const j=A?[A]:(0,F.C6)(),ne=[];return j.forEach(ge=>{ge.container.getProvider(w).instances.forEach(it=>{ne.includes(it)||ne.push(it)})}),ne};function mu(){}class ll{constructor(A,j=Vu){this.zone=A,this.delegate=j}now(){return this.delegate.now()}schedule(A,j,ne){const ge=this.zone;return this.delegate.schedule(function(it){ge.runGuarded(()=>{A.apply(this,[it])})},j,ne)}}class ju{constructor(A){this.zone=A,this.task=null}call(A,j){const ne=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mu,{},mu,mu)),j.pipe((0,Ul.b)({next:ne,complete:ne,error:ne})).subscribe(A).add(ne)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let td=(()=>{class w{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new ll(Zone.current)),this.insideAngular=j.run(()=>new ll(Zone.current,al.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(j){return new(j||w)(p.LFG(p.R0b))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function ga(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function cl(w){return ga(),function Jr(w){return function(j){return(j=j.lift(new ju(w.ngZone))).pipe((0,Qo.R)(w.outsideAngular),(0,Jo.Q)(w.insideAngular))}}(ga())(w)}},1389:(Lt,Le,R)=>{R.d(Le,{$:()=>P,A:()=>ue,D:()=>rt,I:()=>br,J:()=>Ki,L:()=>zr,N:()=>Fe,P:()=>Vr,Q:()=>na,R:()=>ws,U:()=>Ri,V:()=>ii,W:()=>Ns,X:()=>so,Y:()=>Bo,Z:()=>jo,_:()=>Sn,a:()=>la,a0:()=>q,a1:()=>tn,a2:()=>hi,a3:()=>co,a4:()=>Ho,a5:()=>zo,a6:()=>Pi,a7:()=>Da,a8:()=>Mo,a9:()=>fo,aA:()=>Se,aB:()=>pa,aC:()=>H,aD:()=>pt,aE:()=>Qo,aF:()=>Vl,aG:()=>ai,aH:()=>Tr,aL:()=>ca,aO:()=>Yi,aa:()=>Oi,ab:()=>Ko,ac:()=>ia,ad:()=>fr,ae:()=>oa,af:()=>qo,ai:()=>aa,aj:()=>ji,ak:()=>_i,an:()=>Ao,ao:()=>x,aq:()=>_s,ar:()=>Wt,as:()=>Yt,at:()=>re,au:()=>ot,av:()=>fe,aw:()=>hs,ax:()=>pu,ay:()=>ae,az:()=>Xe,b:()=>Ba,c:()=>Ds,d:()=>Fl,e:()=>ki,f:()=>ol,g:()=>xa,h:()=>hu,i:()=>il,j:()=>al,k:()=>eo,l:()=>O,m:()=>Rf,p:()=>te,r:()=>ce,s:()=>y,u:()=>jn});var p=R(5861),F=R(2090),B=R(6881),le=R(7582),he=R(1877),we=R(4859);const te={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const rt=function ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ye=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new he.Yd("@firebase/auth");function ft(_,...d){Ne.logLevel<=he.in.ERROR&&Ne.error(`Auth (${B.SDK_VERSION}): ${_}`,...d)}function fe(_,...d){throw st(_,...d)}function Xe(_,...d){return st(_,...d)}function nt(_,d,g){const I=Object.assign(Object.assign({},Ye()),{[d]:g});return new F.LL("auth","Firebase",I).create(d,{appName:_.name})}function yt(_,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&fe(_,"argument-error"),nt(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(_,...d){if("string"!=typeof _){const g=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=_.name),_._errorFactory.create(g,...I)}return Tt.create(_,...d)}function Se(_,d,...g){if(!_)throw st(d,...g)}function xt(_){const d="INTERNAL ASSERTION FAILED: "+_;throw ft(d),new Error(d)}function Yt(_,d){_||xt(d)}function It(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Bt(){return"http:"===Nt()||"https:"===Nt()}function Nt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Pe{constructor(d,g){this.shortDelay=d,this.longDelay=g,Yt(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Bt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qe(_,d){Yt(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class He{static initialize(d,g,I){this.fetchImpl=d,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ht=new Pe(3e4,6e4);function lt(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function Dt(_,d,g,I){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(_,d,g,I,$={}){return At(_,$,(0,p.Z)(function*(){let J={},xe={};I&&("GET"===d?xe=I:J={body:JSON.stringify(I)});const tt=(0,F.xO)(Object.assign({key:_.config.apiKey},xe)).slice(1),Ut=yield _._getAdditionalHeaders();return Ut["Content-Type"]="application/json",_.languageCode&&(Ut["X-Firebase-Locale"]=_.languageCode),He.fetch()($n(_,_.config.apiHost,g,tt),Object.assign({method:d,headers:Ut,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function At(_,d,g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(_,d,g){_._canInitEmulator=!1;const I=Object.assign(Object.assign({},Ge),d);try{const $=new Yn(_),J=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const xe=yield J.json();if("needConfirmation"in xe)throw Wn(_,"account-exists-with-different-credential",xe);if(J.ok&&!("errorMessage"in xe))return xe;{const tt=J.ok?xe.errorMessage:xe.error.message,[Ut,Xt]=tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ut)throw Wn(_,"credential-already-in-use",xe);if("EMAIL_EXISTS"===Ut)throw Wn(_,"email-already-in-use",xe);if("USER_DISABLED"===Ut)throw Wn(_,"user-disabled",xe);const bn=I[Ut]||Ut.toLowerCase().replace(/[_\s]+/g,"-");if(Xt)throw nt(_,bn,Xt);fe(_,bn)}}catch($){if($ instanceof F.ZR)throw $;fe(_,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function ln(_,d,g,I){return cn.apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(_,d,g,I,$={}){const J=yield Dt(_,d,g,I,$);return"mfaPendingCredential"in J&&fe(_,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function $n(_,d,g,I){const $=`${d}${g}?${I}`;return _.config.emulator?qe(_.config,$):`${_.config.apiScheme}://${$}`}class Yn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(Xe(this.auth,"network-request-failed")),ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(_,d,g){const I={appName:_.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const $=Xe(_,d,I);return $.customData._tokenResponse=g,$}function An(){return(An=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Jn(_,d){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function kr(_,d){return St.apply(this,arguments)}function St(){return(St=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function gn(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function jr(){return(jr=(0,p.Z)(function*(_,d=!1){const g=(0,F.m9)(_),I=yield g.getIdToken(d),$=Dn(I);Se($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const J="object"==typeof $.firebase?$.firebase:void 0,xe=J?.sign_in_provider;return{claims:$,token:I,authTime:gn(Nr($.auth_time)),issuedAtTime:gn(Nr($.iat)),expirationTime:gn(Nr($.exp)),signInProvider:xe||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function Nr(_){return 1e3*Number(_)}function Dn(_){const[d,g,I]=_.split(".");if(void 0===d||void 0===g||void 0===I)return ft("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,F.tV)(g);return $?JSON.parse($):(ft("Failed to decode base64 JWT payload"),null)}catch($){return ft("Caught error parsing JWT payload as JSON",$?.toString()),null}}function dn(_,d){return qt.apply(this,arguments)}function qt(){return(qt=(0,p.Z)(function*(_,d,g=!1){if(g)return d;try{return yield d}catch(I){throw I instanceof F.ZR&&on(I)&&_.auth.currentUser===_&&(yield _.auth.signOut()),I}})).apply(this,arguments)}function on({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Mn{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),I)}iteration(){var d=this;return(0,p.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&d.schedule(!0))}d.schedule()})()}}class mr{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=gn(this.lastLoginAt),this.creationTime=gn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nr(_){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(_){var d;const g=_.auth,I=yield _.getIdToken(),$=yield dn(_,kr(g,{idToken:I}));Se($?.users.length,g,"internal-error");const J=$.users[0];_._notifyReloadListener(J);const xe=null!==(d=J.providerUserInfo)&&void 0!==d&&d.length?Fr(J.providerUserInfo):[],tt=En(_.providerData,xe),bn=!!_.isAnonymous&&!(_.email&&J.passwordHash||tt?.length),pr={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:tt,metadata:new mr(J.createdAt,J.lastLoginAt),isAnonymous:bn};Object.assign(_,pr)})).apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(_){const d=(0,F.m9)(_);yield nr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function En(_,d){return[..._.filter(I=>!d.some($=>$.providerId===I.providerId)),...d]}function Fr(_){return _.map(d=>{var{providerId:g}=d,I=(0,le._T)(d,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Ft(){return(Ft=(0,p.Z)(function*(_,d){const g=yield At(_,{},(0,p.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:$,apiKey:J}=_.config,xe=$n(_,$,"/v1/token",`key=${J}`),tt=yield _._getAdditionalHeaders();return tt["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(xe,{method:"POST",headers:tt,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Se(d.idToken,"internal-error"),Se(typeof d.idToken<"u","internal-error"),Se(typeof d.refreshToken<"u","internal-error");const g="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Pn(_){const d=Dn(_);return Se(d,"internal-error"),Se(typeof d.exp<"u","internal-error"),Se(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var I=this;return(0,p.Z)(function*(){return Se(!I.accessToken||I.refreshToken,d,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var I=this;return(0,p.Z)(function*(){const{accessToken:$,refreshToken:J,expiresIn:xe}=yield function wn(_,d){return Ft.apply(this,arguments)}(d,g);I.updateTokensAndExpiration($,J,Number(xe))})()}updateTokensAndExpiration(d,g,I){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,g){const{refreshToken:I,accessToken:$,expirationTime:J}=g,xe=new Te;return I&&(Se("string"==typeof I,"internal-error",{appName:d}),xe.refreshToken=I),$&&(Se("string"==typeof $,"internal-error",{appName:d}),xe.accessToken=$),J&&(Se("number"==typeof J,"internal-error",{appName:d}),xe.expirationTime=J),xe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Te,this.toJSON())}_performRefresh(){return xt("not implemented")}}function Et(_,d){Se("string"==typeof _||typeof _>"u","internal-error",{appName:d})}class Qe{constructor(d){var{uid:g,auth:I,stsTokenManager:$}=d,J=(0,le._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new mr(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,p.Z)(function*(){const I=yield dn(g,g.stsTokenManager.getToken(g.auth,d));return Se(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(d){return function ar(_){return jr.apply(this,arguments)}(this,d)}reload(){return function rn(_){return ur.apply(this,arguments)}(this)}_assign(d){this!==d&&(Se(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const g=new Qe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(d){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var I=this;return(0,p.Z)(function*(){let $=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),$=!0),g&&(yield nr(I)),yield I.auth._persistUserIfCurrent(I),$&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,p.Z)(function*(){const g=yield d.getIdToken();return yield dn(d,function Pt(_,d){return An.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var I,$,J,xe,tt,Ut,Xt,bn;const pr=null!==(I=g.displayName)&&void 0!==I?I:void 0,Eo=null!==($=g.email)&&void 0!==$?$:void 0,Bs=null!==(J=g.phoneNumber)&&void 0!==J?J:void 0,$l=null!==(xe=g.photoURL)&&void 0!==xe?xe:void 0,Cs=null!==(tt=g.tenantId)&&void 0!==tt?tt:void 0,Hl=null!==(Ut=g._redirectEventId)&&void 0!==Ut?Ut:void 0,_u=null!==(Xt=g.createdAt)&&void 0!==Xt?Xt:void 0,od=null!==(bn=g.lastLoginAt)&&void 0!==bn?bn:void 0,{uid:ea,emailVerified:Sc,isAnonymous:Gu,providerData:Za,stsTokenManager:ad}=g;Se(ea&&ad,d,"internal-error");const tr=Te.fromJSON(this.name,ad);Se("string"==typeof ea,d,"internal-error"),Et(pr,d.name),Et(Eo,d.name),Se("boolean"==typeof Sc,d,"internal-error"),Se("boolean"==typeof Gu,d,"internal-error"),Et(Bs,d.name),Et($l,d.name),Et(Cs,d.name),Et(Hl,d.name),Et(_u,d.name),Et(od,d.name);const ud=new Qe({uid:ea,auth:d,email:Eo,emailVerified:Sc,displayName:pr,isAnonymous:Gu,photoURL:$l,phoneNumber:Bs,tenantId:Cs,stsTokenManager:tr,createdAt:_u,lastLoginAt:od});return Za&&Array.isArray(Za)&&(ud.providerData=Za.map(dh=>Object.assign({},dh))),Hl&&(ud._redirectEventId=Hl),ud}static _fromIdTokenResponse(d,g,I=!1){return(0,p.Z)(function*(){const $=new Te;$.updateFromServerResponse(g);const J=new Qe({uid:g.localId,auth:d,stsTokenManager:$,isAnonymous:I});return yield nr(J),J})()}}const ke=new Map;function H(_){Yt(_ instanceof Function,"Expected a class definition");let d=ke.get(_);return d?(Yt(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,ke.set(_,d),d)}const Fe=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,I){var $=this;return(0,p.Z)(function*(){$.storage[g]=I})()}_get(g){var I=this;return(0,p.Z)(function*(){const $=I.storage[g];return void 0===$?null:$})()}_remove(g){var I=this;return(0,p.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return _.type="NONE",_})();function pt(_,d,g){return`firebase:${_}:${d}:${g}`}class se{constructor(d,g,I){this.persistence=d,this.auth=g,this.userKey=I;const{config:$,name:J}=this.auth;this.fullUserKey=pt(this.userKey,$.apiKey,J),this.fullPersistenceKey=pt("persistence",$.apiKey,J),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,p.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?Qe._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,p.Z)(function*(){if(g.persistence===d)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,I="authUser"){return(0,p.Z)(function*(){if(!g.length)return new se(H(Fe),d,I);const $=(yield Promise.all(g.map(function(){var Xt=(0,p.Z)(function*(bn){if(yield bn._isAvailable())return bn});return function(bn){return Xt.apply(this,arguments)}}()))).filter(Xt=>Xt);let J=$[0]||H(Fe);const xe=pt(I,d.config.apiKey,d.name);let tt=null;for(const Xt of g)try{const bn=yield Xt._get(xe);if(bn){const pr=Qe._fromJSON(d,bn);Xt!==J&&(tt=pr),J=Xt;break}}catch{}const Ut=$.filter(Xt=>Xt._shouldAllowMigration);return J._shouldAllowMigration&&Ut.length?(J=Ut[0],tt&&(yield J._set(xe,tt.toJSON())),yield Promise.all(g.map(function(){var Xt=(0,p.Z)(function*(bn){if(bn!==J)try{yield bn._remove(xe)}catch{}});return function(bn){return Xt.apply(this,arguments)}}())),new se(J,d,I)):new se(J,d,I)})()}}function de(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(De(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(K(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(kt(d))return"Blackberry";if(en(d))return"Webos";if(Y(d))return"Safari";if((d.includes("chrome/")||G(d))&&!d.includes("edge/"))return"Chrome";if(ot(d))return"Android";{const I=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function K(_=(0,F.z$)()){return/firefox\//i.test(_)}function Y(_=(0,F.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function G(_=(0,F.z$)()){return/crios\//i.test(_)}function De(_=(0,F.z$)()){return/iemobile/i.test(_)}function ot(_=(0,F.z$)()){return/android/i.test(_)}function kt(_=(0,F.z$)()){return/blackberry/i.test(_)}function en(_=(0,F.z$)()){return/webos/i.test(_)}function re(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function ae(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function Ue(_=(0,F.z$)()){return re(_)||ot(_)||en(_)||kt(_)||/windows phone/i.test(_)||De(_)}function hn(_,d=[]){let g;switch(_){case"Browser":g=de((0,F.z$)());break;case"Worker":g=`${de((0,F.z$)())}-${_}`;break;default:g=_}const I=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${B.SDK_VERSION}/${I}`}function Re(){return(Re=(0,p.Z)(function*(_){return(yield Dt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gt(_,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,p.Z)(function*(_,d){return Dt(_,"GET","/v2/recaptchaConfig",lt(_,d))})).apply(this,arguments)}function fn(_){return void 0!==_&&void 0!==_.getResponse}function xn(_){return void 0!==_&&void 0!==_.enterprise}class Gn{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Nn(_){return new Promise((d,g)=>{const I=document.createElement("script");I.setAttribute("src",_),I.onload=d,I.onerror=$=>{const J=Xe("internal-error");J.customData=$,g(J)},I.type="text/javascript",I.charset="UTF-8",function Cr(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(I)})}function Kr(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Ms{constructor(d){this.type="recaptcha-enterprise",this.auth=Tr(d)}verify(d="verify",g=!1){var I=this;return(0,p.Z)(function*(){function J(){return J=(0,p.Z)(function*(tt){if(!g){if(null==tt.tenantId&&null!=tt._agentRecaptchaConfig)return tt._agentRecaptchaConfig.siteKey;if(null!=tt.tenantId&&void 0!==tt._tenantRecaptchaConfigs[tt.tenantId])return tt._tenantRecaptchaConfigs[tt.tenantId].siteKey}return new Promise(function(){var Ut=(0,p.Z)(function*(Xt,bn){gt(tt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pr=>{if(void 0!==pr.recaptchaKey){const Eo=new Gn(pr);return null==tt.tenantId?tt._agentRecaptchaConfig=Eo:tt._tenantRecaptchaConfigs[tt.tenantId]=Eo,Xt(Eo.siteKey)}bn(new Error("recaptcha Enterprise site key undefined"))}).catch(pr=>{bn(pr)})});return function(Xt,bn){return Ut.apply(this,arguments)}}())}),J.apply(this,arguments)}function xe(tt,Ut,Xt){const bn=window.grecaptcha;xn(bn)?bn.enterprise.ready(()=>{bn.enterprise.execute(tt,{action:d}).then(pr=>{Ut(pr)}).catch(()=>{Ut("NO_RECAPTCHA")})}):Xt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((tt,Ut)=>{(function $(tt){return J.apply(this,arguments)})(I.auth).then(Xt=>{if(!g&&xn(window.grecaptcha))xe(Xt,tt,Ut);else{if(typeof window>"u")return void Ut(new Error("RecaptchaVerifier is only supported in browser"));Nn("https://www.google.com/recaptcha/enterprise.js?render="+Xt).then(()=>{xe(Xt,tt,Ut)}).catch(bn=>{Ut(bn)})}}).catch(Xt=>{Ut(Xt)})})})()}}function zn(_,d,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(_,d,g,I=!1){const $=new Ms(_);let J;try{J=yield $.verify(g)}catch{J=yield $.verify(g,!0)}const xe=Object.assign({},d);return Object.assign(xe,I?{captchaResp:J}:{captchaResponse:J}),Object.assign(xe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(xe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),xe})).apply(this,arguments)}class Si{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const I=J=>new Promise((xe,tt)=>{try{xe(d(J))}catch(Ut){tt(Ut)}});I.onAbort=g,this.queue.push(I);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===d)return;const I=[];try{for(const $ of g.queue)yield $(d),$.onAbort&&I.push($.onAbort)}catch($){I.reverse();for(const J of I)try{J()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class Mi{constructor(d,g,I,$){this.app=d,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=I,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Li(this),this.idTokenSubscription=new Li(this),this.beforeStateQueue=new Si(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(d,g){var I=this;return g&&(this._popupRedirectResolver=H(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var $,J;if(!I._deleted&&(I.persistenceManager=yield se.create(I,d),!I._deleted)){if(null!==($=I._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(J=I.currentUser)||void 0===J?void 0:J.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,p.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,p.Z)(function*(){var I;const $=yield g.assertedPersistence.getCurrentUser();let J=$,xe=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const tt=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,Ut=J?._redirectEventId,Xt=yield g.tryRedirectSignIn(d);(!tt||tt===Ut)&&Xt?.user&&(J=Xt.user,xe=!0)}if(!J)return g.directlySetCurrentUser(null);if(!J._redirectEventId){if(xe)try{yield g.beforeStateQueue.runMiddleware(J)}catch(tt){J=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(tt))}return J?g.reloadAndSetCurrentUserOrClear(J):g.directlySetCurrentUser(null)}return Se(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===J._redirectEventId?g.directlySetCurrentUser(J):g.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(d){var g=this;return(0,p.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,p.Z)(function*(){try{yield nr(d)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function $e(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,p.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,p.Z)(function*(){const I=d?(0,F.m9)(d):null;return I&&Se(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(d,g=!1){var I=this;return(0,p.Z)(function*(){if(!I._deleted)return d&&Se(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,p.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,p.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(H(d))}))}initializeRecaptchaConfig(){var d=this;return(0,p.Z)(function*(){const g=yield gt(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Gn(g);null==d.tenantId?d._agentRecaptchaConfig=I:d._tenantRecaptchaConfigs[d.tenantId]=I,I.emailPasswordEnabled&&new Ms(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new F.LL("auth","Firebase",d())}onAuthStateChanged(d,g,I){return this.registerStateListener(this.authStateSubscription,d,g,I)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,I){return this.registerStateListener(this.idTokenSubscription,d,g,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var I=this;return(0,p.Z)(function*(){const $=yield I.getOrInitRedirectPersistenceManager(g);return null===d?$.removeCurrentUser():$.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const I=d&&H(d)||g._popupRedirectResolver;Se(I,g,"argument-error"),g.redirectPersistenceManager=yield se.create(g,[H(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,p.Z)(function*(){var I,$;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===d?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,p.Z)(function*(){if(d===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,I,$){if(this._deleted)return()=>{};const J="function"==typeof g?g:g.next.bind(g),xe=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(xe,this,"internal-error"),xe.then(()=>J(this.currentUser)),"function"==typeof g?d.addObserver(g,I,$):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==d&&g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh(),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=hn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,p.Z)(function*(){var g;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const $=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();$&&(I["X-Firebase-Client"]=$);const J=yield d._getAppCheckToken();return J&&(I["X-Firebase-AppCheck"]=J),I})()}_getAppCheckToken(){var d=this;return(0,p.Z)(function*(){var g;const I=yield null===(g=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return I?.error&&function Ct(_,...d){Ne.logLevel<=he.in.WARN&&Ne.warn(`Auth (${B.SDK_VERSION}): ${_}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Tr(_){return(0,F.m9)(_)}class Li{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function br(_,d,g){const I=Tr(_);Se(I._canInitEmulator,I,"emulator-config-failed"),Se(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const $=!!g?.disableWarnings,J=xs(d),{host:xe,port:tt}=function Hr(_){const d=xs(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(I);if($){const J=$[1];return{host:J,port:Gr(I.substr(J.length+1))}}{const[J,xe]=I.split(":");return{host:J,port:Gr(xe)}}}(d);I.config.emulator={url:`${J}//${xe}${null===tt?"":`:${tt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:xe,port:tt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Gs(){function _(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function xs(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function Gr(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class Ki{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return xt("not implemented")}_getIdTokenResponse(d){return xt("not implemented")}_linkToIdToken(d,g){return xt("not implemented")}_getReauthenticationResolver(d){return xt("not implemented")}}function ci(_,d){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:resetPassword",lt(_,d))})).apply(this,arguments)}function yi(_,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function to(_,d){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:update",lt(_,d))})).apply(this,arguments)}function wa(_,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithPassword",lt(_,d))})).apply(this,arguments)}function Do(_,d){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:sendOobCode",lt(_,d))})).apply(this,arguments)}function no(_,d){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(_,d){return Do(_,d)})).apply(this,arguments)}function Ie(_,d){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(_,d){return Do(_,d)})).apply(this,arguments)}function ct(_,d){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(_,d){return Do(_,d)})).apply(this,arguments)}function Cn(_,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(_,d){return Do(_,d)})).apply(this,arguments)}function On(){return(On=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithEmailLink",lt(_,d))})).apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithEmailLink",lt(_,d))})).apply(this,arguments)}class Qr extends Ki{constructor(d,g,I,$=null){super("password",I),this._email=d,this._password=g,this._tenantId=$}static _fromEmailAndPassword(d,g){return new Qr(d,g,"password")}static _fromEmailAndCode(d,g,I=null){return new Qr(d,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,p.Z)(function*(){var I;switch(g.signInMethod){case"password":const $={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=d._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const J=yield zn(d,$,"signInWithPassword");return wa(d,J)}return wa(d,$).catch(function(){var J=(0,p.Z)(function*(xe){if("auth/missing-recaptcha-token"===xe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const tt=yield zn(d,$,"signInWithPassword");return wa(d,tt)}return Promise.reject(xe)});return function(xe){return J.apply(this,arguments)}}());case"emailLink":return function qn(_,d){return On.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:fe(d,"internal-error")}})()}_linkToIdToken(d,g){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return yi(d,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ui(_,d){return Yr.apply(this,arguments)}(d,{idToken:g,email:I._email,oobCode:I._password});default:fe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ir(_,d){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithIdp",lt(_,d))})).apply(this,arguments)}class zr extends Ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new zr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):fe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$}=g,J=(0,le._T)(g,["providerId","signInMethod"]);if(!I||!$)return null;const xe=new zr(I,$);return xe.idToken=J.idToken||void 0,xe.accessToken=J.accessToken||void 0,xe.secret=J.secret,xe.nonce=J.nonce,xe.pendingToken=J.pendingToken||null,xe}_getIdTokenResponse(d){return ir(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,ir(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,ir(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,F.xO)(g)}return d}}function Vo(_,d){return zs.apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:sendVerificationCode",lt(_,d))})).apply(this,arguments)}function gs(){return(gs=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithPhoneNumber",lt(_,d))})).apply(this,arguments)}function Uo(){return(Uo=(0,p.Z)(function*(_,d){const g=yield ln(_,"POST","/v1/accounts:signInWithPhoneNumber",lt(_,d));if(g.temporaryProof)throw Wn(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ps={USER_NOT_FOUND:"user-not-found"};function ta(){return(ta=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithPhoneNumber",lt(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ps)})).apply(this,arguments)}class _r extends Ki{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new _r({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new _r({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function ro(_,d){return gs.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function bo(_,d){return Uo.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function xi(_,d){return ta.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:I,verificationCode:$}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:I,code:$}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}=d;return I||g||$||J?new _r({verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:J}):null}}class os{constructor(d){var g,I,$,J,xe,tt;const Ut=(0,F.zd)((0,F.pd)(d)),Xt=null!==(g=Ut.apiKey)&&void 0!==g?g:null,bn=null!==(I=Ut.oobCode)&&void 0!==I?I:null,pr=function Zi(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Ut.mode)&&void 0!==$?$:null);Se(Xt&&bn&&pr,"argument-error"),this.apiKey=Xt,this.operation=pr,this.code=bn,this.continueUrl=null!==(J=Ut.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(xe=Ut.languageCode)&&void 0!==xe?xe:null,this.tenantId=null!==(tt=Ut.tenantId)&&void 0!==tt?tt:null}static parseLink(d){const g=function Ws(_){const d=(0,F.zd)((0,F.pd)(_)).link,g=d?(0,F.zd)((0,F.pd)(d)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||g||d||_}(d);try{return new os(g)}catch{return null}}}let na=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,I){return Qr._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const $=os.parseLink(I);return Se($,"argument-error"),Qr._fromEmailAndCode(g,$.code,$.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class yr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Os extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class so extends Os{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return Se("providerId"in g&&"signInMethod"in g,"argument-error"),zr._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Se(d.idToken||d.accessToken,"argument-error"),zr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return so.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return so.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:$,pendingToken:J,nonce:xe,providerId:tt}=d;if(!I&&!$&&!g&&!J||!tt)return null;try{return new so(tt)._credential({idToken:g,accessToken:I,nonce:xe,pendingToken:J})}catch{return null}}}let Ri=(()=>{class _ extends Os{constructor(){super("facebook.com")}static credential(g){return zr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ii=(()=>{class _ extends Os{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return zr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:$}=g;if(!I&&!$)return null;try{return _.credential(I,$)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Ns=(()=>{class _ extends Os{constructor(){super("github.com")}static credential(g){return zr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Yi extends Ki{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return ir(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,ir(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,ir(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$,pendingToken:J}=g;return I&&$&&J&&I===$?new Yi(I,J):null}static _create(d,g){return new Yi(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bo extends yr{constructor(d){Se(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Bo.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Bo.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=Yi.fromJSON(d);return Se(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:I}=d;if(!g||!I)return null;try{return Yi._create(I,g)}catch{return null}}}let jo=(()=>{class _ extends Os{constructor(){super("twitter.com")}static credential(g,I){return zr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:$}=g;if(!I||!$)return null;try{return _.credential(I,$)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Ks(_,d){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signUp",lt(_,d))})).apply(this,arguments)}class ei{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,I,$=!1){return(0,p.Z)(function*(){const J=yield Qe._fromIdTokenResponse(d,I,$),xe=Qi(I);return new ei({user:J,providerId:xe,_tokenResponse:I,operationType:g})})()}static _forOperation(d,g,I){return(0,p.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const $=Qi(I);return new ei({user:d,providerId:$,_tokenResponse:I,operationType:g})})()}}function Qi(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Sn(_){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(_){var d;const g=Tr(_);if(yield g._initializationPromise,null!==(d=g.currentUser)&&void 0!==d&&d.isAnonymous)return new ei({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Ks(g,{returnSecureToken:!0}),$=yield ei._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class oo extends F.ZR{constructor(d,g,I,$){var J;super(g.code,g.message),this.operationType=I,this.user=$,Object.setPrototypeOf(this,oo.prototype),this.customData={appName:d.name,tenantId:null!==(J=d.tenantId)&&void 0!==J?J:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,g,I,$){return new oo(d,g,I,$)}}function ao(_,d,g,I){return("reauthenticate"===d?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?oo._fromErrorAndOperation(_,J,d,I):J})}function sr(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function Ao(_,d){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(_,d){const g=(0,F.m9)(_);yield mt(!0,g,d);const{providerUserInfo:I}=yield Jn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),$=sr(I||[]);return g.providerData=g.providerData.filter(J=>$.has(J.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function as(_,d){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(_,d,g=!1){const I=yield dn(_,d._linkToIdToken(_.auth,yield _.getIdToken()),g);return ei._forOperation(_,"link",I)})).apply(this,arguments)}function mt(_,d,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,p.Z)(function*(_,d,g){yield nr(d);const $=!1===_?"provider-already-linked":"no-such-provider";Se(sr(d.providerData).has(g)===_,d.auth,$)})).apply(this,arguments)}function $o(_,d){return uo.apply(this,arguments)}function uo(){return(uo=(0,p.Z)(function*(_,d,g=!1){const{auth:I}=_,$="reauthenticate";try{const J=yield dn(_,ao(I,$,d,_),g);Se(J.idToken,I,"internal-error");const xe=Dn(J.idToken);Se(xe,I,"internal-error");const{sub:tt}=xe;return Se(_.uid===tt,I,"user-mismatch"),ei._forOperation(_,$,J)}catch(J){throw"auth/user-not-found"===J?.code&&fe(I,"user-mismatch"),J}})).apply(this,arguments)}function Ar(_,d){return k.apply(this,arguments)}function k(){return(k=(0,p.Z)(function*(_,d,g=!1){const I="signIn",$=yield ao(_,I,d),J=yield ei._fromIdTokenResponse(_,I,$);return g||(yield _._updateCurrentUser(J.user)),J})).apply(this,arguments)}function P(_,d){return M.apply(this,arguments)}function M(){return(M=(0,p.Z)(function*(_,d){return Ar(Tr(_),d)})).apply(this,arguments)}function q(_,d){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(_,d){const g=(0,F.m9)(_);return yield mt(!1,g,d.providerId),as(g,d)})).apply(this,arguments)}function tn(_,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(_,d){return $o((0,F.m9)(_),d)})).apply(this,arguments)}function Zs(_,d){return ys.apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(_,d){return ln(_,"POST","/v1/accounts:signInWithCustomToken",lt(_,d))})).apply(this,arguments)}function hi(_,d){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(_,d){const g=Tr(_),I=yield Zs(g,{token:d,returnSecureToken:!0}),$=yield ei._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class us{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?lo._fromServerResponse(d,g):"totpInfo"in g?li._fromServerResponse(d,g):fe(d,"internal-error")}}class lo extends us{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new lo(g)}}class li extends us{constructor(d){super("totp",d)}static _fromServerResponse(d,g){return new li(g)}}function Ys(_,d,g){var I;Se((null===(I=g.url)||void 0===I?void 0:I.length)>0,_,"invalid-continue-uri"),Se(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Se(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(Se(g.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function co(_,d,g){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,p.Z)(function*(_,d,g){var I;const $=Tr(_),J={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const xe=yield zn($,J,"getOobCode",!0);g&&Ys($,xe,g),yield Ie($,xe)}else g&&Ys($,J,g),yield Ie($,J).catch(function(){var xe=(0,p.Z)(function*(tt){if("auth/missing-recaptcha-token"!==tt.code)return Promise.reject(tt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ut=yield zn($,J,"getOobCode",!0);g&&Ys($,Ut,g),yield Ie($,Ut)}});return function(tt){return xe.apply(this,arguments)}}())}),Ia.apply(this,arguments)}function Ho(_,d,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(_,d,g){yield ci((0,F.m9)(_),{oobCode:d,newPassword:g})})).apply(this,arguments)}function zo(_,d){return So.apply(this,arguments)}function So(){return(So=(0,p.Z)(function*(_,d){yield to((0,F.m9)(_),{oobCode:d})})).apply(this,arguments)}function Pi(_,d){return ks.apply(this,arguments)}function ks(){return(ks=(0,p.Z)(function*(_,d){const g=(0,F.m9)(_),I=yield ci(g,{oobCode:d}),$=I.requestType;switch(Se($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(I.mfaInfo,g,"internal-error");default:Se(I.email,g,"internal-error")}let J=null;return I.mfaInfo&&(J=us._fromServerResponse(Tr(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:J},operation:$}})).apply(this,arguments)}function Da(_,d){return ho.apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(_,d){const{data:g}=yield Pi((0,F.m9)(_),d);return g.email})).apply(this,arguments)}function Mo(_,d,g){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,p.Z)(function*(_,d,g){var I;const $=Tr(_),J={returnSecureToken:!0,email:d,password:g,clientType:"CLIENT_TYPE_WEB"};let xe;if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Xt=yield zn($,J,"signUpPassword");xe=Ks($,Xt)}else xe=Ks($,J).catch(function(){var Xt=(0,p.Z)(function*(bn){if("auth/missing-recaptcha-token"===bn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const pr=yield zn($,J,"signUpPassword");return Ks($,pr)}return Promise.reject(bn)});return function(bn){return Xt.apply(this,arguments)}}());const tt=yield xe.catch(Xt=>Promise.reject(Xt)),Ut=yield ei._fromIdTokenResponse($,"signIn",tt);return yield $._updateCurrentUser(Ut.user),Ut}),Wo.apply(this,arguments)}function fo(_,d,g){return P((0,F.m9)(_),na.credential(d,g))}function Oi(_,d,g){return vs.apply(this,arguments)}function vs(){return vs=(0,p.Z)(function*(_,d,g){var I;const $=Tr(_),J={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function xe(tt,Ut){Se(Ut.handleCodeInApp,$,"argument-error"),Ut&&Ys($,tt,Ut)}if(null!==(I=$._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const tt=yield zn($,J,"getOobCode",!0);xe(tt,g),yield ct($,tt)}else xe(J,g),yield ct($,J).catch(function(){var tt=(0,p.Z)(function*(Ut){if("auth/missing-recaptcha-token"!==Ut.code)return Promise.reject(Ut);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xt=yield zn($,J,"getOobCode",!0);xe(Xt,g),yield ct($,Xt)}});return function(Ut){return tt.apply(this,arguments)}}())}),vs.apply(this,arguments)}function Ko(_,d){return"EMAIL_SIGNIN"===os.parseLink(d)?.operation}function ia(_,d,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_),$=na.credentialWithLink(d,g||It());return Se($._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),P(I,$)})).apply(this,arguments)}function vi(_,d){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:createAuthUri",lt(_,d))})).apply(this,arguments)}function fr(_,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(_,d){const I={identifier:d,continueUri:Bt()?It():"http://localhost"},{signinMethods:$}=yield vi((0,F.m9)(_),I);return $||[]})).apply(this,arguments)}function oa(_,d){return bi.apply(this,arguments)}function bi(){return(bi=(0,p.Z)(function*(_,d){const g=(0,F.m9)(_),$={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&Ys(g.auth,$,d);const{email:J}=yield no(g.auth,$);J!==_.email&&(yield _.reload())})).apply(this,arguments)}function qo(_,d,g){return po.apply(this,arguments)}function po(){return(po=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};g&&Ys(I.auth,J,g);const{email:xe}=yield Cn(I.auth,J);xe!==_.email&&(yield _.reload())})).apply(this,arguments)}function Bi(_,d){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(_,d){return Dt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function aa(_,d){return ls.apply(this,arguments)}function ls(){return(ls=(0,p.Z)(function*(_,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const I=(0,F.m9)(_),J={idToken:yield I.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},xe=yield dn(I,Bi(I.auth,J));I.displayName=xe.displayName||null,I.photoURL=xe.photoUrl||null;const tt=I.providerData.find(({providerId:Ut})=>"password"===Ut);tt&&(tt.displayName=I.displayName,tt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(xe)})).apply(this,arguments)}function ji(_,d){return Ji((0,F.m9)(_),d,null)}function _i(_,d){return Ji((0,F.m9)(_),null,d)}function Ji(_,d,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(_,d,g){const{auth:I}=_,J={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(J.email=d),g&&(J.password=g);const xe=yield dn(_,yi(I,J));yield _._updateTokensIfNecessary(xe,!0)})).apply(this,arguments)}class Qs{constructor(d,g,I={}){this.isNewUser=d,this.providerId=g,this.profile=I}}class go extends Qs{constructor(d,g,I,$){super(d,g,I),this.username=$}}class xo extends Qs{constructor(d,g){super(d,"facebook.com",g)}}class ru extends go{constructor(d,g){super(d,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class b extends Qs{constructor(d,g){super(d,"google.com",g)}}class V extends go{constructor(d,g,I){super(d,"twitter.com",g,I)}}function x(_){const{user:d,_tokenResponse:g}=_;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Zo(_){var d,g;if(!_)return null;const{providerId:I}=_,$=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},J=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!I&&_?.idToken){const xe=null===(g=null===(d=Dn(_.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(xe)return new Qs(J,"anonymous"!==xe&&"custom"!==xe?xe:null)}if(!I)return null;switch(I){case"facebook.com":return new xo(J,$);case"github.com":return new ru(J,$);case"google.com":return new b(J,$);case"twitter.com":return new V(J,$,_.screenName||null);case"custom":case"anonymous":return new Qs(J,null);default:return new Qs(J,I,$)}}(g)}class Fn{constructor(d,g,I){this.type=d,this.credential=g,this.auth=I}static _fromIdtoken(d,g){return new Fn("enroll",d,g)}static _fromMfaPendingCredential(d){return new Fn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,I;if(d?.multiFactorSession){if(null!==(g=d.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Fn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return Fn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class si{constructor(d,g,I){this.session=d,this.hints=g,this.signInResolver=I}static _fromError(d,g){const I=Tr(d),$=g.customData._serverResponse,J=($.mfaInfo||[]).map(tt=>us._fromServerResponse(I,tt));Se($.mfaPendingCredential,I,"internal-error");const xe=Fn._fromMfaPendingCredential($.mfaPendingCredential);return new si(xe,J,function(){var tt=(0,p.Z)(function*(Ut){const Xt=yield Ut._process(I,xe);delete $.mfaInfo,delete $.mfaPendingCredential;const bn=Object.assign(Object.assign({},$),{idToken:Xt.idToken,refreshToken:Xt.refreshToken});switch(g.operationType){case"signIn":const pr=yield ei._fromIdTokenResponse(I,g.operationType,bn);return yield I._updateCurrentUser(pr.user),pr;case"reauthenticate":return Se(g.user,I,"internal-error"),ei._forOperation(g.user,g.operationType,bn);default:fe(I,"internal-error")}});return function(Ut){return tt.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,p.Z)(function*(){return g.signInResolver(d)})()}}function _s(_,d){var g;const I=(0,F.m9)(_),$=d;return Se(d.customData.operationType,I,"argument-error"),Se(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),si._fromError(I,$)}function _t(_,d){return Dt(_,"POST","/v2/accounts/mfaEnrollment:start",lt(_,d))}class an{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>us._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new an(d)}getSession(){var d=this;return(0,p.Z)(function*(){return Fn._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,g){var I=this;return(0,p.Z)(function*(){const $=d,J=yield I.getSession(),xe=yield dn(I.user,$._process(I.user.auth,J,g));return yield I.user._updateTokensIfNecessary(xe),I.user.reload()})()}unenroll(d){var g=this;return(0,p.Z)(function*(){const I="string"==typeof d?d:d.uid,$=yield g.user.getIdToken();try{const J=yield dn(g.user,function Zt(_,d){return Dt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(_,d))}(g.user.auth,{idToken:$,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:xe})=>xe!==I),yield g.user._updateTokensIfNecessary(J),yield g.user.reload()}catch(J){throw J}})()}}const ua=new WeakMap;function Wt(_){const d=(0,F.m9)(_);return ua.has(d)||ua.set(d,an._fromUser(d)),ua.get(d)}const We="__sak";class bt{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(We,"1"),this.storage.removeItem(We),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ba=(()=>{class _ extends bt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oi(){const _=(0,F.z$)();return Y(_)||re(_)}()&&function Ot(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ue(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const $=this.storage.getItem(I),J=this.localCache[I];$!==J&&g(I,J,$)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((tt,Ut,Xt)=>{this.notifyListeners(tt,Xt)});const $=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const tt=this.storage.getItem($);if(g.newValue!==tt)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!I)return}const J=()=>{const tt=this.storage.getItem($);!I&&this.localCache[$]===tt||this.notifyListeners($,tt)},xe=this.storage.getItem($);!function Me(){return(0,F.w1)()&&10===document.documentMode}()||xe===g.newValue||g.newValue===g.oldValue?J():setTimeout(J,10)}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var $=()=>super._set,J=this;return(0,p.Z)(function*(){yield $().call(J,g,I),J.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,$=this;return(0,p.Z)(function*(){const J=yield I().call($,g);return $.localCache[g]=JSON.stringify(J),J})()}_remove(g){var I=()=>super._remove,$=this;return(0,p.Z)(function*(){yield I().call($,g),delete $.localCache[g]})()}}return _.type="LOCAL",_})(),la=(()=>{class _ extends bt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return _.type="SESSION",_})();let Nl=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(J=>J.isListeningto(g));if(I)return I;const $=new _(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,p.Z)(function*(){const $=g,{eventId:J,eventType:xe,data:tt}=$.data,Ut=I.handlersMap[xe];if(!Ut?.size)return;$.ports[0].postMessage({status:"ack",eventId:J,eventType:xe});const Xt=Array.from(Ut).map(function(){var pr=(0,p.Z)(function*(Eo){return Eo($.origin,tt)});return function(Eo){return pr.apply(this,arguments)}}()),bn=yield function Ol(_){return Promise.all(_.map(function(){var d=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return d.apply(this,arguments)}}()))}(Xt);$.ports[0].postMessage({status:"done",eventId:J,eventType:xe,response:bn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ca(_="",d=10){let g="";for(let I=0;I<d;I++)g+=Math.floor(10*Math.random());return _+g}class Ca{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,I=50){var $=this;return(0,p.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let xe,tt;return new Promise((Ut,Xt)=>{const bn=ca("",20);J.port1.start();const pr=setTimeout(()=>{Xt(new Error("unsupported_event"))},I);tt={messageChannel:J,onMessage(Eo){const Bs=Eo;if(Bs.data.eventId===bn)switch(Bs.data.status){case"ack":clearTimeout(pr),xe=setTimeout(()=>{Xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(xe),Ut(Bs.data.response);break;default:clearTimeout(pr),clearTimeout(xe),Xt(new Error("invalid_response"))}}},$.handlers.add(tt),J.port1.addEventListener("message",tt.onMessage),$.target.postMessage({eventType:d,eventId:bn,data:g},[J.port2])}).finally(()=>{tt&&$.removeMessageHandler(tt)})})()}}function or(){return window}function Js(){return typeof or().WorkerGlobalScope<"u"&&"function"==typeof or().importScripts}function Rr(){return(Rr=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const In="firebaseLocalStorageDb",er="firebaseLocalStorage",zt="fbase_key";class $i{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ba(_,d){return _.transaction([er],d?"readwrite":"readonly").objectStore(er)}function Lr(){const _=indexedDB.open(In,1);return new Promise((d,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const I=_.result;try{I.createObjectStore(er,{keyPath:zt})}catch($){g($)}}),_.addEventListener("success",(0,p.Z)(function*(){const I=_.result;I.objectStoreNames.contains(er)?d(I):(I.close(),yield function mo(){const _=indexedDB.deleteDatabase(In);return new $i(_).toPromise()}(),d(yield Lr()))}))})}function Ga(_,d,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(_,d,g){const I=ba(_,!0).put({[zt]:d,value:g});return new $i(I).toPromise()})).apply(this,arguments)}function iu(){return(iu=(0,p.Z)(function*(_,d){const g=ba(_,!1).get(d),I=yield new $i(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ou(_,d){const g=ba(_,!0).delete(d);return new $i(g).toPromise()}const il=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Lr()),g.db})()}_withRetries(g){var I=this;return(0,p.Z)(function*(){let $=0;for(;;)try{const J=yield I._openDb();return yield g(J)}catch(J){if($++>3)throw J;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return Js()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Nl._getInstance(function Ls(){return Js()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*($,J){return{keyProcessed:(yield g._poll()).includes(J.key)}});return function($,J){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*($,J){return["keyChanged"]});return function($,J){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var I,$;if(g.activeServiceWorker=yield function $a(){return Rr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ca(g.activeServiceWorker);const J=yield g.sender._send("ping",{},800);!J||(null===(I=J[0])||void 0===I?void 0:I.fulfilled)&&(null===($=J[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function mn(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Lr();return yield Ga(g,We,"1"),yield Ou(g,We),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var $=this;return(0,p.Z)(function*(){return $._withPendingWrite((0,p.Z)(function*(){return yield $._withRetries(J=>Ga(J,g,I)),$.localCache[g]=I,$.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,p.Z)(function*(){const $=yield I._withRetries(J=>function Ta(_,d){return iu.apply(this,arguments)}(J,g));return I.localCache[g]=$,$})()}_remove(g){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries($=>Ou($,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const I=yield g._withRetries(xe=>{const tt=ba(xe,!1).getAll();return new $i(tt).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const $=[],J=new Set;for(const{fbase_key:xe,value:tt}of I)J.add(xe),JSON.stringify(g.localCache[xe])!==JSON.stringify(tt)&&(g.notifyListeners(xe,tt),$.push(xe));for(const xe of Object.keys(g.localCache))g.localCache[xe]&&!J.has(xe)&&(g.notifyListeners(xe,null),$.push(xe));return $})()}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const J of Array.from($))J(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function da(_,d){return Dt(_,"POST","/v2/accounts/mfaSignIn:start",lt(_,d))}const Nu=1e12;class pi{constructor(d){this.auth=d,this.counter=Nu,this._widgets=new Map}render(d,g){const I=this.counter;return this._widgets.set(I,new Ni(d,this.auth.name,g||{})),this.counter++,I}reset(d){var g;const I=d||Nu;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(d){var g;return(null===(g=this._widgets.get(d||Nu))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,p.Z)(function*(){var I;return null===(I=g._widgets.get(d||Nu))||void 0===I||I.execute(),""})()}}class Ni{constructor(d,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof d?document.getElementById(d):d;Se($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ou(_){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<_;I++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vs=Kr("rcb"),Aa=new Pe(3e4,6e4);class ku{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=or().grecaptcha)||void 0===d||!d.render)}load(d,g=""){return Se(function kl(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),d,"argument-error"),this.shouldResolveImmediately(g)&&fn(or().grecaptcha)?Promise.resolve(or().grecaptcha):new Promise((I,$)=>{const J=or().setTimeout(()=>{$(Xe(d,"network-request-failed"))},Aa.get());or()[Vs]=()=>{or().clearTimeout(J),delete or()[Vs];const tt=or().grecaptcha;if(!tt||!fn(tt))return void $(Xe(d,"internal-error"));const Ut=tt.render;tt.render=(Xt,bn)=>{const pr=Ut(Xt,bn);return this.counter++,pr},this.hostLanguage=g,I(tt)},Nn(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Vs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(J),$(Xe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var g;return!(null===(g=or().grecaptcha)||void 0===g||!g.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ds{load(d){return(0,p.Z)(function*(){return new pi(d)})()}clearedOneInstance(){}}const Sa="recaptcha",Yo={theme:"light",type:"image"};class ws{constructor(d,g=Object.assign({},Yo),I){this.parameters=g,this.type=Sa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tr(I),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof d?document.getElementById(d):d;Se($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ds:new ku,this.validateStartingState()}verify(){var d=this;return(0,p.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(g)||new Promise(J=>{const xe=tt=>{!tt||(d.tokenChangeListeners.delete(xe),J(tt))};d.tokenChangeListeners.add(xe),d.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof d)d(g);else if("string"==typeof d){const I=or()[d];"function"==typeof I&&I(g)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,p.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,p.Z)(function*(){Se(Bt()&&!Js(),d.auth,"internal-error"),yield function v(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function Oe(_){return Re.apply(this,arguments)}(d.auth);Se(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class E{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=_r._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function y(_,d,g){return T.apply(this,arguments)}function T(){return(T=(0,p.Z)(function*(_,d,g){const I=Tr(_),$=yield et(I,d,(0,F.m9)(g));return new E($,J=>P(I,J))})).apply(this,arguments)}function O(_,d,g){return z.apply(this,arguments)}function z(){return(z=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_);yield mt(!1,I,"phone");const $=yield et(I.auth,d,(0,F.m9)(g));return new E($,J=>q(I,J))})).apply(this,arguments)}function ce(_,d,g){return pe.apply(this,arguments)}function pe(){return(pe=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_),$=yield et(I.auth,d,(0,F.m9)(g));return new E($,J=>tn(I,J))})).apply(this,arguments)}function et(_,d,g){return $t.apply(this,arguments)}function $t(){return($t=(0,p.Z)(function*(_,d,g){var I;const $=yield g.verify();try{let J;if(Se("string"==typeof $,_,"argument-error"),Se(g.type===Sa,_,"argument-error"),J="string"==typeof d?{phoneNumber:d}:d,"session"in J){const xe=J.session;if("phoneNumber"in J)return Se("enroll"===xe.type,_,"internal-error"),(yield _t(_,{idToken:xe.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{Se("signin"===xe.type,_,"internal-error");const tt=(null===(I=J.multiFactorHint)||void 0===I?void 0:I.uid)||J.multiFactorUid;return Se(tt,_,"missing-multi-factor-info"),(yield da(_,{mfaPendingCredential:xe.credential,mfaEnrollmentId:tt,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:xe}=yield Vo(_,{phoneNumber:J.phoneNumber,recaptchaToken:$});return xe}}finally{g._reset()}})).apply(this,arguments)}function jn(_,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,p.Z)(function*(_,d){yield as((0,F.m9)(_),d)})).apply(this,arguments)}let Vr=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Tr(g)}verifyPhoneNumber(g,I){return et(this.auth,g,(0,F.m9)(I))}static credential(g,I){return _r._fromVerification(g,I)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:$}=g;return I&&$?_r._fromTokenResponse(I,$):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Wr(_,d){return d?H(d):(Se(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Is extends Ki{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ir(d,this._buildIdpRequest())}_linkToIdToken(d,g){return ir(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return ir(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function Ei(_){return Ar(_.auth,new Is(_),_.bypassAuthState)}function Us(_){const{auth:d,user:g}=_;return Se(g,d,"internal-error"),$o(g,new Is(_),_.bypassAuthState)}function Fu(_){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(_){const{auth:d,user:g}=_;return Se(g,d,"internal-error"),as(g,new Is(_),_.bypassAuthState)})).apply(this,arguments)}class uu{constructor(d,g,I,$,J=!1){this.auth=d,this.resolver=I,this.user=$,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,p.Z)(function*(I,$){d.pendingPromise={resolve:I,reject:$};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(J){d.reject(J)}});return function(I,$){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:$,postBody:J,tenantId:xe,error:tt,type:Ut}=d;if(tt)return void g.reject(tt);const Xt={auth:g.auth,requestUri:I,sessionId:$,tenantId:xe||void 0,postBody:J||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ut)(Xt))}catch(bn){g.reject(bn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Ei;case"linkViaPopup":case"linkViaRedirect":return Fu;case"reauthViaPopup":case"reauthViaRedirect":return Us;default:fe(this.auth,"internal-error")}}resolve(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lu=new Pe(2e3,1e4);function Ds(_,d,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,p.Z)(function*(_,d,g){const I=Tr(_);yt(_,d,yr);const $=Wr(I,g);return new fa(I,"signInViaPopup",d,$).executeNotNull()})).apply(this,arguments)}function ki(_,d,g){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_);yt(I.auth,d,yr);const $=Wr(I.auth,g);return new fa(I.auth,"reauthViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}function Fl(_,d,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_);yt(I.auth,d,yr);const $=Wr(I.auth,g);return new fa(I.auth,"linkViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}let fa=(()=>{class _ extends uu{constructor(g,I,$,J,xe){super(g,I,J,xe),this.provider=$,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const I=yield g.execute();return Se(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,p.Z)(function*(){Yt(1===g.filter.length,"Popup operations only handle one event");const I=ca();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(Xe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,$;this.pollId=null!==($=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,lu.get())};g()}}return _.currentPopupAction=null,_})();const Ma=new Map;class Wa extends uu{constructor(d,g,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,p.Z)(function*(){let I=Ma.get(g.auth._key());if(!I){try{const J=(yield function Ll(_,d){return Ir.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;I=()=>Promise.resolve(J)}catch($){I=()=>Promise.reject($)}Ma.set(g.auth._key(),I)}return g.bypassAuthState||Ma.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(I,d);if("unknown"!==d.type){if(d.eventId){const $=yield I.auth._redirectUserForId(d.eventId);if($)return I.user=$,g().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Ir(){return(Ir=(0,p.Z)(function*(_,d){const g=es(d),I=Oo(_);if(!(yield I._isAvailable()))return!1;const $="true"===(yield I._get(g));return yield I._remove(g),$})).apply(this,arguments)}function du(_,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(_,d){return Oo(_)._set(es(d),"true")})).apply(this,arguments)}function ai(){Ma.clear()}function Vl(_,d){Ma.set(_._key(),d)}function Oo(_){return H(_._redirectPersistence)}function es(_){return pt("pendingRedirect",_.config.apiKey,_.name)}function ol(_,d,g){return function Tc(_,d,g){return wi.apply(this,arguments)}(_,d,g)}function wi(){return(wi=(0,p.Z)(function*(_,d,g){const I=Tr(_);yt(_,d,yr),yield I._initializationPromise;const $=Wr(I,g);return yield du($,I),$._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function hu(_,d,g){return function vo(_,d,g){return ui.apply(this,arguments)}(_,d,g)}function ui(){return(ui=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_);yt(I.auth,d,yr),yield I.auth._initializationPromise;const $=Wr(I.auth,g);yield du($,I.auth);const J=yield Ra(I);return $._openRedirect(I.auth,d,"reauthViaRedirect",J)})).apply(this,arguments)}function xa(_,d,g){return function Vu(_,d,g){return Uu.apply(this,arguments)}(_,d,g)}function Uu(){return(Uu=(0,p.Z)(function*(_,d,g){const I=(0,F.m9)(_);yt(I.auth,d,yr),yield I.auth._initializationPromise;const $=Wr(I.auth,g);yield mt(!1,I,d.providerId),yield du($,I.auth);const J=yield Ra(I);return $._openRedirect(I.auth,d,"linkViaRedirect",J)})).apply(this,arguments)}function al(_,d){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,p.Z)(function*(_,d){return yield Tr(_)._initializationPromise,Qo(_,d,!1)})).apply(this,arguments)}function Qo(_,d){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(_,d,g=!1){const I=Tr(_),$=Wr(I,d),xe=yield new Wa(I,$,g).execute();return xe&&!g&&(delete xe.user._redirectEventId,yield I._persistUserIfCurrent(xe.user),yield I._setRedirectUser(null,d)),xe})).apply(this,arguments)}function Ra(_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(_){const d=ca(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class pa{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(g=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ka(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fu(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var I;if(d.error&&!fu(d)){const $=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(Xe(this.auth,$))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const I=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xo(d))}saveEventToCache(d){this.cachedEventUids.add(Xo(d)),this.lastProcessedEventTime=Date.now()}}function Xo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function fu({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===d?.code}function pu(_){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,p.Z)(function*(_,d={}){return Dt(_,"GET","/v1/projects",d)})).apply(this,arguments)}const Pa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ed=/^https?/;function gu(){return(gu=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield pu(_);for(const g of d)try{if(mu(g))return}catch{}fe(_,"unauthorized-domain")})).apply(this,arguments)}function mu(_){const d=It(),{protocol:g,hostname:I}=new URL(d);if(_.startsWith("chrome-extension://")){const xe=new URL(_);return""===xe.hostname&&""===I?"chrome-extension:"===g&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&xe.hostname===I}if(!ed.test(g))return!1;if(Pa.test(_))return I===_;const $=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(I)}const ll=new Pe(3e4,6e4);function ju(){const _=or().___jsl;if(_?.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let ga=null;function nd(_){return ga=ga||function td(_){return new Promise((d,g)=>{var I,$,J;function xe(){ju(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{ju(),g(Xe(_,"network-request-failed"))},timeout:ll.get()})}if(null!==($=null===(I=or().gapi)||void 0===I?void 0:I.iframes)&&void 0!==$&&$.Iframe)d(gapi.iframes.getContext());else{if(null===(J=or().gapi)||void 0===J||!J.load){const tt=Kr("iframefcb");return or()[tt]=()=>{gapi.load?xe():g(Xe(_,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${tt}`).catch(Ut=>g(Ut))}xe()}}).catch(d=>{throw ga=null,d})}(_),ga}const ma=new Pe(5e3,15e3),cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(_){const d=_.config;Se(d.authDomain,_,"auth-domain-config-required");const g=d.emulator?qe(d,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:_.name,v:B.SDK_VERSION},$=Jr.get(_.config.apiHost);$&&(I.eid=$);const J=_._getFrameworks();return J.length&&(I.fw=J.join(",")),`${g}?${(0,F.xO)(I).slice(1)}`}function w(){return w=(0,p.Z)(function*(_){const d=yield nd(_),g=or().gapi;return Se(g,_,"internal-error"),d.open({where:document.body,url:ns(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cl,dontclear:!0},I=>new Promise(function(){var $=(0,p.Z)(function*(J,xe){yield I.restyle({setHideOnLeave:!1});const tt=Xe(_,"network-request-failed"),Ut=or().setTimeout(()=>{xe(tt)},ma.get());function Xt(){or().clearTimeout(Ut),J(I)}I.ping(Xt).then(Xt,()=>{xe(tt)})});return function(J,xe){return $.apply(this,arguments)}}()))}),w.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class it{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ln=encodeURIComponent("fac");function hs(_,d,g,I,$,J){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(_,d,g,I,$,J){Se(_.config.authDomain,_,"auth-domain-config-required"),Se(_.config.apiKey,_,"invalid-api-key");const xe={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:I,v:B.SDK_VERSION,eventId:$};if(d instanceof yr){d.setDefaultLanguage(_.languageCode),xe.providerId=d.providerId||"",(0,F.xb)(d.getCustomParameters())||(xe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[bn,pr]of Object.entries(J||{}))xe[bn]=pr}if(d instanceof Os){const bn=d.getScopes().filter(pr=>""!==pr);bn.length>0&&(xe.scopes=bn.join(","))}_.tenantId&&(xe.tid=_.tenantId);const tt=xe;for(const bn of Object.keys(tt))void 0===tt[bn]&&delete tt[bn];const Ut=yield _._getAppCheckToken(),Xt=Ut?`#${Ln}=${encodeURIComponent(Ut)}`:"";return`${Fi(_)}?${(0,F.xO)(tt).slice(1)}${Xt}`})).apply(this,arguments)}function Fi({config:_}){return _.emulator?qe(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}const ya="webStorageSupport",eo=class yu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=la,this._completeRedirectFn=Qo,this._overrideRedirectResult=Vl}_openPopup(d,g,I,$){var J=this;return(0,p.Z)(function*(){var xe;Yt(null===(xe=J.eventManagers[d._key()])||void 0===xe?void 0:xe.manager,"_initialize() not called before _openPopup()");const tt=yield hs(d,g,I,It(),$);return function Kt(_,d,g,I=500,$=600){const J=Math.max((window.screen.availHeight-$)/2,0).toString(),xe=Math.max((window.screen.availWidth-I)/2,0).toString();let tt="";const Ut=Object.assign(Object.assign({},A),{width:I.toString(),height:$.toString(),top:J,left:xe}),Xt=(0,F.z$)().toLowerCase();g&&(tt=G(Xt)?"_blank":g),K(Xt)&&(d=d||"http://localhost",Ut.scrollbars="yes");const bn=Object.entries(Ut).reduce((Eo,[Bs,$l])=>`${Eo}${Bs}=${$l},`,"");if(function X(_=(0,F.z$)()){var d;return re(_)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Xt)&&"_self"!==tt)return function Gt(_,d){const g=document.createElement("a");g.href=_,g.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(d||"",tt),new it(null);const pr=window.open(d||"",tt,bn);Se(pr,_,"popup-blocked");try{pr.focus()}catch{}return new it(pr)}(d,tt,ca())})()}_openRedirect(d,g,I,$){var J=this;return(0,p.Z)(function*(){return yield J._originValidation(d),function Rn(_){or().location.href=_}(yield hs(d,g,I,It(),$)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:$,promise:J}=this.eventManagers[g];return $?Promise.resolve($):(Yt(J,"If manager is not set, promise should be"),J)}const I=this.initAndGetManager(d);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(d){var g=this;return(0,p.Z)(function*(){const I=yield function rd(_){return w.apply(this,arguments)}(d),$=new pa(d);return I.register("authEvent",J=>(Se(J?.authEvent,d,"invalid-auth-event"),{status:$.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:$},g.iframes[d._key()]=I,$})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(ya,{type:ya},$=>{var J;const xe=null===(J=$?.[0])||void 0===J?void 0:J[ya];void 0!==xe&&g(!!xe),fe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ul(_){return gu.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ue()||Y()||re()}};class vu extends class Oa{constructor(d){this.factorId=d}_process(d,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,I);case"signin":return this._finalizeSignIn(d,g.credential);default:return xt("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new vu(d)}_finalizeEnroll(d,g,I){return function wr(_,d){return Dt(_,"POST","/v2/accounts/mfaEnrollment:finalize",lt(_,d))}(d,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function ti(_,d){return Dt(_,"POST","/v2/accounts/mfaSignIn:finalize",lt(_,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rf=(()=>{class _{constructor(){}static assertion(g){return vu._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var dl="@firebase/auth";class hl{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);!g||(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,F.Pz)("authIdTokenMaxAge"),function sd(_){(0,B._registerComponent)(new we.wA("auth",(d,{options:g})=>{const I=d.getProvider("app").getImmediate(),$=d.getProvider("heartbeat"),J=d.getProvider("app-check-internal"),{apiKey:xe,authDomain:tt}=I.options;Se(xe&&!xe.includes(":"),"invalid-api-key",{appName:I.name});const Ut={apiKey:xe,authDomain:tt,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hn(_)},Xt=new Mi(I,$,J,Ut);return function Vi(_,d){const g=d?.persistence||[],I=(Array.isArray(g)?g:[g]).map(H);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(I,d?.popupRedirectResolver)}(Xt,g),Xt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,I)=>{d.getProvider("auth-internal").initialize()})),(0,B._registerComponent)(new we.wA("auth-internal",d=>{const g=Tr(d.getProvider("auth").getImmediate());return new hl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,B.registerVersion)(dl,"0.23.2",function lh(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,B.registerVersion)(dl,"0.23.2","esm2017")}("Browser")},2810:(Lt,Le,R)=>{R.d(Le,{u7:()=>sg,Jj:()=>vc,IX:()=>Cm,my:()=>Di,xU:()=>Ic,Lz:()=>Ml,WA:()=>bt,F8:()=>yf,$q:()=>sh,W:()=>Dc,EK:()=>Rr,PU:()=>og,l7:()=>Qo,Ky:()=>zt,Xb:()=>er,Cf:()=>Pr,K9:()=>ua,Me:()=>Tc,yq:()=>xr,Wi:()=>Em,ET:()=>Cc,Ab:()=>Jv,vr:()=>my,Fc:()=>Tm,hJ:()=>Kp,B$:()=>qp,at:()=>qd,oe:()=>uy,AK:()=>py,TF:()=>Sm,JU:()=>Zp,ST:()=>Uv,fH:()=>Bv,Ix:()=>Am,Wu:()=>Km,Lx:()=>Wm,qY:()=>zi,GL:()=>nu,QT:()=>ey,kl:()=>ty,Xk:()=>ny,PL:()=>ry,UQ:()=>iy,zN:()=>sy,nP:()=>Xv,b9:()=>Df,vh:()=>rg,Pb:()=>Mm,L$:()=>xm,cf:()=>qv,sc:()=>Zv,Xo:()=>Hm,IO:()=>jm,iE:()=>Zd,Eo:()=>Im,i3:()=>fy,Bt:()=>gy,pl:()=>oy,Ub:()=>_s,qK:()=>Xm,TQ:()=>zm,e0:()=>Gm,r7:()=>ay,Mx:()=>Jp,ar:()=>$m});var te,p=R(5861),F=R(6881),B=R(4859),le=R(1877),he=R(2090),we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ee={},_e=_e||{},ee=we||self;function ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ye(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var rt="closure_uid_"+(1e9*Math.random()>>>0),Ye=0;function Tt(i,e,t){return i.call.apply(i.bind,arguments)}function Ke(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function Ne(i,e,t){return(Ne=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tt:Ke).apply(null,arguments)}function Ct(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function ft(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(s,a,c){for(var f=Array(arguments.length-2),D=2;D<arguments.length;D++)f[D-2]=arguments[D];return e.prototype[a].apply(s,f)}}function fe(){this.s=this.s,this.o=this.o}fe.prototype.s=!1,fe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ut(i){Object.prototype.hasOwnProperty.call(i,rt)&&i[rt]||(i[rt]=++Ye)}(this)},fe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function yt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function st(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(ue(s)){const a=i.length||0,c=s.length||0;i.length=a+c;for(let f=0;f<c;f++)i[a+f]=s[f]}else i.push(s)}}function Se(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ee.addEventListener("test",()=>{},e),ee.removeEventListener("test",()=>{},e)}catch{}return i}();function Yt(i){return/^[\s\xa0]*$/.test(i)}function It(){var i=ee.navigator;return i&&(i=i.userAgent)?i:""}function Bt(i){return-1!=It().indexOf(i)}function Nt(i){return Nt[" "](i),i}Nt[" "]=function(){};var Dt,i,$e=Bt("Opera"),Pe=Bt("Trident")||Bt("MSIE"),qe=Bt("Edge"),He=qe||Pe,Ge=Bt("Gecko")&&!(-1!=It().toLowerCase().indexOf("webkit")&&!Bt("Edge"))&&!(Bt("Trident")||Bt("MSIE"))&&!Bt("Edge"),ht=-1!=It().toLowerCase().indexOf("webkit")&&!Bt("Edge");function lt(){var i=ee.document;return i?i.documentMode:void 0}e:{var jt="",At=(i=It(),Ge?/rv:([^\);]+)(\)|;)/.exec(i):qe?/Edge\/([\d\.]+)/.exec(i):Pe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ht?/WebKit\/(\S+)/.exec(i):$e?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(At&&(jt=At?At[1]:""),Pe){var Qt=lt();if(null!=Qt&&Qt>parseFloat(jt)){Dt=String(Qt);break e}}Dt=jt}var $n=ee.document&&Pe&&(lt()||parseInt(Dt,10))||void 0;function Yn(i,e){if(Se.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ge){e:{try{Nt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Wn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Yn.$.h.call(this)}}ft(Yn,Se);var Wn={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),An=0;function Jn(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++An,this.fa=this.ia=!1}function gr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function kr(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function gn(i){const e={};for(const t in i)e[t]=i[t];return e}const Bn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ar(i,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)i[t]=s[t];for(let c=0;c<Bn.length;c++)t=Bn[c],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function jr(i){this.src=i,this.g={},this.h=0}function Nr(i,e){var t=e.type;if(t in i.g){var c,s=i.g[t],a=nt(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(gr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Dn(i,e,t,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}jr.prototype.add=function(i,e,t,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var f=Dn(i,e,s,a);return-1<f?(e=i[f],t||(e.ia=!1)):((e=new Jn(e,this.src,c,!!s,a)).ia=t,i.push(e)),e};var Pn="closure_lm_"+(1e6*Math.random()|0),dn={};function qt(i,e,t,s,a){if(s&&s.once)return mr(i,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)qt(i,e[c],t,s,a);return null}return t=wn(t),i&&i[Pt]?i.O(e,t,ye(s)?!!s.capture:!!s,a):on(i,e,t,!1,s,a)}function on(i,e,t,s,a,c){if(!e)throw Error("Invalid event type");var f=ye(a)?!!a.capture:!!a,D=En(i);if(D||(i[Pn]=D=new jr(i)),(t=D.add(e,t,s,f,c)).proxy)return t;if(s=function Mn(){const e=ur;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)xt||(a=f),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(rn(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function mr(i,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)mr(i,e[c],t,s,a);return null}return t=wn(t),i&&i[Pt]?i.P(e,t,ye(s)?!!s.capture:!!s,a):on(i,e,t,!0,s,a)}function nr(i,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)nr(i,e[c],t,s,a);else s=ye(s)?!!s.capture:!!s,t=wn(t),i&&i[Pt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Dn(c=i.g[e],t,s,a))&&(gr(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=En(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Dn(e,t,s,a)),(t=-1<i?e[i]:null)&&rr(t))}function rr(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Pt])Nr(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(rn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=En(e))?(Nr(t,i),0==t.h&&(t.src=null,e[Pn]=null)):gr(i)}}}function rn(i){return i in dn?dn[i]:dn[i]="on"+i}function ur(i,e){if(i.fa)i=!0;else{e=new Yn(e,this);var t=i.listener,s=i.la||i.src;i.ia&&rr(i),i=t.call(s,e)}return i}function En(i){return(i=i[Pn])instanceof jr?i:null}var Fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(i){return"function"==typeof i?i:(i[Fr]||(i[Fr]=function(e){return i.handleEvent(e)}),i[Fr])}function Ft(){fe.call(this),this.i=new jr(this),this.S=this,this.J=null}function Te(i,e){var t,s=i.J;if(s)for(t=[];s;s=s.J)t.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new Se(e,i);else if(e instanceof Se)e.target=e.target||i;else{var a=e;ar(e=new Se(s,i),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];a=Et(f,s,!0,e)&&a}if(a=Et(f=e.g=i,s,!0,e)&&a,a=Et(f,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=Et(f=e.g=t[c],s,!1,e)&&a}function Et(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.fa&&f.capture==t){var D=f.listener,N=f.la||f.src;f.ia&&Nr(i.i,f),a=!1!==D.call(N,s)&&a}}return a&&!s.defaultPrevented}ft(Ft,fe),Ft.prototype[Pt]=!0,Ft.prototype.removeEventListener=function(i,e,t,s){nr(this,i,e,t,s)},Ft.prototype.N=function(){if(Ft.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)gr(t[s]);delete i.g[e],i.h--}}this.J=null},Ft.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Ft.prototype.P=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Qe=ee.JSON.stringify;function H(){var i=G;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Fe=new class ke{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new pt,i=>i.reset());class pt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function se(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function de(i){ee.setTimeout(()=>{throw i},0)}let K,Y=!1,G=new class oe{constructor(){this.h=this.g=null}add(e,t){const s=Fe.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},De=()=>{const i=ee.Promise.resolve(void 0);K=()=>{i.then(ot)}};var ot=()=>{for(var i;i=H();){try{i.h.call(i.g)}catch(t){de(t)}var e=Fe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Y=!1};function kt(i,e){Ft.call(this),this.h=i||1,this.g=e||ee,this.j=Ne(this.qb,this),this.l=Date.now()}function en(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function re(i,e,t){if("function"==typeof i)t&&(i=Ne(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ne(i.handleEvent,i)}return 2147483647<Number(e)?-1:ee.setTimeout(i,e||0)}function ae(i){i.g=re(()=>{i.g=null,i.i&&(i.i=!1,ae(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ft(kt,Ft),(te=kt.prototype).ga=!1,te.T=null,te.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Te(this,"tick"),this.ga&&(en(this),this.start()))}},te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},te.N=function(){kt.$.N.call(this),en(this),delete this.g};class X extends fe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(i){fe.call(this),this.h=i,this.g={}}ft(Me,fe);var Ue=[];function Ot(i,e,t,s){Array.isArray(t)||(t&&(Ue[0]=t.toString()),t=Ue);for(var a=0;a<t.length;a++){var c=qt(e,t[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function hn(i){kr(i.g,function(e,t){this.g.hasOwnProperty(t)&&rr(e)},i),i.g={}}function Oe(){this.g=!0}function wt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xn(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<a.length;f++)a[f]=""}}}return Qe(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Me.prototype.N=function(){Me.$.N.call(this),hn(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oe.prototype.Ea=function(){this.g=!1},Oe.prototype.info=function(){};var Gn={},Cr=null;function Nn(){return Cr=Cr||new Ft}function Kr(i){Se.call(this,Gn.Ta,i)}function $r(i){const e=Nn();Te(e,new Kr(e))}function qr(i,e){Se.call(this,Gn.STAT_EVENT,i),this.stat=e}function vr(i){const e=Nn();Te(e,new qr(e,i))}function Ms(i,e){Se.call(this,Gn.Ua,i),this.size=e}function zn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){i()},e)}Gn.Ta="serverreachability",ft(Kr,Se),Gn.STAT_EVENT="statevent",ft(qr,Se),Gn.Ua="timingevent",ft(Ms,Se);var Ai={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Si={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mi(){}function Li(){}Mi.prototype.h=null;var xs,ri={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Vi(){Se.call(this,"d")}function br(){Se.call(this,"c")}function Hr(){}function Gr(i,e,t,s){this.l=i,this.j=e,this.m=t,this.W=s||1,this.U=new Me(this),this.P=Ki,this.V=new kt(i=He?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}ft(Vi,Se),ft(br,Se),ft(Hr,Mi),Hr.prototype.g=function(){return new XMLHttpRequest},Hr.prototype.i=function(){return{}},xs=new Hr;var Ki=45e3,ci={},Zr={};function yi(i,e,t){i.L=1,i.v=ss(On(e)),i.s=t,i.S=!0,ps(i,null)}function ps(i,e){i.G=Date.now(),lr(i),i.A=On(i.v);var t=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),Zi(t.i,"t",s),i.C=0,t=i.l.J,i.h=new Gs,i.g=Mo(i.l,t?e:null,!i.s),0<i.O&&(i.M=new X(Ne(i.Pa,i,i.g),i.O)),Ot(i.U,i.g,"readystatechange",i.nb),e=i.I?gn(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),$r(),function Re(i,e,t,s,a,c){i.info(function(){if(i.g)if(c)for(var f="",D=c.split("&"),N=0;N<D.length;N++){var U=D[N].split("=");if(1<U.length){var Q=U[0];U=U[1];var me=Q.split("_");f=2<=me.length&&"type"==me[1]?f+(Q+"=")+U+"&":f+(Q+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(i.j,i.u,i.A,i.m,i.W,i.s)}function to(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Rs(i,e,t){let a,s=!0;for(;!i.J&&i.C<t.length;){if(a=wa(i,t),a==Zr){4==e&&(i.o=4,vr(14),s=!1),wt(i.j,i.m,null,"[Incomplete Response]");break}if(a==ci){i.o=4,vr(15),wt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}wt(i.j,i.m,a,null),Ie(i,a)}to(i)&&a!=Zr&&a!=ci&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,vr(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ho(e),e.M=!0,vr(11))):(wt(i.j,i.m,t,"[Invalid Chunked Response]"),Ae(i),no(i))}function wa(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Zr:(t=Number(e.substring(t,s)),isNaN(t)?ci:(s+=1)+t>e.length?Zr:(e=e.slice(s,s+t),i.C=s+t,e))}function lr(i){i.Y=Date.now()+i.P,Do(i,i.P)}function Do(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=zn(Ne(i.lb,i),e)}function Co(i){i.B&&(ee.clearTimeout(i.B),i.B=null)}function no(i){0==i.l.H||i.J||So(i.l,i)}function Ae(i){Co(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,en(i.V),hn(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ie(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||Ri(t.i,i)))if(!i.K&&Ri(t.i,i)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;zo(t),ys(t)}Ia(t),vr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=zn(Ne(t.ib,t),6e3));if(1>=so(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ks(t,11)}else if((i.K||t.g==i)&&zo(t),!Yt(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let U=a[e];if(t.V=U[0],U=U[1],2==t.H)if("c"==U[0]){t.K=U[1],t.pa=U[2];const Q=U[3];null!=Q&&(t.ra=Q,t.l.info("VER="+t.ra));const me=U[4];null!=me&&(t.Ga=me,t.l.info("SVER="+t.Ga));const Be=U[5];null!=Be&&"number"==typeof Be&&0<Be&&(t.L=s=1.5*Be,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const at=i.g;if(at){const Vt=at.g?at.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var c=s.i;c.g||-1==Vt.indexOf("spdy")&&-1==Vt.indexOf("quic")&&-1==Vt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(ii(c,c.h),c.h=null))}if(s.F){const sn=at.g?at.g.getResponseHeader("X-HTTP-Session-Id"):null;sn&&(s.Da=sn,ir(s.I,s.F,sn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var f=i;if((s=t).wa=ho(s,s.J?s.pa:null,s.Y),f.K){Ns(s.i,f);var D=f,N=s.L;N&&D.setTimeout(N),D.B&&(Co(D),lr(D)),s.g=f}else co(s);0<t.j.length&&fi(t)}else"stop"!=U[0]&&"close"!=U[0]||ks(t,7);else 3==t.H&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?ks(t,7):Zs(t):"noop"!=U[0]&&t.h&&t.h.Aa(U),t.A=0)}$r()}catch{}}function Rt(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ue(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ct(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ue(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Ve(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ue(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],i)}(te=Gr.prototype).setTimeout=function(i){this.P=i},te.nb=function(i){i=i.target;const e=this.M;e&&3==k(i)?e.l():this.Pa(i)},te.Pa=function(i){try{if(i==this.g)e:{const Q=k(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Q)&&(3!=Q||He||this.g&&(this.h.h||this.g.ja()||P(this.g)))){this.J||4!=Q||7==e||$r(),Co(this);var t=this.g.da();this.ca=t;t:if(to(this)){var s=P(this.g);i="";var a=s.length,c=4==k(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ae(this),no(this);var f="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=200==t,function gt(i,e,t,s,a,c,f){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.W,Q,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var D,N=this.g;if((D=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yt(D)){var U=D;break t}}U=null}if(!(t=U)){this.i=!1,this.o=3,vr(12),Ae(this),no(this);break e}wt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ie(this,t)}this.S?(Rs(this,Q,f),He&&this.i&&3==Q&&(Ot(this.U,this.V,"tick",this.mb),this.V.start())):(wt(this.j,this.m,f,null),Ie(this,f)),4==Q&&Ae(this),this.i&&!this.J&&(4==Q?So(this.l,this):(this.i=!1,lr(this)))}else(function M(i){const e={};i=(i.g&&2<=k(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(Yt(i[s]))continue;var t=se(i[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function St(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<f.indexOf("Unknown SID")?(this.o=3,vr(12)):(this.o=0,vr(13)),Ae(this),no(this)}}}catch{}},te.mb=function(){if(this.g){var i=k(this.g),e=this.g.ja();this.C<e.length&&(Co(this),Rs(this,i,e),this.i&&4!=i&&lr(this))}},te.cancel=function(){this.J=!0,Ae(this)},te.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function fn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($r(),vr(17)),Ae(this),this.o=2,no(this)):Do(this,this.Y-i)};var Cn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof qn){this.h=i.h,Ui(this,i.j),this.s=i.s,this.g=i.g,Yr(this,i.m),this.l=i.l;var e=i.i,t=new Ps;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Qr(this,t),this.o=i.o}else i&&(e=String(i).match(Cn))?(this.h=!1,Ui(this,e[1]||"",!0),this.s=qi(e[2]||""),this.g=qi(e[3]||"",!0),Yr(this,e[4]),this.l=qi(e[5]||"",!0),Qr(this,e[6]||"",!0),this.o=qi(e[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}function On(i){return new qn(i)}function Ui(i,e,t){i.j=t?qi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Yr(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Qr(i,e,t){e instanceof Ps?(i.i=e,function os(i,e){e&&!i.j&&(xi(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(ta(this,s),Zi(this,a,t))},i)),i.j=e}(i.i,i.h)):(t||(e=zr(e,bo)),i.i=new Ps(e,i.h))}function ir(i,e,t){i.i.set(e,t)}function ss(i){return ir(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function qi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function zr(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Vo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Vo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}qn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(zr(e,zs,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(zr(e,zs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(zr(t,"/"==t.charAt(0)?gs:ro,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",zr(t,Uo)),i.join("")};var zs=/[#\/\?@]/g,ro=/[#\?:]/g,gs=/[#\?]/g,bo=/[#\?@]/g,Uo=/#/g;function Ps(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function xi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Xn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var c=i[t].substring(0,s);a=i[t].substring(s+1)}else c=i[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ta(i,e){xi(i),e=Ws(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function _r(i,e){return xi(i),e=Ws(i,e),i.g.has(e)}function Zi(i,e,t){ta(i,e),0<t.length&&(i.i=null,i.g.set(Ws(i,e),yt(t)),i.h+=t.length)}function Ws(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function na(i){this.l=i||yr,i=ee.PerformanceNavigationTiming?0<(i=ee.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(te=Ps.prototype).add=function(i,e){xi(this),this.i=null,i=Ws(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},te.forEach=function(i,e){xi(this),this.g.forEach(function(t,s){t.forEach(function(a){i.call(e,a,s,this)},this)},this)},te.ta=function(){xi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=i[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},te.Z=function(i){xi(this);let e=[];if("string"==typeof i)_r(this,i)&&(e=e.concat(this.g.get(Ws(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},te.set=function(i,e){return xi(this),this.i=null,_r(this,i=Ws(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},te.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),f=this.Z(s);for(s=0;s<f.length;s++){var a=c;""!==f[s]&&(a+="="+encodeURIComponent(String(f[s]))),i.push(a)}}return this.i=i.join("&")};var yr=10;function Os(i){return!!i.h||!!i.g&&i.g.size>=i.j}function so(i){return i.h?1:i.g?i.g.size:0}function Ri(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ii(i,e){i.g?i.g.add(e):i.h=e}function Ns(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function To(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return yt(i.i)}function Xr(){this.g=new class{stringify(i){return ee.JSON.stringify(i,void 0)}parse(i){return ee.JSON.parse(i,void 0)}}}function Bo(i,e,t){const s=t||"";try{Rt(i,function(a,c){let f=a;ye(a)&&(f=Qe(a)),e.push(s+c+"="+encodeURIComponent(f))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Ks(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function di(i){this.l=i.fc||null,this.j=i.ob||!1}function ei(i,e){Ft.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Qi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}na.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ft(di,Mi),di.prototype.g=function(){return new ei(this.l,this.j)},di.prototype.i=function(i){return function(){return i}}({}),ft(ei,Ft);var Qi=0;function Sn(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function qs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,oo(i)}function oo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(te=ei.prototype).open=function(i,e){if(this.readyState!=Qi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,oo(this)},te.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qs(this)),this.readyState=Qi},te.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sn(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},te.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?qs(this):oo(this),3==this.readyState&&Sn(this)}},te.Za=function(i){this.g&&(this.response=this.responseText=i,qs(this))},te.Ya=function(i){this.g&&(this.response=i,qs(this))},te.ka=function(){this.g&&qs(this)},te.setRequestHeader=function(i,e){this.v.append(i,e)},te.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},te.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ao=ee.JSON.parse;function sr(i){Ft.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ao,this.L=this.M=!1}ft(sr,Ft);var Ao="",ms=/^https?$/i,as=["POST","PUT"];function mt(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,kn(i),uo(i)}function kn(i){i.F||(i.F=!0,Te(i,"complete"),Te(i,"error"))}function $o(i){if(i.h&&typeof _e<"u"&&(!i.C[1]||4!=k(i)||2!=i.da()))if(i.v&&4==k(i))re(i.La,0,i);else if(Te(i,"readystatechange"),4==k(i)){i.h=!1;try{const f=i.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===f){var a=String(i.I).match(Cn)[1]||null;!a&&ee.self&&ee.self.location&&(a=ee.self.location.protocol.slice(0,-1)),s=!ms.test(a?a.toLowerCase():"")}t=s}if(t)Te(i,"complete"),Te(i,"success");else{i.m=6;try{var c=2<k(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",kn(i)}}finally{uo(i)}}}function uo(i,e){if(i.g){Ar(i);const t=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Te(i,"ready");try{t.onreadystatechange=s}catch{}}}function Ar(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(ee.clearTimeout(i.A),i.A=null)}function k(i){return i.g?i.g.readyState:0}function P(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Ao:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function q(i){let e="";return kr(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ze(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=q(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ir(i,e,t))}function tn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Hn(i){this.Ga=0,this.j=[],this.l=new Oe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tn("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tn("baseRetryDelayMs",5e3,i),this.hb=tn("retryDelaySeedMs",1e4,i),this.eb=tn("forwardChannelMaxRetries",2,i),this.xa=tn("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new na(i&&i.concurrentRequestLimit),this.Ja=new Xr,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zs(i){if(hi(i),3==i.H){var e=i.W++,t=On(i.I);if(ir(t,"SID",i.K),ir(t,"RID",e),ir(t,"TYPE","terminate"),li(i,t),(e=new Gr(i,i.l,e)).L=2,e.v=ss(On(t)),t=!1,ee.navigator&&ee.navigator.sendBeacon)try{t=ee.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&ee.Image&&((new Image).src=e.v,t=!0),t||(e.g=Mo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),lr(e)}Da(i)}function ys(i){i.g&&(Ho(i),i.g.cancel(),i.g=null)}function hi(i){ys(i),i.u&&(ee.clearTimeout(i.u),i.u=null),zo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ee.clearTimeout(i.m),i.m=null)}function fi(i){if(!Os(i.i)&&!i.m){i.m=!0;var e=i.Na;K||De(),Y||(K(),Y=!0),G.add(e,i),i.C=0}}function lo(i,e){var t;t=e?e.m:i.W++;const s=On(i.I);ir(s,"SID",i.K),ir(s,"RID",t),ir(s,"AID",i.V),li(i,s),i.o&&i.s&&Ze(s,i.o,i.s),t=new Gr(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Ys(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ii(i.i,t),yi(t,s,e)}function li(i,e){i.na&&kr(i.na,function(t,s){ir(e,s,t)}),i.h&&Rt({},function(t,s){ir(e,s,t)})}function Ys(i,e,t){t=Math.min(i.j.length,t);var s=i.h?Ne(i.h.Va,i.h,i):null;e:{var a=i.j;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=a[0].g,f.push("ofs="+c)):c=0:f.push("ofs="+c);let D=!0;for(let N=0;N<t;N++){let U=a[N].g;const Q=a[N].map;if(U-=c,0>U)c=Math.max(0,a[N].g-100),D=!1;else try{Bo(Q,f,"req"+U+"_")}catch{s&&s(Q)}}if(D){s=f.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,s}function co(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;K||De(),Y||(K(),Y=!0),G.add(e,i),i.A=0}}function Ia(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=zn(Ne(i.Ma,i),Pi(i,i.A)),i.A++,0))}function Ho(i){null!=i.B&&(ee.clearTimeout(i.B),i.B=null)}function Go(i){i.g=new Gr(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=On(i.wa);ir(e,"RID","rpc"),ir(e,"SID",i.K),ir(e,"AID",i.V),ir(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&ir(e,"TO",i.qa),ir(e,"TYPE","xmlhttp"),li(i,e),i.o&&i.s&&Ze(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=ss(On(e)),t.s=null,t.S=!0,ps(t,i)}function zo(i){null!=i.v&&(ee.clearTimeout(i.v),i.v=null)}function So(i,e){var t=null;if(i.g==e){zo(i),Ho(i),i.g=null;var s=2}else{if(!Ri(i.i,e))return;t=e.F,Ns(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=i.C;Te(s=Nn(),new Ms(s,t)),fi(i)}else co(i);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==s&&function us(i,e){return!(so(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=zn(Ne(i.Na,i,e),Pi(i,i.C)),i.C++,0)))}(i,e)||2==s&&Ia(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:ks(i,5);break;case 4:ks(i,10);break;case 3:ks(i,6);break;default:ks(i,2)}}function Pi(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function ks(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var s=Ne(i.pb,i);t||(t=new qn("//www.google.com/images/cleardot.gif"),ee.location&&"http"==ee.location.protocol||Ui(t,"https"),ss(t)),function jo(i,e){const t=new Oe;if(ee.Image){const s=new Image;s.onload=Ct(Ks,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Ct(Ks,t,s,"TestLoadImage: error",!1,e),s.onabort=Ct(Ks,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Ct(Ks,t,s,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else vr(2);i.H=0,i.h&&i.h.za(e),Da(i),hi(i)}function Da(i){if(i.H=0,i.ma=[],i.h){const e=To(i.i);(0!=e.length||0!=i.j.length)&&(st(i.ma,e),st(i.ma,i.j),i.i.i.length=0,yt(i.j),i.j.length=0),i.h.ya()}}function ho(i,e,t){var s=t instanceof qn?On(t):new qn(t);if(""!=s.g)e&&(s.g=e+"."+s.g),Yr(s,s.m);else{var a=ee.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new qn(null);s&&Ui(c,s),e&&(c.g=e),a&&Yr(c,a),t&&(c.l=t),s=c}return e=i.Da,(t=i.F)&&e&&ir(s,t,e),ir(s,"VER",i.ra),li(i,s),s}function Mo(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&i.Ha&&!i.va?new di({ob:!0}):i.va)).Oa(i.J),e}function Wo(){}function fo(){if(Pe&&!(10<=Number($n)))throw Error("Environmental error: no available transport.")}function Oi(i,e){Ft.call(this),this.g=new Hn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Yt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ia(this)}function vs(i){Vi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ko(){br.call(this),this.status=1}function ia(i){this.g=i}function vi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sr(i,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=i.g[3],f=(e=i.g[0])+(c^(t=i.g[1])&((a=i.g[2])^c))+s[0]+3614090360&4294967295;f=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(f<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|f>>>10))+((f=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|f>>>12))+((f=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|f>>>9))+((f=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|f>>>11))+((c=(e=t+((f=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|f>>>22))^((a=c+((f=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|f>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(f<<21&4294967295|f>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+c&4294967295}function fr(i,e){this.h=e;for(var t=[],s=!0,a=i.length-1;0<=a;a--){var c=0|i[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(te=sr.prototype).Oa=function(i){this.M=i},te.ha=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xs.g(),this.C=function Tr(i){return i.h||(i.h=i.i())}(this.u?this.u:xs),this.g.onreadystatechange=Ne(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void mt(this,c)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=ee.FormData&&i instanceof ee.FormData,!(0<=nt(as,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,f]of t)this.g.setRequestHeader(c,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ar(this),0<this.B&&((this.L=function ra(i){return Pe&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ne(this.ua,this)):this.A=re(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){mt(this,c)}},te.ua=function(){typeof _e<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Te(this,"timeout"),this.abort(8))},te.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Te(this,"complete"),Te(this,"abort"),uo(this))},te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uo(this,!0)),sr.$.N.call(this)},te.La=function(){this.s||(this.G||this.v||this.l?$o(this):this.kb())},te.kb=function(){$o(this)},te.isActive=function(){return!!this.g},te.da=function(){try{return 2<k(this)?this.g.status:-1}catch{return-1}},te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},te.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ao(e)}},te.Ia=function(){return this.m},te.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(te=Hn.prototype).ra=8,te.H=1,te.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new Gr(this,this.l,i);let c=this.s;if(this.U&&(c?(c=gn(c),ar(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ys(this,a,e),ir(t=On(this.I),"RID",i),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),li(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(q(c)))+"&"+e:this.o&&Ze(t,this.o,c)),ii(this.i,a),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),a.aa=!0,yi(a,t,null)):yi(a,t,e),this.H=2}}else 3==this.H&&(i?lo(this,i):0==this.j.length||Os(this.i)||lo(this))},te.Ma=function(){if(this.u=null,Go(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=zn(Ne(this.jb,this),i)}},te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vr(10),ys(this),Go(this))},te.ib=function(){null!=this.v&&(this.v=null,ys(this),Ia(this),vr(19))},te.pb=function(i){i?(this.l.info("Successfully pinged google.com"),vr(2)):(this.l.info("Failed to ping google.com"),vr(1))},te.isActive=function(){return!!this.h&&this.h.isActive(this)},(te=Wo.prototype).Ba=function(){},te.Aa=function(){},te.za=function(){},te.ya=function(){},te.isActive=function(){return!0},te.Va=function(){},fo.prototype.g=function(i,e){return new Oi(i,e)},ft(Oi,Ft),Oi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;vr(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=ho(i,null,i.Y),fi(i)},Oi.prototype.close=function(){Zs(this.g)},Oi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Qe(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&fi(e)},Oi.prototype.N=function(){this.g.h=null,delete this.j,Zs(this.g),delete this.g,Oi.$.N.call(this)},ft(vs,Vi),ft(Ko,br),ft(ia,Wo),ia.prototype.Ba=function(){Te(this.g,"a")},ia.prototype.Aa=function(i){Te(this.g,new vs(i))},ia.prototype.za=function(i){Te(this.g,new Ko)},ia.prototype.ya=function(){Te(this.g,"b")},ft(vi,function hr(){this.blockSize=-1}),vi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)Sr(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(s[a++]=i.charCodeAt(c++),a==this.blockSize){Sr(this,s),a=0;break}}else for(;c<e;)if(s[a++]=i[c++],a==this.blockSize){Sr(this,s),a=0;break}}this.h=a,this.i+=e},vi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)i[t++]=this.g[e]>>>s&255;return i};var sa={};function oa(i){return-128<=i&&128>i?function Or(i,e){var t=sa;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new fr([0|e],0>e?-1:0)}):new fr([0|i],0>i?-1:0)}function bi(i){if(isNaN(i)||!isFinite(i))return Bi;if(0>i)return _i(bi(-i));for(var e=[],t=1,s=0;i>=t;s++)e[s]=i/t|0,t*=po;return new fr(e,0)}var po=4294967296,Bi=oa(0),Fs=oa(1),aa=oa(16777216);function ls(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function ji(i){return-1==i.h}function _i(i){for(var e=i.g.length,t=[],s=0;s<e;s++)t[s]=~i.g[s];return new fr(t,~i.h).add(Fs)}function Ji(i,e){return i.add(_i(e))}function cs(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Zo(i,e){this.g=i,this.h=e}function Qs(i,e){if(ls(e))throw Error("division by zero");if(ls(i))return new Zo(Bi,Bi);if(ji(i))return e=Qs(_i(i),e),new Zo(_i(e.g),_i(e.h));if(ji(e))return e=Qs(i,_i(e)),new Zo(_i(e.g),e.h);if(30<i.g.length){if(ji(i)||ji(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Fs,s=e;0>=s.X(i);)t=go(t),s=go(s);var a=xo(t,1),c=xo(s,1);for(s=xo(s,2),t=xo(t,2);!ls(s);){var f=c.add(s);0>=f.X(i)&&(a=a.add(t),c=f),s=xo(s,1),t=xo(t,1)}return e=Ji(i,a.R(e)),new Zo(a,e)}for(a=Bi;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),f=(c=bi(t)).R(e);ji(f)||0<f.X(i);)f=(c=bi(t-=s)).R(e);ls(c)&&(c=Fs),a=a.add(c),i=Ji(i,f)}return new Zo(a,i)}function go(i){for(var e=i.g.length+1,t=[],s=0;s<e;s++)t[s]=i.D(s)<<1|i.D(s-1)>>>31;return new fr(t,i.h)}function xo(i,e){var t=e>>5;e%=32;for(var s=i.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?i.D(c+t)>>>e|i.D(c+t+1)<<32-e:i.D(c+t);return new fr(a,i.h)}(te=fr.prototype).ea=function(){if(ji(this))return-_i(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);i+=(0<=s?s:po+s)*e,e*=po}return i},te.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(ls(this))return"0";if(ji(this))return"-"+_i(this).toString(i);for(var e=bi(Math.pow(i,6)),t=this,s="";;){var a=Qs(t,e).g,c=((0<(t=Ji(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(ls(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},te.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},te.X=function(i){return ji(i=Ji(this,i))?-1:ls(i)?0:1},te.abs=function(){return ji(this)?_i(this):this},te.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&i.D(a)),f=(c>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);s=f>>>16,t[a]=(f&=65535)<<16|(c&=65535)}return new fr(t,-2147483648&t[t.length-1]?-1:0)},te.R=function(i){if(ls(this)||ls(i))return Bi;if(ji(this))return ji(i)?_i(this).R(_i(i)):_i(_i(this).R(i));if(ji(i))return _i(this.R(_i(i)));if(0>this.X(aa)&&0>i.X(aa))return bi(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<i.g.length;a++){var c=this.D(s)>>>16,f=65535&this.D(s),D=i.D(a)>>>16,N=65535&i.D(a);t[2*s+2*a]+=f*N,cs(t,2*s+2*a),t[2*s+2*a+1]+=c*N,cs(t,2*s+2*a+1),t[2*s+2*a+1]+=f*D,cs(t,2*s+2*a+1),t[2*s+2*a+2]+=c*D,cs(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new fr(t,0)},te.gb=function(i){return Qs(this,i).h},te.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&i.D(s);return new fr(t,this.h&i.h)},te.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|i.D(s);return new fr(t,this.h|i.h)},te.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^i.D(s);return new fr(t,this.h^i.h)},fo.prototype.createWebChannel=fo.prototype.g,Oi.prototype.send=Oi.prototype.u,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,Ai.NO_ERROR=0,Ai.TIMEOUT=8,Ai.HTTP_ERROR=6,Si.COMPLETE="complete",Li.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Ft.prototype.listen=Ft.prototype.O,sr.prototype.listenOnce=sr.prototype.P,sr.prototype.getLastError=sr.prototype.Sa,sr.prototype.getLastErrorCode=sr.prototype.Ia,sr.prototype.getStatus=sr.prototype.da,sr.prototype.getResponseJson=sr.prototype.Wa,sr.prototype.getResponseText=sr.prototype.ja,sr.prototype.send=sr.prototype.ha,sr.prototype.setWithCredentials=sr.prototype.Oa,vi.prototype.digest=vi.prototype.l,vi.prototype.reset=vi.prototype.reset,vi.prototype.update=vi.prototype.j,fr.prototype.add=fr.prototype.add,fr.prototype.multiply=fr.prototype.R,fr.prototype.modulo=fr.prototype.gb,fr.prototype.compare=fr.prototype.X,fr.prototype.toNumber=fr.prototype.ea,fr.prototype.toString=fr.prototype.toString,fr.prototype.getBits=fr.prototype.D,fr.fromNumber=bi,fr.fromString=function qo(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return _i(qo(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=bi(Math.pow(e,8)),s=Bi,a=0;a<i.length;a+=8){var c=Math.min(8,i.length-a),f=parseInt(i.substring(a,a+c),e);8>c?(c=bi(Math.pow(e,c)),s=s.R(c).add(bi(f))):s=(s=s.R(t)).add(bi(f))}return s};var ru=Ee.createWebChannelTransport=function(){return new fo},b=Ee.getStatEventTarget=function(){return Nn()},V=Ee.ErrorCode=Ai,x=Ee.EventType=Si,W=Ee.Event=Gn,ve=Ee.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Je=Ee.FetchXmlHttpFactory=di,dt=Ee.WebChannel=Li,pn=Ee.XhrIo=sr,dr=Ee.Md5=vi,Zn=Ee.Integer=fr;const Er="@firebase/firestore";class vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let Mr="9.23.0";const Fn=new le.Yd("@firebase/firestore");function si(){return Fn.logLevel}function _s(i){Fn.setLogLevel(i)}function _t(i,...e){if(Fn.logLevel<=le.in.DEBUG){const t=e.map(Ro);Fn.debug(`Firestore (${Mr}): ${i}`,...t)}}function wr(i,...e){if(Fn.logLevel<=le.in.ERROR){const t=e.map(Ro);Fn.error(`Firestore (${Mr}): ${i}`,...t)}}function xr(i,...e){if(Fn.logLevel<=le.in.WARN){const t=e.map(Ro);Fn.warn(`Firestore (${Mr}): ${i}`,...t)}}function Ro(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Zt(i="Unexpected state"){const e=`FIRESTORE (${Mr}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function an(i,e){i||Zt()}function ua(i,e){i||Zt()}function Wt(i,e){return i}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends he.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ua{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ru{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}}class Pu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ba{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=U=>this.i!==a?(a=this.i,t(U)):Promise.resolve();let f=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new oi,e.enqueueRetryable(()=>c(this.currentUser))};const D=()=>{const U=f;e.enqueueRetryable((0,p.Z)(function*(){yield U.promise,yield c(s.currentUser)}))},N=U=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(U=>N(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?N(U):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new oi)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(an("string"==typeof s.accessToken),new Ua(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return an(null===e||"string"==typeof e),new vn(e)}}class ja{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class la{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new ja(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ol{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=c=>{null!=c.error&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.T;return this.T=c.token,_t("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(an("string"==typeof t.token),this.T=t.token,new Ol(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ca(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class or{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Ca(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function Rn(i,e){return i<e?-1:i>e?1:0}function Js(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}function $a(i){return i+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Rr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mn(e)}static min(){return new mn(new Rr(0,0))}static max(){return new mn(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ls{constructor(e,t,s){void 0===t?t=0:t>e.length&&Zt(),void 0===s?s=e.length-t:s>e.length-t&&Zt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Ls.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),f=t.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends Ls{construct(e,t,s){return new In(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new bt(We.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new In(t)}static emptyPath(){return new In([])}}const Ha=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Ls{construct(e,t,s){return new er(e,t,s)}static isValidIdentifier(e){return Ha.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new bt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const D=e[a];if("\\"===D){if(a+1===e.length)throw new bt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[a+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new bt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=N,a+=2}else"`"===D?(f=!f,a++):"."!==D||f?(s+=D,a++):(c(),a++)}if(c(),f)throw new bt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class zt{constructor(e){this.path=e}static fromPath(e){return new zt(In.fromString(e))}static fromName(e){return new zt(In.fromString(e).popFirst(5))}static empty(){return new zt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zt(new In(e.slice()))}}class $i{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ba(i){return i.fields.find(e=>2===e.kind)}function mo(i){return i.fields.filter(e=>2!==e.kind)}$i.UNKNOWN_ID=-1;class Ga{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ta{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ta(0,Es.min())}}function iu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=mn.fromTimestamp(1e9===s?new Rr(t+1,0):new Rr(t,s));return new Es(a,zt.empty(),e)}function Ou(i){return new Es(i.readTime,i.key,-1)}class Es{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Es(mn.min(),zt.empty(),-1)}static max(){return new Es(mn.max(),zt.empty(),-1)}}function su(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=zt.comparator(i.documentKey,e.documentKey),0!==t?t:Rn(i.largestBatchId,e.largestBatchId))}const za="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class il{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function da(i){return ti.apply(this,arguments)}function ti(){return ti=(0,p.Z)(function*(i){if(i.code!==We.FAILED_PRECONDITION||i.message!==za)throw i;_t("LocalStore","Unexpectedly lost primary lease")}),ti.apply(this,arguments)}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):je.reject(t)}static resolve(e){return new je((t,s)=>{t(e)})}static reject(e){return new je((t,s)=>{s(e)})}static waitFor(e){return new je((t,s)=>{let a=0,c=0,f=!1;e.forEach(D=>{++a,D.next(()=>{++c,f&&c===a&&t()},N=>s(N))}),f=!0,c===a&&t()})}static or(e){let t=je.resolve(!1);for(const s of e)t=t.next(a=>a?je.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new je((s,a)=>{const c=e.length,f=new Array(c);let D=0;for(let N=0;N<c;N++){const U=N;t(e[U]).next(Q=>{f[U]=Q,++D,D===c&&s(f)},Q=>a(Q))}})}static doWhile(e,t){return new je((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class ha{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new oi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new pi(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=au(s.target.error);this.v.reject(new pi(e,a))}}static open(e,t,s,a){try{return new ha(t,e.transaction(a,s))}catch(c){throw new pi(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(_t("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ou(t)}}class Xi{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Xi.S((0,he.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _t("SimpleDb","Removing database:",e),Vs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,he.hl)())return!1;if(Xi.C())return!0;const e=(0,he.z$)(),t=Xi.S(e),s=0<t&&t<10,a=Xi.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,p.Z)(function*(){return t.db||(_t("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{s(f.target.result)},c.onblocked=()=>{a(new pi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const D=f.target.error;a("VersionError"===D.name?new bt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new bt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new pi(e,D))},c.onupgradeneeded=f=>{_t("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.V.O(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{_t("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,p.Z)(function*(){const f="readonly"===t;let D=0;for(;;){++D;try{c.db=yield c.$(e);const N=ha.open(c.db,e,f?"readonly":"readwrite",s),U=a(N).next(Q=>(N.P(),Q)).catch(Q=>(N.abort(Q),je.reject(Q))).toPromise();return U.catch(()=>{}),yield N.R,U}catch(N){const U=N,Q="FirebaseError"!==U.name&&D<3;if(_t("SimpleDb","Transaction failed with error:",U.message,"Retrying:",Q),c.close(),!Q)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Nu{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Vs(this.L.delete())}}class pi extends bt{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ni(i){return"IndexedDbTransactionError"===i.name}class ou{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(_t("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(_t("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Vs(s)}add(e){return _t("SimpleDb","ADD",this.store.name,e,e),Vs(this.store.add(e))}get(e){return Vs(this.store.get(e)).next(t=>(void 0===t&&(t=null),_t("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _t("SimpleDb","DELETE",this.store.name,e),Vs(this.store.delete(e))}count(){return _t("SimpleDb","COUNT",this.store.name),Vs(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.W(a,(f,D)=>{c.push(D)}).next(()=>c)}{const a=this.store.getAll(s.range);return new je((c,f)=>{a.onerror=D=>{f(D.target.error)},a.onsuccess=D=>{c(D.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new je((a,c)=>{s.onerror=f=>{c(f.target.error)},s.onsuccess=f=>{a(f.target.result)}})}J(e,t){_t("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(c,f,D)=>D.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new je((s,a)=>{t.onerror=c=>{const f=au(c.target.error);a(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(D=>{D?f.continue():s()}):s()}})}W(e,t){const s=[];return new je((a,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const D=f.target.result;if(!D)return void a();const N=new Nu(D),U=t(D.primaryKey,D.value,N);if(U instanceof je){const Q=U.catch(me=>(N.done(),je.reject(me)));s.push(Q)}N.isDone?a():null===N.K?D.continue():D.continue(N.K)}}).next(()=>je.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vs(i){return new je((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const a=au(s.target.error);t(a)}})}let Aa=!1;function au(i){const e=Xi.S((0,he.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Aa||(Aa=!0,setTimeout(()=>{throw s},0)),s}}return i}class ku{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;_t("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,p.Z)(function*(){t.task=null;try{_t("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){Ni(s)?_t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield da(s)}yield t.et(6e4)}))}}class kl{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,p.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,c=!0;return je.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!s.has(f))return _t("IndexBackiller",`Processing collection: ${f}`),this.it(e,f,a).next(D=>{a-=D,s.add(f)});c=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const f=c.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.rt(a,c)).next(D=>(_t("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>f.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,c)=>{const f=Ou(c);su(f,s)>0&&(s=f)}),new Es(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ds=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function Sa(i){return null==i}function Yo(i){return 0===i&&1/i==-1/0}function ws(i){return"number"==typeof i&&Number.isInteger(i)&&!Yo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function v(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=y(e)),e=E(i.get(t),e);return y(e)}function E(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function y(i){return i+"\x01\x01"}function T(i){const e=i.length;if(an(e>=2),2===e)return an("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),In.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const f=i.indexOf("\x01",c);switch((f<0||f>t)&&Zt(),i.charAt(f+1)){case"\x01":const D=i.substring(c,f);let N;0===a.length?N=D:(a+=D,N=a,a=""),s.push(N);break;case"\x10":a+=i.substring(c,f),a+="\0";break;case"\x11":a+=i.substring(c,f+1);break;default:Zt()}c=f+2}return new In(s)}const O=["userId","batchId"];function z(i,e){return[i,v(e)]}function ce(i,e,t){return[i,v(e),t]}const pe={},et=["prefixPath","collectionGroup","readTime","documentId"],$t=["prefixPath","collectionGroup","documentId"],jn=["collectionGroup","readTime","prefixPath","documentId"],Jt=["canonicalId","targetId"],Vr=["targetId","path"],Wr=["path","targetId"],Is=["collectionId","parent"],Ei=["indexId","uid"],Us=["uid","sequenceNumber"],Fu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yo=["indexId","uid","orderedDocumentKey"],uu=["userId","collectionPath","documentId"],lu=["userId","collectionPath","largestBatchId"],Ds=["userId","collectionGroup","largestBatchId"],cu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ki=[...cu,"documentOverlays"],Lu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=Lu,sl=[...Fl,"indexConfiguration","indexState","indexEntries"];class fa extends il{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hi(i,e){const t=Wt(i);return Xi.M(t.ht,e)}function Ma(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Wa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ll(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ir{constructor(e,t){this.comparator=e,this.root=t||gi.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??gi.RED,this.left=a??gi.EMPTY,this.right=c??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new gi(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return gi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zt();const e=this.left.check();if(e!==this.right.check())throw Zt();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1,gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Zt()}get value(){throw Zt()}get color(){throw Zt()}get left(){throw Zt()}get right(){throw Zt()}copy(i,e,t,s,a){return this}insert(i,e,t){return new gi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ai{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(e){return new Vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ai(this.comparator);return t.data=e,t}}class Vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oo(i){return i.hasNext()?i.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new es([])}unionWith(e){let t=new ai(er.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ol extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tc(){return typeof atob<"u"}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ol("Invalid base64 string: "+a):a}}(e);return new wi(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const hu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(i){if(an(!!i),"string"==typeof i){let e=0;const t=hu.exec(i);if(an(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ui(i.seconds),nanos:ui(i.nanos)}}function ui(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function xa(i){return"string"==typeof i?wi.fromBase64String(i):wi.fromUint8Array(i)}function Vu(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Uu(i){const e=i.mapValue.fields.__previous_value__;return Vu(e)?Uu(e):e}function al(i){const e=vo(i.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class Ul{constructor(e,t,s,a,c,f,D,N,U){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=D,this.longPollingOptions=N,this.useFetchStreams=U}}class Qo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qo&&e.projectId===this.projectId&&e.database===this.database}}const Jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ra={nullValue:"NULL_VALUE"};function Xs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vu(i)?4:td(i)?9007199254740991:10:Zt()}function _o(i,e){if(i===e)return!0;const t=Xs(i);if(t!==Xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return al(i).isEqual(al(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=vo(s.timestampValue),f=vo(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,xa(i.bytesValue).isEqual(xa(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return ui(s.geoPointValue.latitude)===ui(a.geoPointValue.latitude)&&ui(s.geoPointValue.longitude)===ui(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ui(s.integerValue)===ui(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=ui(s.doubleValue),f=ui(a.doubleValue);return c===f?Yo(c)===Yo(f):isNaN(c)&&isNaN(f)}return!1}(i,e);case 9:return Js(i.arrayValue.values||[],e.arrayValue.values||[],_o);case 10:return function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Ma(c)!==Ma(f))return!1;for(const D in c)if(c.hasOwnProperty(D)&&(void 0===f[D]||!_o(c[D],f[D])))return!1;return!0}(i,e);default:return Zt()}var a}function pa(i,e){return void 0!==(i.values||[]).find(t=>_o(t,e))}function Xo(i,e){if(i===e)return 0;const t=Xs(i),s=Xs(e);if(t!==s)return Rn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rn(i.booleanValue,e.booleanValue);case 2:return function(a,c){const f=ui(a.integerValue||a.doubleValue),D=ui(c.integerValue||c.doubleValue);return f<D?-1:f>D?1:f===D?0:isNaN(f)?isNaN(D)?0:-1:1}(i,e);case 3:return fu(i.timestampValue,e.timestampValue);case 4:return fu(al(i),al(e));case 5:return Rn(i.stringValue,e.stringValue);case 6:return function(a,c){const f=xa(a),D=xa(c);return f.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),D=c.split("/");for(let N=0;N<f.length&&N<D.length;N++){const U=Rn(f[N],D[N]);if(0!==U)return U}return Rn(f.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const f=Rn(ui(a.latitude),ui(c.latitude));return 0!==f?f:Rn(ui(a.longitude),ui(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,c){const f=a.values||[],D=c.values||[];for(let N=0;N<f.length&&N<D.length;++N){const U=Xo(f[N],D[N]);if(U)return U}return Rn(f.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===Jo.mapValue&&c===Jo.mapValue)return 0;if(a===Jo.mapValue)return 1;if(c===Jo.mapValue)return-1;const f=a.fields||{},D=Object.keys(f),N=c.fields||{},U=Object.keys(N);D.sort(),U.sort();for(let Q=0;Q<D.length&&Q<U.length;++Q){const me=Rn(D[Q],U[Q]);if(0!==me)return me;const Be=Xo(f[D[Q]],N[U[Q]]);if(0!==Be)return Be}return Rn(D.length,U.length)}(i.mapValue,e.mapValue);default:throw Zt()}}function fu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Rn(i,e);const t=vo(i),s=vo(e),a=Rn(t.seconds,s.seconds);return 0!==a?a:Rn(t.nanos,s.nanos)}function Ka(i){return pu(i)}function pu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const a=vo(s);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?xa(i.bytesValue).toBase64():"referenceValue"in i?zt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let a="[",c=!0;for(const f of s.values||[])c?c=!1:a+=",",a+=pu(f);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",f=!0;for(const D of a)f?f=!1:c+=",",c+=`${D}:${pu(s.fields[D])}`;return c+"}"}(i.mapValue):Zt();var e}function Pa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ed(i){return!!i&&"integerValue"in i}function ul(i){return!!i&&"arrayValue"in i}function gu(i){return!!i&&"nullValue"in i}function mu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ll(i){return!!i&&"mapValue"in i}function ju(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Wa(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ju(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ju(i.arrayValue.values[t]);return e}return Object.assign({},i)}function td(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ga(i){return"nullValue"in i?Ra:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Pa(Qo.empty(),zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Zt()}function nd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Pa(Qo.empty(),zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Jo:Zt()}function ma(i,e){const t=Xo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Bl(i,e){const t=Xo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ll(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(t)}setAll(e){let t=er.emptyPath(),s={},a=[];e.forEach((f,D)=>{if(!t.isImmediateParentOf(D)){const N=this.getFieldsMap(t);this.applyChanges(N,s,a),s={},a=[],t=D.popLast()}f?s[D.lastSegment()]=ju(f):a.push(D.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ll(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ll(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Wa(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new ts(ju(this.value))}}function cl(i){const e=[];return Wa(i.fields,(t,s)=>{const a=new er([t]);if(ll(s)){const c=cl(s.mapValue).fields;if(0===c.length)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new es(e)}class Jr{constructor(e,t,s,a,c,f,D){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=D}static newInvalidDocument(e){return new Jr(e,0,mn.min(),mn.min(),mn.min(),ts.empty(),0)}static newFoundDocument(e,t,s,a){return new Jr(e,1,t,mn.min(),s,a,0)}static newNoDocument(e,t){return new Jr(e,2,t,mn.min(),mn.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new Jr(e,3,t,mn.min(),mn.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ns{constructor(e,t){this.position=e,this.inclusive=t}}function rd(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(s=c.field.isKeyField()?zt.comparator(zt.fromName(f.referenceValue),t.key):Xo(f,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function w(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!_o(i.position[t],e.position[t]))return!1;return!0}class A{constructor(e,t="asc"){this.field=e,this.dir=t}}function j(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ne{}class ge extends ne{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Fi(e,t,s):"array-contains"===t?new Oa(e,s):"in"===t?new vu(e,s):"not-in"===t?new Rf(e,s):"array-contains-any"===t?new Pf(e,s):new ge(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ya(e,s):new yu(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xo(t,this.value)):null!==t&&Xs(this.value)===Xs(t)&&this.matchesComparison(Xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class be extends ne{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new be(e,t)}matches(e){return it(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function it(i){return"and"===i.op}function Kt(i){return"or"===i.op}function Gt(i){return yn(i)&&it(i)}function yn(i){for(const e of i.filters)if(e instanceof be)return!1;return!0}function _n(i){if(i instanceof ge)return i.field.canonicalString()+i.op.toString()+Ka(i.value);if(Gt(i))return i.filters.map(e=>_n(e)).join(",");{const e=i.filters.map(t=>_n(t)).join(",");return`${i.op}(${e})`}}function Ln(i,e){return i instanceof ge?(t=i,(s=e)instanceof ge&&t.op===s.op&&t.field.isEqual(s.field)&&_o(t.value,s.value)):i instanceof be?function(t,s){return s instanceof be&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,c,f)=>a&&Ln(c,s.filters[f]),!0)}(i,e):void Zt();var t,s}function hs(i,e){const t=i.filters.concat(e);return be.create(t,i.op)}function mi(i){return i instanceof ge?`${(e=i).field.canonicalString()} ${e.op} ${Ka(e.value)}`:i instanceof be?function(e){return e.op.toString()+" {"+e.getFilters().map(mi).join(" ,")+"}"}(i):"Filter";var e}class Fi extends ge{constructor(e,t,s){super(e,t,s),this.key=zt.fromName(s.referenceValue)}matches(e){const t=zt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ya extends ge{constructor(e,t){super(e,"in",t),this.keys=eo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yu extends ge{constructor(e,t){super(e,"not-in",t),this.keys=eo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eo(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>zt.fromName(s.referenceValue))}class Oa extends ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ul(t)&&pa(t.arrayValue,this.value)}}class vu extends ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pa(this.value.arrayValue,t)}}class Rf extends ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pa(this.value.arrayValue,t)}}class Pf extends ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>pa(this.value.arrayValue,s))}}class id{constructor(e,t=null,s=[],a=[],c=null,f=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=D,this.dt=null}}function jl(i,e=null,t=[],s=[],a=null,c=null,f=null){return new id(i,e,t,s,a,c,f)}function Na(i){const e=Wt(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>_n(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Sa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),e.dt=t}return e.dt}function dl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!j(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Ln(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!w(i.startAt,e.startAt)&&w(i.endAt,e.endAt)}function $u(i){return zt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function hl(i,e){return i.filters.filter(t=>t instanceof ge&&t.field.isEqual(e))}function lh(i,e,t){let s=Ra,a=!0;for(const c of hl(i,e)){let f=Ra,D=!0;switch(c.op){case"<":case"<=":f=ga(c.value);break;case"==":case"in":case">=":f=c.value;break;case">":f=c.value,D=!1;break;case"!=":case"not-in":f=Ra}ma({value:s,inclusive:a},{value:f,inclusive:D})<0&&(s=f,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const f=t.position[c];ma({value:s,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}function sd(i,e,t){let s=Jo,a=!0;for(const c of hl(i,e)){let f=Jo,D=!0;switch(c.op){case">=":case">":f=nd(c.value),D=!1;break;case"==":case"in":case"<=":f=c.value;break;case"<":f=c.value,D=!1;break;case"!=":case"not-in":f=Jo}Bl({value:s,inclusive:a},{value:f,inclusive:D})>0&&(s=f,a=D)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const f=t.position[c];Bl({value:s,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}class qa{constructor(e,t=null,s=[],a=[],c=null,f="F",D=null,N=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=D,this.endAt=N,this.wt=null,this._t=null}}function fl(i,e,t,s,a,c,f,D){return new qa(i,e,t,s,a,c,f,D)}function Hu(i){return new qa(i)}function ch(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ac(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function _(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function d(i){return null!==i.collectionGroup}function g(i){const e=Wt(i);if(null===e.wt){e.wt=[];const t=_(e),s=Ac(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new A(t)),e.wt.push(new A(er.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new A(er.keyField(),c))}}}return e.wt}function I(i){const e=Wt(i);if(!e._t)if("F"===e.limitType)e._t=jl(e.path,e.collectionGroup,g(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of g(e))t.push(new A(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new ns(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ns(e.startAt.position,e.startAt.inclusive):null;e._t=jl(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function $(i,e){e.getFirstInequalityField(),_(i);const t=i.filters.concat([e]);return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function J(i,e,t){return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function xe(i,e){return dl(I(i),I(e))&&i.limitType===e.limitType}function tt(i){return`${Na(I(i))}|lt:${i.limitType}`}function Ut(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>mi(s)).join(", ")}]`),Sa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ka(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ka(s)).join(",")),`Target(${t})`}(I(i))}; limitType=${i.limitType})`}function Xt(i,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):zt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(i,e)&&function(t,s){for(const a of g(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(i,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(a,c,f){const D=rd(a,c,f);return a.inclusive?D<=0:D<0}(t.startAt,g(t),s)||t.endAt&&!function(a,c,f){const D=rd(a,c,f);return a.inclusive?D>=0:D>0}(t.endAt,g(t),s)));var t,s}function bn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function pr(i){return(e,t)=>{let s=!1;for(const a of g(i)){const c=Eo(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function Eo(i,e,t){const s=i.field.isKeyField()?zt.comparator(e.key,t.key):function(a,c,f){const D=c.data.field(a),N=f.data.field(a);return null!==D&&null!==N?Xo(D,N):Zt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Zt()}}class Bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const $l=new Ir(zt.comparator);function Cs(){return $l}const Hl=new Ir(zt.comparator);function _u(...i){let e=Hl;for(const t of i)e=e.insert(t.key,t);return e}function od(i){let e=Hl;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ea(){return Gu()}function Sc(){return Gu()}function Gu(){return new Bs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Za=new Ir(zt.comparator),ad=new ai(zt.comparator);function tr(...i){let e=ad;for(const t of i)e=e.add(t);return e}const ud=new ai(Rn);function dh(){return ud}function ld(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(e)?"-0":e}}function fg(i){return{integerValue:""+i}}function Of(i,e){return ws(e)?fg(e):ld(i,e)}class cd{constructor(){this._=void 0}}function pg(i,e,t){return i instanceof zu?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Vu(a)&&(a=Uu(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):i instanceof Eu?Ff(i,e):i instanceof Wu?hh(i,e):function(s,a){const c=kf(s,a),f=Mc(c)+Mc(s.gt);return ed(c)&&ed(s.gt)?fg(f):ld(s.serializer,f)}(i,e)}function Nf(i,e,t){return i instanceof Eu?Ff(i,e):i instanceof Wu?hh(i,e):t}function kf(i,e){return i instanceof pl?ed(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class zu extends cd{}class Eu extends cd{constructor(e){super(),this.elements=e}}function Ff(i,e){const t=gg(e);for(const s of i.elements)t.some(a=>_o(a,s))||t.push(s);return{arrayValue:{values:t}}}class Wu extends cd{constructor(e){super(),this.elements=e}}function hh(i,e){let t=gg(e);for(const s of i.elements)t=t.filter(a=>!_o(a,s));return{arrayValue:{values:t}}}class pl extends cd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Mc(i){return ui(i.integerValue||i.doubleValue)}function gg(i){return ul(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xc{constructor(e,t){this.field=e,this.transform=t}}class xy{constructor(e,t){this.version=e,this.transformResults=t}}class Ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Gl{}function fh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new gl(i.key,Ii.none()):new Pc(i.key,i.data,Ii.none());{const t=i.data,s=ts.empty();let a=new ai(er.comparator);for(let c of e.fields)if(!a.has(c)){let f=t.field(c);null===f&&c.length>1&&(c=c.popLast(),f=t.field(c)),null===f?s.delete(c):s.set(c,f),a=a.add(c)}return new Ya(i.key,s,new es(a.toArray()),Ii.none())}}function zl(i,e,t){i instanceof Pc?function(s,a,c){const f=s.value.clone(),D=Lf(s.fieldTransforms,a,c.transformResults);f.setAll(D),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,e,t):i instanceof Ya?function(s,a,c){if(!Rc(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=Lf(s.fieldTransforms,a,c.transformResults),D=a.data;D.setAll(mg(s)),D.setAll(f),a.convertToFoundDocument(c.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dd(i,e,t,s){return i instanceof Pc?function(a,c,f,D){if(!Rc(a.precondition,c))return f;const N=a.value.clone(),U=hd(a.fieldTransforms,D,c);return N.setAll(U),c.convertToFoundDocument(c.version,N).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ya?function(a,c,f,D){if(!Rc(a.precondition,c))return f;const N=hd(a.fieldTransforms,D,c),U=c.data;return U.setAll(mg(a)),U.setAll(N),c.convertToFoundDocument(c.version,U).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(Q=>Q.field))}(i,e,t,s):(f=t,Rc(i.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f);var c,f}function Ry(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=kf(s.transform,a||null);null!=c&&(null===t&&(t=ts.empty()),t.set(s.field,c))}return t||null}function Py(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&Js(t,s,(a,c)=>function My(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Eu&&s instanceof Eu||t instanceof Wu&&s instanceof Wu?Js(t.elements,s.elements,_o):t instanceof pl&&s instanceof pl?_o(t.gt,s.gt):t instanceof zu&&s instanceof zu);var t,s}(a,c))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Pc extends Gl{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ya extends Gl{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function mg(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Lf(i,e,t){const s=new Map;an(i.length===t.length);for(let a=0;a<t.length;a++){const c=i[a],f=c.transform,D=e.data.field(c.field);s.set(c.field,Nf(f,D,t[a]))}return s}function hd(i,e,t){const s=new Map;for(const a of i){const c=a.transform,f=t.data.field(a.field);s.set(a.field,pg(c,f,e))}return s}class gl extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ph extends Gl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gh{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&zl(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Sc();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let D=this.applyToLocalView(f,c.mutatedFields);D=t.has(a.key)?null:D;const N=fh(f,D);null!==N&&s.set(a.key,N),f.isValidDocument()||f.convertToNoDocument(mn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tr())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(t,s)=>Py(t,s))&&Js(this.baseMutations,e.baseMutations,(t,s)=>Py(t,s))}}class mh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){an(e.mutations.length===s.length);let a=Za;const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new mh(e,t,s,a)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,t){this.count=e,this.unchangedNames=t}}var fs,Ur;function yg(i){switch(i){default:return Zt();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function Ku(i){if(void 0===i)return wr("GRPC error has no .code"),We.UNKNOWN;switch(i){case fs.OK:return We.OK;case fs.CANCELLED:return We.CANCELLED;case fs.UNKNOWN:return We.UNKNOWN;case fs.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case fs.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case fs.INTERNAL:return We.INTERNAL;case fs.UNAVAILABLE:return We.UNAVAILABLE;case fs.UNAUTHENTICATED:return We.UNAUTHENTICATED;case fs.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case fs.NOT_FOUND:return We.NOT_FOUND;case fs.ALREADY_EXISTS:return We.ALREADY_EXISTS;case fs.PERMISSION_DENIED:return We.PERMISSION_DENIED;case fs.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case fs.ABORTED:return We.ABORTED;case fs.OUT_OF_RANGE:return We.OUT_OF_RANGE;case fs.UNIMPLEMENTED:return We.UNIMPLEMENTED;case fs.DATA_LOSS:return We.DATA_LOSS;default:return Zt()}}(Ur=fs||(fs={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";class Wl{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vh}static getOrCreateInstance(){return null===vh&&(vh=new Wl),vh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vh=null;function ky(){return new TextEncoder}const H_=new Zn([4294967295,4294967295],0);function Fy(i){const e=ky().encode(i),t=new dr;return t.update(e),new Uint8Array(t.digest())}function Ly(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Zn([t,s],0),new Zn([a,c],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(s<0)throw new Oc(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Oc(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Zn.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(Zn.fromNumber(s)));return 1===a.compare(H_)&&(a=new Zn([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const f=this.Et(s,a,c);if(!this.At(f))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new vg(c,a,t);return s.forEach(D=>f.insert(D)),f}insert(e){if(0===this.It)return;const t=Fy(e),[s,a]=Ly(t);for(let c=0;c<this.hashCount;c++){const f=this.Et(s,a,c);this.Rt(f)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fd(mn.min(),a,new Ir(Rn),Cs(),tr())}}class pd{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pd(s,t,tr(),tr(),tr())}}class _h{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _g{constructor(e,t){this.targetId=e,this.Vt=t}}class Eh{constructor(e,t,s=wi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class wu{constructor(){this.St=0,this.Dt=Uf(),this.Ct=wi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=tr(),t=tr(),s=tr();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Zt()}}),new pd(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=Uf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Cs(),this.zt=Vf(),this.Wt=new Ir(Rn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:Zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,c=this.se(s);if(c){const f=c.target;if($u(f))if(0===a){const D=new zt(f.path);this.Yt(s,D,Jr.newNoDocument(D,mn.min()))}else an(1===a);else{const D=this.ie(s);if(D!==a){const N=this.re(e,D);0!==N&&(this.ee(s),this.Wt=this.Wt.insert(s,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(U,Q,me){var Be,at,Vt,sn,un,cr;const Br={localCacheCount:Q,existenceFilterCount:me.count},Dr=me.unchangedNames;return Dr&&(Br.bloomFilter={applied:0===U,hashCount:null!==(Be=Dr?.hashCount)&&void 0!==Be?Be:0,bitmapLength:null!==(sn=null===(Vt=null===(at=Dr?.bits)||void 0===at?void 0:at.bitmap)||void 0===Vt?void 0:Vt.length)&&void 0!==sn?sn:0,padding:null!==(cr=null===(un=Dr?.bits)||void 0===un?void 0:un.padding)&&void 0!==cr?cr:0}),Br}(N,D,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:c="",padding:f=0},hashCount:D=0}=s;let N,U;try{N=xa(c).toUint8Array()}catch(Q){if(Q instanceof ol)return xr("Decoding the base64 bloom filter in existence filter failed ("+Q.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Q}try{U=new vg(N,f,D)}catch(Q){return xr(Q instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",Q),1}return 0===U.It?1:a!==t-this.oe(e.targetId,U)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(c=>{const f=this.Gt.ue(),D=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.vt(D)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,f)=>{const D=this.se(f);if(D){if(c.current&&$u(D.target)){const N=new zt(D.target.path);null!==this.jt.get(N)||this.ae(f,N)||this.Yt(f,N,Jr.newNoDocument(N,e))}c.Mt&&(t.set(f,c.Ot()),c.Ft())}});let s=tr();this.zt.forEach((c,f)=>{let D=!0;f.forEachWhile(N=>{const U=this.se(N);return!U||"TargetPurposeLimboResolution"===U.purpose||(D=!1,!1)}),D&&(s=s.add(c))}),this.jt.forEach((c,f)=>f.setReadTime(e));const a=new fd(e,t,this.Wt,this.jt,s);return this.jt=Cs(),this.zt=Vf(),this.Wt=new Ir(Rn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new wu,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ai(Rn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||_t("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new wu),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new Ir(zt.comparator)}function Uf(){return new Ir(zt.comparator)}const Eg={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z_={and:"AND",or:"OR"};class W_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(i,e){return i.useProto3Json||Sa(e)?e:{value:e}}function ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function K_(i,e){return ml(i,e.toTimestamp())}function Gi(i){return an(!!i),mn.fromTimestamp(function(e){const t=vo(e);return new Rr(t.seconds,t.nanos)}(i))}function Bf(i,e){return(t=i,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wg(i){const e=In.fromString(i);return an(Gf(e)),e}function yd(i,e){return Bf(i.databaseId,e.path)}function Iu(i,e){const t=wg(e);if(t.get(1)!==i.databaseId.projectId)throw new bt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new bt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new zt(Ih(t))}function wh(i,e){return Bf(i.databaseId,e)}function vd(i){const e=wg(i);return 4===e.length?In.emptyPath():Ih(e)}function _d(i){return new In(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ih(i){return an(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ig(i,e,t){return{name:yd(i,e),fields:t.value.mapValue.fields}}function rs(i,e,t){const s=Iu(i,e.name),a=Gi(e.updateTime),c=e.createTime?Gi(e.createTime):mn.min(),f=new ts({mapValue:{fields:e.fields}}),D=Jr.newFoundDocument(s,a,c,f);return t&&D.setHasCommittedMutations(),t?D.setHasCommittedMutations():D}function Kl(i,e){let t;if(e instanceof Pc)t={update:Ig(i,e.key,e.value)};else if(e instanceof gl)t={delete:yd(i,e.key)};else if(e instanceof Ya)t={update:Ig(i,e.key,e.data),updateMask:Gy(e.fieldMask)};else{if(!(e instanceof ph))return Zt();t={verify:yd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const f=c.transform;if(f instanceof zu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Eu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Wu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pl)return{fieldPath:c.field.canonicalString(),increment:f.gt};throw Zt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:K_(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Zt()),t;var a}function Dh(i,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ii.updateTime(Gi(a.updateTime)):void 0!==a.exists?Ii.exists(a.exists):Ii.none():Ii.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,f){let D=null;"setToServerValue"in f?(an("REQUEST_TIME"===f.setToServerValue),D=new zu):"appendMissingElements"in f?D=new Eu(f.appendMissingElements.values||[]):"removeAllFromArray"in f?D=new Wu(f.removeAllFromArray.values||[]):"increment"in f?D=new pl(c,f.increment):Zt();const N=er.fromServerFormat(f.fieldPath);return new xc(N,D)}(i,a)):[];var a;if(e.update){const a=Iu(i,e.update.name),c=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new es((e.updateMask.fieldPaths||[]).map(U=>er.fromServerFormat(U)));return new Ya(a,c,f,t,s)}return new Pc(a,c,t,s)}if(e.delete){const a=Iu(i,e.delete);return new gl(a,t)}if(e.verify){const a=Iu(i,e.verify);return new ph(a,t)}return Zt()}function Dg(i,e){return{documents:[wh(i,e.path)]}}function jf(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wh(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wh(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(N){if(0!==N.length)return Hf(be.create(N,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(N){if(0!==N.length)return N.map(U=>{return{field:qu((Q=U).field),direction:q_(Q.dir)};var Q})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=md(i,e.limit);var D,N;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(N=e.endAt).inclusive,values:N.position}),t}function Cg(i){let e=vd(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){an(1===s);const Q=t.from[0];Q.allDescendants?a=Q.collectionId:e=e.child(Q.collectionId)}let c=[];t.where&&(c=function(Q){const me=Hy(Q);return me instanceof be&&Gt(me)?me.getFilters():[me]}(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(Q=>{return new A(ql((me=Q).field),function(Be){switch(Be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction));var me}));let D=null;t.limit&&(D=function(Q){let me;return me="object"==typeof Q?Q.value:Q,Sa(me)?null:me}(t.limit));let N=null;var Q;t.startAt&&(N=new ns((Q=t.startAt).values||[],!!Q.before));let U=null;return t.endAt&&(U=function(Q){return new ns(Q.values||[],!Q.before)}(t.endAt)),fl(e,a,f,c,D,"F",N,U)}function Hy(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ql(e.unaryFilter.field);return ge.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=ql(e.unaryFilter.field);return ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ql(e.unaryFilter.field);return ge.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ql(e.unaryFilter.field);return ge.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Zt()}}(i):void 0!==i.fieldFilter?ge.create(ql((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return be.create(e.compositeFilter.filters.map(t=>Hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Zt()}}(e.compositeFilter.op))}(i):Zt();var e}function q_(i){return Eg[i]}function Ed(i){return G_[i]}function $f(i){return z_[i]}function qu(i){return{fieldPath:i.canonicalString()}}function ql(i){return er.fromServerFormat(i.fieldPath)}function Hf(i){return i instanceof ge?function(e){if("=="===e.op){if(mu(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NAN"}};if(gu(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mu(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NOT_NAN"}};if(gu(e.value))return{unaryFilter:{field:qu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(e.field),op:Ed(e.op),value:e.value}}}(i):i instanceof be?function(e){const t=e.getFilters().map(s=>Hf(s));return 1===t.length?t[0]:{compositeFilter:{op:$f(e.op),filters:t}}}(i):Zt()}function Gy(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Du{constructor(e,t,s,a,c=mn.min(),f=mn.min(),D=wi.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=D,this.expectedCount=N}withSequenceNumber(e){return new Du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ch{constructor(e){this.fe=e}}function bg(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yd(a=i.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:ml(a,c.version.toTimestamp()),createTime:ml(a,c.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:yl(e.version)};else{if(!e.isUnknownDocument())return Zt();s.unknownDocument={path:t.path.toArray(),version:yl(e.version)}}var a,c;return s}function Nc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function yl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vl(i){const e=new Rr(i.seconds,i.nanoseconds);return mn.fromTimestamp(e)}function va(i,e){const t=(e.baseMutations||[]).map(c=>Dh(i.fe,c));for(let c=0;c<e.mutations.length-1;++c){const f=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(f.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const s=e.mutations.map(c=>Dh(i.fe,c)),a=Rr.fromMillis(e.localWriteTimeMs);return new gh(e.batchId,a,t,s)}function wd(i){const e=vl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?vl(i.lastLimboFreeSnapshotVersion):mn.min();let s;var a;return void 0!==i.query.documents?(an(1===(a=i.query).documents.length),s=I(Hu(vd(a.documents[0])))):s=I(Cg(i.query)),new Du(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,wi.fromBase64String(i.resumeToken))}function bh(i,e){const t=yl(e.snapshotVersion),s=yl(e.lastLimboFreeSnapshotVersion);let a;a=$u(e.target)?Dg(i.fe,e.target):jf(i.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Na(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function kc(i){const e=Cg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?J(e,e.limit,"L"):e}function zf(i,e){return new yh(e.largestBatchId,Dh(i.fe,e.overlayMutation))}function Th(i,e){const t=e.path.lastSegment();return[i,v(e.path.popLast()),t]}function Id(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:yl(s.readTime),documentKey:v(s.documentKey.path),largestBatchId:s.largestBatchId}}class Zl{getBundleMetadata(e,t){return Wf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:vl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(s=t).id,createTime:yl(Gi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Ah(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:kc(a.bundledQuery),readTime:vl(a.readTime)};var a})}saveNamedQuery(e,t){return Ah(e).put({name:(s=t).name,readTime:yl(Gi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Wf(i){return Hi(i,"bundles")}function Ah(i){return Hi(i,"namedQueries")}class Sh{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sh(e,t.uid||"")}getOverlay(e,t){return Dd(e).get(Th(this.userId,t)).next(s=>s?zf(this.serializer,s):null)}getOverlays(e,t){const s=ea();return je.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,f)=>{const D=new yh(t,f);a.push(this.we(e,D))}),je.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(f=>a.add(v(f.getCollectionPath())));const c=[];return a.forEach(f=>{const D=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,s+1],!1,!0);c.push(Dd(e).J("collectionPathOverlayIndex",D))}),je.waitFor(c)}getOverlaysForCollection(e,t,s){const a=ea(),c=v(t),f=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Dd(e).j("collectionPathOverlayIndex",f).next(D=>{for(const N of D){const U=zf(this.serializer,N);a.set(U.getKey(),U)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=ea();let f;const D=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dd(e).X({index:"collectionGroupOverlayIndex",range:D},(N,U,Q)=>{const me=zf(this.serializer,U);c.size()<a||me.largestBatchId===f?(c.set(me.getKey(),me),f=me.largestBatchId):Q.done()}).next(()=>c)}we(e,t){return Dd(e).put(function(s,a,c){const[f,D,N]=Th(a,c.mutation.key);return{userId:a,collectionPath:D,documentId:N,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kl(s.fe,c.mutation)}}(this.serializer,this.userId,t))}}function Dd(i){return Hi(i,"documentOverlays")}class _l{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ui(e.integerValue));else if("doubleValue"in e){const s=ui(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),Yo(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(xa(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?td(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Zt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),zt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Fc(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Tg(i){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=Fc(255&t[a]);if(s+=c,8!==c)break}return s}(i);return Math.ceil(e/8)}_l.Ve=new _l;class zy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Tg(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class Wy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Ky{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yl{constructor(){this.je=new zy,this.ze=new Wy(this.je),this.We=new Ky(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ql{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ql(this.indexId,this.documentKey,this.arrayValue,s)}}function Zu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ag(i.arrayValue,e.arrayValue),0!==t?t:(t=Ag(i.directionalValue,e.directionalValue),0!==t?t:zt.comparator(i.documentKey,e.documentKey)))}function Ag(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Sg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){an(e.collectionGroup===this.collectionId);const t=ba(e);if(void 0!==t&&!this.en(t))return!1;const s=mo(e);let a=new Set,c=0,f=0;for(;c<s.length&&this.en(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const D=s[c];if(!this.nn(this.Ze,D)||!this.sn(this.Ye[f++],D))return!1}++c}for(;c<s.length;++c){const D=s[c];if(f>=this.Ye.length||!this.sn(this.Ye[f++],D))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qy(i){var e,t;if(an(i instanceof ge||i instanceof be),i instanceof ge){if(i instanceof vu){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>ge.create(i.field,"==",c)))||[];return be.create(a,"or")}return i}const s=i.filters.map(a=>qy(a));return be.create(s,i.op)}function Zy(i){if(0===i.getFilters().length)return[];const e=ec(qy(i));return an(Xl(e)),Jl(e)||Kf(e)?[e]:e.getFilters()}function Jl(i){return i instanceof ge}function Kf(i){return i instanceof be&&Gt(i)}function Xl(i){return Jl(i)||Kf(i)||function(e){if(e instanceof be&&Kt(e)){for(const t of e.getFilters())if(!Jl(t)&&!Kf(t))return!1;return!0}return!1}(i)}function ec(i){if(an(i instanceof ge||i instanceof be),i instanceof ge)return i;if(1===i.filters.length)return ec(i.filters[0]);const e=i.filters.map(s=>ec(s));let t=be.create(e,i.op);return t=Cd(t),Xl(t)?t:(an(t instanceof be),an(it(t)),an(t.filters.length>1),t.filters.reduce((s,a)=>qf(s,a)))}function qf(i,e){let t;return an(i instanceof ge||i instanceof be),an(e instanceof ge||e instanceof be),t=i instanceof ge?e instanceof ge?be.create([i,e],"and"):Yy(i,e):e instanceof ge?Yy(e,i):function(s,a){if(an(s.filters.length>0&&a.filters.length>0),it(s)&&it(a))return hs(s,a.getFilters());const c=Kt(s)?s:a,f=Kt(s)?a:s,D=c.filters.map(N=>qf(N,f));return be.create(D,"or")}(i,e),Cd(t)}function Yy(i,e){if(it(e))return hs(e,i.getFilters());{const t=e.filters.map(s=>qf(i,s));return be.create(t,"or")}}function Cd(i){if(an(i instanceof ge||i instanceof be),i instanceof ge)return i;const e=i.getFilters();if(1===e.length)return Cd(e[0]);if(yn(i))return i;const t=e.map(a=>Cd(a)),s=[];return t.forEach(a=>{a instanceof ge?s.push(a):a instanceof be&&(a.op===i.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:be.create(s,i.op)}class Qy{constructor(){this.rn=new Zf}addToCollectionParentIndex(e,t){return this.rn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(Es.min())}updateCollectionGroup(e,t,s){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class Zf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new ai(In.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new ai(In.comparator)).toArray()}}const Mh=new Uint8Array(0);class Mg{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Zf,this.un=new Bs(s=>Na(s),(s,a)=>dl(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:s,parent:v(a)};return Yf(e).put(c)}return je.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[$a(t),""],!1,!0);return Yf(e).j(a).next(c=>{for(const f of c){if(f.collectionId!==t)break;s.push(T(f.parent))}return s})}addFieldIndex(e,t){const s=Lc(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var f;delete a.indexId;const c=s.add(a);if(t.indexState){const f=bd(e);return c.next(D=>{f.put(Id(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Lc(e),a=bd(e),c=tc(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=tc(e);let a=!0;const c=new Map;return je.forEach(this.cn(t),f=>this.an(e,f).next(D=>{a&&(a=!!D),c.set(f,D)})).next(()=>{if(a){let f=tr();const D=[];return je.forEach(c,(N,U)=>{var Q;_t("IndexedDbIndexManager",`Using index ${Q=N,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(Dr=>`${Dr.fieldPath}:${Dr.kind}`).join(",")}`} to execute ${Na(t)}`);const me=function(Dr,Hs){const Ss=ba(Hs);if(void 0===Ss)return null;for(const Ti of hl(Dr,Ss.fieldPath))switch(Ti.op){case"array-contains-any":return Ti.value.arrayValue.values||[];case"array-contains":return[Ti.value]}return null}(U,N),Be=function(Dr,Hs){const Ss=new Map;for(const Ti of mo(Hs))for(const Lo of hl(Dr,Ti.fieldPath))switch(Lo.op){case"==":case"in":Ss.set(Ti.fieldPath.canonicalString(),Lo.value);break;case"not-in":case"!=":return Ss.set(Ti.fieldPath.canonicalString(),Lo.value),Array.from(Ss.values())}return null}(U,N),at=function(Dr,Hs){const Ss=[];let Ti=!0;for(const Lo of mo(Hs)){const Mu=0===Lo.kind?lh(Dr,Lo.fieldPath,Dr.startAt):sd(Dr,Lo.fieldPath,Dr.startAt);Ss.push(Mu.value),Ti&&(Ti=Mu.inclusive)}return new ns(Ss,Ti)}(U,N),Vt=function(Dr,Hs){const Ss=[];let Ti=!0;for(const Lo of mo(Hs)){const Mu=0===Lo.kind?sd(Dr,Lo.fieldPath,Dr.endAt):lh(Dr,Lo.fieldPath,Dr.endAt);Ss.push(Mu.value),Ti&&(Ti=Mu.inclusive)}return new ns(Ss,Ti)}(U,N),sn=this.hn(N,U,at),un=this.hn(N,U,Vt),cr=this.ln(N,U,Be),Br=this.fn(N.indexId,me,sn,at.inclusive,un,Vt.inclusive,cr);return je.forEach(Br,Dr=>s.H(Dr,t.limit).next(Hs=>{Hs.forEach(Ss=>{const Ti=zt.fromSegments(Ss.documentKey);f.has(Ti)||(f=f.add(Ti),D.push(Ti))})}))}).next(()=>D)}return je.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Zy(be.create(e.filters,"and")).map(s=>jl(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,c,f,D){const N=(null!=t?t.length:1)*Math.max(s.length,c.length),U=N/(null!=t?t.length:1),Q=[];for(let me=0;me<N;++me){const Be=t?this.dn(t[me/U]):Mh,at=this.wn(e,Be,s[me%U],a),Vt=this._n(e,Be,c[me%U],f),sn=D.map(un=>this.wn(e,Be,un,!0));Q.push(...this.createRange(at,Vt,sn))}return Q}wn(e,t,s,a){const c=new Ql(e,zt.empty(),t,s);return a?c:c.Je()}_n(e,t,s,a){const c=new Ql(e,zt.empty(),t,s);return a?c.Je():c}an(e,t){const s=new Sg(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let f=null;for(const D of c)s.tn(D)&&(!f||D.fields.length>f.fields.length)&&(f=D);return f})}getIndexType(e,t){let s=2;const a=this.cn(t);return je.forEach(a,c=>this.an(e,c).next(f=>{f?0!==s&&f.fields.length<function(D){let N=new ai(er.comparator),U=!1;for(const Q of D.filters)for(const me of Q.getFlattenedFilters())me.field.isKeyField()||("array-contains"===me.op||"array-contains-any"===me.op?U=!0:N=N.add(me.field));for(const Q of D.orderBy)Q.field.isKeyField()||(N=N.add(Q.field));return N.size+(U?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Yl;for(const a of mo(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const f=s.He(a.kind);_l.Ve._e(c,f)}return s.Qe()}dn(e){const t=new Yl;return _l.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Yl;return _l.Ve._e(Pa(this.databaseId,t),s.He(function(a){const c=mo(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Yl);let c=0;for(const f of mo(e)){const D=s[c++];for(const N of a)if(this.yn(t,f.fieldPath)&&ul(D))a=this.pn(a,f,D);else{const U=N.He(f.kind);_l.Ve._e(D,U)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],c=[];for(const f of s.arrayValue.values||[])for(const D of a){const N=new Yl;N.seed(D.Qe()),_l.Ve._e(f,N.He(t.kind)),c.push(N)}return c}yn(e,t){return!!e.filters.find(s=>s instanceof ge&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Lc(e),a=bd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(c=>{const f=[];return je.forEach(c,D=>a.get([D.indexId,this.uid]).next(N=>{f.push(function(U,Q){const me=Q?new Ta(Q.sequenceNumber,new Es(vl(Q.readTime),new zt(T(Q.documentKey)),Q.largestBatchId)):Ta.empty(),Be=U.fields.map(([at,Vt])=>new Ga(er.fromServerFormat(at),Vt));return new $i(U.indexId,U.collectionGroup,Be,me)}(D,N))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Rn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Lc(e),c=bd(e);return this.Tn(e).next(f=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>je.forEach(D,N=>c.put(Id(N.indexId,this.user,f,s)))))}updateIndexEntries(e,t){const s=new Map;return je.forEach(t,(a,c)=>{const f=s.get(a.collectionGroup);return(f?je.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(D=>(s.set(a.collectionGroup,D),je.forEach(D,N=>this.En(e,a,N).next(U=>{const Q=this.An(c,N);return U.isEqual(Q)?je.resolve():this.vn(e,c,N,U,Q)}))))})}Rn(e,t,s,a){return tc(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return tc(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=tc(e);let c=new ai(Zu);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(f,D)=>{c=c.add(new Ql(s.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>c)}An(e,t){let s=new ai(Zu);const a=this.mn(t,e);if(null==a)return s;const c=ba(t);if(null!=c){const f=e.data.field(c.fieldPath);if(ul(f))for(const D of f.arrayValue.values||[])s=s.add(new Ql(t.indexId,e.key,this.dn(D),a))}else s=s.add(new Ql(t.indexId,e.key,Mh,a));return s}vn(e,t,s,a,c){_t("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(D,N,U,Q,me){const Be=D.getIterator(),at=N.getIterator();let Vt=Oo(Be),sn=Oo(at);for(;Vt||sn;){let un=!1,cr=!1;if(Vt&&sn){const Br=U(Vt,sn);Br<0?cr=!0:Br>0&&(un=!0)}else null!=Vt?cr=!0:un=!0;un?(Q(sn),sn=Oo(at)):cr?(me(Vt),Vt=Oo(Be)):(Vt=Oo(Be),sn=Oo(at))}}(a,c,Zu,D=>{f.push(this.Rn(e,t,s,D))},D=>{f.push(this.Pn(e,t,s,D))}),je.waitFor(f)}Tn(e){let t=1;return bd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((f,D)=>Zu(f,D)).filter((f,D,N)=>!D||0!==Zu(f,N[D-1]));const a=[];a.push(e);for(const f of s){const D=Zu(f,e),N=Zu(f,t);if(0===D)a[0]=e.Je();else if(D>0&&N<0)a.push(f),a.push(f.Je());else if(N>0)break}a.push(t);const c=[];for(let f=0;f<a.length;f+=2){if(this.bn(a[f],a[f+1]))return[];c.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,Mh,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,Mh,[]]))}return c}bn(e,t){return Zu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return je.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||Zt())).next(xh)}}function Yf(i){return Hi(i,"collectionParents")}function tc(i){return Hi(i,"indexEntries")}function Lc(i){return Hi(i,"indexConfiguration")}function bd(i){return Hi(i,"indexState")}function xh(i){an(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const a=i[s].indexState.offset;su(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Es(e.readTime,e.documentKey,t)}const Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wo{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new wo(e,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),a=i.store("documentMutations"),c=[],f=IDBKeyRange.only(t.batchId);let D=0;const N=s.X({range:f},(Q,me,Be)=>(D++,Be.delete()));c.push(N.next(()=>{an(1===D)}));const U=[];for(const Q of t.mutations){const me=ce(e,Q.key.path,t.batchId);c.push(a.delete(me)),U.push(Q.key)}return je.waitFor(c).next(()=>U)}function Rh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Zt();e=i.noDocument}return JSON.stringify(e).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);class Ph{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){an(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Ph(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return El(e).X({index:"userMutationsIndex",range:s},(a,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Uc(e),f=El(e);return f.add({}).next(D=>{an("number"==typeof D);const N=new gh(D,t,s,a),U=function(Be,at,Vt){const sn=Vt.baseMutations.map(cr=>Kl(Be.fe,cr)),un=Vt.mutations.map(cr=>Kl(Be.fe,cr));return{userId:at,batchId:Vt.batchId,localWriteTimeMs:Vt.localWriteTime.toMillis(),baseMutations:sn,mutations:un}}(this.serializer,this.userId,N),Q=[];let me=new ai((Be,at)=>Rn(Be.canonicalString(),at.canonicalString()));for(const Be of a){const at=ce(this.userId,Be.key.path,D);me=me.add(Be.key.path.popLast()),Q.push(f.put(U)),Q.push(c.put(at,pe))}return me.forEach(Be=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Be))}),e.addOnCommittedListener(()=>{this.Vn[D]=N.keys()}),je.waitFor(Q).next(()=>N)})}lookupMutationBatch(e,t){return El(e).get(t).next(s=>s?(an(s.userId===this.userId),va(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?je.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return El(e).X({index:"userMutationsIndex",range:a},(f,D,N)=>{D.userId===this.userId&&(an(D.batchId>=s),c=va(this.serializer,D)),N.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return El(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,f)=>{s=c.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return El(e).j("userMutationsIndex",t).next(s=>s.map(a=>va(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=z(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Uc(e).X({range:a},(f,D,N)=>{const[U,Q,me]=f,Be=T(Q);if(U===this.userId&&t.path.isEqual(Be))return El(e).get(me).next(at=>{if(!at)throw Zt();an(at.userId===this.userId),c.push(va(this.serializer,at))});N.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ai(Rn);const a=[];return t.forEach(c=>{const f=z(this.userId,c.path),D=IDBKeyRange.lowerBound(f),N=Uc(e).X({range:D},(U,Q,me)=>{const[Be,at,Vt]=U,sn=T(at);Be===this.userId&&c.path.isEqual(sn)?s=s.add(Vt):me.done()});a.push(N)}),je.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=z(this.userId,s),f=IDBKeyRange.lowerBound(c);let D=new ai(Rn);return Uc(e).X({range:f},(N,U,Q)=>{const[me,Be,at]=N,Vt=T(Be);me===this.userId&&s.isPrefixOf(Vt)?Vt.length===a&&(D=D.add(at)):Q.done()}).next(()=>this.Dn(e,D))}Dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(El(e).get(c).next(f=>{if(null===f)throw Zt();an(f.userId===this.userId),s.push(va(this.serializer,f))}))}),je.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return xg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),je.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return je.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Uc(e).X({range:s},(c,f,D)=>{if(c[0]===this.userId){const N=T(c[1]);a.push(N)}else D.done()}).next(()=>{an(0===a.length)})})}containsKey(e,t){return Rg(e,this.userId,t)}xn(e){return nc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rg(i,e,t){const s=z(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let f=!1;return Uc(i).X({range:c,Y:!0},(D,N,U)=>{const[Q,me,Be]=D;Q===e&&me===a&&(f=!0),U.done()}).next(()=>f)}function El(i){return Hi(i,"mutations")}function Uc(i){return Hi(i,"documentMutations")}function nc(i){return Hi(i,"mutationQueues")}class No{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new No(0)}static Mn(){return new No(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new No(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>mn.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(an(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Bc(e).X((f,D)=>{const N=wd(D);N.sequenceNumber<=t&&null===s.get(N.targetId)&&(a++,c.push(this.removeTargetData(e,N)))}).next(()=>je.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Bc(e).X((s,a)=>{const c=wd(a);t(c)})}$n(e){return Xy(e).get("targetGlobalKey").next(t=>(an(null!==t),t))}On(e,t){return Xy(e).put("targetGlobalKey",t)}Fn(e,t){return Bc(e).put(bh(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Na(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Bc(e).X({range:a,index:"queryTargetsIndex"},(f,D,N)=>{const U=wd(D);dl(t,U.target)&&(c=U,N.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=rc(e);return t.forEach(f=>{const D=v(f.path);a.push(c.put({targetId:s,path:D})),a.push(this.referenceDelegate.addReference(e,s,f))}),je.waitFor(a)}removeMatchingKeys(e,t,s){const a=rc(e);return je.forEach(t,c=>{const f=v(c.path);return je.waitFor([a.delete([s,f]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=rc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=rc(e);let c=tr();return a.X({range:s,Y:!0},(f,D,N)=>{const U=T(f[1]),Q=new zt(U);c=c.add(Q)}).next(()=>c)}containsKey(e,t){const s=v(t.path),a=IDBKeyRange.bound([s],[$a(s)],!1,!0);let c=0;return rc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([f,D],N,U)=>{0!==f&&(c++,U.done())}).next(()=>c>0)}le(e,t){return Bc(e).get(t).next(s=>s?wd(s):null)}}function Bc(i){return Hi(i,"targets")}function Xy(i){return Hi(i,"targetGlobal")}function rc(i){return Hi(i,"targetDocuments")}function Qf([i,e],[t,s]){const a=Rn(i,t);return 0===a?Rn(e,s):a}class Y_{constructor(e){this.Ln=e,this.buffer=new ai(Qf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jf{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;_t("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,p.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Ni(s)?_t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield da(s)}yield t.Qn(3e5)}))}}class Q_{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return je.resolve(ds.ct);const s=new Y_(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(Vc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vc):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,c,f,D,N,U;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(me=>(me>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${me}`),a=this.params.maximumSequenceNumbersToCollect):a=me,f=Date.now(),this.nthSequenceNumber(e,a))).next(me=>(s=me,D=Date.now(),this.removeTargets(e,s,t))).next(me=>(c=me,N=Date.now(),this.removeOrphanedDocuments(e,s))).next(me=>(U=Date.now(),si()<=le.in.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-Q}ms\n\tDetermined least recently used ${a} in `+(D-f)+`ms\n\tRemoved ${c} targets in `+(N-D)+`ms\n\tRemoved ${me} documents in `+(U-N)+`ms\nTotal Duration: ${U-Q}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:me})))}}class ev{constructor(e,t){this.db=e,this.garbageCollector=function Xf(i,e){return new Q_(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return Td(e,s)}removeReference(e,t,s){return Td(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Td(e,t)}Xn(e,t){return function(s,a){let c=!1;return nc(s).Z(f=>Rg(s,f,a).next(D=>(D&&(c=!0),je.resolve(!D)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(f,D)=>{if(D<=t){const N=this.Xn(e,f).next(U=>{if(!U)return c++,s.getEntry(e,f).next(()=>(s.removeEntry(f,mn.min()),rc(e).delete([0,v(f.path)])))});a.push(N)}}).next(()=>je.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Td(e,t)}Yn(e,t){const s=rc(e);let a,c=ds.ct;return s.X({index:"documentTargetsIndex"},([f,D],{path:N,sequenceNumber:U})=>{0===f?(c!==ds.ct&&t(new zt(T(a)),c),c=U,a=N):c=ds.ct}).next(()=>{c!==ds.ct&&t(new zt(T(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return rc(i).put((s=i.currentSequenceNumber,{targetId:0,path:v(e.path),sequenceNumber:s}));var s}class Pg{constructor(){this.changes=new Bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?je.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ic(e).put(s)}removeEntry(e,t,s){return ic(e).delete(function(a,c){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Nc(c),f[f.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=Jr.newInvalidDocument(t);return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s=this.ts(t,c)}).next(()=>s)}es(e,t){let s={size:0,document:Jr.newInvalidDocument(t)};return ic(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ad(t))},(a,c)=>{s={document:this.ts(t,c),size:Rh(c)}}).next(()=>s)}getEntries(e,t){let s=Cs();return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);s=s.insert(a,f)}).next(()=>s)}ss(e,t){let s=Cs(),a=new Ir(zt.comparator);return this.ns(e,t,(c,f)=>{const D=this.ts(c,f);s=s.insert(c,D),a=a.insert(c,Rh(f))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return je.resolve();let a=new ai(Ng);t.forEach(N=>a=a.add(N));const c=IDBKeyRange.bound(Ad(a.first()),Ad(a.last())),f=a.getIterator();let D=f.getNext();return ic(e).X({index:"documentKeyIndex",range:c},(N,U,Q)=>{const me=zt.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;D&&Ng(D,me)<0;)s(D,null),D=f.getNext();D&&D.isEqual(me)&&(s(D,U),D=f.hasNext()?f.getNext():null),D?Q.G(Ad(D)):Q.done()}).next(()=>{for(;D;)s(D,null),D=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Nc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],D=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ic(e).j(IDBKeyRange.bound(f,D,!0)).next(N=>{let U=Cs();for(const Q of N){const me=this.ts(zt.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);me.isFoundDocument()&&(Xt(t,me)||a.has(me.key))&&(U=U.insert(me.key,me))}return U})}getAllFromCollectionGroup(e,t,s,a){let c=Cs();const f=Og(t,s),D=Og(t,Es.max());return ic(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,D,!0)},(N,U,Q)=>{const me=this.ts(zt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);c=c.insert(me.key,me),c.size===a&&Q.done()}).next(()=>c)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ep(e).get("remoteDocumentGlobalKey").next(t=>(an(!!t),t))}Zn(e,t){return ep(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function Z_(i,e){let t;if(e.document)t=rs(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=zt.fromSegments(e.noDocument.path),a=vl(e.noDocument.readTime);t=Jr.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Zt();{const s=zt.fromSegments(e.unknownDocument.path),a=vl(e.unknownDocument.version);t=Jr.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Rr(s[0],s[1]);return mn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(mn.min()))return s}return Jr.newInvalidDocument(e)}}function ka(i){return new tv(i)}class nv extends Pg{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Bs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new ai((c,f)=>Rn(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const D=this.us.get(c);if(t.push(this.os.removeEntry(e,c,D.readTime)),f.isValidDocument()){const N=bg(this.os.serializer,f);a=a.add(c.path.popLast()),s+=Rh(N)-D.size,t.push(this.os.addEntry(e,c,N))}else if(s-=D.size,this.trackRemovals){const N=bg(this.os.serializer,f.convertToNoDocument(mn.min()));t.push(this.os.addEntry(e,c,N))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,s)),je.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((c,f)=>{this.us.set(c,{size:f,readTime:s.get(c).readTime})}),s))}}function ep(i){return Hi(i,"remoteDocumentGlobal")}function ic(i){return Hi(i,"remoteDocumentsV14")}function Ad(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Og(i,e){const t=e.documentKey.path.toArray();return[i,Nc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ng(i,e){const t=i.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=Rn(t[c],s[c]),a)return a;return a=Rn(t.length,s.length),a||(a=Rn(t[t.length-2],s[s.length-2]),a||Rn(t[t.length-1],s[s.length-1]))}class kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fg{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&dd(s.mutation,a,es.empty(),Rr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,tr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=tr()){const a=ea();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let f=_u();return c.forEach((D,N)=>{f=f.insert(D,N.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=ea();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,tr()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,D)=>{t.set(f,D)})})}computeViews(e,t,s,a){let c=Cs();const f=Gu(),D=Gu();return t.forEach((N,U)=>{const Q=s.get(U.key);a.has(U.key)&&(void 0===Q||Q.mutation instanceof Ya)?c=c.insert(U.key,U):void 0!==Q?(f.set(U.key,Q.mutation.getFieldMask()),dd(Q.mutation,U,Q.mutation.getFieldMask(),Rr.now())):f.set(U.key,es.empty())}),this.recalculateAndSaveOverlays(e,c).next(N=>(N.forEach((U,Q)=>f.set(U,Q)),t.forEach((U,Q)=>{var me;return D.set(U,new kg(Q,null!==(me=f.get(U))&&void 0!==me?me:null))}),D))}recalculateAndSaveOverlays(e,t){const s=Gu();let a=new Ir((f,D)=>f-D),c=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const D of f)D.keys().forEach(N=>{const U=t.get(N);if(null===U)return;let Q=s.get(N)||es.empty();Q=D.applyToLocalView(U,Q),s.set(N,Q);const me=(a.get(D.batchId)||tr()).add(N);a=a.insert(D.batchId,me)})}).next(()=>{const f=[],D=a.getReverseIterator();for(;D.hasNext();){const N=D.getNext(),U=N.key,Q=N.value,me=Sc();Q.forEach(Be=>{if(!c.has(Be)){const at=fh(t.get(Be),s.get(Be));null!==at&&me.set(Be,at),c=c.add(Be)}}),f.push(this.documentOverlayCache.saveOverlays(e,U,me))}return je.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return zt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):je.resolve(ea());let D=-1,N=c;return f.next(U=>je.forEach(U,(Q,me)=>(D<me.largestBatchId&&(D=me.largestBatchId),c.get(Q)?je.resolve():this.remoteDocumentCache.getEntry(e,Q).next(Be=>{N=N.insert(Q,Be)}))).next(()=>this.populateOverlays(e,U,c)).next(()=>this.computeViews(e,N,U,tr())).next(Q=>({batchId:D,changes:od(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zt(t)).next(s=>{let a=_u();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let c=_u();return this.indexManager.getCollectionParents(e,a).next(f=>je.forEach(f,D=>{const N=(U=t,Q=D.child(a),new qa(Q,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,Q;return this.getDocumentsMatchingCollectionQuery(e,N,s).next(U=>{U.forEach((Q,me)=>{c=c.insert(Q,me)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(c=>{a.forEach((D,N)=>{const U=N.getKey();null===c.get(U)&&(c=c.insert(U,Jr.newInvalidDocument(U)))});let f=_u();return c.forEach((D,N)=>{const U=a.get(D);void 0!==U&&dd(U.mutation,N,es.empty(),Rr.now()),Xt(t,N)&&(f=f.insert(D,N))}),f})}}class rv{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return je.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Gi(s.createTime)}),je.resolve()}getNamedQuery(e,t){return je.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:kc(s.bundledQuery),readTime:Gi(s.readTime)}),je.resolve();var s}}class iv{constructor(){this.overlays=new Ir(zt.comparator),this.ls=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ea();return je.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.we(e,t,c)}),je.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(s)),je.resolve()}getOverlaysForCollection(e,t,s){const a=ea(),c=t.length+1,f=new zt(t.child("")),D=this.overlays.getIteratorFrom(f);for(;D.hasNext();){const N=D.getNext().value,U=N.getKey();if(!t.isPrefixOf(U.path))break;U.path.length===c&&N.largestBatchId>s&&a.set(N.getKey(),N)}return je.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Ir((U,Q)=>U-Q);const f=this.overlays.getIterator();for(;f.hasNext();){const U=f.getNext().value;if(U.getKey().getCollectionGroup()===t&&U.largestBatchId>s){let Q=c.get(U.largestBatchId);null===Q&&(Q=ea(),c=c.insert(U.largestBatchId,Q)),Q.set(U.getKey(),U)}}const D=ea(),N=c.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((U,Q)=>D.set(U,Q)),!(D.size()>=a)););return je.resolve(D)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const f=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new yh(t,s));let c=this.ls.get(t);void 0===c&&(c=tr(),this.ls.set(t,c)),this.ls.set(t,c.add(s.key))}}class Qn{constructor(){this.fs=new ai(bs.ds),this.ws=new ai(bs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new bs(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new bs(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new zt(new In([])),s=new bs(t,e),a=new bs(t,e+1),c=[];return this.ws.forEachInRange([s,a],f=>{this.ys(f),c.push(f.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new zt(new In([])),s=new bs(t,e),a=new bs(t,e+1);let c=tr();return this.ws.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new bs(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class bs{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return zt.comparator(e.key,t.key)||Rn(e.As,t.As)}static _s(e,t){return Rn(e.As,t.As)||zt.comparator(e.key,t.key)}}class Lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ai(bs.ds)}checkEmpty(e){return je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.vs;this.vs++;const f=new gh(c,t,s,a);this.mutationQueue.push(f);for(const D of a)this.Rs=this.Rs.add(new bs(D.key,c)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return je.resolve(f)}lookupMutationBatch(e,t){return je.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return je.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new bs(t,0),a=new bs(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([s,a],f=>{const D=this.Ps(f.As);c.push(D)}),je.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ai(Rn);return t.forEach(a=>{const c=new bs(a,0),f=new bs(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,f],D=>{s=s.add(D.As)})}),je.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;zt.isDocumentKey(c)||(c=c.child(""));const f=new bs(new zt(c),0);let D=new ai(Rn);return this.Rs.forEachWhile(N=>{const U=N.key.path;return!!s.isPrefixOf(U)&&(U.length===a&&(D=D.add(N.As)),!0)},f),je.resolve(this.Vs(D))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){an(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return je.forEach(t.mutations,a=>{const c=new bs(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new bs(t,0),a=this.Rs.firstAfterOrEqual(s);return je.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return je.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vg{constructor(e){this.Ds=e,this.docs=new Ir(zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,f=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return je.resolve(s?s.document.mutableCopy():Jr.newInvalidDocument(t))}getEntries(e,t){let s=Cs();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Jr.newInvalidDocument(a))}),je.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Cs();const f=t.path,D=new zt(f.child("")),N=this.docs.getIteratorFrom(D);for(;N.hasNext();){const{key:U,value:{document:Q}}=N.getNext();if(!f.isPrefixOf(U.path))break;U.path.length>f.length+1||su(Ou(Q),s)<=0||(a.has(Q.key)||Xt(t,Q))&&(c=c.insert(Q.key,Q.mutableCopy()))}return je.resolve(c)}getAllFromCollectionGroup(e,t,s,a){Zt()}Cs(e,t){return je.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new sv(this)}getSize(e){return je.resolve(this.size)}}class sv extends Pg{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),je.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ov{constructor(e){this.persistence=e,this.xs=new Bs(t=>Na(t),dl),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Qn,this.targetCount=0,this.Ms=No.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),je.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new No(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.Fn(t),je.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.xs.forEach((f,D)=>{D.sequenceNumber<=t&&null===s.get(D.targetId)&&(this.xs.delete(f),c.push(this.removeMatchingKeysForTargetId(e,D.targetId)),a++)}),je.waitFor(c).next(()=>a)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return je.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),je.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),je.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),je.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return je.resolve(s)}containsKey(e,t){return je.resolve(this.ks.containsKey(t))}}class Oh{constructor(e,t){this.$s={},this.overlays={},this.Os=new ds(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ov(this),this.indexManager=new Qy,this.remoteDocumentCache=new Vg(s=>this.referenceDelegate.Ls(s)),this.serializer=new Ch(t),this.qs=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new Lg(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){_t("MemoryPersistence","Starting transaction:",e);const a=new av(this.Os.next());return this.referenceDelegate.Us(),s(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return je.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class av extends il{constructor(e){super(),this.currentSequenceNumber=e}}class Sd{constructor(e){this.persistence=e,this.Qs=new Qn,this.js=null}static zs(e){return new Sd(e)}get Ws(){if(this.js)return this.js;throw Zt()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),je.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),je.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Ws,s=>{const a=zt.fromPath(s);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,mn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return je.or([()=>je.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class uv{constructor(e){this.serializer=e}O(e,t,s,a){const c=new ha("createOrUpgrade",t);var D;s<1&&a>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O,{unique:!0}),D.createObjectStore("documentMutations"),lv(e),function(D){D.createObjectStore("remoteDocuments")}(e));let f=je.resolve();return s<3&&a>=3&&(0!==s&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),lv(e)),f=f.next(()=>function(D){const N=D.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return N.put("targetGlobalKey",U)}(c))),s<4&&a>=4&&(0!==s&&(f=f.next(()=>function(D,N){return N.store("mutations").j().next(U=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O,{unique:!0});const Q=N.store("mutations"),me=U.map(Be=>Q.put(Be));return je.waitFor(me)})}(e,c))),f=f.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(f=f.next(()=>this.Ys(c))),s<6&&a>=6&&(f=f.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),s<7&&a>=7&&(f=f.next(()=>this.Zs(c))),s<8&&a>=8&&(f=f.next(()=>this.ti(e,c))),s<9&&a>=9&&(f=f.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(f=f.next(()=>this.ei(c))),s<11&&a>=11&&(f=f.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(f=f.next(()=>{!function(D){const N=D.createObjectStore("documentOverlays",{keyPath:uu});N.createIndex("collectionPathOverlayIndex",lu,{unique:!1}),N.createIndex("collectionGroupOverlayIndex",Ds,{unique:!1})}(e)})),s<13&&a>=13&&(f=f.next(()=>function(D){const N=D.createObjectStore("remoteDocumentsV14",{keyPath:et});N.createIndex("documentKeyIndex",$t),N.createIndex("collectionGroupIndex",jn)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(f=f.next(()=>this.si(e,c))),s<15&&a>=15&&(f=f.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Ei}).createIndex("sequenceNumberIndex",Us,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Fu}).createIndex("documentKeyIndex",yo,{unique:!1})}(e))),f}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Rh(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>je.forEach(a,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",f).next(D=>je.forEach(D,N=>{an(N.userId===c.userId);const U=va(this.serializer,N);return xg(e,c.userId,U).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.X((f,D)=>{const N=new In(f),U=[0,v(N)];c.push(t.get(U).next(Q=>Q?je.resolve():t.put({targetId:0,path:v(N),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>je.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Is});const s=t.store("collectionParents"),a=new Zf,c=f=>{if(a.add(f)){const D=f.lastSegment(),N=f.popLast();return s.put({collectionId:D,parent:v(N)})}};return t.store("remoteDocuments").X({Y:!0},(f,D)=>{const N=new In(f);return c(N.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([f,D,N],U)=>{const Q=T(D);return c(Q.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const c=wd(a),f=bh(this.serializer,c);return t.put(f)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((c,f)=>{const D=t.store("remoteDocumentsV14"),N=(U=f,U.document?new zt(In.fromString(U.document.name).popFirst(5)):U.noDocument?zt.fromSegments(U.noDocument.path):U.unknownDocument?zt.fromSegments(U.unknownDocument.path):Zt()).path.toArray();var U;const Q={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(D.put(Q))}).next(()=>je.waitFor(a))}si(e,t){const s=t.store("mutations"),a=ka(this.serializer),c=new Oh(Sd.zs,this.serializer.fe);return s.j().next(f=>{const D=new Map;return f.forEach(N=>{var U;let Q=null!==(U=D.get(N.userId))&&void 0!==U?U:tr();va(this.serializer,N).keys().forEach(me=>Q=Q.add(me)),D.set(N.userId,Q)}),je.forEach(D,(N,U)=>{const Q=new vn(U),me=Sh.de(this.serializer,Q),Be=c.getIndexManager(Q),at=Ph.de(Q,this.serializer,Be,c.referenceDelegate);return new Fg(a,at,me,Be).recalculateAndSaveOverlaysForDocumentKeys(new fa(t,ds.ct),N).next()})})}}function lv(i){i.createObjectStore("targetDocuments",{keyPath:Vr}).createIndex("documentTargetsIndex",Wr,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jt,{unique:!0}),i.createObjectStore("targetGlobal")}const kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,t,s,a,c,f,D,N,U,Q,me=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=c,this.window=f,this.document=D,this.ri=U,this.oi=Q,this.ui=me,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Be=>Promise.resolve(),!Fh.D())throw new bt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,a),this.di=t+"main",this.serializer=new Ch(N),this.wi=new Xi(this.di,this.ui,new uv(this.serializer)),this.Bs=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ka(this.serializer),this.qs=new Zl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Q&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new bt(We.FAILED_PRECONDITION,kh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ds(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,p.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,p.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,p.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ni(e))return _t("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Qa(e).get("owner").next(t=>je.resolve(this.Ri(t)))}Pi(e){return Lh(e).delete(this.clientId)}bi(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Hi(s,"clientMetadata");return a.j().next(c=>{const f=e.Si(c,18e5),D=c.filter(N=>-1===f.indexOf(N));return je.forEach(D,N=>a.delete(N.clientId)).next(()=>D)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?je.resolve(!0):Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new bt(We.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,D=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&_t("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,p.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new fa(t,ds.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Ph.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mg(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sh.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){_t("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(f=this.ui)?sl:14===f?Fl:13===f?Lu:12===f?ki:11===f?cu:void Zt();var f;let D;return this.wi.runTransaction(e,a,c,N=>(D=new fa(N,this.Os?this.Os.next():ds.ct),"readwrite-primary"===t?this.Ti(D).next(U=>!!U||this.Ei(D)).next(U=>{if(!U)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new bt(We.FAILED_PRECONDITION,za);return s(D)}).next(U=>this.vi(D).next(()=>U)):this.Oi(D).next(()=>s(D)))).then(N=>(D.raiseOnCommittedEvent(),N))}Oi(e){return Qa(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new bt(We.FAILED_PRECONDITION,kh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static D(){return Xi.D()}Ai(e){const t=Qa(e);return t.get("owner").next(s=>this.Ri(s)?(_t("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):je.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(wr(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,he.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return _t("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return wr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qa(i){return Hi(i,"owner")}function Lh(i){return Hi(i,"clientMetadata")}function Md(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class xd{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=tr(),a=tr();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xd(e,t.fromCache,s,a)}}class Ug{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,s)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(ch(t))return je.resolve(null);let s=I(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=J(t,null,"F"),s=I(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=tr(...c);return this.Ui.getDocuments(e,f).next(D=>this.indexManager.getMinOffset(e,s).next(N=>{const U=this.ji(t,D);return this.zi(t,U,f,N.readTime)?this.Ki(e,J(t,null,"F")):this.Wi(e,U,t,N)}))})))}Gi(e,t,s,a){return ch(t)||a.isEqual(mn.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(c=>{const f=this.ji(t,c);return this.zi(t,f,s,a)?this.Qi(e,t):(si()<=le.in.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ut(t)),this.Wi(e,f,t,iu(a,-1)))})}ji(e,t){let s=new ai(pr(e));return t.forEach((a,c)=>{Xt(e,c)&&(s=s.add(c))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return si()<=le.in.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Ut(t)),this.Ui.getDocumentsMatchingQuery(e,t,Es.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(f=>{c=c.insert(f.key,f)}),c))}}class J_{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Ir(Rn),this.Yi=new Bs(c=>Na(c),dl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function cv(i,e,t,s){return new J_(i,e,t,s)}function dv(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,p.Z)(function*(i,e){const t=Wt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],D=[];let N=tr();for(const U of a){f.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}for(const U of c){D.push(U.batchId);for(const Q of U.mutations)N=N.add(Q.key)}return t.localDocuments.getDocuments(s,N).next(U=>({er:U,removedBatchIds:f,addedBatchIds:D}))})})}),tp.apply(this,arguments)}function Bg(i,e){const t=Wt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(f,D,N,U){const Q=N.batch,me=Q.keys();let Be=je.resolve();return me.forEach(at=>{Be=Be.next(()=>U.getEntry(D,at)).next(Vt=>{const sn=N.docVersions.get(at);an(null!==sn),Vt.version.compareTo(sn)<0&&(Q.applyToRemoteDocument(Vt,N),Vt.isValidDocument()&&(Vt.setReadTime(N.commitVersion),U.addEntry(Vt)))})}),Be.next(()=>f.mutationQueue.removeMutationBatch(D,Q))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let D=tr();for(let N=0;N<f.mutationResults.length;++N)f.mutationResults[N].transformResults.length>0&&(D=D.add(f.batch.mutations[N].key));return D}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function hv(i){const e=Wt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function fv(i,e){const t=Wt(i),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const D=[];e.targetChanges.forEach((Q,me)=>{const Be=a.get(me);if(!Be)return;D.push(t.Bs.removeMatchingKeys(c,Q.removedDocuments,me).next(()=>t.Bs.addMatchingKeys(c,Q.addedDocuments,me)));let at=Be.withSequenceNumber(c.currentSequenceNumber);var Vt,sn,un;null!==e.targetMismatches.get(me)?at=at.withResumeToken(wi.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):Q.resumeToken.approximateByteSize()>0&&(at=at.withResumeToken(Q.resumeToken,s)),a=a.insert(me,at),sn=at,un=Q,(0===(Vt=Be).resumeToken.approximateByteSize()||sn.snapshotVersion.toMicroseconds()-Vt.snapshotVersion.toMicroseconds()>=3e8||un.addedDocuments.size+un.modifiedDocuments.size+un.removedDocuments.size>0)&&D.push(t.Bs.updateTargetData(c,at))});let N=Cs(),U=tr();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(c,Q))}),D.push(sc(c,f,e.documentUpdates).next(Q=>{N=Q.nr,U=Q.sr})),!s.isEqual(mn.min())){const Q=t.Bs.getLastRemoteSnapshotVersion(c).next(me=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,s));D.push(Q)}return je.waitFor(D).next(()=>f.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,N,U)).next(()=>N)}).then(c=>(t.Ji=a,c))}function sc(i,e,t){let s=tr(),a=tr();return t.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Cs();return t.forEach((D,N)=>{const U=c.get(D);N.isFoundDocument()!==U.isFoundDocument()&&(a=a.add(D)),N.isNoDocument()&&N.version.isEqual(mn.min())?(e.removeEntry(D,N.readTime),f=f.insert(D,N)):!U.isValidDocument()||N.version.compareTo(U.version)>0||0===N.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(N),f=f.insert(D,N)):_t("LocalStore","Ignoring outdated watch update for ",D,". Current version:",U.version," Watch version:",N.version)}),{nr:f,sr:a}})}function pv(i,e){const t=Wt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oc(i,e){const t=Wt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(c=>c?(a=c,je.resolve(a)):t.Bs.allocateTargetId(s).next(f=>(a=new Du(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Yu(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,p.Z)(function*(i,e,t){const s=Wt(i),a=s.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Ni(f))throw f;_t("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),np.apply(this,arguments)}function Rd(i,e,t){const s=Wt(i);let a=mn.min(),c=tr();return s.persistence.runTransaction("Execute query","readonly",f=>function(D,N,U){const Q=Wt(D),me=Q.Yi.get(U);return void 0!==me?je.resolve(Q.Ji.get(me)):Q.Bs.getTargetData(N,U)}(s,f,I(e)).next(D=>{if(D)return a=D.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(f,D.targetId).next(N=>{c=N})}).next(()=>s.Hi.getDocumentsMatchingQuery(f,e,t?a:mn.min(),t?c:tr())).next(D=>(Hg(s,bn(e),D),{documents:D,ir:c})))}function jg(i,e){const t=Wt(i),s=Wt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.le(c,e).next(f=>f?f.target:null))}function $g(i,e){const t=Wt(i),s=t.Xi.get(e)||mn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,iu(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hg(t,e,a),a))}function Hg(i,e,t){let s=i.Xi.get(e)||mn.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Xi.set(e,s)}function rp(){return rp=(0,p.Z)(function*(i,e,t,s){const a=Wt(i);let c=tr(),f=Cs();for(const U of t){const Q=e.rr(U.metadata.name);U.document&&(c=c.add(Q));const me=e.ur(U);me.setReadTime(e.cr(U.metadata.readTime)),f=f.insert(Q,me)}const D=a.Zi.newChangeBuffer({trackRemovals:!0}),N=yield oc(a,(U=s,I(Hu(In.fromString(`__bundle__/docs/${U}`)))));var U;return a.persistence.runTransaction("Apply bundle documents","readwrite",U=>sc(U,D,f).next(Q=>(D.apply(U),Q)).next(Q=>a.Bs.removeMatchingKeysForTargetId(U,N.targetId).next(()=>a.Bs.addMatchingKeys(U,c,N.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(U,Q.nr,Q.sr)).next(()=>Q.nr)))}),rp.apply(this,arguments)}function Gg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,p.Z)(function*(i,e,t=tr()){const s=yield oc(i,I(kc(e.bundledQuery))),a=Wt(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const f=Gi(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return a.qs.saveNamedQuery(c,e);const D=s.withResumeToken(wi.EMPTY_BYTE_STRING,f);return a.Ji=a.Ji.insert(D.targetId,D),a.Bs.updateTargetData(c,D).next(()=>a.Bs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,s.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),ip.apply(this,arguments)}function sp(i,e){return`firestore_clients_${i}_${e}`}function op(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Pd(i,e){return`firestore_targets_${i}_${e}`}class ap{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let c,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(c=new bt(a.error.code,a.error.message))),f?new ap(e,t,a.state,c):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new bt(s.error.code,s.error.message))),c?new ac(e,s.state,a):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=dh();for(let f=0;a&&f<s.activeTargetIds.length;++f)a=ws(s.activeTargetIds[f]),c=c.add(s.activeTargetIds[f]);return a?new Vh(e,c):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zg(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wl{constructor(){this.activeTargetIds=dh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,s,a,c){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ir(Rn),this.started=!1,this.yr=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=sp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wl),this.Tr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(sp(e.persistenceKey,a));if(c){const f=Vh.ar(a,c);f&&(e.gr=e.gr.insert(f.clientId,f))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Pd(this.persistenceKey,e));if(s){const a=ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pd(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _t("SharedClientState","READ",e,t),t}setItem(e,t){_t("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_t("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(_t("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,p.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(c){let f=ds.ct;if(null!=c)try{const D=JSON.parse(c);an("number"==typeof D),f=D}catch(D){wr("SharedClientState","Failed to read sequence number from WebStorage",D)}return f}(s.newValue);a!==ds.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new ap(this.currentUser,e,t,s),c=op(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=op(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Pd(this.persistenceKey,e),c=new ac(e,t,s);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Vh.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return ap.ar(new vn(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return ac.ar(a,t)}br(e){return zg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,p.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);_t("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(s),f=[],D=[];return c.forEach(N=>{a.has(N)||f.push(N)}),a.forEach(N=>{c.has(N)||D.push(N)}),this.syncEngine.Wr(f,D).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class up{constructor(){this.Hr=new wl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wl,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bh{Yr(e){}shutdown(){}}class Fa{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){_t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){_t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Od=null;function lp(){return null===Od?Od=268435456+Math.round(2147483648*Math.random()):Od++,"0x"+Od.toString(16)}const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qu{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const js="WebChannelConnection";class Wg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,c){const f=lp(),D=this.To(e,t);_t("RestConnection",`Sending RPC '${e}' ${f}:`,D,s);const N={};return this.Eo(N,a,c),this.Ao(e,D,N,s).then(U=>(_t("RestConnection",`Received RPC '${e}' ${f}: `,U),U),U=>{throw xr("RestConnection",`RPC '${e}' ${f} failed with error: `,U,"url: ",D,"request:",s),U})}vo(e,t,s,a,c,f){return this.Io(e,t,s,a,c)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${cp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const c=lp();return new Promise((f,D)=>{const N=new pn;N.setWithCredentials(!0),N.listenOnce(x.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case V.NO_ERROR:const Q=N.getResponseJson();_t(js,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(Q)),f(Q);break;case V.TIMEOUT:_t(js,`RPC '${e}' ${c} timed out`),D(new bt(We.DEADLINE_EXCEEDED,"Request time out"));break;case V.HTTP_ERROR:const me=N.getStatus();if(_t(js,`RPC '${e}' ${c} failed with status:`,me,"response text:",N.getResponseText()),me>0){let Be=N.getResponseJson();Array.isArray(Be)&&(Be=Be[0]);const at=Be?.error;if(at&&at.status&&at.message){const Vt=function(sn){const un=sn.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(un)>=0?un:We.UNKNOWN}(at.status);D(new bt(Vt,at.message))}else D(new bt(We.UNKNOWN,"Server responded with status "+N.getStatus()))}else D(new bt(We.UNAVAILABLE,"Connection failed."));break;default:Zt()}}finally{_t(js,`RPC '${e}' ${c} completed.`)}});const U=JSON.stringify(a);_t(js,`RPC '${e}' ${c} sending request:`,a),N.send(t,"POST",U,s,15)})}Ro(e,t,s){const a=lp(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ru(),D=b(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;void 0!==U&&(N.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(N.xmlHttpFactory=new Je({})),this.Eo(N.initMessageHeaders,t,s),N.encodeInitMessageHeaders=!0;const Q=c.join("");_t(js,`Creating RPC '${e}' stream ${a}: ${Q}`,N);const me=f.createWebChannel(Q,N);let Be=!1,at=!1;const Vt=new Qu({ro:un=>{at?_t(js,`Not sending because RPC '${e}' stream ${a} is closed:`,un):(Be||(_t(js,`Opening RPC '${e}' stream ${a} transport.`),me.open(),Be=!0),_t(js,`RPC '${e}' stream ${a} sending:`,un),me.send(un))},oo:()=>me.close()}),sn=(un,cr,Br)=>{un.listen(cr,Dr=>{try{Br(Dr)}catch(Hs){setTimeout(()=>{throw Hs},0)}})};return sn(me,dt.EventType.OPEN,()=>{at||_t(js,`RPC '${e}' stream ${a} transport opened.`)}),sn(me,dt.EventType.CLOSE,()=>{at||(at=!0,_t(js,`RPC '${e}' stream ${a} transport closed`),Vt.wo())}),sn(me,dt.EventType.ERROR,un=>{at||(at=!0,xr(js,`RPC '${e}' stream ${a} transport errored:`,un),Vt.wo(new bt(We.UNAVAILABLE,"The operation could not be completed")))}),sn(me,dt.EventType.MESSAGE,un=>{var cr;if(!at){const Br=un.data[0];an(!!Br);const Dr=Br,Hs=Dr.error||(null===(cr=Dr[0])||void 0===cr?void 0:cr.error);if(Hs){_t(js,`RPC '${e}' stream ${a} received error:`,Hs);const Ss=Hs.status;let Ti=function(Mu){const vy=fs[Mu];if(void 0!==vy)return Ku(vy)}(Ss),Lo=Hs.message;void 0===Ti&&(Ti=We.INTERNAL,Lo="Unknown error status: "+Ss+" with message "+Hs.message),at=!0,Vt.wo(new bt(Ti,Lo)),me.close()}else _t(js,`RPC '${e}' stream ${a} received:`,Br),Vt._o(Br)}}),sn(D,W.STAT_EVENT,un=>{un.stat===ve.PROXY?_t(js,`RPC '${e}' stream ${a} detected buffering proxy`):un.stat===ve.NOPROXY&&_t(js,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Vt.fo()},0),Vt}}function jh(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function jc(i){return new W_(i,!0)}class Kg{constructor(e,t,s=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&_t("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Nd{constructor(e,t,s,a,c,f,D,N){this.ii=e,this.$o=s,this.Oo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=D,this.listener=N,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Kg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,p.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,p.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,p.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===We.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new bt(We.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,p.Z)(function*(){e.state=0,e.start()}))}tu(e){return _t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(_t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Nd{constructor(e,t,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function By(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(N=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===N?1:"REMOVE"===N?2:"CURRENT"===N?3:"RESET"===N?4:Zt(),a=e.targetChange.targetIds||[],c=function(N,U){return N.useProto3Json?(an(void 0===U||"string"==typeof U),wi.fromBase64String(U||"")):(an(void 0===U||U instanceof Uint8Array),wi.fromUint8Array(U||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,D=f&&function(N){const U=void 0===N.code?We.UNKNOWN:Ku(N.code);return new bt(U,N.message||"")}(f);t=new Eh(s,a,c,D||null)}else if("documentChange"in e){const s=e.documentChange,a=Iu(i,s.document.name),c=Gi(s.document.updateTime),f=s.document.createTime?Gi(s.document.createTime):mn.min(),D=new ts({mapValue:{fields:s.document.fields}}),N=Jr.newFoundDocument(a,c,f,D);t=new _h(s.targetIds||[],s.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const s=e.documentDelete,a=Iu(i,s.document),c=s.readTime?Gi(s.readTime):mn.min(),f=Jr.newNoDocument(a,c);t=new _h([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,a=Iu(i,s.document);t=new _h([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Zt();{const s=e.filter,{count:a=0,unchangedNames:c}=s,f=new Ny(a,c);t=new _g(s.targetId,f)}}var N;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return mn.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?mn.min():c.readTime?Gi(c.readTime):mn.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(a,c){let f;const D=c.target;if(f=$u(D)?{documents:Dg(a,D)}:{query:jf(a,D)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Vy(a,c.resumeToken);const N=md(a,c.expectedCount);null!==N&&(f.expectedCount=N)}else if(c.snapshotVersion.compareTo(mn.min())>0){f.readTime=ml(a,c.snapshotVersion.toTimestamp());const N=md(a,c.expectedCount);null!==N&&(f.expectedCount=N)}return f}(this.serializer,e);const s=function $y(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class hp extends Nd{constructor(e,t,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(an(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jy(i,e){return i&&i.length>0?(an(void 0!==e),i.map(t=>function(s,a){let c=Gi(s.updateTime?s.updateTime:a);return c.isEqual(mn.min())&&(c=Gi(a)),new xy(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Gi(e.commitTime);return this.listener.cu(s,t)}return an(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Kl(this.serializer,s))};this.Wo(t)}}class fp extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new bt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new bt(We.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.vo(e,t,s,c,f,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new bt(We.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class mv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(wr(t),this.mu=!1):_t("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class yv{constructor(e,t,s,a,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(D=>{s.enqueueAndForget((0,p.Z)(function*(){var N;lc(f)&&(_t("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,p.Z)(function*(U){const Q=Wt(U);Q.vu.add(4),yield uc(Q),Q.bu.set("Unknown"),Q.vu.delete(4),yield kd(Q)}),function(U){return N.apply(this,arguments)})(f))}))}),this.bu=new mv(s,a)}}function kd(i){return gp.apply(this,arguments)}function gp(){return gp=(0,p.Z)(function*(i){if(lc(i))for(const e of i.Ru)yield e(!0)}),gp.apply(this,arguments)}function uc(i){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,p.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Zg.apply(this,arguments)}function Hh(i,e){const t=Wt(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Fd(t)?yp(t):bl(t).Ko()&&zh(t,e))}function Gh(i,e){const t=Wt(i),s=bl(t);t.Au.delete(e),s.Ko()&&mp(t,e),0===t.Au.size&&(s.Ko()?s.jo():lc(t)&&t.bu.set("Unknown"))}function zh(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(i).su(e)}function mp(i,e){i.Vu.qt(e),bl(i).iu(e)}function yp(i){i.Vu=new gd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),bl(i).start(),i.bu.gu()}function Fd(i){return lc(i)&&!bl(i).Uo()&&i.Au.size>0}function lc(i){return 0===Wt(i).vu.size}function vv(i){i.Vu=void 0}function X_(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,p.Z)(function*(i){i.Au.forEach((e,t)=>{zh(i,e)})}),Yg.apply(this,arguments)}function e0(i,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,p.Z)(function*(i,e){vv(i),Fd(i)?(i.bu.Iu(e),yp(i)):i.bu.set("Unknown")}),Qg.apply(this,arguments)}function t0(i,e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,p.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Eh&&2===e.state&&e.cause)try{yield(s=(0,p.Z)(function*(a,c){const f=c.cause;for(const D of c.targetIds)a.Au.has(D)&&(yield a.remoteSyncer.rejectListen(D,f),a.Au.delete(D),a.Vu.removeTarget(D))}),function(a,c){return s.apply(this,arguments)})(i,e)}catch(s){_t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield vp(i,s)}else if(e instanceof _h?i.Vu.Ht(e):e instanceof _g?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(mn.min()))try{const s=yield hv(i.localStore);t.compareTo(s)>=0&&(yield function(a,c){const f=a.Vu.ce(c);return f.targetChanges.forEach((D,N)=>{if(D.resumeToken.approximateByteSize()>0){const U=a.Au.get(N);U&&a.Au.set(N,U.withResumeToken(D.resumeToken,c))}}),f.targetMismatches.forEach((D,N)=>{const U=a.Au.get(D);if(!U)return;a.Au.set(D,U.withResumeToken(wi.EMPTY_BYTE_STRING,U.snapshotVersion)),mp(a,D);const Q=new Du(U.target,D,N,U.sequenceNumber);zh(a,Q)}),a.remoteSyncer.applyRemoteEvent(f)}(i,t))}catch(s){_t("RemoteStore","Failed to raise snapshot:",s),yield vp(i,s)}var s}),Jg.apply(this,arguments)}function vp(i,e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,p.Z)(function*(i,e,t){if(!Ni(e))throw e;i.vu.add(1),yield uc(i),i.bu.set("Offline"),t||(t=()=>hv(i.localStore)),i.asyncQueue.enqueueRetryable((0,p.Z)(function*(){_t("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield kd(i)}))}),Xg.apply(this,arguments)}function Ju(i,e){return e().catch(t=>vp(i,t,e))}function Il(i){return _p.apply(this,arguments)}function _p(){return _p=(0,p.Z)(function*(i){const e=Wt(i),t=Ja(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;em(e);)try{const a=yield pv(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,Ep(e,a)}catch(a){yield vp(e,a)}wp(e)&&Wh(e)}),_p.apply(this,arguments)}function em(i){return lc(i)&&i.Eu.length<10}function Ep(i,e){i.Eu.push(e);const t=Ja(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function wp(i){return lc(i)&&!Ja(i).Uo()&&i.Eu.length>0}function Wh(i){Ja(i).start()}function _v(i){return Cu.apply(this,arguments)}function Cu(){return Cu=(0,p.Z)(function*(i){Ja(i).hu()}),Cu.apply(this,arguments)}function tm(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,p.Z)(function*(i){const e=Ja(i);for(const t of i.Eu)e.uu(t.mutations)}),Ip.apply(this,arguments)}function Ev(i,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,p.Z)(function*(i,e,t){const s=i.Eu.shift(),a=mh.from(s,e,t);yield Ju(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield Il(i)}),Kh.apply(this,arguments)}function wv(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,p.Z)(function*(i,e){var t;e&&Ja(i).ou&&(yield(t=(0,p.Z)(function*(s,a){if(yg(c=a.code)&&c!==We.ABORTED){const f=s.Eu.shift();Ja(s).Qo(),yield Ju(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield Il(s)}var c}),function(s,a){return t.apply(this,arguments)})(i,e)),wp(i)&&Wh(i)}),Dp.apply(this,arguments)}function Ld(i,e){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,p.Z)(function*(i,e){const t=Wt(i);t.asyncQueue.verifyOperationInProgress(),_t("RemoteStore","RemoteStore received new credentials");const s=lc(t);t.vu.add(3),yield uc(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kd(t)}),Dl.apply(this,arguments)}function Vd(i,e){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,p.Z)(function*(i,e){const t=Wt(i);e?(t.vu.delete(2),yield kd(t)):e||(t.vu.add(2),yield uc(t),t.bu.set("Unknown"))}),Cl.apply(this,arguments)}function bl(i){return i.Su||(i.Su=function(e,t,s){const a=Wt(e);return a.fu(),new $h(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:X_.bind(null,i),ao:e0.bind(null,i),nu:t0.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(t){t?(i.Su.Qo(),Fd(i)?yp(i):i.bu.set("Unknown")):(yield i.Su.stop(),vv(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Ja(i){return i.Du||(i.Du=function(e,t,s){const a=Wt(e);return a.fu(),new hp(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{uo:_v.bind(null,i),ao:wv.bind(null,i),au:tm.bind(null,i),cu:Ev.bind(null,i)}),i.Ru.push(function(){var e=(0,p.Z)(function*(t){t?(i.Du.Qo(),yield Il(i)):(yield i.Du.stop(),i.Eu.length>0&&(_t("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class qh{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,a,c){const f=Date.now()+s,D=new qh(e,t,f,a,c);return D.start(s),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(i,e){if(wr("AsyncQueue",`${e}: ${i}`),Ni(i))return new bt(We.UNAVAILABLE,`${e}: ${i}`);throw i}class Tl{constructor(e){this.comparator=e?(t,s)=>e(t,s)||zt.comparator(t.key,s.key):(t,s)=>zt.comparator(t.key,s.key),this.keyedMap=_u(),this.sortedSet=new Ir(this.comparator)}static emptySet(e){return new Tl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Tl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Zh{constructor(){this.Cu=new Ir(zt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Zt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class dc{constructor(e,t,s,a,c,f,D,N,U){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=D,this.excludesMetadataChanges=N,this.hasCachedResults=U}static fromInitialDocuments(e,t,s,a,c){const f=[];return t.forEach(D=>{f.push({type:0,doc:D})}),new dc(e,t,Tl.emptySet(t),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Cp{constructor(){this.Nu=void 0,this.listeners=[]}}class Iv{constructor(){this.queries=new Bs(e=>tt(e),xe),this.onlineState="Unknown",this.ku=new Set}}function nm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,p.Z)(function*(i,e){const t=Wt(i),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Cp),a)try{c.Nu=yield t.onListen(s)}catch(f){const D=cc(f,`Initialization of query '${Ut(e.query)}' failed`);return void e.onError(D)}t.queries.set(s,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&Ap(t)}),bp.apply(this,arguments)}function Yh(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,p.Z)(function*(i,e){const t=Wt(i),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Tp.apply(this,arguments)}function rm(i,e){const t=Wt(i);let s=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const D of f.listeners)D.$u(a)&&(s=!0);f.Nu=a}}s&&Ap(t)}function im(i,e,t){const s=Wt(i),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function Ap(i){i.ku.forEach(e=>{e.next()})}class ko{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class om{constructor(e){this.serializer=e}rr(e){return Iu(this.serializer,e)}ur(e){return e.metadata.exists?rs(this.serializer,e.document,!1):Jr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Gi(e)}}class n0{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=am(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=In.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new om(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.rr(a.metadata.name);for(const f of a.metadata.queries){const D=(t.get(f)||tr()).add(c);t.set(f,D)}}return t}complete(){var e=this;return(0,p.Z)(function*(){const t=yield function gv(i,e,t,s){return rp.apply(this,arguments)}(e.localStore,new om(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Gg(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function am(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Qh{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class um{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=tr(),this.mutatedKeys=tr(),this.tc=pr(e),this.ec=new Tl(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new Zh,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,D=!1;const N="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,U="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((Q,me)=>{const Be=a.get(Q),at=Xt(this.query,me)?me:null,Vt=!!Be&&this.mutatedKeys.has(Be.key),sn=!!at&&(at.hasLocalMutations||this.mutatedKeys.has(at.key)&&at.hasCommittedMutations);let un=!1;Be&&at?Be.data.isEqual(at.data)?Vt!==sn&&(s.track({type:3,doc:at}),un=!0):this.rc(Be,at)||(s.track({type:2,doc:at}),un=!0,(N&&this.tc(at,N)>0||U&&this.tc(at,U)<0)&&(D=!0)):!Be&&at?(s.track({type:0,doc:at}),un=!0):Be&&!at&&(s.track({type:1,doc:Be}),un=!0,(N||U)&&(D=!0)),un&&(at?(f=f.add(at),c=sn?c.add(Q):c.delete(Q)):(f=f.delete(Q),c=c.delete(Q)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const Q="F"===this.query.limitType?f.last():f.first();f=f.delete(Q.key),c=c.delete(Q.key),s.track({type:1,doc:Q})}return{ec:f,ic:s,zi:D,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((U,Q)=>function(me,Be){const at=Vt=>{switch(Vt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zt()}};return at(me)-at(Be)}(U.type,Q.type)||this.tc(U.doc,Q.doc)),this.oc(s);const f=t?this.uc():[],D=0===this.Zu.size&&this.current?1:0,N=D!==this.Xu;return this.Xu=D,0!==c.length||N?{snapshot:new dc(this.query,e.ec,a,c,e.mutatedKeys,0===D,N,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:f}:{cc:f}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Zh,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=tr(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Sp(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Qh(s))}),t}hc(e){this.Yu=e.ir,this.Zu=tr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Dv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Cv{constructor(e){this.key=e,this.fc=!1}}class lm{constructor(e,t,s,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.dc={},this.wc=new Bs(D=>tt(D),xe),this._c=new Map,this.mc=new Set,this.gc=new Ir(zt.comparator),this.yc=new Map,this.Ic=new Qn,this.Tc={},this.Ec=new Map,this.Ac=No.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function bv(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,p.Z)(function*(i,e){const t=uf(i);let s,a;const c=t.wc.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.lc();else{const f=yield oc(t.localStore,I(e)),D=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,a=yield Mp(t,e,s,"current"===D,f.resumeToken),t.isPrimaryClient&&Hh(t.remoteStore,f)}return a}),Jh.apply(this,arguments)}function Mp(i,e,t,s,a){return xp.apply(this,arguments)}function xp(){return xp=(0,p.Z)(function*(i,e,t,s,a){i.Rc=(me,Be,at)=>{return(Vt=(0,p.Z)(function*(sn,un,cr,Br){let Dr=un.view.sc(cr);Dr.zi&&(Dr=yield Rd(sn.localStore,un.query,!1).then(({documents:Ti})=>un.view.sc(Ti,Dr)));const Hs=Br&&Br.targetChanges.get(un.targetId),Ss=un.view.applyChanges(Dr,sn.isPrimaryClient,Hs);return jd(sn,un.targetId,Ss.cc),Ss.snapshot}),function(sn,un,cr,Br){return Vt.apply(this,arguments)})(i,me,Be,at);var Vt};const c=yield Rd(i.localStore,e,!0),f=new um(e,c.ir),D=f.sc(c.documents),N=pd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,a),U=f.applyChanges(D,i.isPrimaryClient,N);jd(i,t,U.cc);const Q=new Dv(e,t,f);return i.wc.set(e,Q),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),U.snapshot}),xp.apply(this,arguments)}function cm(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,p.Z)(function*(i,e){const t=Wt(i),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(c=>!xe(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Yu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Gh(t.remoteStore,s.targetId),Xu(t,s.targetId)}).catch(da))):(Xu(t,s.targetId),yield Yu(t.localStore,s.targetId,!0))}),Xh.apply(this,arguments)}function La(){return La=(0,p.Z)(function*(i,e,t){const s=Gd(i);try{const a=yield function(c,f){const D=Wt(c),N=Rr.now(),U=f.reduce((Be,at)=>Be.add(at.key),tr());let Q,me;return D.persistence.runTransaction("Locally write mutations","readwrite",Be=>{let at=Cs(),Vt=tr();return D.Zi.getEntries(Be,U).next(sn=>{at=sn,at.forEach((un,cr)=>{cr.isValidDocument()||(Vt=Vt.add(un))})}).next(()=>D.localDocuments.getOverlayedDocuments(Be,at)).next(sn=>{Q=sn;const un=[];for(const cr of f){const Br=Ry(cr,Q.get(cr.key).overlayedDocument);null!=Br&&un.push(new Ya(cr.key,Br,cl(Br.value.mapValue),Ii.exists(!0)))}return D.mutationQueue.addMutationBatch(Be,N,un,f)}).next(sn=>{me=sn;const un=sn.applyToLocalDocumentSet(Q,Vt);return D.documentOverlayCache.saveOverlays(Be,sn.batchId,un)})}).then(()=>({batchId:me.batchId,changes:od(Q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,f,D){let N=c.Tc[c.currentUser.toKey()];N||(N=new Ir(Rn)),N=N.insert(f,D),c.Tc[c.currentUser.toKey()]=N}(s,a.batchId,t),yield bu(s,a.changes),yield Il(s.remoteStore)}catch(a){const c=cc(a,"Failed to persist write");t.reject(c)}}),La.apply(this,arguments)}function ef(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,p.Z)(function*(i,e){const t=Wt(i);try{const s=yield fv(t.localStore,e);e.targetChanges.forEach((a,c)=>{const f=t.yc.get(c);f&&(an(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.fc=!0:a.modifiedDocuments.size>0?an(f.fc):a.removedDocuments.size>0&&(an(f.fc),f.fc=!1))}),yield bu(t,s,e)}catch(s){yield da(s)}}),Rp.apply(this,arguments)}function dm(i,e,t){const s=Wt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((c,f)=>{const D=f.view.Mu(e);D.snapshot&&a.push(D.snapshot)}),function(c,f){const D=Wt(c);D.onlineState=f;let N=!1;D.queries.forEach((U,Q)=>{for(const me of Q.listeners)me.Mu(f)&&(N=!0)}),N&&Ap(D)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function r0(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,p.Z)(function*(i,e,t){const s=Wt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),c=a&&a.key;if(c){let f=new Ir(zt.comparator);f=f.insert(c,Jr.newNoDocument(c,mn.min()));const D=tr().add(c),N=new fd(mn.min(),new Map,new Ir(Rn),f,D);yield ef(s,N),s.gc=s.gc.remove(c),s.yc.delete(e),nf(s)}else yield Yu(s.localStore,e,!1).then(()=>Xu(s,e,t)).catch(da)}),tf.apply(this,arguments)}function Av(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,p.Z)(function*(i,e){const t=Wt(i),s=e.batch.batchId;try{const a=yield Bg(t.localStore,e);Bd(t,s,null),$c(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield bu(t,a)}catch(a){yield da(a)}}),Pp.apply(this,arguments)}function Sv(i,e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,p.Z)(function*(i,e,t){const s=Wt(i);try{const a=yield function(c,f){const D=Wt(c);return D.persistence.runTransaction("Reject batch","readwrite-primary",N=>{let U;return D.mutationQueue.lookupMutationBatch(N,f).next(Q=>(an(null!==Q),U=Q.keys(),D.mutationQueue.removeMutationBatch(N,Q))).next(()=>D.mutationQueue.performConsistencyCheck(N)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(N,U,f)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(N,U)).next(()=>D.localDocuments.getDocuments(N,U))})}(s.localStore,e);Bd(s,e,t),$c(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield bu(s,a)}catch(a){yield da(a)}}),Ud.apply(this,arguments)}function Op(){return Op=(0,p.Z)(function*(i,e){const t=Wt(i);lc(t.remoteStore)||_t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const f=Wt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>f.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=cc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Op.apply(this,arguments)}function $c(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function Bd(i,e,t){const s=Wt(i);let a=s.Tc[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Xu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),t&&i.dc.Pc(s,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||xv(i,s)})}function xv(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Gh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),nf(i))}function jd(i,e,t){for(const s of t)s instanceof Qh?(i.Ic.addReference(s.key,e),s0(i,s)):s instanceof Sp?(_t("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||xv(i,s.key)):Zt()}function s0(i,e){const t=e.key,s=t.path.canonicalString();i.gc.get(t)||i.mc.has(s)||(_t("SyncEngine","New document in limbo: "+t),i.mc.add(s),nf(i))}function nf(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new zt(In.fromString(e)),s=i.Ac.next();i.yc.set(s,new Cv(t)),i.gc=i.gc.insert(t,s),Hh(i.remoteStore,new Du(I(Hu(t.path)),s,"TargetPurposeLimboResolution",ds.ct))}}function bu(i,e,t){return rf.apply(this,arguments)}function rf(){return rf=(0,p.Z)(function*(i,e,t){const s=Wt(i),a=[],c=[],f=[];var D;s.wc.isEmpty()||(s.wc.forEach((D,N)=>{f.push(s.Rc(N,e,t).then(U=>{if((U||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(N.targetId,U?.fromCache?"not-current":"current"),U){a.push(U);const Q=xd.Li(N.targetId,U);c.push(Q)}}))}),yield Promise.all(f),s.dc.nu(a),yield(D=(0,p.Z)(function*(N,U){const Q=Wt(N);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>je.forEach(U,Be=>je.forEach(Be.Fi,at=>Q.persistence.referenceDelegate.addReference(me,Be.targetId,at)).next(()=>je.forEach(Be.Bi,at=>Q.persistence.referenceDelegate.removeReference(me,Be.targetId,at)))))}catch(me){if(!Ni(me))throw me;_t("LocalStore","Failed to update sequence numbers: "+me)}for(const me of U){const Be=me.targetId;if(!me.fromCache){const at=Q.Ji.get(Be),sn=at.withLastLimboFreeSnapshotVersion(at.snapshotVersion);Q.Ji=Q.Ji.insert(Be,sn)}}}),function(N,U){return D.apply(this,arguments)})(s.localStore,c))}),rf.apply(this,arguments)}function hm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,p.Z)(function*(i,e){const t=Wt(i);if(!t.currentUser.isEqual(e)){_t("SyncEngine","User change. New user:",e.toKey());const s=yield dv(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(f=>{f.forEach(D=>{D.reject(new bt(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield bu(t,s.er)}var a}),$d.apply(this,arguments)}function el(i,e){const t=Wt(i),s=t.yc.get(e);if(s&&s.fc)return tr().add(s.key);{let a=tr();const c=t._c.get(e);if(!c)return a;for(const f of c){const D=t.wc.get(f);a=a.unionWith(D.view.nc)}return a}}function sf(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,p.Z)(function*(i,e){const t=Wt(i),s=yield Rd(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&jd(t,e.targetId,a.cc),a}),Hc.apply(this,arguments)}function Hd(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,p.Z)(function*(i,e){const t=Wt(i);return $g(t.localStore,e).then(s=>bu(t,s))}),Np.apply(this,arguments)}function kp(i,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,p.Z)(function*(i,e,t,s){const a=Wt(i),c=yield function(f,D){const N=Wt(f),U=Wt(N.mutationQueue);return N.persistence.runTransaction("Lookup mutation documents","readonly",Q=>U.Sn(Q,D).next(me=>me?N.localDocuments.getDocuments(Q,me):je.resolve(null)))}(a.localStore,e);var D;null!==c?("pending"===t?yield Il(a.remoteStore):"acknowledged"===t||"rejected"===t?(Bd(a,e,s||null),$c(a,e),D=e,Wt(Wt(a.localStore).mutationQueue).Cn(D)):Zt(),yield bu(a,c)):_t("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function Fp(){return Fp=(0,p.Z)(function*(i,e){const t=Wt(i);if(uf(t),Gd(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Gc(t,s.toArray());t.vc=!0,yield Vd(t.remoteStore,!0);for(const c of a)Hh(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):a=a.then(()=>(Xu(t,f),Yu(t.localStore,f,!0))),Gh(t.remoteStore,f)}),yield a,yield Gc(t,s),function(c){const f=Wt(c);f.yc.forEach((D,N)=>{Gh(f.remoteStore,N)}),f.Ic.Ts(),f.yc=new Map,f.gc=new Ir(zt.comparator)}(t),t.vc=!1,yield Vd(t.remoteStore,!1)}}),Fp.apply(this,arguments)}function Gc(i,e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,p.Z)(function*(i,e,t){const s=Wt(i),a=[],c=[];for(const f of e){let D;const N=s._c.get(f);if(N&&0!==N.length){D=yield oc(s.localStore,I(N[0]));for(const U of N){const Q=s.wc.get(U),me=yield sf(s,Q);me.snapshot&&c.push(me.snapshot)}}else{const U=yield jg(s.localStore,f);D=yield oc(s.localStore,U),yield Mp(s,Pv(U),f,!1,D.resumeToken)}a.push(D)}return s.dc.nu(c),a}),Lp.apply(this,arguments)}function Pv(i){return fl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Ov(i){const e=Wt(i);return Wt(Wt(e.localStore).persistence).$i()}function o0(i,e,t,s){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,p.Z)(function*(i,e,t,s){const a=Wt(i);if(a.vc)return void _t("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const f=yield $g(a.localStore,bn(c[0])),D=fd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wi.EMPTY_BYTE_STRING);yield bu(a,f,D);break}case"rejected":yield Yu(a.localStore,e,!0),Xu(a,e,s);break;default:Zt()}}),Vp.apply(this,arguments)}function Nv(i,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,p.Z)(function*(i,e,t){const s=uf(i);if(s.vc){for(const a of e){if(s._c.has(a)){_t("SyncEngine","Adding an already active target "+a);continue}const c=yield jg(s.localStore,a),f=yield oc(s.localStore,c);yield Mp(s,Pv(c),f.targetId,!1,f.resumeToken),Hh(s.remoteStore,f)}for(const a of t)s._c.has(a)&&(yield Yu(s.localStore,a,!1).then(()=>{Gh(s.remoteStore,a),Xu(s,a)}).catch(da))}}),Up.apply(this,arguments)}function uf(i){const e=Wt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=el.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r0.bind(null,e),e.dc.nu=rm.bind(null,e.eventManager),e.dc.Pc=im.bind(null,e.eventManager),e}function Gd(i){const e=Wt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sv.bind(null,e),e}class hc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,p.Z)(function*(){t.serializer=jc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createPersistence(e){return new Oh(Sd.zs,this.serializer)}createSharedClientState(e){return new up}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bp extends hc{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,p.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield Gd(s.Vc.syncEngine),yield Il(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cv(this.persistence,new Ug,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Jf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new kl(t,this.persistence);return new ku(e.asyncQueue,s)}createPersistence(e){const t=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new Fh(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,jh(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new up}}class fm extends Bp{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,p.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Uh&&(s.sharedClientState.syncEngine={jr:kp.bind(null,a),zr:o0.bind(null,a),Wr:Nv.bind(null,a),$i:Ov.bind(null,a),Qr:Hd.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var c=(0,p.Z)(function*(f){yield function Rv(i,e){return Fp.apply(this,arguments)}(s.Vc.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start():f||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(f&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():f||s.indexBackfillerScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jh();if(!Uh.D(t))throw new bt(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Md(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class zc{initialize(e,t){var s=this;return(0,p.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>dm(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=hm.bind(null,s.syncEngine),yield Vd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iv}createDatastore(e){const t=jc(e.databaseInfo.databaseId),s=new Wg(e.databaseInfo);return new fp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=D=>dm(this.syncEngine,D,0),f=Fa.D()?new Fa:new Bh,new yv(t,s,a,c,f);var t,s,a,c,f}createSyncEngine(e,t){return function(s,a,c,f,D,N,U){const Q=new lm(s,a,c,f,D,N);return U&&(Q.vc=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,p.Z)(function*(t){const s=Wt(t);_t("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield uc(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function pm(i,e=10240){let t=0;return{read:()=>(0,p.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new oi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,p.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const c=yield e.$c(a);return new sm(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,p.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,p.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,p.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class fc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,p.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new bt(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,p.Z)(function*(c,f){const D=Wt(c),N=_d(D.serializer)+"/documents",U={documents:f.map(at=>yd(D.serializer,at))},Q=yield D.vo("BatchGetDocuments",N,U,f.length),me=new Map;Q.forEach(at=>{const Vt=function Uy(i,e){return"found"in e?function(t,s){an(!!s.found);const a=Iu(t,s.found.name),c=Gi(s.found.updateTime),f=s.found.createTime?Gi(s.found.createTime):mn.min(),D=new ts({mapValue:{fields:s.found.fields}});return Jr.newFoundDocument(a,c,f,D)}(i,e):"missing"in e?function(t,s){an(!!s.missing),an(!!s.readTime);const a=Iu(t,s.missing),c=Gi(s.readTime);return Jr.newNoDocument(a,c)}(i,e):Zt()}(D.serializer,at);me.set(Vt.key.toString(),Vt)});const Be=[];return f.forEach(at=>{const Vt=me.get(at.toString());an(!!Vt),Be.push(Vt)}),Be}),function(c,f){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=zt.fromPath(a);e.mutations.push(new ph(c,e.precondition(c)))}),yield(s=(0,p.Z)(function*(a,c){const f=Wt(a),D=_d(f.serializer)+"/documents",N={writes:c.map(U=>Kl(f.serializer,U))};yield f.Io("Commit",D,N)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zt();t=mn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new bt(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mn.min())?Ii.exists(!1):Ii.updateTime(t):Ii.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mn.min()))throw new bt(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ii.updateTime(t)}return Ii.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a0{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.Bc=s.maxAttempts,this.qo=new Kg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,p.Z)(function*(){const t=new fc(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Sa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yg(t)}return!1}}class zd{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=vn.UNAUTHENTICATED,this.clientId=or.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var f=(0,p.Z)(function*(D){_t("FirestoreClient","Received user=",D.uid),yield c.authCredentialListener(D),c.user=D});return function(D){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(s,f=>(_t("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=cc(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),_t("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,p.Z)(function*(c){s.isEqual(c)||(yield dv(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jp.apply(this,arguments)}function Wd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield pc(i);_t("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(a=>Ld(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,c)=>Ld(e.remoteStore,c)),i._onlineComponents=e}),$p.apply(this,arguments)}function Xa(i){return"FirebaseError"===i.name?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function pc(i){return $s.apply(this,arguments)}function $s(){return $s=(0,p.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_t("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Xa(t))throw t;xr("Error using user provided cache. Falling back to memory cache: "+t),yield df(i,new hc)}}else _t("FirestoreClient","Using default OfflineComponentProvider"),yield df(i,new hc);return i._offlineComponents}),$s.apply(this,arguments)}function Tu(i){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,p.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_t("FirestoreClient","Using user provided OnlineComponentProvider"),yield Wd(i,i._uninitializedComponentsProvider._online)):(_t("FirestoreClient","Using default OnlineComponentProvider"),yield Wd(i,new zc))),i._onlineComponents}),Wc.apply(this,arguments)}function _a(i){return pc(i).then(e=>e.persistence)}function Kc(i){return pc(i).then(e=>e.localStore)}function gc(i){return Tu(i).then(e=>e.remoteStore)}function Al(i){return Tu(i).then(e=>e.syncEngine)}function eu(i){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,p.Z)(function*(i){const e=yield Tu(i),t=e.eventManager;return t.onListen=bv.bind(null,e.syncEngine),t.onUnlisten=cm.bind(null,e.syncEngine),t}),Sl.apply(this,arguments)}function yc(i,e,t={}){const s=new oi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(a,c,f,D,N){const U=new lf({next:me=>{c.enqueueAndForget(()=>Yh(a,Q));const Be=me.docs.has(f);!Be&&me.fromCache?N.reject(new bt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):Be&&me.fromCache&&D&&"server"===D.source?N.reject(new bt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):N.resolve(me)},error:me=>N.reject(me)}),Q=new ko(Hu(f.path),U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Hp(i,e,t={}){const s=new oi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(a,c,f,D,N){const U=new lf({next:me=>{c.enqueueAndForget(()=>Yh(a,Q)),me.fromCache&&"server"===D.source?N.reject(new bt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):N.resolve(me)},error:me=>N.reject(me)}),Q=new ko(f,U,{includeMetadataChanges:!0,Ku:!0});return nm(a,Q)}(yield eu(i),i.asyncQueue,e,t,s)})),s.promise}function Gp(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const zp=new Map;function hf(i,e,t){if(!t)throw new bt(We.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Em(i,e,t,s){if(!0===e&&!0===s)throw new bt(We.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wm(i){if(!zt.isDocumentKey(i))throw new bt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wp(i){if(zt.isDocumentKey(i))throw new bt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Zt()}function Pr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new bt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new bt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function pf(i,e){if(e<=0)throw new bt(We.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class gf{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new bt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Em("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Gp(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new bt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new bt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new bt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ru;switch(t.type){case"firstParty":return new la(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new bt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zp.get(e);t&&(_t("ComponentProvider","Removing Datastore"),zp.delete(e),t.terminate())}(this),Promise.resolve()}}function qd(i,e,t,s={}){var a;const c=(i=Pr(i,Kd))._getSettings(),f=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==f&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let D,N;if("string"==typeof s.mockUserToken)D=s.mockUserToken,N=vn.MOCK_USER;else{D=(0,he.Sg)(s.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new bt(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new vn(U)}i._authCredentials=new Pu(new Ua(D,N))}}class Di{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Di(this.firestore,e,this._key)}}class Ts{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Au extends Ts{constructor(e,t,s){super(e,t,Hu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Di(this.firestore,null,new zt(e))}withConverter(e){return new Au(this.firestore,e,this._path)}}function Kp(i,e,...t){if(i=(0,he.m9)(i),hf("collection","path",e),i instanceof Kd){const s=In.fromString(e,...t);return Wp(s),new Au(i,null,s)}{if(!(i instanceof Di||i instanceof Au))throw new bt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(In.fromString(e,...t));return Wp(s),new Au(i.firestore,null,s)}}function qp(i,e){if(i=Pr(i,Kd),hf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bt(We.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ts(i,null,(t=e,new qa(In.emptyPath(),t)));var t}function Zp(i,e,...t){if(i=(0,he.m9)(i),1===arguments.length&&(e=or.A()),hf("doc","path",e),i instanceof Kd){const s=In.fromString(e,...t);return wm(s),new Di(i,null,new zt(s))}{if(!(i instanceof Di||i instanceof Au))throw new bt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(In.fromString(e,...t));return wm(s),new Di(i.firestore,i instanceof Au?i.converter:null,new zt(s))}}function Im(i,e){return i=(0,he.m9)(i),e=(0,he.m9)(e),(i instanceof Di||i instanceof Au)&&(e instanceof Di||e instanceof Au)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Zd(i,e){return i=(0,he.m9)(i),e=(0,he.m9)(e),i instanceof Ts&&e instanceof Ts&&i.firestore===e.firestore&&xe(i._query,e._query)&&i.converter===e.converter}class Dm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Kg(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&_t("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new oi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,p.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ni(t))throw t;_t("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=qh.createAndSchedule(this,e,t,s,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&Zt()}verifyOperationInProgress(){}sa(){var e=this;return(0,p.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(i)}class Yp{constructor(){this._progressObserver={},this._taskCompletionResolver=new oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Cm=-1;class Ci extends Kd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Dm,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qp(this),this._firestoreClient.terminate()}}function zi(i){return i._firestoreClient||Qp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qp(i){var e,t,s;const a=i._freezeSettings(),c=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ul(i._databaseId,D,i._persistenceKey,(U=a).host,U.ssl,U.experimentalForceLongPolling,U.experimentalAutoDetectLongPolling,Gp(U.experimentalLongPollingOptions),U.useFetchStreams));var D,U;i._firestoreClient=new zd(i._authCredentials,i._appCheckCredentials,i._queue,c),(null===(t=a.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(s=a.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Uv(i,e){Xp(i=Pr(i,Ci));const t=zi(i);if(t._uninitializedComponentsProvider)throw new bt(We.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),a=new zc;return bm(t,a,new Bp(a,s.cacheSizeBytes,e?.forceOwnership))}function Bv(i){Xp(i=Pr(i,Ci));const e=zi(i);if(e._uninitializedComponentsProvider)throw new bt(We.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new zc;return bm(e,s,new fm(s,t.cacheSizeBytes))}function bm(i,e,t){const s=new oi;return i.asyncQueue.enqueue((0,p.Z)(function*(){try{yield df(i,t),yield Wd(i,e),s.resolve()}catch(a){const c=a;if(!Xa(c))throw c;xr("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Tm(i){if(i._initialized&&!i._terminated)throw new bt(We.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new oi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(t=(0,p.Z)(function*(s){if(!Xi.D())return Promise.resolve();const a=s+"main";yield Xi.delete(a)}),function(s){return t.apply(this,arguments)})(Md(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function Jp(i){return function(e){const t=new oi;return e.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Mv(i,e){return Op.apply(this,arguments)}(yield Al(e),t)})),t.promise}(zi(i=Pr(i,Ci)))}function Am(i){return function qc(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield _a(i),t=yield gc(i);return e.setNetworkEnabled(!0),function(s){const a=Wt(s);return a.vu.delete(0),kd(a)}(t)}))}(zi(i=Pr(i,Ci)))}function Sm(i){return function Zc(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield _a(i),t=yield gc(i);return e.setNetworkEnabled(!1),(s=(0,p.Z)(function*(a){const c=Wt(a);c.vu.add(0),yield uc(c),c.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(zi(i=Pr(i,Ci)))}function Mm(i,e){const t=zi(i=Pr(i,Ci)),s=new Yp;return function ym(i,e,t,s){const a=function(c,f){let D;return D="string"==typeof c?ky().encode(c):c,N=function(N,U){if(N instanceof Uint8Array)return pm(N,U);if(N instanceof ArrayBuffer)return pm(new Uint8Array(N),U);if(N instanceof ReadableStream)return N.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new cf(N,f);var N}(t,jc(e));i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function kv(i,e,t){const s=Wt(i);var a;(a=(0,p.Z)(function*(c,f,D){try{const N=yield f.getMetadata();if(yield function(Be,at){const Vt=Wt(Be),sn=Gi(at.createTime);return Vt.persistence.runTransaction("hasNewerBundle","readonly",un=>Vt.qs.getBundleMetadata(un,at.id)).then(un=>!!un&&un.createTime.compareTo(sn)>=0)}(c.localStore,N))return yield f.close(),D._completeWith({taskState:"Success",documentsLoaded:(Be=N).totalDocuments,bytesLoaded:Be.totalBytes,totalDocuments:Be.totalDocuments,totalBytes:Be.totalBytes}),Promise.resolve(new Set);D._updateProgress(am(N));const U=new n0(N,c.localStore,f.serializer);let Q=yield f.bc();for(;Q;){const Be=yield U.zu(Q);Be&&D._updateProgress(Be),Q=yield f.bc()}const me=yield U.complete();return yield bu(c,me.Ju,void 0),yield function(Be,at){const Vt=Wt(Be);return Vt.persistence.runTransaction("Save bundle","readwrite",sn=>Vt.qs.saveBundleMetadata(sn,at))}(c.localStore,N),D._completeWith(me.progress),Promise.resolve(me.Hu)}catch(N){return xr("SyncEngine",`Loading bundle failed with ${N}`),D._failWith(N),Promise.resolve(new Set)}var Be}),function(c,f,D){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Al(i),a,s)}))}(t,i._databaseId,e,s),s}function xm(i,e){return function vm(i,e){return i.asyncQueue.enqueue((0,p.Z)(function*(){return function(t,s){const a=Wt(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,s))}(yield Kc(i),e)}))}(zi(i=Pr(i,Ci)),e).then(t=>t?new Ts(i,null,t.query):null)}function Xp(i){if(i._initialized||i._terminated)throw new bt(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(wi.fromBase64String(e))}catch(t){throw new bt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ml{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new bt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xl{constructor(e){this._methodName=e}}class yf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}}const As=/^__.*__$/;class Pm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class Om{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zt()}}class Yd{constructor(e,t,s,a,c,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Nm(this.ca)&&As.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class $v{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||jc(e)}ya(e,t,s,a=!1){return new Yd({ca:e,methodName:t,ga:s,path:er.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rl(i){const e=i._freezeSettings(),t=jc(i._databaseId);return new $v(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Qd(i,e,t,s,a,c={}){const f=i.ya(c.merge||c.mergeFields?2:0,e,t,a);Va("Data must be an object, but it was:",f,s);const D=Um(s,f);let N,U;if(c.merge)N=new es(f.fieldMask),U=f.fieldTransforms;else if(c.mergeFields){const Q=[];for(const me of c.mergeFields){const Be=Fo(e,me,t);if(!f.contains(Be))throw new bt(We.INVALID_ARGUMENT,`Field '${Be}' is specified in your field mask but missing from your input data.`);Bm(Q,Be)||Q.push(Be)}N=new es(Q),U=f.fieldTransforms.filter(me=>N.covers(me.field))}else N=null,U=f.fieldTransforms;return new Pm(new ts(D),N,U)}class Su extends xl{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Su}}function km(i,e,t){return new Yd({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eg extends xl{_toFieldTransform(e){return new xc(e.path,new zu)}isEqual(e){return e instanceof eg}}class Fm extends xl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Io(c,t)),a=new Eu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Hv extends xl{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=km(this,e,!0),s=this.pa.map(c=>Io(c,t)),a=new Wu(s);return new xc(e.path,a)}isEqual(e){return this===e}}class Lm extends xl{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new pl(e.serializer,Of(e.serializer,this.Ia));return new xc(e.path,t)}isEqual(e){return this===e}}function Vm(i,e,t,s){const a=i.ya(1,e,t);Va("Data must be an object, but it was:",a,s);const c=[],f=ts.empty();Wa(s,(N,U)=>{const Q=Jd(e,N,t);U=(0,he.m9)(U);const me=a.da(Q);if(U instanceof Su)c.push(Q);else{const Be=Io(U,me);null!=Be&&(c.push(Q),f.set(Q,Be))}});const D=new es(c);return new Om(f,D,a.fieldTransforms)}function vf(i,e,t,s,a,c){const f=i.ya(1,e,t),D=[Fo(e,s,t)],N=[a];if(c.length%2!=0)throw new bt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Be=0;Be<c.length;Be+=2)D.push(Fo(e,c[Be])),N.push(c[Be+1]);const U=[],Q=ts.empty();for(let Be=D.length-1;Be>=0;--Be)if(!Bm(U,D[Be])){const at=D[Be];let Vt=N[Be];Vt=(0,he.m9)(Vt);const sn=f.da(at);if(Vt instanceof Su)U.push(at);else{const un=Io(Vt,sn);null!=un&&(U.push(at),Q.set(at,un))}}const me=new es(U);return new Om(Q,me,f.fieldTransforms)}function _f(i,e,t,s=!1){return Io(t,i.ya(s?4:3,e))}function Io(i,e){if(tg(i=(0,he.m9)(i)))return Va("Unsupported field value:",e,i),Um(i,e);if(i instanceof xl)return function(t,s){if(!Nm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const f of t){let D=Io(f,s.wa(c));null==D&&(D={nullValue:"NULL_VALUE"}),a.push(D),c++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,he.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Of(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Rr.fromDate(t);return{timestampValue:ml(s.serializer,a)}}if(t instanceof Rr){const a=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ml(s.serializer,a)}}if(t instanceof yf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:Vy(s.serializer,t._byteString)};if(t instanceof Di){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Bf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${ff(t)}`)}(i,e)}function Um(i,e){const t={};return Ll(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(i,(s,a)=>{const c=Io(a,e.ha(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Rr||i instanceof yf||i instanceof vc||i instanceof Di||i instanceof xl)}function Va(i,e,t){if(!tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ff(t);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function Fo(i,e,t){if((e=(0,he.m9)(e))instanceof Ml)return e._internalPath;if("string"==typeof e)return Jd(i,e);throw Xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const tu=new RegExp("[~\\*/\\[\\]]");function Jd(i,e,t){if(e.search(tu)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ml(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xd(i,e,t,s,a){const c=s&&!s.isEmpty(),f=void 0!==a;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let N="";return(c||f)&&(N+=" (found",c&&(N+=` in field ${s}`),f&&(N+=` in document ${a}`),N+=")"),new bt(We.INVALID_ARGUMENT,D+i+N)}function Bm(i,e){return i.some(t=>t.isEqual(e))}class eh{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Di(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gv extends eh{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Jd(i,e):e instanceof Ml?e._internalPath:e._delegate._internalPath}function wf(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new bt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _c{}class th extends _c{}function jm(i,e,...t){let s=[];e instanceof _c&&s.push(e),s=s.concat(t),function(a){const c=a.filter(D=>D instanceof Ec).length,f=a.filter(D=>D instanceof nh).length;if(c>1||c>0&&f>0)throw new bt(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class nh extends th{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return Ym(e._query,t),new Ts(e.firestore,e.converter,$(e._query,t))}_parse(e){const t=Rl(e.firestore);return function(a,c,f,D,N,U,Q){let me;if(N.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new bt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){Zm(Q,U);const Be=[];for(const at of Q)Be.push(qm(D,a,at));me={arrayValue:{values:Be}}}else me=qm(D,a,Q)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||Zm(Q,U),me=_f(f,"where",Q,"in"===U||"not-in"===U);return ge.create(N,U,me)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function $m(i,e,t){const s=e,a=Ef("where",i);return nh._create(a,s,t)}class Ec extends _c{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ec(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:be.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let c=s;const f=a.getFlattenedFilters();for(const D of f)Ym(c,D),c=$(c,D)}(e._query,t),new Ts(e.firestore,e.converter,$(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends th{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new If(e,t)}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new bt(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new bt(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new A(a,c);return function(D,N){if(null===Ac(D)){const U=_(D);null!==U&&Qm(0,U,N.field)}}(s,f),f}(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new qa(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Hm(i,e="asc"){const t=e,s=Ef("orderBy",i);return If._create(s,t)}class Jc extends th{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jc(e,t,s)}_apply(e){return new Ts(e.firestore,e.converter,J(e._query,this._limit,this._limitType))}}function Df(i){return pf("limit",i),Jc._create("limit",i,"F")}function rg(i){return pf("limitToLast",i),Jc._create("limitToLast",i,"L")}class rh extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rh(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Ts(e.firestore,e.converter,(a=t,new qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Gm(...i){return rh._create("startAt",i,!0)}function zm(...i){return rh._create("startAfter",i,!1)}class ih extends th{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=ig(e,this.type,this._docOrFields,this._inclusive);return new Ts(e.firestore,e.converter,(a=t,new qa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Wm(...i){return ih._create("endBefore",i,!1)}function Km(...i){return ih._create("endAt",i,!0)}function ig(i,e,t,s){if(t[0]=(0,he.m9)(t[0]),t[0]instanceof eh)return function(a,c,f,D,N){if(!D)throw new bt(We.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const U=[];for(const Q of g(a))if(Q.field.isKeyField())U.push(Pa(c,D.key));else{const me=D.data.field(Q.field);if(Vu(me))throw new bt(We.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===me){const Be=Q.field.canonicalString();throw new bt(We.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Be}' (used as the orderBy) does not exist.`)}U.push(me)}return new ns(U,N)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const a=Rl(i.firestore);return function(c,f,D,N,U,Q){const me=c.explicitOrderBy;if(U.length>me.length)throw new bt(We.INVALID_ARGUMENT,`Too many arguments provided to ${N}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Be=[];for(let at=0;at<U.length;at++){const Vt=U[at];if(me[at].field.isKeyField()){if("string"!=typeof Vt)throw new bt(We.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${N}(), but got a ${typeof Vt}`);if(!d(c)&&-1!==Vt.indexOf("/"))throw new bt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${N}() must be a plain document ID, but '${Vt}' contains a slash.`);const sn=c.path.child(In.fromString(Vt));if(!zt.isDocumentKey(sn))throw new bt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${N}() must result in a valid document path, but '${sn}' is not because it contains an odd number of segments.`);const un=new zt(sn);Be.push(Pa(f,un))}else{const sn=_f(D,N,Vt);Be.push(sn)}}return new ns(Be,Q)}(i._query,i.firestore._databaseId,a,e,t,s)}}function qm(i,e,t){if("string"==typeof(t=(0,he.m9)(t))){if(""===t)throw new bt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d(e)&&-1!==t.indexOf("/"))throw new bt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(In.fromString(t));if(!zt.isDocumentKey(s))throw new bt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Pa(i,new zt(s))}if(t instanceof Di)return Pa(i,t._key);throw new bt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function Zm(i,e){if(!Array.isArray(i)||0===i.length)throw new bt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ym(i,e){if(e.isInequality()){const s=_(i),a=e.field;if(null!==s&&!s.isEqual(a))throw new bt(We.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const c=Ac(i);null!==c&&Qm(0,a,c)}const t=function(s,a){for(const c of s)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new bt(We.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qm(i,e,t){if(!t.isEqual(e))throw new bt(We.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sg{convertValue(e,t="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wa(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new yf(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Uu(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=vo(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=In.fromString(e);an(Gf(s));const a=new Qo(s.get(1),s.get(3)),c=new zt(s.popFirst(5));return a.isEqual(t)||wr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Cf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class zv extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,t)}}class wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends eh{constructor(e,t,s,a,c,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class sh extends Ic{data(e={}){return super.data(e)}}class Dc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new wc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new wc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const D=new sh(s._firestore,s._userDataWriter,f.doc.key,f.doc,new wc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let N=-1,U=-1;return 0!==f.type&&(N=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),U=c.indexOf(f.doc.key)),{type:Kv(f.type),doc:D,oldIndex:N,newIndex:U}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zt()}}function Xm(i,e){return i instanceof Ic&&e instanceof Ic?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Dc&&e instanceof Dc&&i._firestore===e._firestore&&Zd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ey(i){i=Pr(i,Di);const e=Pr(i.firestore,Ci);return yc(zi(e),i._key).then(t=>ly(e,i,t))}class tl extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Di(this.firestore,null,t)}}function ty(i){i=Pr(i,Di);const e=Pr(i.firestore,Ci),t=zi(e),s=new tl(e);return function Yc(i,e){const t=new oi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(s=(0,p.Z)(function*(a,c,f){try{const D=yield function(N,U){const Q=Wt(N);return Q.persistence.runTransaction("read document","readonly",me=>Q.localDocuments.getDocument(me,U))}(a,c);D.isFoundDocument()?f.resolve(D):D.isNoDocument()?f.resolve(null):f.reject(new bt(We.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const N=cc(D,`Failed to get document '${c} from cache`);f.reject(N)}}),function(a,c,f){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._key).then(a=>new Ic(e,s,i._key,a,new wc(null!==a&&a.hasLocalMutations,!0),i.converter))}function ny(i){i=Pr(i,Di);const e=Pr(i.firestore,Ci);return yc(zi(e),i._key,{source:"server"}).then(t=>ly(e,i,t))}function ry(i){i=Pr(i,Ts);const e=Pr(i.firestore,Ci),t=zi(e),s=new tl(e);return wf(i._query),Hp(t,i._query).then(a=>new Dc(e,s,i,a))}function iy(i){i=Pr(i,Ts);const e=Pr(i.firestore,Ci),t=zi(e),s=new tl(e);return function gm(i,e){const t=new oi;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(s=(0,p.Z)(function*(a,c,f){try{const D=yield Rd(a,c,!0),N=new um(c,D.ir),U=N.sc(D.documents),Q=N.applyChanges(U,!1);f.resolve(Q.snapshot)}catch(D){const N=cc(D,`Failed to execute query '${c} against cache`);f.reject(N)}}),function(a,c,f){return s.apply(this,arguments)})(yield Kc(i),e,t);var s})),t.promise}(t,i._query).then(a=>new Dc(e,s,i,a))}function sy(i){i=Pr(i,Ts);const e=Pr(i.firestore,Ci),t=zi(e),s=new tl(e);return Hp(t,i._query,{source:"server"}).then(a=>new Dc(e,s,i,a))}function oy(i,e,t){i=Pr(i,Di);const s=Pr(i.firestore,Ci),a=Cf(i.converter,e,t);return nu(s,[Qd(Rl(s),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,Ii.none())])}function ay(i,e,t,...s){i=Pr(i,Di);const a=Pr(i.firestore,Ci),c=Rl(a);let f;return f="string"==typeof(e=(0,he.m9)(e))||e instanceof Ml?vf(c,"updateDoc",i._key,e,t,s):Vm(c,"updateDoc",i._key,e),nu(a,[f.toMutation(i._key,Ii.exists(!0))])}function uy(i){return nu(Pr(i.firestore,Ci),[new gl(i._key,Ii.none())])}function Cc(i,e){const t=Pr(i.firestore,Ci),s=Zp(i),a=Cf(i.converter,e);return nu(t,[Qd(Rl(i.firestore),"addDoc",s._key,a,null!==i.converter,{}).toMutation(s._key,Ii.exists(!1))]).then(()=>s)}function qv(i,...e){var t,s,a;i=(0,he.m9)(i);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||mf(e[f])||(c=e[f],f++);const D={includeMetadataChanges:c.includeMetadataChanges};if(mf(e[f])){const me=e[f];e[f]=null===(t=me.next)||void 0===t?void 0:t.bind(me),e[f+1]=null===(s=me.error)||void 0===s?void 0:s.bind(me),e[f+2]=null===(a=me.complete)||void 0===a?void 0:a.bind(me)}let N,U,Q;if(i instanceof Di)U=Pr(i.firestore,Ci),Q=Hu(i._key.path),N={next:me=>{e[f]&&e[f](ly(U,i,me))},error:e[f+1],complete:e[f+2]};else{const me=Pr(i,Ts);U=Pr(me.firestore,Ci),Q=me._query;const Be=new tl(U);N={next:at=>{e[f]&&e[f](new Dc(U,Be,me,at))},error:e[f+1],complete:e[f+2]},wf(i._query)}return function(me,Be,at,Vt){const sn=new lf(Vt),un=new ko(Be,sn,at);return me.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return nm(yield eu(me),un)})),()=>{sn.Dc(),me.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Yh(yield eu(me),un)}))}}(zi(U),Q,D,N)}function Zv(i,e){return function mm(i,e){const t=new lf(e);return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return s=yield eu(i),a=t,Wt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return s=yield eu(i),a=t,void Wt(s).ku.delete(a);var s,a}))}}(zi(i=Pr(i,Ci)),mf(e)?e:{next:e})}function nu(i,e){return function(t,s){const a=new oi;return t.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Tv(i,e,t){return La.apply(this,arguments)}(yield Al(t),s,a)})),a.promise}(zi(i),e)}function ly(i,e,t){const s=t.docs.get(e._key),a=new tl(i);return new Ic(i,a,e._key,s,new wc(t.hasPendingWrites,t.fromCache),e.converter)}const _0={maxAttempts:5};class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rl(e)}set(e,t,s){this._verifyNotCommitted();const a=nl(e,this._firestore),c=Cf(a.converter,t,s),f=Qd(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(f.toMutation(a._key,Ii.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=nl(e,this._firestore);let f;return f="string"==typeof(t=(0,he.m9)(t))||t instanceof Ml?vf(this._dataReader,"WriteBatch.update",c._key,t,s,a):Vm(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,Ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nl(e,this._firestore);return this._mutations=this._mutations.concat(new gl(t._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nl(i,e){if((i=(0,he.m9)(i)).firestore!==e)throw new bt(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rl(e)}get(e){const t=nl(e,this._firestore),s=new zv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Zt();const c=a[0];if(c.isFoundDocument())return new eh(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new eh(this._firestore,s,t._key,null,t.converter);throw Zt()})}set(e,t,s){const a=nl(e,this._firestore),c=Cf(a.converter,t,s),f=Qd(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,f),this}update(e,t,s,...a){const c=nl(e,this._firestore);let f;return f="string"==typeof(t=(0,he.m9)(t))||t instanceof Ml?vf(this._dataReader,"Transaction.update",c._key,t,s,a):Vm(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=nl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nl(e,this._firestore),s=new tl(this._firestore);return super.get(e).then(a=>new Ic(this._firestore,s,t._key,a._document,new wc(!1,!1),t.converter))}}function fy(i,e,t){i=Pr(i,Ci);const s=Object.assign(Object.assign({},_0),t);return function(a){if(a.maxAttempts<1)throw new bt(We.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,c,f){const D=new oi;return a.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const N=yield function mc(i){return Tu(i).then(e=>e.datastore)}(a);new a0(a.asyncQueue,N,f,c,D).run()})),D.promise}(zi(i),a=>e(new Qv(i,a)),s)}function py(){return new Su("deleteField")}function gy(){return new eg("serverTimestamp")}function my(...i){return new Fm("arrayUnion",i)}function Jv(...i){return new Hv("arrayRemove",i)}function Xv(i){return new Lm("increment",i)}!function(i,e=!0){Mr=F.SDK_VERSION,(0,F._registerComponent)(new B.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const c=t.getProvider("app").getImmediate(),f=new Ci(new Ba(t.getProvider("auth-internal")),new Nl(t.getProvider("app-check-internal")),function(D,N){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new bt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(D.options.projectId,N)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(Er,"3.13.0",i),(0,F.registerVersion)(Er,"3.13.0","esm2017")}()},2090:(Lt,Le,R)=>{R.d(Le,{$s:()=>H,BH:()=>nt,G6:()=>qe,L:()=>_e,LL:()=>jt,Pz:()=>Xe,Sg:()=>yt,UG:()=>xt,US:()=>we,ZB:()=>ye,ZR:()=>Dt,aH:()=>fe,b$:()=>Bt,eu:()=>Ge,hl:()=>He,jU:()=>Yt,m9:()=>pt,ne:()=>dn,pd:()=>Dn,r3:()=>Jn,ru:()=>It,tV:()=>ee,uI:()=>Se,vZ:()=>gn,w1:()=>Or,xO:()=>jr,xb:()=>kr,z$:()=>st,zI:()=>ht,zd:()=>Nr});const le=function(se){const de=[];let K=0;for(let Y=0;Y<se.length;Y++){let G=se.charCodeAt(Y);G<128?de[K++]=G:G<2048?(de[K++]=G>>6|192,de[K++]=63&G|128):55296==(64512&G)&&Y+1<se.length&&56320==(64512&se.charCodeAt(Y+1))?(G=65536+((1023&G)<<10)+(1023&se.charCodeAt(++Y)),de[K++]=G>>18|240,de[K++]=G>>12&63|128,de[K++]=G>>6&63|128,de[K++]=63&G|128):(de[K++]=G>>12|224,de[K++]=G>>6&63|128,de[K++]=63&G|128)}return de},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,de){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=de?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let G=0;G<se.length;G+=3){const De=se[G],ot=G+1<se.length,kt=ot?se[G+1]:0,en=G+2<se.length,re=en?se[G+2]:0;let Me=(15&kt)<<2|re>>6,Ue=63&re;en||(Ue=64,ot||(Me=64)),Y.push(K[De>>2],K[(3&De)<<4|kt>>4],K[Me],K[Ue])}return Y.join("")},encodeString(se,de){return this.HAS_NATIVE_SUPPORT&&!de?btoa(se):this.encodeByteArray(le(se),de)},decodeString(se,de){return this.HAS_NATIVE_SUPPORT&&!de?atob(se):function(se){const de=[];let K=0,Y=0;for(;K<se.length;){const G=se[K++];if(G<128)de[Y++]=String.fromCharCode(G);else if(G>191&&G<224){const De=se[K++];de[Y++]=String.fromCharCode((31&G)<<6|63&De)}else if(G>239&&G<365){const en=((7&G)<<18|(63&se[K++])<<12|(63&se[K++])<<6|63&se[K++])-65536;de[Y++]=String.fromCharCode(55296+(en>>10)),de[Y++]=String.fromCharCode(56320+(1023&en))}else{const De=se[K++],ot=se[K++];de[Y++]=String.fromCharCode((15&G)<<12|(63&De)<<6|63&ot)}}return de.join("")}(this.decodeStringToByteArray(se,de))},decodeStringToByteArray(se,de){this.init_();const K=de?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let G=0;G<se.length;){const De=K[se.charAt(G++)],kt=G<se.length?K[se.charAt(G)]:0;++G;const re=G<se.length?K[se.charAt(G)]:64;++G;const X=G<se.length?K[se.charAt(G)]:64;if(++G,null==De||null==kt||null==re||null==X)throw new Ee;Y.push(De<<2|kt>>4),64!==re&&(Y.push(kt<<4&240|re>>2),64!==X&&Y.push(re<<6&192|X))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(se){return function(se){const de=le(se);return we.encodeByteArray(de,!0)}(se).replace(/\./g,"")},ee=function(se){try{return we.decodeString(se,!0)}catch(de){console.error("base64Decode failed: ",de)}return null};function ye(se,de){if(!(de instanceof Object))return de;switch(de.constructor){case Date:return new Date(de.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return de}for(const K in de)!de.hasOwnProperty(K)||!ut(K)||(se[K]=ye(se[K],de[K]));return se}function ut(se){return"__proto__"!==se}const Ne=()=>{try{return function rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const se=process.env.__FIREBASE_DEFAULTS__;return se?JSON.parse(se):void 0})()||(()=>{if(typeof document>"u")return;let se;try{se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const de=se&&ee(se[1]);return de&&JSON.parse(de)})()}catch(se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${se}`)}},fe=()=>{var se;return null===(se=Ne())||void 0===se?void 0:se.config},Xe=se=>{var de;return null===(de=Ne())||void 0===de?void 0:de[`_${se}`]};class nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((de,K)=>{this.resolve=de,this.reject=K})}wrapCallback(de){return(K,Y)=>{K?this.reject(K):this.resolve(Y),"function"==typeof de&&(this.promise.catch(()=>{}),1===de.length?de(K):de(K,Y))}}}function yt(se,de){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=de||"demo-project",G=se.iat||0,De=se.sub||se.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ot=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:G,exp:G+3600,auth_time:G,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},se);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(ot)),""].join(".")}function st(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function xt(){var se;const de=null===(se=Ne())||void 0===se?void 0:se.forceEnvironment;if("node"===de)return!0;if("browser"===de)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Yt(){return"object"==typeof self&&self.self===self}function It(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function Bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Or(){const se=st();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function qe(){return!xt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function Ge(){return new Promise((se,de)=>{try{let K=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Y);G.onsuccess=()=>{G.result.close(),K||self.indexedDB.deleteDatabase(Y),se(!0)},G.onupgradeneeded=()=>{K=!1},G.onerror=()=>{var De;de((null===(De=G.error)||void 0===De?void 0:De.message)||"")}}catch(K){de(K)}})}function ht(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Dt extends Error{constructor(de,K,Y){super(K),this.code=de,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,Dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(de,K,Y){this.service=de,this.serviceName=K,this.errors=Y}create(de,...K){const Y=K[0]||{},G=`${this.service}/${de}`,De=this.errors[de],ot=De?function At(se,de){return se.replace(Qt,(K,Y)=>{const G=de[Y];return null!=G?String(G):`<${Y}?>`})}(De,Y):"Error";return new Dt(G,`${this.serviceName}: ${ot} (${G}).`,Y)}}const Qt=/\{\$([^}]+)}/g;function Jn(se,de){return Object.prototype.hasOwnProperty.call(se,de)}function kr(se){for(const de in se)if(Object.prototype.hasOwnProperty.call(se,de))return!1;return!0}function gn(se,de){if(se===de)return!0;const K=Object.keys(se),Y=Object.keys(de);for(const G of K){if(!Y.includes(G))return!1;const De=se[G],ot=de[G];if(Bn(De)&&Bn(ot)){if(!gn(De,ot))return!1}else if(De!==ot)return!1}for(const G of Y)if(!K.includes(G))return!1;return!0}function Bn(se){return null!==se&&"object"==typeof se}function jr(se){const de=[];for(const[K,Y]of Object.entries(se))Array.isArray(Y)?Y.forEach(G=>{de.push(encodeURIComponent(K)+"="+encodeURIComponent(G))}):de.push(encodeURIComponent(K)+"="+encodeURIComponent(Y));return de.length?"&"+de.join("&"):""}function Nr(se){const de={};return se.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[G,De]=Y.split("=");de[decodeURIComponent(G)]=decodeURIComponent(De)}}),de}function Dn(se){const de=se.indexOf("?");if(!de)return"";const K=se.indexOf("#",de);return se.substring(de,K>0?K:void 0)}function dn(se,de){const K=new qt(se,de);return K.subscribe.bind(K)}class qt{constructor(de,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{de(this)}).catch(Y=>{this.error(Y)})}next(de){this.forEachObserver(K=>{K.next(de)})}error(de){this.forEachObserver(K=>{K.error(de)}),this.close(de)}complete(){this.forEachObserver(de=>{de.complete()}),this.close()}subscribe(de,K,Y){let G;if(void 0===de&&void 0===K&&void 0===Y)throw new Error("Missing Observer.");G=function Mn(se,de){if("object"!=typeof se||null===se)return!1;for(const K of de)if(K in se&&"function"==typeof se[K])return!0;return!1}(de,["next","error","complete"])?de:{next:de,error:K,complete:Y},void 0===G.next&&(G.next=mr),void 0===G.error&&(G.error=mr),void 0===G.complete&&(G.complete=mr);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),De}unsubscribeOne(de){void 0===this.observers||void 0===this.observers[de]||(delete this.observers[de],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(de){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,de)}sendOne(de,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[de])try{K(this.observers[de])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(de){this.finalized||(this.finalized=!0,void 0!==de&&(this.finalError=de),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mr(){}function H(se,de=1e3,K=2){const Y=de*Math.pow(K,se),G=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+G)}function pt(se){return se&&se._delegate?se._delegate:se}},3651:(Lt,Le,R)=>{R.d(Le,{e:()=>Tt});var p=R(5861),F=R(1389),Ee=(R(2090),R(6881),R(1877),R(4859),R(3900)),te=R(9646),_e=R(5698),ee=R(4004),ue=R(8505),ye=R(4650),ut=R(1205),rt=R(33),Ye=R(7486);let Tt=(()=>{class Ke{constructor(Ct,ft,fe,Xe){this.afAuth=Ct,this.afs=ft,this.router=fe,this.ngZone=Xe,this.username="Anonimo",this.user$=this.afAuth.authState.pipe((0,Ee.w)(nt=>nt?this.afs.doc(`users/${nt.uid}`).valueChanges():(0,te.of)(null)),(0,_e.q)(1),(0,ee.U)(nt=>!0))}isLoggedIn(){var Ct=!1;return this.user$.pipe((0,_e.q)(1),(0,ue.b)(ft=>this.username=ft?.displayName),(0,ee.U)(ft=>!!ft),(0,ue.b)(ft=>{ft&&(Ct=!0)})),Ct}googleSignin(){var Ct=this;return(0,p.Z)(function*(){const ft=yield Ct.afAuth.signInWithPopup(new F.V);return ft.user&&Ct.router.navigate(["/home"]),Ct.updateUserData(ft.user)})()}GoogleAuth(){return this.AuthLogin(new F.V)}AuthLogin(Ct){var ft=this;return(0,p.Z)(function*(){return ft.afAuth.signInWithPopup(Ct).then(fe=>{console.log("You have been successfully logged in!")}).catch(fe=>{console.log(fe)})})()}updateUserData(Ct){return this.afs.doc(`users/${Ct.uid}`).set({uid:Ct.uid,email:Ct.email,displayName:Ct.displayName},{merge:!0})}signOut(){var Ct=this;return(0,p.Z)(function*(){Ct.username="Anonimo",yield Ct.afAuth.signOut(),Ct.router.navigate(["/login"])})()}}return Ke.\u0275fac=function(Ct){return new(Ct||Ke)(ye.LFG(ut.zQ),ye.LFG(rt.ST),ye.LFG(Ye.F0),ye.LFG(ye.R0b))},Ke.\u0275prov=ye.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})()},2622:(Lt,Le,R)=>{R.d(Le,{Q:()=>we});var p=R(1135),F=R(9646),B=R(8505),le=R(4650),he=R(6535);let we=(()=>{class Ee{constructor(_e){this.fos=_e,this.hashMapRoutes=new Map}getCollection(_e,ee,ue,ye){return console.log(this.hashMapRoutes.has(_e)),!ye&&this.hashMapRoutes.has(_e)||(this.hashMapRoutes.has(_e)?this.hashMapRoutes.get(_e)?.next(this.performGetRequest(_e,ee,ue)):this.hashMapRoutes.set(_e,new p.X(this.performGetRequest(_e,ee,ue))),console.log(this.hashMapRoutes.has(_e))),this.hashMapRoutes.get(_e)??new p.X((0,F.of)([{}]))}performGetRequest(_e,ee,ue){return this.fos.pathSetter(_e),this.fos.filterByKeyBatch(ee,ue).pipe((0,B.b)(ye=>this.hashMapRoutes.get(_e)?.next((0,F.of)(ye))))}}return Ee.\u0275fac=function(_e){return new(_e||Ee)(le.LFG(he.U))},Ee.\u0275prov=le.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})()},6535:(Lt,Le,R)=>{R.d(Le,{U:()=>we});var p=R(8505),F=R(4004),B=R(8996),le=R(4650),he=R(33);let we=(()=>{class Ee{constructor(_e,ee){this.db=_e,this.path=ee,this.objectRef=_e.collection(this.path)}pathSetter(_e){this.path=_e,this.objectRef=this.db.collection(this.path)}pathGetter(){return this.path}getNextBatch(){return this.db.collection(this.path).get().pipe((0,p.b)(_e=>console.log("From Firestore: ",_e)),(0,F.U)(_e=>_e.docs.map(ee=>({id:ee.id,...ee.data()}))))}getAll(){return this.objectRef}getByKey(_e,ee){return this.db.collection(this.path,ue=>ue.where(_e,"==",ee))}create(_e,ee){return ee?this.objectRef.doc(ee).set(_e):this.objectRef.add({..._e})}update(_e,ee){return(0,B.D)(this.objectRef.doc(_e).update(ee))}delete(_e){return this.objectRef.doc(_e).delete()}filterByNameBatch(_e,ee,ue){return this.db.collection(this.path,ye=>ye.where("name",">=",_e).where("name","<=",_e+"\uf8ff").orderBy("name","desc"))}filterUrgent(_e){return this.db.collection(this.path,ee=>ee.where("orderDeadline","<=",_e).orderBy("orderDeadline","asc")).get().pipe((0,F.U)(ee=>ee.docs.map(ue=>({id:ue.id,...ue.data()}))))}filterByKeyBatch(_e,ee,ue){return _e&&ee?"orderDeadline"==_e?this.filterUrgent(ee):ue?this.db.collection(this.path,ye=>ye.where(_e,"==",ee).orderBy("timestamp","desc")).get().pipe((0,F.U)(ye=>ye.docs.map(ut=>({id:ut.id,...ut.data()})))):this.db.collection(this.path,ye=>ye.where(_e,">=",ee).where(_e,"<=",ee+"\uf8ff").orderBy(_e,"desc")).get().pipe((0,F.U)(ye=>ye.docs.map(ut=>({id:ut.id,...ut.data()})))):this.getNextBatch()}}return Ee.\u0275fac=function(_e){return new(_e||Ee)(le.LFG(he.ST),le.LFG("path"))},Ee.\u0275prov=le.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})()},4466:(Lt,Le,R)=>{R.d(Le,{m:()=>le});var p=R(6895),F=R(4006),B=R(4650);let le=(()=>{class he{}return he.\u0275fac=function(Ee){return new(Ee||he)},he.\u0275mod=B.oAB({type:he}),he.\u0275inj=B.cJS({imports:[p.ez,F.u5,F.UX,F.u5]}),he})()},2445:(Lt,Le,R)=>{var p=R(1481),F=R(4650),B=R(7486),le=R(5698),he=R(4004),we=R(8505),Ee=R(3651);let te=(()=>{class Te{constructor(Qe,ke){this.auth=Qe,this.router=ke}canActivate(Qe,ke){return this.auth.user$.pipe((0,le.q)(1),(0,he.U)(H=>!!H),(0,we.b)(H=>{H||(console.log("access denied"),this.router.navigate(["login"]))}))}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(F.LFG(Ee.e),F.LFG(B.F0))},Te.\u0275prov=F.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();const ee=[{path:"clients",loadChildren:()=>Promise.all([R.e(167),R.e(737)]).then(R.bind(R,1737)).then(Te=>Te.ClientModule),canActivate:[te]},{path:"materials",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(718)]).then(R.bind(R,6718)).then(Te=>Te.MaterialModule),canActivate:[te]},{path:"providers",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(573)]).then(R.bind(R,3573)).then(Te=>Te.ProvidersModule),canActivate:[te]},{path:"products",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(596)]).then(R.bind(R,2596)).then(Te=>Te.ProductModule),canActivate:[te]},{path:"orders",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(227)]).then(R.bind(R,4227)).then(Te=>Te.OrdersModule),canActivate:[te]},{path:"shop",loadChildren:()=>Promise.all([R.e(167),R.e(592),R.e(117)]).then(R.bind(R,9117)).then(Te=>Te.ShoppingModule),canActivate:[te]},{path:"history",loadChildren:()=>R.e(72).then(R.bind(R,2072)).then(Te=>Te.HistoryModule),canActivate:[te]},{path:"login",component:(()=>{class Te{constructor(Qe){this.authService=Qe}ngOnInit(){}authenticate(){this.authService.googleSignin()}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(F.Y36(Ee.e))},Te.\u0275cmp=F.Xpm({type:Te,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"d-flex","text-center","text-bg-dark","h-100",2,"background-image","url(assets/img/bg.png)"],[1,"d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"my-auto"],["type","button",1,"btn","btn-lg","btn-outline-light","fw-bold","border-white","rounded-pill",3,"click"],[1,"ms-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-google"],["d","M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"]],template:function(Qe,ke){1&Qe&&(F.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),F._uU(4," IBM Furniture"),F.qZA(),F.TgZ(5,"button",3),F.NdJ("click",function(){return ke.authenticate()}),F._uU(6," Iniciar Sesion con Google "),F.TgZ(7,"span",4),F.O4$(),F.TgZ(8,"svg",5),F._UZ(9,"path",6),F.qZA()()()()()())}}),Te})()},{path:"",redirectTo:"orders",pathMatch:"full"}];let ue=(()=>{class Te{}return Te.\u0275fac=function(Qe){return new(Qe||Te)},Te.\u0275mod=F.oAB({type:Te}),Te.\u0275inj=F.cJS({imports:[B.Bz.forRoot(ee),B.Bz]}),Te})();var ye=R(2011),ut=R(6895);let rt=(()=>{class Te{constructor(Qe){this.auth=Qe,this.signOut=()=>this.auth.signOut()}ngOnInit(){}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(F.Y36(Ee.e))},Te.\u0275cmp=F.Xpm({type:Te,selectors:[["app-navbar"]],decls:36,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","orders",1,"navbar-brand"],["height","30","src","./assets/img/ibmFurniture_logo.png","alt","ibmFurniture_logo","srcset","",1,"rounded"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","products",1,"nav-link"],["routerLink","clients",1,"nav-link"],["routerLink","materials",1,"nav-link"],["routerLink","orders",1,"nav-link"],["routerLink","providers",1,"nav-link"],["routerLink","shop",1,"nav-link"],["routerLink","history",1,"nav-link"],[1,"navbar-nav"],[1,"fs-3","nav-link","me-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"]],template:function(Qe,ke){1&Qe&&(F.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),F._UZ(3,"img",3),F._uU(4," IBM Furniture "),F.qZA(),F.TgZ(5,"button",4),F._UZ(6,"span",5),F.qZA(),F.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),F._uU(11,"Productos"),F.qZA()(),F.TgZ(12,"li",8)(13,"a",10),F._uU(14,"Clientes"),F.qZA()(),F.TgZ(15,"li",8)(16,"a",11),F._uU(17,"Materiales"),F.qZA()(),F.TgZ(18,"li",8)(19,"a",12),F._uU(20,"Ordenes"),F.qZA()(),F.TgZ(21,"li",8)(22,"a",13),F._uU(23,"Proveedores"),F.qZA()(),F.TgZ(24,"li",8)(25,"a",14),F._uU(26,"Compras"),F.qZA()(),F.TgZ(27,"li",8)(28,"a",15),F._uU(29,"Historial"),F.qZA()()(),F.TgZ(30,"ul",16)(31,"li",8)(32,"a",17),F.NdJ("click",function(){return ke.signOut()}),F.O4$(),F.TgZ(33,"svg",18),F._UZ(34,"path",19)(35,"path",20),F.qZA()()()()()()())},dependencies:[B.yS]}),Te})();function Ye(Te,Et){1&Te&&F._UZ(0,"app-navbar")}let Tt=(()=>{class Te{constructor(Qe){this.auth=Qe,this.title="IBMFurniture",this.isloggedIn$=this.auth.user$.pipe((0,he.U)(ke=>!!ke))}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(F.Y36(Ee.e))},Te.\u0275cmp=F.Xpm({type:Te,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"],[1,"vh-100"]],template:function(Qe,ke){1&Qe&&(F.YNc(0,Ye,1,0,"app-navbar",0),F.ALo(1,"async"),F.TgZ(2,"div",1),F._UZ(3,"router-outlet"),F.qZA()),2&Qe&&F.Q6J("ngIf",F.lcZ(1,1,ke.isloggedIn$))},dependencies:[ut.O5,B.lC,rt,ut.Ov]}),Te})();const Ke_firebase={apiKey:"AIzaSyCmya1htVh_wLXOc0zUSpurtnKYROqfSoU",authDomain:"ibmfurniture.firebaseapp.com",projectId:"ibmfurniture",storageBucket:"ibmfurniture.appspot.com",messagingSenderId:"313012116484",appId:"1:313012116484:web:1b535bfdb657c90b742951"};var Ne=R(4466),Ct=R(9770),ft=R(2843),fe=R(8421),Xe=R(9751),nt=R(5577),yt=R(1144),st=R(576),Se=R(3268);const xt=["addListener","removeListener"],Yt=["addEventListener","removeEventListener"],It=["on","off"];function Bt(Te,Et,Qe,ke){if((0,st.m)(Qe)&&(ke=Qe,Qe=void 0),ke)return Bt(Te,Et,Qe).pipe((0,Se.Z)(ke));const[H,oe]=function Pe(Te){return(0,st.m)(Te.addEventListener)&&(0,st.m)(Te.removeEventListener)}(Te)?Yt.map(Fe=>pt=>Te[Fe](Et,pt,Qe)):function Or(Te){return(0,st.m)(Te.addListener)&&(0,st.m)(Te.removeListener)}(Te)?xt.map(Nt(Te,Et)):function $e(Te){return(0,st.m)(Te.on)&&(0,st.m)(Te.off)}(Te)?It.map(Nt(Te,Et)):[];if(!H&&(0,yt.z)(Te))return(0,nt.z)(Fe=>Bt(Fe,Et,Qe))((0,fe.Xf)(Te));if(!H)throw new TypeError("Invalid event target");return new Xe.y(Fe=>{const pt=(...se)=>Fe.next(1<se.length?se:se[0]);return H(pt),()=>oe(pt)})}function Nt(Te,Et){return Qe=>ke=>Te[Qe](Et,ke)}var qe=R(9646),He=R(1350),Ge=R(7579),ht=R(5032);const lt=new Xe.y(ht.Z);var jt=R(6451),At=R(9300),Qt=R(3900),ln=R(4033),cn=R(4482);const Yn={connector:()=>new Ge.x};function Wn(Te,Et=Yn){const{connector:Qe}=Et;return(0,cn.e)((ke,H)=>{const oe=Qe();(0,fe.Xf)(Te(function $n(Te){return new Xe.y(Et=>Te.subscribe(Et))}(oe))).subscribe(H),H.add(ke.subscribe(oe))})}var Jn=R(4986),gr=R(5403),St=R(9718);function gn(Te,Et){return Et?Qe=>(0,He.z)(Et.pipe((0,le.q)(1),function kr(){return(0,cn.e)((Te,Et)=>{Te.subscribe((0,gr.x)(Et,ht.Z))})}()),Qe.pipe(gn(Te))):(0,nt.z)((Qe,ke)=>Te(Qe,ke).pipe((0,le.q)(1),(0,St.h)(Qe)))}var Bn=R(3532);const Dn="Service workers are disabled or not supported by this browser";class dn{constructor(Et){if(this.serviceWorker=Et,Et){const ke=Bt(Et,"controllerchange").pipe((0,he.U)(()=>Et.controller)),H=(0,Ct.P)(()=>(0,qe.of)(Et.controller)),oe=(0,He.z)(H,ke);this.worker=oe.pipe((0,At.h)(K=>!!K)),this.registration=this.worker.pipe((0,Qt.w)(()=>Et.getRegistration()));const de=Bt(Et,"message").pipe((0,he.U)(K=>K.data)).pipe((0,At.h)(K=>K&&K.type)).pipe(function An(Te){return Te?Et=>Wn(Te)(Et):Et=>function Pt(Te,Et){const Qe=(0,st.m)(Te)?Te:()=>Te;return(0,st.m)(Et)?Wn(Et,{connector:Qe}):ke=>new ln.c(ke,Qe)}(new Ge.x)(Et)}());de.connect(),this.events=de}else this.worker=this.events=this.registration=function Pn(Te){return(0,Ct.P)(()=>(0,ft._)(new Error(Te)))}(Dn)}postMessage(Et,Qe){return this.worker.pipe((0,le.q)(1),(0,we.b)(ke=>{ke.postMessage({action:Et,...Qe})})).toPromise().then(()=>{})}postMessageWithOperation(Et,Qe,ke){const H=this.waitForOperationCompleted(ke),oe=this.postMessage(Et,Qe);return Promise.all([oe,H]).then(([,Fe])=>Fe)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(Et){let Qe;return Qe="string"==typeof Et?ke=>ke.type===Et:ke=>Et.includes(ke.type),this.events.pipe((0,At.h)(Qe))}nextEventOfType(Et){return this.eventsOfType(Et).pipe((0,le.q)(1))}waitForOperationCompleted(Et){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,At.h)(Qe=>Qe.nonce===Et),(0,le.q)(1),(0,he.U)(Qe=>{if(void 0!==Qe.result)return Qe.result;throw new Error(Qe.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let qt=(()=>{class Te{constructor(Qe){if(this.sw=Qe,this.subscriptionChanges=new Ge.x,!Qe.isEnabled)return this.messages=lt,this.notificationClicks=lt,void(this.subscription=lt);this.messages=this.sw.eventsOfType("PUSH").pipe((0,he.U)(H=>H.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,he.U)(H=>H.data)),this.pushManager=this.sw.registration.pipe((0,he.U)(H=>H.pushManager));const ke=this.pushManager.pipe((0,Qt.w)(H=>H.getSubscription()));this.subscription=(0,jt.T)(ke,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(Qe){if(!this.sw.isEnabled)return Promise.reject(new Error(Dn));const ke={userVisibleOnly:!0};let H=this.decodeBase64(Qe.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),oe=new Uint8Array(new ArrayBuffer(H.length));for(let Fe=0;Fe<H.length;Fe++)oe[Fe]=H.charCodeAt(Fe);return ke.applicationServerKey=oe,this.pushManager.pipe((0,Qt.w)(Fe=>Fe.subscribe(ke)),(0,le.q)(1)).toPromise().then(Fe=>(this.subscriptionChanges.next(Fe),Fe))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,le.q)(1),(0,Qt.w)(ke=>{if(null===ke)throw new Error("Not subscribed to push notifications.");return ke.unsubscribe().then(H=>{if(!H)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Dn))}decodeBase64(Qe){return atob(Qe)}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(F.LFG(dn))},Te.\u0275prov=F.Yz7({token:Te,factory:Te.\u0275fac}),Te})(),on=(()=>{class Te{constructor(Qe){if(this.sw=Qe,!Qe.isEnabled)return this.versionUpdates=lt,this.available=lt,this.activated=lt,void(this.unrecoverable=lt);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,At.h)(ke=>"VERSION_READY"===ke.type),(0,he.U)(ke=>({type:"UPDATE_AVAILABLE",current:ke.currentVersion,available:ke.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Dn));const Qe=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:Qe},Qe)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Dn));const Qe=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:Qe},Qe)}}return Te.\u0275fac=function(Qe){return new(Qe||Te)(F.LFG(dn))},Te.\u0275prov=F.Yz7({token:Te,factory:Te.\u0275fac}),Te})();class Mn{}const mr=new F.OlP("NGSW_REGISTER_SCRIPT");function nr(Te,Et,Qe,ke){return()=>{if(!(0,ut.NF)(ke)||!("serviceWorker"in navigator)||!1===Qe.enabled)return;let H;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof Qe.registrationStrategy)H=Qe.registrationStrategy();else{const[Fe,...pt]=(Qe.registrationStrategy||"registerWhenStable:30000").split(":");switch(Fe){case"registerImmediately":H=(0,qe.of)(null);break;case"registerWithDelay":H=rr(+pt[0]||0);break;case"registerWhenStable":H=pt[0]?(0,jt.T)(rn(Te),rr(+pt[0])):rn(Te);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${Qe.registrationStrategy}`)}}Te.get(F.R0b).runOutsideAngular(()=>H.pipe((0,le.q)(1)).subscribe(()=>navigator.serviceWorker.register(Et,{scope:Qe.scope}).catch(Fe=>console.error("Service worker registration failed with:",Fe))))}}function rr(Te){return(0,qe.of)(null).pipe(function Nr(Te,Et=Jn.z){const Qe=function jr(Te=0,Et,Qe=Jn.P){let ke=-1;return null!=Et&&((0,Bn.K)(Et)?Qe=Et:ke=Et),new Xe.y(H=>{let oe=function ar(Te){return Te instanceof Date&&!isNaN(Te)}(Te)?+Te-Qe.now():Te;oe<0&&(oe=0);let Fe=0;return Qe.schedule(function(){H.closed||(H.next(Fe++),0<=ke?this.schedule(void 0,ke):H.complete())},oe)})}(Te,Et);return gn(()=>Qe)}(Te))}function rn(Te){return Te.get(F.z2F).isStable.pipe((0,At.h)(Qe=>Qe))}function ur(Te,Et){return new dn((0,ut.NF)(Et)&&!1!==Te.enabled?navigator.serviceWorker:void 0)}let En=(()=>{class Te{static register(Qe,ke={}){return{ngModule:Te,providers:[{provide:mr,useValue:Qe},{provide:Mn,useValue:ke},{provide:dn,useFactory:ur,deps:[Mn,F.Lbi]},{provide:F.ip1,useFactory:nr,deps:[F.zs3,mr,Mn,F.Lbi],multi:!0}]}}}return Te.\u0275fac=function(Qe){return new(Qe||Te)},Te.\u0275mod=F.oAB({type:Te}),Te.\u0275inj=F.cJS({providers:[qt,on]}),Te})();var Fr=R(2622),wn=R(6535);let Ft=(()=>{class Te{}return Te.\u0275fac=function(Qe){return new(Qe||Te)},Te.\u0275mod=F.oAB({type:Te,bootstrap:[Tt]}),Te.\u0275inj=F.cJS({providers:[wn.U,{provide:"path",useValue:"/RMreport"},Fr.Q],imports:[p.b2,ue,ye.hO.initializeApp(Ke_firebase),Ne.m,En.register("./ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),Te})();(0,F.G48)(),p.q6().bootstrapModule(Ft).catch(Te=>console.error(Te))},1135:(Lt,Le,R)=>{R.d(Le,{X:()=>F});var p=R(7579);class F extends p.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const he=super._subscribe(le);return!he.closed&&le.next(this._value),he}getValue(){const{hasError:le,thrownError:he,_value:we}=this;if(le)throw he;return this._throwIfClosed(),we}next(le){super.next(this._value=le)}}},9751:(Lt,Le,R)=>{R.d(Le,{y:()=>te});var p=R(930),F=R(727),B=R(8822),le=R(9635),he=R(2416),we=R(576),Ee=R(2806);let te=(()=>{class ye{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const Ye=new ye;return Ye.source=this,Ye.operator=rt,Ye}subscribe(rt,Ye,Tt){const Ke=function ue(ye){return ye&&ye instanceof p.Lv||function ee(ye){return ye&&(0,we.m)(ye.next)&&(0,we.m)(ye.error)&&(0,we.m)(ye.complete)}(ye)&&(0,F.Nn)(ye)}(rt)?rt:new p.Hp(rt,Ye,Tt);return(0,Ee.x)(()=>{const{operator:Ne,source:Ct}=this;Ke.add(Ne?Ne.call(Ke,Ct):Ct?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(rt){try{return this._subscribe(rt)}catch(Ye){rt.error(Ye)}}forEach(rt,Ye){return new(Ye=_e(Ye))((Tt,Ke)=>{const Ne=new p.Hp({next:Ct=>{try{rt(Ct)}catch(ft){Ke(ft),Ne.unsubscribe()}},error:Ke,complete:Tt});this.subscribe(Ne)})}_subscribe(rt){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(rt)}[B.L](){return this}pipe(...rt){return(0,le.U)(rt)(this)}toPromise(rt){return new(rt=_e(rt))((Ye,Tt)=>{let Ke;this.subscribe(Ne=>Ke=Ne,Ne=>Tt(Ne),()=>Ye(Ke))})}}return ye.create=ut=>new ye(ut),ye})();function _e(ye){var ut;return null!==(ut=ye??he.v.Promise)&&void 0!==ut?ut:Promise}},7579:(Lt,Le,R)=>{R.d(Le,{x:()=>Ee});var p=R(9751),F=R(727);const le=(0,R(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=R(8737),we=R(2806);let Ee=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const ye=new te(this,this);return ye.operator=ue,ye}_throwIfClosed(){if(this.closed)throw new le}next(ue){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ye of this.currentObservers)ye.next(ue)}})}error(ue){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:ye}=this;for(;ye.length;)ye.shift().error(ue)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:ye,isStopped:ut,observers:rt}=this;return ye||ut?F.Lc:(this.currentObservers=null,rt.push(ue),new F.w0(()=>{this.currentObservers=null,(0,he.P)(rt,ue)}))}_checkFinalizedStatuses(ue){const{hasError:ye,thrownError:ut,isStopped:rt}=this;ye?ue.error(ut):rt&&ue.complete()}asObservable(){const ue=new p.y;return ue.source=this,ue}}return _e.create=(ee,ue)=>new te(ee,ue),_e})();class te extends Ee{constructor(ee,ue){super(),this.destination=ee,this.source=ue}next(ee){var ue,ye;null===(ye=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===ye||ye.call(ue,ee)}error(ee){var ue,ye;null===(ye=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===ye||ye.call(ue,ee)}complete(){var ee,ue;null===(ue=null===(ee=this.destination)||void 0===ee?void 0:ee.complete)||void 0===ue||ue.call(ee)}_subscribe(ee){var ue,ye;return null!==(ye=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(ee))&&void 0!==ye?ye:F.Lc}}},930:(Lt,Le,R)=>{R.d(Le,{Hp:()=>Tt,Lv:()=>ye});var p=R(576),F=R(727),B=R(2416),le=R(7849),he=R(5032);const we=_e("C",void 0,void 0);function _e(fe,Xe,nt){return{kind:fe,value:Xe,error:nt}}var ee=R(3410),ue=R(2806);class ye extends F.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,F.Nn)(Xe)&&Xe.add(this)):this.destination=ft}static create(Xe,nt,yt){return new Tt(Xe,nt,yt)}next(Xe){this.isStopped?Ct(function te(fe){return _e("N",fe,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?Ct(function Ee(fe){return _e("E",void 0,fe)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?Ct(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function rt(fe,Xe){return ut.call(fe,Xe)}class Ye{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:nt}=this;if(nt.next)try{nt.next(Xe)}catch(yt){Ke(yt)}}error(Xe){const{partialObserver:nt}=this;if(nt.error)try{nt.error(Xe)}catch(yt){Ke(yt)}else Ke(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(nt){Ke(nt)}}}class Tt extends ye{constructor(Xe,nt,yt){let st;if(super(),(0,p.m)(Xe)||!Xe)st={next:Xe??void 0,error:nt??void 0,complete:yt??void 0};else{let Se;this&&B.v.useDeprecatedNextContext?(Se=Object.create(Xe),Se.unsubscribe=()=>this.unsubscribe(),st={next:Xe.next&&rt(Xe.next,Se),error:Xe.error&&rt(Xe.error,Se),complete:Xe.complete&&rt(Xe.complete,Se)}):st=Xe}this.destination=new Ye(st)}}function Ke(fe){B.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(fe):(0,le.h)(fe)}function Ct(fe,Xe){const{onStoppedNotification:nt}=B.v;nt&&ee.z.setTimeout(()=>nt(fe,Xe))}const ft={closed:!0,next:he.Z,error:function Ne(fe){throw fe},complete:he.Z}},727:(Lt,Le,R)=>{R.d(Le,{Lc:()=>we,w0:()=>he,Nn:()=>Ee});var p=R(576);const B=(0,R(3888).d)(_e=>function(ue){_e(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((ye,ut)=>`${ut+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var le=R(8737);class he{constructor(ee){this.initialTeardown=ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ee;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const rt of ue)rt.remove(this);else ue.remove(this);const{initialTeardown:ye}=this;if((0,p.m)(ye))try{ye()}catch(rt){ee=rt instanceof B?rt.errors:[rt]}const{_finalizers:ut}=this;if(ut){this._finalizers=null;for(const rt of ut)try{te(rt)}catch(Ye){ee=ee??[],Ye instanceof B?ee=[...ee,...Ye.errors]:ee.push(Ye)}}if(ee)throw new B(ee)}}add(ee){var ue;if(ee&&ee!==this)if(this.closed)te(ee);else{if(ee instanceof he){if(ee.closed||ee._hasParent(this))return;ee._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(ee)}}_hasParent(ee){const{_parentage:ue}=this;return ue===ee||Array.isArray(ue)&&ue.includes(ee)}_addParent(ee){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(ee),ue):ue?[ue,ee]:ee}_removeParent(ee){const{_parentage:ue}=this;ue===ee?this._parentage=null:Array.isArray(ue)&&(0,le.P)(ue,ee)}remove(ee){const{_finalizers:ue}=this;ue&&(0,le.P)(ue,ee),ee instanceof he&&ee._removeParent(this)}}he.EMPTY=(()=>{const _e=new he;return _e.closed=!0,_e})();const we=he.EMPTY;function Ee(_e){return _e instanceof he||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function te(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2416:(Lt,Le,R)=>{R.d(Le,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Lt,Le,R)=>{R.d(Le,{c:()=>we});var p=R(9751),F=R(727),B=R(8343),le=R(5403),he=R(4482);class we extends p.y{constructor(te,_e){super(),this.source=te,this.subjectFactory=_e,this._subject=null,this._refCount=0,this._connection=null,(0,he.A)(te)&&(this.lift=te.lift)}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:te}=this;this._subject=this._connection=null,te?.unsubscribe()}connect(){let te=this._connection;if(!te){te=this._connection=new F.w0;const _e=this.getSubject();te.add(this.source.subscribe((0,le.x)(_e,void 0,()=>{this._teardown(),_e.complete()},ee=>{this._teardown(),_e.error(ee)},()=>this._teardown()))),te.closed&&(this._connection=null,te=F.w0.EMPTY)}return te}refCount(){return(0,B.x)()(this)}}},1350:(Lt,Le,R)=>{R.d(Le,{z:()=>le});var p=R(7886),F=R(3269),B=R(8996);function le(...he){return(0,p.u)()((0,B.D)(he,(0,F.yG)(he)))}},9770:(Lt,Le,R)=>{R.d(Le,{P:()=>B});var p=R(9751),F=R(8421);function B(le){return new p.y(he=>{(0,F.Xf)(le()).subscribe(he)})}},515:(Lt,Le,R)=>{R.d(Le,{E:()=>F});const F=new(R(9751).y)(he=>he.complete())},4128:(Lt,Le,R)=>{R.d(Le,{D:()=>te});var p=R(9751),F=R(4742),B=R(8421),le=R(3269),he=R(5403),we=R(3268),Ee=R(1810);function te(..._e){const ee=(0,le.jO)(_e),{args:ue,keys:ye}=(0,F.D)(_e),ut=new p.y(rt=>{const{length:Ye}=ue;if(!Ye)return void rt.complete();const Tt=new Array(Ye);let Ke=Ye,Ne=Ye;for(let Ct=0;Ct<Ye;Ct++){let ft=!1;(0,B.Xf)(ue[Ct]).subscribe((0,he.x)(rt,fe=>{ft||(ft=!0,Ne--),Tt[Ct]=fe},()=>Ke--,void 0,()=>{(!Ke||!ft)&&(Ne||rt.next(ye?(0,Ee.n)(ye,Tt):Tt),rt.complete())}))}});return ee?ut.pipe((0,we.Z)(ee)):ut}},8996:(Lt,Le,R)=>{R.d(Le,{D:()=>Xe});var p=R(8421),F=R(5363),B=R(9468),we=R(9751),te=R(2202),_e=R(576),ee=R(9672);function ye(nt,yt){if(!nt)throw new Error("Iterable cannot be null");return new we.y(st=>{(0,ee.f)(st,yt,()=>{const Se=nt[Symbol.asyncIterator]();(0,ee.f)(st,yt,()=>{Se.next().then(xt=>{xt.done?st.complete():st.next(xt.value)})},0,!0)})})}var ut=R(3670),rt=R(8239),Ye=R(1144),Tt=R(6495),Ke=R(2206),Ne=R(4532),Ct=R(3260);function Xe(nt,yt){return yt?function fe(nt,yt){if(null!=nt){if((0,ut.c)(nt))return function le(nt,yt){return(0,p.Xf)(nt).pipe((0,B.R)(yt),(0,F.Q)(yt))}(nt,yt);if((0,Ye.z)(nt))return function Ee(nt,yt){return new we.y(st=>{let Se=0;return yt.schedule(function(){Se===nt.length?st.complete():(st.next(nt[Se++]),st.closed||this.schedule())})})}(nt,yt);if((0,rt.t)(nt))return function he(nt,yt){return(0,p.Xf)(nt).pipe((0,B.R)(yt),(0,F.Q)(yt))}(nt,yt);if((0,Ke.D)(nt))return ye(nt,yt);if((0,Tt.T)(nt))return function ue(nt,yt){return new we.y(st=>{let Se;return(0,ee.f)(st,yt,()=>{Se=nt[te.h](),(0,ee.f)(st,yt,()=>{let xt,Yt;try{({value:xt,done:Yt}=Se.next())}catch(It){return void st.error(It)}Yt?st.complete():st.next(xt)},0,!0)}),()=>(0,_e.m)(Se?.return)&&Se.return()})}(nt,yt);if((0,Ct.L)(nt))return function ft(nt,yt){return ye((0,Ct.Q)(nt),yt)}(nt,yt)}throw(0,Ne.z)(nt)}(nt,yt):(0,p.Xf)(nt)}},8421:(Lt,Le,R)=>{R.d(Le,{Xf:()=>ut});var p=R(7582),F=R(1144),B=R(8239),le=R(9751),he=R(3670),we=R(2206),Ee=R(4532),te=R(6495),_e=R(3260),ee=R(576),ue=R(7849),ye=R(8822);function ut(fe){if(fe instanceof le.y)return fe;if(null!=fe){if((0,he.c)(fe))return function rt(fe){return new le.y(Xe=>{const nt=fe[ye.L]();if((0,ee.m)(nt.subscribe))return nt.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,F.z)(fe))return function Ye(fe){return new le.y(Xe=>{for(let nt=0;nt<fe.length&&!Xe.closed;nt++)Xe.next(fe[nt]);Xe.complete()})}(fe);if((0,B.t)(fe))return function Tt(fe){return new le.y(Xe=>{fe.then(nt=>{Xe.closed||(Xe.next(nt),Xe.complete())},nt=>Xe.error(nt)).then(null,ue.h)})}(fe);if((0,we.D)(fe))return Ne(fe);if((0,te.T)(fe))return function Ke(fe){return new le.y(Xe=>{for(const nt of fe)if(Xe.next(nt),Xe.closed)return;Xe.complete()})}(fe);if((0,_e.L)(fe))return function Ct(fe){return Ne((0,_e.Q)(fe))}(fe)}throw(0,Ee.z)(fe)}function Ne(fe){return new le.y(Xe=>{(function ft(fe,Xe){var nt,yt,st,Se;return(0,p.mG)(this,void 0,void 0,function*(){try{for(nt=(0,p.KL)(fe);!(yt=yield nt.next()).done;)if(Xe.next(yt.value),Xe.closed)return}catch(xt){st={error:xt}}finally{try{yt&&!yt.done&&(Se=nt.return)&&(yield Se.call(nt))}finally{if(st)throw st.error}}Xe.complete()})})(fe,Xe).catch(nt=>Xe.error(nt))})}},6451:(Lt,Le,R)=>{R.d(Le,{T:()=>we});var p=R(8189),F=R(8421),B=R(515),le=R(3269),he=R(8996);function we(...Ee){const te=(0,le.yG)(Ee),_e=(0,le._6)(Ee,1/0),ee=Ee;return ee.length?1===ee.length?(0,F.Xf)(ee[0]):(0,p.J)(_e)((0,he.D)(ee,te)):B.E}},9646:(Lt,Le,R)=>{R.d(Le,{of:()=>B});var p=R(3269),F=R(8996);function B(...le){const he=(0,p.yG)(le);return(0,F.D)(le,he)}},2843:(Lt,Le,R)=>{R.d(Le,{_:()=>B});var p=R(9751),F=R(576);function B(le,he){const we=(0,F.m)(le)?le:()=>le,Ee=te=>te.error(we());return new p.y(he?te=>he.schedule(Ee,0,te):Ee)}},5403:(Lt,Le,R)=>{R.d(Le,{x:()=>F});var p=R(930);function F(le,he,we,Ee,te){return new B(le,he,we,Ee,te)}class B extends p.Lv{constructor(he,we,Ee,te,_e,ee){super(he),this.onFinalize=_e,this.shouldUnsubscribe=ee,this._next=we?function(ue){try{we(ue)}catch(ye){he.error(ye)}}:super._next,this._error=te?function(ue){try{te(ue)}catch(ye){he.error(ye)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(ue){he.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},7886:(Lt,Le,R)=>{R.d(Le,{u:()=>F});var p=R(8189);function F(){return(0,p.J)(1)}},6590:(Lt,Le,R)=>{R.d(Le,{d:()=>B});var p=R(4482),F=R(5403);function B(le){return(0,p.e)((he,we)=>{let Ee=!1;he.subscribe((0,F.x)(we,te=>{Ee=!0,we.next(te)},()=>{Ee||we.next(le),we.complete()}))})}},9300:(Lt,Le,R)=>{R.d(Le,{h:()=>B});var p=R(4482),F=R(5403);function B(le,he){return(0,p.e)((we,Ee)=>{let te=0;we.subscribe((0,F.x)(Ee,_e=>le.call(he,_e,te++)&&Ee.next(_e)))})}},590:(Lt,Le,R)=>{R.d(Le,{P:()=>Ee});var p=R(6805),F=R(9300),B=R(5698),le=R(6590),he=R(8068),we=R(4671);function Ee(te,_e){const ee=arguments.length>=2;return ue=>ue.pipe(te?(0,F.h)((ye,ut)=>te(ye,ut,ue)):we.y,(0,B.q)(1),ee?(0,le.d)(_e):(0,he.T)(()=>new p.K))}},4004:(Lt,Le,R)=>{R.d(Le,{U:()=>B});var p=R(4482),F=R(5403);function B(le,he){return(0,p.e)((we,Ee)=>{let te=0;we.subscribe((0,F.x)(Ee,_e=>{Ee.next(le.call(he,_e,te++))}))})}},9718:(Lt,Le,R)=>{R.d(Le,{h:()=>F});var p=R(4004);function F(B){return(0,p.U)(()=>B)}},8189:(Lt,Le,R)=>{R.d(Le,{J:()=>B});var p=R(5577),F=R(4671);function B(le=1/0){return(0,p.z)(F.y,le)}},5577:(Lt,Le,R)=>{R.d(Le,{z:()=>te});var p=R(4004),F=R(8421),B=R(4482),le=R(9672),he=R(5403),Ee=R(576);function te(_e,ee,ue=1/0){return(0,Ee.m)(ee)?te((ye,ut)=>(0,p.U)((rt,Ye)=>ee(ye,rt,ut,Ye))((0,F.Xf)(_e(ye,ut))),ue):("number"==typeof ee&&(ue=ee),(0,B.e)((ye,ut)=>function we(_e,ee,ue,ye,ut,rt,Ye,Tt){const Ke=[];let Ne=0,Ct=0,ft=!1;const fe=()=>{ft&&!Ke.length&&!Ne&&ee.complete()},Xe=yt=>Ne<ye?nt(yt):Ke.push(yt),nt=yt=>{rt&&ee.next(yt),Ne++;let st=!1;(0,F.Xf)(ue(yt,Ct++)).subscribe((0,he.x)(ee,Se=>{ut?.(Se),rt?Xe(Se):ee.next(Se)},()=>{st=!0},void 0,()=>{if(st)try{for(Ne--;Ke.length&&Ne<ye;){const Se=Ke.shift();Ye?(0,le.f)(ee,Ye,()=>nt(Se)):nt(Se)}fe()}catch(Se){ee.error(Se)}}))};return _e.subscribe((0,he.x)(ee,Xe,()=>{ft=!0,fe()})),()=>{Tt?.()}}(ye,ut,_e,ue)))}},5363:(Lt,Le,R)=>{R.d(Le,{Q:()=>le});var p=R(9672),F=R(4482),B=R(5403);function le(he,we=0){return(0,F.e)((Ee,te)=>{Ee.subscribe((0,B.x)(te,_e=>(0,p.f)(te,he,()=>te.next(_e),we),()=>(0,p.f)(te,he,()=>te.complete(),we),_e=>(0,p.f)(te,he,()=>te.error(_e),we)))})}},8343:(Lt,Le,R)=>{R.d(Le,{x:()=>B});var p=R(4482),F=R(5403);function B(){return(0,p.e)((le,he)=>{let we=null;le._refCount++;const Ee=(0,F.x)(he,void 0,void 0,void 0,()=>{if(!le||le._refCount<=0||0<--le._refCount)return void(we=null);const te=le._connection,_e=we;we=null,te&&(!_e||te===_e)&&te.unsubscribe(),he.unsubscribe()});le.subscribe(Ee),Ee.closed||(we=le.connect())})}},5026:(Lt,Le,R)=>{R.d(Le,{R:()=>le});var p=R(4482),F=R(5403);function B(he,we,Ee,te,_e){return(ee,ue)=>{let ye=Ee,ut=we,rt=0;ee.subscribe((0,F.x)(ue,Ye=>{const Tt=rt++;ut=ye?he(ut,Ye,Tt):(ye=!0,Ye),te&&ue.next(ut)},_e&&(()=>{ye&&ue.next(ut),ue.complete()})))}}function le(he,we){return(0,p.e)(B(he,we,arguments.length>=2,!0))}},3099:(Lt,Le,R)=>{R.d(Le,{B:()=>he});var p=R(8421),F=R(7579),B=R(930),le=R(4482);function he(Ee={}){const{connector:te=(()=>new F.x),resetOnError:_e=!0,resetOnComplete:ee=!0,resetOnRefCountZero:ue=!0}=Ee;return ye=>{let ut,rt,Ye,Tt=0,Ke=!1,Ne=!1;const Ct=()=>{rt?.unsubscribe(),rt=void 0},ft=()=>{Ct(),ut=Ye=void 0,Ke=Ne=!1},fe=()=>{const Xe=ut;ft(),Xe?.unsubscribe()};return(0,le.e)((Xe,nt)=>{Tt++,!Ne&&!Ke&&Ct();const yt=Ye=Ye??te();nt.add(()=>{Tt--,0===Tt&&!Ne&&!Ke&&(rt=we(fe,ue))}),yt.subscribe(nt),!ut&&Tt>0&&(ut=new B.Hp({next:st=>yt.next(st),error:st=>{Ne=!0,Ct(),rt=we(ft,_e,st),yt.error(st)},complete:()=>{Ke=!0,Ct(),rt=we(ft,ee),yt.complete()}}),(0,p.Xf)(Xe).subscribe(ut))})(ye)}}function we(Ee,te,..._e){if(!0===te)return void Ee();if(!1===te)return;const ee=new B.Hp({next:()=>{ee.unsubscribe(),Ee()}});return te(..._e).subscribe(ee)}},8675:(Lt,Le,R)=>{R.d(Le,{O:()=>le});var p=R(1350),F=R(3269),B=R(4482);function le(...he){const we=(0,F.yG)(he);return(0,B.e)((Ee,te)=>{(we?(0,p.z)(he,Ee,we):(0,p.z)(he,Ee)).subscribe(te)})}},9468:(Lt,Le,R)=>{R.d(Le,{R:()=>F});var p=R(4482);function F(B,le=0){return(0,p.e)((he,we)=>{we.add(B.schedule(()=>he.subscribe(we),le))})}},3900:(Lt,Le,R)=>{R.d(Le,{w:()=>le});var p=R(8421),F=R(4482),B=R(5403);function le(he,we){return(0,F.e)((Ee,te)=>{let _e=null,ee=0,ue=!1;const ye=()=>ue&&!_e&&te.complete();Ee.subscribe((0,B.x)(te,ut=>{_e?.unsubscribe();let rt=0;const Ye=ee++;(0,p.Xf)(he(ut,Ye)).subscribe(_e=(0,B.x)(te,Tt=>te.next(we?we(ut,Tt,Ye,rt++):Tt),()=>{_e=null,ye()}))},()=>{ue=!0,ye()}))})}},5698:(Lt,Le,R)=>{R.d(Le,{q:()=>le});var p=R(515),F=R(4482),B=R(5403);function le(he){return he<=0?()=>p.E:(0,F.e)((we,Ee)=>{let te=0;we.subscribe((0,B.x)(Ee,_e=>{++te<=he&&(Ee.next(_e),he<=te&&Ee.complete())}))})}},8505:(Lt,Le,R)=>{R.d(Le,{b:()=>he});var p=R(576),F=R(4482),B=R(5403),le=R(4671);function he(we,Ee,te){const _e=(0,p.m)(we)||Ee||te?{next:we,error:Ee,complete:te}:we;return _e?(0,F.e)((ee,ue)=>{var ye;null===(ye=_e.subscribe)||void 0===ye||ye.call(_e);let ut=!0;ee.subscribe((0,B.x)(ue,rt=>{var Ye;null===(Ye=_e.next)||void 0===Ye||Ye.call(_e,rt),ue.next(rt)},()=>{var rt;ut=!1,null===(rt=_e.complete)||void 0===rt||rt.call(_e),ue.complete()},rt=>{var Ye;ut=!1,null===(Ye=_e.error)||void 0===Ye||Ye.call(_e,rt),ue.error(rt)},()=>{var rt,Ye;ut&&(null===(rt=_e.unsubscribe)||void 0===rt||rt.call(_e)),null===(Ye=_e.finalize)||void 0===Ye||Ye.call(_e)}))}):le.y}},8068:(Lt,Le,R)=>{R.d(Le,{T:()=>le});var p=R(6805),F=R(4482),B=R(5403);function le(we=he){return(0,F.e)((Ee,te)=>{let _e=!1;Ee.subscribe((0,B.x)(te,ee=>{_e=!0,te.next(ee)},()=>_e?te.complete():te.error(we())))})}function he(){return new p.K}},4408:(Lt,Le,R)=>{R.d(Le,{o:()=>he});var p=R(727);class F extends p.w0{constructor(Ee,te){super()}schedule(Ee,te=0){return this}}const B={setInterval(we,Ee,...te){const{delegate:_e}=B;return _e?.setInterval?_e.setInterval(we,Ee,...te):setInterval(we,Ee,...te)},clearInterval(we){const{delegate:Ee}=B;return(Ee?.clearInterval||clearInterval)(we)},delegate:void 0};var le=R(8737);class he extends F{constructor(Ee,te){super(Ee,te),this.scheduler=Ee,this.work=te,this.pending=!1}schedule(Ee,te=0){var _e;if(this.closed)return this;this.state=Ee;const ee=this.id,ue=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(ue,ee,te)),this.pending=!0,this.delay=te,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(ue,this.id,te),this}requestAsyncId(Ee,te,_e=0){return B.setInterval(Ee.flush.bind(Ee,this),_e)}recycleAsyncId(Ee,te,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return te;null!=te&&B.clearInterval(te)}execute(Ee,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Ee,te);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,te){let ee,_e=!1;try{this.work(Ee)}catch(ue){_e=!0,ee=ue||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),ee}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:te}=this,{actions:_e}=te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(_e,this),null!=Ee&&(this.id=this.recycleAsyncId(te,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(Lt,Le,R)=>{R.d(Le,{v:()=>B});var p=R(6063);class F{constructor(he,we=F.now){this.schedulerActionCtor=he,this.now=we}schedule(he,we=0,Ee){return new this.schedulerActionCtor(this,he).schedule(Ee,we)}}F.now=p.l.now;class B extends F{constructor(he,we=F.now){super(he,we),this.actions=[],this._active=!1}flush(he){const{actions:we}=this;if(this._active)return void we.push(he);let Ee;this._active=!0;do{if(Ee=he.execute(he.state,he.delay))break}while(he=we.shift());if(this._active=!1,Ee){for(;he=we.shift();)he.unsubscribe();throw Ee}}}},4986:(Lt,Le,R)=>{R.d(Le,{P:()=>le,z:()=>B});var p=R(4408);const B=new(R(7565).v)(p.o),le=B},6063:(Lt,Le,R)=>{R.d(Le,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Lt,Le,R)=>{R.d(Le,{z:()=>p});const p={setTimeout(F,B,...le){const{delegate:he}=p;return he?.setTimeout?he.setTimeout(F,B,...le):setTimeout(F,B,...le)},clearTimeout(F){const{delegate:B}=p;return(B?.clearTimeout||clearTimeout)(F)},delegate:void 0}},2202:(Lt,Le,R)=>{R.d(Le,{h:()=>F});const F=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Lt,Le,R)=>{R.d(Le,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Lt,Le,R)=>{R.d(Le,{K:()=>F});const F=(0,R(3888).d)(B=>function(){B(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Lt,Le,R)=>{R.d(Le,{_6:()=>we,jO:()=>le,yG:()=>he});var p=R(576),F=R(3532);function B(Ee){return Ee[Ee.length-1]}function le(Ee){return(0,p.m)(B(Ee))?Ee.pop():void 0}function he(Ee){return(0,F.K)(B(Ee))?Ee.pop():void 0}function we(Ee,te){return"number"==typeof B(Ee)?Ee.pop():te}},4742:(Lt,Le,R)=>{R.d(Le,{D:()=>he});const{isArray:p}=Array,{getPrototypeOf:F,prototype:B,keys:le}=Object;function he(Ee){if(1===Ee.length){const te=Ee[0];if(p(te))return{args:te,keys:null};if(function we(Ee){return Ee&&"object"==typeof Ee&&F(Ee)===B}(te)){const _e=le(te);return{args:_e.map(ee=>te[ee]),keys:_e}}}return{args:Ee,keys:null}}},8737:(Lt,Le,R)=>{function p(F,B){if(F){const le=F.indexOf(B);0<=le&&F.splice(le,1)}}R.d(Le,{P:()=>p})},3888:(Lt,Le,R)=>{function p(F){const le=F(he=>{Error.call(he),he.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}R.d(Le,{d:()=>p})},1810:(Lt,Le,R)=>{function p(F,B){return F.reduce((le,he,we)=>(le[he]=B[we],le),{})}R.d(Le,{n:()=>p})},2806:(Lt,Le,R)=>{R.d(Le,{O:()=>le,x:()=>B});var p=R(2416);let F=null;function B(he){if(p.v.useDeprecatedSynchronousErrorHandling){const we=!F;if(we&&(F={errorThrown:!1,error:null}),he(),we){const{errorThrown:Ee,error:te}=F;if(F=null,Ee)throw te}}else he()}function le(he){p.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=he)}},9672:(Lt,Le,R)=>{function p(F,B,le,he=0,we=!1){const Ee=B.schedule(function(){le(),we?F.add(this.schedule(null,he)):this.unsubscribe()},he);if(F.add(Ee),!we)return Ee}R.d(Le,{f:()=>p})},4671:(Lt,Le,R)=>{function p(F){return F}R.d(Le,{y:()=>p})},1144:(Lt,Le,R)=>{R.d(Le,{z:()=>p});const p=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(Lt,Le,R)=>{R.d(Le,{D:()=>F});var p=R(576);function F(B){return Symbol.asyncIterator&&(0,p.m)(B?.[Symbol.asyncIterator])}},576:(Lt,Le,R)=>{function p(F){return"function"==typeof F}R.d(Le,{m:()=>p})},3670:(Lt,Le,R)=>{R.d(Le,{c:()=>B});var p=R(8822),F=R(576);function B(le){return(0,F.m)(le[p.L])}},6495:(Lt,Le,R)=>{R.d(Le,{T:()=>B});var p=R(2202),F=R(576);function B(le){return(0,F.m)(le?.[p.h])}},8239:(Lt,Le,R)=>{R.d(Le,{t:()=>F});var p=R(576);function F(B){return(0,p.m)(B?.then)}},3260:(Lt,Le,R)=>{R.d(Le,{L:()=>le,Q:()=>B});var p=R(7582),F=R(576);function B(he){return(0,p.FC)(this,arguments,function*(){const Ee=he.getReader();try{for(;;){const{value:te,done:_e}=yield(0,p.qq)(Ee.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(te)}}finally{Ee.releaseLock()}})}function le(he){return(0,F.m)(he?.getReader)}},3532:(Lt,Le,R)=>{R.d(Le,{K:()=>F});var p=R(576);function F(B){return B&&(0,p.m)(B.schedule)}},4482:(Lt,Le,R)=>{R.d(Le,{A:()=>F,e:()=>B});var p=R(576);function F(le){return(0,p.m)(le?.lift)}function B(le){return he=>{if(F(he))return he.lift(function(we){try{return le(we,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Lt,Le,R)=>{R.d(Le,{Z:()=>le});var p=R(4004);const{isArray:F}=Array;function le(he){return(0,p.U)(we=>function B(he,we){return F(we)?he(...we):he(we)}(he,we))}},5032:(Lt,Le,R)=>{function p(){}R.d(Le,{Z:()=>p})},9635:(Lt,Le,R)=>{R.d(Le,{U:()=>B,z:()=>F});var p=R(4671);function F(...le){return B(le)}function B(le){return 0===le.length?p.y:1===le.length?le[0]:function(we){return le.reduce((Ee,te)=>te(Ee),we)}}},7849:(Lt,Le,R)=>{R.d(Le,{h:()=>B});var p=R(2416),F=R(3410);function B(le){F.z.setTimeout(()=>{const{onUnhandledError:he}=p.v;if(!he)throw le;he(le)})}},4532:(Lt,Le,R)=>{function p(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Le,{z:()=>p})},6895:(Lt,Le,R)=>{R.d(Le,{Do:()=>ft,EM:()=>Os,H9:()=>zs,HT:()=>he,JF:()=>To,K0:()=>Ee,Mx:()=>Ms,NF:()=>Ws,O5:()=>br,Ov:()=>Ie,PM:()=>os,S$:()=>Ke,V_:()=>ee,Ye:()=>fe,b0:()=>Ct,bD:()=>xi,ez:()=>Ps,mk:()=>zn,q:()=>B,sg:()=>Li,w_:()=>we});var p=R(4650);let F=null;function B(){return F}function he(b){F||(F=b)}class we{}const Ee=new p.OlP("DocumentToken");let te=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=p.Yz7({token:b,factory:function(){return function _e(){return(0,p.LFG)(ue)}()},providedIn:"platform"}),b})();const ee=new p.OlP("Location Initialized");let ue=(()=>{class b extends te{constructor(x){super(),this._doc=x,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(x){const W=B().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",x,!1),()=>W.removeEventListener("popstate",x)}onHashChange(x){const W=B().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",x,!1),()=>W.removeEventListener("hashchange",x)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(x){this.location.pathname=x}pushState(x,W,ve){ye()?this._history.pushState(x,W,ve):this.location.hash=ve}replaceState(x,W,ve){ye()?this._history.replaceState(x,W,ve):this.location.hash=ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(Ee))},b.\u0275prov=p.Yz7({token:b,factory:function(){return function ut(){return new ue((0,p.LFG)(Ee))}()},providedIn:"platform"}),b})();function ye(){return!!window.history.pushState}function rt(b,V){if(0==b.length)return V;if(0==V.length)return b;let x=0;return b.endsWith("/")&&x++,V.startsWith("/")&&x++,2==x?b+V.substring(1):1==x?b+V:b+"/"+V}function Ye(b){const V=b.match(/#|\?|$/),x=V&&V.index||b.length;return b.slice(0,x-("/"===b[x-1]?1:0))+b.slice(x)}function Tt(b){return b&&"?"!==b[0]?"?"+b:b}let Ke=(()=>{class b{historyGo(x){throw new Error("Not implemented")}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=p.Yz7({token:b,factory:function(){return(0,p.f3M)(Ct)},providedIn:"root"}),b})();const Ne=new p.OlP("appBaseHref");let Ct=(()=>{class b extends Ke{constructor(x,W){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=W??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return rt(this._baseHref,x)}path(x=!1){const W=this._platformLocation.pathname+Tt(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&x?`${W}${ve}`:W}pushState(x,W,ve,Je){const dt=this.prepareExternalUrl(ve+Tt(Je));this._platformLocation.pushState(x,W,dt)}replaceState(x,W,ve,Je){const dt=this.prepareExternalUrl(ve+Tt(Je));this._platformLocation.replaceState(x,W,dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(te),p.LFG(Ne,8))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),ft=(()=>{class b extends Ke{constructor(x,W){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(x){const W=rt(this._baseHref,x);return W.length>0?"#"+W:W}pushState(x,W,ve,Je){let dt=this.prepareExternalUrl(ve+Tt(Je));0==dt.length&&(dt=this._platformLocation.pathname),this._platformLocation.pushState(x,W,dt)}replaceState(x,W,ve,Je){let dt=this.prepareExternalUrl(ve+Tt(Je));0==dt.length&&(dt=this._platformLocation.pathname),this._platformLocation.replaceState(x,W,dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}}return b.\u0275fac=function(x){return new(x||b)(p.LFG(te),p.LFG(Ne,8))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac}),b})(),fe=(()=>{class b{constructor(x){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const W=this._locationStrategy.getBaseHref();this._baseHref=Ye(yt(W)),this._locationStrategy.onPopState(ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:ve.state,type:ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,W=""){return this.path()==this.normalize(x+Tt(W))}normalize(x){return b.stripTrailingSlash(function nt(b,V){return b&&V.startsWith(b)?V.substring(b.length):V}(this._baseHref,yt(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,W="",ve=null){this._locationStrategy.pushState(ve,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Tt(W)),ve)}replaceState(x,W="",ve=null){this._locationStrategy.replaceState(ve,"",x,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+Tt(W)),ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)})),()=>{const W=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",W){this._urlChangeListeners.forEach(ve=>ve(x,W))}subscribe(x,W,ve){return this._subject.subscribe({next:x,error:W,complete:ve})}}return b.normalizeQueryParams=Tt,b.joinWithSlash=rt,b.stripTrailingSlash=Ye,b.\u0275fac=function(x){return new(x||b)(p.LFG(Ke))},b.\u0275prov=p.Yz7({token:b,factory:function(){return function Xe(){return new fe((0,p.LFG)(Ke))}()},providedIn:"root"}),b})();function yt(b){return b.replace(/\/index.html$/,"")}const st={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Se=(()=>((Se=Se||{})[Se.Decimal=0]="Decimal",Se[Se.Percent=1]="Percent",Se[Se.Currency=2]="Currency",Se[Se.Scientific=3]="Scientific",Se))(),Nt=(()=>((Nt=Nt||{})[Nt.Decimal=0]="Decimal",Nt[Nt.Group=1]="Group",Nt[Nt.List=2]="List",Nt[Nt.PercentSign=3]="PercentSign",Nt[Nt.PlusSign=4]="PlusSign",Nt[Nt.MinusSign=5]="MinusSign",Nt[Nt.Exponential=6]="Exponential",Nt[Nt.SuperscriptingExponent=7]="SuperscriptingExponent",Nt[Nt.PerMille=8]="PerMille",Nt[Nt.Infinity=9]="Infinity",Nt[Nt.NaN=10]="NaN",Nt[Nt.TimeSeparator=11]="TimeSeparator",Nt[Nt.CurrencyDecimal=12]="CurrencyDecimal",Nt[Nt.CurrencyGroup=13]="CurrencyGroup",Nt))();function Qt(b,V){const x=(0,p.cg1)(b),W=x[p.wAp.NumberSymbols][V];if(typeof W>"u"){if(V===Nt.CurrencyDecimal)return x[p.wAp.NumberSymbols][Nt.Decimal];if(V===Nt.CurrencyGroup)return x[p.wAp.NumberSymbols][Nt.Group]}return W}const kt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Re(b,V,x,W,ve){const dt=function fn(b,V="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},W=b.split(";"),ve=W[0],Je=W[1],dt=-1!==ve.indexOf(".")?ve.split("."):[ve.substring(0,ve.lastIndexOf("0")+1),ve.substring(ve.lastIndexOf("0")+1)],pn=dt[0],dr=dt[1]||"";x.posPre=pn.substring(0,pn.indexOf("#"));for(let Er=0;Er<dr.length;Er++){const vn=dr.charAt(Er);"0"===vn?x.minFrac=x.maxFrac=Er+1:"#"===vn?x.maxFrac=Er+1:x.posSuf+=vn}const Zn=pn.split(",");if(x.gSize=Zn[1]?Zn[1].length:0,x.lgSize=Zn[2]||Zn[1]?(Zn[2]||Zn[1]).length:0,Je){const Er=ve.length-x.posPre.length-x.posSuf.length,vn=Je.indexOf("#");x.negPre=Je.substring(0,vn).replace(/'/g,""),x.negSuf=Je.slice(vn+Er).replace(/'/g,"")}else x.negPre=V+x.posPre,x.negSuf=x.posSuf;return x}(function ln(b,V){return(0,p.cg1)(b)[p.wAp.NumberFormats][V]}(V,Se.Currency),Qt(V,Nt.MinusSign));return dt.minFrac=function jr(b){let V;const x=st[b];return x&&(V=x[2]),"number"==typeof V?V:2}(W),dt.maxFrac=dt.minFrac,function Oe(b,V,x,W,ve,Je,dt=!1){let pn="",dr=!1;if(isFinite(b)){let Zn=function Gn(b){let W,ve,Je,dt,pn,V=Math.abs(b)+"",x=0;for((ve=V.indexOf("."))>-1&&(V=V.replace(".","")),(Je=V.search(/e/i))>0?(ve<0&&(ve=Je),ve+=+V.slice(Je+1),V=V.substring(0,Je)):ve<0&&(ve=V.length),Je=0;"0"===V.charAt(Je);Je++);if(Je===(pn=V.length))W=[0],ve=1;else{for(pn--;"0"===V.charAt(pn);)pn--;for(ve-=Je,W=[],dt=0;Je<=pn;Je++,dt++)W[dt]=Number(V.charAt(Je))}return ve>22&&(W=W.splice(0,21),x=ve-1,ve=1),{digits:W,exponent:x,integerLen:ve}}(b);dt&&(Zn=function xn(b){if(0===b.digits[0])return b;const V=b.digits.length-b.integerLen;return b.exponent?b.exponent+=2:(0===V?b.digits.push(0,0):1===V&&b.digits.push(0),b.integerLen+=2),b}(Zn));let Er=V.minInt,vn=V.minFrac,Mr=V.maxFrac;if(Je){const xr=Je.match(kt);if(null===xr)throw new Error(`${Je} is not a valid digit info`);const Ro=xr[1],Zt=xr[3],an=xr[5];null!=Ro&&(Er=Nn(Ro)),null!=Zt&&(vn=Nn(Zt)),null!=an?Mr=Nn(an):null!=Zt&&vn>Mr&&(Mr=vn)}!function Cr(b,V,x){if(V>x)throw new Error(`The minimum number of digits after fraction (${V}) is higher than the maximum (${x}).`);let W=b.digits,ve=W.length-b.integerLen;const Je=Math.min(Math.max(V,ve),x);let dt=Je+b.integerLen,pn=W[dt];if(dt>0){W.splice(Math.max(b.integerLen,dt));for(let vn=dt;vn<W.length;vn++)W[vn]=0}else{ve=Math.max(0,ve),b.integerLen=1,W.length=Math.max(1,dt=Je+1),W[0]=0;for(let vn=1;vn<dt;vn++)W[vn]=0}if(pn>=5)if(dt-1<0){for(let vn=0;vn>dt;vn--)W.unshift(0),b.integerLen++;W.unshift(1),b.integerLen++}else W[dt-1]++;for(;ve<Math.max(0,Je);ve++)W.push(0);let dr=0!==Je;const Zn=V+b.integerLen,Er=W.reduceRight(function(vn,Mr,Fn,si){return si[Fn]=(Mr+=vn)<10?Mr:Mr-10,dr&&(0===si[Fn]&&Fn>=Zn?si.pop():dr=!1),Mr>=10?1:0},0);Er&&(W.unshift(Er),b.integerLen++)}(Zn,vn,Mr);let Fn=Zn.digits,si=Zn.integerLen;const _s=Zn.exponent;let _t=[];for(dr=Fn.every(xr=>!xr);si<Er;si++)Fn.unshift(0);for(;si<0;si++)Fn.unshift(0);si>0?_t=Fn.splice(si,Fn.length):(_t=Fn,Fn=[0]);const wr=[];for(Fn.length>=V.lgSize&&wr.unshift(Fn.splice(-V.lgSize,Fn.length).join(""));Fn.length>V.gSize;)wr.unshift(Fn.splice(-V.gSize,Fn.length).join(""));Fn.length&&wr.unshift(Fn.join("")),pn=wr.join(Qt(x,W)),_t.length&&(pn+=Qt(x,ve)+_t.join("")),_s&&(pn+=Qt(x,Nt.Exponential)+"+"+_s)}else pn=Qt(x,Nt.Infinity);return pn=b<0&&!dr?V.negPre+pn+V.negSuf:V.posPre+pn+V.posSuf,pn}(b,dt,V,Nt.CurrencyGroup,Nt.CurrencyDecimal,ve).replace("\xa4",x).replace("\xa4","").trim()}function Nn(b){const V=parseInt(b);if(isNaN(V))throw new Error("Invalid integer literal when parsing "+b);return V}function Ms(b,V){V=encodeURIComponent(V);for(const x of b.split(";")){const W=x.indexOf("="),[ve,Je]=-1==W?[x,""]:[x.slice(0,W),x.slice(W+1)];if(ve.trim()===V)return decodeURIComponent(Je)}return null}let zn=(()=>{class b{constructor(x,W,ve,Je){this._iterableDiffers=x,this._keyValueDiffers=W,this._ngEl=ve,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(x){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof x?x.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(x){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof x?x.split(/\s+/):x,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const x=this._iterableDiffer.diff(this._rawClass);x&&this._applyIterableChanges(x)}else if(this._keyValueDiffer){const x=this._keyValueDiffer.diff(this._rawClass);x&&this._applyKeyValueChanges(x)}}_applyKeyValueChanges(x){x.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),x.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(x){x.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),x.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!0)):Object.keys(x).forEach(W=>this._toggleClass(W,!!x[W])))}_removeClasses(x){x&&(Array.isArray(x)||x instanceof Set?x.forEach(W=>this._toggleClass(W,!1)):Object.keys(x).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(x,W){(x=x.trim())&&x.split(/\s+/g).forEach(ve=>{W?this._renderer.addClass(this._ngEl.nativeElement,ve):this._renderer.removeClass(this._ngEl.nativeElement,ve)})}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),b})();class Tr{constructor(V,x,W,ve){this.$implicit=V,this.ngForOf=x,this.index=W,this.count=ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Li=(()=>{class b{constructor(x,W,ve){this._viewContainer=x,this._template=W,this._differs=ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const W=this._viewContainer;x.forEachOperation((ve,Je,dt)=>{if(null==ve.previousIndex)W.createEmbeddedView(this._template,new Tr(ve.item,this._ngForOf,-1,-1),null===dt?void 0:dt);else if(null==dt)W.remove(null===Je?void 0:Je);else if(null!==Je){const pn=W.get(Je);W.move(pn,dt),ri(pn,ve)}});for(let ve=0,Je=W.length;ve<Je;ve++){const pn=W.get(ve).context;pn.index=ve,pn.count=Je,pn.ngForOf=this._ngForOf}x.forEachIdentityChange(ve=>{ri(W.get(ve.currentIndex),ve)})}static ngTemplateContextGuard(x,W){return!0}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),b})();function ri(b,V){b.context.$implicit=V.item}let br=(()=>{class b{constructor(x,W){this._viewContainer=x,this._context=new xs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Hr("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Hr("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,W){return!0}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.s_b),p.Y36(p.Rgc))},b.\u0275dir=p.lG2({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),b})();class xs{constructor(){this.$implicit=null,this.ngIf=null}}function Hr(b,V){if(V&&!V.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,p.AaK)(V)}'.`)}function lr(b,V){return new p.vHH(2100,!1)}class Do{createSubscription(V,x){return V.subscribe({next:x,error:W=>{throw W}})}dispose(V){V.unsubscribe()}}class Co{createSubscription(V,x){return V.then(x,W=>{throw W})}dispose(V){}}const no=new Co,Ae=new Do;let Ie=(()=>{class b{constructor(x){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=x}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,W=>this._updateLatestValue(x,W))}_selectStrategy(x){if((0,p.QGY)(x))return no;if((0,p.F4k)(x))return Ae;throw lr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,W){x===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.sBO,16))},b.\u0275pipe=p.Yjl({name:"async",type:b,pure:!1,standalone:!0}),b})(),zs=(()=>{class b{constructor(x,W="USD"){this._locale=x,this._defaultCurrencyCode=W}transform(x,W=this._defaultCurrencyCode,ve="symbol",Je,dt){if(!function ro(b){return!(null==b||""===b||b!=b)}(x))return null;dt=dt||this._locale,"boolean"==typeof ve&&(ve=ve?"symbol":"code");let pn=W||this._defaultCurrencyCode;"code"!==ve&&(pn="symbol"===ve||"symbol-narrow"===ve?function Bn(b,V,x="en"){const W=function Wn(b){return(0,p.cg1)(b)[p.wAp.Currencies]}(x)[b]||st[b]||[],ve=W[1];return"narrow"===V&&"string"==typeof ve?ve:W[0]||b}(pn,"symbol"===ve?"wide":"narrow",dt):ve);try{return Re(function gs(b){if("string"==typeof b&&!isNaN(Number(b)-parseFloat(b)))return Number(b);if("number"!=typeof b)throw new Error(`${b} is not a number`);return b}(x),dt,pn,W,Je)}catch(dr){throw lr()}}}return b.\u0275fac=function(x){return new(x||b)(p.Y36(p.soG,16),p.Y36(p.EJc,16))},b.\u0275pipe=p.Yjl({name:"currency",type:b,pure:!0,standalone:!0}),b})();let Ps=(()=>{class b{}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=p.oAB({type:b}),b.\u0275inj=p.cJS({}),b})();const xi="browser";function Ws(b){return b===xi}function os(b){return"server"===b}let Os=(()=>{class b{}return b.\u0275prov=(0,p.Yz7)({token:b,providedIn:"root",factory:()=>new so((0,p.LFG)(Ee),window)}),b})();class so{constructor(V,x){this.document=V,this.window=x,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const x=function ii(b,V){const x=b.getElementById(V)||b.getElementsByName(V)[0];if(x)return x;if("function"==typeof b.createTreeWalker&&b.body&&(b.body.createShadowRoot||b.body.attachShadow)){const W=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let ve=W.currentNode;for(;ve;){const Je=ve.shadowRoot;if(Je){const dt=Je.getElementById(V)||Je.querySelector(`[name="${V}"]`);if(dt)return dt}ve=W.nextNode()}}return null}(this.document,V);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const x=this.window.history;x&&x.scrollRestoration&&(x.scrollRestoration=V)}}scrollToElement(V){const x=V.getBoundingClientRect(),W=x.left+this.window.pageXOffset,ve=x.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(W-Je[0],ve-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=Ri(this.window.history)||Ri(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ri(b){return Object.getOwnPropertyDescriptor(b,"scrollRestoration")}class To{}},4650:(Lt,Le,R)=>{R.d(Le,{$8M:()=>mn,$Z:()=>Uh,AFp:()=>RE,ALo:()=>Q0,AaK:()=>te,AsE:()=>rg,CHM:()=>$o,CRH:()=>uE,CZH:()=>Dy,CqO:()=>mf,D6c:()=>OD,DdM:()=>H0,EJc:()=>qI,EpF:()=>Im,F4k:()=>Dm,FYo:()=>Cd,FiY:()=>Ir,G48:()=>gD,Gf:()=>oE,GfV:()=>Mg,Gpc:()=>ue,JOm:()=>ns,KtG:()=>uo,LFG:()=>ki,LSH:()=>Kl,Lbi:()=>zI,Lck:()=>$w,MMx:()=>a_,NdJ:()=>Yp,O4$:()=>fr,OlP:()=>Lr,Oqu:()=>Jc,PXZ:()=>lD,Q6J:()=>pf,QGY:()=>Zd,QP$:()=>ot,Qsj:()=>Qy,R0b:()=>xu,RDi:()=>mg,Rgc:()=>dg,SBq:()=>ec,Sil:()=>YI,Suo:()=>aE,TTD:()=>Vo,TgZ:()=>qd,Tol:()=>tg,VKq:()=>G0,WLB:()=>z0,X6Q:()=>pD,XFs:()=>St,Xpm:()=>Qe,Xts:()=>$f,Y36:()=>wl,YKP:()=>N0,YNc:()=>Wp,Yjl:()=>K,Yz7:()=>jt,Z0I:()=>cn,ZZ4:()=>P_,_Bn:()=>O0,_UZ:()=>Ts,_Vd:()=>Jl,_c5:()=>RD,_uU:()=>Hm,aQg:()=>O_,c2e:()=>WI,cJS:()=>Qt,cg1:()=>cy,dDg:()=>sD,dqk:()=>Mn,eFA:()=>GE,ekj:()=>_f,eoX:()=>jE,f3M:()=>Fl,g9A:()=>OE,h0i:()=>Sf,hGG:()=>PD,hij:()=>Df,iGM:()=>sE,ifc:()=>on,ip1:()=>xE,jDz:()=>F0,kL8:()=>dy,kcU:()=>oa,lG2:()=>de,lcZ:()=>J0,lqb:()=>Zl,lri:()=>UE,n5z:()=>Rn,oAB:()=>Fe,oxw:()=>Qp,q4F:()=>Yf,qLn:()=>Vc,qOj:()=>Gd,qZA:()=>Di,rWj:()=>BE,sBO:()=>mD,sIi:()=>zd,s_b:()=>Ey,soG:()=>Cy,tb:()=>NE,tp0:()=>gi,uIk:()=>Kc,vHH:()=>Ye,vpe:()=>Pl,wAp:()=>Vn,xi3:()=>X0,xp6:()=>bs,z2F:()=>by,zSh:()=>bh,zs3:()=>Qa});var p=R(7579),F=R(727),B=R(9751),le=R(6451),he=R(3099);function we(n){for(let r in n)if(n[r]===we)return r;throw Error("Could not find renamed property on target object.")}function Ee(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function te(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(te).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function _e(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ee=we({__forward_ref__:we});function ue(n){return n.__forward_ref__=ue,n.toString=function(){return te(this())},n}function ye(n){return ut(n)?n():n}function ut(n){return"function"==typeof n&&n.hasOwnProperty(ee)&&n.__forward_ref__===ue}class Ye extends Error{constructor(r,o){super(function Tt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function Ke(n){return"string"==typeof n?n:null==n?"":String(n)}function Xe(n,r){throw new Ye(-201,!1)}function He(n,r){null==n&&function Ge(n,r,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function jt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ln(n){return $n(n,An)||$n(n,gr)}function cn(n){return null!==ln(n)}function $n(n,r){return n.hasOwnProperty(r)?n[r]:null}function Pt(n){return n&&(n.hasOwnProperty(Jn)||n.hasOwnProperty(kr))?n[Jn]:null}const An=we({\u0275prov:we}),Jn=we({\u0275inj:we}),gr=we({ngInjectableDef:we}),kr=we({ngInjectorDef:we});var St=(()=>((St=St||{})[St.Default=0]="Default",St[St.Host=1]="Host",St[St.Self=2]="Self",St[St.SkipSelf=4]="SkipSelf",St[St.Optional=8]="Optional",St))();let gn;function ar(n){const r=gn;return gn=n,r}function jr(n,r,o){const u=ln(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&St.Optional?null:void 0!==r?r:void Xe(te(n))}function Dn(n){return{toString:n}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),on=(()=>{return(n=on||(on={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",on;var n})();const Mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),rr={},rn=[],ur=we({\u0275cmp:we}),En=we({\u0275dir:we}),Fr=we({\u0275pipe:we}),wn=we({\u0275mod:we}),Ft=we({\u0275fac:we}),Te=we({__NG_ELEMENT_ID__:we});let Et=0;function Qe(n){return Dn(()=>{const o=!0===n.standalone,u={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,id:"c"+Et++,styles:n.styles||rn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,m=n.features;return l.inputs=se(n.inputs,u),l.outputs=se(n.outputs),m&&m.forEach(C=>C(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(H).filter(oe):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(De).filter(oe):null,l})}function H(n){return Y(n)||G(n)}function oe(n){return null!==n}function Fe(n){return Dn(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function se(n,r){if(null==n)return rr;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=u,r&&(r[l]=h)}return o}const de=Qe;function K(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Y(n){return n[ur]||null}function G(n){return n[En]||null}function De(n){return n[Fr]||null}function ot(n){const r=Y(n)||G(n)||De(n);return null!==r&&r.standalone}function kt(n,r){const o=n[wn]||null;if(!o&&!0===r)throw new Error(`Type ${te(n)} does not have '\u0275mod' property.`);return o}function Hr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Gr(n){return Array.isArray(n)&&!0===n[1]}function Gs(n){return 0!=(8&n.flags)}function Ki(n){return 2==(2&n.flags)}function ci(n){return 1==(1&n.flags)}function Zr(n){return null!==n.template}function yi(n){return 0!=(256&n[2])}function qi(n,r){return n.hasOwnProperty(Ft)?n[Ft]:null}class zr{constructor(r,o,u){this.previousValue=r,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Vo(){return zs}function zs(n){return n.type.prototype.ngOnChanges&&(n.setInput=gs),ro}function ro(){const n=Uo(this),r=n?.current;if(r){const o=n.previous;if(o===rr)n.previous=r;else for(let u in r)o[u]=r[u];n.current=null,this.ngOnChanges(r)}}function gs(n,r,o,u){const l=Uo(n)||function Ps(n,r){return n[bo]=r}(n,{previous:rr,current:null}),h=l.current||(l.current={}),m=l.previous,C=this.declaredInputs[o],S=m[C];h[C]=new zr(S&&S.currentValue,r,m===rr),n[u]=r}Vo.ngInherit=!0;const bo="__ngSimpleChanges__";function Uo(n){return n[bo]||null}function yr(n){for(;Array.isArray(n);)n=n[0];return n}function Ri(n,r){return yr(r[n])}function ii(n,r){return yr(r[n.index])}function To(n,r){return n.data[r]}function Yi(n,r){return n[r]}function Xr(n,r){const o=r[n];return Hr(o)?o:o[0]}function jo(n){return 64==(64&n[2])}function di(n,r){return null==r?null:n[r]}function ei(n){n[18]=0}function Qi(n,r){n[5]+=r;let o=n,u=n[3];for(;null!==u&&(1===r&&1===o[5]||-1===r&&0===o[5]);)u[5]+=r,o=u,u=u[3]}const Sn={lFrame:Wo(null),bindingsEnabled:!0};function ms(){return Sn.bindingsEnabled}function mt(){return Sn.lFrame.lView}function kn(){return Sn.lFrame.tView}function $o(n){return Sn.lFrame.contextLView=n,n[8]}function uo(n){return Sn.lFrame.contextLView=null,n}function Ar(){let n=k();for(;null!==n&&64===n.type;)n=n.parent;return n}function k(){return Sn.lFrame.currentTNode}function M(n,r){const o=Sn.lFrame;o.currentTNode=n,o.isParent=r}function q(){return Sn.lFrame.isParent}function hi(){const n=Sn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function lo(){return Sn.lFrame.bindingIndex++}function li(n){const r=Sn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Ia(n,r){const o=Sn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Go(r)}function Go(n){Sn.lFrame.currentDirectiveIndex=n}function So(){return Sn.lFrame.currentQueryIndex}function Pi(n){Sn.lFrame.currentQueryIndex=n}function ks(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Da(n,r,o){if(o&St.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||o&St.Host||(l=ks(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const u=Sn.lFrame=Mo();return u.currentTNode=r,u.lView=n,!0}function ho(n){const r=Mo(),o=n[1];Sn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Mo(){const n=Sn.lFrame,r=null===n?null:n.child;return null===r?Wo(n):r}function Wo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function fo(){const n=Sn.lFrame;return Sn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Oi=fo;function vs(){const n=fo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hr(){return Sn.lFrame.selectedIndex}function vi(n){Sn.lFrame.selectedIndex=n}function Sr(){const n=Sn.lFrame;return To(n.tView,n.selectedIndex)}function fr(){Sn.lFrame.currentNamespace="svg"}function oa(){!function bi(){Sn.lFrame.currentNamespace=null}()}function Bi(n,r){for(let o=r.directiveStart,u=r.directiveEnd;o<u;o++){const h=n.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:L,ngOnDestroy:Z}=h;m&&(n.contentHooks||(n.contentHooks=[])).push(-o,m),C&&((n.contentHooks||(n.contentHooks=[])).push(o,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,C)),S&&(n.viewHooks||(n.viewHooks=[])).push(-o,S),L&&((n.viewHooks||(n.viewHooks=[])).push(o,L),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,L)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Z)}}function Fs(n,r,o){ji(n,r,3,o)}function aa(n,r,o,u){(3&n[2])===o&&ji(n,r,o,u)}function ls(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function ji(n,r,o,u){const h=u??-1,m=r.length-1;let C=0;for(let S=void 0!==u?65535&n[18]:0;S<m;S++)if("number"==typeof r[S+1]){if(C=r[S],null!=u&&C>=u)break}else r[S]<0&&(n[18]+=65536),(C<h||-1==h)&&(_i(n,o,r,S),n[18]=(4294901760&n[18])+S+2),S++}function _i(n,r,o,u){const l=o[u]<0,h=o[u+1],C=n[l?-o[u]:o[u]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(C)}finally{}}}else try{h.call(C)}finally{}}class cs{constructor(r,o,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function W(n,r,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const h=o[u++],m=o[u++],C=o[u++];n.setAttribute(r,m,C,h)}else{const h=l,m=o[++u];Je(h)?n.setProperty(r,h,m):n.setAttribute(r,h,m),u++}}return u}function ve(n){return 3===n||4===n||6===n}function Je(n){return 64===n.charCodeAt(0)}function dt(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let u=0;u<r.length;u++){const l=r[u];"number"==typeof l?o=l:0===o||pn(n,o,l,null,-1===o||2===o?r[++u]:null)}}return n}function pn(n,r,o,u,l){let h=0,m=n.length;if(-1===r)m=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){m=-1;break}if(C>r){m=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===o){if(null===u)return void(null!==l&&(n[h+1]=l));if(u===n[h+1])return void(n[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(n.splice(m,0,r),h=m+1),n.splice(h++,0,o),null!==u&&n.splice(h++,0,u),null!==l&&n.splice(h++,0,l)}function dr(n){return-1!==n}function Zn(n){return 32767&n}function vn(n,r){let o=function Er(n){return n>>16}(n),u=r;for(;o>0;)u=u[15],o--;return u}let Mr=!0;function Fn(n){const r=Mr;return Mr=n,r}let wr=0;const xr={};function Zt(n,r){const o=ua(n,r);if(-1!==o)return o;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,an(u.data,n),an(r,null),an(u.blueprint,null));const l=Wt(n,r),h=n.injectorIndex;if(dr(l)){const m=Zn(l),C=vn(l,r),S=C[1].data;for(let L=0;L<8;L++)r[h+L]=C[m+L]|S[m+L]}return r[h+8]=l,h}function an(n,r){n.push(0,0,0,0,0,0,0,0,r)}function ua(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Wt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=r;for(;null!==l;){if(u=Rr(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function We(n,r,o){!function Ro(n,r,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Te)&&(u=o[Te]),null==u&&(u=o[Te]=wr++);const l=255&u;r.data[n+(l>>5)]|=1<<l}(n,r,o)}function oi(n,r,o){if(o&St.Optional||void 0!==n)return n;Xe()}function Ua(n,r,o,u){if(o&St.Optional&&void 0===u&&(u=null),0==(o&(St.Self|St.Host))){const l=n[9],h=ar(void 0);try{return l?l.get(r,u,o&St.Optional):jr(r,u,o&St.Optional)}finally{ar(h)}}return oi(u,0,o)}function Ru(n,r,o,u=St.Default,l){if(null!==n){if(1024&r[2]){const m=function $a(n,r,o,u,l){let h=n,m=r;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const C=Pu(h,m,o,u|St.Self,xr);if(C!==xr)return C;let S=h.parent;if(!S){const L=m[21];if(L){const Z=L.get(o,xr,u);if(Z!==xr)return Z}S=Rr(m),m=m[15]}h=S}return l}(n,r,o,u,xr);if(m!==xr)return m}const h=Pu(n,r,o,u,xr);if(h!==xr)return h}return Ua(r,o,u,l)}function Pu(n,r,o,u,l){const h=function Ol(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Te)?n[Te]:void 0;return"number"==typeof r?r>=0?255&r:or:r}(o);if("function"==typeof h){if(!Da(r,n,u))return u&St.Host?oi(l,0,u):Ua(r,o,u,l);try{const m=h(u);if(null!=m||u&St.Optional)return m;Xe()}finally{Oi()}}else if("number"==typeof h){let m=null,C=ua(n,r),S=-1,L=u&St.Host?r[16][6]:null;for((-1===C||u&St.SkipSelf)&&(S=-1===C?Wt(n,r):r[C+8],-1!==S&&ca(u,!1)?(m=r[1],C=Zn(S),r=vn(S,r)):C=-1);-1!==C;){const Z=r[1];if(Nl(h,C,Z.data)){const ie=Ba(C,r,o,m,u,L);if(ie!==xr)return ie}S=r[C+8],-1!==S&&ca(u,r[1].data[C+8]===L)&&Nl(h,C,r)?(m=Z,C=Zn(S),r=vn(S,r)):C=-1}}return l}function Ba(n,r,o,u,l,h){const m=r[1],C=m.data[n+8],Z=ja(C,m,o,null==u?Ki(C)&&Mr:u!=m&&0!=(3&C.type),l&St.Host&&h===C);return null!==Z?la(r,m,Z,C):xr}function ja(n,r,o,u,l){const h=n.providerIndexes,m=r.data,C=1048575&h,S=n.directiveStart,Z=h>>20,Ce=l?C+Z:n.directiveEnd;for(let ze=u?C:C+Z;ze<Ce;ze++){const vt=m[ze];if(ze<S&&o===vt||ze>=S&&vt.type===o)return ze}if(l){const ze=m[S];if(ze&&Zr(ze)&&ze.type===o)return S}return null}function la(n,r,o,u){let l=n[o];const h=r.data;if(function Zo(n){return n instanceof cs}(l)){const m=l;m.resolving&&function Ct(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Ne(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ke(n)}(h[o]));const C=Fn(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?ar(m.injectImpl):null;Da(n,u,St.Default);try{l=n[o]=m.factory(void 0,h,n,u),r.firstCreatePass&&o>=u.directiveStart&&function po(n,r,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(u){const m=zs(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,h))}(o,h[o],r)}finally{null!==S&&ar(S),Fn(C),m.resolving=!1,Oi()}}return l}function Nl(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function ca(n,r){return!(n&St.Self||n&St.Host&&r)}class Ca{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,u){return Ru(this._tNode,this._lView,r,u,o)}}function or(){return new Ca(Ar(),mt())}function Rn(n){return Dn(()=>{const r=n.prototype.constructor,o=r[Ft]||Js(r),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const h=l[Ft]||Js(l);if(h&&h!==o)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Js(n){return ut(n)?()=>{const r=Js(ye(n));return r&&r()}:qi(n)}function Rr(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function mn(n){return function bt(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const h=o[l];if(ve(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(h===r)return o[l+1];l+=2}}}return null}(Ar(),n)}const In="__parameters__";function $i(n,r,o){return Dn(()=>{const u=function zt(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(r);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return C.annotation=m,C;function C(S,L,Z){const ie=S.hasOwnProperty(In)?S[In]:Object.defineProperty(S,In,{value:[]})[In];for(;ie.length<=Z;)ie.push(null);return(ie[Z]=ie[Z]||[]).push(m),S}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Lr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=jt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pi(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let u=n[o];Array.isArray(u)?(r===n&&(r=n.slice(0,o)),pi(u,r)):r!==n&&r.push(u)}return r}function Ni(n,r){n.forEach(o=>Array.isArray(o)?Ni(o,r):r(o))}function ou(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Vs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ws(n,r,o){let u=E(n,r);return u>=0?n[1|u]=o:(u=~u,function kl(n,r,o,u){let l=n.length;if(l==r)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=o,n[r+1]=u}}(n,u,r,o)),u}function v(n,r){const o=E(n,r);if(o>=0)return n[1|o]}function E(n,r){return function T(n,r,o){let u=0,l=n.length>>o;for(;l!==u;){const h=u+(l-u>>1),m=n[h<<o];if(r===m)return h<<o;m>r?l=h:u=h+1}return~(l<<o)}(n,r,1)}const Wr={},Is="__NG_DI_FLAG__",Ei="ngTempTokenPath",Fu=/\n/gm,uu="__source";let lu;function Ds(n){const r=lu;return lu=n,r}function cu(n,r=St.Default){if(void 0===lu)throw new Ye(-203,!1);return null===lu?jr(n,void 0,r):lu.get(n,r&St.Optional?null:void 0,r)}function ki(n,r=St.Default){return(function Bn(){return gn}()||cu)(ye(n),r)}function Fl(n,r=St.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),ki(n,r)}function sl(n){const r=[];for(let o=0;o<n.length;o++){const u=ye(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Ye(900,!1);let l,h=St.Default;for(let m=0;m<u.length;m++){const C=u[m],S=Hi(C);"number"==typeof S?-1===S?l=C.token:h|=S:l=C}r.push(ki(l,h))}else r.push(ki(u))}return r}function fa(n,r){return n[Is]=r,n.prototype[Is]=r,n}function Hi(n){return n[Is]}const Ir=fa($i("Optional"),8),gi=fa($i("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const ne=new Map;let ge=0;const mi="__ngContext__";function Fi(n,r){Hr(r)?(n[mi]=r[20],function it(n){ne.set(n[20],n)}(r)):n[mi]=r}function hl(n,r){return undefined(n,r)}function fl(n){const r=n[3];return Gr(r)?r[3]:r}function Ac(n){return d(n[13])}function _(n){return d(n[4])}function d(n){for(;null!==n&&!Gr(n);)n=n[4];return n}function I(n,r,o,u,l){if(null!=u){let h,m=!1;Gr(u)?h=u:Hr(u)&&(m=!0,u=u[0]);const C=yr(u);0===n&&null!==o?null==l?ad(r,o,C):Za(r,o,C,l||null,!0):1===n&&null!==o?Za(r,o,C,l||null,!0):2===n?function hh(n,r,o){const u=ld(n,r);u&&function ud(n,r,o,u){n.removeChild(r,o,u)}(n,u,r,o)}(r,C,m):3===n&&r.destroyNode(C),null!=h&&function My(n,r,o,u,l){const h=o[7];h!==yr(o)&&I(r,n,u,h,l);for(let C=10;C<o.length;C++){const S=o[C];Mc(S[1],S,n,r,u,h)}}(r,n,h,o,l)}}function tt(n,r,o){return n.createElement(r,o)}function $l(n,r){const o=n[9],u=o.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Qi(l,-1)),o.splice(u,1)}function Cs(n,r){if(n.length<=10)return;const o=10+r,u=n[o];if(u){const l=u[17];null!==l&&l!==n&&$l(l,u),r>0&&(n[o-1][4]=u[4]);const h=Vs(n,10+r);!function Ut(n,r){Mc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Hl(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&Mc(n,r,o,3,null,null),function pr(n){let r=n[13];if(!r)return _u(n[1],n);for(;r;){let o=null;if(Hr(r))o=r[13];else{const u=r[10];u&&(o=u)}if(!o){for(;r&&!r[4]&&r!==n;)Hr(r)&&_u(r[1],r),r=r[3];null===r&&(r=n),Hr(r)&&_u(r[1],r),o=r&&r[4]}r=o}}(r)}}function _u(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function ea(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=r[o[u]];if(!(l instanceof cs)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const C=l[h[m]],S=h[m+1];try{S.call(C)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function od(n,r){const o=n.cleanup,u=r[7];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],C="function"==typeof m?m(r):yr(r[m]),S=u[l=o[h+2]],L=o[h+3];"boolean"==typeof L?C.removeEventListener(o[h],S,L):L>=0?u[l=L]():u[l=-L].unsubscribe(),h+=2}else{const m=u[l=o[h+1]];o[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)(0,u[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&Gr(r[3])){o!==r[3]&&$l(o,r);const u=r[19];null!==u&&u.detachView(n)}!function Gt(n){ne.delete(n[20])}(r)}}function Sc(n,r,o){return function Gu(n,r,o){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return o[0];if(2&u.flags){const l=n.data[u.directiveStart].encapsulation;if(l===on.None||l===on.Emulated)return null}return ii(u,o)}(n,r.parent,o)}function Za(n,r,o,u,l){n.insertBefore(r,o,u,l)}function ad(n,r,o){n.appendChild(r,o)}function tr(n,r,o,u,l){null!==u?Za(n,r,o,u,l):ad(n,r,o)}function ld(n,r){return n.parentNode(r)}let Ya,pg=function cd(n,r,o){return 40&n.type?ii(n,o):null};function zu(n,r,o,u){const l=Sc(n,u,r),h=r[11],C=function Of(n,r,o){return pg(n,r,o)}(u.parent||r[6],u,r);if(null!=l)if(Array.isArray(o))for(let S=0;S<o.length;S++)tr(h,l,o[S],C,!1);else tr(h,l,o,C,!1)}function Eu(n,r){if(null!==r){const o=r.type;if(3&o)return ii(r,n);if(4&o)return Wu(-1,n[r.index]);if(8&o){const u=r.child;if(null!==u)return Eu(n,u);{const l=n[r.index];return Gr(l)?Wu(-1,l):yr(l)}}if(32&o)return hl(r,n)()||yr(n[r.index]);{const u=Ff(n,r);return null!==u?Array.isArray(u)?u[0]:Eu(fl(n[16]),u):Eu(n,r.next)}}return null}function Ff(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Wu(n,r){const o=10+n+1;if(o<r.length){const u=r[o],l=u[1].firstChild;if(null!==l)return Eu(u,l)}return r[7]}function pl(n,r,o,u,l,h,m){for(;null!=o;){const C=u[o.index],S=o.type;if(m&&0===r&&(C&&Fi(yr(C),u),o.flags|=4),64!=(64&o.flags))if(8&S)pl(n,r,o.child,u,l,h,!1),I(r,n,l,C,h);else if(32&S){const L=hl(o,u);let Z;for(;Z=L();)I(r,n,l,Z,h);I(r,n,l,C,h)}else 16&S?xc(n,r,u,o,l,h):I(r,n,l,C,h);o=m?o.projectionNext:o.next}}function Mc(n,r,o,u,l,h){pl(o,u,n.firstChild,r,l,h,!1)}function xc(n,r,o,u,l,h){const m=o[16],S=m[6].projection[u.projection];if(Array.isArray(S))for(let L=0;L<S.length;L++)I(r,n,l,S[L],h);else pl(n,r,S,m[3],l,h,!0)}function Ii(n,r,o){n.setAttribute(r,"style",o)}function Rc(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function mg(n){Ya=n}class yh{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ku(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}const _g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rs=(()=>((rs=rs||{})[rs.NONE=0]="NONE",rs[rs.HTML=1]="HTML",rs[rs.STYLE=2]="STYLE",rs[rs.SCRIPT=3]="SCRIPT",rs[rs.URL=4]="URL",rs[rs.RESOURCE_URL=5]="RESOURCE_URL",rs))();function Kl(n){const r=function Ed(){const n=mt();return n&&n[12]}();return r?r.sanitize(rs.URL,n)||"":function Wl(n,r){const o=function vh(n){return n instanceof yh&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?Ku(n):function Eh(n){return(n=String(n)).match(_g)?n:"unsafe:"+n}(Ke(n))}const $f=new Lr("ENVIRONMENT_INITIALIZER"),qu=new Lr("INJECTOR",-1),ql=new Lr("INJECTOR_DEF_TYPES");class Hf{get(r,o=Wr){if(o===Wr){const u=new Error(`NullInjectorError: No provider for ${te(r)}!`);throw u.name="NullInjectorError",u}return o}}function Gy(...n){return{\u0275providers:Gf(0,n)}}function Gf(n,...r){const o=[],u=new Set;let l;return Ni(r,h=>{const m=h;Ch(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&Du(l,o),o}function Du(n,r){for(let o=0;o<n.length;o++){const{providers:l}=n[o];Ni(l,h=>{r.push(h)})}}function Ch(n,r,o,u){if(!(n=ye(n)))return!1;let l=null,h=Pt(n);const m=!h&&Y(n);if(h||m){if(m&&!m.standalone)return!1;l=n}else{const S=n.ngModule;if(h=Pt(S),!h)return!1;l=S}const C=u.has(l);if(m){if(C)return!1;if(u.add(l),m.dependencies){const S="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const L of S)Ch(L,r,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let L;u.add(l);try{Ni(h.imports,Z=>{Ch(Z,r,o,u)&&(L||(L=[]),L.push(Z))})}finally{}void 0!==L&&Du(L,r)}if(!C){const L=qi(l)||(()=>new l);r.push({provide:l,useFactory:L,deps:rn},{provide:ql,useValue:l,multi:!0},{provide:$f,useValue:()=>ki(l),multi:!0})}const S=h.providers;null==S||C||Ni(S,Z=>{r.push(Z)})}}return l!==n&&void 0!==n.providers}const bg=we({provide:String,useValue:we});function Nc(n){return null!==n&&"object"==typeof n&&bg in n}function va(n){return"function"==typeof n}const bh=new Lr("Set Injector scope."),kc={},zf={};let Th;function Id(){return void 0===Th&&(Th=new Hf),Th}class Zl{}class Wf extends Zl{constructor(r,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yl(r,m=>this.processProvider(m)),this.records.set(qu,Fc(void 0,this)),l.has("environment")&&this.records.set(Zl,Fc(void 0,this));const h=this.records.get(bh);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(ql.multi,rn,St.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Ds(this),u=ar(void 0);try{return r()}finally{Ds(o),ar(u)}}get(r,o=Wr,u=St.Default){this.assertNotDestroyed();const l=Ds(this),h=ar(void 0);try{if(!(u&St.SkipSelf)){let C=this.records.get(r);if(void 0===C){const S=function Wy(n){return"function"==typeof n||"object"==typeof n&&n instanceof Lr}(r)&&ln(r);C=S&&this.injectableDefInScope(S)?Fc(Ah(r),kc):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(u&St.Self?Id():this.parent).get(r,o=u&St.Optional&&o===Wr?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Ei]=m[Ei]||[]).unshift(te(r)),l)throw m;return function Ma(n,r,o,u){const l=n[Ei];throw r[uu]&&l.unshift(r[uu]),n.message=function Wa(n,r,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=te(r);if(Array.isArray(r))l=r.map(te).join(" -> ");else if("object"==typeof r){let h=[];for(let m in r)if(r.hasOwnProperty(m)){let C=r[m];h.push(m+":"+("string"==typeof C?JSON.stringify(C):te(C)))}l=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(Fu,"\n  ")}`}("\n"+n.message,l,o,u),n.ngTokenPath=l,n[Ei]=null,n}(m,r,"R3InjectorError",this.source)}throw m}finally{ar(h),Ds(l)}}resolveInjectorInitializers(){const r=Ds(this),o=ar(void 0);try{const u=this.get($f.multi,rn,St.Self);for(const l of u)l()}finally{Ds(r),ar(o)}}toString(){const r=[],o=this.records;for(const u of o.keys())r.push(te(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processProvider(r){let o=va(r=ye(r))?r:ye(r&&r.provide);const u=function Dd(n){return Nc(n)?Fc(void 0,n.useValue):Fc(_l(n),kc)}(r);if(va(r)||!0!==r.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Fc(void 0,kc,!0),l.factory=()=>sl(l.multi),this.records.set(o,l)),o=r,l.multi.push(r)}this.records.set(o,u)}hydrate(r,o){return o.value===kc&&(o.value=zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function zy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=ye(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Ah(n){const r=ln(n),o=null!==r?r.factory:qi(n);if(null!==o)return o;if(n instanceof Lr)throw new Ye(204,!1);if(n instanceof Function)return function Sh(n){const r=n.length;if(r>0)throw function Aa(n,r){const o=[];for(let u=0;u<n;u++)o.push(r);return o}(r,"?"),new Ye(204,!1);const o=function Yn(n){const r=n&&(n[An]||n[gr]);if(r){const o=function Wn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ye(204,!1)}function _l(n,r,o){let u;if(va(n)){const l=ye(n);return qi(l)||Ah(l)}if(Nc(n))u=()=>ye(n.useValue);else if(function vl(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...sl(n.deps||[]));else if(function yl(n){return!(!n||!n.useExisting)}(n))u=()=>ki(ye(n.useExisting));else{const l=ye(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return qi(l)||Ah(l);u=()=>new l(...sl(n.deps))}return u}function Fc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ky(n){return!!n.\u0275providers}function Yl(n,r){for(const o of n)Array.isArray(o)?Yl(o,r):Ky(o)?Yl(o.\u0275providers,r):r(o)}class Zu{}class Zy{resolveComponentFactory(r){throw function Ag(n){const r=Error(`No component factory found for ${te(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jl=(()=>{class n{}return n.NULL=new Zy,n})();function Kf(){return Xl(Ar(),mt())}function Xl(n,r){return new ec(ii(n,r))}let ec=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=Kf,n})();function qf(n){return n instanceof ec?n.nativeElement:n}class Cd{}let Qy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Zf(){const n=mt(),o=Xr(Ar().index,n);return(Hr(o)?o:n)[11]}(),n})(),Mh=(()=>{class n{}return n.\u0275prov=jt({token:n,providedIn:"root",factory:()=>null}),n})();class Mg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Yf=new Mg("14.3.0"),tc={};function xh(n){return n.ngOriginalError}class Vc{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&xh(r);for(;o&&xh(o);)o=xh(o);return o||null}}function No(n){return n instanceof Function?n():n}function Jf(n,r,o){let u=n.length;for(;;){const l=n.indexOf(r,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===u||n.charCodeAt(l+h)<=32)return l}o=l+1}}const Xf="ng-template";function ev(n,r,o){let u=0;for(;u<n.length;){let l=n[u++];if(o&&"class"===l){if(l=n[u],-1!==Jf(l.toLowerCase(),r,0))return!0}else if(1===l){for(;u<n.length&&"string"==typeof(l=n[u++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Td(n){return 4===n.type&&n.value!==Xf}function Pg(n,r,o){return r===(4!==n.type||o?n.value:Xf)}function tv(n,r,o){let u=4;const l=n.attrs||[],h=function Ad(n){for(let r=0;r<n.length;r++)if(ve(n[r]))return r;return n.length}(l);let m=!1;for(let C=0;C<r.length;C++){const S=r[C];if("number"!=typeof S){if(!m)if(4&u){if(u=2|1&u,""!==S&&!Pg(n,S,o)||""===S&&1===r.length){if(ka(u))return!1;m=!0}}else{const L=8&u?S:r[++C];if(8&u&&null!==n.attrs){if(!ev(n.attrs,L,o)){if(ka(u))return!1;m=!0}continue}const ie=nv(8&u?"class":S,l,Td(n),o);if(-1===ie){if(ka(u))return!1;m=!0;continue}if(""!==L){let Ce;Ce=ie>h?"":l[ie+1].toLowerCase();const ze=8&u?Ce:null;if(ze&&-1!==Jf(ze,L,0)||2&u&&L!==Ce){if(ka(u))return!1;m=!0}}}}else{if(!m&&!ka(u)&&!ka(S))return!1;if(m&&ka(S))continue;m=!1,u=S|1&u}}return ka(u)||m}function ka(n){return 0==(1&n)}function nv(n,r,o,u){if(null===r)return-1;let l=0;if(u||!o){let h=!1;for(;l<r.length;){const m=r[l];if(m===n)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Og(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===r)return o;o++}return-1}(r,n)}function ep(n,r,o=!1){for(let u=0;u<r.length;u++)if(tv(n,r[u],o))return!0;return!1}function kg(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],o=1,u=2,l="",h=!1;for(;o<n.length;){let m=n[o];if("string"==typeof m)if(2&u){const C=n[++o];l+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!ka(m)&&(r+=kg(h,l),l=""),u=m,h=h||!ka(u);o++}return""!==l&&(r+=kg(h,l)),r}const Qn={};function bs(n){Lg(kn(),mt(),hr()+n,!1)}function Lg(n,r,o,u){if(!u)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Fs(r,h,o)}else{const h=n.preOrderHooks;null!==h&&aa(r,h,0,o)}vi(o)}function kh(n,r=null,o=null,u){const l=Fh(n,r,o,u);return l.resolveInjectorInitializers(),l}function Fh(n,r=null,o=null,u,l=new Set){const h=[o||rn,Gy(n)];return u=u||("object"==typeof n?void 0:te(n)),new Wf(h,r||Id(),u||null,l)}let Qa=(()=>{class n{static create(o,u){if(Array.isArray(o))return kh({name:""},u,o,"");{const l=o.name??"";return kh({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=Wr,n.NULL=new Hf,n.\u0275prov=jt({token:n,providedIn:"any",factory:()=>ki(qu)}),n.__NG_ELEMENT_ID__=-1,n})();function wl(n,r=St.Default){const o=mt();return null===o?ki(n,r):Ru(Ar(),o,ye(n),r)}function Uh(){throw new Error("invalid")}function Bh(n,r){return n<<17|r<<2}function Fa(n){return n>>17&32767}function cp(n){return 2|n}function Qu(n){return(131068&n)>>2}function js(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function Kh(n,r){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],h=o[u+1];if(-1!==h){const m=n.data[h];Pi(l),m.contentQueries(2,r[h],h)}}}function Ld(n,r,o,u,l,h,m,C,S,L,Z){const ie=r.blueprint.slice();return ie[0]=l,ie[2]=76|u,(null!==Z||n&&1024&n[2])&&(ie[2]|=1024),ei(ie),ie[3]=ie[15]=n,ie[8]=o,ie[10]=m||n&&n[10],ie[11]=C||n&&n[11],ie[12]=S||n&&n[12]||null,ie[9]=L||n&&n[9]||null,ie[6]=h,ie[20]=function be(){return ge++}(),ie[21]=Z,ie[16]=2==r.type?n[16]:ie,ie}function Dl(n,r,o,u,l){let h=n.data[r];if(null===h)h=function Vd(n,r,o,u,l){const h=k(),m=q(),S=n.data[r]=function Tp(n,r,o,u,l,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,r,u,l);return null===n.firstChild&&(n.firstChild=S),null!==h&&(m?null==h.child&&null!==S.parent&&(h.child=S):null===h.next&&(h.next=S)),S}(n,r,o,u,l),function Ys(){return Sn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=l;const m=function P(){const n=Sn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return M(h,!0),h}function Cl(n,r,o,u){if(0===o)return-1;const l=r.length;for(let h=0;h<o;h++)r.push(u),n.blueprint.push(u),n.data.push(null);return l}function bl(n,r,o){ho(r);try{const u=n.viewQuery;null!==u&&jd(1,u,o);const l=n.template;null!==l&&qh(n,r,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kh(n,r),n.staticViewQueries&&jd(2,n.viewQuery,o);const h=n.components;null!==h&&function Dp(n,r){for(let o=0;o<r.length;o++)Mv(n,r[o])}(r,h)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,vs()}}function Ja(n,r,o,u){const l=r[2];if(128!=(128&l)){ho(r);try{ei(r),function us(n){return Sn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&qh(n,r,o,2,u);const m=3==(3&l);if(m){const L=n.preOrderCheckHooks;null!==L&&Fs(r,L,null)}else{const L=n.preOrderHooks;null!==L&&aa(r,L,0,null),ls(r,0)}if(function Pp(n){for(let r=Ac(n);null!==r;r=_(r)){if(!r[2])continue;const o=r[9];for(let u=0;u<o.length;u++){const l=o[u],h=l[3];0==(512&l[2])&&Qi(h,1),l[2]|=512}}}(r),function Av(n){for(let r=Ac(n);null!==r;r=_(r))for(let o=10;o<r.length;o++){const u=r[o],l=u[1];jo(u)&&Ja(l,u,l.template,u[8])}}(r),null!==n.contentQueries&&Kh(n,r),m){const L=n.contentCheckHooks;null!==L&&Fs(r,L)}else{const L=n.contentHooks;null!==L&&aa(r,L,1),ls(r,1)}!function Ev(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)vi(~l);else{const h=l,m=o[++u],C=o[++u];Ia(m,h),C(2,r[h])}}}finally{vi(-1)}}(n,r);const C=n.components;null!==C&&function wv(n,r){for(let o=0;o<r.length;o++)Sv(n,r[o])}(r,C);const S=n.viewQuery;if(null!==S&&jd(2,S,u),m){const L=n.viewCheckHooks;null!==L&&Fs(r,L)}else{const L=n.viewHooks;null!==L&&aa(r,L,2),ls(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Qi(r[3],-1))}finally{vs()}}}function qh(n,r,o,u,l){const h=hr(),m=2&u;try{vi(-1),m&&r.length>22&&Lg(n,r,22,!1),o(u,l)}finally{vi(h)}}function Tl(n,r,o){!ms()||(function Dv(n,r,o,u){const l=o.directiveStart,h=o.directiveEnd;n.firstCreatePass||Zt(o,r),Fi(u,r);const m=o.initialInputs;for(let C=l;C<h;C++){const S=n.data[C],L=Zr(S);L&&Tv(r,o,S);const Z=la(r,n,C,o);Fi(Z,r),null!==m&&Rp(0,C-l,Z,S,0,m),L&&(Xr(o.index,r)[8]=Z)}}(n,r,o,ii(o,r)),128==(128&o.flags)&&function Cv(n,r,o){const u=o.directiveStart,l=o.directiveEnd,h=o.index,m=function Ho(){return Sn.lFrame.currentDirectiveIndex}();try{vi(h);for(let C=u;C<l;C++){const S=n.data[C],L=r[C];Go(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&lm(S,L)}}finally{vi(-1),Go(m)}}(n,r,o))}function Zh(n,r,o=ii){const u=r.localNames;if(null!==u){let l=r.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],C=-1===m?o(r,n):n[m];n[l++]=C}}}function dc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Cp(n,r,o,u,l,h,m,C,S,L){const Z=22+u,ie=Z+l,Ce=function Iv(n,r){const o=[];for(let u=0;u<r;u++)o.push(u<n?null:Qn);return o}(Z,ie),ze="function"==typeof L?L():L;return Ce[1]={type:n,blueprint:Ce,template:o,queries:null,viewQuery:C,declTNode:r,data:Ce.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:ze,incompleteFirstPass:!1}}function Yh(n,r,o,u){const l=nf(r);null===o?l.push(u):(l.push(o),n.firstCreatePass&&bu(n).push(u,l.length-1))}function rm(n,r,o){for(let u in n)if(n.hasOwnProperty(u)){const l=n[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(r,l):o[u]=[r,l]}return o}function im(n,r){const u=r.directiveEnd,l=n.data,h=r.attrs,m=[];let C=null,S=null;for(let L=r.directiveStart;L<u;L++){const Z=l[L],ie=Z.inputs,Ce=null===h||Td(r)?null:dm(ie,h);m.push(Ce),C=rm(ie,L,C),S=rm(Z.outputs,L,S)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=m,r.inputs=C,r.outputs=S}function sm(n,r){const o=Xr(r,n);16&o[2]||(o[2]|=32)}function Qh(n,r,o,u){let l=!1;if(ms()){const h=function bv(n,r,o){const u=n.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];ep(o,m.selectors,!1)&&(l||(l=[]),We(Zt(o,r),n,m.type),Zr(m)?(Jh(n,o),l.unshift(m)):l.push(m))}return l}(n,r,o),m=null===u?null:{"":-1};if(null!==h){l=!0,cm(o,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const ie=h[Z];ie.providersResolver&&ie.providersResolver(ie)}let C=!1,S=!1,L=Cl(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const ie=h[Z];o.mergedAttrs=dt(o.mergedAttrs,ie.hostAttrs),Xh(n,o,r,L,ie),xp(L,ie,m),null!==ie.contentQueries&&(o.flags|=8),(null!==ie.hostBindings||null!==ie.hostAttrs||0!==ie.hostVars)&&(o.flags|=128);const Ce=ie.type.prototype;!C&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),C=!0),!S&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),S=!0),L++}im(n,o)}m&&function Mp(n,r,o){if(r){const u=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=o[r[l+1]];if(null==h)throw new Ye(-301,!1);u.push(r[l],h)}}}(o,u,m)}return o.mergedAttrs=dt(o.mergedAttrs,o.attrs),l}function Sp(n,r,o,u,l,h){const m=h.hostBindings;if(m){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const S=~r.index;(function um(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(C)!=S&&C.push(S),C.push(u,l,m)}}function lm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Jh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function xp(n,r,o){if(o){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)o[r.exportAs[u]]=n;Zr(r)&&(o[""]=n)}}function cm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Xh(n,r,o,u,l){n.data[u]=l;const h=l.factory||(l.factory=qi(l.type)),m=new cs(h,Zr(l),wl);n.blueprint[u]=m,o[u]=m,Sp(n,r,0,u,Cl(n,o,l.hostVars,Qn),l)}function Tv(n,r,o){const u=ii(r,n),l=dc(o),h=n[10],m=$c(n,Ld(n,l,null,o.onPush?32:16,u,r,h,h.createRenderer(u,o),null,null,null));n[r.index]=m}function La(n,r,o,u,l,h){const m=ii(n,r);!function ef(n,r,o,u,l,h,m){if(null==h)n.removeAttribute(r,l,o);else{const C=null==m?Ke(h):m(h,u||"",l);n.setAttribute(r,l,C,o)}}(r[11],m,h,n.value,o,u,l)}function Rp(n,r,o,u,l,h){const m=h[r];if(null!==m){const C=u.setInput;for(let S=0;S<m.length;){const L=m[S++],Z=m[S++],ie=m[S++];null!==C?u.setInput(o,ie,L,Z):o[Z]=ie}}}function dm(n,r){let o=null,u=0;for(;u<r.length;){const l=r[u];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,n[l],r[u+1])),u+=2}else u+=2;else u+=4}return o}function tf(n,r,o,u){return new Array(n,!0,!1,r,null,0,u,o,null,null)}function Sv(n,r){const o=Xr(r,n);if(jo(o)){const u=o[1];48&o[2]?Ja(u,o,u.template,o[8]):o[5]>0&&Ud(o)}}function Ud(n){for(let u=Ac(n);null!==u;u=_(u))for(let l=10;l<u.length;l++){const h=u[l];if(jo(h))if(512&h[2]){const m=h[1];Ja(m,h,m.template,h[8])}else h[5]>0&&Ud(h)}const o=n[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=Xr(o[u],n);jo(l)&&l[5]>0&&Ud(l)}}function Mv(n,r){const o=Xr(r,n),u=o[1];(function Op(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(u,o),bl(u,o,o[8])}function $c(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Bd(n){for(;n;){n[2]|=32;const r=fl(n);if(yi(n)&&!r)return n;n=r}return null}function Xu(n,r,o,u=!0){const l=r[10];l.begin&&l.begin();try{Ja(n,r,n.template,o)}catch(m){throw u&&hm(r,m),m}finally{l.end&&l.end()}}function jd(n,r,o){Pi(0),r(n,o)}function nf(n){return n[7]||(n[7]=[])}function bu(n){return n.cleanup||(n.cleanup=[])}function hm(n,r){const o=n[9],u=o?o.get(Vc,null):null;u&&u.handleError(r)}function $d(n,r,o,u,l){for(let h=0;h<o.length;){const m=o[h++],C=o[h++],S=r[m],L=n.data[m];null!==L.setInput?L.setInput(S,l,u,C):S[C]=l}}function el(n,r,o){const u=Ri(r,n);!function J(n,r,o){n.setValue(r,o)}(n[11],u,o)}function sf(n,r,o){let u=o?n.styles:null,l=o?n.classes:null,h=0;if(null!==r)for(let m=0;m<r.length;m++){const C=r[m];"number"==typeof C?h=C:1==h?l=_e(l,C):2==h&&(u=_e(u,C+": "+r[++m]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function Hc(n,r,o,u,l=!1){for(;null!==o;){const h=r[o.index];if(null!==h&&u.push(yr(h)),Gr(h))for(let C=10;C<h.length;C++){const S=h[C],L=S[1].firstChild;null!==L&&Hc(S[1],S,L,u)}const m=o.type;if(8&m)Hc(n,r,o.child,u);else if(32&m){const C=hl(o,r);let S;for(;S=C();)u.push(S)}else if(16&m){const C=Ff(r,o);if(Array.isArray(C))u.push(...C);else{const S=fl(r[16]);Hc(S[1],S,C,u,!0)}}o=l?o.projectionNext:o.next}return u}class Hd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return Hc(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Gr(r)){const o=r[8],u=o?o.indexOf(this):-1;u>-1&&(Cs(r,u),Vs(o,u))}this._attachedToViewContainer=!1}Hl(this._lView[1],this._lView)}onDestroy(r){Yh(this._lView[1],this._lView,null,r)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Xu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bn(n,r){Mc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ye(902,!1);this._appRef=r}}class Np extends Hd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xu(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class kp extends Jl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Y(r);return new Gc(o,this.ngModule)}}function af(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Fp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,u){const l=this.injector.get(r,tc,u);return l!==tc||o===tc?l:this.parentInjector.get(r,o,u)}}class Gc extends Zu{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function rv(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return af(this.componentDef.inputs)}get outputs(){return af(this.componentDef.outputs)}create(r,o,u,l){let h=(l=l||this.ngModule)instanceof Zl?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Fp(r,h):r,C=m.get(Cd,null);if(null===C)throw new Ye(407,!1);const S=m.get(Mh,null),L=C.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ie=u?function bp(n,r,o){return n.selectRootElement(r,o===on.ShadowDom)}(L,u,this.componentDef.encapsulation):tt(L,Z,function Rv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Ce=this.componentDef.onPush?288:272,ze=Cp(0,null,null,1,0,null,null,null,null,null),vt=Ld(null,ze,null,Ce,null,null,C,L,S,m,null);let Ht,nn;ho(vt);try{const Tn=function Vp(n,r,o,u,l,h){const m=o[1];o[22]=n;const S=Dl(m,22,2,"#host",null),L=S.mergedAttrs=r.hostAttrs;null!==L&&(sf(S,L,!0),null!==n&&(W(l,n,L),null!==S.classes&&Rc(l,n,S.classes),null!==S.styles&&Ii(l,n,S.styles)));const Z=u.createRenderer(n,r),ie=Ld(o,dc(r),null,r.onPush?32:16,o[22],S,u,Z,h||null,null,null);return m.firstCreatePass&&(We(Zt(S,o),m,r.type),Jh(m,S),cm(S,o.length,1)),$c(o,ie),o[22]=ie}(ie,this.componentDef,vt,C,L);if(ie)if(u)W(L,ie,["ng-version",Yf.full]);else{const{attrs:Un,classes:Mt}=function iv(n){const r=[],o=[];let u=1,l=2;for(;u<n.length;){let h=n[u];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++u]):8===l&&o.push(h);else{if(!ka(l))break;l=h}u++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Un&&W(L,ie,Un),Mt&&Mt.length>0&&Rc(L,ie,Mt.join(" "))}if(nn=To(ze,22),void 0!==o){const Un=nn.projection=[];for(let Mt=0;Mt<this.ngContentSelectors.length;Mt++){const Kn=o[Mt];Un.push(null!=Kn?Array.from(Kn):null)}}Ht=function Nv(n,r,o,u){const l=o[1],h=function am(n,r,o){const u=Ar();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xh(n,u,r,Cl(n,r,1,null),o),im(n,u));const l=la(r,n,u.directiveStart,u);Fi(l,r);const h=ii(u,r);return h&&Fi(h,r),l}(l,o,r);if(n[8]=o[8]=h,null!==u)for(const C of u)C(h,r);if(r.contentQueries){const C=Ar();r.contentQueries(1,h,C.directiveStart)}const m=Ar();return!l.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(vi(m.index),Sp(o[1],m,0,m.directiveStart,m.directiveEnd,r),lm(r,h)),h}(Tn,this.componentDef,vt,[Up]),bl(ze,vt,null)}finally{vs()}return new Ov(this.componentType,Ht,Xl(nn,vt),vt,nn)}}class Ov extends class Ql{}{constructor(r,o,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Np(l),this.componentType=r}setInput(r,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[r])){const h=this._rootLView;$d(h[1],h,l,r,o),sm(h,this._tNode.index)}}get injector(){return new Ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Up(){const n=Ar();Bi(mt()[1],n)}function Gd(n){let r=function uf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;r;){let l;if(Zr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ye(903,!1);l=r.\u0275dir}if(l){if(o){u.push(l);const m=n;m.inputs=hc(n.inputs),m.declaredInputs=hc(n.declaredInputs),m.outputs=hc(n.outputs);const C=l.hostBindings;C&&fm(n,C);const S=l.viewQuery,L=l.contentQueries;if(S&&Fv(n,S),L&&Bp(n,L),Ee(n.inputs,l.inputs),Ee(n.declaredInputs,l.declaredInputs),Ee(n.outputs,l.outputs),Zr(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let m=0;m<h.length;m++){const C=h[m];C&&C.ngInherit&&C(n),C===Gd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function kv(n){let r=0,o=null;for(let u=n.length-1;u>=0;u--){const l=n[u];l.hostVars=r+=l.hostVars,l.hostAttrs=dt(l.hostAttrs,o=dt(o,l.hostAttrs))}}(u)}function hc(n){return n===rr?{}:n===rn?[]:n}function Fv(n,r){const o=n.viewQuery;n.viewQuery=o?(u,l)=>{r(u,l),o(u,l)}:r}function Bp(n,r){const o=n.contentQueries;n.contentQueries=o?(u,l,h)=>{r(u,l,h),o(u,l,h)}:r}function fm(n,r){const o=n.hostBindings;n.hostBindings=o?(u,l)=>{r(u,l),o(u,l)}:r}let cf=null;function fc(){if(!cf){const n=Mn.Symbol;if(n&&n.iterator)cf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const u=r[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cf=u)}}}return cf}function zd(n){return!!Wd(n)&&(Array.isArray(n)||!(n instanceof Map)&&fc()in n)}function Wd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xa(n,r,o){return n[r]=o}function $s(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Tu(n,r,o,u){const l=$s(n,r,o);return $s(n,r+1,u)||l}function Kc(n,r,o,u){const l=mt();return $s(l,lo(),r)&&(kn(),La(Sr(),l,n,r,o,u)),Kc}function mc(n,r,o,u,l,h){const C=Tu(n,function fi(){return Sn.lFrame.bindingIndex}(),o,l);return li(2),C?r+Ke(o)+u+Ke(l)+h:Qn}function Wp(n,r,o,u,l,h,m,C){const S=mt(),L=kn(),Z=n+22,ie=L.firstCreatePass?function wm(n,r,o,u,l,h,m,C,S){const L=r.consts,Z=Dl(r,n,4,m||null,di(L,C));Qh(r,o,Z,di(L,S)),Bi(r,Z);const ie=Z.tViews=Cp(2,Z,u,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L);return null!==r.queries&&(r.queries.template(r,Z),ie.queries=r.queries.embeddedTView(Z)),Z}(Z,L,S,r,o,u,l,h,m):L.data[Z];M(ie,!1);const Ce=S[11].createComment("");zu(L,S,Ce,ie),Fi(Ce,S),$c(S,S[Z]=tf(Ce,S,Ce,ie)),ci(ie)&&Tl(L,S,ie),null!=m&&Zh(S,ie,C)}function pf(n,r,o){const u=mt();return $s(u,lo(),r)&&function ko(n,r,o,u,l,h,m,C){const S=ii(r,o);let Z,L=r.inputs;!C&&null!=L&&(Z=L[u])?($d(n,o,Z,u,l),Ki(r)&&sm(o,r.index)):3&r.type&&(u=function Ap(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=m?m(l,r.value||"",u):l,h.setProperty(S,u,l))}(kn(),Sr(),u,n,r,u[11],o,!1),pf}function gf(n,r,o,u,l){const m=l?"class":"style";$d(n,o,r.inputs[m],m,u)}function qd(n,r,o,u){const l=mt(),h=kn(),m=22+n,C=l[11],S=l[m]=tt(C,r,function qo(){return Sn.lFrame.currentNamespace}()),L=h.firstCreatePass?function Kd(n,r,o,u,l,h,m){const C=r.consts,L=Dl(r,n,2,l,di(C,h));return Qh(r,o,L,di(C,m)),null!==L.attrs&&sf(L,L.attrs,!1),null!==L.mergedAttrs&&sf(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(m,h,l,0,r,o,u):h.data[m];M(L,!0);const Z=L.mergedAttrs;null!==Z&&W(C,S,Z);const ie=L.classes;null!==ie&&Rc(C,S,ie);const Ce=L.styles;return null!==Ce&&Ii(C,S,Ce),64!=(64&L.flags)&&zu(h,l,S,L),0===function ao(){return Sn.lFrame.elementDepthCount}()&&Fi(S,l),function sr(){Sn.lFrame.elementDepthCount++}(),ci(L)&&(Tl(h,l,L),function cc(n,r,o){if(Gs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const m=n.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,L,l)),null!==u&&Zh(l,L),qd}function Di(){let n=Ar();q()?function Ze(){Sn.lFrame.isParent=!1}():(n=n.parent,M(n,!1));const r=n;!function Ao(){Sn.lFrame.elementDepthCount--}();const o=kn();return o.firstCreatePass&&(Bi(o,n),Gs(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ru(n){return 0!=(16&n.flags)}(r)&&gf(o,r,mt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function b(n){return 0!=(32&n.flags)}(r)&&gf(o,r,mt(),r.stylesWithoutHost,!1),Di}function Ts(n,r,o,u){return qd(n,r,o,u),Di(),Ts}function Im(){return mt()}function Zd(n){return!!n&&"function"==typeof n.then}function Dm(n){return!!n&&"function"==typeof n.subscribe}const mf=Dm;function Yp(n,r,o,u){const l=mt(),h=kn(),m=Ar();return function Lv(n,r,o,u,l,h,m,C){const S=ci(u),Z=n.firstCreatePass&&bu(n),ie=r[8],Ce=nf(r);let ze=!0;if(3&u.type||C){const nn=ii(u,r),Tn=C?C(nn):nn,Un=Ce.length,Mt=C?ni=>C(yr(ni[u.index])):u.index;let Kn=null;if(!C&&S&&(Kn=function Ci(n,r,o,u){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===o&&l[h+1]===u){const C=r[7],S=l[h+2];return C.length>S?C[S]:null}"string"==typeof m&&(h+=2)}return null}(n,r,l,u.index)),null!==Kn)(Kn.__ngLastListenerFn__||Kn).__ngNextListenerFn__=h,Kn.__ngLastListenerFn__=h,ze=!1;else{h=zi(u,r,ie,h,!1);const ni=o.listen(Tn,l,h);Ce.push(h,ni),Z&&Z.push(l,Mt,Un,Un+1)}}else h=zi(u,r,ie,h,!1);const vt=u.outputs;let Ht;if(ze&&null!==vt&&(Ht=vt[l])){const nn=Ht.length;if(nn)for(let Tn=0;Tn<nn;Tn+=2){const Wi=r[Ht[Tn]][Ht[Tn+1]].subscribe(h),uh=Ce.length;Ce.push(h,Wi),Z&&Z.push(l,u.index,uh,-(uh+1))}}}(h,l,l[11],m,n,r,0,u),Yp}function Vv(n,r,o,u){try{return!1!==o(u)}catch(l){return hm(n,l),!1}}function zi(n,r,o,u,l){return function h(m){if(m===Function)return u;Bd(2&n.flags?Xr(n.index,r):r);let S=Vv(r,0,u,m),L=h.__ngNextListenerFn__;for(;L;)S=Vv(r,0,L,m)&&S,L=L.__ngNextListenerFn__;return l&&!1===S&&(m.preventDefault(),m.returnValue=!1),S}}function Qp(n=1){return function Ko(n){return(Sn.lFrame.contextLView=function ia(n,r){for(;n>0;)r=r[15],n--;return r}(n,Sn.lFrame.contextLView))[8]}(n)}function xl(n,r,o,u,l){const h=n[o+1],m=null===r;let C=u?Fa(h):Qu(h),S=!1;for(;0!==C&&(!1===S||m);){const Z=n[C+1];yf(n[C],r)&&(S=!0,n[C+1]=u?jh(Z):cp(Z)),C=u?Fa(Z):Qu(Z)}S&&(n[o+1]=u?cp(h):jh(h))}function yf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&E(n,r)>=0}const As={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pm(n){return n.substring(As.key,As.keyEnd)}function Yd(n,r){const o=As.textEnd;return o===r?-1:(r=As.keyEnd=function km(n,r,o){for(;r<o&&n.charCodeAt(r)>32;)r++;return r}(n,As.key=r,o),Su(n,r,o))}function Su(n,r,o){for(;r<o&&n.charCodeAt(r)<=32;)r++;return r}function _f(n,r){return function Fo(n,r,o,u){const l=mt(),h=kn(),m=li(2);h.firstUpdatePass&&Xd(h,n,m,u),r!==Qn&&$s(l,m,r)&&$m(h,h.data[hr()],l,l[11],n,l[m+1]=function l0(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=te(Ku(n)))),n}(r,o),u,m)}(n,r,null,!0),_f}function tg(n){!function tu(n,r,o,u){const l=kn(),h=li(2);l.firstUpdatePass&&Xd(l,null,h,u);const m=mt();if(o!==Qn&&$s(m,h,o)){const C=l.data[hr()];if(If(C,u)&&!Jd(l,h)){let S=u?C.classesWithoutHost:C.stylesWithoutHost;null!==S&&(o=_e(S,o||"")),gf(l,C,m,o,u)}else!function nh(n,r,o,u,l,h,m,C){l===Qn&&(l=rn);let S=0,L=0,Z=0<l.length?l[0]:null,ie=0<h.length?h[0]:null;for(;null!==Z||null!==ie;){const Ce=S<l.length?l[S+1]:void 0,ze=L<h.length?h[L+1]:void 0;let Ht,vt=null;Z===ie?(S+=2,L+=2,Ce!==ze&&(vt=ie,Ht=ze)):null===ie||null!==Z&&Z<ie?(S+=2,vt=Z):(L+=2,vt=ie,Ht=ze),null!==vt&&$m(n,r,o,u,vt,Ht,m,C),Z=S<l.length?l[S]:null,ie=L<h.length?h[L]:null}}(l,C,m,m[11],m[h+1],m[h+1]=function th(n,r,o){if(null==o||""===o)return rn;const u=[],l=Ku(o);if(Array.isArray(l))for(let h=0;h<l.length;h++)n(u,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&n(u,h,l[h]);else"string"==typeof l&&r(u,l);return u}(n,r,o),u,h)}}(ws,Va,n,!0)}function Va(n,r){for(let o=function Nm(n){return function Qd(n){As.key=0,As.keyEnd=0,As.value=0,As.valueEnd=0,As.textEnd=n.length}(n),Yd(n,Su(n,0,As.textEnd))}(r);o>=0;o=Yd(r,o))ws(n,Pm(r),!0)}function Jd(n,r){return r>=n.expandoStartIndex}function Xd(n,r,o,u){const l=n.data;if(null===l[o+1]){const h=l[hr()],m=Jd(n,o);If(h,u)&&null===r&&!m&&(r=!1),r=function Bm(n,r,o,u){const l=function zo(n){const r=Sn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=u?r.residualClasses:r.residualStyles;if(null===l)0===(u?r.classBindings:r.styleBindings)&&(o=_c(o=wf(null,n,r,o,u),r.attrs,u),h=null);else{const m=r.directiveStylingLast;if(-1===m||n[m]!==l)if(o=wf(l,n,r,o,u),null===h){let S=function eh(n,r,o){const u=o?r.classBindings:r.styleBindings;if(0!==Qu(u))return n[Fa(u)]}(n,r,u);void 0!==S&&Array.isArray(S)&&(S=wf(null,n,r,S[1],u),S=_c(S,r.attrs,u),function Gv(n,r,o,u){n[Fa(o?r.classBindings:r.styleBindings)]=u}(n,r,u,S))}else h=function Ef(n,r,o){let u;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)u=_c(u,n[h].hostAttrs,o);return _c(u,r.attrs,o)}(n,r,u)}return void 0!==h&&(u?r.residualClasses=h:r.residualStyles=h),o}(l,h,r,u),function Ml(n,r,o,u,l,h){let m=h?r.classBindings:r.styleBindings,C=Fa(m),S=Qu(m);n[u]=o;let Z,L=!1;if(Array.isArray(o)){const ie=o;Z=ie[1],(null===Z||E(ie,Z)>0)&&(L=!0)}else Z=o;if(l)if(0!==S){const Ce=Fa(n[C+1]);n[u+1]=Bh(Ce,C),0!==Ce&&(n[Ce+1]=js(n[Ce+1],u)),n[C+1]=function lp(n,r){return 131071&n|r<<17}(n[C+1],u)}else n[u+1]=Bh(C,0),0!==C&&(n[C+1]=js(n[C+1],u)),C=u;else n[u+1]=Bh(S,0),0===C?C=u:n[S+1]=js(n[S+1],u),S=u;L&&(n[u+1]=cp(n[u+1])),xl(n,Z,u,!0),xl(n,Z,u,!1),function u0(n,r,o,u,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&E(h,r)>=0&&(o[u+1]=jh(o[u+1]))}(r,Z,n,u,h),m=Bh(C,S),h?r.classBindings=m:r.styleBindings=m}(l,h,r,o,m,u)}}function wf(n,r,o,u,l){let h=null;const m=o.directiveEnd;let C=o.directiveStylingLast;for(-1===C?C=o.directiveStart:C++;C<m&&(h=r[C],u=_c(u,h.hostAttrs,l),h!==n);)C++;return null!==n&&(o.directiveStylingLast=C),u}function _c(n,r,o){const u=o?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const m=r[h];"number"==typeof m?l=m:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ws(n,m,!!o||r[++h]))}return void 0===n?null:n}function $m(n,r,o,u,l,h,m,C){if(!(3&r.type))return;const S=n.data,L=S[C+1];ng(function Wg(n){return 1==(1&n)}(L)?Ec(S,r,o,l,Qu(L),m):void 0)||(ng(h)||function Od(n){return 2==(2&n)}(L)&&(h=Ec(S,null,o,l,C,m)),function xy(n,r,o,u,l){if(r)l?n.addClass(o,u):n.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:ns.DashCase;null==l?n.removeStyle(o,u,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=ns.Important),n.setStyle(o,u,l,h))}}(u,m,Ri(hr(),o),l,h))}function Ec(n,r,o,u,l,h){const m=null===r;let C;for(;l>0;){const S=n[l],L=Array.isArray(S),Z=L?S[1]:S,ie=null===Z;let Ce=o[l+1];Ce===Qn&&(Ce=ie?rn:void 0);let ze=ie?v(Ce,u):Z===u?Ce:void 0;if(L&&!ng(ze)&&(ze=v(S,u)),ng(ze)&&(C=ze,m))return C;const vt=n[l+1];l=m?Fa(vt):Qu(vt)}if(null!==r){let S=h?r.residualClasses:r.residualStyles;null!=S&&(C=v(S,u))}return C}function ng(n){return void 0!==n}function If(n,r){return 0!=(n.flags&(r?16:32))}function Hm(n,r=""){const o=mt(),u=kn(),l=n+22,h=u.firstCreatePass?Dl(u,l,1,r,null):u.data[l],m=o[l]=function $(n,r){return n.createText(r)}(o[11],r);zu(u,o,m,h),M(h,!1)}function Jc(n){return Df("",n,""),Jc}function Df(n,r,o){const u=mt(),l=function Al(n,r,o,u){return $s(n,lo(),o)?r+Ke(o)+u:Qn}(u,n,r,o);return l!==Qn&&el(u,hr(),l),Df}function rg(n,r,o,u,l){const h=mt(),m=mc(h,n,r,o,u,l);return m!==Qn&&el(h,hr(),m),rg}const Cc=void 0;var Zv=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let nu={};function cy(n){const r=function m0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const u=r.split("-")[0];if(o=hy(u),o)return o;if("en"===u)return Zv;throw new Ye(701,!1)}function dy(n){return cy(n)[Vn.PluralCase]}function hy(n){return n in nu||(nu[n]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[n]),nu[n]}var Vn=(()=>((Vn=Vn||{})[Vn.LocaleId=0]="LocaleId",Vn[Vn.DayPeriodsFormat=1]="DayPeriodsFormat",Vn[Vn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vn[Vn.DaysFormat=3]="DaysFormat",Vn[Vn.DaysStandalone=4]="DaysStandalone",Vn[Vn.MonthsFormat=5]="MonthsFormat",Vn[Vn.MonthsStandalone=6]="MonthsStandalone",Vn[Vn.Eras=7]="Eras",Vn[Vn.FirstDayOfWeek=8]="FirstDayOfWeek",Vn[Vn.WeekendRange=9]="WeekendRange",Vn[Vn.DateFormat=10]="DateFormat",Vn[Vn.TimeFormat=11]="TimeFormat",Vn[Vn.DateTimeFormat=12]="DateTimeFormat",Vn[Vn.NumberSymbols=13]="NumberSymbols",Vn[Vn.NumberFormats=14]="NumberFormats",Vn[Vn.CurrencyCode=15]="CurrencyCode",Vn[Vn.CurrencySymbol=16]="CurrencySymbol",Vn[Vn.CurrencyName=17]="CurrencyName",Vn[Vn.Currencies=18]="Currencies",Vn[Vn.Directionality=19]="Directionality",Vn[Vn.PluralCase=20]="PluralCase",Vn[Vn.ExtraData=21]="ExtraData",Vn))();const oh="en-US";let og=oh;function n_(n,r,o,u,l){if(n=ye(n),Array.isArray(n))for(let h=0;h<n.length;h++)n_(n[h],r,o,u,l);else{const h=kn(),m=mt();let C=va(n)?n:ye(n.provide),S=_l(n);const L=Ar(),Z=1048575&L.providerIndexes,ie=L.directiveStart,Ce=L.providerIndexes>>20;if(va(n)||!n.multi){const ze=new cs(S,l,wl),vt=i_(C,r,l?Z:Z+Ce,ie);-1===vt?(We(Zt(L,m),h,C),r_(h,n,r.length),r.push(C),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),o.push(ze),m.push(ze)):(o[vt]=ze,m[vt]=ze)}else{const ze=i_(C,r,Z+Ce,ie),vt=i_(C,r,Z,Z+Ce),Ht=ze>=0&&o[ze],nn=vt>=0&&o[vt];if(l&&!nn||!l&&!Ht){We(Zt(L,m),h,C);const Tn=function jw(n,r,o,u,l){const h=new cs(n,o,wl);return h.multi=[],h.index=r,h.componentProviders=0,P0(h,l,u&&!o),h}(l?Bw:Uw,o.length,l,u,S);!l&&nn&&(o[vt].providerFactory=Tn),r_(h,n,r.length,0),r.push(C),L.directiveStart++,L.directiveEnd++,l&&(L.providerIndexes+=1048576),o.push(Tn),m.push(Tn)}else r_(h,n,ze>-1?ze:vt,P0(o[l?vt:ze],S,!l&&u));!l&&u&&nn&&o[vt].componentProviders++}}}function r_(n,r,o,u){const l=va(r),h=function wd(n){return!!n.useClass}(r);if(l||h){const S=(h?ye(r.useClass):r).prototype.ngOnDestroy;if(S){const L=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=L.indexOf(o);-1===Z?L.push(o,[u,S]):L[Z+1].push(u,S)}else L.push(o,S)}}}function P0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,u){for(let l=o;l<u;l++)if(r[l]===n)return l;return-1}function Uw(n,r,o,u){return s_(this.multi,[])}function Bw(n,r,o,u){const l=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,C=la(o,o[1],this.providerFactory.index,u);h=C.slice(0,m),s_(l,h);for(let S=m;S<C.length;S++)h.push(C[S])}else h=[],s_(l,h);return h}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function O0(n,r=[]){return o=>{o.providersResolver=(u,l)=>function Vw(n,r,o){const u=kn();if(u.firstCreatePass){const l=Zr(n);n_(o,u.data,u.blueprint,l,!0),n_(r,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,r)}}class Sf{}class N0{}function $w(n,r){return new k0(n,r??null)}class k0 extends Sf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kp(this);const u=kt(r);this._bootstrapComponents=No(u.bootstrap),this._r3Injector=Fh(r,o,[{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],te(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class o_ extends N0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class Hw extends Sf{constructor(r,o,u){super(),this.componentFactoryResolver=new kp(this),this.instance=null;const l=new Wf([...r,{provide:Sf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],o||Id(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function a_(n,r,o=null){return new Hw(n,r,o).injector}let Gw=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Gf(0,o.type),l=u.length>0?a_([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=jt({token:n,providedIn:"environment",factory:()=>new n(ki(Zl))}),n})();function F0(n){n.getStandaloneInjector=r=>r.get(Gw).getOrCreateStandaloneInjector(n)}function H0(n,r,o){const u=hi()+n,l=mt();return l[u]===Qn?Xa(l,u,o?r.call(o):r()):function pc(n,r){return n[r]}(l,u)}function G0(n,r,o,u){return W0(mt(),hi(),n,r,o,u)}function z0(n,r,o,u,l){return K0(mt(),hi(),n,r,o,u,l)}function lg(n,r){const o=n[r];return o===Qn?void 0:o}function W0(n,r,o,u,l,h){const m=r+o;return $s(n,m,l)?Xa(n,m+1,h?u.call(h,l):u(l)):lg(n,m+1)}function K0(n,r,o,u,l,h,m){const C=r+o;return Tu(n,C,l,h)?Xa(n,C+2,m?u.call(m,l,h):u(l,h)):lg(n,C+2)}function Q0(n,r){const o=kn();let u;const l=n+22;o.firstCreatePass?(u=function oI(n,r){if(r)for(let o=r.length-1;o>=0;o--){const u=r[o];if(n===u.name)return u}}(r,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const h=u.factory||(u.factory=qi(u.type)),m=ar(wl);try{const C=Fn(!1),S=h();return Fn(C),function ff(n,r,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=u}(o,mt(),l,S),S}finally{ar(m)}}function J0(n,r,o){const u=n+22,l=mt(),h=Yi(l,u);return cg(l,u)?W0(l,hi(),r,h.transform,o,h):h.transform(o)}function X0(n,r,o,u){const l=n+22,h=mt(),m=Yi(h,l);return cg(h,l)?K0(h,hi(),r,m.transform,o,u,m):m.transform(o,u)}function cg(n,r){return n[1].data[r].pure}function l_(n){return r=>{setTimeout(n,void 0,r)}}const Pl=class cI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,u){let l=r,h=o||(()=>null),m=u;if(r&&"object"==typeof r){const S=r;l=S.next?.bind(S),h=S.error?.bind(S),m=S.complete?.bind(S)}this.__isAsync&&(h=l_(h),l&&(l=l_(l)),m&&(m=l_(m)));const C=super.subscribe({next:l,error:h,complete:m});return r instanceof F.w0&&r.add(C),C}};function dI(){return this._results[fc()]()}class c_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=fc(),u=c_.prototype;u[o]||(u[o]=dI)}get changes(){return this._changes||(this._changes=new Pl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const u=this;u.dirty=!1;const l=pi(r);(this._changesDetected=!function Nu(n,r,o){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],h=r[u];if(o&&(l=o(l),h=o(h)),h!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=dg,fI=class extends hI{constructor(r,o,u){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(r,o){const u=this._declarationTContainer.tViews,l=Ld(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),bl(u,l,r),new Hd(l)}};function pI(){return _y(Ar(),mt())}function _y(n,r){return 4&n.type?new fI(r,n,Xl(n,r)):null}let Ey=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return nE(Ar(),mt())}const mI=Ey,eE=class extends mI{constructor(r,o,u){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=u}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new Ca(this._hostTNode,this._hostLView)}get parentInjector(){const r=Wt(this._hostTNode,this._hostLView);if(dr(r)){const o=vn(r,this._hostLView),u=Zn(r);return new Ca(o[1].data[u+8],o)}return new Ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=tE(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const m=r.createEmbeddedView(o||{},h);return this.insert(m,l),m}createComponent(r,o,u,l,h){const m=r&&!function ha(n){return"function"==typeof n}(r);let C;if(m)C=o;else{const ie=o||{};C=ie.index,u=ie.injector,l=ie.projectableNodes,h=ie.environmentInjector||ie.ngModuleRef}const S=m?r:new Gc(Y(r)),L=u||this.parentInjector;if(!h&&null==S.ngModule){const Ce=(m?L:this.parentInjector).get(Zl,null);Ce&&(h=Ce)}const Z=S.create(L,l,void 0,h);return this.insert(Z.hostView,C),Z}insert(r,o){const u=r._lView,l=u[1];if(function Ks(n){return Gr(n[3])}(u)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const ie=u[3],Ce=new eE(ie,ie[6],ie[3]);Ce.detach(Ce.indexOf(r))}}const h=this._adjustIndex(o),m=this._lContainer;!function Eo(n,r,o,u){const l=10+u,h=o.length;u>0&&(o[l-1][4]=r),u<h-10?(r[4]=o[l],ou(o,10+u,r)):(o.push(r),r[4]=null),r[3]=o;const m=r[17];null!==m&&o!==m&&function Bs(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(m,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=64}(l,u,m,h);const C=Wu(h,m),S=u[11],L=ld(S,m[7]);return null!==L&&function Xt(n,r,o,u,l,h){u[0]=l,u[6]=r,Mc(n,u,o,1,l,h)}(l,m[6],S,u,L,C),r.attachToViewContainerRef(),ou(d_(m),h,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=tE(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),u=Cs(this._lContainer,o);u&&(Vs(d_(this._lContainer),o),Hl(u[1],u))}detach(r){const o=this._adjustIndex(r,-1),u=Cs(this._lContainer,o);return u&&null!=Vs(d_(this._lContainer),o)?new Hd(u):null}_adjustIndex(r,o=0){return r??this.length+o}};function tE(n){return n[8]}function d_(n){return n[8]||(n[8]=[])}function nE(n,r){let o;const u=r[n.index];if(Gr(u))o=u;else{let l;if(8&n.type)l=yr(u);else{const h=r[11];l=h.createComment("");const m=ii(n,r);Za(h,ld(h,m),l,function fg(n,r){return n.nextSibling(r)}(h,m),!1)}r[n.index]=o=tf(u,r,l,n),$c(r,o)}return new eE(o,n,r)}class h_{constructor(r){this.queryList=r,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const u=null!==r.contentQueries?r.contentQueries[0]:o.length,l=[];for(let h=0;h<u;h++){const m=o.getByIndex(h);l.push(this.queries[m.indexInDeclarationView].clone())}return new f_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==dE(r,o).matches&&this.queries[o].setDirty()}}class rE{constructor(r,o,u=null){this.predicate=r,this.flags=o,this.read=u}}class p_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(r,l);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new p_(o):null}template(r,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class g_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new g_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const h=u[l];this.matchTNodeWithReadOption(r,o,_I(o,h)),this.matchTNodeWithReadOption(r,o,ja(o,r,h,!1,!1))}else u===dg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,ja(o,r,u,!1,!1))}matchTNodeWithReadOption(r,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ec||l===Ey||l===dg&&4&o.type)this.addMatch(o.index,-2);else{const h=ja(o,r,l,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function _I(n,r){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===r)return o[u+1];return null}function wI(n,r,o,u){return-1===o?function EI(n,r){return 11&n.type?Xl(n,r):4&n.type?_y(n,r):null}(r,n):-2===o?function II(n,r,o){return o===ec?Xl(r,n):o===dg?_y(r,n):o===Ey?nE(r,n):void 0}(n,r,u):la(n,n[1],o,r)}function iE(n,r,o,u){const l=r[19].queries[u];if(null===l.matches){const h=n.data,m=o.matches,C=[];for(let S=0;S<m.length;S+=2){const L=m[S];C.push(L<0?null:wI(r,h[L],m[S+1],o.metadata.read))}l.matches=C}return l.matches}function m_(n,r,o,u){const l=n.queries.getByIndex(o),h=l.matches;if(null!==h){const m=iE(n,r,l,o);for(let C=0;C<h.length;C+=2){const S=h[C];if(S>0)u.push(m[C/2]);else{const L=h[C+1],Z=r[-S];for(let ie=10;ie<Z.length;ie++){const Ce=Z[ie];Ce[17]===Ce[3]&&m_(Ce[1],Ce,L,u)}if(null!==Z[9]){const ie=Z[9];for(let Ce=0;Ce<ie.length;Ce++){const ze=ie[Ce];m_(ze[1],ze,L,u)}}}}}return u}function sE(n){const r=mt(),o=kn(),u=So();Pi(u+1);const l=dE(o,u);if(n.dirty&&function Bo(n){return 4==(4&n[2])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?m_(o,r,u,[]):iE(o,r,l,u);n.reset(h,qf),n.notifyOnChanges()}return!0}return!1}function oE(n,r,o){const u=kn();u.firstCreatePass&&(cE(u,new rE(n,r,o),-1),2==(2&r)&&(u.staticViewQueries=!0)),lE(u,mt(),r)}function aE(n,r,o,u){const l=kn();if(l.firstCreatePass){const h=Ar();cE(l,new rE(r,o,u),h.index),function CI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}lE(l,mt(),o)}function uE(){return function DI(n,r){return n[19].queries[r].queryList}(mt(),So())}function lE(n,r,o){const u=new c_(4==(4&o));Yh(n,r,u,u.destroy),null===r[19]&&(r[19]=new f_),r[19].queries.push(new h_(u))}function cE(n,r,o){null===n.queries&&(n.queries=new p_),n.queries.track(new g_(r,o))}function dE(n,r){return n.queries.getByIndex(r)}function Iy(...n){}const xE=new Lr("Application Initializer");let Dy=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Iy,this.reject=Iy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Zd(h))o.push(h);else if(mf(h)){const m=new Promise((C,S)=>{h.subscribe({complete:C,error:S})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(ki(xE,8))},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RE=new Lr("AppId",{providedIn:"root",factory:function PE(){return`${w_()}${w_()}${w_()}`}});function w_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const OE=new Lr("Platform Initializer"),zI=new Lr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),NE=new Lr("appBootstrapListener");let WI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cy=new Lr("LocaleId",{providedIn:"root",factory:()=>Fl(Cy,St.Optional|St.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||oh}()}),qI=new Lr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let YI=(()=>{class n{compileModuleSync(o){return new o_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=No(kt(o).declarations).reduce((m,C)=>{const S=Y(C);return S&&m.push(new Gc(S)),m},[]);return new ZI(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI=(()=>Promise.resolve(0))();function I_(n){typeof Zone>"u"?XI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class xu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pl(!1),this.onMicrotaskEmpty=new Pl(!1),this.onStable=new Pl(!1),this.onError=new Pl(!1),typeof Zone>"u")throw new Ye(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function eD(){let n=Mn.requestAnimationFrame,r=Mn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rD(n){const r=()=>{!function nD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,C_(n),n.isCheckStableRunning=!0,D_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),C_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,h,m,C)=>{try{return LE(n),o.invokeTask(l,h,m,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),VE(n)}},onInvoke:(o,u,l,h,m,C,S)=>{try{return LE(n),o.invoke(l,h,m,C,S)}finally{n.shouldCoalesceRunChangeDetection&&r(),VE(n)}},onHasTask:(o,u,l,h)=>{o.hasTask(l,h),u===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,C_(n),D_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,l,h)=>(o.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xu.isInAngularZone())throw new Ye(909,!1)}static assertNotInAngularZone(){if(xu.isInAngularZone())throw new Ye(909,!1)}run(r,o,u){return this._inner.run(r,o,u)}runTask(r,o,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,r,tD,Iy,Iy);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(r,o,u){return this._inner.runGuarded(r,o,u)}runOutsideAngular(r){return this._outer.run(r)}}const tD={};function D_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function C_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function LE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VE(n){n._nesting--,D_(n)}class iD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pl,this.onMicrotaskEmpty=new Pl,this.onStable=new Pl,this.onError=new Pl}run(r,o,u){return r.apply(o,u)}runGuarded(r,o,u){return r.apply(o,u)}runOutsideAngular(r){return r()}runTask(r,o,u,l){return r.apply(o,u)}}const UE=new Lr(""),BE=new Lr("");let b_,sD=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function oD(n){b_=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xu.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(ki(xu),ki(jE),ki(BE))},n.\u0275prov=jt({token:n,factory:n.\u0275fac}),n})(),jE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return b_?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xc=null;const $E=new Lr("AllowMultipleToken"),T_=new Lr("PlatformDestroyListeners");class lD{constructor(r,o){this.name=r,this.token=o}}function GE(n,r,o=[]){const u=`Platform: ${r}`,l=new Lr(u);return(h=[])=>{let m=A_();if(!m||m.injector.get($E,!1)){const C=[...o,...h,{provide:l,useValue:!0}];n?n(C):function cD(n){if(Xc&&!Xc.get($E,!1))throw new Ye(400,!1);Xc=n;const r=n.get(WE);(function HE(n){const r=n.get(OE,null);r&&r.forEach(o=>o())})(n)}(function zE(n=[],r){return Qa.create({name:r,providers:[{provide:bh,useValue:"platform"},{provide:T_,useValue:new Set([()=>Xc=null])},...n]})}(C,u))}return function hD(n){const r=A_();if(!r)throw new Ye(401,!1);return r}()}}function A_(){return Xc?.get(WE)??null}let WE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function qE(n,r){let o;return o="noop"===n?new iD:("zone.js"===n?void 0:n)||new xu(r),o}(u?.ngZone,function KE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:xu,useValue:l}];return l.run(()=>{const m=Qa.create({providers:h,parent:this.injector,name:o.moduleType.name}),C=o.create(m),S=C.injector.get(Vc,null);if(!S)throw new Ye(402,!1);return l.runOutsideAngular(()=>{const L=l.onError.subscribe({next:Z=>{S.handleError(Z)}});C.onDestroy(()=>{Ty(this._modules,C),L.unsubscribe()})}),function ZE(n,r,o){try{const u=o();return Zd(u)?u.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(S,l,()=>{const L=C.injector.get(Dy);return L.runInitializers(),L.donePromise.then(()=>(function nl(n){He(n,"Expected localeId to be defined"),"string"==typeof n&&(og=n.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Cy,oh)||oh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(o,u=[]){const l=YE({},u);return function aD(n,r,o){const u=new o_(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const u=o.injector.get(by);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Ye(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(T_,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(ki(Qa))},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function YE(n,r){return Array.isArray(r)?r.reduce(YE,n):{...n,...r}}let by=(()=>{class n{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new B.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),m=new B.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{xu.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{xu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),L.unsubscribe()}});this.isStable=(0,le.T)(h,m.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Zu;if(!this._injector.get(Dy).done)throw!l&&ot(o),new Ye(405,false);let m;m=l?o:this._injector.get(Jl).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const C=function uD(n){return n.isBoundToModule}(m)?void 0:this._injector.get(Sf),L=m.create(Qa.NULL,[],u||m.selector,C),Z=L.location.nativeElement,ie=L.injector.get(UE,null);return ie?.registerApplication(Z),L.onDestroy(()=>{this.detachView(L.hostView),Ty(this.components,L),ie?.unregisterApplication(Z)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new Ye(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Ty(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(NE,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Ty(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ye(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(ki(xu),ki(Zl),ki(Vc))},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ty(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let JE=!0,XE=!1;function pD(){return XE=!0,JE}function gD(){if(XE)throw new Error("Cannot enable prod mode after platform setup.");JE=!1}let mD=(()=>{class n{}return n.__NG_ELEMENT_ID__=yD,n})();function yD(n){return function vD(n,r,o){if(Ki(n)&&!o){const u=Xr(n.index,r);return new Hd(u,u)}return 47&n.type?new Hd(r[16],r):null}(Ar(),mt(),16==(16&n))}class rw{constructor(){}supports(r){return zd(r)}create(r){return new CD(r)}}const DD=(n,r)=>r;class CD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DD}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,u=this._removalsHead,l=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<sw(u,l,h)?o:u,C=sw(m,l,h),S=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{h||(h=[]);const L=C-l,Z=S-l;if(L!=Z){for(let Ce=0;Ce<L;Ce++){const ze=Ce<h.length?h[Ce]:h[Ce]=0,vt=ze+Ce;Z<=vt&&vt<L&&(h[Ce]=ze+1)}h[m.previousIndex]=Z-L}}C!==S&&r(m,C,S)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!zd(r))throw new Ye(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,m,o=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],m=this._trackByFn(C,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,C)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,C),u=!0),o=o._next}else l=0,function jp(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[fc()]();let u;for(;!(u=o.next()).done;)r(u.value)}}(r,C=>{m=this._trackByFn(l,C),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,C,m,l)),Object.is(o.item,C)||this._addIdentityChange(o,C)):(o=this._mismatch(o,C,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,u,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,l)):r=this._addAfter(new bD(o,u),h,l),r}_verifyReinsertion(r,o,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,o,u),this._addToMoves(r,u),r}_moveAfter(r,o,u){return this._unlink(r),this._insertAfter(r,o,u),this._addToMoves(r,u),r}_addAfter(r,o,u){return this._insertAfter(r,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,u){const l=null===o?this._itHead:o._next;return r._next=l,r._prev=o,null===l?this._itTail=r:l._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new iw),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,u=r._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class bD{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const o=r._prevDup,u=r._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class iw{constructor(){this.map=new Map}put(r){const o=r.trackById;let u=this.map.get(o);u||(u=new TD,this.map.set(o,u)),u.add(r)}get(r,o){const l=this.map.get(r);return l?l.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sw(n,r,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+r+l}class ow{constructor(){}supports(r){return r instanceof Map||Wd(r)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Wd(r)))throw new Ye(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const u=r._prev;return o._next=r,o._prev=u,r._prev=o,u&&(u._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,o);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new SD(r);return this._records.set(r,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(u=>o(r[u],u))}}class SD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aw(){return new P_([new rw])}let P_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||aw()),deps:[[n,new gi,new Ir]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Ye(901,!1)}}return n.\u0275prov=jt({token:n,providedIn:"root",factory:aw}),n})();function uw(){return new O_([new ow])}let O_=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||uw()),deps:[[n,new gi,new Ir]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Ye(901,!1)}}return n.\u0275prov=jt({token:n,providedIn:"root",factory:uw}),n})();const RD=GE(null,"core",[]);let PD=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(ki(by))},n.\u0275mod=Fe({type:n}),n.\u0275inj=Qt({}),n})();function OD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(Lt,Le,R)=>{R.d(Le,{EJ:()=>gs,F:()=>Mi,Fj:()=>rt,JJ:()=>St,JL:()=>gn,Kr:()=>Zi,NI:()=>ri,On:()=>to,Q7:()=>Ns,UX:()=>Ao,Wl:()=>ee,YN:()=>bo,_Y:()=>Rs,j3:()=>$o,kI:()=>fe,qQ:()=>so,sg:()=>On,u:()=>zr,u5:()=>sr,wV:()=>lr});var p=R(4650),F=R(6895),B=R(8996),le=R(4128),he=R(4004);let we=(()=>{class k{constructor(M,q){this._renderer=M,this._elementRef=q,this.onChange=Ze=>{},this.onTouched=()=>{}}setProperty(M,q){this._renderer.setProperty(this._elementRef.nativeElement,M,q)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.Qsj),p.Y36(p.SBq))},k.\u0275dir=p.lG2({type:k}),k})(),Ee=(()=>{class k extends we{}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,features:[p.qOj]}),k})();const te=new p.OlP("NgValueAccessor"),_e={provide:te,useExisting:(0,p.Gpc)(()=>ee),multi:!0};let ee=(()=>{class k extends Ee{writeValue(M){this.setProperty("checked",M)}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(tn){return q.onChange(tn.target.checked)})("blur",function(){return q.onTouched()})},features:[p._Bn([_e]),p.qOj]}),k})();const ue={provide:te,useExisting:(0,p.Gpc)(()=>rt),multi:!0},ut=new p.OlP("CompositionEventMode");let rt=(()=>{class k extends we{constructor(M,q,Ze){super(M,q),this._compositionMode=Ze,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ye(){const k=(0,F.q)()?(0,F.q)().getUserAgent():"";return/android (\d+)/.test(k.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ut,8))},k.\u0275dir=p.lG2({type:k,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,q){1&M&&p.NdJ("input",function(tn){return q._handleInput(tn.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(tn){return q._compositionEnd(tn.target.value)})},features:[p._Bn([ue]),p.qOj]}),k})();function Tt(k){return null==k||("string"==typeof k||Array.isArray(k))&&0===k.length}function Ke(k){return null!=k&&"number"==typeof k.length}const Ne=new p.OlP("NgValidators"),Ct=new p.OlP("NgAsyncValidators"),ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fe{static min(P){return Xe(P)}static max(P){return function nt(k){return P=>{if(Tt(P.value)||Tt(k))return null;const M=parseFloat(P.value);return!isNaN(M)&&M>k?{max:{max:k,actual:P.value}}:null}}(P)}static required(P){return yt(P)}static requiredTrue(P){return function st(k){return!0===k.value?null:{required:!0}}(P)}static email(P){return function Se(k){return Tt(k.value)||ft.test(k.value)?null:{email:!0}}(P)}static minLength(P){return function xt(k){return P=>Tt(P.value)||!Ke(P.value)?null:P.value.length<k?{minlength:{requiredLength:k,actualLength:P.value.length}}:null}(P)}static maxLength(P){return function Yt(k){return P=>Ke(P.value)&&P.value.length>k?{maxlength:{requiredLength:k,actualLength:P.value.length}}:null}(P)}static pattern(P){return function It(k){if(!k)return Bt;let P,M;return"string"==typeof k?(M="","^"!==k.charAt(0)&&(M+="^"),M+=k,"$"!==k.charAt(k.length-1)&&(M+="$"),P=new RegExp(M)):(M=k.toString(),P=k),q=>{if(Tt(q.value))return null;const Ze=q.value;return P.test(Ze)?null:{pattern:{requiredPattern:M,actualValue:Ze}}}}(P)}static nullValidator(P){return null}static compose(P){return Ge(P)}static composeAsync(P){return lt(P)}}function Xe(k){return P=>{if(Tt(P.value)||Tt(k))return null;const M=parseFloat(P.value);return!isNaN(M)&&M<k?{min:{min:k,actual:P.value}}:null}}function yt(k){return Tt(k.value)?{required:!0}:null}function Bt(k){return null}function Nt(k){return null!=k}function Or(k){return(0,p.QGY)(k)?(0,B.D)(k):k}function $e(k){let P={};return k.forEach(M=>{P=null!=M?{...P,...M}:P}),0===Object.keys(P).length?null:P}function Pe(k,P){return P.map(M=>M(k))}function He(k){return k.map(P=>function qe(k){return!k.validate}(P)?P:M=>P.validate(M))}function Ge(k){if(!k)return null;const P=k.filter(Nt);return 0==P.length?null:function(M){return $e(Pe(M,P))}}function ht(k){return null!=k?Ge(He(k)):null}function lt(k){if(!k)return null;const P=k.filter(Nt);return 0==P.length?null:function(M){const q=Pe(M,P).map(Or);return(0,le.D)(q).pipe((0,he.U)($e))}}function Dt(k){return null!=k?lt(He(k)):null}function jt(k,P){return null===k?[P]:Array.isArray(k)?[...k,P]:[k,P]}function At(k){return k._rawValidators}function Qt(k){return k._rawAsyncValidators}function ln(k){return k?Array.isArray(k)?k:[k]:[]}function cn(k,P){return Array.isArray(k)?k.includes(P):k===P}function $n(k,P){const M=ln(P);return ln(k).forEach(Ze=>{cn(M,Ze)||M.push(Ze)}),M}function Yn(k,P){return ln(P).filter(M=>!cn(k,M))}class Wn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=ht(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=Dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,M){return!!this.control&&this.control.hasError(P,M)}getError(P,M){return this.control?this.control.getError(P,M):null}}class Pt extends Wn{get formDirective(){return null}get path(){return null}}class An extends Wn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Jn{constructor(P){this._cd=P}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let St=(()=>{class k extends Jn{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(An,2))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,q){2&M&&p.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)},features:[p.qOj]}),k})(),gn=(()=>{class k extends Jn{constructor(M){super(M)}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Pt,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,q){2&M&&p.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)("ng-submitted",q.isSubmitted)},features:[p.qOj]}),k})();const Ft="VALID",Te="INVALID",Et="PENDING",Qe="DISABLED";function ke(k){return(pt(k)?k.validators:k)||null}function H(k){return Array.isArray(k)?ht(k):k||null}function oe(k,P){return(pt(P)?P.asyncValidators:k)||null}function Fe(k){return Array.isArray(k)?Dt(k):k||null}function pt(k){return null!=k&&!Array.isArray(k)&&"object"==typeof k}function se(k,P,M){const q=k.controls;if(!(P?Object.keys(q):q).length)throw new p.vHH(1e3,"");if(!q[M])throw new p.vHH(1001,"")}function de(k,P,M){k._forEachChild((q,Ze)=>{if(void 0===M[Ze])throw new p.vHH(1002,"")})}class K{constructor(P,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=M,this._composedValidatorFn=H(this._rawValidators),this._composedAsyncValidatorFn=Fe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===Ft}get invalid(){return this.status===Te}get pending(){return this.status==Et}get disabled(){return this.status===Qe}get enabled(){return this.status!==Qe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=H(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=Fe(P)}addValidators(P){this.setValidators($n(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators($n(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(Yn(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(Yn(P,this._rawAsyncValidators))}hasValidator(P){return cn(this._rawValidators,P)}hasAsyncValidator(P){return cn(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=Et,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const M=this._parentMarkedDirty(P.onlySelf);this.status=Qe,this.errors=null,this._forEachChild(q=>{q.disable({...P,onlySelf:!0})}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...P,skipPristineCheck:M}),this._onDisabledChange.forEach(q=>q(!0))}enable(P={}){const M=this._parentMarkedDirty(P.onlySelf);this.status=Ft,this._forEachChild(q=>{q.enable({...P,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors({...P,skipPristineCheck:M}),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}getRawValue(){return this.value}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ft||this.status===Et)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qe:Ft}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=Et,this._hasOwnPendingAsyncValidator=!0;const M=Or(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,M={}){this.errors=P,this._updateControlsErrors(!1!==M.emitEvent)}get(P){let M=P;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((q,Ze)=>q&&q._find(Ze),this)}getError(P,M){const q=M?this.get(M):this;return q&&q.errors?q.errors[P]:null}hasError(P,M){return!!this.getError(P,M)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Qe:this.errors?Te:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Et)?Et:this._anyControlsHaveStatus(Te)?Te:Ft}_anyControlsHaveStatus(P){return this._anyControls(M=>M.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){pt(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(P){return null}}class Y extends K{constructor(P,M,q){super(ke(M),oe(q,M)),this.controls=P,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,M){return this.controls[P]?this.controls[P]:(this.controls[P]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(P,M,q={}){this.registerControl(P,M),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(P,M={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(P,M,q={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],M&&this.registerControl(P,M),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,M={}){de(this,0,P),Object.keys(P).forEach(q=>{se(this,!0,q),this.controls[q].setValue(P[q],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(P,M={}){null!=P&&(Object.keys(P).forEach(q=>{const Ze=this.controls[q];Ze&&Ze.patchValue(P[q],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(P={},M={}){this._forEachChild((q,Ze)=>{q.reset(P[Ze],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(P,M,q)=>(P[q]=M.getRawValue(),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(M,q)=>!!q._syncPendingControls()||M);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){Object.keys(this.controls).forEach(M=>{const q=this.controls[M];q&&P(q,M)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const[M,q]of Object.entries(this.controls))if(this.contains(M)&&P(q))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,q,Ze)=>((q.enabled||this.disabled)&&(M[Ze]=q.value),M))}_reduceChildren(P,M){let q=P;return this._forEachChild((Ze,tn)=>{q=M(q,Ze,tn)}),q}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(P){return this.controls.hasOwnProperty(P)?this.controls[P]:null}}class ot extends Y{}function en(k,P){return[...P.path,k]}function re(k,P){Ue(k,P),P.valueAccessor.writeValue(k.value),k.disabled&&P.valueAccessor.setDisabledState?.(!0),function hn(k,P){P.valueAccessor.registerOnChange(M=>{k._pendingValue=M,k._pendingChange=!0,k._pendingDirty=!0,"change"===k.updateOn&&Re(k,P)})}(k,P),function gt(k,P){const M=(q,Ze)=>{P.valueAccessor.writeValue(q),Ze&&P.viewToModelUpdate(q)};k.registerOnChange(M),P._registerOnDestroy(()=>{k._unregisterOnChange(M)})}(k,P),function Oe(k,P){P.valueAccessor.registerOnTouched(()=>{k._pendingTouched=!0,"blur"===k.updateOn&&k._pendingChange&&Re(k,P),"submit"!==k.updateOn&&k.markAsTouched()})}(k,P),function Me(k,P){if(P.valueAccessor.setDisabledState){const M=q=>{P.valueAccessor.setDisabledState(q)};k.registerOnDisabledChange(M),P._registerOnDestroy(()=>{k._unregisterOnDisabledChange(M)})}}(k,P)}function ae(k,P,M=!0){const q=()=>{};P.valueAccessor&&(P.valueAccessor.registerOnChange(q),P.valueAccessor.registerOnTouched(q)),Ot(k,P),k&&(P._invokeOnDestroyCallbacks(),k._registerOnCollectionChange(()=>{}))}function X(k,P){k.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(P)})}function Ue(k,P){const M=At(k);null!==P.validator?k.setValidators(jt(M,P.validator)):"function"==typeof M&&k.setValidators([M]);const q=Qt(k);null!==P.asyncValidator?k.setAsyncValidators(jt(q,P.asyncValidator)):"function"==typeof q&&k.setAsyncValidators([q]);const Ze=()=>k.updateValueAndValidity();X(P._rawValidators,Ze),X(P._rawAsyncValidators,Ze)}function Ot(k,P){let M=!1;if(null!==k){if(null!==P.validator){const Ze=At(k);if(Array.isArray(Ze)&&Ze.length>0){const tn=Ze.filter(Hn=>Hn!==P.validator);tn.length!==Ze.length&&(M=!0,k.setValidators(tn))}}if(null!==P.asyncValidator){const Ze=Qt(k);if(Array.isArray(Ze)&&Ze.length>0){const tn=Ze.filter(Hn=>Hn!==P.asyncValidator);tn.length!==Ze.length&&(M=!0,k.setAsyncValidators(tn))}}}const q=()=>{};return X(P._rawValidators,q),X(P._rawAsyncValidators,q),M}function Re(k,P){k._pendingDirty&&k.markAsDirty(),k.setValue(k._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(k._pendingValue),k._pendingChange=!1}function wt(k,P){Ue(k,P)}function Kr(k,P){if(!k.hasOwnProperty("model"))return!1;const M=k.model;return!!M.isFirstChange()||!Object.is(P,M.currentValue)}function qr(k,P){k._syncPendingControls(),P.forEach(M=>{const q=M.control;"submit"===q.updateOn&&q._pendingChange&&(M.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}function vr(k,P){if(!P)return null;let M,q,Ze;return Array.isArray(P),P.forEach(tn=>{tn.constructor===rt?M=tn:function $r(k){return Object.getPrototypeOf(k.constructor)===Ee}(tn)?q=tn:Ze=tn}),Ze||q||M||null}const Ai={provide:Pt,useExisting:(0,p.Gpc)(()=>Mi)},Si=(()=>Promise.resolve())();let Mi=(()=>{class k extends Pt{constructor(M,q){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Y({},ht(M),Dt(q))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(M){Si.then(()=>{const q=this._findContainer(M.path);M.control=q.registerControl(M.name,M.control),re(M.control,M),M.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(M)})}getControl(M){return this.form.get(M.path)}removeControl(M){Si.then(()=>{const q=this._findContainer(M.path);q&&q.removeControl(M.name),this._directives.delete(M)})}addFormGroup(M){Si.then(()=>{const q=this._findContainer(M.path),Ze=new Y({});wt(Ze,M),q.registerControl(M.name,Ze),Ze.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(M){Si.then(()=>{const q=this._findContainer(M.path);q&&q.removeControl(M.name)})}getFormGroup(M){return this.form.get(M.path)}updateModel(M,q){Si.then(()=>{this.form.get(M.path).setValue(q)})}setValue(M){this.control.setValue(M)}onSubmit(M){return this.submitted=!0,qr(this.form,this._directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(M){return M.pop(),M.length?this.form.get(M):this.form}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Ne,10),p.Y36(Ct,10))},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(M,q){1&M&&p.NdJ("submit",function(tn){return q.onSubmit(tn)})("reset",function(){return q.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ai]),p.qOj]}),k})();function Tr(k,P){const M=k.indexOf(P);M>-1&&k.splice(M,1)}function Li(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}const ri=class extends K{constructor(P=null,M,q){super(ke(M),oe(q,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pt(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=Li(P)?P.value:P)}setValue(P,M={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(P,M={}){this.setValue(P,M)}reset(P=this.defaultValue,M={}){this._applyFormState(P),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){Tr(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){Tr(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){Li(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}},yi={provide:An,useExisting:(0,p.Gpc)(()=>to)},ps=(()=>Promise.resolve())();let to=(()=>{class k extends An{constructor(M,q,Ze,tn,Hn){super(),this._changeDetectorRef=Hn,this.control=new ri,this._registered=!1,this.update=new p.vpe,this._parent=M,this._setValidators(q),this._setAsyncValidators(Ze),this.valueAccessor=vr(0,tn)}ngOnChanges(M){if(this._checkForErrors(),!this._registered||"name"in M){if(this._registered&&(this._checkName(),this.formDirective)){const q=M.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in M&&this._updateDisabled(M),Kr(M,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){re(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(M){ps.then(()=>{this.control.setValue(M,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(M){const q=M.isDisabled.currentValue,Ze=0!==q&&(0,p.D6c)(q);ps.then(()=>{Ze&&!this.control.disabled?this.control.disable():!Ze&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(M){return this._parent?en(M,this._parent):[M]}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Pt,9),p.Y36(Ne,10),p.Y36(Ct,10),p.Y36(te,10),p.Y36(p.sBO,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([yi]),p.qOj,p.TTD]}),k})(),Rs=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=p.lG2({type:k,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),k})();const wa={provide:te,useExisting:(0,p.Gpc)(()=>lr),multi:!0};let lr=(()=>{class k extends Ee{writeValue(M){this.setProperty("value",M??"")}registerOnChange(M){this.onChange=q=>{M(""==q?null:parseFloat(q))}}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("input",function(tn){return q.onChange(tn.target.value)})("blur",function(){return q.onTouched()})},features:[p._Bn([wa]),p.qOj]}),k})(),no=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({}),k})();const Rt=new p.OlP("NgModelWithFormControlWarning"),qn={provide:Pt,useExisting:(0,p.Gpc)(()=>On)};let On=(()=>{class k extends Pt{constructor(M,q){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(M),this._setAsyncValidators(q)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ot(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const q=this.form.get(M.path);return re(q,M),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),q}getControl(M){return this.form.get(M.path)}removeControl(M){ae(M.control||null,M,!1),function Ms(k,P){const M=k.indexOf(P);M>-1&&k.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,q){this.form.get(M.path).setValue(q)}onSubmit(M){return this.submitted=!0,qr(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const q=M.control,Ze=this.form.get(M.path);q!==Ze&&(ae(q||null,M),(k=>k instanceof ri)(Ze)&&(re(Ze,M),M.control=Ze))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const q=this.form.get(M.path);wt(q,M),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const q=this.form.get(M.path);q&&function fn(k,P){return Ot(k,P)}(q,M)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ue(this.form,this),this._oldForm&&Ot(this._oldForm,this)}_checkFormPresent(){}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(Ne,10),p.Y36(Ct,10))},k.\u0275dir=p.lG2({type:k,selectors:[["","formGroup",""]],hostBindings:function(M,q){1&M&&p.NdJ("submit",function(tn){return q.onSubmit(tn)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([qn]),p.qOj,p.TTD]}),k})();const qi={provide:An,useExisting:(0,p.Gpc)(()=>zr)};let zr=(()=>{class k extends An{constructor(M,q,Ze,tn,Hn){super(),this._ngModelWarningConfig=Hn,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(q),this._setAsyncValidators(Ze),this.valueAccessor=vr(0,tn)}set isDisabled(M){}ngOnChanges(M){this._added||this._setUpControl(),Kr(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return en(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return k._ngModelWarningSentOnce=!1,k.\u0275fac=function(M){return new(M||k)(p.Y36(Pt,13),p.Y36(Ne,10),p.Y36(Ct,10),p.Y36(te,10),p.Y36(Rt,8))},k.\u0275dir=p.lG2({type:k,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([qi]),p.qOj,p.TTD]}),k})();const Vo={provide:te,useExisting:(0,p.Gpc)(()=>gs),multi:!0};function zs(k,P){return null==k?`${P}`:(P&&"object"==typeof P&&(P="Object"),`${k}: ${P}`.slice(0,50))}let gs=(()=>{class k extends Ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const Ze=zs(this._getOptionId(M),M);this.setProperty("value",Ze)}registerOnChange(M){this.onChange=q=>{this.value=this._getOptionValue(q),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q),M))return q;return null}_getOptionValue(M){const q=function ro(k){return k.split(":")[0]}(M);return this._optionMap.has(q)?this._optionMap.get(q):M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(tn){return q.onChange(tn.target.value)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Vo]),p.qOj]}),k})(),bo=(()=>{class k{constructor(M,q,Ze){this._element=M,this._renderer=q,this._select=Ze,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(zs(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(gs,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();const Uo={provide:te,useExisting:(0,p.Gpc)(()=>_r),multi:!0};function Ps(k,P){return null==k?`${P}`:("string"==typeof P&&(P=`'${P}'`),P&&"object"==typeof P&&(P="Object"),`${k}: ${P}`.slice(0,50))}let _r=(()=>{class k extends Ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let q;if(this.value=M,Array.isArray(M)){const Ze=M.map(tn=>this._getOptionId(tn));q=(tn,Hn)=>{tn._setSelected(Ze.indexOf(Hn.toString())>-1)}}else q=(Ze,tn)=>{Ze._setSelected(!1)};this._optionMap.forEach(q)}registerOnChange(M){this.onChange=q=>{const Ze=[],tn=q.selectedOptions;if(void 0!==tn){const Hn=tn;for(let Zs=0;Zs<Hn.length;Zs++){const hi=this._getOptionValue(Hn[Zs].value);Ze.push(hi)}}else{const Hn=q.options;for(let Zs=0;Zs<Hn.length;Zs++){const ys=Hn[Zs];if(ys.selected){const hi=this._getOptionValue(ys.value);Ze.push(hi)}}}this.value=Ze,M(Ze)}}_registerOption(M){const q=(this._idCounter++).toString();return this._optionMap.set(q,M),q}_getOptionId(M){for(const q of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(q)._value,M))return q;return null}_getOptionValue(M){const q=function xi(k){return k.split(":")[0]}(M);return this._optionMap.has(q)?this._optionMap.get(q)._value:M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,q){1&M&&p.NdJ("change",function(tn){return q.onChange(tn.target)})("blur",function(){return q.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Uo]),p.qOj]}),k})(),Zi=(()=>{class k{constructor(M,q,Ze){this._element=M,this._renderer=q,this._select=Ze,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue(Ps(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue(Ps(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return k.\u0275fac=function(M){return new(M||k)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(_r,9))},k.\u0275dir=p.lG2({type:k,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),k})();let io=(()=>{class k{constructor(){this._validator=Bt}ngOnChanges(M){if(this.inputName in M){const q=this.normalizeInput(M[this.inputName].currentValue);this._enabled=this.enabled(q),this._validator=this._enabled?this.createValidator(q):Bt,this._onChange&&this._onChange()}}validate(M){return this._validator(M)}registerOnValidatorChange(M){this._onChange=M}enabled(M){return null!=M}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275dir=p.lG2({type:k,features:[p.TTD]}),k})();const Os={provide:Ne,useExisting:(0,p.Gpc)(()=>so),multi:!0};let so=(()=>{class k extends io{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=M=>function os(k){return"number"==typeof k?k:parseFloat(k)}(M),this.createValidator=M=>Xe(M)}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(M,q){2&M&&p.uIk("min",q._enabled?q.min:null)},inputs:{min:"min"},features:[p._Bn([Os]),p.qOj]}),k})();const Ri={provide:Ne,useExisting:(0,p.Gpc)(()=>Ns),multi:!0};let Ns=(()=>{class k extends io{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=M=>yt}enabled(M){return M}}return k.\u0275fac=function(){let P;return function(q){return(P||(P=p.n5z(k)))(q||k)}}(),k.\u0275dir=p.lG2({type:k,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(M,q){2&M&&p.uIk("required",q._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([Ri]),p.qOj]}),k})(),ao=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[no]}),k})(),sr=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[ao]}),k})(),Ao=(()=>{class k{static withConfig(M){return{ngModule:k,providers:[{provide:Rt,useValue:M.warnOnNgModelWithFormControl}]}}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275mod=p.oAB({type:k}),k.\u0275inj=p.cJS({imports:[ao]}),k})();class ms extends K{constructor(P,M,q){super(ke(M),oe(q,M)),this.controls=P,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[this._adjustIndex(P)]}push(P,M={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(P,M,q={}){this.controls.splice(P,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(P,M={}){let q=this._adjustIndex(P);q<0&&(q=0),this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(P,M,q={}){let Ze=this._adjustIndex(P);Ze<0&&(Ze=0),this.controls[Ze]&&this.controls[Ze]._registerOnCollectionChange(()=>{}),this.controls.splice(Ze,1),M&&(this.controls.splice(Ze,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,M={}){de(this,0,P),P.forEach((q,Ze)=>{se(this,!1,Ze),this.at(Ze).setValue(q,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(P,M={}){null!=P&&(P.forEach((q,Ze)=>{this.at(Ze)&&this.at(Ze).patchValue(q,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(P=[],M={}){this._forEachChild((q,Ze)=>{q.reset(P[Ze],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(P=>P.getRawValue())}clear(P={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_adjustIndex(P){return P<0?P+this.length:P}_syncPendingControls(){let P=this.controls.reduce((M,q)=>!!q._syncPendingControls()||M,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){this.controls.forEach((M,q)=>{P(M,q)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(M=>M.enabled&&P(M))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}_find(P){return this.at(P)??null}}function mt(k){return!!k&&(void 0!==k.asyncValidators||void 0!==k.validators||void 0!==k.updateOn)}let kn=(()=>{class k{constructor(){this.useNonNullable=!1}get nonNullable(){const M=new k;return M.useNonNullable=!0,M}group(M,q=null){const Ze=this._reduceControls(M);let tn={};return mt(q)?tn=q:null!==q&&(tn.validators=q.validator,tn.asyncValidators=q.asyncValidator),new Y(Ze,tn)}record(M,q=null){const Ze=this._reduceControls(M);return new ot(Ze,q)}control(M,q,Ze){let tn={};return this.useNonNullable?(mt(q)?tn=q:(tn.validators=q,tn.asyncValidators=Ze),new ri(M,{...tn,nonNullable:!0})):new ri(M,q,Ze)}array(M,q,Ze){const tn=M.map(Hn=>this._createControl(Hn));return new ms(tn,q,Ze)}_reduceControls(M){const q={};return Object.keys(M).forEach(Ze=>{q[Ze]=this._createControl(M[Ze])}),q}_createControl(M){return M instanceof ri||M instanceof K?M:Array.isArray(M)?this.control(M[0],M.length>1?M[1]:null,M.length>2?M[2]:null):this.control(M)}}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=p.Yz7({token:k,factory:k.\u0275fac,providedIn:Ao}),k})(),$o=(()=>{class k{}return k.\u0275fac=function(M){return new(M||k)},k.\u0275prov=p.Yz7({token:k,factory:function(){return(0,p.f3M)(kn).nonNullable},providedIn:Ao}),k})()},1481:(Lt,Le,R)=>{R.d(Le,{Dx:()=>Pn,b2:()=>Bn,q6:()=>gr});var p=R(6895),F=R(4650);class B extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends B{static makeCurrent(){(0,p.HT)(new le)}onAndCancel(ae,X,Me){return ae.addEventListener(X,Me,!1),()=>{ae.removeEventListener(X,Me,!1)}}dispatchEvent(ae,X){ae.dispatchEvent(X)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,X){return(X=X||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,X){return"window"===X?window:"document"===X?ae:"body"===X?ae.body:null}getBaseHref(ae){const X=function we(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==X?null:function te(re){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",re);const ae=Ee.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(X)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,p.Mx)(document.cookie,ae)}}let Ee,he=null;const _e=new F.OlP("TRANSITION_ID"),ue=[{provide:F.ip1,useFactory:function ee(re,ae,X){return()=>{X.get(F.CZH).donePromise.then(()=>{const Me=(0,p.q)(),Ue=ae.querySelectorAll(`style[ng-transition="${re}"]`);for(let Ot=0;Ot<Ue.length;Ot++)Me.remove(Ue[Ot])})}},deps:[_e,p.K0,F.zs3],multi:!0}];let ut=(()=>{class re{build(){return new XMLHttpRequest}}return re.\u0275fac=function(X){return new(X||re)},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();const rt=new F.OlP("EventManagerPlugins");let Ye=(()=>{class re{constructor(X,Me){this._zone=Me,this._eventNameToPlugin=new Map,X.forEach(Ue=>Ue.manager=this),this._plugins=X.slice().reverse()}addEventListener(X,Me,Ue){return this._findPluginFor(Me).addEventListener(X,Me,Ue)}addGlobalEventListener(X,Me,Ue){return this._findPluginFor(Me).addGlobalEventListener(X,Me,Ue)}getZone(){return this._zone}_findPluginFor(X){const Me=this._eventNameToPlugin.get(X);if(Me)return Me;const Ue=this._plugins;for(let Ot=0;Ot<Ue.length;Ot++){const hn=Ue[Ot];if(hn.supports(X))return this._eventNameToPlugin.set(X,hn),hn}throw new Error(`No event manager plugin found for event ${X}`)}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(rt),F.LFG(F.R0b))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();class Tt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,X,Me){const Ue=(0,p.q)().getGlobalEventTarget(this._doc,ae);if(!Ue)throw new Error(`Unsupported event target ${Ue} for event ${X}`);return this.addEventListener(Ue,X,Me)}}let Ke=(()=>{class re{constructor(){this._stylesSet=new Set}addStyles(X){const Me=new Set;X.forEach(Ue=>{this._stylesSet.has(Ue)||(this._stylesSet.add(Ue),Me.add(Ue))}),this.onStylesAdded(Me)}onStylesAdded(X){}getAllStyles(){return Array.from(this._stylesSet)}}return re.\u0275fac=function(X){return new(X||re)},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})(),Ne=(()=>{class re extends Ke{constructor(X){super(),this._doc=X,this._hostNodes=new Map,this._hostNodes.set(X.head,[])}_addStylesToHost(X,Me,Ue){X.forEach(Ot=>{const hn=this._doc.createElement("style");hn.textContent=Ot,Ue.push(Me.appendChild(hn))})}addHost(X){const Me=[];this._addStylesToHost(this._stylesSet,X,Me),this._hostNodes.set(X,Me)}removeHost(X){const Me=this._hostNodes.get(X);Me&&Me.forEach(Ct),this._hostNodes.delete(X)}onStylesAdded(X){this._hostNodes.forEach((Me,Ue)=>{this._addStylesToHost(X,Ue,Me)})}ngOnDestroy(){this._hostNodes.forEach(X=>X.forEach(Ct))}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();function Ct(re){(0,p.q)().remove(re)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fe=/%COMP%/g;function Yt(re,ae,X){for(let Me=0;Me<ae.length;Me++){let Ue=ae[Me];Array.isArray(Ue)?Yt(re,Ue,X):(Ue=Ue.replace(fe,re),X.push(Ue))}return X}function It(re){return ae=>{if("__ngUnwrap__"===ae)return re;!1===re(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let Nt=(()=>{class re{constructor(X,Me,Ue){this.eventManager=X,this.sharedStylesHost=Me,this.appId=Ue,this.rendererByCompId=new Map,this.defaultRenderer=new Or(X)}createRenderer(X,Me){if(!X||!Me)return this.defaultRenderer;switch(Me.encapsulation){case F.ifc.Emulated:{let Ue=this.rendererByCompId.get(Me.id);return Ue||(Ue=new He(this.eventManager,this.sharedStylesHost,Me,this.appId),this.rendererByCompId.set(Me.id,Ue)),Ue.applyToHost(X),Ue}case 1:case F.ifc.ShadowDom:return new Ge(this.eventManager,this.sharedStylesHost,X,Me);default:if(!this.rendererByCompId.has(Me.id)){const Ue=Yt(Me.id,Me.styles,[]);this.sharedStylesHost.addStyles(Ue),this.rendererByCompId.set(Me.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(Ye),F.LFG(Ne),F.LFG(F.AFp))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();class Or{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,X){return X?document.createElementNS(ft[X]||X,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,X){(qe(ae)?ae.content:ae).appendChild(X)}insertBefore(ae,X,Me){ae&&(qe(ae)?ae.content:ae).insertBefore(X,Me)}removeChild(ae,X){ae&&ae.removeChild(X)}selectRootElement(ae,X){let Me="string"==typeof ae?document.querySelector(ae):ae;if(!Me)throw new Error(`The selector "${ae}" did not match any elements`);return X||(Me.textContent=""),Me}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,X,Me,Ue){if(Ue){X=Ue+":"+X;const Ot=ft[Ue];Ot?ae.setAttributeNS(Ot,X,Me):ae.setAttribute(X,Me)}else ae.setAttribute(X,Me)}removeAttribute(ae,X,Me){if(Me){const Ue=ft[Me];Ue?ae.removeAttributeNS(Ue,X):ae.removeAttribute(`${Me}:${X}`)}else ae.removeAttribute(X)}addClass(ae,X){ae.classList.add(X)}removeClass(ae,X){ae.classList.remove(X)}setStyle(ae,X,Me,Ue){Ue&(F.JOm.DashCase|F.JOm.Important)?ae.style.setProperty(X,Me,Ue&F.JOm.Important?"important":""):ae.style[X]=Me}removeStyle(ae,X,Me){Me&F.JOm.DashCase?ae.style.removeProperty(X):ae.style[X]=""}setProperty(ae,X,Me){ae[X]=Me}setValue(ae,X){ae.nodeValue=X}listen(ae,X,Me){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,X,It(Me)):this.eventManager.addEventListener(ae,X,It(Me))}}function qe(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class He extends Or{constructor(ae,X,Me,Ue){super(ae),this.component=Me;const Ot=Yt(Ue+"-"+Me.id,Me.styles,[]);X.addStyles(Ot),this.contentAttr=function Se(re){return"_ngcontent-%COMP%".replace(fe,re)}(Ue+"-"+Me.id),this.hostAttr=function xt(re){return"_nghost-%COMP%".replace(fe,re)}(Ue+"-"+Me.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,X){const Me=super.createElement(ae,X);return super.setAttribute(Me,this.contentAttr,""),Me}}class Ge extends Or{constructor(ae,X,Me,Ue){super(ae),this.sharedStylesHost=X,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ot=Yt(Ue.id,Ue.styles,[]);for(let hn=0;hn<Ot.length;hn++){const Oe=document.createElement("style");Oe.textContent=Ot[hn],this.shadowRoot.appendChild(Oe)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,X){return super.appendChild(this.nodeOrShadowRoot(ae),X)}insertBefore(ae,X,Me){return super.insertBefore(this.nodeOrShadowRoot(ae),X,Me)}removeChild(ae,X){return super.removeChild(this.nodeOrShadowRoot(ae),X)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let ht=(()=>{class re extends Tt{constructor(X){super(X)}supports(X){return!0}addEventListener(X,Me,Ue){return X.addEventListener(Me,Ue,!1),()=>this.removeEventListener(X,Me,Ue)}removeEventListener(X,Me,Ue){return X.removeEventListener(Me,Ue)}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();const lt=["alt","control","meta","shift"],Dt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jt={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let At=(()=>{class re extends Tt{constructor(X){super(X)}supports(X){return null!=re.parseEventName(X)}addEventListener(X,Me,Ue){const Ot=re.parseEventName(Me),hn=re.eventCallback(Ot.fullKey,Ue,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(X,Ot.domEventName,hn))}static parseEventName(X){const Me=X.toLowerCase().split("."),Ue=Me.shift();if(0===Me.length||"keydown"!==Ue&&"keyup"!==Ue)return null;const Ot=re._normalizeKey(Me.pop());let hn="",Oe=Me.indexOf("code");if(Oe>-1&&(Me.splice(Oe,1),hn="code."),lt.forEach(gt=>{const wt=Me.indexOf(gt);wt>-1&&(Me.splice(wt,1),hn+=gt+".")}),hn+=Ot,0!=Me.length||0===Ot.length)return null;const Re={};return Re.domEventName=Ue,Re.fullKey=hn,Re}static matchEventFullKeyCode(X,Me){let Ue=Dt[X.key]||X.key,Ot="";return Me.indexOf("code.")>-1&&(Ue=X.code,Ot="code."),!(null==Ue||!Ue)&&(Ue=Ue.toLowerCase()," "===Ue?Ue="space":"."===Ue&&(Ue="dot"),lt.forEach(hn=>{hn!==Ue&&(0,jt[hn])(X)&&(Ot+=hn+".")}),Ot+=Ue,Ot===Me)}static eventCallback(X,Me,Ue){return Ot=>{re.matchEventFullKeyCode(Ot,X)&&Ue.runGuarded(()=>Me(Ot))}}static _normalizeKey(X){return"esc"===X?"escape":X}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:re.\u0275fac}),re})();const gr=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:p.bD},{provide:F.g9A,useValue:function Wn(){le.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function An(){return(0,F.RDi)(document),document},deps:[]}]),kr=new F.OlP(""),St=[{provide:F.rWj,useClass:class ye{addToWindow(ae){F.dqk.getAngularTestability=(Me,Ue=!0)=>{const Ot=ae.findTestabilityInTree(Me,Ue);if(null==Ot)throw new Error("Could not find testability for element.");return Ot},F.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),F.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(Me=>{const Ue=F.dqk.getAllAngularTestabilities();let Ot=Ue.length,hn=!1;const Oe=function(Re){hn=hn||Re,Ot--,0==Ot&&Me(hn)};Ue.forEach(function(Re){Re.whenStable(Oe)})})}findTestabilityInTree(ae,X,Me){return null==X?null:ae.getTestability(X)??(Me?(0,p.q)().isShadowRoot(X)?this.findTestabilityInTree(ae,X.host,!0):this.findTestabilityInTree(ae,X.parentElement,!0):null)}},deps:[]},{provide:F.lri,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b,F.eoX,F.rWj]}],gn=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function Pt(){return new F.qLn},deps:[]},{provide:rt,useClass:ht,multi:!0,deps:[p.K0,F.R0b,F.Lbi]},{provide:rt,useClass:At,multi:!0,deps:[p.K0]},{provide:Nt,useClass:Nt,deps:[Ye,Ne,F.AFp]},{provide:F.FYo,useExisting:Nt},{provide:Ke,useExisting:Ne},{provide:Ne,useClass:Ne,deps:[p.K0]},{provide:Ye,useClass:Ye,deps:[rt,F.R0b]},{provide:p.JF,useClass:ut,deps:[]},[]];let Bn=(()=>{class re{constructor(X){}static withServerTransition(X){return{ngModule:re,providers:[{provide:F.AFp,useValue:X.appId},{provide:_e,useExisting:F.AFp},ue]}}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(kr,12))},re.\u0275mod=F.oAB({type:re}),re.\u0275inj=F.cJS({providers:[...gn,...St],imports:[p.ez,F.hGG]}),re})(),Pn=(()=>{class re{constructor(X){this._doc=X}getTitle(){return this._doc.title}setTitle(X){this._doc.title=X||""}}return re.\u0275fac=function(X){return new(X||re)(F.LFG(p.K0))},re.\u0275prov=F.Yz7({token:re,factory:function(X){let Me=null;return Me=X?new X:function Dn(){return new Pn((0,F.LFG)(p.K0))}(),Me},providedIn:"root"}),re})();typeof window<"u"&&window},7486:(Lt,Le,R)=>{R.d(Le,{F0:()=>or,rH:()=>$a,yS:()=>Rr,Bz:()=>Vs,lC:()=>Ns});var p=R(4650),F=R(8996),B=R(9646),le=R(1135),he=R(6805),we=R(9751),Ee=R(4742),te=R(4671),_e=R(3268),ee=R(3269),ue=R(1810),ye=R(5403),ut=R(9672);function rt(...v){const E=(0,ee.yG)(v),y=(0,ee.jO)(v),{args:T,keys:O}=(0,Ee.D)(v);if(0===T.length)return(0,F.D)([],E);const z=new we.y(function Ye(v,E,y=te.y){return T=>{Tt(E,()=>{const{length:O}=v,z=new Array(O);let ce=O,pe=O;for(let et=0;et<O;et++)Tt(E,()=>{const $t=(0,F.D)(v[et],E);let jn=!1;$t.subscribe((0,ye.x)(T,Jt=>{z[et]=Jt,jn||(jn=!0,pe--),pe||T.next(y(z.slice()))},()=>{--ce||T.complete()}))},T)},T)}}(T,E,O?ce=>(0,ue.n)(O,ce):te.y));return y?z.pipe((0,_e.Z)(y)):z}function Tt(v,E,y){v?(0,ut.f)(y,v,E):E()}var Ke=R(1350),Ne=R(9770),Ct=R(9635),ft=R(2843),fe=R(515),Xe=R(4033),nt=R(7579),yt=R(6895),st=R(4004),Se=R(3900),xt=R(5698),Yt=R(8675),It=R(9300),Bt=R(5577),Nt=R(590),Or=R(576);function $e(v,E){return(0,Or.m)(E)?(0,Bt.z)(v,E,1):(0,Bt.z)(v,1)}var Pe=R(8505),qe=R(8421),He=R(4482);function Ge(v){return(0,He.e)((E,y)=>{let z,T=null,O=!1;T=E.subscribe((0,ye.x)(y,void 0,void 0,ce=>{z=(0,qe.Xf)(v(ce,Ge(v)(E))),T?(T.unsubscribe(),T=null,z.subscribe(y)):O=!0})),O&&(T.unsubscribe(),T=null,z.subscribe(y))})}var ht=R(5026);function lt(v){return v<=0?()=>fe.E:(0,He.e)((E,y)=>{let T=[];E.subscribe((0,ye.x)(y,O=>{T.push(O),v<T.length&&T.shift()},()=>{for(const O of T)y.next(O);y.complete()},void 0,()=>{T=null}))})}var Dt=R(8068),jt=R(6590);function At(v,E){const y=arguments.length>=2;return T=>T.pipe(v?(0,It.h)((O,z)=>v(O,z,T)):te.y,lt(1),y?(0,jt.d)(E):(0,Dt.T)(()=>new he.K))}var ln=R(9718);function cn(v){return(0,He.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(v)}})}var $n=R(8343),Yn=R(8189),Wn=R(1481);const Pt="primary",An=Symbol("RouteTitle");class Jn{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function gr(v){return new Jn(v)}function kr(v,E,y){const T=y.path.split("/");if(T.length>v.length||"full"===y.pathMatch&&(E.hasChildren()||T.length<v.length))return null;const O={};for(let z=0;z<T.length;z++){const ce=T[z],pe=v[z];if(ce.startsWith(":"))O[ce.substring(1)]=pe;else if(ce!==pe.path)return null}return{consumed:v.slice(0,T.length),posParams:O}}function gn(v,E){const y=v?Object.keys(v):void 0,T=E?Object.keys(E):void 0;if(!y||!T||y.length!=T.length)return!1;let O;for(let z=0;z<y.length;z++)if(O=y[z],!Bn(v[O],E[O]))return!1;return!0}function Bn(v,E){if(Array.isArray(v)&&Array.isArray(E)){if(v.length!==E.length)return!1;const y=[...v].sort(),T=[...E].sort();return y.every((O,z)=>T[z]===O)}return v===E}function ar(v){return Array.prototype.concat.apply([],v)}function jr(v){return v.length>0?v[v.length-1]:null}function Dn(v,E){for(const y in v)v.hasOwnProperty(y)&&E(v[y],y)}function Pn(v){return(0,p.CqO)(v)?v:(0,p.QGY)(v)?(0,F.D)(Promise.resolve(v)):(0,B.of)(v)}const on={exact:function rr(v,E,y){if(!Qe(v.segments,E.segments)||!Fr(v.segments,E.segments,y)||v.numberOfChildren!==E.numberOfChildren)return!1;for(const T in E.children)if(!v.children[T]||!rr(v.children[T],E.children[T],y))return!1;return!0},subset:ur},Mn={exact:function nr(v,E){return gn(v,E)},subset:function rn(v,E){return Object.keys(E).length<=Object.keys(v).length&&Object.keys(E).every(y=>Bn(v[y],E[y]))},ignored:()=>!0};function mr(v,E,y){return on[y.paths](v.root,E.root,y.matrixParams)&&Mn[y.queryParams](v.queryParams,E.queryParams)&&!("exact"===y.fragment&&v.fragment!==E.fragment)}function ur(v,E,y){return En(v,E,E.segments,y)}function En(v,E,y,T){if(v.segments.length>y.length){const O=v.segments.slice(0,y.length);return!(!Qe(O,y)||E.hasChildren()||!Fr(O,y,T))}if(v.segments.length===y.length){if(!Qe(v.segments,y)||!Fr(v.segments,y,T))return!1;for(const O in E.children)if(!v.children[O]||!ur(v.children[O],E.children[O],T))return!1;return!0}{const O=y.slice(0,v.segments.length),z=y.slice(v.segments.length);return!!(Qe(v.segments,O)&&Fr(v.segments,O,T)&&v.children[Pt])&&En(v.children[Pt],E,z,T)}}function Fr(v,E,y){return E.every((T,O)=>Mn[y](v[O].parameters,T.parameters))}class wn{constructor(E,y,T){this.root=E,this.queryParams=y,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gr(this.queryParams)),this._queryParamMap}toString(){return Fe.serialize(this)}}class Ft{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Dn(y,(T,O)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pt(this)}}class Te{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=gr(this.parameters)),this._parameterMap}toString(){return kt(this)}}function Qe(v,E){return v.length===E.length&&v.every((y,T)=>y.path===E[T].path)}let H=(()=>{class v{}return v.\u0275fac=function(y){return new(y||v)},v.\u0275prov=p.Yz7({token:v,factory:function(){return new oe},providedIn:"root"}),v})();class oe{parse(E){const y=new Oe(E);return new wn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${se(E.root,!0)}`,T=function re(v){const E=Object.keys(v).map(y=>{const T=v[y];return Array.isArray(T)?T.map(O=>`${K(y)}=${K(O)}`).join("&"):`${K(y)}=${K(T)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${T}${"string"==typeof E.fragment?`#${function Y(v){return encodeURI(v)}(E.fragment)}`:""}`}}const Fe=new oe;function pt(v){return v.segments.map(E=>kt(E)).join("/")}function se(v,E){if(!v.hasChildren())return pt(v);if(E){const y=v.children[Pt]?se(v.children[Pt],!1):"",T=[];return Dn(v.children,(O,z)=>{z!==Pt&&T.push(`${z}:${se(O,!1)}`)}),T.length>0?`${y}(${T.join("//")})`:y}{const y=function ke(v,E){let y=[];return Dn(v.children,(T,O)=>{O===Pt&&(y=y.concat(E(T,O)))}),Dn(v.children,(T,O)=>{O!==Pt&&(y=y.concat(E(T,O)))}),y}(v,(T,O)=>O===Pt?[se(v.children[Pt],!1)]:[`${O}:${se(T,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Pt]?`${pt(v)}/${y[0]}`:`${pt(v)}/(${y.join("//")})`}}function de(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function K(v){return de(v).replace(/%3B/gi,";")}function G(v){return de(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function De(v){return decodeURIComponent(v)}function ot(v){return De(v.replace(/\+/g,"%20"))}function kt(v){return`${G(v.path)}${function en(v){return Object.keys(v).map(E=>`;${G(E)}=${G(v[E])}`).join("")}(v.parameters)}`}const ae=/^[^\/()?;=#]+/;function X(v){const E=v.match(ae);return E?E[0]:""}const Me=/^[^=?&#]+/,Ot=/^[^&#]+/;class Oe{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(T[Pt]=new Ft(E,y)),T}parseSegment(){const E=X(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(E),new Te(De(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=X(this.remaining);if(!y)return;this.capture(y);let T="";if(this.consumeOptional("=")){const O=X(this.remaining);O&&(T=O,this.capture(T))}E[De(y)]=De(T)}parseQueryParam(E){const y=function Ue(v){const E=v.match(Me);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let T="";if(this.consumeOptional("=")){const ce=function hn(v){const E=v.match(Ot);return E?E[0]:""}(this.remaining);ce&&(T=ce,this.capture(T))}const O=ot(y),z=ot(T);if(E.hasOwnProperty(O)){let ce=E[O];Array.isArray(ce)||(ce=[ce],E[O]=ce),ce.push(z)}else E[O]=z}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=X(this.remaining),O=this.remaining[T.length];if("/"!==O&&")"!==O&&";"!==O)throw new p.vHH(4010,!1);let z;T.indexOf(":")>-1?(z=T.slice(0,T.indexOf(":")),this.capture(z),this.capture(":")):E&&(z=Pt);const ce=this.parseChildren();y[z]=1===Object.keys(ce).length?ce[Pt]:new Ft([],ce),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new p.vHH(4011,!1)}}function Re(v){return v.segments.length>0?new Ft([],{[Pt]:v}):v}function gt(v){const E={};for(const T of Object.keys(v.children)){const z=gt(v.children[T]);(z.segments.length>0||z.hasChildren())&&(E[T]=z)}return function wt(v){if(1===v.numberOfChildren&&v.children[Pt]){const E=v.children[Pt];return new Ft(v.segments.concat(E.segments),E.children)}return v}(new Ft(v.segments,E))}function fn(v){return v instanceof wn}function Kr(v,E,y,T,O){if(0===y.length)return vr(E.root,E.root,E.root,T,O);const z=function Ai(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new zn(!0,0,v);let E=0,y=!1;const T=v.reduce((O,z,ce)=>{if("object"==typeof z&&null!=z){if(z.outlets){const pe={};return Dn(z.outlets,(et,$t)=>{pe[$t]="string"==typeof et?et.split("/"):et}),[...O,{outlets:pe}]}if(z.segmentPath)return[...O,z.segmentPath]}return"string"!=typeof z?[...O,z]:0===ce?(z.split("/").forEach((pe,et)=>{0==et&&"."===pe||(0==et&&""===pe?y=!0:".."===pe?E++:""!=pe&&O.push(pe))}),O):[...O,z]},[]);return new zn(y,E,T)}(y);return z.toRoot()?vr(E.root,E.root,new Ft([],{}),T,O):function ce(et){const $t=function Tr(v,E,y,T){if(v.isAbsolute)return new Si(E.root,!0,0);if(-1===T)return new Si(y,y===E.root,0);return function Li(v,E,y){let T=v,O=E,z=y;for(;z>O;){if(z-=O,T=T.parent,!T)throw new p.vHH(4005,!1);O=T.segments.length}return new Si(T,!1,O-z)}(y,T+($r(v.commands[0])?0:1),v.numberOfDoubleDots)}(z,E,v.snapshot?._urlSegment,et),jn=$t.processChildren?br($t.segmentGroup,$t.index,z.commands):Vi($t.segmentGroup,$t.index,z.commands);return vr(E.root,$t.segmentGroup,jn,T,O)}(v.snapshot?._lastPathIndex)}function $r(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function qr(v){return"object"==typeof v&&null!=v&&v.outlets}function vr(v,E,y,T,O){let ce,z={};T&&Dn(T,(et,$t)=>{z[$t]=Array.isArray(et)?et.map(jn=>`${jn}`):`${et}`}),ce=v===E?y:Ms(v,E,y);const pe=Re(gt(ce));return new wn(pe,z,O)}function Ms(v,E,y){const T={};return Dn(v.children,(O,z)=>{T[z]=O===E?y:Ms(O,E,y)}),new Ft(v.segments,T)}class zn{constructor(E,y,T){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=T,E&&T.length>0&&$r(T[0]))throw new p.vHH(4003,!1);const O=T.find(qr);if(O&&O!==jr(T))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Si{constructor(E,y,T){this.segmentGroup=E,this.processChildren=y,this.index=T}}function Vi(v,E,y){if(v||(v=new Ft([],{})),0===v.segments.length&&v.hasChildren())return br(v,E,y);const T=function xs(v,E,y){let T=0,O=E;const z={match:!1,pathIndex:0,commandIndex:0};for(;O<v.segments.length;){if(T>=y.length)return z;const ce=v.segments[O],pe=y[T];if(qr(pe))break;const et=`${pe}`,$t=T<y.length-1?y[T+1]:null;if(O>0&&void 0===et)break;if(et&&$t&&"object"==typeof $t&&void 0===$t.outlets){if(!Ki(et,$t,ce))return z;T+=2}else{if(!Ki(et,{},ce))return z;T++}O++}return{match:!0,pathIndex:O,commandIndex:T}}(v,E,y),O=y.slice(T.commandIndex);if(T.match&&T.pathIndex<v.segments.length){const z=new Ft(v.segments.slice(0,T.pathIndex),{});return z.children[Pt]=new Ft(v.segments.slice(T.pathIndex),v.children),br(z,0,O)}return T.match&&0===O.length?new Ft(v.segments,{}):T.match&&!v.hasChildren()?Hr(v,E,y):T.match?br(v,0,O):Hr(v,E,y)}function br(v,E,y){if(0===y.length)return new Ft(v.segments,{});{const T=function ri(v){return qr(v[0])?v[0].outlets:{[Pt]:v}}(y),O={};return Dn(T,(z,ce)=>{"string"==typeof z&&(z=[z]),null!==z&&(O[ce]=Vi(v.children[ce],E,z))}),Dn(v.children,(z,ce)=>{void 0===T[ce]&&(O[ce]=z)}),new Ft(v.segments,O)}}function Hr(v,E,y){const T=v.segments.slice(0,E);let O=0;for(;O<y.length;){const z=y[O];if(qr(z)){const et=Gr(z.outlets);return new Ft(T,et)}if(0===O&&$r(y[0])){T.push(new Te(v.segments[E].path,Gs(y[0]))),O++;continue}const ce=qr(z)?z.outlets[Pt]:`${z}`,pe=O<y.length-1?y[O+1]:null;ce&&pe&&$r(pe)?(T.push(new Te(ce,Gs(pe))),O+=2):(T.push(new Te(ce,{})),O++)}return new Ft(T,{})}function Gr(v){const E={};return Dn(v,(y,T)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[T]=Hr(new Ft([],{}),0,y))}),E}function Gs(v){const E={};return Dn(v,(y,T)=>E[T]=`${y}`),E}function Ki(v,E,y){return v==y.path&&gn(E,y.parameters)}class ci{constructor(E,y){this.id=E,this.url=y}}class Zr extends ci{constructor(E,y,T="imperative",O=null){super(E,y),this.type=0,this.navigationTrigger=T,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yi extends ci{constructor(E,y,T){super(E,y),this.urlAfterRedirects=T,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ps extends ci{constructor(E,y,T,O){super(E,y),this.reason=T,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class to extends ci{constructor(E,y,T,O){super(E,y),this.error=T,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rs extends ci{constructor(E,y,T,O){super(E,y),this.urlAfterRedirects=T,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wa extends ci{constructor(E,y,T,O){super(E,y),this.urlAfterRedirects=T,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lr extends ci{constructor(E,y,T,O,z){super(E,y),this.urlAfterRedirects=T,this.state=O,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Do extends ci{constructor(E,y,T,O){super(E,y),this.urlAfterRedirects=T,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Co extends ci{constructor(E,y,T,O){super(E,y),this.urlAfterRedirects=T,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class no{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ae{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ie{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rt{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cn{constructor(E,y,T){this.routerEvent=E,this.position=y,this.anchor=T,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qn{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=On(E,this._root);return y?y.children.map(T=>T.value):[]}firstChild(E){const y=On(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=Ui(E,this._root);return y.length<2?[]:y[y.length-2].children.map(O=>O.value).filter(O=>O!==E)}pathFromRoot(E){return Ui(E,this._root).map(y=>y.value)}}function On(v,E){if(v===E.value)return E;for(const y of E.children){const T=On(v,y);if(T)return T}return null}function Ui(v,E){if(v===E.value)return[E];for(const y of E.children){const T=Ui(v,y);if(T.length)return T.unshift(E),T}return[]}class Yr{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function Qr(v){const E={};return v&&v.children.forEach(y=>E[y.value.outlet]=y),E}class ir extends qn{constructor(E,y){super(E),this.snapshot=y,bo(this,E)}toString(){return this.snapshot.toString()}}function ss(v,E){const y=function qi(v,E){const ce=new ro([],{},{},"",{},Pt,E,null,v.root,-1,{});return new gs("",new Yr(ce,[]))}(v,E),T=new le.X([new Te("",{})]),O=new le.X({}),z=new le.X({}),ce=new le.X({}),pe=new le.X(""),et=new zr(T,O,ce,pe,z,Pt,E,y.root);return et.snapshot=y.root,new ir(new Yr(et,[]),y)}class zr{constructor(E,y,T,O,z,ce,pe,et){this.url=E,this.params=y,this.queryParams=T,this.fragment=O,this.data=z,this.outlet=ce,this.component=pe,this.title=this.data?.pipe((0,st.U)($t=>$t[An]))??(0,B.of)(void 0),this._futureSnapshot=et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(E=>gr(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(E=>gr(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vo(v,E="emptyOnly"){const y=v.pathFromRoot;let T=0;if("always"!==E)for(T=y.length-1;T>=1;){const O=y[T],z=y[T-1];if(O.routeConfig&&""===O.routeConfig.path)T--;else{if(z.component)break;T--}}return function zs(v){return v.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(T))}class ro{constructor(E,y,T,O,z,ce,pe,et,$t,jn,Jt,Vr){this.url=E,this.params=y,this.queryParams=T,this.fragment=O,this.data=z,this.outlet=ce,this.component=pe,this.title=this.data?.[An],this.routeConfig=et,this._urlSegment=$t,this._lastPathIndex=jn,this._correctedLastPathIndex=Vr??jn,this._resolve=Jt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends qn{constructor(E,y){super(y),this.url=E,bo(this,y)}toString(){return Uo(this._root)}}function bo(v,E){E.value._routerState=v,E.children.forEach(y=>bo(v,y))}function Uo(v){const E=v.children.length>0?` { ${v.children.map(Uo).join(", ")} } `:"";return`${v.value}${E}`}function Ps(v){if(v.snapshot){const E=v.snapshot,y=v._futureSnapshot;v.snapshot=y,gn(E.queryParams,y.queryParams)||v.queryParams.next(y.queryParams),E.fragment!==y.fragment&&v.fragment.next(y.fragment),gn(E.params,y.params)||v.params.next(y.params),function St(v,E){if(v.length!==E.length)return!1;for(let y=0;y<v.length;++y)if(!gn(v[y],E[y]))return!1;return!0}(E.url,y.url)||v.url.next(y.url),gn(E.data,y.data)||v.data.next(y.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function xi(v,E){const y=gn(v.params,E.params)&&function Et(v,E){return Qe(v,E)&&v.every((y,T)=>gn(y.parameters,E[T].parameters))}(v.url,E.url);return y&&!(!v.parent!=!E.parent)&&(!v.parent||xi(v.parent,E.parent))}function _r(v,E,y){if(y&&v.shouldReuseRoute(E.value,y.value.snapshot)){const T=y.value;T._futureSnapshot=E.value;const O=function Zi(v,E,y){return E.children.map(T=>{for(const O of y.children)if(v.shouldReuseRoute(T.value,O.value.snapshot))return _r(v,T,O);return _r(v,T)})}(v,E,y);return new Yr(T,O)}{if(v.shouldAttach(E.value)){const z=v.retrieve(E.value);if(null!==z){const ce=z.route;return ce.value._futureSnapshot=E.value,ce.children=E.children.map(pe=>_r(v,pe)),ce}}const T=function Ws(v){return new zr(new le.X(v.url),new le.X(v.params),new le.X(v.queryParams),new le.X(v.fragment),new le.X(v.data),v.outlet,v.component,v)}(E.value),O=E.children.map(z=>_r(v,z));return new Yr(T,O)}}const os="ngNavigationCancelingError";function io(v,E){const{redirectTo:y,navigationBehaviorOptions:T}=fn(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,O=na(!1,0,E);return O.url=y,O.navigationBehaviorOptions=T,O}function na(v,E,y){const T=new Error("NavigationCancelingError: "+(v||""));return T[os]=!0,T.cancellationCode=E,y&&(T.url=y),T}function yr(v){return Os(v)&&fn(v.url)}function Os(v){return v&&v[os]}class so{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ri,this.attachRef=null}}let Ri=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(y,T){const O=this.getOrCreateContext(y);O.outlet=T,this.contexts.set(y,O)}onChildOutletDestroyed(y){const T=this.getContext(y);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let T=this.getContext(y);return T||(T=new so,this.contexts.set(y,T)),T}getContext(y){return this.contexts.get(y)||null}}return v.\u0275fac=function(y){return new(y||v)},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const ii=!1;let Ns=(()=>{class v{constructor(y,T,O,z,ce){this.parentContexts=y,this.location=T,this.changeDetector=z,this.environmentInjector=ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=O||Pt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,ii);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,ii);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,ii);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,T){this.activated=y,this._activatedRoute=T,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,T){if(this.isActivated)throw new p.vHH(4013,ii);this._activatedRoute=y;const O=this.location,ce=y._futureSnapshot.component,pe=this.parentContexts.getOrCreateContext(this.name).children,et=new To(y,pe,O.injector);if(T&&function Yi(v){return!!v.resolveComponentFactory}(T)){const $t=T.resolveComponentFactory(ce);this.activated=O.createComponent($t,O.length,et)}else this.activated=O.createComponent(ce,{index:O.length,injector:et,environmentInjector:T??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(y){return new(y||v)(p.Y36(Ri),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},v.\u0275dir=p.lG2({type:v,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),v})();class To{constructor(E,y,T){this.route=E,this.childContexts=y,this.parent=T}get(E,y){return E===zr?this.route:E===Ri?this.childContexts:this.parent.get(E,y)}}let Xr=(()=>{class v{}return v.\u0275fac=function(y){return new(y||v)},v.\u0275cmp=p.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(y,T){1&y&&p._UZ(0,"router-outlet")},dependencies:[Ns],encapsulation:2}),v})();function Bo(v,E){return v.providers&&!v._injector&&(v._injector=(0,p.MMx)(v.providers,E,`Route: ${v.path}`)),v._injector??E}function ao(v){const E=v.children&&v.children.map(ao),y=E?{...v,children:E}:{...v};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==Pt&&(y.component=Xr),y}function sr(v){return v.outlet||Pt}function Ao(v,E){const y=v.filter(T=>sr(T)===E);return y.push(...v.filter(T=>sr(T)!==E)),y}function ms(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let E=v.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class ra{constructor(E,y,T,O){this.routeReuseStrategy=E,this.futureState=y,this.currState=T,this.forwardEvent=O}activate(E){const y=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,T,E),Ps(this.futureState.root),this.activateChildRoutes(y,T,E)}deactivateChildRoutes(E,y,T){const O=Qr(y);E.children.forEach(z=>{const ce=z.value.outlet;this.deactivateRoutes(z,O[ce],T),delete O[ce]}),Dn(O,(z,ce)=>{this.deactivateRouteAndItsChildren(z,T)})}deactivateRoutes(E,y,T){const O=E.value,z=y?y.value:null;if(O===z)if(O.component){const ce=T.getContext(O.outlet);ce&&this.deactivateChildRoutes(E,y,ce.children)}else this.deactivateChildRoutes(E,y,T);else z&&this.deactivateRouteAndItsChildren(y,T)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const T=y.getContext(E.value.outlet),O=T&&E.value.component?T.children:y,z=Qr(E);for(const ce of Object.keys(z))this.deactivateRouteAndItsChildren(z[ce],O);if(T&&T.outlet){const ce=T.outlet.detach(),pe=T.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:ce,route:E,contexts:pe})}}deactivateRouteAndOutlet(E,y){const T=y.getContext(E.value.outlet),O=T&&E.value.component?T.children:y,z=Qr(E);for(const ce of Object.keys(z))this.deactivateRouteAndItsChildren(z[ce],O);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(E,y,T){const O=Qr(y);E.children.forEach(z=>{this.activateRoutes(z,O[z.value.outlet],T),this.forwardEvent(new Rt(z.value.snapshot))}),E.children.length&&this.forwardEvent(new Ve(E.value.snapshot))}activateRoutes(E,y,T){const O=E.value,z=y?y.value:null;if(Ps(O),O===z)if(O.component){const ce=T.getOrCreateContext(O.outlet);this.activateChildRoutes(E,y,ce.children)}else this.activateChildRoutes(E,y,T);else if(O.component){const ce=T.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const pe=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),ce.children.onOutletReAttached(pe.contexts),ce.attachRef=pe.componentRef,ce.route=pe.route.value,ce.outlet&&ce.outlet.attach(pe.componentRef,pe.route.value),Ps(pe.route.value),this.activateChildRoutes(E,null,ce.children)}else{const pe=ms(O.snapshot),et=pe?.get(p._Vd)??null;ce.attachRef=null,ce.route=O,ce.resolver=et,ce.injector=pe,ce.outlet&&ce.outlet.activateWith(O,ce.injector),this.activateChildRoutes(E,null,ce.children)}}else this.activateChildRoutes(E,null,T)}}class mt{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class kn{constructor(E,y){this.component=E,this.route=y}}function $o(v,E,y){const T=v._root;return k(T,E?E._root:null,y,[T.value])}function Ar(v,E){const y=Symbol(),T=E.get(v,y);return T===y?"function"!=typeof v||(0,p.Z0I)(v)?E.get(v):v:T}function k(v,E,y,T,O={canDeactivateChecks:[],canActivateChecks:[]}){const z=Qr(E);return v.children.forEach(ce=>{(function P(v,E,y,T,O={canDeactivateChecks:[],canActivateChecks:[]}){const z=v.value,ce=E?E.value:null,pe=y?y.getContext(v.value.outlet):null;if(ce&&z.routeConfig===ce.routeConfig){const et=function M(v,E,y){if("function"==typeof y)return y(v,E);switch(y){case"pathParamsChange":return!Qe(v.url,E.url);case"pathParamsOrQueryParamsChange":return!Qe(v.url,E.url)||!gn(v.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xi(v,E)||!gn(v.queryParams,E.queryParams);default:return!xi(v,E)}}(ce,z,z.routeConfig.runGuardsAndResolvers);et?O.canActivateChecks.push(new mt(T)):(z.data=ce.data,z._resolvedData=ce._resolvedData),k(v,E,z.component?pe?pe.children:null:y,T,O),et&&pe&&pe.outlet&&pe.outlet.isActivated&&O.canDeactivateChecks.push(new kn(pe.outlet.component,ce))}else ce&&q(E,pe,O),O.canActivateChecks.push(new mt(T)),k(v,null,z.component?pe?pe.children:null:y,T,O)})(ce,z[ce.value.outlet],y,T.concat([ce.value]),O),delete z[ce.value.outlet]}),Dn(z,(ce,pe)=>q(ce,y.getContext(pe),O)),O}function q(v,E,y){const T=Qr(v),O=v.value;Dn(T,(z,ce)=>{q(z,O.component?E?E.children.getContext(ce):null:E,y)}),y.canDeactivateChecks.push(new kn(O.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,O))}function Ze(v){return"function"==typeof v}function li(v){return v instanceof he.K||"EmptyError"===v?.name}const Ys=Symbol("INITIAL_VALUE");function co(){return(0,Se.w)(v=>rt(v.map(E=>E.pipe((0,xt.q)(1),(0,Yt.O)(Ys)))).pipe((0,st.U)(E=>{for(const y of E)if(!0!==y){if(y===Ys)return Ys;if(!1===y||y instanceof wn)return y}return!0}),(0,It.h)(E=>E!==Ys),(0,xt.q)(1)))}function Mo(v){return(0,Ct.z)((0,Pe.b)(E=>{if(fn(E))throw io(0,E)}),(0,st.U)(E=>!0===E))}const fo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oi(v,E,y,T,O){const z=vs(v,E,y);return z.matched?function Wo(v,E,y,T){const O=E.canMatch;if(!O||0===O.length)return(0,B.of)(!0);const z=O.map(ce=>{const pe=Ar(ce,v);return Pn(function fi(v){return v&&Ze(v.canMatch)}(pe)?pe.canMatch(E,y):v.runInContext(()=>pe(E,y)))});return(0,B.of)(z).pipe(co(),Mo())}(T=Bo(E,T),E,y).pipe((0,st.U)(ce=>!0===ce?z:{...fo})):(0,B.of)(z)}function vs(v,E,y){if(""===E.path)return"full"===E.pathMatch&&(v.hasChildren()||y.length>0)?{...fo}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const O=(E.matcher||kr)(y,v,E);if(!O)return{...fo};const z={};Dn(O.posParams,(pe,et)=>{z[et]=pe.path});const ce=O.consumed.length>0?{...z,...O.consumed[O.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:O.consumed,remainingSegments:y.slice(O.consumed.length),parameters:ce,positionalParamSegments:O.posParams??{}}}function Ko(v,E,y,T,O="corrected"){if(y.length>0&&function vi(v,E,y){return y.some(T=>fr(v,E,T)&&sr(T)!==Pt)}(v,y,T)){const ce=new Ft(E,function hr(v,E,y,T){const O={};O[Pt]=T,T._sourceSegment=v,T._segmentIndexShift=E.length;for(const z of y)if(""===z.path&&sr(z)!==Pt){const ce=new Ft([],{});ce._sourceSegment=v,ce._segmentIndexShift=E.length,O[sr(z)]=ce}return O}(v,E,T,new Ft(y,v.children)));return ce._sourceSegment=v,ce._segmentIndexShift=E.length,{segmentGroup:ce,slicedSegments:[]}}if(0===y.length&&function Sr(v,E,y){return y.some(T=>fr(v,E,T))}(v,y,T)){const ce=new Ft(v.segments,function ia(v,E,y,T,O,z){const ce={};for(const pe of T)if(fr(v,y,pe)&&!O[sr(pe)]){const et=new Ft([],{});et._sourceSegment=v,et._segmentIndexShift="legacy"===z?v.segments.length:E.length,ce[sr(pe)]=et}return{...O,...ce}}(v,E,y,T,v.children,O));return ce._sourceSegment=v,ce._segmentIndexShift=E.length,{segmentGroup:ce,slicedSegments:y}}const z=new Ft(v.segments,v.children);return z._sourceSegment=v,z._segmentIndexShift=E.length,{segmentGroup:z,slicedSegments:y}}function fr(v,E,y){return(!(v.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function sa(v,E,y,T){return!!(sr(v)===T||T!==Pt&&fr(E,y,v))&&("**"===v.path||vs(E,v,y).matched)}function oa(v,E,y){return 0===E.length&&!v.children[y]}const bi=!1;class qo{constructor(E){this.segmentGroup=E||null}}class po{constructor(E){this.urlTree=E}}function Bi(v){return(0,ft._)(new qo(v))}function Fs(v){return(0,ft._)(new po(v))}class _i{constructor(E,y,T,O,z){this.injector=E,this.configLoader=y,this.urlSerializer=T,this.urlTree=O,this.config=z,this.allowRedirects=!0}apply(){const E=Ko(this.urlTree.root,[],[],this.config).segmentGroup,y=new Ft(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,Pt).pipe((0,st.U)(z=>this.createUrlTree(gt(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ge(z=>{if(z instanceof po)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof qo?this.noMatchError(z):z}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,Pt).pipe((0,st.U)(O=>this.createUrlTree(gt(O),E.queryParams,E.fragment))).pipe(Ge(O=>{throw O instanceof qo?this.noMatchError(O):O}))}noMatchError(E){return new p.vHH(4002,bi)}createUrlTree(E,y,T){const O=Re(E);return new wn(O,y,T)}expandSegmentGroup(E,y,T,O){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(E,y,T).pipe((0,st.U)(z=>new Ft([],z))):this.expandSegment(E,T,y,T.segments,O,!0)}expandChildren(E,y,T){const O=[];for(const z of Object.keys(T.children))"primary"===z?O.unshift(z):O.push(z);return(0,F.D)(O).pipe($e(z=>{const ce=T.children[z],pe=Ao(y,z);return this.expandSegmentGroup(E,pe,ce,z).pipe((0,st.U)(et=>({segment:et,outlet:z})))}),(0,ht.R)((z,ce)=>(z[ce.outlet]=ce.segment,z),{}),At())}expandSegment(E,y,T,O,z,ce){return(0,F.D)(T).pipe($e(pe=>this.expandSegmentAgainstRoute(E,y,T,pe,O,z,ce).pipe(Ge($t=>{if($t instanceof qo)return(0,B.of)(null);throw $t}))),(0,Nt.P)(pe=>!!pe),Ge((pe,et)=>{if(li(pe))return oa(y,O,z)?(0,B.of)(new Ft([],{})):Bi(y);throw pe}))}expandSegmentAgainstRoute(E,y,T,O,z,ce,pe){return sa(O,y,z,ce)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(E,y,O,z,ce):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,T,O,z,ce):Bi(y):Bi(y)}expandSegmentAgainstRouteUsingRedirect(E,y,T,O,z,ce){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,T,O,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,T,O,z,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,T,O){const z=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Fs(z):this.lineralizeSegments(T,z).pipe((0,Bt.z)(ce=>{const pe=new Ft(ce,{});return this.expandSegment(E,pe,y,ce,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,T,O,z,ce){const{matched:pe,consumedSegments:et,remainingSegments:$t,positionalParamSegments:jn}=vs(y,O,z);if(!pe)return Bi(y);const Jt=this.applyRedirectCommands(et,O.redirectTo,jn);return O.redirectTo.startsWith("/")?Fs(Jt):this.lineralizeSegments(O,Jt).pipe((0,Bt.z)(Vr=>this.expandSegment(E,y,T,Vr.concat($t),ce,!1)))}matchSegmentAgainstRoute(E,y,T,O,z){return"**"===T.path?(E=Bo(T,E),T.loadChildren?(T._loadedRoutes?(0,B.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):this.configLoader.loadChildren(E,T)).pipe((0,st.U)(pe=>(T._loadedRoutes=pe.routes,T._loadedInjector=pe.injector,new Ft(O,{})))):(0,B.of)(new Ft(O,{}))):Oi(y,T,O,E).pipe((0,Se.w)(({matched:ce,consumedSegments:pe,remainingSegments:et})=>ce?this.getChildConfig(E=T._injector??E,T,O).pipe((0,Bt.z)(jn=>{const Jt=jn.injector??E,Vr=jn.routes,{segmentGroup:Wr,slicedSegments:Is}=Ko(y,pe,et,Vr),Ei=new Ft(Wr.segments,Wr.children);if(0===Is.length&&Ei.hasChildren())return this.expandChildren(Jt,Vr,Ei).pipe((0,st.U)(uu=>new Ft(pe,uu)));if(0===Vr.length&&0===Is.length)return(0,B.of)(new Ft(pe,{}));const Us=sr(T)===z;return this.expandSegment(Jt,Ei,Vr,Is,Us?Pt:z,!0).pipe((0,st.U)(yo=>new Ft(pe.concat(yo.segments),yo.children)))})):Bi(y)))}getChildConfig(E,y,T){return y.children?(0,B.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,B.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function ho(v,E,y,T){const O=E.canLoad;if(void 0===O||0===O.length)return(0,B.of)(!0);const z=O.map(ce=>{const pe=Ar(ce,v);return Pn(function Hn(v){return v&&Ze(v.canLoad)}(pe)?pe.canLoad(E,y):v.runInContext(()=>pe(E,y)))});return(0,B.of)(z).pipe(co(),Mo())}(E,y,T).pipe((0,Bt.z)(O=>O?this.configLoader.loadChildren(E,y).pipe((0,Pe.b)(z=>{y._loadedRoutes=z.routes,y._loadedInjector=z.injector})):function ls(v){return(0,ft._)(na(bi,3))}())):(0,B.of)({routes:[],injector:E})}lineralizeSegments(E,y){let T=[],O=y.root;for(;;){if(T=T.concat(O.segments),0===O.numberOfChildren)return(0,B.of)(T);if(O.numberOfChildren>1||!O.children[Pt])return(0,ft._)(new p.vHH(4e3,bi));O=O.children[Pt]}}applyRedirectCommands(E,y,T){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,T)}applyRedirectCreateUrlTree(E,y,T,O){const z=this.createSegmentGroup(E,y.root,T,O);return new wn(z,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const T={};return Dn(E,(O,z)=>{if("string"==typeof O&&O.startsWith(":")){const pe=O.substring(1);T[z]=y[pe]}else T[z]=O}),T}createSegmentGroup(E,y,T,O){const z=this.createSegments(E,y.segments,T,O);let ce={};return Dn(y.children,(pe,et)=>{ce[et]=this.createSegmentGroup(E,pe,T,O)}),new Ft(z,ce)}createSegments(E,y,T,O){return y.map(z=>z.path.startsWith(":")?this.findPosParam(E,z,O):this.findOrReturn(z,T))}findPosParam(E,y,T){const O=T[y.path.substring(1)];if(!O)throw new p.vHH(4001,bi);return O}findOrReturn(E,y){let T=0;for(const O of y){if(O.path===E.path)return y.splice(T),O;T++}return E}}class Zo{}class xo{constructor(E,y,T,O,z,ce,pe,et){this.injector=E,this.rootComponentType=y,this.config=T,this.urlTree=O,this.url=z,this.paramsInheritanceStrategy=ce,this.relativeLinkResolution=pe,this.urlSerializer=et}recognize(){const E=Ko(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,Pt).pipe((0,st.U)(y=>{if(null===y)return null;const T=new ro([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new Yr(T,y),z=new gs(this.url,O);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(E){const y=E.value,T=Vo(y,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),E.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(E,y,T,O){return 0===T.segments.length&&T.hasChildren()?this.processChildren(E,y,T):this.processSegment(E,y,T,T.segments,O)}processChildren(E,y,T){return(0,F.D)(Object.keys(T.children)).pipe($e(O=>{const z=T.children[O],ce=Ao(y,O);return this.processSegmentGroup(E,ce,z,O)}),(0,ht.R)((O,z)=>O&&z?(O.push(...z),O):null),function Qt(v,E=!1){return(0,He.e)((y,T)=>{let O=0;y.subscribe((0,ye.x)(T,z=>{const ce=v(z,O++);(ce||E)&&T.next(z),!ce&&T.complete()}))})}(O=>null!==O),(0,jt.d)(null),At(),(0,st.U)(O=>{if(null===O)return null;const z=x(O);return function ru(v){v.sort((E,y)=>E.value.outlet===Pt?-1:y.value.outlet===Pt?1:E.value.outlet.localeCompare(y.value.outlet))}(z),z}))}processSegment(E,y,T,O,z){return(0,F.D)(y).pipe($e(ce=>this.processSegmentAgainstRoute(ce._injector??E,ce,T,O,z)),(0,Nt.P)(ce=>!!ce),Ge(ce=>{if(li(ce))return oa(T,O,z)?(0,B.of)([]):(0,B.of)(null);throw ce}))}processSegmentAgainstRoute(E,y,T,O,z){if(y.redirectTo||!sa(y,T,O,z))return(0,B.of)(null);let ce;if("**"===y.path){const pe=O.length>0?jr(O).parameters:{},et=Je(T)+O.length,$t=new ro(O,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pn(y),sr(y),y.component??y._loadedComponent??null,y,ve(T),et,dr(y),et);ce=(0,B.of)({snapshot:$t,consumedSegments:[],remainingSegments:[]})}else ce=Oi(T,y,O,E).pipe((0,st.U)(({matched:pe,consumedSegments:et,remainingSegments:$t,parameters:jn})=>{if(!pe)return null;const Jt=Je(T)+et.length;return{snapshot:new ro(et,jn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pn(y),sr(y),y.component??y._loadedComponent??null,y,ve(T),Jt,dr(y),Jt),consumedSegments:et,remainingSegments:$t}}));return ce.pipe((0,Se.w)(pe=>{if(null===pe)return(0,B.of)(null);const{snapshot:et,consumedSegments:$t,remainingSegments:jn}=pe;E=y._injector??E;const Jt=y._loadedInjector??E,Vr=function b(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(y),{segmentGroup:Wr,slicedSegments:Is}=Ko(T,$t,jn,Vr.filter(Us=>void 0===Us.redirectTo),this.relativeLinkResolution);if(0===Is.length&&Wr.hasChildren())return this.processChildren(Jt,Vr,Wr).pipe((0,st.U)(Us=>null===Us?null:[new Yr(et,Us)]));if(0===Vr.length&&0===Is.length)return(0,B.of)([new Yr(et,[])]);const Ei=sr(y)===z;return this.processSegment(Jt,Vr,Wr,Is,Ei?Pt:z).pipe((0,st.U)(Us=>null===Us?null:[new Yr(et,Us)]))}))}}function V(v){const E=v.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function x(v){const E=[],y=new Set;for(const T of v){if(!V(T)){E.push(T);continue}const O=E.find(z=>T.value.routeConfig===z.value.routeConfig);void 0!==O?(O.children.push(...T.children),y.add(O)):E.push(T)}for(const T of y){const O=x(T.children);E.push(new Yr(T.value,O))}return E.filter(T=>!y.has(T))}function ve(v){let E=v;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Je(v){let E=v,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function pn(v){return v.data||{}}function dr(v){return v.resolve||{}}function _s(v){return"string"==typeof v.title||null===v.title}function _t(v){return(0,Se.w)(E=>{const y=v(E);return y?(0,F.D)(y).pipe((0,st.U)(()=>E)):(0,B.of)(E)})}let wr=(()=>{class v{buildTitle(y){let T,O=y.root;for(;void 0!==O;)T=this.getResolvedTitleForRoute(O)??T,O=O.children.find(z=>z.outlet===Pt);return T}getResolvedTitleForRoute(y){return y.data[An]}}return v.\u0275fac=function(y){return new(y||v)},v.\u0275prov=p.Yz7({token:v,factory:function(){return(0,p.f3M)(xr)},providedIn:"root"}),v})(),xr=(()=>{class v extends wr{constructor(y){super(),this.title=y}updateTitle(y){const T=this.buildTitle(y);void 0!==T&&this.title.setTitle(T)}}return v.\u0275fac=function(y){return new(y||v)(p.LFG(Wn.Dx))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class Zt{}class ua extends class an{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}{}const We=new p.OlP("",{providedIn:"root",factory:()=>({})}),oi=new p.OlP("ROUTES");let Ua=(()=>{class v{constructor(y,T){this.injector=y,this.compiler=T,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,B.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const T=Pn(y.loadComponent()).pipe((0,Pe.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=z}),cn(()=>{this.componentLoaders.delete(y)})),O=new Xe.c(T,()=>new nt.x).pipe((0,$n.x)());return this.componentLoaders.set(y,O),O}loadChildren(y,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return(0,B.of)({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const z=this.loadModuleFactoryOrRoutes(T.loadChildren).pipe((0,st.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(T);let et,$t,jn=!1;Array.isArray(pe)?$t=pe:(et=pe.create(y).injector,$t=ar(et.get(oi,[],p.XFs.Self|p.XFs.Optional)));return{routes:$t.map(ao),injector:et}}),cn(()=>{this.childrenLoaders.delete(T)})),ce=new Xe.c(z,()=>new nt.x).pipe((0,$n.x)());return this.childrenLoaders.set(T,ce),ce}loadModuleFactoryOrRoutes(y){return Pn(y()).pipe((0,Bt.z)(T=>T instanceof p.YKP||Array.isArray(T)?(0,B.of)(T):(0,F.D)(this.compiler.compileModuleAsync(T))))}}return v.\u0275fac=function(y){return new(y||v)(p.LFG(p.zs3),p.LFG(p.Sil))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class Ru{}class Pu{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,y){return E}}function ja(v){throw v}function la(v,E,y){return E.parse("/")}const Ol={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ca(){const v=(0,p.f3M)(H),E=(0,p.f3M)(Ri),y=(0,p.f3M)(yt.Ye),T=(0,p.f3M)(p.zs3),O=(0,p.f3M)(p.Sil),z=(0,p.f3M)(oi,{optional:!0})??[],ce=(0,p.f3M)(We,{optional:!0})??{},pe=(0,p.f3M)(xr),et=(0,p.f3M)(wr,{optional:!0}),$t=(0,p.f3M)(Ru,{optional:!0}),jn=(0,p.f3M)(Zt,{optional:!0}),Jt=new or(null,v,E,y,T,O,ar(z));return $t&&(Jt.urlHandlingStrategy=$t),jn&&(Jt.routeReuseStrategy=jn),Jt.titleStrategy=et??pe,function ca(v,E){v.errorHandler&&(E.errorHandler=v.errorHandler),v.malformedUriErrorHandler&&(E.malformedUriErrorHandler=v.malformedUriErrorHandler),v.onSameUrlNavigation&&(E.onSameUrlNavigation=v.onSameUrlNavigation),v.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=v.paramsInheritanceStrategy),v.relativeLinkResolution&&(E.relativeLinkResolution=v.relativeLinkResolution),v.urlUpdateStrategy&&(E.urlUpdateStrategy=v.urlUpdateStrategy),v.canceledNavigationResolution&&(E.canceledNavigationResolution=v.canceledNavigationResolution)}(ce,Jt),Jt}let or=(()=>{class v{constructor(y,T,O,z,ce,pe,et){this.rootComponentType=y,this.urlSerializer=T,this.rootContexts=O,this.location=z,this.config=et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nt.x,this.errorHandler=ja,this.malformedUriErrorHandler=la,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,B.of)(void 0),this.urlHandlingStrategy=new Pu,this.routeReuseStrategy=new ua,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ce.get(Ua),this.configLoader.onLoadEndListener=Vr=>this.triggerEvent(new Ae(Vr)),this.configLoader.onLoadStartListener=Vr=>this.triggerEvent(new no(Vr)),this.ngModule=ce.get(p.h0i),this.console=ce.get(p.c2e);const Jt=ce.get(p.R0b);this.isNgZoneEnabled=Jt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(et),this.currentUrlTree=function qt(){return new wn(new Ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ss(this.currentUrlTree,this.rootComponentType),this.transitions=new le.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(y){const T=this.events;return y.pipe((0,It.h)(O=>0!==O.id),(0,st.U)(O=>({...O,extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Se.w)(O=>{let z=!1,ce=!1;return(0,B.of)(O).pipe((0,Pe.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Se.w)(pe=>{const et=this.browserUrlTree.toString(),$t=!this.navigated||pe.extractedUrl.toString()!==et||et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||$t)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Js(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,B.of)(pe).pipe((0,Se.w)(Jt=>{const Vr=this.transitions.getValue();return T.next(new Zr(Jt.id,this.serializeUrl(Jt.extractedUrl),Jt.source,Jt.restoredState)),Vr!==this.transitions.getValue()?fe.E:Promise.resolve(Jt)}),function Ji(v,E,y,T){return(0,Se.w)(O=>function ji(v,E,y,T,O){return new _i(v,E,y,T,O).apply()}(v,E,y,O.extractedUrl,T).pipe((0,st.U)(z=>({...O,urlAfterRedirects:z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Pe.b)(Jt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Jt.urlAfterRedirects},O.urlAfterRedirects=Jt.urlAfterRedirects}),function Zn(v,E,y,T,O,z){return(0,Bt.z)(ce=>function go(v,E,y,T,O,z,ce="emptyOnly",pe="legacy"){return new xo(v,E,y,T,O,ce,pe,z).recognize().pipe((0,Se.w)(et=>null===et?function Qs(v){return new we.y(E=>E.error(v))}(new Zo):(0,B.of)(et)))}(v,E,y,ce.urlAfterRedirects,T.serialize(ce.urlAfterRedirects),T,O,z).pipe((0,st.U)(pe=>({...ce,targetSnapshot:pe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Pe.b)(Jt=>{if(O.targetSnapshot=Jt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Jt.extras.skipLocationChange){const Wr=this.urlHandlingStrategy.merge(Jt.urlAfterRedirects,Jt.rawUrl);this.setBrowserUrl(Wr,Jt)}this.browserUrlTree=Jt.urlAfterRedirects}const Vr=new Rs(Jt.id,this.serializeUrl(Jt.extractedUrl),this.serializeUrl(Jt.urlAfterRedirects),Jt.targetSnapshot);T.next(Vr)}));if($t&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Vr,extractedUrl:Wr,source:Is,restoredState:Ei,extras:Us}=pe,Fu=new Zr(Vr,this.serializeUrl(Wr),Is,Ei);T.next(Fu);const yo=ss(Wr,this.rootComponentType).snapshot;return O={...pe,targetSnapshot:yo,urlAfterRedirects:Wr,extras:{...Us,skipLocationChange:!1,replaceUrl:!1}},(0,B.of)(O)}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),fe.E}),(0,Pe.b)(pe=>{const et=new wa(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(et)}),(0,st.U)(pe=>O={...pe,guards:$o(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function Ia(v,E){return(0,Bt.z)(y=>{const{targetSnapshot:T,currentSnapshot:O,guards:{canActivateChecks:z,canDeactivateChecks:ce}}=y;return 0===ce.length&&0===z.length?(0,B.of)({...y,guardsResult:!0}):function Ho(v,E,y,T){return(0,F.D)(v).pipe((0,Bt.z)(O=>function Da(v,E,y,T,O){const z=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,B.of)(!0);const ce=z.map(pe=>{const et=ms(E)??O,$t=Ar(pe,et);return Pn(function hi(v){return v&&Ze(v.canDeactivate)}($t)?$t.canDeactivate(v,E,y,T):et.runInContext(()=>$t(v,E,y,T))).pipe((0,Nt.P)())});return(0,B.of)(ce).pipe(co())}(O.component,O.route,y,E,T)),(0,Nt.P)(O=>!0!==O,!0))}(ce,T,O,v).pipe((0,Bt.z)(pe=>pe&&function tn(v){return"boolean"==typeof v}(pe)?function Go(v,E,y,T){return(0,F.D)(E).pipe($e(O=>(0,Ke.z)(function So(v,E){return null!==v&&E&&E(new Ie(v)),(0,B.of)(!0)}(O.route.parent,T),function zo(v,E){return null!==v&&E&&E(new ct(v)),(0,B.of)(!0)}(O.route,T),function ks(v,E,y){const T=E[E.length-1],z=E.slice(0,E.length-1).reverse().map(ce=>function uo(v){const E=v.routeConfig?v.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:v,guards:E}:null}(ce)).filter(ce=>null!==ce).map(ce=>(0,Ne.P)(()=>{const pe=ce.guards.map(et=>{const $t=ms(ce.node)??y,jn=Ar(et,$t);return Pn(function ys(v){return v&&Ze(v.canActivateChild)}(jn)?jn.canActivateChild(T,v):$t.runInContext(()=>jn(T,v))).pipe((0,Nt.P)())});return(0,B.of)(pe).pipe(co())}));return(0,B.of)(z).pipe(co())}(v,O.path,y),function Pi(v,E,y){const T=E.routeConfig?E.routeConfig.canActivate:null;if(!T||0===T.length)return(0,B.of)(!0);const O=T.map(z=>(0,Ne.P)(()=>{const ce=ms(E)??y,pe=Ar(z,ce);return Pn(function Zs(v){return v&&Ze(v.canActivate)}(pe)?pe.canActivate(E,v):ce.runInContext(()=>pe(E,v))).pipe((0,Nt.P)())}));return(0,B.of)(O).pipe(co())}(v,O.route,y))),(0,Nt.P)(O=>!0!==O,!0))}(T,z,v,E):(0,B.of)(pe)),(0,st.U)(pe=>({...y,guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,Pe.b)(pe=>{if(O.guardsResult=pe.guardsResult,fn(pe.guardsResult))throw io(0,pe.guardsResult);const et=new lr(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(et)}),(0,It.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),_t(pe=>{if(pe.guards.canActivateChecks.length)return(0,B.of)(pe).pipe((0,Pe.b)(et=>{const $t=new Do(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent($t)}),(0,Se.w)(et=>{let $t=!1;return(0,B.of)(et).pipe(function Er(v,E){return(0,Bt.z)(y=>{const{targetSnapshot:T,guards:{canActivateChecks:O}}=y;if(!O.length)return(0,B.of)(y);let z=0;return(0,F.D)(O).pipe($e(ce=>function vn(v,E,y,T){const O=v.routeConfig,z=v._resolve;return void 0!==O?.title&&!_s(O)&&(z[An]=O.title),function Mr(v,E,y,T){const O=function Fn(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===O.length)return(0,B.of)({});const z={};return(0,F.D)(O).pipe((0,Bt.z)(ce=>function si(v,E,y,T){const O=ms(E)??T,z=Ar(v,O);return Pn(z.resolve?z.resolve(E,y):O.runInContext(()=>z(E,y)))}(v[ce],E,y,T).pipe((0,Nt.P)(),(0,Pe.b)(pe=>{z[ce]=pe}))),lt(1),(0,ln.h)(z),Ge(ce=>li(ce)?fe.E:(0,ft._)(ce)))}(z,v,E,T).pipe((0,st.U)(ce=>(v._resolvedData=ce,v.data=Vo(v,y).resolve,O&&_s(O)&&(v.data[An]=O.title),null)))}(ce.route,T,v,E)),(0,Pe.b)(()=>z++),lt(1),(0,Bt.z)(ce=>z===O.length?(0,B.of)(y):fe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Pe.b)({next:()=>$t=!0,complete:()=>{$t||(this.restoreHistory(et),this.cancelNavigationTransition(et,"",2))}}))}),(0,Pe.b)(et=>{const $t=new Co(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent($t)}))}),_t(pe=>{const et=$t=>{const jn=[];$t.routeConfig?.loadComponent&&!$t.routeConfig._loadedComponent&&jn.push(this.configLoader.loadComponent($t.routeConfig).pipe((0,Pe.b)(Jt=>{$t.component=Jt}),(0,st.U)(()=>{})));for(const Jt of $t.children)jn.push(...et(Jt));return jn};return rt(et(pe.targetSnapshot.root)).pipe((0,jt.d)(),(0,xt.q)(1))}),_t(()=>this.afterPreactivation()),(0,st.U)(pe=>{const et=function ta(v,E,y){const T=_r(v,E._root,y?y._root:void 0);return new ir(T,E)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return O={...pe,targetRouterState:et}}),(0,Pe.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((v,E,y)=>(0,st.U)(T=>(new ra(E,T.targetRouterState,T.currentRouterState,y).activate(v),T)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,Pe.b)({next(){z=!0},complete(){z=!0}}),cn(()=>{z||ce||this.cancelNavigationTransition(O,"",1),this.currentNavigation?.id===O.id&&(this.currentNavigation=null)}),Ge(pe=>{if(ce=!0,Os(pe)){yr(pe)||(this.navigated=!0,this.restoreHistory(O,!0));const et=new ps(O.id,this.serializeUrl(O.extractedUrl),pe.message,pe.cancellationCode);if(T.next(et),yr(pe)){const $t=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),jn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Js(O.source)};this.scheduleNavigation($t,"imperative",null,jn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{this.restoreHistory(O,!0);const et=new to(O.id,this.serializeUrl(O.extractedUrl),pe,O.targetSnapshot??void 0);T.next(et);try{O.resolve(this.errorHandler(pe))}catch($t){O.reject($t)}}return fe.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next({...this.transitions.value,...y})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const T="popstate"===y.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{const O={replaceUrl:!0},z=y.state?.navigationId?y.state:null;if(z){const pe={...z};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(O.state=pe)}const ce=this.parseUrl(y.url);this.scheduleNavigation(ce,T,z,O)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){this.config=y.map(ao),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,T={}){const{relativeTo:O,queryParams:z,fragment:ce,queryParamsHandling:pe,preserveFragment:et}=T,$t=O||this.routerState.root,jn=et?this.currentUrlTree.fragment:ce;let Jt=null;switch(pe){case"merge":Jt={...this.currentUrlTree.queryParams,...z};break;case"preserve":Jt=this.currentUrlTree.queryParams;break;default:Jt=z||null}return null!==Jt&&(Jt=this.removeEmptyProps(Jt)),Kr($t,this.currentUrlTree,y,Jt,jn??null)}navigateByUrl(y,T={skipLocationChange:!1}){const O=fn(y)?y:this.parseUrl(y),z=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,T)}navigate(y,T={skipLocationChange:!1}){return function Rn(v){for(let E=0;E<v.length;E++){if(null==v[E])throw new p.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,T),T)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let T;try{T=this.urlSerializer.parse(y)}catch(O){T=this.malformedUriErrorHandler(O,this.urlSerializer,y)}return T}isActive(y,T){let O;if(O=!0===T?{...Ol}:!1===T?{...Nl}:T,fn(y))return mr(this.currentUrlTree,y,O);const z=this.parseUrl(y);return mr(this.currentUrlTree,z,O)}removeEmptyProps(y){return Object.keys(y).reduce((T,O)=>{const z=y[O];return null!=z&&(T[O]=z),T},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new yi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,T,O,z,ce){if(this.disposed)return Promise.resolve(!1);let pe,et,$t;ce?(pe=ce.resolve,et=ce.reject,$t=ce.promise):$t=new Promise((Vr,Wr)=>{pe=Vr,et=Wr});const jn=++this.navigationId;let Jt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(O=this.location.getState()),Jt=O&&O.\u0275routerPageId?O.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Jt=0,this.setTransition({id:jn,targetPageId:Jt,source:T,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:z,resolve:pe,reject:et,promise:$t,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),$t.catch(Vr=>Promise.reject(Vr))}setBrowserUrl(y,T){const O=this.urlSerializer.serialize(y),z={...T.extras.state,...this.generateNgRouterState(T.id,T.targetPageId)};this.location.isCurrentPathEqualTo(O)||T.extras.replaceUrl?this.location.replaceState(O,"",z):this.location.go(O,"",z)}restoreHistory(y,T=!1){if("computed"===this.canceledNavigationResolution){const O=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===O?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===O&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(O)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,T,O){const z=new ps(y.id,this.serializeUrl(y.extractedUrl),T,O);this.triggerEvent(z),y.resolve(!1)}generateNgRouterState(y,T){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:T}:{navigationId:y}}}return v.\u0275fac=function(y){p.$Z()},v.\u0275prov=p.Yz7({token:v,factory:function(){return Ca()},providedIn:"root"}),v})();function Js(v){return"imperative"!==v}let $a=(()=>{class v{constructor(y,T,O,z,ce){this.router=y,this.route=T,this.tabIndexAttribute=O,this.renderer=z,this.el=ce,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new nt.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const T=this.renderer,O=this.el.nativeElement;null!==y?T.setAttribute(O,"tabindex",y):T.removeAttribute(O,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(y){return new(y||v)(p.Y36(or),p.Y36(zr),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},v.\u0275dir=p.lG2({type:v,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,T){1&y&&p.NdJ("click",function(){return T.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),v})(),Rr=(()=>{class v{constructor(y,T,O){this.router=y,this.route=T,this.locationStrategy=O,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new nt.x,this.subscription=y.events.subscribe(z=>{z instanceof yi&&this.updateTargetUrlAndHref()})}set preserveFragment(y){this._preserveFragment=(0,p.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,p.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,p.D6c)(y)}get replaceUrl(){return this._replaceUrl}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,T,O,z,ce){return!!(0!==y||T||O||z||ce||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(y){return new(y||v)(p.Y36(or),p.Y36(zr),p.Y36(yt.S$))},v.\u0275dir=p.lG2({type:v,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,T){1&y&&p.NdJ("click",function(z){return T.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&y&&p.uIk("target",T.target)("href",T.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),v})();class In{}let zt=(()=>{class v{constructor(y,T,O,z,ce){this.router=y,this.injector=O,this.preloadingStrategy=z,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,It.h)(y=>y instanceof yi),$e(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,T){const O=[];for(const z of T){z.providers&&!z._injector&&(z._injector=(0,p.MMx)(z.providers,y,`Route: ${z.path}`));const ce=z._injector??y,pe=z._loadedInjector??ce;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?O.push(this.preloadConfig(ce,z)):(z.children||z._loadedRoutes)&&O.push(this.processRoutes(pe,z.children??z._loadedRoutes))}return(0,F.D)(O).pipe((0,Yn.J)())}preloadConfig(y,T){return this.preloadingStrategy.preload(T,()=>{let O;O=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(y,T):(0,B.of)(null);const z=O.pipe((0,Bt.z)(ce=>null===ce?(0,B.of)(void 0):(T._loadedRoutes=ce.routes,T._loadedInjector=ce.injector,this.processRoutes(ce.injector??y,ce.routes))));if(T.loadComponent&&!T._loadedComponent){const ce=this.loader.loadComponent(T);return(0,F.D)([z,ce]).pipe((0,Yn.J)())}return z})}}return v.\u0275fac=function(y){return new(y||v)(p.LFG(or),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(In),p.LFG(Ua))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const $i=new p.OlP("");let ba=(()=>{class v{constructor(y,T,O={}){this.router=y,this.viewportScroller=T,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Zr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof yi&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Cn&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,T){this.router.triggerEvent(new Cn(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return v.\u0275fac=function(y){p.$Z()},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac}),v})();function Po(v,E){return{\u0275kind:v,\u0275providers:E}}function Ta(v){return[{provide:oi,multi:!0,useValue:v}]}function Ou(){const v=(0,p.f3M)(p.zs3);return E=>{const y=v.get(p.z2F);if(E!==y.components[0])return;const T=v.get(or),O=v.get(Es);1===v.get(su)&&T.initialNavigation(),v.get(ti,null,p.XFs.Optional)?.setUpPreloading(),v.get($i,null,p.XFs.Optional)?.init(),T.resetRootComponentType(y.componentTypes[0]),O.closed||(O.next(),O.unsubscribe())}}const Es=new p.OlP("",{factory:()=>new nt.x}),su=new p.OlP("",{providedIn:"root",factory:()=>1});const ti=new p.OlP("");function je(v){return Po(0,[{provide:ti,useExisting:zt},{provide:In,useExisting:v}])}const pi=new p.OlP("ROUTER_FORROOT_GUARD"),Ni=[yt.Ye,{provide:H,useClass:oe},{provide:or,useFactory:Ca},Ri,{provide:zr,useFactory:function Ga(v){return v.routerState.root},deps:[or]},Ua];function ou(){return new p.PXZ("Router",or)}let Vs=(()=>{class v{constructor(y){}static forRoot(y,T){return{ngModule:v,providers:[Ni,[],Ta(y),{provide:pi,useFactory:kl,deps:[[or,new p.FiY,new p.tp0]]},{provide:We,useValue:T||{}},T?.useHash?{provide:yt.S$,useClass:yt.Do}:{provide:yt.S$,useClass:yt.b0},{provide:$i,useFactory:()=>{const v=(0,p.f3M)(or),E=(0,p.f3M)(yt.EM),y=(0,p.f3M)(We);return y.scrollOffset&&E.setOffset(y.scrollOffset),new ba(v,E,y)}},T?.preloadingStrategy?je(T.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:ou},T?.initialNavigation?ds(T):[],[{provide:Sa,useFactory:Ou},{provide:p.tb,multi:!0,useExisting:Sa}]]}}static forChild(y){return{ngModule:v,providers:[Ta(y)]}}}return v.\u0275fac=function(y){return new(y||v)(p.LFG(pi,8))},v.\u0275mod=p.oAB({type:v}),v.\u0275inj=p.cJS({imports:[Xr]}),v})();function kl(v){return"guarded"}function ds(v){return["disabled"===v.initialNavigation?Po(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const E=(0,p.f3M)(or);return()=>{E.setUpLocationChangeListener()}}},{provide:su,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Po(2,[{provide:su,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:E=>{const y=E.get(yt.V_,Promise.resolve());let T=!1;return()=>y.then(()=>new Promise(z=>{const ce=E.get(or),pe=E.get(Es);(function O(z){E.get(or).events.pipe((0,It.h)(pe=>pe instanceof yi||pe instanceof ps||pe instanceof to),(0,st.U)(pe=>pe instanceof yi||pe instanceof ps&&(0===pe.code||1===pe.code)&&null),(0,It.h)(pe=>null!==pe),(0,xt.q)(1)).subscribe(()=>{z()})})(()=>{z(!0),T=!0}),ce.afterPreactivation=()=>(z(!0),T||pe.closed?(0,B.of)(void 0):pe),ce.initialNavigation()}))}}]).\u0275providers:[]]}const Sa=new p.OlP("")},3942:(Lt,Le,R)=>{R.d(Le,{Z:()=>Ye});var p=R(2090),F=R(4859),B=R(6881),le=R(1877);class he{constructor(Ke,Ne){this._delegate=Ke,this.firebase=Ne,(0,B._addComponent)(Ke,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(Ke,Ne=B._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(Ke);return!ft.isInitialized()&&"EXPLICIT"===(null===(Ct=ft.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:Ne})}_removeServiceInstance(Ke,Ne=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(Ne)}_addComponent(Ke){(0,B._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,B._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function _e(){const Tt=function te(Tt){const Ke={},Ne={__esModule:!0,initializeApp:function fe(st,Se={}){const xt=B.initializeApp(st,Se);if((0,p.r3)(Ke,xt.name))return Ke[xt.name];const Yt=new Tt(xt,Ne);return Ke[xt.name]=Yt,Yt},app:ft,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function nt(st){const Se=st.name,xt=Se.replace("-compat","");if(B._registerComponent(st)&&"PUBLIC"===st.type){const Yt=(It=ft())=>{if("function"!=typeof It[xt])throw Ee.create("invalid-app-argument",{appName:Se});return It[xt]()};void 0!==st.serviceProps&&(0,p.ZB)(Yt,st.serviceProps),Ne[xt]=Yt,Tt.prototype[xt]=function(...It){return this._getService.bind(this,Se).apply(this,st.multipleInstances?It:[])}}return"PUBLIC"===st.type?Ne[xt]:null},removeApp:function Ct(st){delete Ke[st]},useAsService:function yt(st,Se){return"serverAuth"===Se?null:Se},modularAPIs:B}};function ft(st){if(!(0,p.r3)(Ke,st=st||B._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:st});return Ke[st]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function Xe(){return Object.keys(Ke).map(st=>Ke[st])}}),ft.App=Tt,Ne}(he);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Ke(Ne){(0,p.ZB)(Tt,Ne)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Tt}(),ue=new le.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=ee;!function rt(Tt){(0,B.registerVersion)("@firebase/app-compat","0.2.13",Tt)}()},6881:(Lt,Le,R)=>{R.r(Le),R.d(Le,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Nr,_addComponent:()=>qt,_addOrOverwriteComponent:()=>on,_apps:()=>Pn,_clearComponents:()=>rr,_components:()=>dn,_getProvider:()=>mr,_registerComponent:()=>Mn,_removeServiceInstance:()=>nr,deleteApp:()=>Et,getApp:()=>Ft,getApps:()=>Te,initializeApp:()=>wn,onLog:()=>H,registerVersion:()=>ke,setLogLevel:()=>oe});var p=R(5861),F=R(4859),B=R(1877),le=R(2090);let we,Ee;const ee=new WeakMap,ue=new WeakMap,ye=new WeakMap,ut=new WeakMap,rt=new WeakMap;let Ke={get(Oe,Re,gt){if(Oe instanceof IDBTransaction){if("done"===Re)return ue.get(Oe);if("objectStoreNames"===Re)return Oe.objectStoreNames||ye.get(Oe);if("store"===Re)return gt.objectStoreNames[1]?void 0:gt.objectStore(gt.objectStoreNames[0])}return fe(Oe[Re])},set:(Oe,Re,gt)=>(Oe[Re]=gt,!0),has:(Oe,Re)=>Oe instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in Oe};function ft(Oe){return"function"==typeof Oe?function Ct(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Oe)?function(...Re){return Oe.apply(Xe(this),Re),fe(ee.get(this))}:function(...Re){return fe(Oe.apply(Xe(this),Re))}:function(Re,...gt){const wt=Oe.call(Xe(this),Re,...gt);return ye.set(wt,Re.sort?Re.sort():[Re]),fe(wt)}}(Oe):(Oe instanceof IDBTransaction&&function Tt(Oe){if(ue.has(Oe))return;const Re=new Promise((gt,wt)=>{const fn=()=>{Oe.removeEventListener("complete",xn),Oe.removeEventListener("error",Gn),Oe.removeEventListener("abort",Gn)},xn=()=>{gt(),fn()},Gn=()=>{wt(Oe.error||new DOMException("AbortError","AbortError")),fn()};Oe.addEventListener("complete",xn),Oe.addEventListener("error",Gn),Oe.addEventListener("abort",Gn)});ue.set(Oe,Re)}(Oe),((Oe,Re)=>Re.some(gt=>Oe instanceof gt))(Oe,function te(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Oe,Ke):Oe)}function fe(Oe){if(Oe instanceof IDBRequest)return function Ye(Oe){const Re=new Promise((gt,wt)=>{const fn=()=>{Oe.removeEventListener("success",xn),Oe.removeEventListener("error",Gn)},xn=()=>{gt(fe(Oe.result)),fn()},Gn=()=>{wt(Oe.error),fn()};Oe.addEventListener("success",xn),Oe.addEventListener("error",Gn)});return Re.then(gt=>{gt instanceof IDBCursor&&ee.set(gt,Oe)}).catch(()=>{}),rt.set(Re,Oe),Re}(Oe);if(ut.has(Oe))return ut.get(Oe);const Re=ft(Oe);return Re!==Oe&&(ut.set(Oe,Re),rt.set(Re,Oe)),Re}const Xe=Oe=>rt.get(Oe),st=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],xt=new Map;function Yt(Oe,Re){if(!(Oe instanceof IDBDatabase)||Re in Oe||"string"!=typeof Re)return;if(xt.get(Re))return xt.get(Re);const gt=Re.replace(/FromIndex$/,""),wt=Re!==gt,fn=Se.includes(gt);if(!(gt in(wt?IDBIndex:IDBObjectStore).prototype)||!fn&&!st.includes(gt))return;const xn=function(){var Gn=(0,p.Z)(function*(Cr,...Nn){const Kr=this.transaction(Cr,fn?"readwrite":"readonly");let $r=Kr.store;return wt&&($r=$r.index(Nn.shift())),(yield Promise.all([$r[gt](...Nn),fn&&Kr.done]))[0]});return function(Nn){return Gn.apply(this,arguments)}}();return xt.set(Re,xn),xn}!function Ne(Oe){Ke=Oe(Ke)}(Oe=>({...Oe,get:(Re,gt,wt)=>Yt(Re,gt)||Oe.get(Re,gt,wt),has:(Re,gt)=>!!Yt(Re,gt)||Oe.has(Re,gt)}));class It{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(gt=>{if(function Bt(Oe){return"VERSION"===Oe.getComponent()?.type}(gt)){const wt=gt.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(gt=>gt).join(" ")}}const Nt="@firebase/app",$e=new B.Yd("@firebase/app"),Nr="[DEFAULT]",Dn={[Nt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,dn=new Map;function qt(Oe,Re){try{Oe.container.addComponent(Re)}catch(gt){$e.debug(`Component ${Re.name} failed to register with FirebaseApp ${Oe.name}`,gt)}}function on(Oe,Re){Oe.container.addOrOverwriteComponent(Re)}function Mn(Oe){const Re=Oe.name;if(dn.has(Re))return $e.debug(`There were multiple attempts to register component ${Re}.`),!1;dn.set(Re,Oe);for(const gt of Pn.values())qt(gt,Oe);return!0}function mr(Oe,Re){const gt=Oe.container.getProvider("heartbeat").getImmediate({optional:!0});return gt&&gt.triggerHeartbeat(),Oe.container.getProvider(Re)}function nr(Oe,Re,gt=Nr){mr(Oe,Re).clearInstance(gt)}function rr(){dn.clear()}const ur=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(Re,gt,wt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},gt),this._name=gt.name,this._automaticDataCollectionEnabled=gt.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}const Fr="9.23.0";function wn(Oe,Re={}){let gt=Oe;"object"!=typeof Re&&(Re={name:Re});const wt=Object.assign({name:Nr,automaticDataCollectionEnabled:!1},Re),fn=wt.name;if("string"!=typeof fn||!fn)throw ur.create("bad-app-name",{appName:String(fn)});if(gt||(gt=(0,le.aH)()),!gt)throw ur.create("no-options");const xn=Pn.get(fn);if(xn){if((0,le.vZ)(gt,xn.options)&&(0,le.vZ)(wt,xn.config))return xn;throw ur.create("duplicate-app",{appName:fn})}const Gn=new F.H0(fn);for(const Nn of dn.values())Gn.addComponent(Nn);const Cr=new En(gt,wt,Gn);return Pn.set(fn,Cr),Cr}function Ft(Oe=Nr){const Re=Pn.get(Oe);if(!Re&&Oe===Nr&&(0,le.aH)())return wn();if(!Re)throw ur.create("no-app",{appName:Oe});return Re}function Te(){return Array.from(Pn.values())}function Et(Oe){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(Oe){const Re=Oe.name;Pn.has(Re)&&(Pn.delete(Re),yield Promise.all(Oe.container.getProviders().map(gt=>gt.delete())),Oe.isDeleted=!0)})).apply(this,arguments)}function ke(Oe,Re,gt){var wt;let fn=null!==(wt=Dn[Oe])&&void 0!==wt?wt:Oe;gt&&(fn+=`-${gt}`);const xn=fn.match(/\s|\//),Gn=Re.match(/\s|\//);if(xn||Gn){const Cr=[`Unable to register library "${fn}" with version "${Re}":`];return xn&&Cr.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),xn&&Gn&&Cr.push("and"),Gn&&Cr.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void $e.warn(Cr.join(" "))}Mn(new F.wA(`${fn}-version`,()=>({library:fn,version:Re}),"VERSION"))}function H(Oe,Re){if(null!==Oe&&"function"!=typeof Oe)throw ur.create("invalid-log-argument");(0,B.Am)(Oe,Re)}function oe(Oe){(0,B.Ub)(Oe)}const se="firebase-heartbeat-store";let de=null;function K(){return de||(de=function nt(Oe,Re,{blocked:gt,upgrade:wt,blocking:fn,terminated:xn}={}){const Gn=indexedDB.open(Oe,Re),Cr=fe(Gn);return wt&&Gn.addEventListener("upgradeneeded",Nn=>{wt(fe(Gn.result),Nn.oldVersion,Nn.newVersion,fe(Gn.transaction),Nn)}),gt&&Gn.addEventListener("blocked",Nn=>gt(Nn.oldVersion,Nn.newVersion,Nn)),Cr.then(Nn=>{xn&&Nn.addEventListener("close",()=>xn()),fn&&Nn.addEventListener("versionchange",Kr=>fn(Kr.oldVersion,Kr.newVersion,Kr))}).catch(()=>{}),Cr}("firebase-heartbeat-database",1,{upgrade:(Oe,Re)=>{0===Re&&Oe.createObjectStore(se)}}).catch(Oe=>{throw ur.create("idb-open",{originalErrorMessage:Oe.message})})),de}function G(){return(G=(0,p.Z)(function*(Oe){try{return yield(yield K()).transaction(se).objectStore(se).get(kt(Oe))}catch(Re){if(Re instanceof le.ZR)$e.warn(Re.message);else{const gt=ur.create("idb-get",{originalErrorMessage:Re?.message});$e.warn(gt.message)}}})).apply(this,arguments)}function De(Oe,Re){return ot.apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(Oe,Re){try{const wt=(yield K()).transaction(se,"readwrite");yield wt.objectStore(se).put(Re,kt(Oe)),yield wt.done}catch(gt){if(gt instanceof le.ZR)$e.warn(gt.message);else{const wt=ur.create("idb-set",{originalErrorMessage:gt?.message});$e.warn(wt.message)}}})).apply(this,arguments)}function kt(Oe){return`${Oe.name}!${Oe.options.appId}`}class ae{constructor(Re){this.container=Re,this._heartbeatsCache=null;const gt=this.container.getProvider("app").getImmediate();this._storage=new Ue(gt),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Re=this;return(0,p.Z)(function*(){const wt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=X();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==fn&&!Re._heartbeatsCache.heartbeats.some(xn=>xn.date===fn))return Re._heartbeatsCache.heartbeats.push({date:fn,agent:wt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(xn=>{const Gn=new Date(xn.date).valueOf();return Date.now()-Gn<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,p.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const gt=X(),{heartbeatsToSend:wt,unsentEntries:fn}=function Me(Oe,Re=1024){const gt=[];let wt=Oe.slice();for(const fn of Oe){const xn=gt.find(Gn=>Gn.agent===fn.agent);if(xn){if(xn.dates.push(fn.date),Ot(gt)>Re){xn.dates.pop();break}}else if(gt.push({agent:fn.agent,dates:[fn.date]}),Ot(gt)>Re){gt.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:gt,unsentEntries:wt}}(Re._heartbeatsCache.heartbeats),xn=(0,le.L)(JSON.stringify({version:2,heartbeats:wt}));return Re._heartbeatsCache.lastSentHeartbeatDate=gt,fn.length>0?(Re._heartbeatsCache.heartbeats=fn,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),xn})()}}function X(){return(new Date).toISOString().substring(0,10)}class Ue{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,p.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function Y(Oe){return G.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var gt=this;return(0,p.Z)(function*(){var wt;if(yield gt._canUseIndexedDBPromise){const xn=yield gt.read();return De(gt.app,{lastSentHeartbeatDate:null!==(wt=Re.lastSentHeartbeatDate)&&void 0!==wt?wt:xn.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var gt=this;return(0,p.Z)(function*(){var wt;if(yield gt._canUseIndexedDBPromise){const xn=yield gt.read();return De(gt.app,{lastSentHeartbeatDate:null!==(wt=Re.lastSentHeartbeatDate)&&void 0!==wt?wt:xn.lastSentHeartbeatDate,heartbeats:[...xn.heartbeats,...Re.heartbeats]})}})()}}function Ot(Oe){return(0,le.L)(JSON.stringify({version:2,heartbeats:Oe})).length}!function hn(Oe){Mn(new F.wA("platform-logger",Re=>new It(Re),"PRIVATE")),Mn(new F.wA("heartbeat",Re=>new ae(Re),"PRIVATE")),ke(Nt,"0.9.13",Oe),ke(Nt,"0.9.13","esm2017"),ke("fire-js","")}("")},4859:(Lt,Le,R)=>{R.d(Le,{H0:()=>te,wA:()=>B});var p=R(5861),F=R(2090);class B{constructor(ee,ue,ye){this.name=ee,this.instanceFactory=ue,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ee){return this.instantiationMode=ee,this}setMultipleInstances(ee){return this.multipleInstances=ee,this}setServiceProps(ee){return this.serviceProps=ee,this}setInstanceCreatedCallback(ee){return this.onInstanceCreated=ee,this}}const le="[DEFAULT]";class he{constructor(ee,ue){this.name=ee,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ee){const ue=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(ue)){const ye=new F.BH;if(this.instancesDeferred.set(ue,ye),this.isInitialized(ue)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:ue});ut&&ye.resolve(ut)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(ee){var ue;const ye=this.normalizeInstanceIdentifier(ee?.identifier),ut=null!==(ue=ee?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(rt){if(ut)return null;throw rt}}getComponent(){return this.component}setComponent(ee){if(ee.name!==this.name)throw Error(`Mismatching Component ${ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ee,this.shouldAutoInitialize()){if(function Ee(_e){return"EAGER"===_e.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[ue,ye]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(ue);try{const rt=this.getOrInitializeService({instanceIdentifier:ut});ye.resolve(rt)}catch{}}}}clearInstance(ee=le){this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)}delete(){var ee=this;return(0,p.Z)(function*(){const ue=Array.from(ee.instances.values());yield Promise.all([...ue.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...ue.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ee=le){return this.instances.has(ee)}getOptions(ee=le){return this.instancesOptions.get(ee)||{}}initialize(ee={}){const{options:ue={}}=ee,ye=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:ye,options:ue});for(const[rt,Ye]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(rt)&&Ye.resolve(ut);return ut}onInit(ee,ue){var ye;const ut=this.normalizeInstanceIdentifier(ue),rt=null!==(ye=this.onInitCallbacks.get(ut))&&void 0!==ye?ye:new Set;rt.add(ee),this.onInitCallbacks.set(ut,rt);const Ye=this.instances.get(ut);return Ye&&ee(Ye,ut),()=>{rt.delete(ee)}}invokeOnInitCallbacks(ee,ue){const ye=this.onInitCallbacks.get(ue);if(ye)for(const ut of ye)try{ut(ee,ue)}catch{}}getOrInitializeService({instanceIdentifier:ee,options:ue={}}){let ye=this.instances.get(ee);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=ee,_e===le?void 0:_e),options:ue}),this.instances.set(ee,ye),this.instancesOptions.set(ee,ue),this.invokeOnInitCallbacks(ye,ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ee,ye)}catch{}var _e;return ye||null}normalizeInstanceIdentifier(ee=le){return this.component?this.component.multipleInstances?ee:le:ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(ee){this.name=ee,this.providers=new Map}addComponent(ee){const ue=this.getProvider(ee.name);if(ue.isComponentSet())throw new Error(`Component ${ee.name} has already been registered with ${this.name}`);ue.setComponent(ee)}addOrOverwriteComponent(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)}getProvider(ee){if(this.providers.has(ee))return this.providers.get(ee);const ue=new he(ee,this);return this.providers.set(ee,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Lt,Le,R)=>{R.d(Le,{Am:()=>_e,Ub:()=>te,Yd:()=>Ee,in:()=>F});const p=[];var F=(()=>{return(ee=F||(F={}))[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",F;var ee})();const B={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},le=F.INFO,he={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},we=(ee,ue,...ye)=>{if(ue<ee.logLevel)return;const ut=(new Date).toISOString(),rt=he[ue];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[rt](`[${ut}]  ${ee.name}:`,...ye)};class Ee{constructor(ue){this.name=ue,this._logLevel=le,this._logHandler=we,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in F))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?B[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...ue),this._logHandler(this,F.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...ue),this._logHandler(this,F.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,F.INFO,...ue),this._logHandler(this,F.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,F.WARN,...ue),this._logHandler(this,F.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...ue),this._logHandler(this,F.ERROR,...ue)}}function te(ee){p.forEach(ue=>{ue.setLogLevel(ee)})}function _e(ee,ue){for(const ye of p){let ut=null;ue&&ue.level&&(ut=B[ue.level]),ye.userLogHandler=null===ee?null:(rt,Ye,...Tt)=>{const Ke=Tt.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch{return null}}).filter(Ne=>Ne).join(" ");Ye>=(ut??rt.logLevel)&&ee({level:F[Ye].toLowerCase(),message:Ke,args:Tt,type:rt.name})}}}},259:(Lt,Le,R)=>{R.d(Le,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=R(6881);(0,p.registerVersion)("firebase","9.23.0","app")},9260:(Lt,Le,R)=>{R.d(Le,{Z:()=>p.Z});var p=R(3942);p.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Lt,Le,R)=>{R.r(Le);var p=R(5861),F=R(3942),B=R(1389),le=R(2090),Ee=(R(6881),R(1877),R(4859));function te(){return window}function ue(){return(ue=(0,p.Z)(function*(K,Y,G){var De;const{BuildInfo:ot}=te();(0,B.as)(Y.sessionId,"AuthEvent did not contain a session ID");const kt=yield Ne(Y.sessionId),en={};return(0,B.at)()?en.ibi=ot.packageName:(0,B.au)()?en.apn=ot.packageName:(0,B.av)(K,"operation-not-supported-in-this-environment"),ot.displayName&&(en.appDisplayName=ot.displayName),en.sessionId=kt,(0,B.aw)(K,G,Y.type,void 0,null!==(De=Y.eventId)&&void 0!==De?De:void 0,en)})).apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(K){const{BuildInfo:Y}=te(),G={};(0,B.at)()?G.iosBundleId=Y.packageName:(0,B.au)()?G.androidPackageName=Y.packageName:(0,B.av)(K,"operation-not-supported-in-this-environment"),yield(0,B.ax)(K,G)})).apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*(K,Y,G){const{cordova:De}=te();let ot=()=>{};try{yield new Promise((kt,en)=>{let re=null;function ae(){var Ue;kt();const Ot=null===(Ue=De.plugins.browsertab)||void 0===Ue?void 0:Ue.close;"function"==typeof Ot&&Ot(),"function"==typeof G?.close&&G.close()}function X(){re||(re=window.setTimeout(()=>{en((0,B.az)(K,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&X()}Y.addPassiveListener(ae),document.addEventListener("resume",X,!1),(0,B.au)()&&document.addEventListener("visibilitychange",Me,!1),ot=()=>{Y.removePassiveListener(ae),document.removeEventListener("resume",X,!1),document.removeEventListener("visibilitychange",Me,!1),re&&window.clearTimeout(re)}})}finally{ot()}})).apply(this,arguments)}function Ne(K){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,p.Z)(function*(K){const Y=ft(K),G=yield crypto.subtle.digest("SHA-256",Y);return Array.from(new Uint8Array(G)).map(ot=>ot.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ft(K){if((0,B.as)(/[0-9a-zA-Z]+/.test(K),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(K);const Y=new ArrayBuffer(K.length),G=new Uint8Array(Y);for(let De=0;De<K.length;De++)G[De]=K.charCodeAt(De);return G}class Xe extends B.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Y=>{this.resolveInialized=Y})}addPassiveListener(Y){this.passiveListeners.add(Y)}removePassiveListener(Y){this.passiveListeners.delete(Y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Y){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(Y)),super.onEvent(Y)}initialized(){var Y=this;return(0,p.Z)(function*(){yield Y.initPromise})()}}function st(K){return Se.apply(this,arguments)}function Se(){return(Se=(0,p.Z)(function*(K){const Y=yield It()._get(Bt(K));return Y&&(yield It()._remove(Bt(K))),Y})).apply(this,arguments)}function Yt(){const K=[],Y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const De=Math.floor(Math.random()*Y.length);K.push(Y.charAt(De))}return K.join("")}function It(){return(0,B.aC)(B.b)}function Bt(K){return(0,B.aD)("authEvent",K.config.apiKey,K.name)}function $e(K){if(!K?.includes("?"))return{};const[Y,...G]=K.split("?");return(0,le.zd)(G.join("?"))}function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,B.az)("no-auth-event")}}function At(){var K;return(null===(K=self?.location)||void 0===K?void 0:K.protocol)||null}function ln(K=(0,le.z$)()){return!("file:"!==At()&&"ionic:"!==At()&&"capacitor:"!==At()||!K.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pt(){try{const K=self.localStorage,Y=B.aL();if(K)return K.setItem(Y,"1"),K.removeItem(Y),!function Wn(K=(0,le.z$)()){return function $n(){return(0,le.w1)()&&11===document?.documentMode}()||function Yn(K=(0,le.z$)()){return/Edge\/\d+/.test(K)}(K)}()||(0,le.hl)()}catch{return An()&&(0,le.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jn(){return(function Qt(){return"http:"===At()||"https:"===At()}()||(0,le.ru)()||ln())&&!function cn(){return(0,le.b$)()||(0,le.UG)()}()&&Pt()&&!An()}function gr(){return ln()&&typeof document<"u"}function St(){return(St=(0,p.Z)(function*(){return!!gr()&&new Promise(K=>{const Y=setTimeout(()=>{K(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Y),K(!0)})})})).apply(this,arguments)}const Bn={LOCAL:"local",NONE:"none",SESSION:"session"},ar=B.aA,jr="persistence";function Dn(K){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(K){yield K._initializationPromise;const Y=qt(),G=B.aD(jr,K.config.apiKey,K.name);Y&&Y.setItem(G,K._getPersistence())})).apply(this,arguments)}function qt(){var K;try{return(null===(K=function gn(){return typeof window<"u"?window:null}())||void 0===K?void 0:K.sessionStorage)||null}catch{return null}}const on=B.aA;class Mn{constructor(){this.browserResolver=B.aC(B.k),this.cordovaResolver=B.aC(class qe{constructor(){this._redirectPersistence=B.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(Y){var G=this;return(0,p.Z)(function*(){const De=Y._key();let ot=G.eventManagers.get(De);return ot||(ot=new Xe(Y),G.eventManagers.set(De,ot),G.attachCallbackListeners(Y,ot)),ot})()}_openPopup(Y){(0,B.av)(Y,"operation-not-supported-in-this-environment")}_openRedirect(Y,G,De,ot){var kt=this;return(0,p.Z)(function*(){!function Ke(K){var Y,G,De,ot,kt,en,re,ae,X,Me;const Ue=te();(0,B.aA)("function"==typeof(null===(Y=Ue?.universalLinks)||void 0===Y?void 0:Y.subscribe),K,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,B.aA)(typeof(null===(G=Ue?.BuildInfo)||void 0===G?void 0:G.packageName)<"u",K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,B.aA)("function"==typeof(null===(kt=null===(ot=null===(De=Ue?.cordova)||void 0===De?void 0:De.plugins)||void 0===ot?void 0:ot.browsertab)||void 0===kt?void 0:kt.openUrl),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(ae=null===(re=null===(en=Ue?.cordova)||void 0===en?void 0:en.plugins)||void 0===re?void 0:re.browsertab)||void 0===ae?void 0:ae.isAvailable),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,B.aA)("function"==typeof(null===(Me=null===(X=Ue?.cordova)||void 0===X?void 0:X.InAppBrowser)||void 0===Me?void 0:Me.open),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Y);const en=yield kt._initialize(Y);yield en.initialized(),en.resetRedirect(),(0,B.aG)(),yield kt._originValidation(Y);const re=function nt(K,Y,G=null){return{type:Y,eventId:G,urlResponse:null,sessionId:Yt(),postBody:null,tenantId:K.tenantId,error:(0,B.az)(K,"no-auth-event")}}(Y,De,ot);yield function yt(K,Y){return It()._set(Bt(K),Y)}(Y,re);const ae=yield function ee(K,Y,G){return ue.apply(this,arguments)}(Y,re,G),X=yield function rt(K){const{cordova:Y}=te();return new Promise(G=>{Y.plugins.browsertab.isAvailable(De=>{let ot=null;De?Y.plugins.browsertab.openUrl(K):ot=Y.InAppBrowser.open(K,(0,B.ay)()?"_blank":"_system","location=yes"),G(ot)})})}(ae);return function Ye(K,Y,G){return Tt.apply(this,arguments)}(Y,en,X)})()}_isIframeWebStorageSupported(Y,G){throw new Error("Method not implemented.")}_originValidation(Y){const G=Y._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function ye(K){return ut.apply(this,arguments)}(Y)),this.originValidationPromises[G]}attachCallbackListeners(Y,G){const{universalLinks:De,handleOpenURL:ot,BuildInfo:kt}=te(),en=setTimeout((0,p.Z)(function*(){yield st(Y),G.onEvent(Ge())}),500),re=function(){var Me=(0,p.Z)(function*(Ue){clearTimeout(en);const Ot=yield st(Y);let hn=null;Ot&&Ue?.url&&(hn=function xt(K,Y){var G,De;const ot=function Or(K){const Y=$e(K),G=Y.link?decodeURIComponent(Y.link):void 0,De=$e(G).link,ot=Y.deep_link_id?decodeURIComponent(Y.deep_link_id):void 0;return $e(ot).link||ot||De||G||K}(Y);if(ot.includes("/__/auth/callback")){const kt=$e(ot),en=kt.firebaseError?function Nt(K){try{return JSON.parse(K)}catch{return null}}(decodeURIComponent(kt.firebaseError)):null,re=null===(De=null===(G=en?.code)||void 0===G?void 0:G.split("auth/"))||void 0===De?void 0:De[1],ae=re?(0,B.az)(re):null;return ae?{type:K.type,eventId:K.eventId,tenantId:K.tenantId,error:ae,urlResponse:null,sessionId:null,postBody:null}:{type:K.type,eventId:K.eventId,tenantId:K.tenantId,sessionId:K.sessionId,urlResponse:ot,postBody:null}}return null}(Ot,Ue.url)),G.onEvent(hn||Ge())});return function(Ot){return Me.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,re);const ae=ot,X=`${kt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Me=(0,p.Z)(function*(Ue){if(Ue.toLowerCase().startsWith(X)&&re({url:Ue}),"function"==typeof ae)try{ae(Ue)}catch(Ot){console.error(Ot)}});return function(Ue){return Me.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=B.a,this._completeRedirectFn=B.aE,this._overrideRedirectResult=B.aF}_initialize(Y){var G=this;return(0,p.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(Y)})()}_openPopup(Y,G,De,ot){var kt=this;return(0,p.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openPopup(Y,G,De,ot)})()}_openRedirect(Y,G,De,ot){var kt=this;return(0,p.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openRedirect(Y,G,De,ot)})()}_isIframeWebStorageSupported(Y,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Y,G)}_originValidation(Y){return this.assertedUnderlyingResolver._originValidation(Y)}get _shouldInitProactively(){return gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return on(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Y=this;return(0,p.Z)(function*(){if(Y.underlyingResolver)return;const G=yield function kr(){return St.apply(this,arguments)}();Y.underlyingResolver=G?Y.cordovaResolver:Y.browserResolver})()}}function mr(K){return K.unwrap()}function rr(K){return ur(K)}function ur(K){const{_tokenResponse:Y}=K instanceof le.ZR?K.customData:K;if(!Y)return null;if(!(K instanceof le.ZR)&&"temporaryProof"in Y&&"phoneNumber"in Y)return B.P.credentialFromResult(K);const G=Y.providerId;if(!G||G===B.p.PASSWORD)return null;let De;switch(G){case B.p.GOOGLE:De=B.V;break;case B.p.FACEBOOK:De=B.U;break;case B.p.GITHUB:De=B.W;break;case B.p.TWITTER:De=B.Z;break;default:const{oauthIdToken:ot,oauthAccessToken:kt,oauthTokenSecret:en,pendingToken:re,nonce:ae}=Y;return kt||en||ot||re?re?G.startsWith("saml.")?B.aO._create(G,re):B.L._fromParams({providerId:G,signInMethod:G,pendingToken:re,idToken:ot,accessToken:kt}):new B.X(G).credential({idToken:ot,accessToken:kt,rawNonce:ae}):null}return K instanceof le.ZR?De.credentialFromError(K):De.credentialFromResult(K)}function En(K,Y){return Y.catch(G=>{throw G instanceof le.ZR&&function rn(K,Y){var G;const De=null===(G=Y.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===Y?.code)Y.resolver=new Ft(K,B.aq(K,Y));else if(De){const ot=ur(Y),kt=Y;ot&&(kt.credential=ot,kt.tenantId=De.tenantId||void 0,kt.email=De.email||void 0,kt.phoneNumber=De.phoneNumber||void 0)}}(K,G),G}).then(G=>{const ot=G.user;return{operationType:G.operationType,credential:rr(G),additionalUserInfo:B.ao(G),user:Te.getOrCreate(ot)}})}function Fr(K,Y){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(K,Y){const G=yield Y;return{verificationId:G.verificationId,confirm:De=>En(K,G.confirm(De))}})).apply(this,arguments)}class Ft{constructor(Y,G){this.resolver=G,this.auth=function nr(K){return K.wrapped()}(Y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Y){return En(mr(this.auth),this.resolver.resolveSignIn(Y))}}class Te{constructor(Y){this._delegate=Y,this.multiFactor=B.ar(Y)}static getOrCreate(Y){return Te.USER_MAP.has(Y)||Te.USER_MAP.set(Y,new Te(Y)),Te.USER_MAP.get(Y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Y){return this._delegate.getIdTokenResult(Y)}getIdToken(Y){return this._delegate.getIdToken(Y)}linkAndRetrieveDataWithCredential(Y){return this.linkWithCredential(Y)}linkWithCredential(Y){var G=this;return(0,p.Z)(function*(){return En(G.auth,B.a0(G._delegate,Y))})()}linkWithPhoneNumber(Y,G){var De=this;return(0,p.Z)(function*(){return Fr(De.auth,B.l(De._delegate,Y,G))})()}linkWithPopup(Y){var G=this;return(0,p.Z)(function*(){return En(G.auth,B.d(G._delegate,Y,Mn))})()}linkWithRedirect(Y){var G=this;return(0,p.Z)(function*(){return yield Dn(B.aH(G.auth)),B.g(G._delegate,Y,Mn)})()}reauthenticateAndRetrieveDataWithCredential(Y){return this.reauthenticateWithCredential(Y)}reauthenticateWithCredential(Y){var G=this;return(0,p.Z)(function*(){return En(G.auth,B.a1(G._delegate,Y))})()}reauthenticateWithPhoneNumber(Y,G){return Fr(this.auth,B.r(this._delegate,Y,G))}reauthenticateWithPopup(Y){return En(this.auth,B.e(this._delegate,Y,Mn))}reauthenticateWithRedirect(Y){var G=this;return(0,p.Z)(function*(){return yield Dn(B.aH(G.auth)),B.h(G._delegate,Y,Mn)})()}sendEmailVerification(Y){return B.ae(this._delegate,Y)}unlink(Y){var G=this;return(0,p.Z)(function*(){return yield B.an(G._delegate,Y),G})()}updateEmail(Y){return B.aj(this._delegate,Y)}updatePassword(Y){return B.ak(this._delegate,Y)}updatePhoneNumber(Y){return B.u(this._delegate,Y)}updateProfile(Y){return B.ai(this._delegate,Y)}verifyBeforeUpdateEmail(Y,G){return B.af(this._delegate,Y,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Te.USER_MAP=new WeakMap;const Et=B.aA;let Qe=(()=>{class K{constructor(G,De){if(this.app=G,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ot}=G.options;Et(ot,"invalid-api-key",{appName:G.name}),Et(ot,"invalid-api-key",{appName:G.name});const kt=typeof window<"u"?Mn:void 0;this._delegate=De.initialize({options:{persistence:H(ot,G.name),popupRedirectResolver:kt}}),this._delegate._updateErrorMap(B.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Te.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,De){B.I(this._delegate,G,De)}applyActionCode(G){return B.a5(this._delegate,G)}checkActionCode(G){return B.a6(this._delegate,G)}confirmPasswordReset(G,De){return B.a4(this._delegate,G,De)}createUserWithEmailAndPassword(G,De){var ot=this;return(0,p.Z)(function*(){return En(ot._delegate,B.a8(ot._delegate,G,De))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return B.ad(this._delegate,G)}isSignInWithEmailLink(G){return B.ab(this._delegate,G)}getRedirectResult(){var G=this;return(0,p.Z)(function*(){Et(Jn(),G._delegate,"operation-not-supported-in-this-environment");const De=yield B.j(G._delegate,Mn);return De?En(G._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function ht(K,Y){(0,B.aH)(K)._logFramework(Y)}(this._delegate,G)}onAuthStateChanged(G,De,ot){const{next:kt,error:en,complete:re}=ke(G,De,ot);return this._delegate.onAuthStateChanged(kt,en,re)}onIdTokenChanged(G,De,ot){const{next:kt,error:en,complete:re}=ke(G,De,ot);return this._delegate.onIdTokenChanged(kt,en,re)}sendSignInLinkToEmail(G,De){return B.aa(this._delegate,G,De)}sendPasswordResetEmail(G,De){return B.a3(this._delegate,G,De||void 0)}setPersistence(G){var De=this;return(0,p.Z)(function*(){let ot;switch(function Nr(K,Y){ar(Object.values(Bn).includes(Y),K,"invalid-persistence-type"),(0,le.b$)()?ar(Y!==Bn.SESSION,K,"unsupported-persistence-type"):(0,le.UG)()?ar(Y===Bn.NONE,K,"unsupported-persistence-type"):An()?ar(Y===Bn.NONE||Y===Bn.LOCAL&&(0,le.hl)(),K,"unsupported-persistence-type"):ar(Y===Bn.NONE||Pt(),K,"unsupported-persistence-type")}(De._delegate,G),G){case Bn.SESSION:ot=B.a;break;case Bn.LOCAL:ot=(yield B.aC(B.i)._isAvailable())?B.i:B.b;break;case Bn.NONE:ot=B.N;break;default:return B.av("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(ot)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return En(this._delegate,B._(this._delegate))}signInWithCredential(G){return En(this._delegate,B.$(this._delegate,G))}signInWithCustomToken(G){return En(this._delegate,B.a2(this._delegate,G))}signInWithEmailAndPassword(G,De){return En(this._delegate,B.a9(this._delegate,G,De))}signInWithEmailLink(G,De){return En(this._delegate,B.ac(this._delegate,G,De))}signInWithPhoneNumber(G,De){return Fr(this._delegate,B.s(this._delegate,G,De))}signInWithPopup(G){var De=this;return(0,p.Z)(function*(){return Et(Jn(),De._delegate,"operation-not-supported-in-this-environment"),En(De._delegate,B.c(De._delegate,G,Mn))})()}signInWithRedirect(G){var De=this;return(0,p.Z)(function*(){return Et(Jn(),De._delegate,"operation-not-supported-in-this-environment"),yield Dn(De._delegate),B.f(De._delegate,G,Mn)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return B.a7(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return K.Persistence=Bn,K})();function ke(K,Y,G){let De=K;"function"!=typeof K&&({next:De,error:Y,complete:G}=K);const ot=De;return{next:en=>ot(en&&Te.getOrCreate(en)),error:Y,complete:G}}function H(K,Y){const G=function dn(K,Y){const G=qt();if(!G)return[];const De=B.aD(jr,K,Y);switch(G.getItem(De)){case Bn.NONE:return[B.N];case Bn.LOCAL:return[B.i,B.a];case Bn.SESSION:return[B.a];default:return[]}}(K,Y);if(typeof self<"u"&&!G.includes(B.i)&&G.push(B.i),typeof window<"u")for(const De of[B.b,B.a])G.includes(De)||G.push(De);return G.includes(B.N)||G.push(B.N),G}class oe{constructor(){this.providerId="phone",this._delegate=new B.P(mr(F.Z.auth()))}static credential(Y,G){return B.P.credential(Y,G)}verifyPhoneNumber(Y,G){return this._delegate.verifyPhoneNumber(Y,G)}unwrap(){return this._delegate}}oe.PHONE_SIGN_IN_METHOD=B.P.PHONE_SIGN_IN_METHOD,oe.PROVIDER_ID=B.P.PROVIDER_ID;const Fe=B.aA;class pt{constructor(Y,G,De=F.Z.app()){var ot;Fe(null===(ot=De.options)||void 0===ot?void 0:ot.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new B.R(Y,G,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function de(K){K.INTERNAL.registerComponent(new Ee.wA("auth-compat",Y=>{const G=Y.getProvider("app-compat").getImmediate(),De=Y.getProvider("auth");return new Qe(G,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:B.A.EMAIL_SIGNIN,PASSWORD_RESET:B.A.PASSWORD_RESET,RECOVER_EMAIL:B.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:B.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:B.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:B.A.VERIFY_EMAIL}},EmailAuthProvider:B.Q,FacebookAuthProvider:B.U,GithubAuthProvider:B.W,GoogleAuthProvider:B.V,OAuthProvider:B.X,SAMLAuthProvider:B.Y,PhoneAuthProvider:oe,PhoneMultiFactorGenerator:B.m,RecaptchaVerifier:pt,TwitterAuthProvider:B.Z,Auth:Qe,AuthCredential:B.J,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),K.registerVersion("@firebase/auth-compat","0.4.2")}(F.Z)},5861:(Lt,Le,R)=>{function p(B,le,he,we,Ee,te,_e){try{var ee=B[te](_e),ue=ee.value}catch(ye){return void he(ye)}ee.done?le(ue):Promise.resolve(ue).then(we,Ee)}function F(B){return function(){var le=this,he=arguments;return new Promise(function(we,Ee){var te=B.apply(le,he);function _e(ue){p(te,we,Ee,_e,ee,"next",ue)}function ee(ue){p(te,we,Ee,_e,ee,"throw",ue)}_e(void 0)})}}R.d(Le,{Z:()=>F})},7582:(Lt,Le,R)=>{function le($e,Pe){var qe={};for(var He in $e)Object.prototype.hasOwnProperty.call($e,He)&&Pe.indexOf(He)<0&&(qe[He]=$e[He]);if(null!=$e&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(He=Object.getOwnPropertySymbols($e);Ge<He.length;Ge++)Pe.indexOf(He[Ge])<0&&Object.prototype.propertyIsEnumerable.call($e,He[Ge])&&(qe[He[Ge]]=$e[He[Ge]])}return qe}function ye($e,Pe,qe,He){return new(qe||(qe=Promise))(function(ht,lt){function Dt(Qt){try{At(He.next(Qt))}catch(ln){lt(ln)}}function jt(Qt){try{At(He.throw(Qt))}catch(ln){lt(ln)}}function At(Qt){Qt.done?ht(Qt.value):function Ge(ht){return ht instanceof qe?ht:new qe(function(lt){lt(ht)})}(Qt.value).then(Dt,jt)}At((He=He.apply($e,Pe||[])).next())})}function fe($e){return this instanceof fe?(this.v=$e,this):new fe($e)}function Xe($e,Pe,qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,He=qe.apply($e,Pe||[]),ht=[];return Ge={},lt("next"),lt("throw"),lt("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function lt(cn){He[cn]&&(Ge[cn]=function($n){return new Promise(function(Yn,Wn){ht.push([cn,$n,Yn,Wn])>1||Dt(cn,$n)})})}function Dt(cn,$n){try{!function jt(cn){cn.value instanceof fe?Promise.resolve(cn.value.v).then(At,Qt):ln(ht[0][2],cn)}(He[cn]($n))}catch(Yn){ln(ht[0][3],Yn)}}function At(cn){Dt("next",cn)}function Qt(cn){Dt("throw",cn)}function ln(cn,$n){cn($n),ht.shift(),ht.length&&Dt(ht[0][0],ht[0][1])}}function yt($e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Pe=$e[Symbol.asyncIterator];return Pe?Pe.call($e):($e=function Tt($e){var Pe="function"==typeof Symbol&&Symbol.iterator,qe=Pe&&$e[Pe],He=0;if(qe)return qe.call($e);if($e&&"number"==typeof $e.length)return{next:function(){return $e&&He>=$e.length&&($e=void 0),{value:$e&&$e[He++],done:!$e}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}($e),qe={},He("next"),He("throw"),He("return"),qe[Symbol.asyncIterator]=function(){return this},qe);function He(ht){qe[ht]=$e[ht]&&function(lt){return new Promise(function(Dt,jt){!function Ge(ht,lt,Dt,jt){Promise.resolve(jt).then(function(At){ht({value:At,done:Dt})},lt)}(Dt,jt,(lt=$e[ht](lt)).done,lt.value)})}}}R.d(Le,{FC:()=>Xe,KL:()=>yt,_T:()=>le,mG:()=>ye,qq:()=>fe})}},Lt=>{Lt(Lt.s=2445)}]);